// Generated by Haxe 4.1.3+ac4eb0a87
(function ($hx_exports, $global) { "use strict";
$hx_exports["kha"] = $hx_exports["kha"] || {};
$hx_exports["kha"]["_Color"] = $hx_exports["kha"]["_Color"] || {};
;$hx_exports["kha"]["input"] = $hx_exports["kha"]["input"] || {};
var $hxClasses = {},$estr = function() { return js_Boot.__string_rec(this,''); },$hxEnums = $hxEnums || {},$_;
function $extend(from, fields) {
	var proto = Object.create(from);
	for (var name in fields) proto[name] = fields[name];
	if( fields.toString !== Object.prototype.toString ) proto.toString = fields.toString;
	return proto;
}
var HxOverrides = function() { };
$hxClasses["HxOverrides"] = HxOverrides;
HxOverrides.__name__ = "HxOverrides";
HxOverrides.strDate = function(s) {
	switch(s.length) {
	case 8:
		var k = s.split(":");
		var d = new Date();
		d["setTime"](0);
		d["setUTCHours"](k[0]);
		d["setUTCMinutes"](k[1]);
		d["setUTCSeconds"](k[2]);
		return d;
	case 10:
		var k = s.split("-");
		return new Date(k[0],k[1] - 1,k[2],0,0,0);
	case 19:
		var k = s.split(" ");
		var y = k[0].split("-");
		var t = k[1].split(":");
		return new Date(y[0],y[1] - 1,y[2],t[0],t[1],t[2]);
	default:
		throw haxe_Exception.thrown("Invalid date format : " + s);
	}
};
HxOverrides.cca = function(s,index) {
	var x = s.charCodeAt(index);
	if(x != x) {
		return undefined;
	}
	return x;
};
HxOverrides.substr = function(s,pos,len) {
	if(len == null) {
		len = s.length;
	} else if(len < 0) {
		if(pos == 0) {
			len = s.length + len;
		} else {
			return "";
		}
	}
	return s.substr(pos,len);
};
HxOverrides.remove = function(a,obj) {
	var i = a.indexOf(obj);
	if(i == -1) {
		return false;
	}
	a.splice(i,1);
	return true;
};
HxOverrides.now = function() {
	return Date.now();
};
var Main = function() { };
$hxClasses["Main"] = Main;
Main.__name__ = "Main";
Main.main = function() {
	Krom.setApplicationName("ArmorPaint");
	Main.tasks = 1;
	Main.tasks++;
	arm_Config.load(function() {
		Main.tasks--;
		Main.start();
	});
	Main.tasks--;
	Main.start();
};
Main.start = function() {
	if(Main.tasks > 0) {
		return;
	}
	arm_Config.init();
	var c = arm_Config.raw;
	var windowFeatures = 0;
	if(c.window_resizable) {
		windowFeatures |= 1;
	}
	if(c.window_maximizable) {
		windowFeatures |= 4;
	}
	if(c.window_minimizable) {
		windowFeatures |= 2;
	}
	kha_System.start(new kha_SystemOptions("untitled - ArmorPaint",-1,-1,new kha_WindowOptions(null,c.window_x,c.window_y,c.window_w,c.window_h,-1,true,windowFeatures,c.window_mode == 0 ? 0 : 1),new kha_FramebufferOptions(c.window_frequency,c.window_vsync,32,16,8,1)),function($window) {
		if(arm_Config.raw.layout == null) {
			arm_Config.initLayout();
		}
		Krom.setApplicationName("ArmorPaint");
		iron_App.init(function() {
			iron_Scene.setActive("Scene",function(o) {
				arm_render_Uniforms.init();
				var path = new iron_RenderPath();
				arm_render_Inc.init(path);
				if(arm_Context.renderMode == 1) {
					arm_render_RenderPathDeferred.init(path);
					arm_render_RenderPathForward.init(path);
					path.commands = arm_render_RenderPathForward.commands;
				} else {
					arm_render_RenderPathDeferred.init(path);
					path.commands = arm_render_RenderPathDeferred.commands;
				}
				iron_RenderPath.setActive(path);
				new arm_App();
			});
		});
	});
};
Math.__name__ = "Math";
var Reflect = function() { };
$hxClasses["Reflect"] = Reflect;
Reflect.__name__ = "Reflect";
Reflect.field = function(o,field) {
	try {
		return o[field];
	} catch( _g ) {
		return null;
	}
};
Reflect.setField = function(o,field,value) {
	o[field] = value;
};
Reflect.setProperty = function(o,field,value) {
	var tmp;
	var tmp1;
	if(o.__properties__) {
		tmp = o.__properties__["set_" + field];
		tmp1 = tmp;
	} else {
		tmp1 = false;
	}
	if(tmp1) {
		o[tmp](value);
	} else {
		o[field] = value;
	}
};
Reflect.fields = function(o) {
	var a = [];
	if(o != null) {
		var hasOwnProperty = Object.prototype.hasOwnProperty;
		for( var f in o ) {
		if(f != "__id__" && f != "hx__closures__" && hasOwnProperty.call(o,f)) {
			a.push(f);
		}
		}
	}
	return a;
};
Reflect.isFunction = function(f) {
	if(typeof(f) == "function") {
		return !(f.__name__ || f.__ename__);
	} else {
		return false;
	}
};
Reflect.compare = function(a,b) {
	if(a == b) {
		return 0;
	} else if(a > b) {
		return 1;
	} else {
		return -1;
	}
};
var Std = function() { };
$hxClasses["Std"] = Std;
Std.__name__ = "Std";
Std.is = function(v,t) {
	return js_Boot.__instanceof(v,t);
};
Std.string = function(s) {
	return js_Boot.__string_rec(s,"");
};
Std.parseInt = function(x) {
	if(x != null) {
		var _g = 0;
		var _g1 = x.length;
		while(_g < _g1) {
			var i = _g++;
			var c = x.charCodeAt(i);
			if(c <= 8 || c >= 14 && c != 32 && c != 45) {
				var nc = x.charCodeAt(i + 1);
				var v = parseInt(x,nc == 120 || nc == 88 ? 16 : 10);
				if(isNaN(v)) {
					return null;
				} else {
					return v;
				}
			}
		}
	}
	return null;
};
var StringTools = function() { };
$hxClasses["StringTools"] = StringTools;
StringTools.__name__ = "StringTools";
StringTools.startsWith = function(s,start) {
	if(s.length >= start.length) {
		return s.lastIndexOf(start,0) == 0;
	} else {
		return false;
	}
};
StringTools.endsWith = function(s,end) {
	var elen = end.length;
	var slen = s.length;
	if(slen >= elen) {
		return s.indexOf(end,slen - elen) == slen - elen;
	} else {
		return false;
	}
};
StringTools.isSpace = function(s,pos) {
	var c = HxOverrides.cca(s,pos);
	if(!(c > 8 && c < 14)) {
		return c == 32;
	} else {
		return true;
	}
};
StringTools.rtrim = function(s) {
	var l = s.length;
	var r = 0;
	while(r < l && StringTools.isSpace(s,l - r - 1)) ++r;
	if(r > 0) {
		return HxOverrides.substr(s,0,l - r);
	} else {
		return s;
	}
};
StringTools.replace = function(s,sub,by) {
	return s.split(sub).join(by);
};
var ValueType = $hxEnums["ValueType"] = { __ename__ : true, __constructs__ : ["TNull","TInt","TFloat","TBool","TObject","TFunction","TClass","TEnum","TUnknown"]
	,TNull: {_hx_index:0,__enum__:"ValueType",toString:$estr}
	,TInt: {_hx_index:1,__enum__:"ValueType",toString:$estr}
	,TFloat: {_hx_index:2,__enum__:"ValueType",toString:$estr}
	,TBool: {_hx_index:3,__enum__:"ValueType",toString:$estr}
	,TObject: {_hx_index:4,__enum__:"ValueType",toString:$estr}
	,TFunction: {_hx_index:5,__enum__:"ValueType",toString:$estr}
	,TClass: ($_=function(c) { return {_hx_index:6,c:c,__enum__:"ValueType",toString:$estr}; },$_.__params__ = ["c"],$_)
	,TEnum: ($_=function(e) { return {_hx_index:7,e:e,__enum__:"ValueType",toString:$estr}; },$_.__params__ = ["e"],$_)
	,TUnknown: {_hx_index:8,__enum__:"ValueType",toString:$estr}
};
var Type = function() { };
$hxClasses["Type"] = Type;
Type.__name__ = "Type";
Type.createInstance = function(cl,args) {
	return new (Function.prototype.bind.apply(cl,[null].concat(args)));
};
Type.createEnum = function(e,constr,params) {
	var f = Reflect.field(e,constr);
	if(f == null) {
		throw haxe_Exception.thrown("No such constructor " + constr);
	}
	if(Reflect.isFunction(f)) {
		if(params == null) {
			throw haxe_Exception.thrown("Constructor " + constr + " need parameters");
		}
		return f.apply(e,params);
	}
	if(params != null && params.length != 0) {
		throw haxe_Exception.thrown("Constructor " + constr + " does not need parameters");
	}
	return f;
};
Type.typeof = function(v) {
	switch(typeof(v)) {
	case "boolean":
		return ValueType.TBool;
	case "function":
		if(v.__name__ || v.__ename__) {
			return ValueType.TObject;
		}
		return ValueType.TFunction;
	case "number":
		if(Math.ceil(v) == v % 2147483648.0) {
			return ValueType.TInt;
		}
		return ValueType.TFloat;
	case "object":
		if(v == null) {
			return ValueType.TNull;
		}
		var e = v.__enum__;
		if(e != null) {
			return ValueType.TEnum($hxEnums[e]);
		}
		var c = js_Boot.getClass(v);
		if(c != null) {
			return ValueType.TClass(c);
		}
		return ValueType.TObject;
	case "string":
		return ValueType.TClass(String);
	case "undefined":
		return ValueType.TNull;
	default:
		return ValueType.TUnknown;
	}
};
Type.enumEq = function(a,b) {
	if(a == b) {
		return true;
	}
	try {
		var e = a.__enum__;
		if(e == null || e != b.__enum__) {
			return false;
		}
		if(a._hx_index != b._hx_index) {
			return false;
		}
		var enm = $hxEnums[e];
		var ctorName = enm.__constructs__[a._hx_index];
		var params = enm[ctorName].__params__;
		var _g = 0;
		while(_g < params.length) {
			var f = params[_g];
			++_g;
			if(!Type.enumEq(a[f],b[f])) {
				return false;
			}
		}
	} catch( _g ) {
		return false;
	}
	return true;
};
var zui_Handle = function(ops) {
	this.changed = false;
	this.dragY = 0;
	this.dragX = 0;
	this.dragEnabled = false;
	this.lastMaxY = 0.0;
	this.lastMaxX = 0.0;
	this.layout = 0;
	this.scrollEnabled = false;
	this.scrollOffset = 0.0;
	this.redraws = 2;
	this.texture = null;
	this.text = "";
	this.value = 0.0;
	this.color = -1;
	this.position = 0;
	this.selected = false;
	if(ops != null) {
		if(ops.selected != null) {
			this.selected = ops.selected;
		}
		if(ops.position != null) {
			this.position = ops.position;
		}
		if(ops.value != null) {
			this.value = ops.value;
		}
		if(ops.text != null) {
			this.text = ops.text;
		}
		if(ops.color != null) {
			this.color = ops.color;
		}
		if(ops.layout != null) {
			this.layout = ops.layout;
		}
	}
};
$hxClasses["zui.Handle"] = zui_Handle;
zui_Handle.__name__ = "zui.Handle";
zui_Handle.prototype = {
	nest: function(i,ops) {
		if(this.children == null) {
			this.children = new haxe_ds_IntMap();
		}
		var c = this.children.h[i];
		if(c == null) {
			c = new zui_Handle(ops);
			this.children.h[i] = c;
		}
		return c;
	}
	,__class__: zui_Handle
};
var arm_App = function() {
	arm_Log.init();
	arm_App.lastWindowWidth = kha_System.windowWidth();
	arm_App.lastWindowHeight = kha_System.windowHeight();
	iron_App.onResize = arm_App.onResize;
	kha_System.notifyOnDropFiles(function(dropPath) {
		dropPath = StringTools.rtrim(dropPath);
		arm_App.dropPaths.push(dropPath);
	});
	kha_System.notifyOnApplicationState(function() {
		arm_Context.foregroundEvent = true;
		arm_Context.lastPaintX = -1;
		arm_Context.lastPaintY = -1;
	},function() {
	},function() {
	},function() {
		iron_system_Input.getKeyboard().upListener(18);
		iron_system_Input.getKeyboard().upListener(91);
	},function() {
	});
	Krom.setSaveAndQuitCallback(arm_App.saveAndQuitCallback);
	iron_data_Data.getFont("font.ttf",function(f) {
		iron_data_Data.getImage("color_wheel.k",function(image) {
			arm_App.font = f;
			arm_Translator.loadTranslations(arm_Config.raw.locale);
			arm_ui_UIFiles.filename = arm_Translator.tr("untitled");
			arm_App.theme = zui_Themes.dark;
			arm_App.theme.FILL_WINDOW_BG = true;
			if(arm_Config.raw.locale == "en") {
				var kimg = Object.create(kha_KravurImage.prototype);
				kimg.mySize = 13;
				kimg.width = 128;
				kimg.height = 128;
				kimg.baseline = 10;
				var this1 = new Array(arm_data_ConstData.font_x0.length);
				var chars = this1;
				var _g = [];
				var _g1 = 32;
				while(_g1 < 127) {
					var i = _g1++;
					_g.push(i);
				}
				kha_graphics2_Graphics.fontGlyphs = _g;
				var _g = 0;
				while(_g < 95) {
					var i = _g++;
					chars[i] = new kha_graphics2_truetype_Stbtt_$bakedchar();
				}
				var _g = 0;
				var _g1 = arm_data_ConstData.font_x0.length;
				while(_g < _g1) {
					var i = _g++;
					chars[i].x0 = arm_data_ConstData.font_x0[i];
				}
				var _g = 0;
				var _g1 = arm_data_ConstData.font_y0.length;
				while(_g < _g1) {
					var i = _g++;
					chars[i].y0 = arm_data_ConstData.font_y0[i];
				}
				var _g = 0;
				var _g1 = arm_data_ConstData.font_x1.length;
				while(_g < _g1) {
					var i = _g++;
					chars[i].x1 = arm_data_ConstData.font_x1[i];
				}
				var _g = 0;
				var _g1 = arm_data_ConstData.font_y1.length;
				while(_g < _g1) {
					var i = _g++;
					chars[i].y1 = arm_data_ConstData.font_y1[i];
				}
				var _g = 0;
				var _g1 = arm_data_ConstData.font_xoff.length;
				while(_g < _g1) {
					var i = _g++;
					chars[i].xoff = arm_data_ConstData.font_xoff[i];
				}
				var _g = 0;
				var _g1 = arm_data_ConstData.font_yoff.length;
				while(_g < _g1) {
					var i = _g++;
					chars[i].yoff = arm_data_ConstData.font_yoff[i];
				}
				var _g = 0;
				var _g1 = arm_data_ConstData.font_xadvance.length;
				while(_g < _g1) {
					var i = _g++;
					chars[i].xadvance = arm_data_ConstData.font_xadvance[i];
				}
				kimg.chars = chars;
				iron_data_Data.getBlob("font13.bin",function(fontbin) {
					var tmp = fontbin.toBytes();
					kimg.texture = kha_Image.fromBytes(tmp,128,128,1);
					(js_Boot.__cast(arm_App.font , kha_Kravur)).images.h[130095] = kimg;
				});
			}
			arm_App.colorWheel = image;
			zui_Nodes.enumTexts = arm_App.enumTexts;
			zui_Nodes.tr = arm_Translator.tr;
			arm_App.uiBox = new zui_Zui({ font : f, scaleFactor : arm_Config.raw.window_scale, color_wheel : arm_App.colorWheel});
			arm_App.uiMenu = new zui_Zui({ font : f, scaleFactor : arm_Config.raw.window_scale, color_wheel : arm_App.colorWheel});
			arm_App.defaultElementH = arm_App.uiMenu.t.ELEMENT_H;
			arm_Args.parse();
			iron_App.notifyOnUpdate(arm_App.update);
			new arm_ui_UISidebar();
			new arm_ui_UINodes();
			new arm_ui_UIView2D();
			new arm_plugin_Camera();
			iron_App.notifyOnRender2D(($_=arm_ui_UIView2D.inst,$bind($_,$_.render)));
			iron_App.notifyOnUpdate(($_=arm_ui_UIView2D.inst,$bind($_,$_.update)));
			iron_App.notifyOnRender2D(($_=arm_ui_UISidebar.inst,$bind($_,$_.renderCursor)));
			iron_App.notifyOnUpdate(($_=arm_ui_UINodes.inst,$bind($_,$_.update)));
			iron_App.notifyOnRender2D(($_=arm_ui_UINodes.inst,$bind($_,$_.render)));
			iron_App.notifyOnUpdate(($_=arm_ui_UISidebar.inst,$bind($_,$_.update)));
			iron_App.notifyOnRender2D(($_=arm_ui_UISidebar.inst,$bind($_,$_.render)));
			iron_App.notifyOnRender2D(arm_App.render);
			arm_App.appx = arm_ui_UIToolbar.inst.toolbarw;
			arm_App.appy = arm_ui_UIHeader.inst.headerh * 2;
			var cam = iron_Scene.active.camera;
			cam.data.raw.fov = (cam.data.raw.fov * 100 | 0) / 100;
			cam.buildProjection();
			arm_Args.run();
			if(arm_Config.raw.theme != "default.json") {
				arm_ui_BoxPreferences.loadTheme(arm_Config.raw.theme);
			}
		});
	});
};
$hxClasses["arm.App"] = arm_App;
arm_App.__name__ = "arm.App";
arm_App.saveAndQuitCallback = function(save) {
	arm_App.saveWindowRect();
	if(save) {
		arm_Project.projectSave(true);
	} else {
		kha_System.stop();
	}
};
arm_App.w = function() {
	if(arm_ui_UISidebar.inst != null && arm_Context.materialPreview) {
		return 256;
	}
	if(arm_ui_UISidebar.inst != null && arm_Context.decalPreview) {
		return 512;
	}
	var res = 0;
	if(arm_ui_UINodes.inst == null || arm_ui_UISidebar.inst == null) {
		var sidebarw = arm_Config.raw.layout == null ? 280 : arm_Config.raw.layout[0];
		res = kha_System.windowWidth() - sidebarw - 36;
	} else if(arm_ui_UINodes.inst.show || arm_ui_UIView2D.inst.show) {
		res = kha_System.windowWidth() - arm_Config.raw.layout[0] - arm_Config.raw.layout[4] - arm_ui_UIToolbar.inst.toolbarw;
	} else if(arm_ui_UISidebar.inst.show) {
		res = kha_System.windowWidth() - arm_Config.raw.layout[0] - arm_ui_UIToolbar.inst.toolbarw;
	} else {
		res = kha_System.windowWidth();
	}
	if(arm_ui_UISidebar.inst != null && arm_Context.viewIndex > -1) {
		res = res / 2 | 0;
	}
	if(arm_Context.paint2dView) {
		res = arm_ui_UIView2D.inst.ww;
	}
	if(res > 0) {
		return res;
	} else {
		return 1;
	}
};
arm_App.h = function() {
	if(arm_ui_UISidebar.inst != null && arm_Context.materialPreview) {
		return 256;
	}
	if(arm_ui_UISidebar.inst != null && arm_Context.decalPreview) {
		return 512;
	}
	var res = kha_System.windowHeight();
	if(arm_ui_UISidebar.inst == null) {
		res -= 88;
	} else if(arm_ui_UISidebar.inst != null && arm_ui_UISidebar.inst.show && res > 0) {
		res -= (56 * arm_Config.raw.window_scale | 0) + arm_Config.raw.layout[6];
	}
	if(res > 0) {
		return res;
	} else {
		return 1;
	}
};
arm_App.x = function() {
	if(arm_Context.viewIndex == 1) {
		return arm_App.appx + arm_App.w();
	} else {
		return arm_App.appx;
	}
};
arm_App.y = function() {
	return arm_App.appy;
};
arm_App.onResize = function() {
	if(kha_System.windowWidth() == 0 || kha_System.windowHeight() == 0) {
		return;
	}
	var ratioW = kha_System.windowWidth() / arm_App.lastWindowWidth;
	arm_App.lastWindowWidth = kha_System.windowWidth();
	var ratioH = kha_System.windowHeight() / arm_App.lastWindowHeight;
	arm_App.lastWindowHeight = kha_System.windowHeight();
	arm_Config.raw.layout[4] = arm_Config.raw.layout[4] * ratioW | 0;
	arm_Config.raw.layout[1] = arm_Config.raw.layout[1] * ratioH | 0;
	arm_Config.raw.layout[2] = arm_Config.raw.layout[2] * ratioH | 0;
	arm_Config.raw.layout[3] = kha_System.windowHeight() - arm_Config.raw.layout[1] - arm_Config.raw.layout[2];
	arm_App.resize();
};
arm_App.saveWindowRect = function() {
	arm_Config.raw.window_w = kha_System.windowWidth();
	arm_Config.raw.window_h = kha_System.windowHeight();
	arm_Config.raw.window_x = kha_Window.get(0).get_x();
	arm_Config.raw.window_y = kha_Window.get(0).get_y();
	arm_Config.save();
};
arm_App.resize = function() {
	if(kha_System.windowWidth() == 0 || kha_System.windowHeight() == 0) {
		return;
	}
	var cam = iron_Scene.active.camera;
	if(cam.data.raw.ortho != null) {
		cam.data.raw.ortho[2] = -2 * (arm_App.h() / arm_App.w());
		cam.data.raw.ortho[3] = 2 * (arm_App.h() / arm_App.w());
	}
	cam.buildProjection();
	if(arm_Context.cameraType == 1) {
		arm_util_ViewportUtil.updateCameraType(arm_Context.cameraType);
	}
	arm_Context.ddirty = 2;
	if(arm_ui_UISidebar.inst.show) {
		arm_App.appx = arm_ui_UIToolbar.inst.toolbarw;
		arm_App.appy = arm_ui_UIHeader.inst.headerh * 2;
	} else {
		arm_App.appx = 0;
		arm_App.appy = 0;
	}
	if(arm_ui_UINodes.inst.grid != null) {
		arm_ui_UINodes.inst.grid.unload();
		arm_ui_UINodes.inst.grid = null;
	}
	arm_App.redrawUI();
};
arm_App.redrawUI = function() {
	arm_ui_UISidebar.inst.hwnd0.redraws = 2;
	arm_ui_UISidebar.inst.hwnd1.redraws = 2;
	arm_ui_UISidebar.inst.hwnd2.redraws = 2;
	arm_ui_UIHeader.inst.headerHandle.redraws = 2;
	arm_ui_UIToolbar.inst.toolbarHandle.redraws = 2;
	arm_ui_UIStatus.inst.statusHandle.redraws = 2;
	arm_ui_UIMenubar.inst.menuHandle.redraws = 2;
	arm_ui_UIMenubar.inst.workspaceHandle.redraws = 2;
	arm_ui_UINodes.inst.hwnd.redraws = 2;
	arm_ui_UIView2D.inst.hwnd.redraws = 2;
	if(arm_Context.ddirty < 0) {
		arm_Context.ddirty = 0;
	}
};
arm_App.update = function() {
	var mouse = iron_system_Input.getMouse();
	if(mouse.movementX != 0 || mouse.movementY != 0) {
		Krom.setMouseCursor(0);
	}
	if((arm_App.dragAsset != null || arm_App.dragMaterial != null || arm_App.dragLayer != null || arm_App.dragFile != null) && (mouse.movementX != 0 || mouse.movementY != 0)) {
		arm_App.isDragging = true;
	}
	if(mouse.released() && (arm_App.dragAsset != null || arm_App.dragMaterial != null || arm_App.dragLayer != null || arm_App.dragFile != null)) {
		var mx = mouse.x;
		var my = mouse.y;
		var inViewport = arm_Context.paintVec.x < 1 && arm_Context.paintVec.x > 0 && arm_Context.paintVec.y < 1 && arm_Context.paintVec.y > 0;
		var inLayers = arm_ui_UISidebar.inst.htab0.position == 0 && mx > arm_ui_UISidebar.inst.tabx && my < arm_Config.raw.layout[1];
		var in2dView = arm_ui_UIView2D.inst.show && arm_ui_UIView2D.inst.type == 0 && mx > arm_ui_UIView2D.inst.wx && mx < arm_ui_UIView2D.inst.wx + arm_ui_UIView2D.inst.ww && my > arm_ui_UIView2D.inst.wy && my < arm_ui_UIView2D.inst.wy + arm_ui_UIView2D.inst.wh;
		var inNodes = arm_ui_UINodes.inst.show && mx > arm_ui_UINodes.inst.wx && mx < arm_ui_UINodes.inst.wx + arm_ui_UINodes.inst.ww && my > arm_ui_UINodes.inst.wy && my < arm_ui_UINodes.inst.wy + arm_ui_UINodes.inst.wh;
		if(arm_App.dragAsset != null) {
			if(inNodes) {
				var index = 0;
				var _g = 0;
				var _g1 = arm_Project.assets.length;
				while(_g < _g1) {
					var i = _g++;
					if(arm_Project.assets[i] == arm_App.dragAsset) {
						index = i;
						break;
					}
				}
				arm_ui_UINodes.inst.acceptAssetDrag(index);
			} else if(inLayers || in2dView) {
				arm_Layers.createImageMask(arm_App.dragAsset);
			} else if(inViewport) {
				if(StringTools.endsWith(arm_App.dragAsset.file.toLowerCase(),".hdr")) {
					arm_io_ImportEnvmap.run(arm_App.dragAsset.file,arm_Project.getImage(arm_App.dragAsset));
				}
			}
			arm_App.dragAsset = null;
		} else if(arm_App.dragMaterial != null) {
			if(inViewport || inLayers || in2dView) {
				arm_Layers.createFillLayer();
			} else if(inNodes) {
				var index = 0;
				var _g = 0;
				var _g1 = arm_Project.materials.length;
				while(_g < _g1) {
					var i = _g++;
					if(arm_Project.materials[i] == arm_App.dragMaterial) {
						index = i;
						break;
					}
				}
				arm_ui_UINodes.inst.acceptMaterialDrag(index);
			}
			arm_App.dragMaterial = null;
		} else if(arm_App.dragLayer != null) {
			if(inNodes) {
				var index = 0;
				var _g = 0;
				var _g1 = arm_Project.layers.length;
				while(_g < _g1) {
					var i = _g++;
					if(arm_Project.layers[i] == arm_App.dragLayer) {
						index = i;
						break;
					}
				}
				arm_ui_UINodes.inst.acceptLayerDrag(index);
			} else if(inLayers && arm_App.isDragging) {
				arm_App.dragLayer.move(arm_Context.dragDestination);
				arm_node_MakeMaterial.parseMeshMaterial();
			}
			arm_App.dragLayer = null;
		} else if(arm_App.dragFile != null) {
			var statush = arm_Config.raw.layout[6];
			if(!(mx > arm_App.x() && mx < arm_App.x() + (kha_System.windowWidth() - arm_ui_UIToolbar.inst.toolbarw - arm_Config.raw.layout[0]) && my > kha_System.windowHeight() - statush)) {
				arm_App.dropX = mouse.x;
				arm_App.dropY = mouse.y;
				arm_io_ImportAsset.run(arm_App.dragFile,arm_App.dropX,arm_App.dropY);
			}
			arm_App.dragFile = null;
		}
		Krom.setMouseCursor(0);
		arm_App.isDragging = false;
	}
	arm_App.handleDropPaths();
	if(arm_ui_UIBox.show) {
		arm_ui_UIBox.update();
	}
	if(arm_ui_UIMenu.show) {
		arm_ui_UIMenu.update();
	}
	zui_Zui.alwaysRedrawWindow = !arm_Context.cacheDraws || arm_ui_UIMenu.show || arm_ui_UIBox.show || arm_App.isDragging || arm_Context.tool == 9 || (arm_Context.tool == 3 || arm_Context.tool == 4) || arm_ui_UIView2D.inst.show || !arm_Config.raw.brush_3d || arm_Context.frame < 3;
	if(zui_Zui.alwaysRedrawWindow && arm_Context.ddirty < 0) {
		arm_Context.ddirty = 0;
	}
};
arm_App.handleDropPaths = function() {
	if(arm_App.dropPaths.length > 0) {
		var mouse = iron_system_Input.getMouse();
		arm_App.dropX = mouse.x;
		arm_App.dropY = mouse.y;
		arm_io_ImportAsset.run(arm_App.dropPaths.shift(),arm_App.dropX,arm_App.dropY);
	}
};
arm_App.getDragBackground = function() {
	var icons = arm_Res.bundled.h["icons.k"];
	if(arm_App.dragLayer != null && arm_App.dragLayer.getChildren() == null) {
		return arm_Res.tile50(icons,4,1);
	} else {
		return null;
	}
};
arm_App.getDragImage = function() {
	arm_App.dragTint = -1;
	arm_App.dragRect = null;
	if(arm_App.dragAsset != null) {
		return arm_Project.getImage(arm_App.dragAsset);
	}
	if(arm_App.dragMaterial != null) {
		return arm_App.dragMaterial.imageIcon;
	}
	if(arm_App.dragLayer != null && arm_Context.layerIsMask) {
		return arm_App.dragLayer.texpaint_mask_preview;
	}
	if(arm_App.dragLayer != null && arm_App.dragLayer.getChildren() != null) {
		var icons = arm_Res.bundled.h["icons.k"];
		arm_App.dragRect = arm_App.dragLayer.show_panel ? arm_Res.tile50(icons,8,1) : arm_Res.tile50(icons,2,1);
		arm_App.dragTint = arm_ui_UISidebar.inst.ui.t.LABEL_COL - 2105376;
		return icons;
	}
	if(arm_App.dragFile != null) {
		var icons = arm_Res.bundled.h["icons.k"];
		arm_App.dragRect = arm_App.dragFile.indexOf(".") > 0 ? arm_Res.tile50(icons,3,1) : arm_Res.tile50(icons,2,1);
		arm_App.dragTint = arm_ui_UISidebar.inst.ui.t.HIGHLIGHT_COL;
		return icons;
	} else {
		return arm_App.dragLayer.texpaint_preview;
	}
};
arm_App.render = function(g) {
	if(kha_System.windowWidth() == 0 || kha_System.windowHeight() == 0) {
		return;
	}
	if(arm_Context.frame == 2) {
		arm_util_RenderUtil.makeMaterialPreview();
		arm_ui_UISidebar.inst.hwnd1.redraws = 2;
		arm_node_MakeMaterial.parseMeshMaterial();
		arm_node_MakeMaterial.parsePaintMaterial();
		arm_Context.ddirty = 0;
		arm_History.reset();
		if(arm_History.undoLayers == null) {
			arm_History.undoLayers = [];
			var _g = 0;
			var _g1 = arm_Config.raw.undo_steps;
			while(_g < _g1) {
				++_g;
				var l = new arm_data_LayerSlot("_undo" + arm_History.undoLayers.length);
				l.createMask(0,false);
				arm_History.undoLayers.push(l);
			}
		}
		if(arm_Config.raw.workspace != 0) {
			arm_ui_UIHeader.inst.worktab.position = arm_Config.raw.workspace;
			arm_ui_UIMenubar.inst.workspaceHandle.redraws = 2;
			if(arm_ui_UIHeader.inst.worktab.position == 2) {
				arm_Context.selectTool(11);
			} else {
				arm_Context.selectTool(10);
			}
			if(arm_ui_UIHeader.inst.worktab.position == 1) {
				arm_Layers.updateFillLayers();
				arm_ui_UINodes.inst.show = true;
			}
		}
	} else if(arm_Context.frame == 3) {
		arm_Context.ddirty = 1;
	}
	arm_Context.frame++;
	var mouse = iron_system_Input.getMouse();
	if(arm_App.isDragging) {
		Krom.setMouseCursor(1);
		var img = arm_App.getDragImage();
		var size = 50 * arm_ui_UISidebar.inst.ui.ops.scaleFactor;
		var ratio = size / img.get_width();
		var h = img.get_height() * ratio;
		g.set_color(arm_App.dragTint);
		var bgRect = arm_App.getDragBackground();
		if(bgRect != null) {
			g.drawScaledSubImage(arm_Res.bundled.h["icons.k"],bgRect.x,bgRect.y,bgRect.w,bgRect.h,mouse.x + arm_App.dragOffX,mouse.y + arm_App.dragOffY,size,h);
		}
		if(arm_App.dragRect == null) {
			g.drawScaledImage(img,mouse.x + arm_App.dragOffX,mouse.y + arm_App.dragOffY,size,h);
		} else {
			g.drawScaledSubImage(img,arm_App.dragRect.x,arm_App.dragRect.y,arm_App.dragRect.w,arm_App.dragRect.h,mouse.x + arm_App.dragOffX,mouse.y + arm_App.dragOffY,size,h);
		}
		g.set_color(-1);
	}
	arm_App.uiEnabled = !arm_ui_UIBox.show && !(arm_ui_UIMenu.show && mouse.y > arm_ui_UIHeader.inst.headerh);
	if(arm_ui_UIBox.show) {
		arm_ui_UIBox.render(g);
	}
	if(arm_ui_UIMenu.show) {
		arm_ui_UIMenu.render(g);
	}
	if(mouse.down()) {
		arm_Context.lastPaintVecX = arm_Context.paintVec.x;
		arm_Context.lastPaintVecY = arm_Context.paintVec.y;
	} else {
		if(arm_Context.splitView) {
			arm_Context.viewIndex = mouse.x - arm_App.x() > arm_App.w() / 2 ? 1 : 0;
		}
		arm_Context.lastPaintVecX = (mouse.x - arm_App.x()) / arm_App.w();
		arm_Context.lastPaintVecY = (mouse.y - arm_App.y()) / arm_App.h();
		arm_Context.viewIndex = -1;
	}
};
arm_App.enumTexts = function(nodeType) {
	if(nodeType == "TEX_IMAGE") {
		if(arm_Project.assetNames.length > 0) {
			return arm_Project.assetNames;
		} else {
			return [""];
		}
	} else if(nodeType == "LAYER" || nodeType == "LAYER_MASK") {
		var layerNames = [];
		var _g = 0;
		var _g1 = arm_Project.layers;
		while(_g < _g1.length) layerNames.push(_g1[_g++].name);
		return layerNames;
	} else if(nodeType == "MATERIAL") {
		var materialNames = [];
		var _g = 0;
		var _g1 = arm_Project.materials;
		while(_g < _g1.length) materialNames.push(_g1[_g++].canvas.name);
		return materialNames;
	}
	return null;
};
arm_App.getAssetIndex = function(fileName) {
	var i = arm_Project.assetNames.indexOf(fileName);
	if(i >= 0) {
		return i;
	} else {
		return 0;
	}
};
arm_App.notifyOnNextFrame = function(f) {
	var _update = null;
	_update = function() {
		iron_App.notifyOnInit(f);
		iron_App.removeUpdate(_update);
	};
	iron_App.notifyOnUpdate(_update);
};
arm_App.prototype = {
	__class__: arm_App
};
var arm_Args = function() { };
$hxClasses["arm.Args"] = arm_Args;
arm_Args.__name__ = "arm.Args";
arm_Args.parse = function() {
	if(Krom.getArgCount() > 1) {
		arm_Args.useArgs = true;
		var _g = 0;
		var _g1 = Krom.getArgCount();
		while(_g < _g1) {
			var v = _g++;
			var currentArg = Krom.getArg(v);
			if(arm_sys_Path.isProject(currentArg)) {
				arm_Args.projectPath = currentArg;
				arm_Project.filepath = arm_Args.projectPath;
			}
			if(arm_sys_Path.isMesh(currentArg) || arm_sys_Path.isTexture(currentArg)) {
				arm_Args.assetPath = currentArg;
			}
			if(currentArg == "--reload-mesh") {
				arm_Args.reloadMesh = true;
			}
			if(currentArg == "--export-textures" && v + 3 <= Krom.getArgCount()) {
				arm_Args.exportTextures = true;
				arm_Args.exportTexturesType = Krom.getArg(v + 1);
				arm_Args.exportTexturesPreset = Krom.getArg(v + 2);
				arm_Args.exportTexturesPath = Krom.getArg(v + 3);
			}
			if(currentArg == "--export-mesh" && v + 1 <= Krom.getArgCount()) {
				arm_Args.exportMesh = true;
				arm_Args.exportMeshPath = Krom.getArg(v + 1);
			}
			if(currentArg == "--b" || currentArg == "--background") {
				arm_Args.backgroundProcessing = true;
			}
		}
	}
};
arm_Args.run = function() {
	if(arm_Args.useArgs) {
		iron_App.notifyOnInit(function() {
			if(arm_Args.projectPath != "") {
				arm_io_ImportAsset.run(arm_Args.projectPath,-1,-1,false);
			}
			if(arm_Args.assetPath != "") {
				arm_io_ImportAsset.run(arm_Args.assetPath,-1,-1,false);
			}
			if(arm_Args.reloadMesh) {
				arm_Project.reimportMesh();
			}
			if(arm_Args.exportTextures) {
				if(arm_Args.exportTexturesType == "png" || arm_Args.exportTexturesType == "jpg" || arm_Args.exportTexturesType == "exr16" || arm_Args.exportTexturesType == "exr32") {
					if(arm_sys_Path.isFolder(arm_Args.exportTexturesPath)) {
						if(arm_Args.exportTexturesType == "png") {
							arm_App.bitsHandle.position = 0;
							arm_Context.formatType = 0;
						}
						if(arm_Args.exportTexturesType == "jpg") {
							arm_App.bitsHandle.position = 0;
							arm_Context.formatType = 1;
						}
						if(arm_Args.exportTexturesType == "exr16") {
							arm_App.bitsHandle.position = 1;
						}
						if(arm_Args.exportTexturesType == "exr32") {
							arm_App.bitsHandle.position = 2;
						}
						arm_Context.layersExport = 0;
						arm_ui_BoxExport.files = arm_sys_File.readDirectory(arm_sys_Path.data() + arm_sys_Path.sep + "export_presets");
						var _g = 0;
						var _g1 = arm_ui_BoxExport.files.length;
						while(_g < _g1) {
							var i = _g++;
							arm_ui_BoxExport.files[i] = HxOverrides.substr(arm_ui_BoxExport.files[i],0,arm_ui_BoxExport.files[i].length - 5);
						}
						var file = "export_presets/" + arm_ui_BoxExport.files[0] + ".json";
						var _g = 0;
						var _g1 = arm_ui_BoxExport.files;
						while(_g < _g1.length) {
							var f = _g1[_g];
							++_g;
							if(f == arm_Args.exportTexturesPreset) {
								file = "export_presets/" + arm_ui_BoxExport.files[arm_ui_BoxExport.files.indexOf(f)] + ".json";
							}
						}
						iron_data_Data.getBlob(file,function(blob) {
							arm_ui_BoxExport.preset = JSON.parse(blob.toString());
							iron_data_Data.deleteBlob("export_presets/" + file);
						});
						iron_App.notifyOnInit(function() {
							arm_io_ExportTexture.run(arm_Args.exportTexturesPath);
						});
						haxe_Log.trace("Export Textures: done",{ fileName : "arm/Args.hx", lineNumber : 105, className : "arm.Args", methodName : "run"});
					} else {
						haxe_Log.trace("Export Textures: export directory invalid",{ fileName : "arm/Args.hx", lineNumber : 108, className : "arm.Args", methodName : "run"});
					}
				} else {
					haxe_Log.trace("Export Textures: type invalid",{ fileName : "arm/Args.hx", lineNumber : 112, className : "arm.Args", methodName : "run"});
				}
			}
			if(arm_Args.exportMesh) {
				if(arm_sys_Path.isFolder(arm_Args.exportMeshPath)) {
					var f = arm_ui_UIFiles.filename;
					if(f == "") {
						f = arm_Translator.tr("untitled");
					}
					arm_io_ExportMesh.run(arm_Args.exportMeshPath + arm_sys_Path.sep + f,false);
					haxe_Log.trace("Export Mesh: done",{ fileName : "arm/Args.hx", lineNumber : 120, className : "arm.Args", methodName : "run"});
				} else {
					haxe_Log.trace("Export Mesh: export directory invalid",{ fileName : "arm/Args.hx", lineNumber : 123, className : "arm.Args", methodName : "run"});
				}
			}
			if(arm_Args.backgroundProcessing) {
				kha_System.stop();
			}
		});
	}
};
var arm_Config = function() { };
$hxClasses["arm.Config"] = arm_Config;
arm_Config.__name__ = "arm.Config";
arm_Config.load = function(done) {
	try {
		iron_data_Data.getBlob((arm_sys_Path.isProtected() ? Krom.savePath() : "") + "config.arm",function(blob) {
			arm_Config.configLoaded = true;
			arm_Config.raw = JSON.parse(blob.toString());
			done();
		});
	} catch( _g ) {
		done();
	}
};
arm_Config.save = function() {
	Krom.fileSaveBytes((arm_sys_Path.isProtected() ? Krom.savePath() : arm_sys_Path.data() + arm_sys_Path.sep) + "config.arm",haxe_io_Bytes.ofString(JSON.stringify(arm_Config.raw)).b.bufferValue);
};
arm_Config.init = function() {
	while(true) {
		if(!arm_Config.configLoaded || arm_Config.raw == null) {
			arm_Config.raw = { };
			arm_Config.raw.locale = "system";
			arm_Config.raw.window_mode = 0;
			arm_Config.raw.window_resizable = true;
			arm_Config.raw.window_minimizable = true;
			arm_Config.raw.window_maximizable = true;
			arm_Config.raw.window_w = 1600;
			arm_Config.raw.window_h = 900;
			arm_Config.raw.window_x = -1;
			arm_Config.raw.window_y = -1;
			arm_Config.raw.window_scale = 1.0;
			var disp = kha_Display.get_primary();
			if(disp.get_width() >= 2560 && disp.get_height() >= 1600) {
				arm_Config.raw.window_scale = 2.0;
			}
			arm_Config.raw.window_vsync = true;
			arm_Config.raw.window_frequency = disp.get_frequency();
			arm_Config.raw.rp_bloom = false;
			arm_Config.raw.rp_gi = false;
			arm_Config.raw.rp_vignette = 0.4;
			arm_Config.raw.rp_motionblur = false;
			arm_Config.raw.rp_ssgi = true;
			arm_Config.raw.rp_ssr = false;
			arm_Config.raw.rp_supersample = 1.0;
			arm_Config.raw.version = Main.version;
			arm_Config.raw.sha = Main.sha;
			arm_Config.raw.recent_projects = [];
			arm_Config.raw.bookmarks = [];
			arm_Config.raw.plugins = [];
			arm_Config.raw.keymap = "default.json";
			arm_Config.raw.theme = "default.json";
			arm_Config.raw.undo_steps = 4;
			arm_Config.raw.pressure_radius = true;
			arm_Config.raw.pressure_hardness = true;
			arm_Config.raw.pressure_angle = false;
			arm_Config.raw.pressure_opacity = false;
			arm_Config.raw.pressure_sensitivity = 1.0;
			arm_Config.raw.material_live = true;
			arm_Config.raw.brush_3d = true;
			arm_Config.raw.brush_live = false;
			arm_Config.raw.camera_speed = 1.0;
			arm_Config.raw.invert_zoom_direction = false;
			arm_Config.raw.displace_strength = 0.0;
			arm_Config.raw.native_file_browser = true;
			arm_Config.raw.show_asset_names = false;
			arm_Config.raw.node_preview = true;
			arm_Config.raw.workspace = 0;
		} else if(arm_Config.raw.sha != Main.sha) {
			arm_Config.configLoaded = false;
			continue;
		}
		arm_Config.loadKeymap();
		return;
	}
};
arm_Config.restore = function() {
	zui_Handle.global = new zui_Handle();
	arm_Config.configLoaded = false;
	var _layout = arm_Config.raw.layout;
	arm_Config.init();
	arm_Config.raw.layout = _layout;
	arm_Config.initLayout();
	arm_Translator.loadTranslations(arm_Config.raw.locale);
	arm_Config.applyConfig();
	arm_ui_BoxPreferences.loadTheme(arm_Config.raw.theme);
};
arm_Config.applyConfig = function() {
	arm_Config.raw.rp_ssgi = arm_Context.hssgi.selected;
	arm_Config.raw.rp_ssr = arm_Context.hssr.selected;
	arm_Config.raw.rp_bloom = arm_Context.hbloom.selected;
	arm_Config.raw.rp_gi = arm_Context.hvxao.selected;
	var i = arm_Context.hsupersample.position;
	arm_Config.raw.rp_supersample = i == 0 ? 0.25 : i == 1 ? 0.5 : i == 2 ? 1.0 : i == 3 ? 1.5 : i == 4 ? 2.0 : 4.0;
	iron_object_Uniforms.defaultFilter = arm_Config.raw.rp_supersample < 1.0 ? 0 : 1;
	arm_Config.save();
	arm_Context.ddirty = 2;
	var current = kha_graphics4_Graphics2.current;
	if(current != null) {
		current.end();
	}
	arm_render_Inc.applyConfig();
	if(current != null) {
		current.begin(false);
	}
};
arm_Config.loadKeymap = function() {
	iron_data_Data.getBlob("keymap_presets/" + arm_Config.raw.keymap,function(blob) {
		arm_Config.keymap = JSON.parse(blob.toString());
	});
};
arm_Config.saveKeymap = function() {
	Krom.fileSaveBytes(iron_data_Data.dataPath + "keymap_presets/" + arm_Config.raw.keymap,haxe_io_Bytes.ofString(JSON.stringify(arm_Config.keymap)).b.bufferValue);
};
arm_Config.getTextureRes = function() {
	var res = arm_App.resHandle.position;
	if(res == 0) {
		return 128;
	} else if(res == 1) {
		return 256;
	} else if(res == 2) {
		return 512;
	} else if(res == 3) {
		return 1024;
	} else if(res == 4) {
		return 2048;
	} else if(res == 5) {
		return 4096;
	} else if(res == 6) {
		return 8192;
	} else if(res == 7) {
		return 16384;
	} else {
		return 0;
	}
};
arm_Config.getTextureResX = function() {
	if(arm_Context.projectAspectRatio == 2) {
		return arm_Config.getTextureRes() / 2 | 0;
	} else {
		return arm_Config.getTextureRes();
	}
};
arm_Config.getTextureResY = function() {
	if(arm_Context.projectAspectRatio == 1) {
		return arm_Config.getTextureRes() / 2 | 0;
	} else {
		return arm_Config.getTextureRes();
	}
};
arm_Config.getTextureResBias = function() {
	var res = arm_App.resHandle.position;
	if(res == 0) {
		return 16.0;
	} else if(res == 1) {
		return 8.0;
	} else if(res == 2) {
		return 4.0;
	} else if(res == 3) {
		return 2.0;
	} else if(res == 4) {
		return 1.5;
	} else if(res == 5) {
		return 1.0;
	} else if(res == 6) {
		return 0.5;
	} else if(res == 7) {
		return 0.25;
	} else {
		return 1.0;
	}
};
arm_Config.getTextureResPos = function(i) {
	if(i == 128) {
		return 0;
	} else if(i == 256) {
		return 1;
	} else if(i == 512) {
		return 2;
	} else if(i == 1024) {
		return 3;
	} else if(i == 2048) {
		return 4;
	} else if(i == 4096) {
		return 5;
	} else if(i == 8192) {
		return 6;
	} else if(i == 16384) {
		return 7;
	} else {
		return 0;
	}
};
arm_Config.initLayout = function() {
	var show2d = arm_ui_UINodes.inst != null && arm_ui_UINodes.inst.show || arm_ui_UIView2D.inst != null && arm_ui_UIView2D.inst.show;
	var tmp = 280 * arm_Config.raw.window_scale | 0;
	var tmp1 = kha_System.windowHeight() / 3 | 0;
	var tmp2 = kha_System.windowHeight() / 3 | 0;
	var tmp3 = kha_System.windowHeight() / 3 | 0;
	var tmp4 = show2d ? (arm_App.w() + arm_Config.raw.layout[4]) / 2 | 0 : arm_App.w() / 2 | 0;
	var tmp5 = arm_App.h() / 2 | 0;
	arm_Config.raw.layout = [tmp,tmp1,tmp2,tmp3,tmp4,tmp5,32 * arm_Config.raw.window_scale | 0];
};
var iron_math_Vec4 = function(x,y,z,w) {
	if(w == null) {
		w = 1.0;
	}
	if(z == null) {
		z = 0.0;
	}
	if(y == null) {
		y = 0.0;
	}
	if(x == null) {
		x = 0.0;
	}
	this.x = x;
	this.y = y;
	this.z = z;
	this.w = w;
};
$hxClasses["iron.math.Vec4"] = iron_math_Vec4;
iron_math_Vec4.__name__ = "iron.math.Vec4";
iron_math_Vec4.prototype = {
	__class__: iron_math_Vec4
};
var kha_math_FastMatrix4 = function(_00,_10,_20,_30,_01,_11,_21,_31,_02,_12,_22,_32,_03,_13,_23,_33) {
	this._00 = _00;
	this._10 = _10;
	this._20 = _20;
	this._30 = _30;
	this._01 = _01;
	this._11 = _11;
	this._21 = _21;
	this._31 = _31;
	this._02 = _02;
	this._12 = _12;
	this._22 = _22;
	this._32 = _32;
	this._03 = _03;
	this._13 = _13;
	this._23 = _23;
	this._33 = _33;
};
$hxClasses["kha.math.FastMatrix4"] = kha_math_FastMatrix4;
kha_math_FastMatrix4.__name__ = "kha.math.FastMatrix4";
kha_math_FastMatrix4.prototype = {
	__class__: kha_math_FastMatrix4
};
var iron_math_Mat4 = function(_00,_10,_20,_30,_01,_11,_21,_31,_02,_12,_22,_32,_03,_13,_23,_33) {
	this.self = new kha_math_FastMatrix4(_00,_10,_20,_30,_01,_11,_21,_31,_02,_12,_22,_32,_03,_13,_23,_33);
};
$hxClasses["iron.math.Mat4"] = iron_math_Mat4;
iron_math_Mat4.__name__ = "iron.math.Mat4";
iron_math_Mat4.prototype = {
	__class__: iron_math_Mat4
};
var arm_Context = function() { };
$hxClasses["arm.Context"] = arm_Context;
arm_Context.__name__ = "arm.Context";
arm_Context.selectMaterialScene = function(i) {
	if(arm_Project.materialsScene.length <= i || arm_Context.object == arm_Context.paintObject) {
		return;
	}
	arm_Context.materialScene = arm_Project.materialsScene[i];
	if(((arm_Context.object) instanceof iron_object_MeshObject)) {
		var mats = (js_Boot.__cast(arm_Context.object , iron_object_MeshObject)).materials;
		var _g = 0;
		var _g1 = mats.length;
		while(_g < _g1) mats[_g++] = arm_Context.materialScene.data;
	}
	arm_node_MakeMaterial.parsePaintMaterial();
	arm_ui_UISidebar.inst.hwnd0.redraws = 2;
};
arm_Context.selectMaterial = function(i) {
	if(arm_Project.materials.length <= i) {
		return;
	}
	arm_Context.setMaterial(arm_Project.materials[i]);
};
arm_Context.setMaterial = function(m) {
	if(arm_Project.materials.indexOf(m) == -1) {
		return;
	}
	arm_Context.material = m;
	arm_node_MakeMaterial.parsePaintMaterial();
	arm_ui_UISidebar.inst.hwnd1.redraws = 2;
	arm_ui_UIHeader.inst.headerHandle.redraws = 2;
	arm_ui_UINodes.inst.hwnd.redraws = 2;
	if(arm_Context.tool == 3 || arm_Context.tool == 4) {
		iron_App.notifyOnInit(function() {
			arm_util_RenderUtil.makeDecalPreview();
		});
	}
};
arm_Context.selectBrush = function(i) {
	if(arm_Project.brushes.length <= i) {
		return;
	}
	arm_Context.setBrush(arm_Project.brushes[i]);
};
arm_Context.setBrush = function(b) {
	if(arm_Project.brushes.indexOf(b) == -1) {
		return;
	}
	arm_Context.brush = b;
	arm_node_MakeMaterial.parseBrush();
	arm_Context.parseBrushInputs();
	arm_ui_UISidebar.inst.hwnd1.redraws = 2;
	arm_ui_UINodes.inst.hwnd.redraws = 2;
};
arm_Context.selectFont = function(i) {
	if(arm_Project.fonts.length <= i) {
		return;
	}
	arm_Context.setFont(arm_Project.fonts[i]);
};
arm_Context.setFont = function(f) {
	if(arm_Project.fonts.indexOf(f) == -1) {
		return;
	}
	arm_Context.font = f;
	arm_util_RenderUtil.makeTextPreview();
	arm_util_RenderUtil.makeDecalPreview();
	arm_ui_UISidebar.inst.hwnd2.redraws = 2;
	arm_ui_UIView2D.inst.hwnd.redraws = 2;
};
arm_Context.setLayer = function(l,isMask) {
	if(isMask == null) {
		isMask = false;
	}
	if(l == arm_Context.layer && arm_Context.layerIsMask == isMask) {
		return;
	}
	arm_Context.layer = l;
	arm_Context.layerIsMask = isMask;
	arm_ui_UIHeader.inst.headerHandle.redraws = 2;
	var current = kha_graphics4_Graphics2.current;
	if(current != null) {
		current.end();
	}
	arm_Layers.setObjectMask();
	arm_node_MakeMaterial.parseMeshMaterial();
	arm_node_MakeMaterial.parsePaintMaterial();
	if(current != null) {
		current.begin(false);
	}
	arm_ui_UISidebar.inst.hwnd0.redraws = 2;
	arm_ui_UIView2D.inst.hwnd.redraws = 2;
};
arm_Context.selectTool = function(i) {
	arm_Context.tool = i;
	arm_node_MakeMaterial.parsePaintMaterial();
	arm_node_MakeMaterial.parseMeshMaterial();
	arm_ui_UIHeader.inst.headerHandle.redraws = 2;
	arm_ui_UIToolbar.inst.toolbarHandle.redraws = 2;
	arm_Context.ddirty = 3;
	arm_Context.initTool();
};
arm_Context.initTool = function() {
	if(arm_Context.tool == 3 || arm_Context.tool == 4) {
		if(arm_Context.tool == 4) {
			arm_util_RenderUtil.makeTextPreview();
		}
		arm_util_RenderUtil.makeDecalPreview();
	}
	if(arm_Context.tool == 7) {
		arm_util_ParticleUtil.initParticle();
		arm_node_MakeMaterial.parseParticleMaterial();
	}
};
arm_Context.selectObject = function(o) {
	arm_Context.object = o;
	if(arm_ui_UIHeader.inst.worktab.position == 3) {
		if(((o) instanceof iron_object_MeshObject)) {
			var _g = 0;
			var _g1 = arm_Project.materialsScene.length;
			while(_g < _g1) {
				var i = _g++;
				if(arm_Project.materialsScene[i].data == (js_Boot.__cast(o , iron_object_MeshObject)).materials[0]) {
					arm_Context.materialScene = arm_Project.materialsScene[i];
					arm_ui_UISidebar.inst.hwnd0.redraws = 2;
					break;
				}
			}
		}
	}
};
arm_Context.selectPaintObject = function(o) {
	arm_ui_UIHeader.inst.headerHandle.redraws = 2;
	var _g = 0;
	var _g1 = arm_Project.paintObjects;
	while(_g < _g1.length) _g1[_g++].skip_context = "paint";
	arm_Context.paintObject = o;
	var mask = arm_Context.layer.objectMask;
	if(arm_Context.layerFilter > 0) {
		mask = arm_Context.layerFilter;
	}
	if(arm_Context.mergedObject == null || mask > 0) {
		arm_Context.paintObject.skip_context = "";
	}
	arm_util_UVUtil.uvmapCached = false;
	arm_util_UVUtil.trianglemapCached = false;
};
arm_Context.mainObject = function() {
	var _g = 0;
	var _g1 = arm_Project.paintObjects;
	while(_g < _g1.length) {
		var po = _g1[_g];
		++_g;
		if(po.children.length > 0) {
			return po;
		}
	}
	return arm_Project.paintObjects[0];
};
arm_Context.loadEnvmap = function() {
	if(!arm_Context.envmapLoaded) {
		arm_Context.envmapLoaded = true;
		var _this = iron_data_Data.cachedImages;
		if(Object.prototype.hasOwnProperty.call(_this.h,"World_radiance.k")) {
			delete(_this.h["World_radiance.k"]);
		}
	}
	iron_Scene.active.world.loadEnvmap(function(_) {
	});
	if(arm_Context.savedEnvmap == null) {
		arm_Context.savedEnvmap = iron_Scene.active.world.envmap;
	}
};
var arm_History = function() { };
$hxClasses["arm.History"] = arm_History;
arm_History.__name__ = "arm.History";
arm_History.undo = function() {
	if(arm_History.undos > 0) {
		var step = arm_History.steps[arm_History.steps.length - 1 - arm_History.redos];
		if(step.name == arm_Translator.tr("New Layer")) {
			arm_Context.layer = arm_Project.layers[step.layer];
			arm_Context.layer.delete();
		} else if(step.name == arm_Translator.tr("Delete Layer")) {
			var l = arm_Layers.newLayer(false);
			var _this = arm_Project.layers;
			var pos = step.layer;
			var x = arm_Project.layers.pop();
			_this.splice(pos,0,x);
			arm_History.undoI = arm_History.undoI - 1 < 0 ? arm_Config.raw.undo_steps - 1 : arm_History.undoI - 1;
			var lay = arm_History.undoLayers[arm_History.undoI];
			l.swap(lay);
			if(step.has_mask) {
				l.createMask(0,false);
				l.swapMask(lay);
				arm_Context.setLayer(l,true);
				arm_Context.layersPreviewDirty = true;
			}
			l.maskOpacity = step.layer_opacity;
			l.blending = step.layer_blending;
			l.objectMask = step.layer_object;
			arm_node_MakeMaterial.parseMeshMaterial();
		} else if(step.name == arm_Translator.tr("Clear Layer")) {
			arm_History.undoI = arm_History.undoI - 1 < 0 ? arm_Config.raw.undo_steps - 1 : arm_History.undoI - 1;
			arm_Context.layer.swap(arm_History.undoLayers[arm_History.undoI]);
			arm_Context.layerPreviewDirty = true;
		} else if(step.name == arm_Translator.tr("Duplicate Layer")) {
			arm_Context.layer = arm_Project.layers[step.layer + 1];
			arm_Context.layer.delete();
		} else if(step.name == arm_Translator.tr("Order Layers")) {
			var target = arm_Project.layers[step.prev_order];
			arm_Project.layers[step.prev_order] = arm_Project.layers[step.layer];
			arm_Project.layers[step.layer] = target;
		} else if(step.name == arm_Translator.tr("Merge Layers")) {
			arm_Context.layer = arm_Project.layers[step.layer];
			arm_Context.layer.delete();
			arm_Context.layer = arm_Layers.newLayer(false);
			var _this = arm_Project.layers;
			var pos = step.layer;
			var x = arm_Project.layers.pop();
			_this.splice(pos,0,x);
			arm_History.undoI = arm_History.undoI - 1 < 0 ? arm_Config.raw.undo_steps - 1 : arm_History.undoI - 1;
			arm_Context.layer.swap(arm_History.undoLayers[arm_History.undoI]);
			arm_Context.layer = arm_Layers.newLayer(false);
			var _this = arm_Project.layers;
			var pos = step.layer + 1;
			var x = arm_Project.layers.pop();
			_this.splice(pos,0,x);
			arm_History.undoI = arm_History.undoI - 1 < 0 ? arm_Config.raw.undo_steps - 1 : arm_History.undoI - 1;
			var lay = arm_History.undoLayers[arm_History.undoI];
			arm_Context.layer.swap(lay);
			if(step.has_mask) {
				arm_Context.layer.createMask(0,false);
				arm_Context.layer.swapMask(lay);
				arm_Context.setLayer(arm_Context.layer,true);
			}
			arm_Context.layer.maskOpacity = step.layer_opacity;
			arm_Context.layer.blending = step.layer_blending;
			arm_Context.layer.objectMask = step.layer_object;
			arm_Context.layersPreviewDirty = true;
			arm_node_MakeMaterial.parseMeshMaterial();
		} else if(step.name == arm_Translator.tr("New Mask")) {
			arm_History.undoI = arm_History.undoI - 1 < 0 ? arm_Config.raw.undo_steps - 1 : arm_History.undoI - 1;
			var lay = arm_History.undoLayers[arm_History.undoI];
			arm_Context.setLayer(arm_Project.layers[step.layer],true);
			arm_Context.layer.swapMask(lay);
			arm_Context.layer.deleteMask();
			arm_Context.setLayer(arm_Project.layers[step.layer],false);
		} else if(step.name == arm_Translator.tr("Delete Mask")) {
			arm_Context.setLayer(arm_Project.layers[step.layer],false);
			arm_Context.layer.createMask(0,false);
			arm_History.undoI = arm_History.undoI - 1 < 0 ? arm_Config.raw.undo_steps - 1 : arm_History.undoI - 1;
			arm_Context.layer.swapMask(arm_History.undoLayers[arm_History.undoI]);
			arm_Context.layersPreviewDirty = true;
			arm_Context.setLayer(arm_Context.layer,true);
		} else if(step.name == arm_Translator.tr("Apply Mask")) {
			arm_Context.layer = arm_Project.layers[step.layer];
			arm_Context.layer.delete();
			arm_Context.layer = arm_Layers.newLayer(false);
			var _this = arm_Project.layers;
			var pos = step.layer;
			var x = arm_Project.layers.pop();
			_this.splice(pos,0,x);
			arm_History.undoI = arm_History.undoI - 1 < 0 ? arm_Config.raw.undo_steps - 1 : arm_History.undoI - 1;
			var lay = arm_History.undoLayers[arm_History.undoI];
			arm_Context.layer.swap(lay);
			arm_Context.layer.createMask(0,false);
			arm_Context.layer.swapMask(lay);
			arm_Context.layersPreviewDirty = true;
			arm_Context.setLayer(arm_Context.layer,true);
		} else if(step.name == "Apply Filter") {
			arm_History.undoI = arm_History.undoI - 1 < 0 ? arm_Config.raw.undo_steps - 1 : arm_History.undoI - 1;
			var lay = arm_History.undoLayers[arm_History.undoI];
			arm_Context.setLayer(arm_Project.layers[step.layer],step.is_mask);
			arm_Context.layer.swap(lay);
			arm_Context.layer.createMask(0,false);
			arm_Context.layer.swapMask(lay);
			lay.deleteMask();
			arm_Context.layerPreviewDirty = true;
		} else if(step.name == arm_Translator.tr("To Fill Layer")) {
			arm_Context.layer.toPaintLayer();
			arm_History.undoI = arm_History.undoI - 1 < 0 ? arm_Config.raw.undo_steps - 1 : arm_History.undoI - 1;
			arm_Context.layer.swap(arm_History.undoLayers[arm_History.undoI]);
		} else if(step.name == arm_Translator.tr("To Paint Layer")) {
			arm_History.undoI = arm_History.undoI - 1 < 0 ? arm_Config.raw.undo_steps - 1 : arm_History.undoI - 1;
			arm_Context.layer.swap(arm_History.undoLayers[arm_History.undoI]);
			arm_Context.layer.fill_layer = arm_Project.materials[step.material];
		} else if(step.name == arm_Translator.tr("To Fill Mask")) {
			arm_Context.layer.toPaintMask();
			arm_History.undoI = arm_History.undoI - 1 < 0 ? arm_Config.raw.undo_steps - 1 : arm_History.undoI - 1;
			arm_Context.layer.swapMask(arm_History.undoLayers[arm_History.undoI]);
		} else if(step.name == arm_Translator.tr("To Paint Mask")) {
			arm_History.undoI = arm_History.undoI - 1 < 0 ? arm_Config.raw.undo_steps - 1 : arm_History.undoI - 1;
			arm_Context.layer.swapMask(arm_History.undoLayers[arm_History.undoI]);
			arm_Context.layer.fill_mask = arm_Project.materials[step.material];
		} else if(step.name == arm_Translator.tr("Layer Opacity")) {
			arm_Context.setLayer(arm_Project.layers[step.layer]);
			var t = arm_Context.layer.maskOpacity;
			arm_Context.layer.maskOpacity = step.layer_opacity;
			step.layer_opacity = t;
			arm_node_MakeMaterial.parseMeshMaterial();
		} else if(step.name == arm_Translator.tr("Layer Blending")) {
			arm_Context.setLayer(arm_Project.layers[step.layer]);
			var t = arm_Context.layer.blending;
			arm_Context.layer.blending = step.layer_blending;
			step.layer_blending = t;
			arm_node_MakeMaterial.parseMeshMaterial();
		} else if(step.name == arm_Translator.tr("Edit Nodes")) {
			arm_History.swapCanvas(step);
		} else {
			arm_History.undoI = arm_History.undoI - 1 < 0 ? arm_Config.raw.undo_steps - 1 : arm_History.undoI - 1;
			var lay = arm_History.undoLayers[arm_History.undoI];
			arm_Context.selectPaintObject(arm_Project.paintObjects[step.object]);
			arm_Context.setLayer(arm_Project.layers[step.layer],step.is_mask);
			if(step.is_mask) {
				arm_Context.layer.swapMask(lay);
			} else {
				arm_Context.layer.swap(lay);
			}
			arm_Context.layerPreviewDirty = true;
		}
		arm_History.undos--;
		arm_History.redos++;
		arm_ui_UISidebar.inst.hwnd0.redraws = 2;
		arm_Context.ddirty = 2;
		if(arm_ui_UIView2D.inst.show) {
			arm_ui_UIView2D.inst.hwnd.redraws = 2;
		}
	}
};
arm_History.redo = function() {
	if(arm_History.redos > 0) {
		var step = arm_History.steps[arm_History.steps.length - arm_History.redos];
		if(step.name == arm_Translator.tr("New Layer")) {
			arm_Layers.newLayer();
			var _this = arm_Project.layers;
			var pos = step.layer;
			var x = arm_Project.layers.pop();
			_this.splice(pos,0,x);
		} else if(step.name == arm_Translator.tr("Delete Layer")) {
			arm_Context.layer = arm_Project.layers[step.layer];
			arm_History.swapActive();
			arm_Context.layer.delete();
		} else if(step.name == arm_Translator.tr("Clear Layer")) {
			arm_Context.layer = arm_Project.layers[step.layer];
			arm_History.swapActive();
			arm_Context.layer.clearLayer();
			arm_Context.layerPreviewDirty = true;
		} else if(step.name == arm_Translator.tr("Duplicate Layer")) {
			arm_Context.layer = arm_Project.layers[step.layer];
			arm_Context.layer = arm_Context.layer.duplicate();
		} else if(step.name == arm_Translator.tr("Order Layers")) {
			var target = arm_Project.layers[step.prev_order];
			arm_Project.layers[step.prev_order] = arm_Project.layers[step.layer];
			arm_Project.layers[step.layer] = target;
		} else if(step.name == arm_Translator.tr("Merge Layers")) {
			arm_Context.layer = arm_Project.layers[step.layer + 1];
			iron_App.notifyOnInit(arm_History.redoMergeLayers);
			iron_App.notifyOnInit(arm_Layers.mergeSelectedLayer);
		} else if(step.name == arm_Translator.tr("New Mask")) {
			arm_Context.layer = arm_Project.layers[step.layer];
			arm_Context.layer.createMask(0,false);
			arm_Context.setLayer(arm_Project.layers[step.layer],true);
			arm_Context.layer.swapMask(arm_History.undoLayers[arm_History.undoI]);
			arm_Context.layerPreviewDirty = true;
			arm_History.undoI = (arm_History.undoI + 1) % arm_Config.raw.undo_steps;
		} else if(step.name == arm_Translator.tr("Delete Mask")) {
			arm_Context.layer = arm_Project.layers[step.layer];
			arm_History.swapMaskActive();
			arm_Context.layer.deleteMask();
			arm_Context.setLayer(arm_Context.layer,false);
		} else if(step.name == arm_Translator.tr("Apply Mask")) {
			iron_App.notifyOnInit(function() {
				arm_Context.layer = arm_Project.layers[step.layer];
				arm_History.copyToUndoWithMask();
				arm_Context.layer.applyMask();
				arm_Context.setLayer(arm_Context.layer,false);
			});
		} else if(step.name == arm_Translator.tr("Apply Filter")) {
			var lay = arm_History.undoLayers[arm_History.undoI];
			arm_Context.setLayer(arm_Project.layers[step.layer],false);
			arm_Context.layer.swap(lay);
			lay.createMask(0,false);
			arm_Context.layer.swapMask(lay);
			arm_Context.layer.deleteMask();
			arm_Context.layerPreviewDirty = true;
			arm_History.undoI = (arm_History.undoI + 1) % arm_Config.raw.undo_steps;
		} else if(step.name == arm_Translator.tr("To Fill Layer")) {
			arm_Context.layer.swap(arm_History.undoLayers[arm_History.undoI]);
			arm_Context.layer.fill_layer = arm_Project.materials[step.material];
			arm_History.undoI = (arm_History.undoI + 1) % arm_Config.raw.undo_steps;
		} else if(step.name == arm_Translator.tr("To Paint Layer")) {
			arm_Context.layer.toPaintLayer();
			arm_Context.layer.swap(arm_History.undoLayers[arm_History.undoI]);
			arm_History.undoI = (arm_History.undoI + 1) % arm_Config.raw.undo_steps;
		} else if(step.name == arm_Translator.tr("To Fill Mask")) {
			arm_Context.layer.swapMask(arm_History.undoLayers[arm_History.undoI]);
			arm_Context.layer.fill_mask = arm_Project.materials[step.material];
			arm_History.undoI = (arm_History.undoI + 1) % arm_Config.raw.undo_steps;
		} else if(step.name == arm_Translator.tr("To Paint Mask")) {
			arm_Context.layer.toPaintMask();
			arm_Context.layer.swapMask(arm_History.undoLayers[arm_History.undoI]);
			arm_History.undoI = (arm_History.undoI + 1) % arm_Config.raw.undo_steps;
		} else if(step.name == arm_Translator.tr("Layer Opacity")) {
			arm_Context.setLayer(arm_Project.layers[step.layer]);
			var t = arm_Context.layer.maskOpacity;
			arm_Context.layer.maskOpacity = step.layer_opacity;
			step.layer_opacity = t;
			arm_node_MakeMaterial.parseMeshMaterial();
		} else if(step.name == arm_Translator.tr("Layer Blending")) {
			arm_Context.setLayer(arm_Project.layers[step.layer]);
			var t = arm_Context.layer.blending;
			arm_Context.layer.blending = step.layer_blending;
			step.layer_blending = t;
			arm_node_MakeMaterial.parseMeshMaterial();
		} else if(step.name == arm_Translator.tr("Edit Nodes")) {
			arm_History.swapCanvas(step);
		} else {
			var lay = arm_History.undoLayers[arm_History.undoI];
			arm_Context.selectPaintObject(arm_Project.paintObjects[step.object]);
			arm_Context.setLayer(arm_Project.layers[step.layer],step.is_mask);
			if(step.is_mask) {
				arm_Context.layer.swapMask(lay);
			} else {
				arm_Context.layer.swap(lay);
			}
			arm_Context.layerPreviewDirty = true;
			arm_History.undoI = (arm_History.undoI + 1) % arm_Config.raw.undo_steps;
		}
		arm_History.undos++;
		arm_History.redos--;
		arm_ui_UISidebar.inst.hwnd0.redraws = 2;
		arm_Context.ddirty = 2;
		if(arm_ui_UIView2D.inst.show) {
			arm_ui_UIView2D.inst.hwnd.redraws = 2;
		}
	}
};
arm_History.reset = function() {
	arm_History.steps = [{ name : arm_Translator.tr("New"), layer : 0, object : 0, material : 0, brush : 0, is_mask : false, has_mask : false}];
	arm_History.undos = 0;
	arm_History.redos = 0;
	arm_History.undoI = 0;
};
arm_History.paint = function() {
	arm_History.copyToUndo(arm_Context.layer.id,arm_History.undoI,arm_Context.layerIsMask);
	arm_History.pushUndo = false;
	arm_History.push(arm_Translator.tr(arm_ui_UIToolbar.inst.toolNames[arm_Context.tool]));
};
arm_History.newLayer = function() {
	arm_History.push(arm_Translator.tr("New Layer"));
};
arm_History.duplicateLayer = function() {
	arm_History.push(arm_Translator.tr("Duplicate Layer"));
};
arm_History.deleteLayer = function() {
	arm_History.swapActive();
	arm_History.push(arm_Translator.tr("Delete Layer"));
};
arm_History.clearLayer = function() {
	arm_History.swapActive();
	arm_History.push(arm_Translator.tr("Clear Layer"));
};
arm_History.orderLayers = function(prevOrder) {
	arm_History.push(arm_Translator.tr("Order Layers")).prev_order = prevOrder;
};
arm_History.mergeLayers = function() {
	arm_History.copyMergingLayers();
	arm_History.push(arm_Translator.tr("Merge Layers")).layer -= 1;
	arm_History.steps.shift();
	arm_History.undos--;
};
arm_History.newMask = function() {
	arm_History.push(arm_Translator.tr("New Mask"));
};
arm_History.deleteMask = function() {
	arm_History.swapMaskActive();
	arm_History.push(arm_Translator.tr("Delete Mask"));
};
arm_History.applyMask = function() {
	arm_History.copyToUndoWithMask();
	arm_History.push(arm_Translator.tr("Apply Mask"));
};
arm_History.applyFilter = function() {
	arm_History.copyToUndoWithMask();
	arm_History.push(arm_Translator.tr("Apply Filter"));
};
arm_History.toFillLayer = function() {
	arm_History.copyToUndo(arm_Context.layer.id,arm_History.undoI,false);
	arm_History.push(arm_Translator.tr("To Fill Layer"));
};
arm_History.toPaintLayer = function() {
	arm_History.copyToUndo(arm_Context.layer.id,arm_History.undoI,false);
	arm_History.push(arm_Translator.tr("To Paint Layer"));
};
arm_History.toFillMask = function() {
	arm_History.copyToUndo(arm_Context.layer.id,arm_History.undoI,true);
	arm_History.push(arm_Translator.tr("To Fill Mask"));
};
arm_History.toPaintMask = function() {
	arm_History.copyToUndo(arm_Context.layer.id,arm_History.undoI,true);
	arm_History.push(arm_Translator.tr("To Paint Mask"));
};
arm_History.layerOpacity = function() {
	arm_History.push(arm_Translator.tr("Layer Opacity"));
};
arm_History.layerBlending = function() {
	arm_History.push(arm_Translator.tr("Layer Blending"));
};
arm_History.editNodes = function(canvas,canvas_type) {
	var step = arm_History.push(arm_Translator.tr("Edit Nodes"));
	step.canvas_type = canvas_type;
	step.canvas = JSON.parse(JSON.stringify(canvas));
};
arm_History.push = function(name) {
	kha_Window.get(0).set_title(arm_ui_UIFiles.filename + "* - ArmorPaint");
	if(arm_History.undos < arm_Config.raw.undo_steps) {
		arm_History.undos++;
	}
	if(arm_History.redos > 0) {
		var _g = 0;
		var _g1 = arm_History.redos;
		while(_g < _g1) {
			++_g;
			arm_History.steps.pop();
		}
		arm_History.redos = 0;
	}
	arm_History.steps.push({ name : name, layer : arm_Project.layers.indexOf(arm_Context.layer), object : arm_Project.paintObjects.indexOf(arm_Context.object), material : arm_Project.materials.indexOf(arm_Context.material), brush : arm_Project.brushes.indexOf(arm_Context.brush), is_mask : arm_Context.layerIsMask, has_mask : arm_Context.layer.texpaint_mask != null, layer_opacity : arm_Context.layer.maskOpacity, layer_object : arm_Context.layer.objectMask, layer_blending : arm_Context.layer.blending});
	while(arm_History.steps.length > arm_Config.raw.undo_steps + 1) arm_History.steps.shift();
	return arm_History.steps[arm_History.steps.length - 1];
};
arm_History.redoMergeLayers = function() {
	arm_History.copyMergingLayers();
};
arm_History.copyMergingLayers = function() {
	var lay = arm_Context.layer;
	arm_History.copyToUndo(lay.id,arm_History.undoI,false);
	if(lay.texpaint_mask != null) {
		arm_History.undoI = arm_History.undoI - 1 < 0 ? arm_Config.raw.undo_steps - 1 : arm_History.undoI - 1;
		arm_History.copyToUndo(lay.id,arm_History.undoI,true);
	}
	lay = arm_Project.layers[arm_Project.layers.indexOf(lay) - 1];
	arm_History.copyToUndo(lay.id,arm_History.undoI,false);
};
arm_History.copyToUndoWithMask = function() {
	arm_History.copyToUndo(arm_Context.layer.id,arm_History.undoI,false);
	arm_History.undoI = arm_History.undoI - 1 < 0 ? arm_Config.raw.undo_steps - 1 : arm_History.undoI - 1;
	arm_History.copyToUndo(arm_Context.layer.id,arm_History.undoI,true);
};
arm_History.swapActive = function() {
	var undoLayer = arm_History.undoLayers[arm_History.undoI];
	undoLayer.swap(arm_Context.layer);
	if(arm_Context.layer.texpaint_mask != null) {
		undoLayer.swapMask(arm_Context.layer);
	}
	arm_History.undoI = (arm_History.undoI + 1) % arm_Config.raw.undo_steps;
};
arm_History.swapMaskActive = function() {
	arm_History.undoLayers[arm_History.undoI].swapMask(arm_Context.layer);
	arm_History.undoI = (arm_History.undoI + 1) % arm_Config.raw.undo_steps;
};
arm_History.copyToUndo = function(fromId,toId,isMask) {
	var path = iron_RenderPath.active;
	if(isMask) {
		path.setTarget("texpaint_mask_undo" + toId);
		path.bindTarget("texpaint_mask" + fromId,"tex");
		path.drawShader("shader_datas/copy_pass/copyR8_pass");
	} else {
		path.setTarget("texpaint_undo" + toId,["texpaint_nor_undo" + toId,"texpaint_pack_undo" + toId]);
		path.bindTarget("texpaint" + fromId,"tex0");
		path.bindTarget("texpaint_nor" + fromId,"tex1");
		path.bindTarget("texpaint_pack" + fromId,"tex2");
		path.drawShader("shader_datas/copy_mrt3_pass/copy_mrt3_pass");
	}
	arm_History.undoI = (arm_History.undoI + 1) % arm_Config.raw.undo_steps;
};
arm_History.swapCanvas = function(step) {
	if(step.canvas_type == 0) {
		var _canvas = arm_Project.materials[step.material].canvas;
		arm_Project.materials[step.material].canvas = step.canvas;
		step.canvas = _canvas;
		arm_Context.material = arm_Project.materials[step.material];
	} else {
		var _canvas = arm_Project.brushes[step.brush].canvas;
		arm_Project.brushes[step.brush].canvas = step.canvas;
		step.canvas = _canvas;
		arm_Context.brush = arm_Project.brushes[step.brush];
	}
	arm_ui_UINodes.inst.canvasChanged();
	arm_ui_UINodes.inst.getNodes().handle = new zui_Handle();
	arm_ui_UINodes.inst.hwnd.redraws = 2;
};
var arm_Layers = function() { };
$hxClasses["arm.Layers"] = arm_Layers;
arm_Layers.__name__ = "arm.Layers";
arm_Layers.initLayers = function() {
	arm_Project.layers[0].clearLayer(kha_Color.fromFloats(0.5,0.5,0.5,1.0));
};
arm_Layers.resizeLayers = function() {
	var C = arm_Config.raw;
	if(arm_App.resHandle.position >= 7) {
		C.undo_steps = 1;
		if(arm_Context.undoHandle != null) {
			arm_Context.undoHandle.value = C.undo_steps;
		}
		while(arm_History.undoLayers.length > C.undo_steps) arm_App.notifyOnNextFrame((function(l) {
			return function() {
				l[0].unload();
			};
		})([arm_History.undoLayers.pop()]));
	}
	var _g = 0;
	var _g1 = arm_Project.layers;
	while(_g < _g1.length) _g1[_g++].resizeAndSetBits();
	var _g = 0;
	var _g1 = arm_History.undoLayers;
	while(_g < _g1.length) _g1[_g++].resizeAndSetBits();
	var rts = iron_RenderPath.active.renderTargets;
	var _texpaint_blend0 = rts.h["texpaint_blend0"].image;
	arm_App.notifyOnNextFrame(function() {
		_texpaint_blend0.unload();
	});
	rts.h["texpaint_blend0"].raw.width = arm_Config.getTextureResX();
	rts.h["texpaint_blend0"].raw.height = arm_Config.getTextureResY();
	rts.h["texpaint_blend0"].image = kha_Image.createRenderTarget(arm_Config.getTextureResX(),arm_Config.getTextureResY(),1);
	var _texpaint_blend1 = rts.h["texpaint_blend1"].image;
	arm_App.notifyOnNextFrame(function() {
		_texpaint_blend1.unload();
	});
	rts.h["texpaint_blend1"].raw.width = arm_Config.getTextureResX();
	rts.h["texpaint_blend1"].raw.height = arm_Config.getTextureResY();
	rts.h["texpaint_blend1"].image = kha_Image.createRenderTarget(arm_Config.getTextureResX(),arm_Config.getTextureResY(),1);
	arm_Context.brushBlendDirty = true;
	if(rts.h["texpaint_blur"] != null) {
		var _texpaint_blur = rts.h["texpaint_blur"].image;
		arm_App.notifyOnNextFrame(function() {
			_texpaint_blur.unload();
		});
		var sizeX = arm_Config.getTextureResX() * 0.95 | 0;
		var sizeY = arm_Config.getTextureResY() * 0.95 | 0;
		rts.h["texpaint_blur"].raw.width = sizeX;
		rts.h["texpaint_blur"].raw.height = sizeY;
		rts.h["texpaint_blur"].image = kha_Image.createRenderTarget(sizeX,sizeY);
	}
	if(arm_render_RenderPathPaint.liveLayer != null) {
		arm_render_RenderPathPaint.liveLayer.resizeAndSetBits();
	}
	arm_Context.ddirty = 2;
};
arm_Layers.setLayerBits = function() {
	var _g = 0;
	var _g1 = arm_Project.layers;
	while(_g < _g1.length) _g1[_g++].resizeAndSetBits();
	var _g = 0;
	var _g1 = arm_History.undoLayers;
	while(_g < _g1.length) _g1[_g++].resizeAndSetBits();
};
arm_Layers.makeMergePipe = function(red,green,blue,alpha) {
	var pipe = new kha_graphics4_PipelineState();
	pipe.vertexShader = Reflect.field(kha_Shaders,"layer_merge_vert");
	pipe.fragmentShader = Reflect.field(kha_Shaders,"layer_merge_frag");
	var vs = new kha_graphics4_VertexStructure();
	vs.add("pos",1);
	pipe.inputLayout = [vs];
	pipe.colorWriteMasksRed = [red];
	pipe.colorWriteMasksGreen = [green];
	pipe.colorWriteMasksBlue = [blue];
	pipe.colorWriteMasksAlpha = [alpha];
	pipe.compile();
	return pipe;
};
arm_Layers.makePipe = function() {
	arm_Layers.pipeMerge = arm_Layers.makeMergePipe(true,true,true,true);
	arm_Layers.pipeMergeR = arm_Layers.makeMergePipe(true,false,false,false);
	arm_Layers.pipeMergeG = arm_Layers.makeMergePipe(false,true,false,false);
	arm_Layers.pipeMergeB = arm_Layers.makeMergePipe(false,false,true,false);
	arm_Layers.pipeMergeA = arm_Layers.makeMergePipe(false,false,false,true);
	arm_Layers.tex0 = arm_Layers.pipeMerge.getTextureUnit("tex0");
	arm_Layers.tex1 = arm_Layers.pipeMerge.getTextureUnit("tex1");
	arm_Layers.texmask = arm_Layers.pipeMerge.getTextureUnit("texmask");
	arm_Layers.texa = arm_Layers.pipeMerge.getTextureUnit("texa");
	arm_Layers.opac = arm_Layers.pipeMerge.getConstantLocation("opac");
	arm_Layers.blending = arm_Layers.pipeMerge.getConstantLocation("blending");
	arm_Layers.pipeCopy = new kha_graphics4_PipelineState();
	arm_Layers.pipeCopy.vertexShader = Reflect.field(kha_Shaders,"layer_view_vert");
	arm_Layers.pipeCopy.fragmentShader = Reflect.field(kha_Shaders,"layer_copy_frag");
	var vs = new kha_graphics4_VertexStructure();
	vs.add("pos",2);
	vs.add("tex",1);
	vs.add("col",3);
	arm_Layers.pipeCopy.inputLayout = [vs];
	arm_Layers.pipeCopy.compile();
	arm_Layers.pipeCopyBGRA = new kha_graphics4_PipelineState();
	arm_Layers.pipeCopyBGRA.vertexShader = Reflect.field(kha_Shaders,"layer_view_vert");
	arm_Layers.pipeCopyBGRA.fragmentShader = Reflect.field(kha_Shaders,"layer_copy_bgra_frag");
	var vs = new kha_graphics4_VertexStructure();
	vs.add("pos",2);
	vs.add("tex",1);
	vs.add("col",3);
	arm_Layers.pipeCopyBGRA.inputLayout = [vs];
	arm_Layers.pipeCopyBGRA.compile();
	arm_Layers.pipeCopy8 = arm_Layers.pipeCopy;
	arm_Layers.pipeCopy128 = arm_Layers.pipeCopy;
	arm_Layers.pipeInvert8 = new kha_graphics4_PipelineState();
	arm_Layers.pipeInvert8.vertexShader = Reflect.field(kha_Shaders,"layer_view_vert");
	arm_Layers.pipeInvert8.fragmentShader = Reflect.field(kha_Shaders,"layer_invert_frag");
	var vs = new kha_graphics4_VertexStructure();
	vs.add("pos",2);
	vs.add("tex",1);
	vs.add("col",3);
	arm_Layers.pipeInvert8.inputLayout = [vs];
	arm_Layers.pipeCopy8.colorAttachmentCount = 1;
	arm_Layers.pipeCopy8.colorAttachments[0] = 1;
	arm_Layers.pipeInvert8.compile();
	arm_Layers.pipeMask = new kha_graphics4_PipelineState();
	arm_Layers.pipeMask.vertexShader = Reflect.field(kha_Shaders,"layer_merge_vert");
	arm_Layers.pipeMask.fragmentShader = Reflect.field(kha_Shaders,"mask_merge_frag");
	var vs = new kha_graphics4_VertexStructure();
	vs.add("pos",1);
	arm_Layers.pipeMask.inputLayout = [vs];
	arm_Layers.pipeMask.compile();
	arm_Layers.tex0Mask = arm_Layers.pipeMask.getTextureUnit("tex0");
	arm_Layers.texaMask = arm_Layers.pipeMask.getTextureUnit("texa");
};
arm_Layers.makeCursorPipe = function() {
	arm_Layers.pipeCursor = new kha_graphics4_PipelineState();
	arm_Layers.pipeCursor.vertexShader = Reflect.field(kha_Shaders,"cursor_vert");
	arm_Layers.pipeCursor.fragmentShader = Reflect.field(kha_Shaders,"cursor_frag");
	var vs = new kha_graphics4_VertexStructure();
	vs.add("pos",6);
	vs.add("nor",5);
	vs.add("tex",5);
	arm_Layers.pipeCursor.inputLayout = [vs];
	arm_Layers.pipeCursor.blendSource = 3;
	arm_Layers.pipeCursor.blendDestination = 5;
	arm_Layers.pipeCursor.depthWrite = false;
	arm_Layers.pipeCursor.depthMode = 0;
	arm_Layers.pipeCursor.compile();
	arm_Layers.cursorVP = arm_Layers.pipeCursor.getConstantLocation("VP");
	arm_Layers.cursorInvVP = arm_Layers.pipeCursor.getConstantLocation("invVP");
	arm_Layers.cursorMouse = arm_Layers.pipeCursor.getConstantLocation("mouse");
	arm_Layers.cursorTexStep = arm_Layers.pipeCursor.getConstantLocation("texStep");
	arm_Layers.cursorRadius = arm_Layers.pipeCursor.getConstantLocation("radius");
	arm_Layers.cursorCameraRight = arm_Layers.pipeCursor.getConstantLocation("cameraRight");
	arm_Layers.cursorTint = arm_Layers.pipeCursor.getConstantLocation("tint");
	arm_Layers.cursorGbufferD = arm_Layers.pipeCursor.getTextureUnit("gbufferD");
	arm_Layers.cursorTex = arm_Layers.pipeCursor.getTextureUnit("tex");
};
arm_Layers.makeTempImg = function() {
	var l = arm_Project.layers[0];
	if(arm_Layers.imga != null && (arm_Layers.imga.get_width() != l.texpaint.get_width() || arm_Layers.imga.get_height() != l.texpaint.get_height())) {
		var _temptex0 = iron_RenderPath.active.renderTargets.h["temptex0"];
		arm_App.notifyOnNextFrame(function() {
			_temptex0.unload();
		});
		var _this = iron_RenderPath.active.renderTargets;
		if(Object.prototype.hasOwnProperty.call(_this.h,"temptex0")) {
			delete(_this.h["temptex0"]);
		}
		arm_Layers.imga = null;
	}
	if(arm_Layers.imga == null) {
		var t = new iron_RenderTargetRaw();
		t.name = "temptex0";
		t.width = l.texpaint.get_width();
		t.height = l.texpaint.get_height();
		t.format = "RGBA32";
		arm_Layers.imga = iron_RenderPath.active.createRenderTarget(t).image;
	}
};
arm_Layers.makeExportImg = function() {
	var l = arm_Project.layers[0];
	if(arm_Layers.expa != null && (arm_Layers.expa.get_width() != l.texpaint.get_width() || arm_Layers.expa.get_height() != l.texpaint.get_height())) {
		var _expa = arm_Layers.expa;
		var _expb = arm_Layers.expb;
		var _expc = arm_Layers.expc;
		arm_App.notifyOnNextFrame(function() {
			_expa.unload();
			_expb.unload();
			_expc.unload();
		});
		arm_Layers.expa = null;
		arm_Layers.expb = null;
		arm_Layers.expc = null;
	}
	if(arm_Layers.expa == null) {
		arm_Layers.expa = kha_Image.createRenderTarget(l.texpaint.get_width(),l.texpaint.get_height());
		arm_Layers.expb = kha_Image.createRenderTarget(l.texpaint.get_width(),l.texpaint.get_height());
		arm_Layers.expc = kha_Image.createRenderTarget(l.texpaint.get_width(),l.texpaint.get_height());
	}
};
arm_Layers.mergeSelectedLayer = function() {
	if(arm_Layers.pipeMerge == null) {
		arm_Layers.makePipe();
	}
	var l0 = arm_Project.layers[0];
	var l1 = arm_Context.layer;
	var _g = 1;
	var _g1 = arm_Project.layers.length;
	while(_g < _g1) {
		var i = _g++;
		if(arm_Project.layers[i] == l1) {
			l0 = arm_Project.layers[i - 1];
			break;
		}
	}
	arm_Layers.makeTempImg();
	if(l1.texpaint_mask != null) {
		l1.applyMask();
	}
	if(iron_data_ConstData.screenAlignedVB == null) {
		iron_data_ConstData.createScreenAlignedData();
	}
	arm_Layers.imga.get_g2().begin(false);
	arm_Layers.imga.get_g2().set_pipeline(arm_Layers.pipeCopy);
	arm_Layers.imga.get_g2().drawImage(l0.texpaint,0,0);
	arm_Layers.imga.get_g2().set_pipeline(null);
	arm_Layers.imga.get_g2().end();
	var empty = iron_RenderPath.active.renderTargets.h["empty_white"].image;
	if(l1.paintBase) {
		l0.texpaint.get_g4().begin();
		l0.texpaint.get_g4().setPipeline(arm_Layers.pipeMerge);
		l0.texpaint.get_g4().setTexture(arm_Layers.tex0,l1.texpaint);
		l0.texpaint.get_g4().setTexture(arm_Layers.tex1,empty);
		l0.texpaint.get_g4().setTexture(arm_Layers.texmask,empty);
		l0.texpaint.get_g4().setTexture(arm_Layers.texa,arm_Layers.imga);
		l0.texpaint.get_g4().setFloat(arm_Layers.opac,l1.maskOpacity);
		l0.texpaint.get_g4().setInt(arm_Layers.blending,l1.blending);
		l0.texpaint.get_g4().setVertexBuffer(iron_data_ConstData.screenAlignedVB);
		l0.texpaint.get_g4().setIndexBuffer(iron_data_ConstData.screenAlignedIB);
		l0.texpaint.get_g4().drawIndexedVertices();
		l0.texpaint.get_g4().end();
	}
	arm_Layers.imga.get_g2().begin(false);
	arm_Layers.imga.get_g2().set_pipeline(arm_Layers.pipeCopy);
	arm_Layers.imga.get_g2().drawImage(l0.texpaint_nor,0,0);
	arm_Layers.imga.get_g2().set_pipeline(null);
	arm_Layers.imga.get_g2().end();
	if(l1.paintNor) {
		l0.texpaint_nor.get_g4().begin();
		l0.texpaint_nor.get_g4().setPipeline(arm_Layers.pipeMerge);
		l0.texpaint_nor.get_g4().setTexture(arm_Layers.tex0,l1.texpaint);
		l0.texpaint_nor.get_g4().setTexture(arm_Layers.tex1,l1.texpaint_nor);
		l0.texpaint_nor.get_g4().setTexture(arm_Layers.texmask,empty);
		l0.texpaint_nor.get_g4().setTexture(arm_Layers.texa,arm_Layers.imga);
		l0.texpaint_nor.get_g4().setFloat(arm_Layers.opac,l1.maskOpacity);
		l0.texpaint_nor.get_g4().setInt(arm_Layers.blending,-1);
		l0.texpaint_nor.get_g4().setVertexBuffer(iron_data_ConstData.screenAlignedVB);
		l0.texpaint_nor.get_g4().setIndexBuffer(iron_data_ConstData.screenAlignedIB);
		l0.texpaint_nor.get_g4().drawIndexedVertices();
		l0.texpaint_nor.get_g4().end();
	}
	arm_Layers.imga.get_g2().begin(false);
	arm_Layers.imga.get_g2().set_pipeline(arm_Layers.pipeCopy);
	arm_Layers.imga.get_g2().drawImage(l0.texpaint_pack,0,0);
	arm_Layers.imga.get_g2().set_pipeline(null);
	arm_Layers.imga.get_g2().end();
	if(l1.paintOcc || l1.paintRough || l1.paintMet || l1.paintHeight) {
		if(l1.paintOcc && l1.paintRough && l1.paintMet && l1.paintHeight) {
			arm_Layers.commandsMergePack(arm_Layers.pipeMerge,l0.texpaint_pack,l1.texpaint,l1.texpaint_pack,l1.maskOpacity,empty);
		} else {
			if(l1.paintOcc) {
				arm_Layers.commandsMergePack(arm_Layers.pipeMergeR,l0.texpaint_pack,l1.texpaint,l1.texpaint_pack,l1.maskOpacity,empty);
			}
			if(l1.paintRough) {
				arm_Layers.commandsMergePack(arm_Layers.pipeMergeG,l0.texpaint_pack,l1.texpaint,l1.texpaint_pack,l1.maskOpacity,empty);
			}
			if(l1.paintMet) {
				arm_Layers.commandsMergePack(arm_Layers.pipeMergeB,l0.texpaint_pack,l1.texpaint,l1.texpaint_pack,l1.maskOpacity,empty);
			}
		}
	}
	arm_Context.layer.delete();
	arm_Context.setLayer(l0);
	arm_Context.layerPreviewDirty = true;
};
arm_Layers.commandsMergePack = function(pipe,i0,i1,i1pack,i1maskOpacity,i1texmask) {
	i0.get_g4().begin();
	i0.get_g4().setPipeline(pipe);
	i0.get_g4().setTexture(arm_Layers.tex0,i1);
	i0.get_g4().setTexture(arm_Layers.tex1,i1pack);
	i0.get_g4().setTexture(arm_Layers.texmask,i1texmask);
	i0.get_g4().setTexture(arm_Layers.texa,arm_Layers.imga);
	i0.get_g4().setFloat(arm_Layers.opac,i1maskOpacity);
	i0.get_g4().setInt(arm_Layers.blending,-1);
	i0.get_g4().setVertexBuffer(iron_data_ConstData.screenAlignedVB);
	i0.get_g4().setIndexBuffer(iron_data_ConstData.screenAlignedIB);
	i0.get_g4().drawIndexedVertices();
	i0.get_g4().end();
};
arm_Layers.isFillMaterial = function() {
	if(arm_ui_UIHeader.inst.worktab.position == 1) {
		return true;
	}
	var m = arm_Context.material;
	var _g = 0;
	var _g1 = arm_Project.layers;
	while(_g < _g1.length) if(_g1[_g++].fill_layer == m) {
		return true;
	}
	var _g = 0;
	var _g1 = arm_Project.layers;
	while(_g < _g1.length) if(_g1[_g++].fill_mask == m) {
		return true;
	}
	return false;
};
arm_Layers.updateFillLayers = function(fills) {
	if(fills == null) {
		fills = 1;
	}
	var layers = arm_Project.layers;
	var selectedLayer = arm_Context.layer;
	var isMask = arm_Context.layerIsMask;
	var selectedTool = arm_Context.tool;
	var current = null;
	if(arm_ui_UIHeader.inst.worktab.position == 1) {
		if(arm_render_RenderPathPaint.liveLayer == null) {
			arm_render_RenderPathPaint.liveLayer = new arm_data_LayerSlot("_live");
			arm_render_RenderPathPaint.liveLayer.createMask(0);
		}
		current = kha_graphics4_Graphics2.current;
		if(current != null) {
			current.end();
		}
		arm_ui_UIHeader.inst.worktab.position = 0;
		arm_Context.tool = 2;
		arm_node_MakeMaterial.parsePaintMaterial();
		arm_Context.pdirty = fills;
		arm_render_RenderPathPaint.useLiveLayer(true);
		var _g = 0;
		while(_g < fills) {
			++_g;
			arm_render_RenderPathPaint.commandsPaint();
		}
		arm_render_RenderPathPaint.useLiveLayer(false);
		arm_Context.tool = selectedTool;
		arm_Context.pdirty = 0;
		arm_Context.rdirty = 2;
		arm_ui_UIHeader.inst.worktab.position = 1;
		if(current != null) {
			current.begin(false);
		}
		return;
	}
	var hasFillLayer = false;
	var hasFillMask = false;
	var _g = 0;
	while(_g < layers.length) if(layers[_g++].fill_layer == arm_Context.material) {
		hasFillLayer = true;
	}
	var _g = 0;
	while(_g < layers.length) if(layers[_g++].fill_mask == arm_Context.material) {
		hasFillMask = true;
	}
	if(hasFillLayer || hasFillMask) {
		current = kha_graphics4_Graphics2.current;
		if(current != null) {
			current.end();
		}
		arm_Context.pdirty = fills;
		arm_Context.tool = 2;
		if(hasFillLayer) {
			arm_Context.layerIsMask = false;
			arm_node_MakeMaterial.parsePaintMaterial();
			var _g = 0;
			while(_g < layers.length) {
				var l = layers[_g];
				++_g;
				if(l.fill_layer == arm_Context.material) {
					arm_Context.layer = l;
					arm_Layers.setObjectMask();
					if(l.uvType == 2) {
						l.clearLayer();
					}
					var _g1 = 0;
					while(_g1 < fills) {
						++_g1;
						arm_render_RenderPathPaint.commandsPaint();
					}
				}
			}
		}
		if(hasFillMask) {
			arm_Context.layerIsMask = true;
			arm_node_MakeMaterial.parsePaintMaterial();
			var _g = 0;
			while(_g < layers.length) {
				var l = layers[_g];
				++_g;
				if(l.fill_mask == arm_Context.material) {
					arm_Context.layer = l;
					arm_Layers.setObjectMask();
					var _g1 = 0;
					while(_g1 < fills) {
						++_g1;
						arm_render_RenderPathPaint.commandsPaint();
					}
				}
			}
		}
		arm_Context.pdirty = 0;
		arm_Context.ddirty = 2;
		arm_Context.rdirty = 2;
		if(current != null) {
			current.begin(false);
		}
		arm_Context.layer = selectedLayer;
		arm_Context.layerIsMask = isMask;
		arm_Layers.setObjectMask();
		arm_Context.tool = selectedTool;
	}
};
arm_Layers.updateFillLayer = function(fills) {
	if(fills == null) {
		fills = 1;
	}
	var current = kha_graphics4_Graphics2.current;
	if(current != null) {
		current.end();
	}
	var _tool = arm_Context.tool;
	arm_Context.tool = 2;
	arm_Context.pdirty = fills;
	arm_Context.layerIsMask = false;
	var _workspace = arm_ui_UIHeader.inst.worktab.position;
	arm_ui_UIHeader.inst.worktab.position = 0;
	if(arm_Context.layer.uvType == 2) {
		arm_Context.layer.clearLayer();
	}
	arm_node_MakeMaterial.parsePaintMaterial();
	var _g = 0;
	while(_g < fills) {
		++_g;
		arm_render_RenderPathPaint.commandsPaint();
	}
	arm_Context.rdirty = 2;
	arm_Context.tool = _tool;
	arm_ui_UIHeader.inst.worktab.position = _workspace;
	if(current != null) {
		current.begin(false);
	}
};
arm_Layers.setObjectMask = function() {
	var ar = ["None"];
	var _g = 0;
	var _g1 = arm_Project.paintObjects;
	while(_g < _g1.length) ar.push(_g1[_g++].name);
	var mask = arm_Context.layer.objectMask;
	if(arm_Context.layerFilter > 0) {
		mask = arm_Context.layerFilter;
	}
	if(mask > 0) {
		if(arm_Context.mergedObject != null) {
			arm_Context.mergedObject.visible = false;
		}
		var o = arm_Project.paintObjects[0];
		var _g = 0;
		var _g1 = arm_Project.paintObjects;
		while(_g < _g1.length) {
			var p = _g1[_g];
			++_g;
			if(p.name == ar[mask]) {
				o = p;
				break;
			}
		}
		arm_Context.selectPaintObject(o);
	} else {
		if(arm_Context.mergedObject == null) {
			arm_util_MeshUtil.mergeMesh();
		}
		arm_Context.selectPaintObject(arm_Context.mainObject());
		arm_Context.paintObject.skip_context = "paint";
		arm_Context.mergedObject.visible = true;
	}
};
arm_Layers.newLayer = function(clear) {
	if(clear == null) {
		clear = true;
	}
	if(arm_Project.layers.length > 255) {
		return null;
	}
	var l = new arm_data_LayerSlot();
	l.objectMask = arm_Context.layerFilter;
	arm_Project.layers.push(l);
	arm_Context.setLayer(l);
	if(clear) {
		iron_App.notifyOnInit($bind(l,l.clear));
	}
	arm_Context.layerPreviewDirty = true;
	return l;
};
arm_Layers.newGroup = function() {
	if(arm_Project.layers.length > 255) {
		return null;
	}
	var l = new arm_data_LayerSlot("",true);
	arm_Project.layers.push(l);
	arm_Context.setLayer(l);
	return l;
};
arm_Layers.createFillLayer = function() {
	iron_App.notifyOnInit(function() {
		var l = arm_Layers.newLayer(false);
		arm_History.newLayer();
		l.objectMask = arm_Context.layerFilter;
		arm_History.toFillLayer();
		l.toFillLayer();
	});
};
arm_Layers.createImageMask = function(asset) {
	var l = arm_Context.layer;
	if(l != arm_Project.layers[0]) {
		arm_History.newMask();
		l.createMask(0,true,arm_Project.getImage(asset));
		arm_Context.setLayer(l,true);
		arm_Context.layerPreviewDirty = true;
	}
};
var arm_Log = function() { };
$hxClasses["arm.Log"] = arm_Log;
arm_Log.__name__ = "arm.Log";
arm_Log.info = function(s) {
	arm_Log.messageTimer = 5.0;
	arm_Log.message = s;
	arm_Log.messageColor = 0;
	if(arm_ui_UIStatus.inst != null) {
		arm_ui_UIStatus.inst.statusHandle.redraws = 2;
	}
	haxe_Log.trace(s,{ fileName : "arm/Log.hx", lineNumber : 21, className : "arm.Log", methodName : "info"});
};
arm_Log.error = function(s) {
	arm_Log.messageTimer = 8.0;
	arm_Log.message = s;
	arm_Log.messageColor = -5636096;
	if(arm_ui_UIStatus.inst != null) {
		arm_ui_UIStatus.inst.statusHandle.redraws = 2;
	}
	haxe_Log.trace(s,{ fileName : "arm/Log.hx", lineNumber : 31, className : "arm.Log", methodName : "error"});
};
arm_Log.trace = function(s) {
	haxe_Log.trace(s,{ fileName : "arm/Log.hx", lineNumber : 35, className : "arm.Log", methodName : "trace"});
};
arm_Log.init = function() {
	if(arm_Log.haxeTrace == null) {
		arm_Log.haxeTrace = haxe_Log.trace;
		haxe_Log.trace = arm_Log.consoleTrace;
	}
};
arm_Log.consoleTrace = function(v,inf) {
	if(arm_ui_UIStatus.inst != null && arm_ui_UISidebar.inst != null && arm_ui_UISidebar.inst.ui != null && arm_Config.raw.layout[6] > 32 * arm_ui_UISidebar.inst.ui.ops.scaleFactor) {
		arm_ui_UIStatus.inst.statusHandle.redraws = 2;
	}
	arm_Log.lastTraces.unshift(Std.string(v));
	if(arm_Log.lastTraces.length > 10) {
		arm_Log.lastTraces.pop();
	}
	arm_Log.haxeTrace(v,inf);
};
var arm_Operator = function() { };
$hxClasses["arm.Operator"] = arm_Operator;
arm_Operator.__name__ = "arm.Operator";
arm_Operator.shortcut = function(s,type) {
	if(type == null) {
		type = 0;
	}
	if(s == "") {
		return false;
	}
	var mouse = iron_system_Input.getMouse();
	var kb = iron_system_Input.getKeyboard();
	var shift = s.indexOf("shift") >= 0;
	var ctrl = s.indexOf("ctrl") >= 0;
	var alt = s.indexOf("alt") >= 0;
	var flag = shift == kb.down("shift") && ctrl == kb.down("control") && alt == kb.down("alt");
	if(s.indexOf("+") > 0) {
		s = HxOverrides.substr(s,s.lastIndexOf("+") + 1,null);
	} else if(shift || ctrl || alt) {
		return flag;
	}
	var key = s == "left" || s == "right" || s == "middle" ? type == 2 ? mouse.down(s) : mouse.started(s) : type == 1 ? kb.repeat(s) : type == 2 ? kb.down(s) : kb.started(s);
	if(flag) {
		return key;
	} else {
		return false;
	}
};
var arm_Plugin = function() {
	this.apiversion = "0.1";
	this.version = "0.1";
	this.delete = null;
	this.update = null;
	this.draw = null;
	this.drawUI = null;
	this.name = arm_Plugin.pluginName;
	arm_Plugin.plugins.h[this.name] = this;
};
$hxClasses["arm.Plugin"] = arm_Plugin;
arm_Plugin.__name__ = "arm.Plugin";
arm_Plugin.start = function(plugin) {
	try {
		iron_data_Data.getBlob("plugins/" + plugin,function(blob) {
			arm_Plugin.pluginName = plugin;
			(1, eval)(blob.toString());
			iron_data_Data.deleteBlob("plugins/" + plugin);
		});
	} catch( _g ) {
		var _g1 = haxe_Exception.caught(_g).unwrap();
		haxe_Log.trace("Failed to load plugin '" + plugin + "'",{ fileName : "arm/Plugin.hx", lineNumber : 34, className : "arm.Plugin", methodName : "start"});
		haxe_Log.trace(_g1,{ fileName : "arm/Plugin.hx", lineNumber : 34, className : "arm.Plugin", methodName : "start"});
	}
};
arm_Plugin.stop = function(plugin) {
	var p = arm_Plugin.plugins.h[plugin];
	if(p != null && p.delete != null) {
		p.delete();
	}
	var _this = arm_Plugin.plugins;
	if(Object.prototype.hasOwnProperty.call(_this.h,plugin)) {
		delete(_this.h[plugin]);
	}
};
arm_Plugin.prototype = {
	__class__: arm_Plugin
};
var iron_App = function(_appReady) {
	_appReady();
	iron_system_Time.init();
	kha_System.notifyOnFrames(iron_App.render);
	kha_Scheduler.addTimeTask(iron_App.update,0,1 / iron_system_Time.frequency * iron_system_Time.scale);
};
$hxClasses["iron.App"] = iron_App;
iron_App.__name__ = "iron.App";
iron_App.init = function(_appReady) {
	new iron_App(_appReady);
};
iron_App.update = function() {
	if(iron_Scene.active == null || !iron_Scene.active.ready) {
		return;
	}
	if(iron_App.pauseUpdates) {
		return;
	}
	iron_Scene.active.updateFrame();
	var i = 0;
	var l = iron_App.traitUpdates.length;
	while(i < l) {
		if(iron_App.traitInits.length > 0) {
			var _g = 0;
			var _g1 = iron_App.traitInits;
			while(_g < _g1.length) {
				var f = _g1[_g++];
				if(iron_App.traitInits.length > 0) {
					f();
				} else {
					break;
				}
			}
			iron_App.traitInits.splice(0,iron_App.traitInits.length);
		}
		iron_App.traitUpdates[i]();
		if(l <= iron_App.traitUpdates.length) {
			++i;
		} else {
			l = iron_App.traitUpdates.length;
		}
	}
	i = 0;
	l = iron_App.traitLateUpdates.length;
	while(i < l) {
		iron_App.traitLateUpdates[i]();
		if(l <= iron_App.traitLateUpdates.length) {
			++i;
		} else {
			l = iron_App.traitLateUpdates.length;
		}
	}
	if(iron_App.onEndFrames != null) {
		var _g = 0;
		var _g1 = iron_App.onEndFrames;
		while(_g < _g1.length) _g1[_g++]();
	}
	if(iron_App.lastw == -1) {
		iron_App.lastw = arm_App.w();
		iron_App.lasth = arm_App.h();
	}
	if(iron_App.lastw != arm_App.w() || iron_App.lasth != arm_App.h()) {
		if(iron_App.onResize != null) {
			iron_App.onResize();
		} else if(iron_Scene.active != null && iron_Scene.active.camera != null) {
			iron_Scene.active.camera.buildProjection();
		}
	}
	iron_App.lastw = arm_App.w();
	iron_App.lasth = arm_App.h();
};
iron_App.render = function(frames) {
	var frame = frames[0];
	iron_App.framebuffer = frame;
	iron_system_Time.update();
	if(iron_Scene.active == null || !iron_Scene.active.ready) {
		iron_App.render2D(frame);
		return;
	}
	if(iron_App.traitInits.length > 0) {
		var _g = 0;
		var _g1 = iron_App.traitInits;
		while(_g < _g1.length) {
			var f = _g1[_g++];
			if(iron_App.traitInits.length > 0) {
				f();
			} else {
				break;
			}
		}
		iron_App.traitInits.splice(0,iron_App.traitInits.length);
	}
	iron_Scene.active.renderFrame(frame.get_g4());
	var _g = 0;
	var _g1 = iron_App.traitRenders;
	while(_g < _g1.length) {
		var f = _g1[_g++];
		if(iron_App.traitRenders.length > 0) {
			f(frame.get_g4());
		} else {
			break;
		}
	}
	iron_App.render2D(frame);
};
iron_App.render2D = function(frame) {
	if(iron_App.traitRenders2D.length > 0) {
		frame.get_g2().begin(false);
		var _g = 0;
		var _g1 = iron_App.traitRenders2D;
		while(_g < _g1.length) {
			var f = _g1[_g++];
			if(iron_App.traitRenders2D.length > 0) {
				f(frame.get_g2());
			} else {
				break;
			}
		}
		frame.get_g2().end();
	}
};
iron_App.notifyOnInit = function(f) {
	iron_App.traitInits.push(f);
};
iron_App.removeInit = function(f) {
	HxOverrides.remove(iron_App.traitInits,f);
};
iron_App.notifyOnUpdate = function(f) {
	iron_App.traitUpdates.push(f);
};
iron_App.removeUpdate = function(f) {
	HxOverrides.remove(iron_App.traitUpdates,f);
};
iron_App.removeLateUpdate = function(f) {
	HxOverrides.remove(iron_App.traitLateUpdates,f);
};
iron_App.removeRender = function(f) {
	HxOverrides.remove(iron_App.traitRenders,f);
};
iron_App.notifyOnRender2D = function(f) {
	iron_App.traitRenders2D.push(f);
};
iron_App.removeRender2D = function(f) {
	HxOverrides.remove(iron_App.traitRenders2D,f);
};
iron_App.notifyOnReset = function(f) {
	if(iron_App.onResets == null) {
		iron_App.onResets = [];
	}
	iron_App.onResets.push(f);
};
iron_App.notifyOnEndFrame = function(f) {
	if(iron_App.onEndFrames == null) {
		iron_App.onEndFrames = [];
	}
	iron_App.onEndFrames.push(f);
};
iron_App.prototype = {
	__class__: iron_App
};
var iron_system_ArmPack = function() { };
$hxClasses["iron.system.ArmPack"] = iron_system_ArmPack;
iron_system_ArmPack.__name__ = "iron.system.ArmPack";
iron_system_ArmPack.decode = function(b) {
	var i = new haxe_io_BytesInput(b);
	i.set_bigEndian(false);
	return iron_system_ArmPack.read(i);
};
iron_system_ArmPack.read = function(i,key,parentKey) {
	if(parentKey == null) {
		parentKey = "";
	}
	if(key == null) {
		key = "";
	}
	try {
		var b = i.readByte();
		switch(b) {
		case 192:
			return null;
		case 194:
			return false;
		case 195:
			return true;
		case 196:
			return i.read(i.readByte());
		case 197:
			return i.read(i.readUInt16());
		case 198:
			return i.read(i.readInt32());
		case 202:
			return i.readFloat();
		case 204:
			return i.readByte();
		case 205:
			return i.readUInt16();
		case 206:
			return i.readInt32();
		case 208:
			return i.readInt8();
		case 209:
			return i.readInt16();
		case 210:
			return i.readInt32();
		case 217:
			return i.readString(i.readByte());
		case 218:
			return i.readString(i.readUInt16());
		case 219:
			return i.readString(i.readInt32());
		case 220:
			return iron_system_ArmPack.readArray(i,i.readUInt16(),key,parentKey);
		case 221:
			return iron_system_ArmPack.readArray(i,i.readInt32(),key,parentKey);
		case 222:
			return iron_system_ArmPack.readMap(i,i.readUInt16(),key,parentKey);
		case 223:
			return iron_system_ArmPack.readMap(i,i.readInt32(),key,parentKey);
		default:
			if(b < 128) {
				return b;
			} else if(b < 144) {
				return iron_system_ArmPack.readMap(i,15 & b,key,parentKey);
			} else if(b < 160) {
				return iron_system_ArmPack.readArray(i,15 & b,key,parentKey);
			} else if(b < 192) {
				return i.readString(31 & b);
			} else if(b > 223) {
				return -256 | b;
			}
		}
	} catch( _g ) {
		if(!((haxe_Exception.caught(_g).unwrap()) instanceof haxe_io_Eof)) {
			throw _g;
		}
	}
	return null;
};
iron_system_ArmPack.readArray = function(i,length,key,parentKey) {
	if(parentKey == null) {
		parentKey = "";
	}
	if(key == null) {
		key = "";
	}
	var b = i.readByte();
	i.set_position(i.pos - 1);
	if(b == 202) {
		i.set_position(i.pos + 1);
		var a = new Float32Array(length);
		var _g = 0;
		while(_g < length) a[_g++] = i.readFloat();
		return a;
	} else if(b == 210) {
		i.set_position(i.pos + 1);
		var a = new Uint32Array(length);
		var _g = 0;
		while(_g < length) a[_g++] = i.readInt32();
		return a;
	} else if(b == 209) {
		i.set_position(i.pos + 1);
		var a = new Int16Array(length);
		var _g = 0;
		while(_g < length) a[_g++] = i.readInt16();
		return a;
	} else {
		var a = [];
		var _g = 0;
		while(_g < length) {
			++_g;
			a.push(iron_system_ArmPack.read(i,key,parentKey));
		}
		return a;
	}
};
iron_system_ArmPack.readMap = function(i,length,key,parentKey) {
	if(parentKey == null) {
		parentKey = "";
	}
	if(key == null) {
		key = "";
	}
	var out = { };
	var _g = 0;
	while(_g < length) {
		++_g;
		var k = Std.string(iron_system_ArmPack.read(i));
		out[k] = iron_system_ArmPack.read(i,k,key);
	}
	return out;
};
iron_system_ArmPack.encode = function(d) {
	var o = new haxe_io_BytesOutput();
	o.set_bigEndian(false);
	iron_system_ArmPack.write(o,d);
	return o.getBytes();
};
iron_system_ArmPack.write = function(o,d) {
	var _g = Type.typeof(d);
	switch(_g._hx_index) {
	case 0:
		o.writeByte(192);
		break;
	case 1:
		o.writeByte(210);
		o.writeInt32(d);
		break;
	case 2:
		o.writeByte(202);
		o.writeFloat(d);
		break;
	case 3:
		o.writeByte(d ? 195 : 194);
		break;
	case 4:
		var f = Reflect.fields(d);
		o.writeByte(223);
		o.writeInt32(f.length);
		var _g1 = 0;
		while(_g1 < f.length) {
			var k = f[_g1];
			++_g1;
			o.writeByte(219);
			var b = haxe_io_Bytes.ofString(k);
			o.writeInt32(b.length);
			o.writeFullBytes(b,0,b.length);
			iron_system_ArmPack.write(o,Reflect.field(d,k));
		}
		break;
	case 6:
		var c = _g.c;
		var _g = c.__name__;
		if(_g == null) {
			o.writeByte(221);
			o.writeInt32(d.length);
			var isInt = js_Boot.__instanceof(d[0],Int) && !((d) instanceof Float32Array);
			var isFloat = typeof(d[0]) == "number";
			if(((d) instanceof Int16Array)) {
				o.writeByte(209);
				var _g1 = 0;
				var _g2 = d.length;
				while(_g1 < _g2) o.writeInt16(d[_g1++]);
			} else if(isFloat && !isInt) {
				o.writeByte(202);
				var _g1 = 0;
				var _g2 = d.length;
				while(_g1 < _g2) o.writeFloat(d[_g1++]);
			} else if(isInt) {
				o.writeByte(210);
				var _g1 = 0;
				var _g2 = d.length;
				while(_g1 < _g2) o.writeInt32(d[_g1++]);
			} else {
				var _g1 = 0;
				var _g2 = d.length;
				while(_g1 < _g2) iron_system_ArmPack.write(o,d[_g1++]);
			}
		} else {
			switch(_g) {
			case "Array":
				o.writeByte(221);
				o.writeInt32(d.length);
				var isInt = js_Boot.__instanceof(d[0],Int) && !((d) instanceof Float32Array);
				var isFloat = typeof(d[0]) == "number";
				if(((d) instanceof Int16Array)) {
					o.writeByte(209);
					var _g = 0;
					var _g1 = d.length;
					while(_g < _g1) o.writeInt16(d[_g++]);
				} else if(isFloat && !isInt) {
					o.writeByte(202);
					var _g = 0;
					var _g1 = d.length;
					while(_g < _g1) o.writeFloat(d[_g++]);
				} else if(isInt) {
					o.writeByte(210);
					var _g = 0;
					var _g1 = d.length;
					while(_g < _g1) o.writeInt32(d[_g++]);
				} else {
					var _g = 0;
					var _g1 = d.length;
					while(_g < _g1) iron_system_ArmPack.write(o,d[_g++]);
				}
				break;
			case "String":
				o.writeByte(219);
				var b = haxe_io_Bytes.ofString(d);
				o.writeInt32(b.length);
				o.writeFullBytes(b,0,b.length);
				break;
			case "haxe.io.Bytes":
				o.writeByte(198);
				o.writeInt32(d.length);
				o.writeFullBytes(d,0,d.length);
				break;
			default:
			}
		}
		break;
	default:
	}
};
var iron_data_Data = function() { };
$hxClasses["iron.data.Data"] = iron_data_Data;
iron_data_Data.__name__ = "iron.data.Data";
iron_data_Data.getMesh = function(file,name,done) {
	var handle = file + name;
	var cached = iron_data_Data.cachedMeshes.h[handle];
	if(cached != null) {
		done(cached);
		return;
	}
	var loading = iron_data_Data.loadingMeshes.h[handle];
	if(loading != null) {
		loading.push(done);
		return;
	}
	iron_data_Data.loadingMeshes.h[handle] = [done];
	iron_data_MeshData.parse(file,name,function(b) {
		iron_data_Data.cachedMeshes.h[handle] = b;
		b.handle = handle;
		var _g = 0;
		var _g1 = iron_data_Data.loadingMeshes.h[handle];
		while(_g < _g1.length) _g1[_g++](b);
		var _this = iron_data_Data.loadingMeshes;
		if(Object.prototype.hasOwnProperty.call(_this.h,handle)) {
			delete(_this.h[handle]);
		}
	});
};
iron_data_Data.deleteMesh = function(handle) {
	var mesh = iron_data_Data.cachedMeshes.h[handle];
	if(mesh == null) {
		return;
	}
	mesh.delete();
	var _this = iron_data_Data.cachedMeshes;
	if(Object.prototype.hasOwnProperty.call(_this.h,handle)) {
		delete(_this.h[handle]);
	}
};
iron_data_Data.getLight = function(file,name,done) {
	var handle = file + name;
	var cached = iron_data_Data.cachedLights.h[handle];
	if(cached != null) {
		done(cached);
		return;
	}
	var loading = iron_data_Data.loadingLights.h[handle];
	if(loading != null) {
		loading.push(done);
		return;
	}
	iron_data_Data.loadingLights.h[handle] = [done];
	iron_data_LightData.parse(file,name,function(b) {
		iron_data_Data.cachedLights.h[handle] = b;
		var _g = 0;
		var _g1 = iron_data_Data.loadingLights.h[handle];
		while(_g < _g1.length) _g1[_g++](b);
		var _this = iron_data_Data.loadingLights;
		if(Object.prototype.hasOwnProperty.call(_this.h,handle)) {
			delete(_this.h[handle]);
		}
	});
};
iron_data_Data.getCamera = function(file,name,done) {
	var handle = file + name;
	var cached = iron_data_Data.cachedCameras.h[handle];
	if(cached != null) {
		done(cached);
		return;
	}
	var loading = iron_data_Data.loadingCameras.h[handle];
	if(loading != null) {
		loading.push(done);
		return;
	}
	iron_data_Data.loadingCameras.h[handle] = [done];
	iron_data_CameraData.parse(file,name,function(b) {
		iron_data_Data.cachedCameras.h[handle] = b;
		var _g = 0;
		var _g1 = iron_data_Data.loadingCameras.h[handle];
		while(_g < _g1.length) _g1[_g++](b);
		var _this = iron_data_Data.loadingCameras;
		if(Object.prototype.hasOwnProperty.call(_this.h,handle)) {
			delete(_this.h[handle]);
		}
	});
};
iron_data_Data.getMaterial = function(file,name,done) {
	var handle = file + name;
	var cached = iron_data_Data.cachedMaterials.h[handle];
	if(cached != null) {
		done(cached);
		return;
	}
	var loading = iron_data_Data.loadingMaterials.h[handle];
	if(loading != null) {
		loading.push(done);
		return;
	}
	iron_data_Data.loadingMaterials.h[handle] = [done];
	iron_data_MaterialData.parse(file,name,function(b) {
		iron_data_Data.cachedMaterials.h[handle] = b;
		var _g = 0;
		var _g1 = iron_data_Data.loadingMaterials.h[handle];
		while(_g < _g1.length) _g1[_g++](b);
		var _this = iron_data_Data.loadingMaterials;
		if(Object.prototype.hasOwnProperty.call(_this.h,handle)) {
			delete(_this.h[handle]);
		}
	});
};
iron_data_Data.getParticle = function(file,name,done) {
	var handle = file + name;
	var cached = iron_data_Data.cachedParticles.h[handle];
	if(cached != null) {
		done(cached);
		return;
	}
	var loading = iron_data_Data.loadingParticles.h[handle];
	if(loading != null) {
		loading.push(done);
		return;
	}
	iron_data_Data.loadingParticles.h[handle] = [done];
	iron_data_ParticleData.parse(file,name,function(b) {
		iron_data_Data.cachedParticles.h[handle] = b;
		var _g = 0;
		var _g1 = iron_data_Data.loadingParticles.h[handle];
		while(_g < _g1.length) _g1[_g++](b);
		var _this = iron_data_Data.loadingParticles;
		if(Object.prototype.hasOwnProperty.call(_this.h,handle)) {
			delete(_this.h[handle]);
		}
	});
};
iron_data_Data.getWorld = function(file,name,done) {
	if(name == null) {
		done(null);
		return;
	}
	var handle = file + name;
	var cached = iron_data_Data.cachedWorlds.h[handle];
	if(cached != null) {
		done(cached);
		return;
	}
	var loading = iron_data_Data.loadingWorlds.h[handle];
	if(loading != null) {
		loading.push(done);
		return;
	}
	iron_data_Data.loadingWorlds.h[handle] = [done];
	iron_data_WorldData.parse(file,name,function(b) {
		iron_data_Data.cachedWorlds.h[handle] = b;
		var _g = 0;
		var _g1 = iron_data_Data.loadingWorlds.h[handle];
		while(_g < _g1.length) _g1[_g++](b);
		var _this = iron_data_Data.loadingWorlds;
		if(Object.prototype.hasOwnProperty.call(_this.h,handle)) {
			delete(_this.h[handle]);
		}
	});
};
iron_data_Data.getShader = function(file,name,done,overrideContext) {
	var cacheName = name;
	if(overrideContext != null) {
		cacheName += "2";
	}
	var cached = iron_data_Data.cachedShaders.h[cacheName];
	if(cached != null) {
		done(cached);
		return;
	}
	var loading = iron_data_Data.loadingShaders.h[cacheName];
	if(loading != null) {
		loading.push(done);
		return;
	}
	iron_data_Data.loadingShaders.h[cacheName] = [done];
	iron_data_ShaderData.parse(file,name,function(b) {
		iron_data_Data.cachedShaders.h[cacheName] = b;
		var _g = 0;
		var _g1 = iron_data_Data.loadingShaders.h[cacheName];
		while(_g < _g1.length) _g1[_g++](b);
		var _this = iron_data_Data.loadingShaders;
		if(Object.prototype.hasOwnProperty.call(_this.h,cacheName)) {
			delete(_this.h[cacheName]);
		}
	},overrideContext);
};
iron_data_Data.getSceneRaw = function(file,done) {
	var cached = iron_data_Data.cachedSceneRaws.h[file];
	if(cached != null) {
		done(cached);
		return;
	}
	var loading = iron_data_Data.loadingSceneRaws.h[file];
	if(loading != null) {
		loading.push(done);
		return;
	}
	iron_data_Data.loadingSceneRaws.h[file] = [done];
	var compressed = StringTools.endsWith(file,".lz4");
	var isJson = StringTools.endsWith(file,".json");
	var ext = compressed || isJson || StringTools.endsWith(file,".arm") ? "" : ".arm";
	iron_data_Data.getBlob(file + ext,function(b) {
		var parsed = null;
		if(isJson) {
			var s = b.toString();
			if(s.charAt(0) == "{") {
				parsed = JSON.parse(s);
			} else {
				var i = new haxe_io_BytesInput(b.toBytes());
				i.set_bigEndian(false);
				parsed = iron_system_ArmPack.read(i);
			}
		} else {
			var i = new haxe_io_BytesInput(b.toBytes());
			i.set_bigEndian(false);
			parsed = iron_system_ArmPack.read(i);
		}
		iron_data_Data.returnSceneRaw(file,parsed);
	});
};
iron_data_Data.returnSceneRaw = function(file,parsed) {
	iron_data_Data.cachedSceneRaws.h[file] = parsed;
	var _g = 0;
	var _g1 = iron_data_Data.loadingSceneRaws.h[file];
	while(_g < _g1.length) _g1[_g++](parsed);
	var _this = iron_data_Data.loadingSceneRaws;
	if(Object.prototype.hasOwnProperty.call(_this.h,file)) {
		delete(_this.h[file]);
	}
};
iron_data_Data.getMeshRawByName = function(datas,name) {
	if(name == "") {
		return datas[0];
	}
	var _g = 0;
	while(_g < datas.length) {
		var dat = datas[_g];
		++_g;
		if(dat.name == name) {
			return dat;
		}
	}
	return null;
};
iron_data_Data.getLightRawByName = function(datas,name) {
	if(name == "") {
		return datas[0];
	}
	var _g = 0;
	while(_g < datas.length) {
		var dat = datas[_g];
		++_g;
		if(dat.name == name) {
			return dat;
		}
	}
	return null;
};
iron_data_Data.getCameraRawByName = function(datas,name) {
	if(name == "") {
		return datas[0];
	}
	var _g = 0;
	while(_g < datas.length) {
		var dat = datas[_g];
		++_g;
		if(dat.name == name) {
			return dat;
		}
	}
	return null;
};
iron_data_Data.getMaterialRawByName = function(datas,name) {
	if(name == "") {
		return datas[0];
	}
	var _g = 0;
	while(_g < datas.length) {
		var dat = datas[_g];
		++_g;
		if(dat.name == name) {
			return dat;
		}
	}
	return null;
};
iron_data_Data.getParticleRawByName = function(datas,name) {
	if(name == "") {
		return datas[0];
	}
	var _g = 0;
	while(_g < datas.length) {
		var dat = datas[_g];
		++_g;
		if(dat.name == name) {
			return dat;
		}
	}
	return null;
};
iron_data_Data.getWorldRawByName = function(datas,name) {
	if(name == "") {
		return datas[0];
	}
	var _g = 0;
	while(_g < datas.length) {
		var dat = datas[_g];
		++_g;
		if(dat.name == name) {
			return dat;
		}
	}
	return null;
};
iron_data_Data.getShaderRawByName = function(datas,name) {
	if(name == "") {
		return datas[0];
	}
	var _g = 0;
	while(_g < datas.length) {
		var dat = datas[_g];
		++_g;
		if(dat.name == name) {
			return dat;
		}
	}
	return null;
};
iron_data_Data.getBlob = function(file,done) {
	var cached = iron_data_Data.cachedBlobs.h[file];
	if(cached != null) {
		done(cached);
		return;
	}
	var loading = iron_data_Data.loadingBlobs.h[file];
	if(loading != null) {
		loading.push(done);
		return;
	}
	iron_data_Data.loadingBlobs.h[file] = [done];
	kha_Assets.loadBlobFromPath(iron_data_Data.isAbsolute(file) || file.charAt(0) == "." && file.charAt(1) == "." ? file : iron_data_Data.dataPath + file,function(b) {
		iron_data_Data.cachedBlobs.h[file] = b;
		var _g = 0;
		var _g1 = iron_data_Data.loadingBlobs.h[file];
		while(_g < _g1.length) _g1[_g++](b);
		var _this = iron_data_Data.loadingBlobs;
		if(Object.prototype.hasOwnProperty.call(_this.h,file)) {
			delete(_this.h[file]);
		}
		iron_data_Data.assetsLoaded++;
	});
};
iron_data_Data.deleteBlob = function(handle) {
	var blob = iron_data_Data.cachedBlobs.h[handle];
	if(blob == null) {
		return;
	}
	blob.unload();
	var _this = iron_data_Data.cachedBlobs;
	if(Object.prototype.hasOwnProperty.call(_this.h,handle)) {
		delete(_this.h[handle]);
	}
};
iron_data_Data.getImage = function(file,done,readable,format) {
	if(format == null) {
		format = "RGBA32";
	}
	if(readable == null) {
		readable = false;
	}
	var cached = iron_data_Data.cachedImages.h[file];
	if(cached != null) {
		done(cached);
		return;
	}
	var loading = iron_data_Data.loadingImages.h[file];
	if(loading != null) {
		loading.push(done);
		return;
	}
	iron_data_Data.loadingImages.h[file] = [done];
	kha_Assets.loadImageFromPath(iron_data_Data.isAbsolute(file) || file.charAt(0) == "." && file.charAt(1) == "." ? file : iron_data_Data.dataPath + file,readable,function(b) {
		iron_data_Data.cachedImages.h[file] = b;
		var _g = 0;
		var _g1 = iron_data_Data.loadingImages.h[file];
		while(_g < _g1.length) _g1[_g++](b);
		var _this = iron_data_Data.loadingImages;
		if(Object.prototype.hasOwnProperty.call(_this.h,file)) {
			delete(_this.h[file]);
		}
		iron_data_Data.assetsLoaded++;
	});
};
iron_data_Data.deleteImage = function(handle) {
	var image = iron_data_Data.cachedImages.h[handle];
	if(image == null) {
		return;
	}
	image.unload();
	var _this = iron_data_Data.cachedImages;
	if(Object.prototype.hasOwnProperty.call(_this.h,handle)) {
		delete(_this.h[handle]);
	}
};
iron_data_Data.getFont = function(file,done) {
	var cached = iron_data_Data.cachedFonts.h[file];
	if(cached != null) {
		done(cached);
		return;
	}
	var loading = iron_data_Data.loadingFonts.h[file];
	if(loading != null) {
		loading.push(done);
		return;
	}
	iron_data_Data.loadingFonts.h[file] = [done];
	kha_Assets.loadFontFromPath(iron_data_Data.isAbsolute(file) || file.charAt(0) == "." && file.charAt(1) == "." ? file : iron_data_Data.dataPath + file,function(b) {
		iron_data_Data.cachedFonts.h[file] = b;
		var _g = 0;
		var _g1 = iron_data_Data.loadingFonts.h[file];
		while(_g < _g1.length) _g1[_g++](b);
		var _this = iron_data_Data.loadingFonts;
		if(Object.prototype.hasOwnProperty.call(_this.h,file)) {
			delete(_this.h[file]);
		}
		iron_data_Data.assetsLoaded++;
	});
};
iron_data_Data.deleteFont = function(handle) {
	var font = iron_data_Data.cachedFonts.h[handle];
	if(font == null) {
		return;
	}
	font.unload();
	var _this = iron_data_Data.cachedFonts;
	if(Object.prototype.hasOwnProperty.call(_this.h,handle)) {
		delete(_this.h[handle]);
	}
};
iron_data_Data.isAbsolute = function(file) {
	if(!(file.charAt(0) == "/" || file.charAt(1) == ":")) {
		if(file.charAt(0) == "\\") {
			return file.charAt(1) == "\\";
		} else {
			return false;
		}
	} else {
		return true;
	}
};
var iron_system_Input = function() { };
$hxClasses["iron.system.Input"] = iron_system_Input;
iron_system_Input.__name__ = "iron.system.Input";
iron_system_Input.reset = function() {
	iron_system_Input.occupied = false;
	if(iron_system_Input.mouse != null) {
		iron_system_Input.mouse.reset();
	}
	if(iron_system_Input.pen != null) {
		iron_system_Input.pen.reset();
	}
	if(iron_system_Input.keyboard != null) {
		iron_system_Input.keyboard.reset();
	}
	var _g = 0;
	var _g1 = iron_system_Input.gamepads;
	while(_g < _g1.length) _g1[_g++].reset();
};
iron_system_Input.endFrame = function() {
	if(iron_system_Input.mouse != null) {
		iron_system_Input.mouse.endFrame();
	}
	if(iron_system_Input.pen != null) {
		iron_system_Input.pen.endFrame();
	}
	if(iron_system_Input.keyboard != null) {
		iron_system_Input.keyboard.endFrame();
	}
	var _g = 0;
	var _g1 = iron_system_Input.gamepads;
	while(_g < _g1.length) _g1[_g++].endFrame();
	if(iron_system_Input.virtualButtons != null) {
		var vb = haxe_ds_StringMap.valueIterator(iron_system_Input.virtualButtons.h);
		while(vb.hasNext()) {
			var vb1 = vb.next();
			vb1.started = vb1.released = false;
		}
	}
};
iron_system_Input.getMouse = function() {
	if(!iron_system_Input.registered) {
		iron_system_Input.registered = true;
		iron_App.notifyOnEndFrame(iron_system_Input.endFrame);
		iron_App.notifyOnReset(iron_system_Input.reset);
		kha_System.notifyOnApplicationState(function() {
			iron_system_Input.getMouse().reset();
		},null,null,null,null);
	}
	if(iron_system_Input.mouse == null) {
		iron_system_Input.mouse = new iron_system_Mouse();
	}
	return iron_system_Input.mouse;
};
iron_system_Input.getPen = function() {
	if(!iron_system_Input.registered) {
		iron_system_Input.registered = true;
		iron_App.notifyOnEndFrame(iron_system_Input.endFrame);
		iron_App.notifyOnReset(iron_system_Input.reset);
		kha_System.notifyOnApplicationState(function() {
			iron_system_Input.getMouse().reset();
		},null,null,null,null);
	}
	if(iron_system_Input.pen == null) {
		iron_system_Input.pen = new iron_system_Pen();
	}
	return iron_system_Input.pen;
};
iron_system_Input.getKeyboard = function() {
	if(!iron_system_Input.registered) {
		iron_system_Input.registered = true;
		iron_App.notifyOnEndFrame(iron_system_Input.endFrame);
		iron_App.notifyOnReset(iron_system_Input.reset);
		kha_System.notifyOnApplicationState(function() {
			iron_system_Input.getMouse().reset();
		},null,null,null,null);
	}
	if(iron_system_Input.keyboard == null) {
		iron_system_Input.keyboard = new iron_system_Keyboard();
	}
	return iron_system_Input.keyboard;
};
var iron_object_Object = function() {
	this.isEmpty = false;
	this.properties = null;
	this.culledShadow = false;
	this.culledMesh = false;
	this.culled = false;
	this.visibleShadow = true;
	this.visibleMesh = true;
	this.visible = true;
	this.animation = null;
	this.lods = null;
	this.children = [];
	this.parent = null;
	this.traits = [];
	this.constraints = null;
	this.name = "";
	this.raw = null;
	this.uid = iron_object_Object.uidCounter++;
	this.urandom = iron_object_Object.seededRandom();
	this.transform = new iron_object_Transform(this);
	this.isEmpty = js_Boot.getClass(this) == iron_object_Object;
	if(this.isEmpty && iron_Scene.active != null) {
		iron_Scene.active.empties.push(this);
	}
};
$hxClasses["iron.object.Object"] = iron_object_Object;
iron_object_Object.__name__ = "iron.object.Object";
iron_object_Object.seededRandom = function() {
	iron_object_Object.seed = (iron_object_Object.seed * 9301 + 49297) % 233280;
	return iron_object_Object.seed / 233280.0;
};
iron_object_Object.prototype = {
	addChild: function(o,parentInverse) {
		if(parentInverse == null) {
			parentInverse = false;
		}
		if(o.parent == this) {
			return;
		}
		this.children.push(o);
		o.parent = this;
		if(parentInverse) {
			o.transform.applyParentInverse();
		}
	}
	,remove: function() {
		if(this.isEmpty && iron_Scene.active != null) {
			HxOverrides.remove(iron_Scene.active.empties,this);
		}
		if(this.animation != null) {
			this.animation.remove();
		}
		while(this.children.length > 0) this.children[0].remove();
		while(this.traits.length > 0) this.traits[0].remove();
		if(this.parent != null) {
			HxOverrides.remove(this.parent.children,this);
			this.parent = null;
		}
	}
	,getChild: function(name) {
		if(this.name == name) {
			return this;
		} else {
			var _g = 0;
			var _g1 = this.children;
			while(_g < _g1.length) {
				var r = _g1[_g++].getChild(name);
				if(r != null) {
					return r;
				}
			}
		}
		return null;
	}
	,getChildren: function(recursive) {
		if(recursive == null) {
			recursive = false;
		}
		if(!recursive) {
			return this.children;
		}
		var retChildren = this.children.slice();
		var _g = 0;
		var _g1 = this.children;
		while(_g < _g1.length) retChildren = retChildren.concat(_g1[_g++].getChildren(recursive));
		return retChildren;
	}
	,addTrait: function(t) {
		this.traits.push(t);
		t.object = this;
		if(t._add != null) {
			var _g = 0;
			var _g1 = t._add;
			while(_g < _g1.length) _g1[_g++]();
			t._add = null;
		}
	}
	,removeTrait: function(t) {
		if(t._init != null) {
			var _g = 0;
			var _g1 = t._init;
			while(_g < _g1.length) iron_App.removeInit(_g1[_g++]);
			t._init = null;
		}
		if(t._update != null) {
			var _g = 0;
			var _g1 = t._update;
			while(_g < _g1.length) iron_App.removeUpdate(_g1[_g++]);
			t._update = null;
		}
		if(t._lateUpdate != null) {
			var _g = 0;
			var _g1 = t._lateUpdate;
			while(_g < _g1.length) iron_App.removeLateUpdate(_g1[_g++]);
			t._lateUpdate = null;
		}
		if(t._render != null) {
			var _g = 0;
			var _g1 = t._render;
			while(_g < _g1.length) iron_App.removeRender(_g1[_g++]);
			t._render = null;
		}
		if(t._render2D != null) {
			var _g = 0;
			var _g1 = t._render2D;
			while(_g < _g1.length) iron_App.removeRender2D(_g1[_g++]);
			t._render2D = null;
		}
		if(t._remove != null) {
			var _g = 0;
			var _g1 = t._remove;
			while(_g < _g1.length) _g1[_g++]();
			t._remove = null;
		}
		HxOverrides.remove(this.traits,t);
	}
	,setupAnimation: function(oactions) {
		if(oactions == null) {
			return;
		}
		this.animation = new iron_object_ObjectAnimation(this,oactions);
	}
	,__class__: iron_object_Object
};
var iron_RenderPath = function() {
	this.onVoxelize = null;
	this.voxelized = 0;
	this.depthBuffers = [];
	this.cachedShaderContexts = new haxe_ds_StringMap();
	this.loading = 0;
	this.lastFrameTime = 0.0;
	this.viewportScaled = false;
	this.scissorSet = false;
	this.lastH = 0;
	this.lastW = 0;
	this.depthToRenderTarget = new haxe_ds_StringMap();
	this.renderTargets = new haxe_ds_StringMap();
	this.commands = null;
	this.paused = false;
	this.drawOrder = 0;
	this.currentG = null;
	this.isProbe = false;
	this.isProbeCube = false;
	this.isProbePlanar = false;
	this.point = null;
	this.sun = null;
	this.light = null;
	this.currentTarget = null;
	this.frame = 0;
	this.frameTime = 0.0;
	this.frameScissorH = 0;
	this.frameScissorW = 0;
	this.frameScissorY = 0;
	this.frameScissorX = 0;
	this.frameScissor = false;
};
$hxClasses["iron.RenderPath"] = iron_RenderPath;
iron_RenderPath.__name__ = "iron.RenderPath";
iron_RenderPath.setActive = function(renderPath) {
	iron_RenderPath.active = renderPath;
};
iron_RenderPath.sortMeshesDistance = function(meshes) {
	meshes.sort(function(a,b) {
		if(a.cameraDistance >= b.cameraDistance) {
			return 1;
		} else {
			return -1;
		}
	});
};
iron_RenderPath.sortMeshesShader = function(meshes) {
	meshes.sort(function(a,b) {
		if(a.materials[0].name >= b.materials[0].name) {
			return 1;
		} else {
			return -1;
		}
	});
};
iron_RenderPath.prototype = {
	get_ready: function() {
		return this.loading == 0;
	}
	,voxelize: function() {
		if(this.onVoxelize != null) {
			return this.onVoxelize();
		}
		return true;
	}
	,renderFrame: function(g) {
		if(!this.get_ready() || this.paused || arm_App.w() == 0 || arm_App.h() == 0) {
			return;
		}
		if(this.lastW > 0 && (this.lastW != arm_App.w() || this.lastH != arm_App.h())) {
			this.resize();
		}
		this.lastW = arm_App.w();
		this.lastH = arm_App.h();
		this.frameTime = kha_Scheduler.time() - this.lastFrameTime;
		this.lastFrameTime = kha_Scheduler.time();
		var cam = iron_Scene.active.camera;
		this.isProbePlanar = cam != null && cam.renderTarget != null;
		this.isProbeCube = cam != null && cam.renderTargetCube != null;
		this.isProbe = this.isProbePlanar || this.isProbeCube;
		if(this.isProbePlanar) {
			this.frameG = cam.renderTarget.get_g4();
		} else if(this.isProbeCube) {
			this.frameG = cam.renderTargetCube.get_g4();
		} else {
			this.frameG = g;
		}
		this.currentW = arm_App.w();
		this.currentH = arm_App.h();
		this.currentD = 1;
		this.currentFace = -1;
		this.meshesSorted = false;
		var _g = 0;
		var _g1 = iron_Scene.active.lights;
		while(_g < _g1.length) {
			var l = _g1[_g];
			++_g;
			if(l.visible) {
				l.buildMatrix(iron_Scene.active.camera);
			}
			if(l.data.raw.type == "sun") {
				this.sun = l;
			} else {
				this.point = l;
			}
		}
		this.light = iron_Scene.active.lights[0];
		this.commands();
		if(!this.isProbe) {
			this.frame++;
		}
	}
	,setTarget: function(target,additional,viewportScale) {
		if(viewportScale == null) {
			viewportScale = 1.0;
		}
		if(target == "") {
			this.currentD = 1;
			this.currentTarget = null;
			this.currentFace = -1;
			if(this.isProbeCube) {
				this.currentW = iron_Scene.active.camera.renderTargetCube.get_width();
				this.currentH = iron_Scene.active.camera.renderTargetCube.get_height();
				var g = this.frameG;
				var additionalRenderTargets = null;
				var face = iron_Scene.active.camera.currentFace;
				if(face == null) {
					face = -1;
				}
				if(this.currentG != null) {
					if(this.scissorSet) {
						this.currentG.disableScissor();
						this.scissorSet = false;
					}
					this.currentG.end();
					this.currentG = null;
					this.bindParams = null;
				}
				this.currentG = g;
				this.additionalTargets = additionalRenderTargets;
				if(face >= 0) {
					g.beginFace(face);
				} else {
					g.begin(additionalRenderTargets);
				}
			} else {
				this.currentW = arm_App.w();
				this.currentH = arm_App.h();
				if(this.frameScissor) {
					this.setFrameScissor();
				}
				var g = this.frameG;
				var additionalRenderTargets = null;
				if(this.currentG != null) {
					if(this.scissorSet) {
						this.currentG.disableScissor();
						this.scissorSet = false;
					}
					this.currentG.end();
					this.currentG = null;
					this.bindParams = null;
				}
				this.currentG = g;
				this.additionalTargets = additionalRenderTargets;
				g.begin(additionalRenderTargets);
				if(!this.isProbe) {
					this.setCurrentViewport(arm_App.w(),arm_App.h());
					this.setCurrentScissor(arm_App.w(),arm_App.h());
				}
			}
		} else {
			var rt = this.renderTargets.h[target];
			this.currentTarget = rt;
			var additionalImages = null;
			if(additional != null) {
				additionalImages = [];
				var _g = 0;
				while(_g < additional.length) additionalImages.push(this.renderTargets.h[additional[_g++]].image);
			}
			var targetG = rt.isCubeMap ? rt.cubeMap.get_g4() : rt.image.get_g4();
			this.currentW = rt.isCubeMap ? rt.cubeMap.get_width() : rt.image.get_width();
			this.currentH = rt.isCubeMap ? rt.cubeMap.get_height() : rt.image.get_height();
			if(rt.is3D) {
				this.currentD = rt.image.get_depth();
			}
			var face = this.currentFace;
			if(face == null) {
				face = -1;
			}
			if(this.currentG != null) {
				if(this.scissorSet) {
					this.currentG.disableScissor();
					this.scissorSet = false;
				}
				this.currentG.end();
				this.currentG = null;
				this.bindParams = null;
			}
			this.currentG = targetG;
			this.additionalTargets = additionalImages;
			if(face >= 0) {
				targetG.beginFace(face);
			} else {
				targetG.begin(additionalImages);
			}
		}
		if(viewportScale != 1.0) {
			this.viewportScaled = true;
			var viewW = this.currentW * viewportScale | 0;
			var viewH = this.currentH * viewportScale | 0;
			this.currentG.viewport(0,viewH,viewW,viewH);
			this.currentG.scissor(0,viewH,viewW,viewH);
		} else if(this.viewportScaled) {
			this.viewportScaled = false;
			this.setCurrentViewport(this.currentW,this.currentH);
			this.setCurrentScissor(this.currentW,this.currentH);
		}
		this.bindParams = null;
	}
	,setDepthFrom: function(target,from) {
		this.renderTargets.h[target].image.setDepthStencilFrom(this.renderTargets.h[from].image);
	}
	,setCurrentViewport: function(viewW,viewH) {
		this.currentG.viewport(arm_App.x(),this.currentH - (viewH - arm_App.y()),viewW,viewH);
	}
	,setCurrentScissor: function(viewW,viewH) {
		this.currentG.scissor(arm_App.x(),this.currentH - (viewH - arm_App.y()),viewW,viewH);
		this.scissorSet = true;
	}
	,setFrameScissor: function() {
		this.frameG.scissor(this.frameScissorX,this.currentH - (this.frameScissorH - this.frameScissorY),this.frameScissorW,this.frameScissorH);
	}
	,setViewport: function(viewW,viewH) {
		this.setCurrentViewport(viewW,viewH);
		this.setCurrentScissor(viewW,viewH);
	}
	,clearTarget: function(colorFlag,depthFlag) {
		if(colorFlag == -1) {
			if(iron_Scene.active.world != null) {
				colorFlag = iron_Scene.active.world.raw.background_color;
			} else if(iron_Scene.active.camera != null) {
				var cc = iron_Scene.active.camera.data.raw.clear_color;
				if(cc != null) {
					colorFlag = kha_Color.fromFloats(cc[0],cc[1],cc[2]);
				}
			}
		}
		this.currentG.clear(colorFlag,depthFlag,null);
	}
	,clearImage: function(target,color) {
		var rt = this.renderTargets.h[target];
		rt.image.clear(0,0,0,rt.image.get_width(),rt.image.get_height(),rt.image.get_depth(),color);
	}
	,generateMipmaps: function(target) {
		this.renderTargets.h[target].image.generateMipmaps(1000);
	}
	,drawMeshes: function(context) {
		if(context == "shadowmap") {
			if(this.light == null || !this.light.data.raw.cast_shadow || !this.light.visible || this.light.data.raw.strength == 0) {
				return;
			}
		}
		if(this.currentFace >= 0 && this.light != null) {
			this.light.setCubeFace(this.currentFace,iron_Scene.active.camera);
		}
		this.submitDraw(context);
		if(this.scissorSet) {
			this.currentG.disableScissor();
			this.scissorSet = false;
		}
		this.currentG.end();
		this.currentG = null;
		this.bindParams = null;
	}
	,submitDraw: function(context) {
		var camera = iron_Scene.active.camera;
		var meshes = iron_Scene.active.meshes;
		iron_object_MeshObject.lastPipeline = null;
		if(!this.meshesSorted && camera != null) {
			var camX = camera.transform.world.self._30;
			var camY = camera.transform.world.self._31;
			var camZ = camera.transform.world.self._32;
			var _g = 0;
			while(_g < meshes.length) {
				var mesh = meshes[_g];
				++_g;
				var vx = camX - mesh.transform.world.self._30;
				var vy = camY - mesh.transform.world.self._31;
				var vz = camZ - mesh.transform.world.self._32;
				mesh.cameraDistance = Math.sqrt(vx * vx + vy * vy + vz * vz);
			}
			if(this.drawOrder == 1) {
				iron_RenderPath.sortMeshesShader(meshes);
			} else {
				iron_RenderPath.sortMeshesDistance(meshes);
			}
			this.meshesSorted = true;
		}
		var _g = 0;
		while(_g < meshes.length) meshes[_g++].render(this.currentG,context,this.bindParams);
	}
	,drawSkydome: function(handle) {
		if(iron_data_ConstData.skydomeVB == null) {
			iron_data_ConstData.createSkydomeData();
		}
		var cc = this.cachedShaderContexts.h[handle];
		if(cc.context == null) {
			return;
		}
		this.currentG.setPipeline(cc.context.pipeState);
		iron_object_Uniforms.setContextConstants(this.currentG,cc.context,this.bindParams);
		iron_object_Uniforms.setObjectConstants(this.currentG,cc.context,null);
		this.currentG.setVertexBuffer(iron_data_ConstData.skydomeVB);
		this.currentG.setIndexBuffer(iron_data_ConstData.skydomeIB);
		this.currentG.drawIndexedVertices();
		if(this.scissorSet) {
			this.currentG.disableScissor();
			this.scissorSet = false;
		}
		this.currentG.end();
		this.currentG = null;
		this.bindParams = null;
	}
	,bindTarget: function(target,uniform) {
		if(this.bindParams != null) {
			this.bindParams.push(target);
			this.bindParams.push(uniform);
		} else {
			this.bindParams = [target,uniform];
		}
	}
	,drawShader: function(handle) {
		var cc = this.cachedShaderContexts.h[handle];
		if(iron_data_ConstData.screenAlignedVB == null) {
			iron_data_ConstData.createScreenAlignedData();
		}
		this.currentG.setPipeline(cc.context.pipeState);
		iron_object_Uniforms.setContextConstants(this.currentG,cc.context,this.bindParams);
		iron_object_Uniforms.setObjectConstants(this.currentG,cc.context,null);
		this.currentG.setVertexBuffer(iron_data_ConstData.screenAlignedVB);
		this.currentG.setIndexBuffer(iron_data_ConstData.screenAlignedIB);
		this.currentG.drawIndexedVertices();
		if(this.scissorSet) {
			this.currentG.disableScissor();
			this.scissorSet = false;
		}
		this.currentG.end();
		this.currentG = null;
		this.bindParams = null;
	}
	,loadShader: function(handle) {
		var _gthis = this;
		this.loading++;
		var cc = this.cachedShaderContexts.h[handle];
		if(cc != null) {
			this.loading--;
			return;
		}
		cc = new iron_CachedShaderContext();
		this.cachedShaderContexts.h[handle] = cc;
		var shaderPath = handle.split("/");
		iron_data_Data.getShader(shaderPath[0],shaderPath[1],function(res) {
			cc.context = res.getContext(shaderPath[2]);
			_gthis.loading--;
		});
	}
	,resize: function() {
		if(kha_System.windowWidth() == 0 || kha_System.windowHeight() == 0) {
			return;
		}
		var rt = haxe_ds_StringMap.valueIterator(this.renderTargets.h);
		while(rt.hasNext()) {
			var rt1 = rt.next();
			if(rt1.raw.width > 0 || rt1.depthStencilFrom == "" || rt1 == this.depthToRenderTarget.h[rt1.depthStencilFrom]) {
				continue;
			}
			var nodepth = null;
			var rt2 = haxe_ds_StringMap.valueIterator(this.renderTargets.h);
			while(rt2.hasNext()) {
				var rt21 = rt2.next();
				if(rt21.raw.width > 0 || rt21.depthStencilFrom != "" || this.depthToRenderTarget.h[rt21.raw.depth_buffer] != null) {
					continue;
				}
				nodepth = rt21;
				break;
			}
			if(nodepth != null) {
				rt1.image.setDepthStencilFrom(nodepth.image);
			}
		}
		var rt = haxe_ds_StringMap.valueIterator(this.renderTargets.h);
		while(rt.hasNext()) {
			var rt1 = rt.next();
			if(rt1.raw.width == 0) {
				rt1.image.unload();
				rt1.image = this.createImage(rt1.raw,rt1.depthStencil);
			}
		}
		var rt = haxe_ds_StringMap.valueIterator(this.renderTargets.h);
		while(rt.hasNext()) {
			var rt1 = rt.next();
			if(rt1.depthStencilFrom != "") {
				rt1.image.setDepthStencilFrom(this.depthToRenderTarget.h[rt1.depthStencilFrom].image);
			}
		}
	}
	,createRenderTarget: function(t) {
		var rt = this.createTarget(t);
		this.renderTargets.h[t.name] = rt;
		return rt;
	}
	,createDepthBuffer: function(name,format) {
		this.depthBuffers.push({ name : name, format : format});
	}
	,createTarget: function(t) {
		var rt = new iron_RenderTarget(t);
		if(t.depth_buffer != null) {
			rt.hasDepth = true;
			var depthTarget = this.depthToRenderTarget.h[t.depth_buffer];
			if(depthTarget == null) {
				var _g = 0;
				var _g1 = this.depthBuffers;
				while(_g < _g1.length) {
					var db = _g1[_g];
					++_g;
					if(db.name == t.depth_buffer) {
						this.depthToRenderTarget.h[db.name] = rt;
						var s = db.format;
						var tmp;
						if(s == null || s == "") {
							tmp = 1;
						} else {
							switch(s) {
							case "DEPTH16":
								tmp = 5;
								break;
							case "DEPTH24":
								tmp = 1;
								break;
							default:
								tmp = 1;
							}
						}
						rt.depthStencil = tmp;
						rt.image = this.createImage(t,rt.depthStencil);
						break;
					}
				}
			} else {
				rt.depthStencil = 0;
				rt.depthStencilFrom = t.depth_buffer;
				rt.image = this.createImage(t,rt.depthStencil);
				rt.image.setDepthStencilFrom(depthTarget.image);
			}
		} else {
			rt.hasDepth = false;
			if(t.depth != null && t.depth > 1) {
				rt.is3D = true;
			}
			if(t.is_cubemap) {
				rt.isCubeMap = true;
				rt.depthStencil = 0;
				rt.cubeMap = this.createCubeMap(t,rt.depthStencil);
			} else {
				rt.depthStencil = 0;
				rt.image = this.createImage(t,rt.depthStencil);
			}
		}
		return rt;
	}
	,createImage: function(t,depthStencil) {
		var width = t.width == 0 ? arm_App.w() : t.width;
		var height = t.height == 0 ? arm_App.h() : t.height;
		var depth = t.depth != null ? t.depth : 0;
		if(t.displayp != null) {
			if(width > height) {
				width = width * (t.displayp / height) | 0;
				height = t.displayp;
			} else {
				height = height * (t.displayp / width) | 0;
				width = t.displayp;
			}
		}
		if(t.scale != null) {
			width = width * t.scale | 0;
			height = height * t.scale | 0;
			depth = depth * t.scale | 0;
		}
		if(width < 1) {
			width = 1;
		}
		if(height < 1) {
			height = 1;
		}
		if(t.depth != null && t.depth > 1) {
			var img;
			if(t.format != null) {
				switch(t.format) {
				case "DEPTH16":
					img = 3;
					break;
				case "R16":
					img = 6;
					break;
				case "R32":
					img = 5;
					break;
				case "R8":
					img = 1;
					break;
				case "RGBA128":
					img = 2;
					break;
				case "RGBA32":
					img = 0;
					break;
				case "RGBA64":
					img = 4;
					break;
				default:
					img = 0;
				}
			} else {
				img = 0;
			}
			var img1 = kha_Image.create3D(width,height,depth,img);
			if(t.mipmaps) {
				img1.generateMipmaps(1000);
			}
			return img1;
		} else if(t.is_image != null && t.is_image) {
			var tmp;
			if(t.format != null) {
				switch(t.format) {
				case "DEPTH16":
					tmp = 3;
					break;
				case "R16":
					tmp = 6;
					break;
				case "R32":
					tmp = 5;
					break;
				case "R8":
					tmp = 1;
					break;
				case "RGBA128":
					tmp = 2;
					break;
				case "RGBA32":
					tmp = 0;
					break;
				case "RGBA64":
					tmp = 4;
					break;
				default:
					tmp = 0;
				}
			} else {
				tmp = 0;
			}
			return kha_Image.create(width,height,tmp);
		} else {
			var tmp;
			if(t.format != null) {
				switch(t.format) {
				case "DEPTH16":
					tmp = 3;
					break;
				case "R16":
					tmp = 6;
					break;
				case "R32":
					tmp = 5;
					break;
				case "R8":
					tmp = 1;
					break;
				case "RGBA128":
					tmp = 2;
					break;
				case "RGBA32":
					tmp = 0;
					break;
				case "RGBA64":
					tmp = 4;
					break;
				default:
					tmp = 0;
				}
			} else {
				tmp = 0;
			}
			return kha_Image.createRenderTarget(width,height,tmp,depthStencil);
		}
	}
	,createCubeMap: function(t,depthStencil) {
		var tmp;
		if(t.format != null) {
			switch(t.format) {
			case "DEPTH16":
				tmp = 3;
				break;
			case "R16":
				tmp = 6;
				break;
			case "R32":
				tmp = 5;
				break;
			case "R8":
				tmp = 1;
				break;
			case "RGBA128":
				tmp = 2;
				break;
			case "RGBA32":
				tmp = 0;
				break;
			case "RGBA64":
				tmp = 4;
				break;
			default:
				tmp = 0;
			}
		} else {
			tmp = 0;
		}
		return kha_graphics4_CubeMap.createRenderTarget(t.width,tmp,depthStencil);
	}
	,__class__: iron_RenderPath
	,__properties__: {get_ready:"get_ready"}
};
var iron_Scene = function() {
	this.traitRemoves = [];
	this.traitInits = [];
	this.groups = null;
	this.uid = iron_Scene.uidCounter++;
	this.meshes = [];
	this.lights = [];
	this.cameras = [];
	this.empties = [];
	this.animations = [];
	this.armatures = [];
	this.embedded = new haxe_ds_StringMap();
	this.root = new iron_object_Object();
	this.root.name = "Root";
	this.traitInits = [];
	this.traitRemoves = [];
	this.initializing = true;
	if(iron_Scene.global == null) {
		iron_Scene.global = new iron_object_Object();
	}
};
$hxClasses["iron.Scene"] = iron_Scene;
iron_Scene.__name__ = "iron.Scene";
iron_Scene.create = function(format,done) {
	iron_Scene.active = new iron_Scene();
	iron_Scene.active.ready = false;
	iron_Scene.active.raw = format;
	iron_data_Data.getWorld(format.name,format.world_ref,function(world) {
		iron_Scene.active.world = world;
		iron_Scene.active.addScene(format.name,null,function(sceneObject) {
			var _g = 0;
			var _g1 = sceneObject.getChildren(true);
			while(_g < _g1.length) {
				var object = _g1[_g];
				++_g;
				iron_Scene.createTraits(iron_Scene.getRawObjectByName(format,object.name).traits,object);
			}
			if(iron_Scene.active.cameras.length == 0) {
				haxe_Log.trace("No camera found for scene \"" + format.name + "\"",{ fileName : "Sources/iron/Scene.hx", lineNumber : 131, className : "iron.Scene", methodName : "create"});
			}
			iron_Scene.active.camera = iron_Scene.active.getCamera(format.camera_ref);
			iron_Scene.active.ready = true;
			var _g = 0;
			var _g1 = iron_Scene.active.traitInits;
			while(_g < _g1.length) _g1[_g++]();
			iron_Scene.active.traitInits = [];
			iron_Scene.active.sceneParent = sceneObject;
			iron_Scene.active.initializing = false;
			done(sceneObject);
		});
	});
};
iron_Scene.setActive = function(sceneName,done) {
	if(!iron_Scene.framePassed) {
		return;
	}
	iron_Scene.framePassed = false;
	if(iron_Scene.active != null) {
		iron_Scene.active.remove();
	}
	iron_data_Data.getSceneRaw(sceneName,function(format) {
		iron_Scene.create(format,function(o) {
			if(done != null) {
				done(o);
			}
			iron_RenderPath.active.voxelized = 0;
		});
	});
};
iron_Scene.getRawObjectByName = function(format,name) {
	return iron_Scene.traverseObjs(format.objects,name);
};
iron_Scene.traverseObjs = function(children,name) {
	var _g = 0;
	while(_g < children.length) {
		var o = children[_g];
		++_g;
		if(o.name == name) {
			return o;
		}
		if(o.children != null) {
			var res = iron_Scene.traverseObjs(o.children,name);
			if(res != null) {
				return res;
			}
		}
	}
	return null;
};
iron_Scene.generateTransform = function(object,transform) {
	var tmp;
	if(object.transform != null) {
		var a = object.transform.values;
		tmp = new iron_math_Mat4(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15]);
	} else {
		tmp = new iron_math_Mat4(1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0);
	}
	transform.world = tmp;
	var _this = transform.world;
	var loc = transform.loc;
	var quat = transform.rot;
	var scale = transform.scale;
	loc.x = _this.self._30;
	loc.y = _this.self._31;
	loc.z = _this.self._32;
	var _this1 = iron_math_Mat4.helpVec;
	_this1.x = _this.self._00;
	_this1.y = _this.self._01;
	_this1.z = _this.self._02;
	_this1.w = 1.0;
	scale.x = Math.sqrt(_this1.x * _this1.x + _this1.y * _this1.y + _this1.z * _this1.z);
	var _this1 = iron_math_Mat4.helpVec;
	_this1.x = _this.self._10;
	_this1.y = _this.self._11;
	_this1.z = _this.self._12;
	_this1.w = 1.0;
	scale.y = Math.sqrt(_this1.x * _this1.x + _this1.y * _this1.y + _this1.z * _this1.z);
	var _this1 = iron_math_Mat4.helpVec;
	_this1.x = _this.self._20;
	_this1.y = _this.self._21;
	_this1.z = _this.self._22;
	_this1.w = 1.0;
	scale.z = Math.sqrt(_this1.x * _this1.x + _this1.y * _this1.y + _this1.z * _this1.z);
	var _this1 = _this.self;
	var m3 = _this1._12;
	var m4 = _this1._22;
	var m5 = _this1._32;
	var m6 = _this1._13;
	var m7 = _this1._23;
	var m8 = _this1._33;
	var m31 = _this1._12;
	var m41 = _this1._22;
	var m51 = _this1._32;
	var m61 = _this1._13;
	var m71 = _this1._23;
	var m81 = _this1._33;
	var m32 = _this1._11;
	var m42 = _this1._21;
	var m52 = _this1._31;
	var m62 = _this1._13;
	var m72 = _this1._23;
	var m82 = _this1._33;
	var m33 = _this1._11;
	var m43 = _this1._21;
	var m53 = _this1._31;
	var m63 = _this1._12;
	var m73 = _this1._22;
	var m83 = _this1._32;
	if(_this1._00 * (_this1._11 * (m4 * m8 - m5 * m7) - _this1._21 * (m3 * m8 - m5 * m6) + _this1._31 * (m3 * m7 - m4 * m6)) - _this1._01 * (_this1._10 * (m41 * m81 - m51 * m71) - _this1._20 * (m31 * m81 - m51 * m61) + _this1._30 * (m31 * m71 - m41 * m61)) + _this1._02 * (_this1._10 * (m42 * m82 - m52 * m72) - _this1._20 * (m32 * m82 - m52 * m62) + _this1._30 * (m32 * m72 - m42 * m62)) - _this1._03 * (_this1._10 * (m43 * m83 - m53 * m73) - _this1._20 * (m33 * m83 - m53 * m63) + _this1._30 * (m33 * m73 - m43 * m63)) < 0.0) {
		scale.x = -scale.x;
	}
	var invs = 1.0 / scale.x;
	iron_math_Mat4.helpMat.self._00 = _this.self._00 * invs;
	iron_math_Mat4.helpMat.self._01 = _this.self._01 * invs;
	iron_math_Mat4.helpMat.self._02 = _this.self._02 * invs;
	invs = 1.0 / scale.y;
	iron_math_Mat4.helpMat.self._10 = _this.self._10 * invs;
	iron_math_Mat4.helpMat.self._11 = _this.self._11 * invs;
	iron_math_Mat4.helpMat.self._12 = _this.self._12 * invs;
	invs = 1.0 / scale.z;
	iron_math_Mat4.helpMat.self._20 = _this.self._20 * invs;
	iron_math_Mat4.helpMat.self._21 = _this.self._21 * invs;
	iron_math_Mat4.helpMat.self._22 = _this.self._22 * invs;
	var m = iron_math_Mat4.helpMat;
	var m11 = m.self._00;
	var m12 = m.self._10;
	var m13 = m.self._20;
	var m21 = m.self._01;
	var m22 = m.self._11;
	var m23 = m.self._21;
	var m31 = m.self._02;
	var m32 = m.self._12;
	var m33 = m.self._22;
	var tr = m11 + m22 + m33;
	var s = 0.0;
	if(tr > 0) {
		s = 0.5 / Math.sqrt(tr + 1.0);
		quat.w = 0.25 / s;
		quat.x = (m32 - m23) * s;
		quat.y = (m13 - m31) * s;
		quat.z = (m21 - m12) * s;
	} else if(m11 > m22 && m11 > m33) {
		s = 2.0 * Math.sqrt(1.0 + m11 - m22 - m33);
		quat.w = (m32 - m23) / s;
		quat.x = 0.25 * s;
		quat.y = (m12 + m21) / s;
		quat.z = (m13 + m31) / s;
	} else if(m22 > m33) {
		s = 2.0 * Math.sqrt(1.0 + m22 - m11 - m33);
		quat.w = (m13 - m31) / s;
		quat.x = (m12 + m21) / s;
		quat.y = 0.25 * s;
		quat.z = (m23 + m32) / s;
	} else {
		s = 2.0 * Math.sqrt(1.0 + m33 - m11 - m22);
		quat.w = (m21 - m12) / s;
		quat.x = (m13 + m31) / s;
		quat.y = (m23 + m32) / s;
		quat.z = 0.25 * s;
	}
	if(object.local_only != null) {
		transform.localOnly = object.local_only;
	}
	if(transform.object.parent != null) {
		transform.update();
	}
};
iron_Scene.createTraits = function(traits,object) {
	if(traits == null) {
		return;
	}
	var _g = 0;
	while(_g < traits.length) {
		var t = traits[_g];
		++_g;
		if(t.type == "Script") {
			var args = [];
			if(t.parameters != null) {
				var _g1 = 0;
				var _g2 = t.parameters;
				while(_g1 < _g2.length) args.push(iron_Scene.parseArg(_g2[_g1++]));
			}
			var traitInst = iron_Scene.createTraitClassInstance(t.class_name,args);
			if(traitInst == null) {
				haxe_Log.trace("Error: Trait '" + t.class_name + "' referenced in object '" + object.name + "' not found",{ fileName : "Sources/iron/Scene.hx", lineNumber : 820, className : "iron.Scene", methodName : "createTraits"});
				continue;
			}
			if(t.props != null) {
				var _g3 = 0;
				var _g4 = t.props.length / 3 | 0;
				while(_g3 < _g4) {
					var i = _g3++;
					var pname = t.props[i * 3];
					var ptype = t.props[i * 3 + 1];
					var pval = t.props[i * 3 + 2];
					if(StringTools.endsWith(ptype,"Object") && pval != "") {
						Reflect.setProperty(traitInst,pname,iron_Scene.active.getChild(pval));
					} else {
						switch(ptype) {
						case "Vec2":
							Reflect.setProperty(traitInst,pname,new iron_math_Vec2(pval[0],pval[1]));
							break;
						case "Vec3":
							Reflect.setProperty(traitInst,pname,new iron_math_Vec3(pval[0],pval[1],pval[2]));
							break;
						case "Vec4":
							Reflect.setProperty(traitInst,pname,new iron_math_Vec4(pval[0],pval[1],pval[2],pval[3]));
							break;
						default:
							Reflect.setProperty(traitInst,pname,pval);
						}
					}
				}
			}
			object.addTrait(traitInst);
		}
	}
};
iron_Scene.parseArg = function(str) {
	if(str == "true") {
		return true;
	} else if(str == "false") {
		return false;
	} else if(str == "null") {
		return null;
	} else if(str.charAt(0) == "'") {
		return StringTools.replace(str,"'","");
	} else if(str.charAt(0) == "\"") {
		return StringTools.replace(str,"\"","");
	} else if(str.charAt(0) == "[") {
		str = StringTools.replace(str,"[","");
		str = StringTools.replace(str,"]","");
		str = StringTools.replace(str," ","");
		var ar = [];
		var vals = str.split(",");
		var _g = 0;
		while(_g < vals.length) ar.push(iron_Scene.parseArg(vals[_g++]));
		return ar;
	} else {
		var f = parseFloat(str);
		var i = Std.parseInt(str);
		if(f == i) {
			return i;
		} else {
			return f;
		}
	}
};
iron_Scene.createConstraints = function(constraints,object) {
	if(constraints == null) {
		return;
	}
	object.constraints = [];
	var _g = 0;
	while(_g < constraints.length) object.constraints.push(new iron_object_Constraint(constraints[_g++]));
};
iron_Scene.createTraitClassInstance = function(traitName,args) {
	var cname = $hxClasses[traitName];
	if(cname == null) {
		return null;
	}
	return Type.createInstance(cname,args);
};
iron_Scene.prototype = {
	remove: function() {
		var _g = 0;
		var _g1 = this.traitRemoves;
		while(_g < _g1.length) _g1[_g++]();
		var _g = 0;
		var _g1 = this.meshes;
		while(_g < _g1.length) _g1[_g++].remove();
		var _g = 0;
		var _g1 = this.lights;
		while(_g < _g1.length) _g1[_g++].remove();
		var _g = 0;
		var _g1 = this.cameras;
		while(_g < _g1.length) _g1[_g++].remove();
		var _g = 0;
		var _g1 = this.empties;
		while(_g < _g1.length) _g1[_g++].remove();
		this.groups = null;
		this.root.remove();
	}
	,updateFrame: function() {
		if(!this.ready) {
			return;
		}
		var _g = 0;
		var _g1 = this.animations;
		while(_g < _g1.length) _g1[_g++].update(1 / iron_system_Time.frequency * iron_system_Time.scale);
		var _g = 0;
		var _g1 = this.empties;
		while(_g < _g1.length) {
			var e = _g1[_g];
			++_g;
			if(e != null && e.parent != null) {
				e.transform.update();
			}
		}
	}
	,renderFrame: function(g) {
		if(!this.ready || iron_RenderPath.active == null) {
			return;
		}
		iron_Scene.framePassed = true;
		if(this.camera != null) {
			this.camera.renderFrame(g);
		} else {
			iron_RenderPath.active.renderFrame(g);
		}
	}
	,addObject: function(parent) {
		var object = new iron_object_Object();
		if(parent != null) {
			parent.addChild(object);
		} else {
			this.root.addChild(object);
		}
		return object;
	}
	,getChild: function(name) {
		return this.root.getChild(name);
	}
	,getCamera: function(name) {
		var _g = 0;
		var _g1 = this.cameras;
		while(_g < _g1.length) {
			var c = _g1[_g];
			++_g;
			if(c.name == name) {
				return c;
			}
		}
		return null;
	}
	,addMeshObject: function(data,materials,parent) {
		var object = new iron_object_MeshObject(data,materials);
		if(parent != null) {
			parent.addChild(object);
		} else {
			this.root.addChild(object);
		}
		return object;
	}
	,addLightObject: function(data,parent) {
		var object = new iron_object_LightObject(data);
		if(parent != null) {
			parent.addChild(object);
		} else {
			this.root.addChild(object);
		}
		return object;
	}
	,addCameraObject: function(data,parent) {
		var object = new iron_object_CameraObject(data);
		if(parent != null) {
			parent.addChild(object);
		} else {
			this.root.addChild(object);
		}
		return object;
	}
	,addScene: function(sceneName,parent,done) {
		var _gthis = this;
		if(parent == null) {
			parent = this.addObject();
			parent.name = sceneName;
		}
		iron_data_Data.getSceneRaw(sceneName,function(format) {
			iron_Scene.createTraits(format.traits,parent);
			_gthis.loadEmbeddedData(format.embedded_datas,function() {
				var objectsTraversed = 0;
				var objectsCount = _gthis.getObjectsCount(format.objects);
				var traverseObjects = null;
				traverseObjects = function(parent,objects,parentObject,done) {
					if(objects == null) {
						return;
					}
					var _g = 0;
					var _g1 = objects.length;
					while(_g < _g1) {
						var o = [objects[_g++]];
						if(o[0].spawn != null && o[0].spawn == false) {
							if((objectsTraversed += 1) == objectsCount) {
								done();
							}
							continue;
						}
						_gthis.createObject(o[0],format,parent,parentObject,(function(o) {
							return function(object) {
								traverseObjects(object,o[0].children,o[0],done);
								if((objectsTraversed += 1) == objectsCount) {
									done();
								}
							};
						})(o));
					}
				};
				if(format.objects == null || format.objects.length == 0) {
					done(parent);
				} else {
					traverseObjects(parent,format.objects,null,function() {
						done(parent);
					});
				}
			});
		});
	}
	,getObjectsCount: function(objects,discardNoSpawn) {
		if(discardNoSpawn == null) {
			discardNoSpawn = true;
		}
		if(objects == null) {
			return 0;
		}
		var result = objects.length;
		var _g = 0;
		while(_g < objects.length) {
			var o = objects[_g];
			++_g;
			if(discardNoSpawn && o.spawn != null && o.spawn == false) {
				continue;
			}
			if(o.children != null) {
				result += this.getObjectsCount(o.children);
			}
		}
		return result;
	}
	,spawnObject: function(name,parent,done,spawnChildren) {
		if(spawnChildren == null) {
			spawnChildren = true;
		}
		var _gthis = this;
		var objectsTraversed = 0;
		var obj = iron_Scene.getRawObjectByName(this.raw,name);
		var objectsCount = spawnChildren ? this.getObjectsCount([obj],false) : 1;
		var spawnObjectTree = null;
		spawnObjectTree = function(obj,parent,parentObject,done) {
			_gthis.createObject(obj,_gthis.raw,parent,parentObject,function(object) {
				if(spawnChildren && obj.children != null) {
					var _g = 0;
					var _g1 = obj.children;
					while(_g < _g1.length) spawnObjectTree(_g1[_g++],object,obj,done);
				}
				if((objectsTraversed += 1) == objectsCount && done != null) {
					while(object.name != name) object = object.parent;
					done(object);
				}
			});
		};
		spawnObjectTree(obj,parent,null,done);
	}
	,createObject: function(o,format,parent,parentObject,done) {
		var _gthis = this;
		var sceneName = format.name;
		if(o.type == "camera_object") {
			iron_data_Data.getCamera(sceneName,o.data_ref,function(b) {
				var object = _gthis.addCameraObject(b,parent);
				_gthis.returnObject(object,o,done);
			});
		} else if(o.type == "light_object") {
			iron_data_Data.getLight(sceneName,o.data_ref,function(b) {
				var object = _gthis.addLightObject(b,parent);
				_gthis.returnObject(object,o,done);
			});
		} else if(o.type == "mesh_object") {
			if(o.material_refs == null || o.material_refs.length == 0) {
				this.createMeshObject(o,format,parent,parentObject,null,done);
			} else {
				var materials = new Array(o.material_refs.length);
				var materialsLoaded = 0;
				var _g = 0;
				var _g1 = o.material_refs.length;
				while(_g < _g1) {
					var i = [_g++];
					iron_data_Data.getMaterial(sceneName,o.material_refs[i[0]],(function(i) {
						return function(mat) {
							materials[i[0]] = mat;
							materialsLoaded += 1;
							if(materialsLoaded == o.material_refs.length) {
								_gthis.createMeshObject(o,format,parent,parentObject,materials,done);
							}
						};
					})(i));
				}
			}
		} else if(o.type == "object") {
			this.returnObject(this.addObject(parent),o,function(ro) {
				if(o.group_ref != null) {
					_gthis.spawnGroup(format,o.group_ref,ro,function() {
						done(ro);
					});
				} else {
					done(ro);
				}
			});
		} else {
			done(null);
		}
	}
	,spawnGroup: function(format,groupRef,groupOwner,done,failed) {
		var _gthis = this;
		var spawned = 0;
		var object_refs = this.getGroupObjectRefs(groupRef);
		if(object_refs == null) {
			if(failed != null) {
				failed();
			}
		} else if(object_refs.length == 0) {
			done();
		} else {
			var _g = 0;
			while(_g < object_refs.length) this.spawnObject(object_refs[_g++],groupOwner,function(spawnedObject) {
				if(!_gthis.isObjectInGroup(groupRef,spawnedObject.parent)) {
					var _g = 0;
					var _g1 = format.groups;
					while(_g < _g1.length) {
						var group = _g1[_g];
						++_g;
						if(group.name == groupRef) {
							spawnedObject.transform.translate(-group.instance_offset[0],-group.instance_offset[1],-group.instance_offset[2]);
							break;
						}
					}
				}
				if((spawned += 1) == object_refs.length) {
					done();
				}
			});
		}
	}
	,getGroupObjectRefs: function(group_ref) {
		var _g = 0;
		var _g1 = iron_Scene.active.raw.groups;
		while(_g < _g1.length) {
			var g = _g1[_g];
			++_g;
			if(g.name == group_ref) {
				return g.object_refs;
			}
		}
		return null;
	}
	,getGroupObjectsRaw: function(groupRef) {
		var objectRefs = this.getGroupObjectRefs(groupRef);
		var objects = [];
		if(objectRefs == null) {
			return objects;
		}
		var _g = 0;
		while(_g < objectRefs.length) {
			var rawObj = iron_Scene.getRawObjectByName(this.raw,objectRefs[_g++]);
			objects.push(rawObj);
			objects = objects.concat(this.getChildObjectsRaw(rawObj));
		}
		return objects;
	}
	,getChildObjectsRaw: function(rawObj,recursive) {
		if(recursive == null) {
			recursive = true;
		}
		var children = rawObj.children;
		if(children == null) {
			return [];
		}
		children = children.slice();
		if(recursive) {
			var _g = 0;
			var _g1 = rawObj.children;
			while(_g < _g1.length) children = children.concat(this.getChildObjectsRaw(_g1[_g++]));
		}
		return children;
	}
	,isObjectInGroup: function(groupRef,object) {
		var _g = 0;
		var _g1 = this.getGroupObjectsRaw(groupRef);
		while(_g < _g1.length) if(_g1[_g++].name == object.name) {
			return true;
		}
		return false;
	}
	,createMeshObject: function(o,format,parent,parentObject,materials,done) {
		var _gthis = this;
		var ref = o.data_ref.split("/");
		var object_file = "";
		var data_ref = "";
		var sceneName = format.name;
		if(ref.length == 2) {
			object_file = ref[0];
			data_ref = ref[1];
		} else {
			object_file = sceneName;
			data_ref = o.data_ref;
		}
		if(parentObject != null && parentObject.bone_actions != null) {
			var bactions = [];
			var _g = 0;
			var _g1 = parentObject.bone_actions;
			while(_g < _g1.length) iron_data_Data.getSceneRaw(_g1[_g++],function(action) {
				bactions.push(action);
				if(bactions.length == parentObject.bone_actions.length) {
					var armature = null;
					var _g = 0;
					var _g1 = _gthis.armatures;
					while(_g < _g1.length) {
						var a = _g1[_g];
						++_g;
						if(a.uid == parent.uid) {
							armature = a;
							break;
						}
					}
					if(armature == null) {
						var _g = 0;
						var _g1 = _gthis.armatures;
						while(_g < _g1.length) if(_g1[_g++].name == parent.name) {
							parent.name += "." + parent.uid;
							break;
						}
						armature = new iron_data_Armature(parent.uid,parent.name,bactions);
						_gthis.armatures.push(armature);
					}
					_gthis.returnMeshObject(object_file,data_ref,sceneName,armature,materials,parent,parentObject,o,done);
				}
			});
		} else {
			this.returnMeshObject(object_file,data_ref,sceneName,null,materials,parent,parentObject,o,done);
		}
	}
	,returnMeshObject: function(object_file,data_ref,sceneName,armature,materials,parent,parentObject,o,done) {
		var _gthis = this;
		iron_data_Data.getMesh(object_file,data_ref,function(mesh) {
			if(mesh.isSkinned) {
				var g = mesh.geom;
				if(armature != null) {
					g.addArmature(armature);
				} else {
					g.addAction(mesh.format.objects,"none");
				}
			}
			var object = _gthis.addMeshObject(mesh,materials,parent);
			if(o.particle_refs != null) {
				var _g = 0;
				var _g1 = o.particle_refs;
				while(_g < _g1.length) (js_Boot.__cast(object , iron_object_MeshObject)).setupParticleSystem(sceneName,_g1[_g++]);
			}
			if(o.tilesheet_ref != null) {
				(js_Boot.__cast(object , iron_object_MeshObject)).setupTilesheet(sceneName,o.tilesheet_ref,o.tilesheet_action_ref);
			}
			_gthis.returnObject(object,o,done);
		});
	}
	,returnObject: function(object,o,done) {
		var _gthis = this;
		if(object != null && o.object_actions != null) {
			var oactions = [];
			while(oactions.length < o.object_actions.length) oactions.push(null);
			var actionsLoaded = 0;
			var _g = 0;
			var _g1 = o.object_actions.length;
			while(_g < _g1) {
				var i = [_g++];
				var ref = o.object_actions[i[0]];
				if(ref == "null") {
					actionsLoaded += 1;
					continue;
				}
				iron_data_Data.getSceneRaw(ref,(function(i) {
					return function(action) {
						oactions[i[0]] = action;
						actionsLoaded += 1;
						if(actionsLoaded == o.object_actions.length) {
							_gthis.returnObjectLoaded(object,o,oactions,done);
						}
					};
				})(i));
			}
		} else {
			this.returnObjectLoaded(object,o,null,done);
		}
	}
	,returnObjectLoaded: function(object,o,oactions,done) {
		if(object != null) {
			object.raw = o;
			object.name = o.name;
			if(o.visible != null) {
				object.visible = o.visible;
			}
			if(o.visible_mesh != null) {
				object.visibleMesh = o.visible_mesh;
			}
			if(o.visible_shadow != null) {
				object.visibleShadow = o.visible_shadow;
			}
			iron_Scene.createConstraints(o.constraints,object);
			iron_Scene.generateTransform(o,object.transform);
			object.setupAnimation(oactions);
			if(o.properties != null) {
				object.properties = new haxe_ds_StringMap();
				var _g = 0;
				var _g1 = o.properties;
				while(_g < _g1.length) {
					var p = _g1[_g];
					++_g;
					object.properties.h[p.name] = p.value;
				}
			}
			if(!iron_Scene.active.initializing) {
				iron_Scene.createTraits(o.traits,object);
			}
		}
		done(object);
	}
	,loadEmbeddedData: function(datas,done) {
		if(datas == null) {
			done();
			return;
		}
		var loaded = 0;
		var _g = 0;
		while(_g < datas.length) this.embedData(datas[_g++],function() {
			loaded += 1;
			if(loaded == datas.length) {
				done();
			}
		});
	}
	,embedData: function(file,done) {
		var _gthis = this;
		if(StringTools.endsWith(file,".raw")) {
			iron_data_Data.getBlob(file,function(blob) {
				var b = blob.toBytes();
				var w = (Math.pow(b.length,0.33333333333333331) | 0) + 1;
				var image = kha_Image.fromBytes3D(b,w,w,w,1);
				_gthis.embedded.h[file] = image;
				done();
			});
		} else {
			iron_data_Data.getImage(file,function(image) {
				_gthis.embedded.h[file] = image;
				done();
			});
		}
	}
	,__class__: iron_Scene
};
var iron_system_Time = function() { };
$hxClasses["iron.system.Time"] = iron_system_Time;
iron_system_Time.__name__ = "iron.system.Time";
iron_system_Time.init = function() {
	iron_system_Time.frequency = kha_Display.get_primary() != null ? kha_Display.get_primary().get_frequency() : 60;
};
iron_system_Time.update = function() {
	iron_system_Time.realDelta = kha_Scheduler.realTime() - iron_system_Time.last;
	iron_system_Time.last = kha_Scheduler.realTime();
};
var arm_IronBridge = $hx_exports["iron"] = function() { };
$hxClasses["arm.IronBridge"] = arm_IronBridge;
arm_IronBridge.__name__ = "arm.IronBridge";
var kha_Blob = function(bytes) {
	this.bytes = bytes;
};
$hxClasses["kha.Blob"] = kha_Blob;
kha_Blob.__name__ = "kha.Blob";
kha_Blob.fromBytes = function(bytes) {
	return new kha_Blob(bytes);
};
kha_Blob.alloc = function(size) {
	return new kha_Blob(new haxe_io_Bytes(new ArrayBuffer(size)));
};
kha_Blob.readF32 = function(i) {
	var sign = (i & -2147483648) == 0 ? 1 : -1;
	var exp = i >> 23 & 255;
	var man = i & 8388607;
	switch(exp) {
	case 0:
		return 0.0;
	case 255:
		if(man != 0) {
			return NaN;
		} else if(sign > 0) {
			return Infinity;
		} else {
			return -Infinity;
		}
		break;
	default:
		return sign * ((man + 8388608) / 8388608.0) * Math.pow(2,exp - 127);
	}
};
kha_Blob.prototype = {
	sub: function(start,length) {
		return new kha_Blob(this.bytes.sub(start,length));
	}
	,get_length: function() {
		return this.bytes.length;
	}
	,writeU8: function(position,value) {
		this.bytes.b[position] = value;
	}
	,readU8: function(position) {
		return this.bytes.b[position++];
	}
	,readU16BE: function(position) {
		var first = this.bytes.b[position];
		var second = this.bytes.b[position + 1];
		position += 2;
		return first * 256 + second;
	}
	,readU32BE: function(position) {
		var fourth = this.bytes.b[position];
		var third = this.bytes.b[position + 1];
		var second = this.bytes.b[position + 2];
		var first = this.bytes.b[position + 3];
		position += 4;
		return first + second * 256 + third * 256 * 256 + fourth * 256 * 256 * 256;
	}
	,readS16BE: function(position) {
		var first = this.bytes.b[position];
		var second = this.bytes.b[position + 1];
		position += 2;
		var sign = (first & 128) == 0 ? 1 : -1;
		first &= 127;
		if(sign == -1) {
			return -32767 + first * 256 + second;
		} else {
			return first * 256 + second;
		}
	}
	,readS16LE: function(position) {
		var first = this.bytes.b[position];
		var second = this.bytes.b[position + 1];
		var sign = (second & 128) == 0 ? 1 : -1;
		second &= 127;
		position += 2;
		if(sign == -1) {
			return -32767 + second * 256 + first;
		} else {
			return second * 256 + first;
		}
	}
	,readS32LE: function(position) {
		var fourth = this.bytes.b[position];
		var third = this.bytes.b[position + 1];
		var second = this.bytes.b[position + 2];
		var first = this.bytes.b[position + 3];
		var sign = (first & 128) == 0 ? 1 : -1;
		first &= 127;
		position += 4;
		if(sign == -1) {
			return -2147483647 + fourth + third * 256 + second * 256 * 256 + first * 256 * 256 * 256;
		} else {
			return fourth + third * 256 + second * 256 * 256 + first * 256 * 256 * 256;
		}
	}
	,readS32BE: function(position) {
		var fourth = this.bytes.b[position];
		var third = this.bytes.b[position + 1];
		var second = this.bytes.b[position + 2];
		var first = this.bytes.b[position + 3];
		var sign = (fourth & 128) == 0 ? 1 : -1;
		fourth &= 127;
		position += 4;
		if(sign == -1) {
			return -2147483647 + first + second * 256 + third * 256 * 256 + fourth * 256 * 256 * 256;
		}
		return first + second * 256 + third * 256 * 256 + fourth * 256 * 256 * 256;
	}
	,readF32LE: function(position) {
		return kha_Blob.readF32(this.readS32LE(position));
	}
	,readF32BE: function(position) {
		return kha_Blob.readF32(this.readS32BE(position));
	}
	,toString: function() {
		return this.bytes.toString();
	}
	,toBytes: function() {
		return this.bytes;
	}
	,unload: function() {
		this.bytes = null;
	}
	,__class__: kha_Blob
	,__properties__: {get_length:"get_length"}
};
var arm_node_Brush = function() { };
$hxClasses["arm.node.Brush"] = arm_node_Brush;
arm_node_Brush.__name__ = "arm.node.Brush";
arm_node_Brush.getNode = function(id) {
	var _g = 0;
	var _g1 = arm_node_Brush.nodes;
	while(_g < _g1.length) {
		var n = _g1[_g];
		++_g;
		if(n.id == id) {
			return n;
		}
	}
	return null;
};
arm_node_Brush.getInputLink = function(inp) {
	var _g = 0;
	var _g1 = arm_node_Brush.links;
	while(_g < _g1.length) {
		var l = _g1[_g];
		++_g;
		if(l.to_id == inp.node_id) {
			var node = arm_node_Brush.getNode(inp.node_id);
			if(node.inputs.length <= l.to_socket) {
				return null;
			}
			if(node.inputs[l.to_socket] == inp) {
				return l;
			}
		}
	}
	return null;
};
arm_node_Brush.getOutputLinks = function(out) {
	var res = [];
	var _g = 0;
	var _g1 = arm_node_Brush.links;
	while(_g < _g1.length) {
		var l = _g1[_g];
		++_g;
		if(l.from_id == out.node_id) {
			var node = arm_node_Brush.getNode(out.node_id);
			if(node.outputs.length <= l.from_socket) {
				continue;
			}
			if(node.outputs[l.from_socket] == out) {
				res.push(l);
			}
		}
	}
	return res;
};
arm_node_Brush.safesrc = function(s) {
	return StringTools.replace(s," ","");
};
arm_node_Brush.node_name = function(node) {
	return arm_node_Brush.safesrc(node.name) + node.id;
};
arm_node_Brush.parse = function(canvas,onAdd) {
	if(onAdd == null) {
		onAdd = true;
	}
	arm_node_Brush.nodes = canvas.nodes;
	arm_node_Brush.links = canvas.links;
	arm_node_Brush.parsed_nodes = [];
	arm_node_Brush.parsed_labels = new haxe_ds_StringMap();
	arm_node_Brush.nodeMap = new haxe_ds_StringMap();
	var root_nodes = arm_node_Brush.get_root_nodes(canvas);
	arm_node_Brush.tree = new arm_node_LogicTree();
	if(onAdd) {
		arm_node_Brush.tree.notifyOnAdd(function() {
			var _g = 0;
			while(_g < root_nodes.length) arm_node_Brush.build_node(root_nodes[_g++]);
		});
	} else {
		var _g = 0;
		while(_g < root_nodes.length) arm_node_Brush.build_node(root_nodes[_g++]);
	}
};
arm_node_Brush.build_node = function(node) {
	var name = arm_node_Brush.node_name(node);
	if(arm_node_Brush.parsed_nodes.indexOf(name) != -1) {
		return name;
	}
	arm_node_Brush.parsed_nodes.push(name);
	var v = arm_node_Brush.createClassInstance(node.type,[arm_node_Brush.tree]);
	arm_node_Brush.nodeMap.h[name] = v;
	var _g = 0;
	var _g1 = node.buttons;
	while(_g < _g1.length) {
		var b = _g1[_g];
		++_g;
		if(b.type == "ENUM") {
			var texts = ((b.data) instanceof Array) ? b.data : zui_Nodes.enumTexts(node.type);
			Reflect.setProperty(v,b.name,texts[b.default_value]);
		} else {
			Reflect.setProperty(v,b.name,b.default_value);
		}
	}
	var inp_node = null;
	var inp_from = 0;
	var _g = 0;
	var _g1 = node.inputs.length;
	while(_g < _g1) {
		var i = _g++;
		var inp = node.inputs[i];
		var l = arm_node_Brush.getInputLink(inp);
		if(l != null) {
			var n = arm_node_Brush.getNode(l.from_id);
			var socket = n.outputs[l.from_socket];
			if(socket.type == node.inputs[i].type) {
				var this1 = arm_node_Brush.nodeMap;
				var key = arm_node_Brush.build_node(n);
				inp_node = this1.h[key];
				var _g2 = 0;
				var _g3 = n.outputs.length;
				while(_g2 < _g3) {
					var i1 = _g2++;
					if(n.outputs[i1] == socket) {
						inp_from = i1;
						break;
					}
				}
			} else {
				inp_node = arm_node_Brush.build_default_node(inp);
				inp_from = 0;
			}
		} else {
			inp_node = arm_node_Brush.build_default_node(inp);
			inp_from = 0;
		}
		v.addInput(inp_node,inp_from);
	}
	var _g = 0;
	var _g1 = node.outputs;
	while(_g < _g1.length) {
		var out = _g1[_g];
		++_g;
		var outNodes = [];
		var ls = arm_node_Brush.getOutputLinks(out);
		if(ls != null && ls.length > 0) {
			var _g2 = 0;
			while(_g2 < ls.length) {
				var out_name = arm_node_Brush.build_node(arm_node_Brush.getNode(ls[_g2++].to_id));
				outNodes.push(arm_node_Brush.nodeMap.h[out_name]);
			}
		} else {
			outNodes.push(arm_node_Brush.build_default_node(out));
		}
		v.addOutputs(outNodes);
	}
	return name;
};
arm_node_Brush.get_root_nodes = function(node_group) {
	var roots = [];
	var _g = 0;
	var _g1 = node_group.nodes;
	while(_g < _g1.length) {
		var node = _g1[_g];
		++_g;
		var linked = false;
		var _g2 = 0;
		var _g3 = node.outputs;
		while(_g2 < _g3.length) {
			var ls = arm_node_Brush.getOutputLinks(_g3[_g2++]);
			if(ls != null && ls.length > 0) {
				linked = true;
				break;
			}
		}
		if(!linked) {
			roots.push(node);
		}
	}
	return roots;
};
arm_node_Brush.build_default_node = function(inp) {
	var v = null;
	if(inp.type == "OBJECT") {
		v = arm_node_Brush.createClassInstance("ObjectNode",[arm_node_Brush.tree,inp.default_value]);
	} else if(inp.type == "ANIMACTION") {
		v = arm_node_Brush.createClassInstance("StringNode",[arm_node_Brush.tree,inp.default_value]);
	} else if(inp.type == "VECTOR") {
		if(inp.default_value == null) {
			inp.default_value = [0,0,0];
		}
		v = arm_node_Brush.createClassInstance("VectorNode",[arm_node_Brush.tree,inp.default_value[0],inp.default_value[1],inp.default_value[2]]);
	} else if(inp.type == "RGBA") {
		if(inp.default_value == null) {
			inp.default_value = [0,0,0];
		}
		v = arm_node_Brush.createClassInstance("ColorNode",[arm_node_Brush.tree,inp.default_value[0],inp.default_value[1],inp.default_value[2],inp.default_value[3]]);
	} else if(inp.type == "RGB") {
		if(inp.default_value == null) {
			inp.default_value = [0,0,0];
		}
		v = arm_node_Brush.createClassInstance("ColorNode",[arm_node_Brush.tree,inp.default_value[0],inp.default_value[1],inp.default_value[2]]);
	} else if(inp.type == "VALUE") {
		v = arm_node_Brush.createClassInstance("FloatNode",[arm_node_Brush.tree,inp.default_value]);
	} else if(inp.type == "INT") {
		v = arm_node_Brush.createClassInstance("IntegerNode",[arm_node_Brush.tree,inp.default_value]);
	} else if(inp.type == "BOOLEAN") {
		v = arm_node_Brush.createClassInstance("BooleanNode",[arm_node_Brush.tree,inp.default_value]);
	} else if(inp.type == "STRING") {
		v = arm_node_Brush.createClassInstance("StringNode",[arm_node_Brush.tree,inp.default_value]);
	} else {
		v = arm_node_Brush.createClassInstance("NullNode",[arm_node_Brush.tree]);
	}
	return v;
};
arm_node_Brush.createClassInstance = function(className,args) {
	if(arm_node_Brush.customNodes.get(className) != null) {
		var node = new arm_node_LogicNode(args[0]);
		node.get = function(from) {
			return (arm_node_Brush.customNodes.get(className))(node,from);
		};
		return node;
	}
	var name = arm_node_Brush.packageName + "." + className;
	var cname = $hxClasses[name];
	if(cname == null) {
		return null;
	}
	return Type.createInstance(cname,args);
};
var haxe_io_Bytes = function(data) {
	this.length = data.byteLength;
	this.b = new Uint8Array(data);
	this.b.bufferValue = data;
	data.hxBytes = this;
	data.bytes = this.b;
};
$hxClasses["haxe.io.Bytes"] = haxe_io_Bytes;
haxe_io_Bytes.__name__ = "haxe.io.Bytes";
haxe_io_Bytes.ofString = function(s,encoding) {
	if(encoding == haxe_io_Encoding.RawNative) {
		var buf = new Uint8Array(s.length << 1);
		var _g = 0;
		var _g1 = s.length;
		while(_g < _g1) {
			var i = _g++;
			var c = s.charCodeAt(i);
			buf[i << 1] = c & 255;
			buf[i << 1 | 1] = c >> 8;
		}
		return new haxe_io_Bytes(buf.buffer);
	}
	var a = [];
	var i = 0;
	while(i < s.length) {
		var c = s.charCodeAt(i++);
		if(55296 <= c && c <= 56319) {
			c = c - 55232 << 10 | s.charCodeAt(i++) & 1023;
		}
		if(c <= 127) {
			a.push(c);
		} else if(c <= 2047) {
			a.push(192 | c >> 6);
			a.push(128 | c & 63);
		} else if(c <= 65535) {
			a.push(224 | c >> 12);
			a.push(128 | c >> 6 & 63);
			a.push(128 | c & 63);
		} else {
			a.push(240 | c >> 18);
			a.push(128 | c >> 12 & 63);
			a.push(128 | c >> 6 & 63);
			a.push(128 | c & 63);
		}
	}
	return new haxe_io_Bytes(new Uint8Array(a).buffer);
};
haxe_io_Bytes.ofData = function(b) {
	var hb = b.hxBytes;
	if(hb != null) {
		return hb;
	}
	return new haxe_io_Bytes(b);
};
haxe_io_Bytes.prototype = {
	sub: function(pos,len) {
		if(pos < 0 || len < 0 || pos + len > this.length) {
			throw haxe_Exception.thrown(haxe_io_Error.OutsideBounds);
		}
		return new haxe_io_Bytes(this.b.buffer.slice(pos + this.b.byteOffset,pos + this.b.byteOffset + len));
	}
	,getFloat: function(pos) {
		if(this.data == null) {
			this.data = new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength);
		}
		return this.data.getFloat32(pos,true);
	}
	,getInt32: function(pos) {
		if(this.data == null) {
			this.data = new DataView(this.b.buffer,this.b.byteOffset,this.b.byteLength);
		}
		return this.data.getInt32(pos,true);
	}
	,getString: function(pos,len,encoding) {
		if(pos < 0 || len < 0 || pos + len > this.length) {
			throw haxe_Exception.thrown(haxe_io_Error.OutsideBounds);
		}
		if(encoding == null) {
			encoding = haxe_io_Encoding.UTF8;
		}
		var s = "";
		var b = this.b;
		var i = pos;
		var max = pos + len;
		switch(encoding._hx_index) {
		case 0:
			while(i < max) {
				var c = b[i++];
				if(c < 128) {
					if(c == 0) {
						break;
					}
					s += String.fromCodePoint(c);
				} else if(c < 224) {
					var code = (c & 63) << 6 | b[i++] & 127;
					s += String.fromCodePoint(code);
				} else if(c < 240) {
					var code1 = (c & 31) << 12 | (b[i++] & 127) << 6 | b[i++] & 127;
					s += String.fromCodePoint(code1);
				} else {
					var u = (c & 15) << 18 | (b[i++] & 127) << 12 | (b[i++] & 127) << 6 | b[i++] & 127;
					s += String.fromCodePoint(u);
				}
			}
			break;
		case 1:
			while(i < max) {
				var c = b[i++] | b[i++] << 8;
				s += String.fromCodePoint(c);
			}
			break;
		}
		return s;
	}
	,toString: function() {
		return this.getString(0,this.length);
	}
	,__class__: haxe_io_Bytes
};
var haxe_io_Input = function() { };
$hxClasses["haxe.io.Input"] = haxe_io_Input;
haxe_io_Input.__name__ = "haxe.io.Input";
haxe_io_Input.prototype = {
	readByte: function() {
		throw haxe_Exception.thrown("Not implemented");
	}
	,readBytes: function(s,pos,len) {
		var k = len;
		var b = s.b;
		if(pos < 0 || len < 0 || pos + len > s.length) {
			throw haxe_Exception.thrown(haxe_io_Error.OutsideBounds);
		}
		try {
			while(k > 0) {
				b[pos] = this.readByte();
				++pos;
				--k;
			}
		} catch( _g ) {
			if(!((haxe_Exception.caught(_g).unwrap()) instanceof haxe_io_Eof)) {
				throw _g;
			}
		}
		return len - k;
	}
	,set_bigEndian: function(b) {
		this.bigEndian = b;
		return b;
	}
	,readFullBytes: function(s,pos,len) {
		while(len > 0) {
			var k = this.readBytes(s,pos,len);
			if(k == 0) {
				throw haxe_Exception.thrown(haxe_io_Error.Blocked);
			}
			pos += k;
			len -= k;
		}
	}
	,read: function(nbytes) {
		var s = new haxe_io_Bytes(new ArrayBuffer(nbytes));
		var p = 0;
		while(nbytes > 0) {
			var k = this.readBytes(s,p,nbytes);
			if(k == 0) {
				throw haxe_Exception.thrown(haxe_io_Error.Blocked);
			}
			p += k;
			nbytes -= k;
		}
		return s;
	}
	,readFloat: function() {
		return haxe_io_FPHelper.i32ToFloat(this.readInt32());
	}
	,readInt8: function() {
		var n = this.readByte();
		if(n >= 128) {
			return n - 256;
		}
		return n;
	}
	,readInt16: function() {
		var ch1 = this.readByte();
		var ch2 = this.readByte();
		var n = this.bigEndian ? ch2 | ch1 << 8 : ch1 | ch2 << 8;
		if((n & 32768) != 0) {
			return n - 65536;
		}
		return n;
	}
	,readUInt16: function() {
		var ch1 = this.readByte();
		var ch2 = this.readByte();
		if(this.bigEndian) {
			return ch2 | ch1 << 8;
		} else {
			return ch1 | ch2 << 8;
		}
	}
	,readInt32: function() {
		var ch1 = this.readByte();
		var ch2 = this.readByte();
		var ch3 = this.readByte();
		var ch4 = this.readByte();
		if(this.bigEndian) {
			return ch4 | ch3 << 8 | ch2 << 16 | ch1 << 24;
		} else {
			return ch1 | ch2 << 8 | ch3 << 16 | ch4 << 24;
		}
	}
	,readString: function(len,encoding) {
		var b = new haxe_io_Bytes(new ArrayBuffer(len));
		this.readFullBytes(b,0,len);
		return b.getString(0,len,encoding);
	}
	,__class__: haxe_io_Input
	,__properties__: {set_bigEndian:"set_bigEndian"}
};
var haxe_io_BytesInput = function(b,pos,len) {
	if(pos == null) {
		pos = 0;
	}
	if(len == null) {
		len = b.length - pos;
	}
	if(pos < 0 || len < 0 || pos + len > b.length) {
		throw haxe_Exception.thrown(haxe_io_Error.OutsideBounds);
	}
	this.b = b.b;
	this.pos = pos;
	this.len = len;
	this.totlen = len;
};
$hxClasses["haxe.io.BytesInput"] = haxe_io_BytesInput;
haxe_io_BytesInput.__name__ = "haxe.io.BytesInput";
haxe_io_BytesInput.__super__ = haxe_io_Input;
haxe_io_BytesInput.prototype = $extend(haxe_io_Input.prototype,{
	set_position: function(p) {
		if(p < 0) {
			p = 0;
		} else if(p > this.totlen) {
			p = this.totlen;
		}
		this.len = this.totlen - p;
		return this.pos = p;
	}
	,readByte: function() {
		if(this.len == 0) {
			throw haxe_Exception.thrown(new haxe_io_Eof());
		}
		this.len--;
		return this.b[this.pos++];
	}
	,readBytes: function(buf,pos,len) {
		if(pos < 0 || len < 0 || pos + len > buf.length) {
			throw haxe_Exception.thrown(haxe_io_Error.OutsideBounds);
		}
		if(this.len == 0 && len > 0) {
			throw haxe_Exception.thrown(new haxe_io_Eof());
		}
		if(this.len < len) {
			len = this.len;
		}
		var b1 = this.b;
		var b2 = buf.b;
		var _g = 0;
		var _g1 = len;
		while(_g < _g1) {
			var i = _g++;
			b2[pos + i] = b1[this.pos + i];
		}
		this.pos += len;
		this.len -= len;
		return len;
	}
	,__class__: haxe_io_BytesInput
	,__properties__: $extend(haxe_io_Input.prototype.__properties__,{set_position:"set_position"})
});
var arm_sys_File = function() { };
$hxClasses["arm.sys.File"] = arm_sys_File;
arm_sys_File.__name__ = "arm.sys.File";
arm_sys_File.readDirectory = function(path,foldersOnly) {
	if(foldersOnly == null) {
		foldersOnly = false;
	}
	return Krom.readDirectory(path,foldersOnly).split("\n");
};
arm_sys_File.copy = function(srcPath,dstPath) {
	Krom.sysCommand("copy" + " \"" + srcPath + "\" \"" + dstPath + "\"");
};
arm_sys_File.start = function(path) {
	Krom.sysCommand("start \"\" \"" + path + "\"");
};
arm_sys_File.explorer = function(url) {
	Krom.sysCommand("explorer \"" + url + "\"");
};
arm_sys_File.delete = function(path) {
	Krom.sysCommand("del /f" + " \"" + path + "\"");
};
arm_sys_File.exists = function(path) {
	return Krom.fileExists(path);
};
arm_sys_File.download = function(url,dstPath) {
	Krom.sysCommand("powershell -c \"Invoke-WebRequest -Uri " + url + " -OutFile '" + dstPath + "'");
};
arm_sys_File.downloadBytes = function(url) {
	var save = arm_sys_Path.data() + arm_sys_Path.sep + "download.bin";
	arm_sys_File.download(url,save);
	try {
		return haxe_io_Bytes.ofData(Krom.loadBlob(save));
	} catch( _g ) {
		return null;
	}
};
var kha_Canvas = function() { };
$hxClasses["kha.Canvas"] = kha_Canvas;
kha_Canvas.__name__ = "kha.Canvas";
kha_Canvas.__isInterface__ = true;
kha_Canvas.prototype = {
	__class__: kha_Canvas
	,__properties__: {get_g4:"get_g4",get_height:"get_height",get_width:"get_width"}
};
var kha_Image = function(texture) {
	this.pixels = null;
	this.texture_ = texture;
};
$hxClasses["kha.Image"] = kha_Image;
kha_Image.__name__ = "kha.Image";
kha_Image.__interfaces__ = [kha_Canvas];
kha_Image.__properties__ = {get_nonPow2Supported:"get_nonPow2Supported"};
kha_Image.getRenderTargetFormat = function(format) {
	switch(format) {
	case 0:
		return 0;
	case 1:
		return 5;
	case 2:
		return 3;
	case 3:
		return 4;
	case 4:
		return 1;
	case 5:
		return 2;
	case 6:
		return 6;
	default:
		return 0;
	}
};
kha_Image.getDepthBufferBits = function(depthAndStencil) {
	switch(depthAndStencil) {
	case 0:
		return -1;
	case 1:
		return 24;
	case 2:
		return 24;
	case 3:
		return 24;
	case 4:
		return 32;
	case 5:
		return 16;
	}
};
kha_Image.getStencilBufferBits = function(depthAndStencil) {
	switch(depthAndStencil) {
	case 0:
		return -1;
	case 1:
		return -1;
	case 2:
		return 8;
	case 3:
		return 8;
	case 4:
		return 8;
	case 5:
		return 0;
	}
};
kha_Image.getTextureFormat = function(format) {
	switch(format) {
	case 0:
		return 0;
	case 2:
		return 3;
	case 4:
		return 4;
	case 5:
		return 5;
	case 6:
		return 7;
	default:
		return 1;
	}
};
kha_Image._fromTexture = function(texture) {
	return new kha_Image(texture);
};
kha_Image.fromBytes = function(bytes,width,height,format,usage) {
	if(format == null) {
		format = 0;
	}
	var image = new kha_Image(null);
	image.format = format;
	image.texture_ = Krom.createTextureFromBytes(bytes.b.bufferValue,width,height,kha_Image.getTextureFormat(format),true);
	return image;
};
kha_Image.fromBytes3D = function(bytes,width,height,depth,format,usage) {
	if(format == null) {
		format = 0;
	}
	var image = new kha_Image(null);
	image.format = format;
	image.texture_ = Krom.createTextureFromBytes3D(bytes.b.bufferValue,width,height,depth,kha_Image.getTextureFormat(format),true);
	return image;
};
kha_Image.create = function(width,height,format,usage) {
	if(format == null) {
		format = 0;
	}
	var image = new kha_Image(null);
	image.format = format;
	image.texture_ = Krom.createTexture(width,height,kha_Image.getTextureFormat(format));
	return image;
};
kha_Image.create3D = function(width,height,depth,format,usage) {
	if(format == null) {
		format = 0;
	}
	var image = new kha_Image(null);
	image.format = format;
	image.texture_ = Krom.createTexture3D(width,height,depth,kha_Image.getTextureFormat(format));
	return image;
};
kha_Image.createRenderTarget = function(width,height,format,depthStencil,antiAliasingSamples,contextId) {
	if(contextId == null) {
		contextId = 0;
	}
	if(antiAliasingSamples == null) {
		antiAliasingSamples = 1;
	}
	if(depthStencil == null) {
		depthStencil = 0;
	}
	if(format == null) {
		format = 0;
	}
	var image = new kha_Image(null);
	image.format = format;
	image.renderTarget_ = Krom.createRenderTarget(width,height,kha_Image.getDepthBufferBits(depthStencil),kha_Image.getRenderTargetFormat(format),kha_Image.getStencilBufferBits(depthStencil),contextId);
	return image;
};
kha_Image.get_nonPow2Supported = function() {
	return true;
};
kha_Image.renderTargetsInvertedY = function() {
	return Krom.renderTargetsInvertedY();
};
kha_Image.formatByteSize = function(format) {
	switch(format) {
	case 0:
		return 4;
	case 1:
		return 1;
	case 2:
		return 16;
	case 3:
		return 2;
	case 4:
		return 8;
	case 5:
		return 4;
	case 6:
		return 2;
	default:
		return 4;
	}
};
kha_Image.prototype = {
	unload: function() {
		Krom.unloadImage(this);
		this.texture_ = null;
		this.renderTarget_ = null;
	}
	,getPixels: function() {
		if(this.renderTarget_ != null) {
			if(this.pixels == null) {
				this.pixels = new haxe_io_Bytes(new ArrayBuffer(kha_Image.formatByteSize(this.format) * this.get_width() * this.get_height()));
			}
			Krom.getRenderTargetPixels(this.renderTarget_,this.pixels.b.bufferValue);
			return this.pixels;
		} else {
			return haxe_io_Bytes.ofData(Krom.getTexturePixels(this.texture_));
		}
	}
	,generateMipmaps: function(levels) {
		if(this.texture_ == null) {
			Krom.generateRenderTargetMipmaps(this.renderTarget_,levels);
		} else {
			Krom.generateTextureMipmaps(this.texture_,levels);
		}
	}
	,setMipmaps: function(mipmaps) {
		Krom.setMipmaps(this.texture_,mipmaps);
	}
	,setDepthStencilFrom: function(image) {
		Krom.setDepthStencilFrom(this.renderTarget_,image.renderTarget_);
	}
	,clear: function(x,y,z,width,height,depth,color) {
		Krom.clearTexture(this.texture_,x,y,z,width,height,depth,color);
	}
	,get_width: function() {
		if(this.texture_ == null) {
			return this.renderTarget_.width;
		} else {
			return this.texture_.width;
		}
	}
	,get_height: function() {
		if(this.texture_ == null) {
			return this.renderTarget_.height;
		} else {
			return this.texture_.height;
		}
	}
	,get_depth: function() {
		if(this.texture_ != null) {
			return this.texture_.depth;
		} else {
			return 1;
		}
	}
	,get_realWidth: function() {
		if(this.texture_ == null) {
			return this.renderTarget_.width;
		} else {
			return this.texture_.realWidth;
		}
	}
	,get_realHeight: function() {
		if(this.texture_ == null) {
			return this.renderTarget_.height;
		} else {
			return this.texture_.realHeight;
		}
	}
	,get_g2: function() {
		if(this.graphics2 == null) {
			this.graphics2 = new kha_graphics4_Graphics2(this);
		}
		return this.graphics2;
	}
	,get_g4: function() {
		if(this.graphics4 == null) {
			this.graphics4 = new kha_graphics4_Graphics(this);
		}
		return this.graphics4;
	}
	,__class__: kha_Image
	,__properties__: {get_g4:"get_g4",get_g2:"get_g2",get_realHeight:"get_realHeight",get_realWidth:"get_realWidth",get_depth:"get_depth",get_height:"get_height",get_width:"get_width"}
};
var arm_node_MakeMaterial = function() { };
$hxClasses["arm.node.MakeMaterial"] = arm_node_MakeMaterial;
arm_node_MakeMaterial.__name__ = "arm.node.MakeMaterial";
arm_node_MakeMaterial.getMOut = function() {
	var _g = 0;
	var _g1 = arm_ui_UINodes.inst.getCanvasMaterial().nodes;
	while(_g < _g1.length) if(_g1[_g++].type == "OUTPUT_MATERIAL_PBR") {
		return true;
	}
	return false;
};
arm_node_MakeMaterial.parseMeshMaterial = function() {
	if(arm_ui_UIHeader.inst.worktab.position == 3) {
		return;
	}
	var m = arm_Project.materials[0].data;
	var scon = null;
	var _g = 0;
	var _g1 = m.shader.contexts;
	while(_g < _g1.length) {
		var c = _g1[_g];
		++_g;
		if(c.raw.name == "mesh") {
			scon = c;
			break;
		}
	}
	if(scon != null) {
		HxOverrides.remove(m.shader.raw.contexts,scon.raw);
		HxOverrides.remove(m.shader.contexts,scon);
	}
	var con = arm_node_MakeMesh.run(new arm_shader_NodeShaderData({ name : "Material", canvas : null}));
	if(scon != null) {
		scon.delete();
	}
	scon = new iron_data_ShaderContext(con.data,function(scon) {
	});
	scon.overrideContext = { };
	if(con.frag.sharedSamplers.length > 0) {
		var sampler = con.frag.sharedSamplers[0];
		scon.overrideContext.shared_sampler = HxOverrides.substr(sampler,sampler.lastIndexOf(" ") + 1,null);
	}
	if(!arm_Context.textureFilter) {
		scon.overrideContext.filter = "point";
	}
	m.shader.raw.contexts.push(scon.raw);
	m.shader.contexts.push(scon);
	arm_Context.ddirty = 2;
	arm_node_MakeMaterial.makeVoxel(m);
};
arm_node_MakeMaterial.parseParticleMaterial = function() {
	var m = arm_Context.particleMaterial;
	var sc = null;
	var _g = 0;
	var _g1 = m.shader.contexts;
	while(_g < _g1.length) {
		var c = _g1[_g];
		++_g;
		if(c.raw.name == "mesh") {
			sc = c;
			break;
		}
	}
	if(sc != null) {
		HxOverrides.remove(m.shader.raw.contexts,sc.raw);
		HxOverrides.remove(m.shader.contexts,sc);
	}
	var con = arm_node_MakeParticle.run(new arm_shader_NodeShaderData({ name : "MaterialParticle", canvas : null}));
	if(sc != null) {
		sc.delete();
	}
	sc = new iron_data_ShaderContext(con.data,function(sc) {
	});
	m.shader.raw.contexts.push(sc.raw);
	m.shader.contexts.push(sc);
};
arm_node_MakeMaterial.parseMeshPreviewMaterial = function() {
	if(!arm_node_MakeMaterial.getMOut()) {
		return;
	}
	var m = arm_ui_UIHeader.inst.worktab.position == 3 ? arm_Context.materialScene.data : arm_Project.materials[0].data;
	var scon = null;
	var _g = 0;
	var _g1 = m.shader.contexts;
	while(_g < _g1.length) {
		var c = _g1[_g];
		++_g;
		if(c.raw.name == "mesh") {
			scon = c;
			break;
		}
	}
	HxOverrides.remove(m.shader.raw.contexts,scon.raw);
	HxOverrides.remove(m.shader.contexts,scon);
	var mcon = { name : "mesh", bind_textures : []};
	var con = arm_node_MakeMeshPreview.run(new arm_shader_NodeShaderData({ name : "Material", canvas : null}),mcon);
	var _g = 0;
	var _g1 = m.contexts.length;
	while(_g < _g1) {
		var i = _g++;
		if(m.contexts[i].raw.name == "mesh") {
			m.contexts[i] = new iron_data_MaterialContext(mcon,function(self) {
			});
			break;
		}
	}
	if(scon != null) {
		scon.delete();
	}
	var compileError = false;
	scon = new iron_data_ShaderContext(con.data,function(scon) {
		if(scon == null) {
			compileError = true;
		}
	});
	if(compileError) {
		return;
	}
	m.shader.raw.contexts.push(scon.raw);
	m.shader.contexts.push(scon);
	if(arm_ui_UIHeader.inst.worktab.position == 3) {
		arm_node_MakeMaterial.makeVoxel(m);
	}
};
arm_node_MakeMaterial.makeVoxel = function(m) {
	if(arm_Config.raw.rp_gi != false && arm_node_MakeMaterial.heightUsed) {
		var scon = null;
		var _g = 0;
		var _g1 = m.shader.contexts;
		while(_g < _g1.length) {
			var c = _g1[_g];
			++_g;
			if(c.raw.name == "voxel") {
				scon = c;
				break;
			}
		}
		if(scon != null) {
			arm_node_MakeVoxel.run(scon);
		}
	}
};
arm_node_MakeMaterial.parsePaintMaterial = function() {
	if(!arm_node_MakeMaterial.getMOut()) {
		return;
	}
	if(arm_ui_UIHeader.inst.worktab.position == 3) {
		arm_node_MakeMaterial.parseMeshPreviewMaterial();
		return;
	}
	var current = kha_graphics4_Graphics2.current;
	if(current != null) {
		current.end();
	}
	arm_node_MakeMaterial.bakeBlurNodes();
	if(current != null) {
		current.begin(false);
	}
	var m = arm_Project.materials[0].data;
	var _g = 0;
	var _g1 = m.shader.contexts;
	while(_g < _g1.length) {
		var c = _g1[_g];
		++_g;
		if(c.raw.name == "paint") {
			HxOverrides.remove(m.shader.raw.contexts,c.raw);
			HxOverrides.remove(m.shader.contexts,c);
			if(c != arm_node_MakeMaterial.defaultScon) {
				c.delete();
			}
			break;
		}
	}
	var _g = 0;
	var _g1 = m.contexts;
	while(_g < _g1.length) {
		var c = _g1[_g];
		++_g;
		if(c.raw.name == "paint") {
			HxOverrides.remove(m.raw.contexts,c.raw);
			HxOverrides.remove(m.contexts,c);
			break;
		}
	}
	var sdata = new arm_shader_NodeShaderData({ name : "Material", canvas : arm_ui_UINodes.inst.getCanvasMaterial()});
	var mcon = { name : "paint", bind_textures : []};
	var compileError = false;
	var scon = new iron_data_ShaderContext(arm_node_MakePaint.run(sdata,mcon).data,function(scon) {
		if(scon == null) {
			compileError = true;
		}
	});
	if(compileError) {
		return;
	}
	scon.overrideContext = { };
	scon.overrideContext.addressing = "repeat";
	var mcon1 = new iron_data_MaterialContext(mcon,function(mcon) {
	});
	m.shader.raw.contexts.push(scon.raw);
	m.shader.contexts.push(scon);
	m.raw.contexts.push(mcon1.raw);
	m.contexts.push(mcon1);
	if(arm_node_MakeMaterial.defaultScon == null) {
		arm_node_MakeMaterial.defaultScon = scon;
	}
	if(arm_node_MakeMaterial.defaultMcon == null) {
		arm_node_MakeMaterial.defaultMcon = mcon1;
	}
};
arm_node_MakeMaterial.bakeBlurNodes = function() {
	if(arm_Context.nodePreviewsBlur != null) {
		var image = haxe_ds_StringMap.valueIterator(arm_Context.nodePreviewsBlur.h);
		while(image.hasNext()) image.next().unload();
		arm_Context.nodePreviewsBlur = null;
	}
	if(arm_Context.nodePreviewsWarp != null) {
		var img = haxe_ds_StringMap.valueIterator(arm_Context.nodePreviewsWarp.h);
		while(img.hasNext()) img.next().unload();
		arm_Context.nodePreviewsWarp = null;
	}
	var _g = 0;
	var _g1 = arm_ui_UINodes.inst.getCanvasMaterial().nodes;
	while(_g < _g1.length) {
		var node = _g1[_g];
		++_g;
		if(node.type == "BLUR") {
			if(arm_Context.nodePreviewsBlur == null) {
				arm_Context.nodePreviewsBlur = new haxe_ds_StringMap();
			}
			var image = kha_Image.createRenderTarget(arm_Config.getTextureResX() / 4 | 0,arm_Config.getTextureResY() / 4 | 0);
			var this1 = arm_Context.nodePreviewsBlur;
			var key = arm_shader_MaterialParser.node_name(node);
			this1.h[key] = image;
			arm_shader_MaterialParser.blur_passthrough = true;
			arm_util_RenderUtil.makeNodePreview(arm_ui_UINodes.inst.getCanvasMaterial(),node,image);
			arm_shader_MaterialParser.blur_passthrough = false;
		}
		if(node.type == "DIRECT_WARP") {
			if(arm_Context.nodePreviewsWarp == null) {
				arm_Context.nodePreviewsWarp = new haxe_ds_StringMap();
			}
			var image1 = kha_Image.createRenderTarget(arm_Config.getTextureResX() | 0,arm_Config.getTextureResY() | 0);
			var this2 = arm_Context.nodePreviewsWarp;
			var key1 = arm_shader_MaterialParser.node_name(node);
			this2.h[key1] = image1;
			arm_shader_MaterialParser.warp_passthrough = true;
			arm_util_RenderUtil.makeNodePreview(arm_ui_UINodes.inst.getCanvasMaterial(),node,image1);
			arm_shader_MaterialParser.warp_passthrough = false;
		}
	}
};
arm_node_MakeMaterial.parseNodePreviewMaterial = function(node) {
	var sdata = new arm_shader_NodeShaderData({ name : "Material", canvas : arm_ui_UINodes.inst.getCanvasMaterial()});
	var mcon_raw = { name : "mesh", bind_textures : []};
	var compileError = false;
	var scon = new iron_data_ShaderContext(arm_node_MakeNodePreview.run(sdata,mcon_raw,node).data,function(scon) {
		if(scon == null) {
			compileError = true;
		}
	});
	if(compileError) {
		return null;
	}
	return { scon : scon, mcon : new iron_data_MaterialContext(mcon_raw,function(mcon) {
	})};
};
arm_node_MakeMaterial.parseBrush = function() {
	arm_node_Brush.parse(arm_Context.brush.canvas,false);
};
arm_node_MakeMaterial.blendMode = function(frag,blending,cola,colb,opac) {
	if(blending == 0) {
		return "mix(" + cola + ", " + colb + ", " + opac + ")";
	} else if(blending == 1) {
		return "mix(" + cola + ", min(" + cola + ", " + colb + "), " + opac + ")";
	} else if(blending == 2) {
		return "mix(" + cola + ", " + cola + " * " + colb + ", " + opac + ")";
	} else if(blending == 3) {
		return "mix(" + cola + ", vec3(1.0, 1.0, 1.0) - (vec3(1.0, 1.0, 1.0) - " + cola + ") / " + colb + ", " + opac + ")";
	} else if(blending == 4) {
		return "max(" + cola + ", " + colb + " * " + opac + ")";
	} else if(blending == 5) {
		return "(vec3(1.0, 1.0, 1.0) - (vec3(1.0 - " + opac + ", 1.0 - " + opac + ", 1.0 - " + opac + ") + " + opac + " * (vec3(1.0, 1.0, 1.0) - " + colb + ")) * (vec3(1.0, 1.0, 1.0) - " + cola + "))";
	} else if(blending == 6) {
		return "mix(" + cola + ", " + cola + " / (vec3(1.0, 1.0, 1.0) - " + colb + "), " + opac + ")";
	} else if(blending == 7) {
		return "mix(" + cola + ", " + cola + " + " + colb + ", " + opac + ")";
	} else if(blending == 8) {
		return "mix(" + cola + ", vec3(\r\n\t\t\t\t" + cola + ".r < 0.5 ? 2.0 * " + cola + ".r * " + colb + ".r : 1.0 - 2.0 * (1.0 - " + cola + ".r) * (1.0 - " + colb + ".r),\r\n\t\t\t\t" + cola + ".g < 0.5 ? 2.0 * " + cola + ".g * " + colb + ".g : 1.0 - 2.0 * (1.0 - " + cola + ".g) * (1.0 - " + colb + ".g),\r\n\t\t\t\t" + cola + ".b < 0.5 ? 2.0 * " + cola + ".b * " + colb + ".b : 1.0 - 2.0 * (1.0 - " + cola + ".b) * (1.0 - " + colb + ".b)\r\n\t\t\t), " + opac + ")";
	} else if(blending == 9) {
		return "((1.0 - " + opac + ") * " + cola + " + " + opac + " * ((vec3(1.0, 1.0, 1.0) - " + cola + ") * " + colb + " * " + cola + " + " + cola + " * (vec3(1.0, 1.0, 1.0) - (vec3(1.0, 1.0, 1.0) - " + colb + ") * (vec3(1.0, 1.0, 1.0) - " + cola + "))))";
	} else if(blending == 10) {
		return "(" + cola + " + " + opac + " * (vec3(2.0, 2.0, 2.0) * (" + colb + " - vec3(0.5, 0.5, 0.5))))";
	} else if(blending == 11) {
		return "mix(" + cola + ", abs(" + cola + " - " + colb + "), " + opac + ")";
	} else if(blending == 12) {
		return "mix(" + cola + ", " + cola + " - " + colb + ", " + opac + ")";
	} else if(blending == 13) {
		return "vec3(1.0 - " + opac + ", 1.0 - " + opac + ", 1.0 - " + opac + ") * " + cola + " + vec3(" + opac + ", " + opac + ", " + opac + ") * " + cola + " / " + colb;
	} else if(blending == 14) {
		frag.add_function(arm_shader_ShaderFunctions.str_hue_sat);
		return "mix(" + cola + ", hsv_to_rgb(vec3(rgb_to_hsv(" + colb + ").r, rgb_to_hsv(" + cola + ").g, rgb_to_hsv(" + cola + ").b)), " + opac + ")";
	} else if(blending == 15) {
		frag.add_function(arm_shader_ShaderFunctions.str_hue_sat);
		return "mix(" + cola + ", hsv_to_rgb(vec3(rgb_to_hsv(" + cola + ").r, rgb_to_hsv(" + colb + ").g, rgb_to_hsv(" + cola + ").b)), " + opac + ")";
	} else if(blending == 16) {
		frag.add_function(arm_shader_ShaderFunctions.str_hue_sat);
		return "mix(" + cola + ", hsv_to_rgb(vec3(rgb_to_hsv(" + colb + ").r, rgb_to_hsv(" + colb + ").g, rgb_to_hsv(" + cola + ").b)), " + opac + ")";
	} else {
		frag.add_function(arm_shader_ShaderFunctions.str_hue_sat);
		return "mix(" + cola + ", hsv_to_rgb(vec3(rgb_to_hsv(" + cola + ").r, rgb_to_hsv(" + cola + ").g, rgb_to_hsv(" + colb + ").b)), " + opac + ")";
	}
};
var arm_shader_MaterialParser = function() { };
$hxClasses["arm.shader.MaterialParser"] = arm_shader_MaterialParser;
arm_shader_MaterialParser.__name__ = "arm.shader.MaterialParser";
arm_shader_MaterialParser.getNode = function(id) {
	var _g = 0;
	var _g1 = arm_shader_MaterialParser.nodes;
	while(_g < _g1.length) {
		var n = _g1[_g];
		++_g;
		if(n.id == id) {
			return n;
		}
	}
	return null;
};
arm_shader_MaterialParser.getInputLink = function(inp) {
	var _g = 0;
	var _g1 = arm_shader_MaterialParser.links;
	while(_g < _g1.length) {
		var l = _g1[_g];
		++_g;
		if(l.to_id == inp.node_id) {
			var node = arm_shader_MaterialParser.getNode(inp.node_id);
			if(node.inputs.length <= l.to_socket) {
				return null;
			}
			if(node.inputs[l.to_socket] == inp) {
				return l;
			}
		}
	}
	return null;
};
arm_shader_MaterialParser.init = function() {
	arm_shader_MaterialParser.parsed = [];
	arm_shader_MaterialParser.parsing_disp = false;
	arm_shader_MaterialParser.normal_written = false;
	arm_shader_MaterialParser.cotangentFrameWritten = false;
	arm_shader_MaterialParser.sample_bump = false;
	arm_shader_MaterialParser.sample_bump_res = "";
	arm_shader_MaterialParser.out_normaltan = "vec3(0.5, 0.5, 1.0)";
	arm_shader_MaterialParser.script_links = null;
};
arm_shader_MaterialParser.parse = function(canvas,_con,_vert,_frag,_geom,_tesc,_tese,_matcon,_parse_displacement) {
	if(_parse_displacement == null) {
		_parse_displacement = false;
	}
	arm_shader_MaterialParser.init();
	arm_shader_MaterialParser.nodes = canvas.nodes;
	arm_shader_MaterialParser.links = canvas.links;
	arm_shader_MaterialParser.con = _con;
	arm_shader_MaterialParser.vert = _vert;
	arm_shader_MaterialParser.frag = _frag;
	arm_shader_MaterialParser.geom = _geom;
	arm_shader_MaterialParser.tesc = _tesc;
	arm_shader_MaterialParser.tese = _tese;
	arm_shader_MaterialParser.curshader = arm_shader_MaterialParser.frag;
	arm_shader_MaterialParser.matcon = _matcon;
	var output_node = arm_shader_MaterialParser.node_by_type(arm_shader_MaterialParser.nodes,"OUTPUT_MATERIAL");
	if(output_node != null) {
		return arm_shader_MaterialParser.parse_output(output_node);
	}
	output_node = arm_shader_MaterialParser.node_by_type(arm_shader_MaterialParser.nodes,"OUTPUT_MATERIAL_PBR");
	if(output_node != null) {
		return arm_shader_MaterialParser.parse_output_pbr(output_node);
	}
	return null;
};
arm_shader_MaterialParser.finalize = function(con) {
	var vert = con.vert;
	var frag = con.frag;
	if(frag.dotNV) {
		frag.vVec = true;
		frag.n = true;
	}
	if(frag.vVec) {
		vert.wposition = true;
	}
	if(frag.bposition) {
		if(arm_shader_MaterialParser.triplanar) {
			frag.write_attrib("vec3 bposition = vec3(\r\n\t\t\t\t\ttexCoord1.x * texCoordBlend.y + texCoord2.x * texCoordBlend.z,\r\n\t\t\t\t\ttexCoord.x * texCoordBlend.x + texCoord2.y * texCoordBlend.z,\r\n\t\t\t\t\ttexCoord.y * texCoordBlend.x + texCoord1.y * texCoordBlend.y);");
		} else if(frag.ndcpos) {
			vert.add_out("vec3 bposition");
			vert.write("bposition = (ndc.xyz / ndc.w);");
		} else {
			vert.add_out("vec3 bposition");
			vert.add_uniform("vec3 dim","_dim");
			vert.add_uniform("vec3 hdim","_halfDim");
			vert.write_attrib("bposition = (pos.xyz + hdim) / dim;");
		}
	}
	if(frag.wposition) {
		vert.add_uniform("mat4 W","_worldMatrix");
		vert.add_out("vec3 wposition");
		vert.write_attrib("wposition = vec4(mul(vec4(pos.xyz, 1.0), W)).xyz;");
	} else if(vert.wposition) {
		vert.add_uniform("mat4 W","_worldMatrix");
		vert.write_attrib("vec3 wposition = vec4(mul(vec4(pos.xyz, 1.0), W)).xyz;");
	}
	if(frag.vposition) {
		vert.add_uniform("mat4 WV","_worldViewMatrix");
		vert.add_out("vec3 vposition");
		vert.write_attrib("vposition = vec4(mul(vec4(pos.xyz, 1.0), WV)).xyz;");
	}
	if(frag.mposition) {
		vert.add_out("vec3 mposition");
		if(frag.ndcpos) {
			vert.write("mposition = (ndc.xyz / ndc.w);");
		} else {
			vert.write_attrib("mposition = pos.xyz;");
		}
	}
	if(frag.wtangent) {
		vert.add_out("vec3 wtangent");
		vert.write_attrib("wtangent = vec3(0.0, 0.0, 0.0);");
	}
	if(frag.vVecCam) {
		vert.add_uniform("mat4 WV","_worldViewMatrix");
		vert.add_out("vec3 eyeDirCam");
		vert.write_attrib("eyeDirCam = vec4(mul(vec4(pos.xyz, 1.0), WV)).xyz; eyeDirCam.z *= -1.0;");
		frag.write_attrib("vec3 vVecCam = normalize(eyeDirCam);");
	}
	if(frag.vVec) {
		vert.add_uniform("vec3 eye","_cameraPosition");
		vert.add_out("vec3 eyeDir");
		vert.write_attrib("eyeDir = eye - wposition;");
		frag.write_attrib("vec3 vVec = normalize(eyeDir);");
	}
	if(frag.n) {
		vert.add_uniform("mat3 N","_normalMatrix");
		vert.add_out("vec3 wnormal");
		vert.write_attrib("wnormal = mul(vec3(nor.xy, pos.w), N);");
		frag.write_attrib("vec3 n = normalize(wnormal);");
	} else if(vert.n) {
		vert.add_uniform("mat3 N","_normalMatrix");
		vert.write_attrib("vec3 wnormal = normalize(mul(vec3(nor.xy, pos.w), N));");
	}
	if(frag.nAttr) {
		vert.add_out("vec3 nAttr");
		vert.write_attrib("nAttr = vec3(nor.xy, pos.w);");
	}
	if(frag.dotNV) {
		frag.write_attrib("float dotNV = max(dot(n, vVec), 0.0);");
	}
	if(frag.wvpposition) {
		vert.add_out("vec4 wvpposition");
		vert.write_end("wvpposition = gl_Position;");
	}
	if(con.is_elem("col")) {
		vert.add_out("vec3 vcolor");
		vert.write_attrib("vcolor = col.rgb;");
	}
};
arm_shader_MaterialParser.parse_output = function(node) {
	if(arm_shader_MaterialParser.parse_surface || arm_shader_MaterialParser.parse_opacity) {
		return arm_shader_MaterialParser.parse_shader_input(node.inputs[0]);
	}
	return null;
};
arm_shader_MaterialParser.parse_output_pbr = function(node) {
	if(arm_shader_MaterialParser.parse_surface || arm_shader_MaterialParser.parse_opacity) {
		return arm_shader_MaterialParser.parse_shader(node,null);
	}
	return null;
};
arm_shader_MaterialParser.parse_shader_input = function(inp) {
	while(true) {
		var l = arm_shader_MaterialParser.getInputLink(inp);
		var from_node = l != null ? arm_shader_MaterialParser.getNode(l.from_id) : null;
		if(from_node != null) {
			if(from_node.type == "REROUTE") {
				inp = from_node.inputs[0];
				continue;
			}
			return arm_shader_MaterialParser.parse_shader(from_node,from_node.outputs[l.from_socket]);
		} else {
			return { out_basecol : "vec3(0.8, 0.8, 0.8)", out_roughness : "0.0", out_metallic : "0.0", out_occlusion : "1.0", out_opacity : "1.0", out_height : "0.0", out_emission : "0.0", out_subsurface : "0.0"};
		}
	}
};
arm_shader_MaterialParser.parse_shader = function(node,socket) {
	var sout = { out_basecol : "vec3(0.8, 0.8, 0.8)", out_roughness : "0.0", out_metallic : "0.0", out_occlusion : "1.0", out_opacity : "1.0", out_height : "0.0", out_emission : "0.0", out_subsurface : "0.0"};
	if(node.type == "OUTPUT_MATERIAL_PBR") {
		if(arm_shader_MaterialParser.parse_surface) {
			arm_shader_MaterialParser.parse_normal_map_color_input(node.inputs[5]);
			sout.out_basecol = arm_shader_MaterialParser.parse_vector_input(node.inputs[0]);
			sout.out_occlusion = arm_shader_MaterialParser.parse_value_input(node.inputs[2]);
			sout.out_roughness = arm_shader_MaterialParser.parse_value_input(node.inputs[3]);
			sout.out_metallic = arm_shader_MaterialParser.parse_value_input(node.inputs[4]);
			if(arm_shader_MaterialParser.parse_emission) {
				sout.out_emission = arm_shader_MaterialParser.parse_value_input(node.inputs[6]);
			}
			if(arm_shader_MaterialParser.parse_subsurface) {
				sout.out_subsurface = arm_shader_MaterialParser.parse_value_input(node.inputs[8]);
			}
		}
		if(arm_shader_MaterialParser.parse_opacity) {
			sout.out_opacity = arm_shader_MaterialParser.parse_value_input(node.inputs[1]);
		}
		if(node.inputs.length > 7 && arm_shader_MaterialParser.parse_height) {
			if(!arm_shader_MaterialParser.parse_height_as_channel) {
				arm_shader_MaterialParser.curshader = arm_shader_MaterialParser.vert;
			}
			sout.out_height = arm_shader_MaterialParser.parse_value_input(node.inputs[7]);
			if(!arm_shader_MaterialParser.parse_height_as_channel) {
				arm_shader_MaterialParser.curshader = arm_shader_MaterialParser.frag;
			}
		}
	}
	return sout;
};
arm_shader_MaterialParser.parse_vector_input = function(inp) {
	while(true) {
		var l = arm_shader_MaterialParser.getInputLink(inp);
		var from_node = l != null ? arm_shader_MaterialParser.getNode(l.from_id) : null;
		if(from_node != null) {
			if(from_node.type == "REROUTE") {
				inp = from_node.inputs[0];
				continue;
			}
			var res_var = arm_shader_MaterialParser.write_result(l);
			var st = from_node.outputs[l.from_socket].type;
			if(st == "RGB" || st == "RGBA" || st == "VECTOR") {
				return res_var;
			} else {
				return "(" + res_var + ").xxx";
			}
		} else if(inp.type == "VALUE") {
			return "vec3(" + 0.0 + ", " + 0.0 + ", " + 0.0 + ")";
		} else {
			var v = inp.default_value;
			return "vec3(" + v[0] + ", " + v[1] + ", " + v[2] + ")";
		}
	}
};
arm_shader_MaterialParser.parse_vector = function(node,socket) {
	if(node.type == "ATTRIBUTE") {
		if(socket == node.outputs[0]) {
			if(arm_shader_MaterialParser.curshader.context.allow_vcols) {
				arm_shader_MaterialParser.curshader.context.add_elem("col","short4norm");
			} else {
				arm_shader_MaterialParser.curshader.write_attrib("vec3 vcolor = vec3(1.0, 1.0, 1.0);");
			}
			return "vcolor";
		} else {
			arm_shader_MaterialParser.curshader.context.add_elem("tex","short2norm");
			return "vec3(texCoord.x, texCoord.y, 0.0)";
		}
	} else if(node.type == "RGB") {
		var v = socket.default_value;
		return "vec3(" + v[0] + ", " + v[1] + ", " + v[2] + ")";
	} else if(node.type == "TEX_BRICK") {
		arm_shader_MaterialParser.curshader.add_function(arm_shader_ShaderFunctions.str_tex_brick);
		var co = arm_shader_MaterialParser.getCoord(node);
		var col1 = arm_shader_MaterialParser.parse_vector_input(node.inputs[1]);
		var col2 = arm_shader_MaterialParser.parse_vector_input(node.inputs[2]);
		var col3 = arm_shader_MaterialParser.parse_vector_input(node.inputs[3]);
		var res = "tex_brick(" + co + " * " + arm_shader_MaterialParser.parse_value_input(node.inputs[4]) + ", " + col1 + ", " + col2 + ", " + col3 + ")";
		if(arm_shader_MaterialParser.sample_bump) {
			arm_shader_MaterialParser.write_bump(node,res);
		}
		return res;
	} else if(node.type == "TEX_CHECKER") {
		arm_shader_MaterialParser.curshader.add_function(arm_shader_ShaderFunctions.str_tex_checker);
		var res = "tex_checker(" + arm_shader_MaterialParser.getCoord(node) + ", " + arm_shader_MaterialParser.parse_vector_input(node.inputs[1]) + ", " + arm_shader_MaterialParser.parse_vector_input(node.inputs[2]) + ", " + arm_shader_MaterialParser.parse_value_input(node.inputs[3]) + ")";
		if(arm_shader_MaterialParser.sample_bump) {
			arm_shader_MaterialParser.write_bump(node,res);
		}
		return res;
	} else if(node.type == "TEX_GRADIENT") {
		var co = arm_shader_MaterialParser.getCoord(node);
		var but = node.buttons[0];
		var grad = but.data[but.default_value].toUpperCase();
		grad = StringTools.replace(grad," ","_");
		var res = "(" + ("clamp(" + arm_shader_MaterialParser.getGradient(grad,co) + ", 0.0, 1.0)") + ").xxx";
		if(arm_shader_MaterialParser.sample_bump) {
			arm_shader_MaterialParser.write_bump(node,res);
		}
		return res;
	} else if(node.type == "TEX_IMAGE") {
		if(arm_shader_MaterialParser.parsed.indexOf(arm_shader_MaterialParser.res_var_name(node,node.outputs[1])) >= 0) {
			return "" + arm_shader_MaterialParser.store_var_name(node) + ".rgb";
		}
		var tex_name = arm_shader_MaterialParser.node_name(node);
		var tex = arm_shader_MaterialParser.make_texture(node,tex_name);
		if(tex != null) {
			return "" + arm_shader_MaterialParser.texture_store(node,tex,tex_name,node.buttons[1].default_value == 1) + ".rgb";
		} else {
			var tex_store = arm_shader_MaterialParser.store_var_name(node);
			arm_shader_MaterialParser.curshader.write("vec4 " + tex_store + " = vec4(1.0, 0.0, 1.0, 1.0);");
			return "" + tex_store + ".rgb";
		}
	} else if(node.type == "TEX_MAGIC") {
		arm_shader_MaterialParser.curshader.add_function(arm_shader_ShaderFunctions.str_tex_magic);
		var res = "tex_magic(" + arm_shader_MaterialParser.getCoord(node) + " * " + arm_shader_MaterialParser.parse_value_input(node.inputs[1]) + " * 4.0)";
		if(arm_shader_MaterialParser.sample_bump) {
			arm_shader_MaterialParser.write_bump(node,res);
		}
		return res;
	} else if(node.type == "TEX_MUSGRAVE") {
		arm_shader_MaterialParser.curshader.add_function(arm_shader_ShaderFunctions.str_tex_musgrave);
		var res = "(" + ("tex_musgrave_f(" + arm_shader_MaterialParser.getCoord(node) + " * " + arm_shader_MaterialParser.parse_value_input(node.inputs[1]) + " * 0.5)") + ").xxx";
		if(arm_shader_MaterialParser.sample_bump) {
			arm_shader_MaterialParser.write_bump(node,res);
		}
		return res;
	} else if(node.type == "TEX_NOISE") {
		arm_shader_MaterialParser.curshader.add_function(arm_shader_ShaderFunctions.str_tex_noise);
		var co = arm_shader_MaterialParser.getCoord(node);
		var scale = arm_shader_MaterialParser.parse_value_input(node.inputs[1]);
		var res = "vec3(tex_noise(" + co + " * " + scale + "), tex_noise(" + co + " * " + scale + " + 0.33), tex_noise(" + co + " * " + scale + " + 0.66))";
		if(arm_shader_MaterialParser.sample_bump) {
			arm_shader_MaterialParser.write_bump(node,res);
		}
		return res;
	} else if(node.type == "TEX_VORONOI") {
		arm_shader_MaterialParser.curshader.add_function(arm_shader_ShaderFunctions.str_tex_voronoi);
		arm_shader_MaterialParser.curshader.add_uniform("sampler2D snoise256","$noise256.k");
		var co = arm_shader_MaterialParser.getCoord(node);
		var scale = arm_shader_MaterialParser.parse_value_input(node.inputs[1]);
		var but = node.buttons[0];
		var coloring = but.data[but.default_value].toUpperCase();
		coloring = StringTools.replace(coloring," ","_");
		var res = "";
		if(coloring == "INTENSITY") {
			res = "(" + ("tex_voronoi(" + co + " * " + scale + ", texturePass(snoise256)).a") + ").xxx";
		} else {
			res = "tex_voronoi(" + co + " * " + scale + ", texturePass(snoise256)).rgb";
		}
		if(arm_shader_MaterialParser.sample_bump) {
			arm_shader_MaterialParser.write_bump(node,res);
		}
		return res;
	} else if(node.type == "TEX_WAVE") {
		arm_shader_MaterialParser.curshader.add_function(arm_shader_ShaderFunctions.str_tex_wave);
		var res = "(" + ("tex_wave_f(" + arm_shader_MaterialParser.getCoord(node) + " * " + arm_shader_MaterialParser.parse_value_input(node.inputs[1]) + ")") + ").xxx";
		if(arm_shader_MaterialParser.sample_bump) {
			arm_shader_MaterialParser.write_bump(node,res);
		}
		return res;
	} else if(node.type == "BRIGHTCONTRAST") {
		var out_col = arm_shader_MaterialParser.parse_vector_input(node.inputs[0]);
		var bright = arm_shader_MaterialParser.parse_value_input(node.inputs[1]);
		var contr = arm_shader_MaterialParser.parse_value_input(node.inputs[2]);
		arm_shader_MaterialParser.curshader.add_function(arm_shader_ShaderFunctions.str_brightcontrast);
		return "brightcontrast(" + out_col + ", " + bright + ", " + contr + ")";
	} else if(node.type == "GAMMA") {
		return "pow(" + arm_shader_MaterialParser.parse_vector_input(node.inputs[0]) + ", " + ("(" + ("" + arm_shader_MaterialParser.parse_value_input(node.inputs[1])) + ").xxx") + ")";
	} else if(node.type == "DIRECT_WARP") {
		if(arm_shader_MaterialParser.warp_passthrough) {
			return arm_shader_MaterialParser.parse_vector_input(node.inputs[0]);
		}
		var angle = arm_shader_MaterialParser.parse_value_input(node.inputs[1],true);
		var mask = arm_shader_MaterialParser.parse_value_input(node.inputs[2],true);
		var tex_name = "texwarp_" + arm_shader_MaterialParser.node_name(node);
		arm_shader_MaterialParser.curshader.add_uniform("sampler2D " + tex_name,"_" + tex_name);
		var store = arm_shader_MaterialParser.store_var_name(node);
		arm_shader_MaterialParser.curshader.write("float " + store + "_rad = " + angle + " * (" + Math.PI + " / 180);");
		arm_shader_MaterialParser.curshader.write("float " + store + "_x = cos(" + store + "_rad);");
		arm_shader_MaterialParser.curshader.write("float " + store + "_y = sin(" + store + "_rad);");
		return "texture(" + tex_name + ", texCoord + vec2(" + store + "_x, " + store + "_y) * " + mask + ").rgb;";
	} else if(node.type == "BLUR") {
		if(arm_shader_MaterialParser.blur_passthrough) {
			return arm_shader_MaterialParser.parse_vector_input(node.inputs[0]);
		}
		var strength = arm_shader_MaterialParser.parse_value_input(node.inputs[1]);
		if(strength == "0.0") {
			return "vec3(0.0, 0.0, 0.0)";
		}
		var steps = "int(" + strength + " * 10 + 1)";
		var tex_name = "texblur_" + arm_shader_MaterialParser.node_name(node);
		arm_shader_MaterialParser.curshader.add_uniform("sampler2D " + tex_name,"_" + tex_name);
		var store = arm_shader_MaterialParser.store_var_name(node);
		arm_shader_MaterialParser.curshader.write("vec3 " + store + "_res = vec3(0.0, 0.0, 0.0);");
		arm_shader_MaterialParser.curshader.write("for (int i = -" + steps + "; i <= " + steps + "; ++i) {");
		arm_shader_MaterialParser.curshader.write("for (int j = -" + steps + "; j <= " + steps + "; ++j) {");
		arm_shader_MaterialParser.curshader.write("" + store + "_res += texture(" + tex_name + ", texCoord + vec2(i, j) / vec2(textureSize(" + tex_name + ", 0))).rgb;");
		arm_shader_MaterialParser.curshader.write("}");
		arm_shader_MaterialParser.curshader.write("}");
		arm_shader_MaterialParser.curshader.write("" + store + "_res /= (" + steps + " * 2 + 1) * (" + steps + " * 2 + 1);");
		return "" + store + "_res";
	} else if(node.type == "HUE_SAT") {
		arm_shader_MaterialParser.curshader.add_function(arm_shader_ShaderFunctions.str_hue_sat);
		var hue = arm_shader_MaterialParser.parse_value_input(node.inputs[0]);
		var sat = arm_shader_MaterialParser.parse_value_input(node.inputs[1]);
		var val = arm_shader_MaterialParser.parse_value_input(node.inputs[2]);
		var fac = arm_shader_MaterialParser.parse_value_input(node.inputs[3]);
		return "hue_sat(" + arm_shader_MaterialParser.parse_vector_input(node.inputs[4]) + ", vec4(" + hue + "-0.5, " + sat + ", " + val + ", 1.0-" + fac + "))";
	} else if(node.type == "INVERT") {
		var fac = arm_shader_MaterialParser.parse_value_input(node.inputs[0]);
		var out_col = arm_shader_MaterialParser.parse_vector_input(node.inputs[1]);
		return "mix(" + out_col + ", vec3(1.0, 1.0, 1.0) - (" + out_col + "), " + fac + ")";
	} else if(node.type == "MIX_RGB") {
		var fac = arm_shader_MaterialParser.parse_value_input(node.inputs[0]);
		var fac_var = arm_shader_MaterialParser.node_name(node) + "_fac";
		arm_shader_MaterialParser.curshader.write("float " + fac_var + " = " + fac + ";");
		var col1 = arm_shader_MaterialParser.parse_vector_input(node.inputs[1]);
		var col2 = arm_shader_MaterialParser.parse_vector_input(node.inputs[2]);
		var but = node.buttons[0];
		var blend = but.data[but.default_value].toUpperCase();
		blend = StringTools.replace(blend," ","_");
		but = node.buttons[1];
		var use_clamp = but.default_value == "true";
		var out_col = "";
		if(blend == "MIX") {
			out_col = "mix(" + col1 + ", " + col2 + ", " + fac_var + ")";
		} else if(blend == "DARKEN") {
			out_col = "min(" + col1 + ", " + col2 + " * " + fac_var + ")";
		} else if(blend == "MULTIPLY") {
			out_col = "mix(" + col1 + ", " + col1 + " * " + col2 + ", " + fac_var + ")";
		} else if(blend == "BURN") {
			out_col = "mix(" + col1 + ", vec3(1.0, 1.0, 1.0) - (vec3(1.0, 1.0, 1.0) - " + col1 + ") / " + col2 + ", " + fac_var + ")";
		} else if(blend == "LIGHTEN") {
			out_col = "max(" + col1 + ", " + col2 + " * " + fac_var + ")";
		} else if(blend == "SCREEN") {
			out_col = "(vec3(1.0, 1.0, 1.0) - (" + ("(" + ("1.0 - " + fac_var) + ").xxx") + (" + " + fac_var + " * (vec3(1.0, 1.0, 1.0) - " + col2 + ")) * (vec3(1.0, 1.0, 1.0) - " + col1 + "))");
		} else if(blend == "DODGE") {
			out_col = "mix(" + col1 + ", " + col1 + " / (vec3(1.0, 1.0, 1.0) - " + col2 + "), " + fac_var + ")";
		} else if(blend == "ADD") {
			out_col = "mix(" + col1 + ", " + col1 + " + " + col2 + ", " + fac_var + ")";
		} else if(blend == "OVERLAY") {
			out_col = "mix(" + col1 + ", vec3(\r\n\t\t\t\t\t" + col1 + ".r < 0.5 ? 2.0 * " + col1 + ".r * " + col2 + ".r : 1.0 - 2.0 * (1.0 - " + col1 + ".r) * (1.0 - " + col2 + ".r),\r\n\t\t\t\t\t" + col1 + ".g < 0.5 ? 2.0 * " + col1 + ".g * " + col2 + ".g : 1.0 - 2.0 * (1.0 - " + col1 + ".g) * (1.0 - " + col2 + ".g),\r\n\t\t\t\t\t" + col1 + ".b < 0.5 ? 2.0 * " + col1 + ".b * " + col2 + ".b : 1.0 - 2.0 * (1.0 - " + col1 + ".b) * (1.0 - " + col2 + ".b)\r\n\t\t\t\t), " + fac_var + ")";
		} else if(blend == "SOFT_LIGHT") {
			out_col = "((1.0 - " + fac_var + ") * " + col1 + " + " + fac_var + " * ((vec3(1.0, 1.0, 1.0) - " + col1 + ") * " + col2 + " * " + col1 + " + " + col1 + " * (vec3(1.0, 1.0, 1.0) - (vec3(1.0, 1.0, 1.0) - " + col2 + ") * (vec3(1.0, 1.0, 1.0) - " + col1 + "))))";
		} else if(blend == "LINEAR_LIGHT") {
			out_col = "(" + col1 + " + " + fac_var + " * (vec3(2.0, 2.0, 2.0) * (" + col2 + " - vec3(0.5, 0.5, 0.5))))";
		} else if(blend == "DIFFERENCE") {
			out_col = "mix(" + col1 + ", abs(" + col1 + " - " + col2 + "), " + fac_var + ")";
		} else if(blend == "SUBTRACT") {
			out_col = "mix(" + col1 + ", " + col1 + " - " + col2 + ", " + fac_var + ")";
		} else if(blend == "DIVIDE") {
			out_col = "(" + ("(" + ("(1.0 - " + fac_var + ") * " + col1 + " + " + fac_var + " * " + col1 + " / " + col2) + ").xxx") + ")";
		} else if(blend == "HUE") {
			arm_shader_MaterialParser.curshader.add_function(arm_shader_ShaderFunctions.str_hue_sat);
			out_col = "mix(" + col1 + ", hsv_to_rgb(vec3(rgb_to_hsv(" + col2 + ").r, rgb_to_hsv(" + col1 + ").g, rgb_to_hsv(" + col1 + ").b)), " + fac_var + ")";
		} else if(blend == "SATURATION") {
			arm_shader_MaterialParser.curshader.add_function(arm_shader_ShaderFunctions.str_hue_sat);
			out_col = "mix(" + col1 + ", hsv_to_rgb(vec3(rgb_to_hsv(" + col1 + ").r, rgb_to_hsv(" + col2 + ").g, rgb_to_hsv(" + col1 + ").b)), " + fac_var + ")";
		} else if(blend == "COLOR") {
			arm_shader_MaterialParser.curshader.add_function(arm_shader_ShaderFunctions.str_hue_sat);
			out_col = "mix(" + col1 + ", hsv_to_rgb(vec3(rgb_to_hsv(" + col2 + ").r, rgb_to_hsv(" + col2 + ").g, rgb_to_hsv(" + col1 + ").b)), " + fac_var + ")";
		} else if(blend == "VALUE") {
			arm_shader_MaterialParser.curshader.add_function(arm_shader_ShaderFunctions.str_hue_sat);
			out_col = "mix(" + col1 + ", hsv_to_rgb(vec3(rgb_to_hsv(" + col1 + ").r, rgb_to_hsv(" + col1 + ").g, rgb_to_hsv(" + col2 + ").b)), " + fac_var + ")";
		}
		if(use_clamp) {
			return "clamp(" + out_col + ", vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0))";
		} else {
			return out_col;
		}
	} else if(node.type == "VALTORGB") {
		var fac = arm_shader_MaterialParser.parse_value_input(node.inputs[0]);
		var interp = node.buttons[0].data == 0 ? "LINEAR" : "CONSTANT";
		var elems = node.buttons[0].default_value;
		if(elems.length == 1) {
			var v = elems[0];
			return "vec3(" + v[0] + ", " + v[1] + ", " + v[2] + ")";
		}
		var cols_var = arm_shader_MaterialParser.node_name(node) + "_cols";
		arm_shader_MaterialParser.curshader.write("vec3 " + cols_var + "[" + Std.string(elems.length) + "];");
		var _g = 0;
		var _g1 = elems.length;
		while(_g < _g1) {
			var i = _g++;
			var v = elems[i];
			arm_shader_MaterialParser.curshader.write("" + cols_var + "[" + i + "] = " + ("vec3(" + v[0] + ", " + v[1] + ", " + v[2] + ")") + ";");
		}
		var fac_var = arm_shader_MaterialParser.node_name(node) + "_fac";
		arm_shader_MaterialParser.curshader.write("float " + fac_var + " = " + fac + ";");
		var index = "0";
		var _g = 1;
		var _g1 = elems.length;
		while(_g < _g1) index += " + (" + fac_var + " > " + elems[_g++][4] + " ? 1 : 0)";
		var index_var = arm_shader_MaterialParser.node_name(node) + "_i";
		arm_shader_MaterialParser.curshader.write("int " + index_var + " = " + index + ";");
		if(interp == "CONSTANT") {
			return "" + cols_var + "[" + index_var + "]";
		} else {
			var facs_var = arm_shader_MaterialParser.node_name(node) + "_facs";
			arm_shader_MaterialParser.curshader.write("float " + facs_var + "[" + Std.string(elems.length) + "];");
			var _g = 0;
			var _g1 = elems.length;
			while(_g < _g1) {
				var i = _g++;
				arm_shader_MaterialParser.curshader.write("" + facs_var + "[" + i + "] = " + elems[i][4] + ";");
			}
			return "mix(" + cols_var + "[" + index_var + "], " + cols_var + "[" + index_var + " + 1], (" + fac_var + " - " + facs_var + "[" + index_var + "]) * (1.0 / (" + facs_var + "[" + index_var + " + 1] - " + facs_var + "[" + index_var + "]) ))";
		}
	} else if(node.type == "CURVE_VEC") {
		var fac = arm_shader_MaterialParser.parse_value_input(node.inputs[0]);
		var vec = arm_shader_MaterialParser.parse_vector_input(node.inputs[1]);
		var curves = node.buttons[0].default_value;
		var name = arm_shader_MaterialParser.node_name(node);
		return "(vec3(" + arm_shader_MaterialParser.vector_curve(name + "0",vec + ".x",curves[0]) + ", " + arm_shader_MaterialParser.vector_curve(name + "1",vec + ".y",curves[1]) + ", " + arm_shader_MaterialParser.vector_curve(name + "2",vec + ".z",curves[2]) + ") * " + fac + ")";
	} else if(node.type == "CURVE_RGB") {
		var fac = arm_shader_MaterialParser.parse_value_input(node.inputs[0]);
		var vec = arm_shader_MaterialParser.parse_vector_input(node.inputs[1]);
		var curves = node.buttons[0].default_value;
		var name = arm_shader_MaterialParser.node_name(node);
		return "(sqrt(vec3(" + arm_shader_MaterialParser.vector_curve(name + "0",vec + ".x",curves[0]) + ", " + arm_shader_MaterialParser.vector_curve(name + "1",vec + ".y",curves[1]) + ", " + arm_shader_MaterialParser.vector_curve(name + "2",vec + ".z",curves[2]) + ") * vec3(" + arm_shader_MaterialParser.vector_curve(name + "3a",vec + ".x",curves[3]) + ", " + arm_shader_MaterialParser.vector_curve(name + "3b",vec + ".y",curves[3]) + ", " + arm_shader_MaterialParser.vector_curve(name + "3c",vec + ".z",curves[3]) + ")) * " + fac + ")";
	} else if(node.type == "COMBHSV") {
		arm_shader_MaterialParser.curshader.add_function(arm_shader_ShaderFunctions.str_hue_sat);
		return "hsv_to_rgb(vec3(" + arm_shader_MaterialParser.parse_value_input(node.inputs[0]) + ", " + arm_shader_MaterialParser.parse_value_input(node.inputs[1]) + ", " + arm_shader_MaterialParser.parse_value_input(node.inputs[2]) + "))";
	} else if(node.type == "COMBRGB") {
		return "vec3(" + arm_shader_MaterialParser.parse_value_input(node.inputs[0]) + ", " + arm_shader_MaterialParser.parse_value_input(node.inputs[1]) + ", " + arm_shader_MaterialParser.parse_value_input(node.inputs[2]) + ")";
	} else if(node.type == "WAVELENGTH") {
		arm_shader_MaterialParser.curshader.add_function(arm_shader_ShaderFunctions.str_wavelength_to_rgb);
		var wl = arm_shader_MaterialParser.parse_value_input(node.inputs[0]);
		arm_shader_MaterialParser.curshader.add_function(arm_shader_ShaderFunctions.str_wavelength_to_rgb);
		return "wavelength_to_rgb((" + wl + " - 450.0) / 150.0)";
	} else if(node.type == "CAMERA") {
		arm_shader_MaterialParser.curshader.vVecCam = true;
		return "vVecCam";
	} else if(node.type == "LAYER") {
		var l = node.buttons[0].default_value;
		if(socket == node.outputs[0]) {
			arm_shader_MaterialParser.curshader.add_uniform("sampler2D texpaint" + Std.string(l),"_texpaint" + Std.string(l));
			return "texture(texpaint" + Std.string(l) + ", texCoord).rgb";
		} else if(socket == node.outputs[5]) {
			arm_shader_MaterialParser.curshader.add_uniform("sampler2D texpaint_nor" + Std.string(l),"_texpaint_nor" + Std.string(l));
			return "texture(texpaint_nor" + Std.string(l) + ", texCoord).rgb";
		}
	} else if(node.type == "MATERIAL") {
		var result = "vec3(0.0, 0.0, 0.0)";
		var mi = node.buttons[0].default_value;
		if(mi >= arm_Project.materials.length) {
			return "vec3(0.0, 0.0, 0.0)";
		}
		var m = arm_Project.materials[mi];
		var _nodes = arm_shader_MaterialParser.nodes;
		var _links = arm_shader_MaterialParser.links;
		arm_shader_MaterialParser.nodes = m.canvas.nodes;
		arm_shader_MaterialParser.links = m.canvas.links;
		var output_node = arm_shader_MaterialParser.node_by_type(arm_shader_MaterialParser.nodes,"OUTPUT_MATERIAL_PBR");
		if(socket == node.outputs[0]) {
			result = arm_shader_MaterialParser.parse_vector_input(output_node.inputs[0]);
		} else if(socket == node.outputs[5]) {
			result = arm_shader_MaterialParser.parse_vector_input(output_node.inputs[5]);
		}
		arm_shader_MaterialParser.nodes = _nodes;
		arm_shader_MaterialParser.links = _links;
		return result;
	} else if(node.type == "NEW_GEOMETRY") {
		if(socket == node.outputs[0]) {
			arm_shader_MaterialParser.curshader.wposition = true;
			return "wposition";
		} else if(socket == node.outputs[1]) {
			arm_shader_MaterialParser.curshader.n = true;
			return "n";
		} else if(socket == node.outputs[2]) {
			arm_shader_MaterialParser.curshader.wtangent = true;
			return "wtangent";
		} else if(socket == node.outputs[3]) {
			arm_shader_MaterialParser.curshader.n = true;
			return "n";
		} else if(socket == node.outputs[4]) {
			arm_shader_MaterialParser.curshader.vVec = true;
			return "vVec";
		} else if(socket == node.outputs[5]) {
			arm_shader_MaterialParser.curshader.mposition = true;
			return "mposition";
		}
	} else if(node.type == "OBJECT_INFO") {
		arm_shader_MaterialParser.curshader.wposition = true;
		return "wposition";
	} else if(node.type == "TANGENT") {
		arm_shader_MaterialParser.curshader.wtangent = true;
		return "wtangent";
	} else if(node.type == "TEX_COORD") {
		if(socket == node.outputs[0]) {
			arm_shader_MaterialParser.curshader.bposition = true;
			return "bposition";
		} else if(socket == node.outputs[1]) {
			arm_shader_MaterialParser.curshader.n = true;
			return "n";
		} else if(socket == node.outputs[2]) {
			arm_shader_MaterialParser.curshader.context.add_elem("tex","short2norm");
			return "vec3(texCoord.x, texCoord.y, 0.0)";
		} else if(socket == node.outputs[3]) {
			arm_shader_MaterialParser.curshader.mposition = true;
			return "mposition";
		} else if(socket == node.outputs[4]) {
			arm_shader_MaterialParser.curshader.vposition = true;
			return "vposition";
		} else if(socket == node.outputs[5]) {
			arm_shader_MaterialParser.curshader.wvpposition = true;
			return "wvpposition.xyz";
		} else if(socket == node.outputs[6]) {
			return "vec3(0.0, 0.0, 0.0)";
		}
	} else if(node.type == "UVMAP") {
		arm_shader_MaterialParser.curshader.context.add_elem("tex","short2norm");
		return "vec3(texCoord.x, texCoord.y, 0.0)";
	} else if(node.type == "BUMP") {
		var res = "";
		var strength = arm_shader_MaterialParser.parse_value_input(node.inputs[0]);
		arm_shader_MaterialParser.sample_bump = true;
		arm_shader_MaterialParser.parse_value_input(node.inputs[2]);
		arm_shader_MaterialParser.sample_bump = false;
		var nor = arm_shader_MaterialParser.parse_vector_input(node.inputs[3]);
		if(arm_shader_MaterialParser.sample_bump_res != "") {
			arm_shader_MaterialParser.curshader.nAttr = true;
			arm_shader_MaterialParser.curshader.write("" + arm_shader_MaterialParser.sample_bump_res + "_x *= (" + strength + ") * 16.0;");
			arm_shader_MaterialParser.curshader.write("" + arm_shader_MaterialParser.sample_bump_res + "_y *= (" + strength + ") * 16.0;");
			arm_shader_MaterialParser.curshader.write("vec3 " + arm_shader_MaterialParser.sample_bump_res + "_a = normalize(vec3(1.0, 0.0, " + arm_shader_MaterialParser.sample_bump_res + "_x));");
			arm_shader_MaterialParser.curshader.write("vec3 " + arm_shader_MaterialParser.sample_bump_res + "_b = normalize(vec3(0.0, 1.0, " + arm_shader_MaterialParser.sample_bump_res + "_y));");
			res = "normalize(mul(nAttr, mat3(" + arm_shader_MaterialParser.sample_bump_res + "_a, " + arm_shader_MaterialParser.sample_bump_res + "_b, normalize(vec3(" + arm_shader_MaterialParser.sample_bump_res + "_x, " + arm_shader_MaterialParser.sample_bump_res + "_y, 1.0)))))";
			arm_shader_MaterialParser.sample_bump_res = "";
		} else {
			arm_shader_MaterialParser.curshader.n = true;
			res = "n";
		}
		res = "(" + res + " + " + nor + ")";
		if(!arm_shader_MaterialParser.curshader.invTBN) {
			arm_shader_MaterialParser.curshader.invTBN = true;
			arm_shader_MaterialParser.curshader.nAttr = true;
			arm_shader_MaterialParser.curshader.add_function(arm_shader_ShaderFunctions.str_cotangentFrame);
			arm_shader_MaterialParser.curshader.write("mat3 invTBN = transpose(cotangentFrame(nAttr, -nAttr, texCoord));");
		}
		res = "(normalize(mul(" + res + ", invTBN)) * 0.5 + 0.5)";
		return res;
	} else if(node.type == "MAPPING") {
		var out = arm_shader_MaterialParser.parse_vector_input(node.inputs[0]);
		var node_translation = node.buttons[0].default_value;
		var node_rotation = node.buttons[1].default_value;
		var node_scale = node.buttons[2].default_value;
		if(node_scale[0] != 1.0 || node_scale[1] != 1.0 || node_scale[2] != 1.0) {
			var v = node_scale;
			out = "(" + out + " * " + ("vec3(" + v[0] + ", " + v[1] + ", " + v[2] + ")") + ")";
		}
		if(node_rotation[2] != 0.0) {
			var a = node_rotation[2] * (Math.PI / 180);
			out = "vec3(" + out + ".x * " + Math.cos(a) + " - (" + out + ".y) * " + Math.sin(a) + ", " + out + ".x * " + Math.sin(a) + " + (" + out + ".y) * " + Math.cos(a) + ", 0.0)";
		}
		if(node_translation[0] != 0.0 || node_translation[1] != 0.0 || node_translation[2] != 0.0) {
			var v = node_translation;
			out = "(" + out + " + " + ("vec3(" + v[0] + ", " + v[1] + ", " + v[2] + ")") + ")";
		}
		return out;
	} else if(node.type == "NORMAL") {
		if(socket == node.outputs[0]) {
			var v = node.outputs[0].default_value;
			return "vec3(" + v[0] + ", " + v[1] + ", " + v[2] + ")";
		} else if(socket == node.outputs[1]) {
			var nor = arm_shader_MaterialParser.parse_vector_input(node.inputs[0]);
			var v = node.outputs[0].default_value;
			return "(" + ("dot(" + ("vec3(" + v[0] + ", " + v[1] + ", " + v[2] + ")") + ", " + nor + ")") + ").xxx";
		}
	} else if(node.type == "NORMAL_MAP") {
		var strength = arm_shader_MaterialParser.parse_value_input(node.inputs[0]);
		arm_shader_MaterialParser.parse_normal_map_color_input(node.inputs[1],strength);
		return null;
	} else if(node.type != "VECT_TRANSFORM") {
		if(node.type == "COMBXYZ") {
			return "vec3(" + arm_shader_MaterialParser.parse_value_input(node.inputs[0]) + ", " + arm_shader_MaterialParser.parse_value_input(node.inputs[1]) + ", " + arm_shader_MaterialParser.parse_value_input(node.inputs[2]) + ")";
		} else if(node.type == "VECT_MATH") {
			var vec1 = arm_shader_MaterialParser.parse_vector_input(node.inputs[0]);
			var vec2 = arm_shader_MaterialParser.parse_vector_input(node.inputs[1]);
			var but = node.buttons[0];
			var op = but.data[but.default_value].toUpperCase();
			op = StringTools.replace(op," ","_");
			if(op == "ADD") {
				return "(" + vec1 + " + " + vec2 + ")";
			} else if(op == "SUBTRACT") {
				return "(" + vec1 + " - " + vec2 + ")";
			} else if(op == "AVERAGE") {
				return "((" + vec1 + " + " + vec2 + ") / 2.0)";
			} else if(op == "DOT_PRODUCT") {
				return "(" + ("dot(" + vec1 + ", " + vec2 + ")") + ").xxx";
			} else if(op == "CROSS_PRODUCT") {
				return "cross(" + vec1 + ", " + vec2 + ")";
			} else if(op == "NORMALIZE") {
				return "normalize(" + vec1 + ")";
			}
		} else if(node.type == "Displacement") {
			return "(" + ("" + arm_shader_MaterialParser.parse_value_input(node.inputs[0])) + ").xxx";
		} else if(arm_shader_MaterialParser.customNodes.get(node.type) != null) {
			return (arm_shader_MaterialParser.customNodes.get(node.type))(node,socket);
		}
	}
	return "vec3(0.0, 0.0, 0.0)";
};
arm_shader_MaterialParser.parse_normal_map_color_input = function(inp,strength) {
	if(strength == null) {
		strength = "1.0";
	}
	arm_shader_MaterialParser.frag.write_normal++;
	arm_shader_MaterialParser.out_normaltan = arm_shader_MaterialParser.parse_vector_input(inp);
	if(!arm_shader_MaterialParser.arm_export_tangents) {
		arm_shader_MaterialParser.frag.write("vec3 texn = (" + arm_shader_MaterialParser.out_normaltan + ") * 2.0 - 1.0;");
		arm_shader_MaterialParser.frag.write("texn.y = -texn.y;");
		if(!arm_shader_MaterialParser.cotangentFrameWritten) {
			arm_shader_MaterialParser.cotangentFrameWritten = true;
			arm_shader_MaterialParser.frag.add_function(arm_shader_ShaderFunctions.str_cotangentFrame);
		}
		arm_shader_MaterialParser.frag.n = true;
		arm_shader_MaterialParser.frag.write("mat3 TBN = cotangentFrame(n, vVec, texCoord);");
		arm_shader_MaterialParser.frag.write("n = mul(normalize(texn), TBN);");
	}
	arm_shader_MaterialParser.frag.write_normal--;
};
arm_shader_MaterialParser.parse_value_input = function(inp,vector_as_grayscale) {
	if(vector_as_grayscale == null) {
		vector_as_grayscale = false;
	}
	while(true) {
		var l = arm_shader_MaterialParser.getInputLink(inp);
		var from_node = l != null ? arm_shader_MaterialParser.getNode(l.from_id) : null;
		if(from_node != null) {
			if(from_node.type == "REROUTE") {
				inp = from_node.inputs[0];
				vector_as_grayscale = false;
				continue;
			}
			var res_var = arm_shader_MaterialParser.write_result(l);
			var st = from_node.outputs[l.from_socket].type;
			if(st == "RGB" || st == "RGBA" || st == "VECTOR") {
				if(vector_as_grayscale) {
					return "dot(" + res_var + ".rbg, vec3(0.299, 0.587, 0.114))";
				} else {
					return "" + res_var + ".x";
				}
			} else {
				return res_var;
			}
		} else {
			return "" + inp.default_value;
		}
	}
};
arm_shader_MaterialParser.parse_value = function(node,socket) {
	if(node.type == "ATTRIBUTE") {
		arm_shader_MaterialParser.curshader.add_uniform("float time","_time");
		return "time";
	} else if(node.type == "CAMERA") {
		if(socket == node.outputs[1]) {
			arm_shader_MaterialParser.curshader.add_uniform("vec2 cameraProj","_cameraPlaneProj");
			arm_shader_MaterialParser.curshader.wvpposition = true;
			return "(cameraProj.y / ((wvpposition.z / wvpposition.w) - cameraProj.x))";
		} else {
			arm_shader_MaterialParser.curshader.add_uniform("vec3 eye","_cameraPosition");
			arm_shader_MaterialParser.curshader.wposition = true;
			return "distance(eye, wposition)";
		}
	} else if(node.type == "LAYER") {
		var l = node.buttons[0].default_value;
		if(socket == node.outputs[1]) {
			arm_shader_MaterialParser.curshader.add_uniform("sampler2D texpaint" + Std.string(l),"_texpaint" + Std.string(l));
			return "texture(texpaint" + Std.string(l) + ", texCoord).a";
		} else if(socket == node.outputs[2]) {
			arm_shader_MaterialParser.curshader.add_uniform("sampler2D texpaint_pack" + Std.string(l),"_texpaint_pack" + Std.string(l));
			return "texture(texpaint_pack" + Std.string(l) + ", texCoord).r";
		} else if(socket == node.outputs[3]) {
			arm_shader_MaterialParser.curshader.add_uniform("sampler2D texpaint_pack" + Std.string(l),"_texpaint_pack" + Std.string(l));
			return "texture(texpaint_pack" + Std.string(l) + ", texCoord).g";
		} else if(socket == node.outputs[4]) {
			arm_shader_MaterialParser.curshader.add_uniform("sampler2D texpaint_pack" + Std.string(l),"_texpaint_pack" + Std.string(l));
			return "texture(texpaint_pack" + Std.string(l) + ", texCoord).b";
		} else if(socket == node.outputs[7]) {
			arm_shader_MaterialParser.curshader.add_uniform("sampler2D texpaint_pack" + Std.string(l),"_texpaint_pack" + Std.string(l));
			return "texture(texpaint_pack" + Std.string(l) + ", texCoord).a";
		}
	} else if(node.type == "LAYER_MASK") {
		if(socket == node.outputs[0]) {
			var l = node.buttons[0].default_value;
			arm_shader_MaterialParser.curshader.add_uniform("sampler2D texpaint_mask" + Std.string(l),"_texpaint_mask" + Std.string(l));
			return "texture(texpaint_mask" + Std.string(l) + ", texCoord).r";
		}
	} else if(node.type == "MATERIAL") {
		var result = "0.0";
		var mi = node.buttons[0].default_value;
		if(mi >= arm_Project.materials.length) {
			return "0.0";
		}
		var m = arm_Project.materials[mi];
		var _nodes = arm_shader_MaterialParser.nodes;
		var _links = arm_shader_MaterialParser.links;
		arm_shader_MaterialParser.nodes = m.canvas.nodes;
		arm_shader_MaterialParser.links = m.canvas.links;
		var output_node = arm_shader_MaterialParser.node_by_type(arm_shader_MaterialParser.nodes,"OUTPUT_MATERIAL_PBR");
		if(socket == node.outputs[1]) {
			result = arm_shader_MaterialParser.parse_value_input(output_node.inputs[1]);
		} else if(socket == node.outputs[2]) {
			result = arm_shader_MaterialParser.parse_value_input(output_node.inputs[2]);
		} else if(socket == node.outputs[3]) {
			result = arm_shader_MaterialParser.parse_value_input(output_node.inputs[3]);
		} else if(socket == node.outputs[4]) {
			result = arm_shader_MaterialParser.parse_value_input(output_node.inputs[4]);
		} else if(socket == node.outputs[7]) {
			result = arm_shader_MaterialParser.parse_value_input(output_node.inputs[7]);
		}
		arm_shader_MaterialParser.nodes = _nodes;
		arm_shader_MaterialParser.links = _links;
		return result;
	} else if(node.type == "FRESNEL") {
		var ior = arm_shader_MaterialParser.parse_value_input(node.inputs[0]);
		arm_shader_MaterialParser.curshader.dotNV = true;
		return "pow(1.0 - dotNV, 7.25 / " + ior + ")";
	} else if(node.type == "NEW_GEOMETRY") {
		if(socket == node.outputs[6]) {
			return "0.0";
		} else if(socket == node.outputs[7]) {
			return "0.0";
		}
	} else if(node.type == "HAIR_INFO") {
		return "0.5";
	} else if(node.type == "LAYER_WEIGHT") {
		var blend = arm_shader_MaterialParser.parse_value_input(node.inputs[0]);
		if(socket == node.outputs[0]) {
			arm_shader_MaterialParser.curshader.dotNV = true;
			return "clamp(pow(1.0 - dotNV, (1.0 - " + blend + ") * 10.0), 0.0, 1.0)";
		} else if(socket == node.outputs[1]) {
			arm_shader_MaterialParser.curshader.dotNV = true;
			return "((1.0 - dotNV) * " + blend + ")";
		}
	} else if(node.type == "OBJECT_INFO") {
		if(socket == node.outputs[1]) {
			arm_shader_MaterialParser.curshader.add_uniform("float objectInfoIndex","_objectInfoIndex");
			return "objectInfoIndex";
		} else if(socket == node.outputs[2]) {
			arm_shader_MaterialParser.curshader.add_uniform("float objectInfoMaterialIndex","_objectInfoMaterialIndex");
			return "objectInfoMaterialIndex";
		} else if(socket == node.outputs[3]) {
			arm_shader_MaterialParser.curshader.add_uniform("float objectInfoRandom","_objectInfoRandom");
			return "objectInfoRandom";
		}
	} else if(node.type == "VALUE") {
		return "" + node.outputs[0].default_value;
	} else if(node.type == "TEX_BRICK") {
		arm_shader_MaterialParser.curshader.add_function(arm_shader_ShaderFunctions.str_tex_brick);
		var res = "tex_brick_f(" + arm_shader_MaterialParser.getCoord(node) + " * " + arm_shader_MaterialParser.parse_value_input(node.inputs[4]) + ")";
		if(arm_shader_MaterialParser.sample_bump) {
			arm_shader_MaterialParser.write_bump(node,res);
		}
		return res;
	} else if(node.type == "TEX_CHECKER") {
		arm_shader_MaterialParser.curshader.add_function(arm_shader_ShaderFunctions.str_tex_checker);
		var res = "tex_checker_f(" + arm_shader_MaterialParser.getCoord(node) + ", " + arm_shader_MaterialParser.parse_value_input(node.inputs[3]) + ")";
		if(arm_shader_MaterialParser.sample_bump) {
			arm_shader_MaterialParser.write_bump(node,res);
		}
		return res;
	} else if(node.type == "TEX_GRADIENT") {
		var co = arm_shader_MaterialParser.getCoord(node);
		var but = node.buttons[0];
		var grad = but.data[but.default_value].toUpperCase();
		grad = StringTools.replace(grad," ","_");
		var res = "(clamp(" + arm_shader_MaterialParser.getGradient(grad,co) + ", 0.0, 1.0))";
		if(arm_shader_MaterialParser.sample_bump) {
			arm_shader_MaterialParser.write_bump(node,res);
		}
		return res;
	} else if(node.type == "TEX_IMAGE") {
		if(arm_shader_MaterialParser.parsed.indexOf(arm_shader_MaterialParser.res_var_name(node,node.outputs[0])) >= 0) {
			return "" + arm_shader_MaterialParser.store_var_name(node) + ".a";
		}
		var tex_name = arm_shader_MaterialParser.node_name(node);
		var tex = arm_shader_MaterialParser.make_texture(node,tex_name);
		if(tex != null) {
			return "" + arm_shader_MaterialParser.texture_store(node,tex,tex_name,node.buttons[1].default_value == 1) + ".a";
		}
	} else if(node.type == "TEX_MAGIC") {
		arm_shader_MaterialParser.curshader.add_function(arm_shader_ShaderFunctions.str_tex_magic);
		var res = "tex_magic_f(" + arm_shader_MaterialParser.getCoord(node) + " * " + arm_shader_MaterialParser.parse_value_input(node.inputs[1]) + " * 4.0)";
		if(arm_shader_MaterialParser.sample_bump) {
			arm_shader_MaterialParser.write_bump(node,res);
		}
		return res;
	} else if(node.type == "TEX_MUSGRAVE") {
		arm_shader_MaterialParser.curshader.add_function(arm_shader_ShaderFunctions.str_tex_musgrave);
		var res = "tex_musgrave_f(" + arm_shader_MaterialParser.getCoord(node) + " * " + arm_shader_MaterialParser.parse_value_input(node.inputs[1]) + " * 0.5)";
		if(arm_shader_MaterialParser.sample_bump) {
			arm_shader_MaterialParser.write_bump(node,res);
		}
		return res;
	} else if(node.type == "TEX_NOISE") {
		arm_shader_MaterialParser.curshader.add_function(arm_shader_ShaderFunctions.str_tex_noise);
		var res = "tex_noise(" + arm_shader_MaterialParser.getCoord(node) + " * " + arm_shader_MaterialParser.parse_value_input(node.inputs[1]) + ")";
		if(arm_shader_MaterialParser.sample_bump) {
			arm_shader_MaterialParser.write_bump(node,res);
		}
		return res;
	} else if(node.type == "TEX_VORONOI") {
		arm_shader_MaterialParser.curshader.add_function(arm_shader_ShaderFunctions.str_tex_voronoi);
		arm_shader_MaterialParser.curshader.add_uniform("sampler2D snoise256","$noise256.k");
		var co = arm_shader_MaterialParser.getCoord(node);
		var scale = arm_shader_MaterialParser.parse_value_input(node.inputs[1]);
		var but = node.buttons[0];
		var coloring = but.data[but.default_value].toUpperCase();
		coloring = StringTools.replace(coloring," ","_");
		var res = "";
		if(coloring == "INTENSITY") {
			res = "tex_voronoi(" + co + " * " + scale + ", texturePass(snoise256)).a";
		} else {
			res = "tex_voronoi(" + co + " * " + scale + ", texturePass(snoise256)).r";
		}
		if(arm_shader_MaterialParser.sample_bump) {
			arm_shader_MaterialParser.write_bump(node,res);
		}
		return res;
	} else if(node.type == "TEX_WAVE") {
		arm_shader_MaterialParser.curshader.add_function(arm_shader_ShaderFunctions.str_tex_wave);
		var res = "tex_wave_f(" + arm_shader_MaterialParser.getCoord(node) + " * " + arm_shader_MaterialParser.parse_value_input(node.inputs[1]) + ")";
		if(arm_shader_MaterialParser.sample_bump) {
			arm_shader_MaterialParser.write_bump(node,res);
		}
		return res;
	} else if(node.type == "NORMAL") {
		var nor = arm_shader_MaterialParser.parse_vector_input(node.inputs[0]);
		var v = node.outputs[0].default_value;
		return "dot(" + ("vec3(" + v[0] + ", " + v[1] + ", " + v[2] + ")") + ", " + nor + ")";
	} else if(node.type == "MATH") {
		var val1 = arm_shader_MaterialParser.parse_value_input(node.inputs[0]);
		var val2 = arm_shader_MaterialParser.parse_value_input(node.inputs[1]);
		var but = node.buttons[0];
		var op = but.data[but.default_value].toUpperCase();
		op = StringTools.replace(op," ","_");
		but = node.buttons[1];
		var out_val = "";
		if(op == "ADD") {
			out_val = "(" + val1 + " + " + val2 + ")";
		} else if(op == "SUBTRACT") {
			out_val = "(" + val1 + " - " + val2 + ")";
		} else if(op == "MULTIPLY") {
			out_val = "(" + val1 + " * " + val2 + ")";
		} else if(op == "DIVIDE") {
			out_val = "(" + val1 + " / " + val2 + ")";
		} else if(op == "POWER") {
			out_val = "pow(" + val1 + ", " + val2 + ")";
		} else if(op == "LOGARITHM") {
			out_val = "log(" + val1 + ")";
		} else if(op == "SQUARE_ROOT") {
			out_val = "sqrt(" + val1 + ")";
		} else if(op == "ABSOLUTE") {
			out_val = "abs(" + val1 + ")";
		} else if(op == "MINIMUM") {
			out_val = "min(" + val1 + ", " + val2 + ")";
		} else if(op == "MAXIMUM") {
			out_val = "max(" + val1 + ", " + val2 + ")";
		} else if(op == "LESS_THAN") {
			out_val = "float(" + val1 + " < " + val2 + ")";
		} else if(op == "GREATER_THAN") {
			out_val = "float(" + val1 + " > " + val2 + ")";
		} else if(op == "ROUND") {
			out_val = "floor(" + val1 + " + 0.5)";
		} else if(op == "FLOOR") {
			out_val = "floor(" + val1 + ")";
		} else if(op == "CEIL") {
			out_val = "ceil(" + val1 + ")";
		} else if(op == "FRACT") {
			out_val = "fract(" + val1 + ")";
		} else if(op == "MODULO") {
			out_val = "mod(" + val1 + ", " + val2 + ")";
		} else if(op == "SINE") {
			out_val = "sin(" + val1 + ")";
		} else if(op == "COSINE") {
			out_val = "cos(" + val1 + ")";
		} else if(op == "TANGENT") {
			out_val = "tan(" + val1 + ")";
		} else if(op == "ARCSINE") {
			out_val = "asin(" + val1 + ")";
		} else if(op == "ARCCOSINE") {
			out_val = "acos(" + val1 + ")";
		} else if(op == "ARCTANGENT") {
			out_val = "atan(" + val1 + ")";
		} else if(op == "ARCTAN2") {
			out_val = "atan(" + val2 + ", " + val1 + ")";
		}
		if(but.default_value == "true") {
			return "clamp(" + out_val + ", 0.0, 1.0)";
		} else {
			return out_val;
		}
	} else if(node.type == "SCRIPT_CPU") {
		if(arm_shader_MaterialParser.script_links == null) {
			arm_shader_MaterialParser.script_links = new haxe_ds_StringMap();
		}
		var script = node.buttons[0].default_value;
		var link = arm_shader_MaterialParser.node_name(node);
		arm_shader_MaterialParser.script_links.h[link] = script;
		arm_shader_MaterialParser.curshader.add_uniform("float " + link,"_" + link);
		return link;
	} else if(node.type == "SHADER_GPU") {
		var shader = node.buttons[0].default_value;
		if(shader == "") {
			return "0.0";
		} else {
			return shader;
		}
	} else if(node.type == "RGBTOBW") {
		var col = arm_shader_MaterialParser.parse_vector_input(node.inputs[0]);
		return "(((" + col + ".r * 0.3 + " + col + ".g * 0.59 + " + col + ".b * 0.11) / 3.0) * 2.5)";
	} else if(node.type == "SEPRGB") {
		var col = arm_shader_MaterialParser.parse_vector_input(node.inputs[0]);
		if(socket == node.outputs[0]) {
			return "" + col + ".r";
		} else if(socket == node.outputs[1]) {
			return "" + col + ".g";
		} else if(socket == node.outputs[2]) {
			return "" + col + ".b";
		}
	} else if(node.type == "SEPXYZ") {
		var vec = arm_shader_MaterialParser.parse_vector_input(node.inputs[0]);
		if(socket == node.outputs[0]) {
			return "" + vec + ".x";
		} else if(socket == node.outputs[1]) {
			return "" + vec + ".y";
		} else if(socket == node.outputs[2]) {
			return "" + vec + ".z";
		}
	} else if(node.type == "VECT_MATH") {
		var vec1 = arm_shader_MaterialParser.parse_vector_input(node.inputs[0]);
		var vec2 = arm_shader_MaterialParser.parse_vector_input(node.inputs[1]);
		var but = node.buttons[0];
		var op = but.data[but.default_value].toUpperCase();
		op = StringTools.replace(op," ","_");
		if(op == "DOT_PRODUCT") {
			return "dot(" + vec1 + ", " + vec2 + ")";
		} else {
			return "0.0";
		}
	} else if(arm_shader_MaterialParser.customNodes.get(node.type) != null) {
		return (arm_shader_MaterialParser.customNodes.get(node.type))(node,socket);
	}
	return "0.0";
};
arm_shader_MaterialParser.getCoord = function(node) {
	if(arm_shader_MaterialParser.getInputLink(node.inputs[0]) != null) {
		return arm_shader_MaterialParser.parse_vector_input(node.inputs[0]);
	} else {
		arm_shader_MaterialParser.curshader.bposition = true;
		return "bposition";
	}
};
arm_shader_MaterialParser.getGradient = function(grad,co) {
	if(grad == "LINEAR") {
		return "" + co + ".x";
	} else if(grad == "QUADRATIC") {
		return "0.0";
	} else if(grad == "EASING") {
		return "0.0";
	} else if(grad == "DIAGONAL") {
		return "(" + co + ".x + " + co + ".y) * 0.5";
	} else if(grad == "RADIAL") {
		return "atan(" + co + ".y, " + co + ".x) / (3.141592 * 2.0) + 0.5";
	} else if(grad == "QUADRATIC_SPHERE") {
		return "0.0";
	} else {
		return "max(1.0 - sqrt(" + co + ".x * " + co + ".x + " + co + ".y * " + co + ".y + " + co + ".z * " + co + ".z), 0.0)";
	}
};
arm_shader_MaterialParser.vector_curve = function(name,fac,points) {
	var ys_var = name + "_ys";
	var num = points.length;
	arm_shader_MaterialParser.curshader.write("float " + ys_var + "[" + num + "];");
	var _g = 0;
	while(_g < num) {
		var i = _g++;
		arm_shader_MaterialParser.curshader.write("" + ys_var + "[" + i + "] = " + points[i][1] + ";");
	}
	var fac_var = name + "_fac";
	arm_shader_MaterialParser.curshader.write("float " + fac_var + " = " + fac + ";");
	var index = "0";
	var _g = 1;
	while(_g < num) index += " + (" + fac_var + " > " + points[_g++][0] + " ? 1 : 0)";
	var index_var = name + "_i";
	arm_shader_MaterialParser.curshader.write("int " + index_var + " = " + index + ";");
	var facs_var = name + "_xs";
	arm_shader_MaterialParser.curshader.write("float " + facs_var + "[" + num + "];");
	var _g = 0;
	while(_g < num) {
		var i = _g++;
		arm_shader_MaterialParser.curshader.write("" + facs_var + "[" + i + "] = " + points[i][0] + ";");
	}
	return "mix(" + ys_var + "[" + index_var + "], " + ys_var + "[" + index_var + " + 1], (" + fac_var + " - " + facs_var + "[" + index_var + "]) * (1.0 / (" + facs_var + "[" + index_var + " + 1] - " + facs_var + "[" + index_var + "])))";
};
arm_shader_MaterialParser.res_var_name = function(node,socket) {
	return arm_shader_MaterialParser.node_name(node) + "_" + arm_shader_MaterialParser.safesrc(socket.name) + "_res";
};
arm_shader_MaterialParser.write_result = function(l) {
	var from_node = arm_shader_MaterialParser.getNode(l.from_id);
	var from_socket = from_node.outputs[l.from_socket];
	var res_var = arm_shader_MaterialParser.res_var_name(from_node,from_socket);
	var st = from_socket.type;
	if(arm_shader_MaterialParser.parsed.indexOf(res_var) < 0) {
		arm_shader_MaterialParser.parsed.push(res_var);
		if(st == "RGB" || st == "RGBA" || st == "VECTOR") {
			var res = arm_shader_MaterialParser.parse_vector(from_node,from_socket);
			if(res == null) {
				return null;
			}
			arm_shader_MaterialParser.parsedMap.h[res_var] = res;
			arm_shader_MaterialParser.curshader.write("vec3 " + res_var + " = " + res + ";");
		} else if(st == "VALUE") {
			var res = arm_shader_MaterialParser.parse_value(from_node,from_socket);
			if(res == null) {
				return null;
			}
			arm_shader_MaterialParser.parsedMap.h[res_var] = res;
			arm_shader_MaterialParser.curshader.write("float " + res_var + " = " + res + ";");
		}
	}
	return res_var;
};
arm_shader_MaterialParser.store_var_name = function(node) {
	return arm_shader_MaterialParser.node_name(node) + "_store";
};
arm_shader_MaterialParser.texture_store = function(node,tex,tex_name,to_linear) {
	if(to_linear == null) {
		to_linear = false;
	}
	arm_shader_MaterialParser.matcon.bind_textures.push(tex);
	arm_shader_MaterialParser.curshader.context.add_elem("tex","short2norm");
	arm_shader_MaterialParser.curshader.add_uniform("sampler2D " + tex_name);
	var uv_name = "";
	if(arm_shader_MaterialParser.getInputLink(node.inputs[0]) != null) {
		uv_name = arm_shader_MaterialParser.parse_vector_input(node.inputs[0]);
	} else {
		uv_name = arm_shader_MaterialParser.tex_coord;
	}
	var tex_store = arm_shader_MaterialParser.store_var_name(node);
	if(arm_shader_MaterialParser.sample_keep_aspect) {
		arm_shader_MaterialParser.curshader.write("vec2 " + tex_store + "_size = textureSize(" + tex_name + ", 0);");
		arm_shader_MaterialParser.curshader.write("float " + tex_store + "_ax = " + tex_store + "_size.x / " + tex_store + "_size.y;");
		arm_shader_MaterialParser.curshader.write("float " + tex_store + "_ay = " + tex_store + "_size.y / " + tex_store + "_size.x;");
		arm_shader_MaterialParser.curshader.write("vec2 " + tex_store + "_uv = ((" + uv_name + ".xy / " + arm_shader_MaterialParser.sample_uv_scale + " - vec2(0.5, 0.5)) * vec2(max(" + tex_store + "_ay, 1.0), max(" + tex_store + "_ax, 1.0))) + vec2(0.5, 0.5);");
		arm_shader_MaterialParser.curshader.write("if (" + tex_store + "_uv.x < 0.0 || " + tex_store + "_uv.y < 0.0 || " + tex_store + "_uv.x > 1.0 || " + tex_store + "_uv.y > 1.0) discard;");
		arm_shader_MaterialParser.curshader.write("" + tex_store + "_uv *= " + arm_shader_MaterialParser.sample_uv_scale + ";");
		uv_name = "" + tex_store + "_uv";
	}
	if(arm_shader_MaterialParser.triplanar) {
		arm_shader_MaterialParser.curshader.write("vec4 " + tex_store + " = vec4(0.0, 0.0, 0.0, 0.0);");
		arm_shader_MaterialParser.curshader.write("if (texCoordBlend.x > 0) " + tex_store + " += texture(" + tex_name + ", " + uv_name + ".xy) * texCoordBlend.x;");
		arm_shader_MaterialParser.curshader.write("if (texCoordBlend.y > 0) " + tex_store + " += texture(" + tex_name + ", " + uv_name + "1.xy) * texCoordBlend.y;");
		arm_shader_MaterialParser.curshader.write("if (texCoordBlend.z > 0) " + tex_store + " += texture(" + tex_name + ", " + uv_name + "2.xy) * texCoordBlend.z;");
	} else {
		arm_shader_MaterialParser.textureMap.h[tex_store] = "texture(" + tex_name + ", " + uv_name + ".xy)";
		arm_shader_MaterialParser.curshader.write("vec4 " + tex_store + " = texture(" + tex_name + ", " + uv_name + ".xy);");
		if(!StringTools.endsWith(tex.file,".jpg")) {
			arm_shader_MaterialParser.curshader.write("" + tex_store + ".rgb *= " + tex_store + ".a;");
		}
	}
	if(arm_shader_MaterialParser.sample_bump) {
		arm_shader_MaterialParser.sample_bump_res = tex_store;
		arm_shader_MaterialParser.curshader.write("float " + tex_store + "_x = dFdx(" + tex_store + ").x;");
		arm_shader_MaterialParser.curshader.write("float " + tex_store + "_y = dFdy(" + tex_store + ").x;");
		arm_shader_MaterialParser.sample_bump = false;
	}
	if(to_linear) {
		arm_shader_MaterialParser.curshader.write("" + tex_store + ".rgb = pow(" + tex_store + ".rgb, vec3(2.2, 2.2, 2.2));");
	}
	return tex_store;
};
arm_shader_MaterialParser.write_bump = function(node,res) {
	arm_shader_MaterialParser.sample_bump_res = arm_shader_MaterialParser.store_var_name(node) + "_bump";
	arm_shader_MaterialParser.curshader.write("float " + arm_shader_MaterialParser.sample_bump_res + "_x = dFdx(" + res + ");");
	arm_shader_MaterialParser.curshader.write("float " + arm_shader_MaterialParser.sample_bump_res + "_y = dFdy(" + res + ");");
	arm_shader_MaterialParser.sample_bump = false;
};
arm_shader_MaterialParser.node_by_type = function(nodes,ntype) {
	var _g = 0;
	while(_g < nodes.length) {
		var n = nodes[_g];
		++_g;
		if(n.type == ntype) {
			return n;
		}
	}
	return null;
};
arm_shader_MaterialParser.node_name = function(node) {
	return arm_shader_MaterialParser.safesrc(node.name) + node.id;
};
arm_shader_MaterialParser.safesrc = function(s) {
	var _g = 0;
	var _g1 = s.length;
	while(_g < _g1) {
		var i = _g++;
		var code = HxOverrides.cca(s,i);
		if(!(code >= 65 && code <= 90 || code >= 97 && code <= 122)) {
			s = StringTools.replace(s,s.charAt(i),"_");
		}
	}
	return s;
};
arm_shader_MaterialParser.enumData = function(s) {
	var _g = 0;
	var _g1 = arm_Project.assets;
	while(_g < _g1.length) {
		var a = _g1[_g];
		++_g;
		if(a.name == s) {
			return a.file;
		}
	}
	return "";
};
arm_shader_MaterialParser.make_texture = function(image_node,tex_name,matname) {
	var filepath = arm_shader_MaterialParser.enumData(arm_App.enumTexts(image_node.type)[image_node.buttons[0].default_value]);
	if(filepath == "" || filepath.indexOf(".") == -1) {
		return null;
	}
	var tex = { name : tex_name, file : filepath};
	if(arm_Context.textureFilter) {
		tex.min_filter = "anisotropic";
		tex.mag_filter = "linear";
		tex.mipmap_filter = "linear";
		tex.generate_mipmaps = true;
	} else {
		tex.min_filter = "point";
		tex.mag_filter = "point";
		tex.mipmap_filter = "no";
	}
	tex.u_addressing = "repeat";
	tex.v_addressing = "repeat";
	return tex;
};
var arm_util_MaterialUtil = function() { };
$hxClasses["arm.util.MaterialUtil"] = arm_util_MaterialUtil;
arm_util_MaterialUtil.__name__ = "arm.util.MaterialUtil";
arm_util_MaterialUtil.removeMaterialCache = function() {
	var _this = iron_data_Data.cachedMaterials;
	if(Object.prototype.hasOwnProperty.call(_this.h,"SceneMaterial2")) {
		delete(_this.h["SceneMaterial2"]);
	}
	var _this = iron_data_Data.cachedShaders;
	if(Object.prototype.hasOwnProperty.call(_this.h,"Material2_data")) {
		delete(_this.h["Material2_data"]);
	}
	var _this = iron_data_Data.cachedSceneRaws;
	if(Object.prototype.hasOwnProperty.call(_this.h,"Material2_data")) {
		delete(_this.h["Material2_data"]);
	}
};
var arm_util_MeshUtil = function() { };
$hxClasses["arm.util.MeshUtil"] = arm_util_MeshUtil;
arm_util_MeshUtil.__name__ = "arm.util.MeshUtil";
arm_util_MeshUtil.mergeMesh = function() {
	var vlen = 0;
	var ilen = 0;
	var maxScale = 0.0;
	var paintObjects = arm_Project.paintObjects;
	var _g = 0;
	var _g1 = paintObjects.length;
	while(_g < _g1) {
		var i = _g++;
		vlen += paintObjects[i].data.raw.vertex_arrays[0].values.length;
		ilen += paintObjects[i].data.raw.index_arrays[0].values.length;
		if(paintObjects[i].data.scalePos > maxScale) {
			maxScale = paintObjects[i].data.scalePos;
		}
	}
	vlen = vlen / 4 | 0;
	var va0 = new Int16Array(vlen * 4);
	var va1 = new Int16Array(vlen * 2);
	var va2 = new Int16Array(vlen * 2);
	var va3 = paintObjects[0].data.raw.vertex_arrays.length > 3 ? new Int16Array(vlen * 3) : null;
	var ia = new Uint32Array(ilen);
	var voff = 0;
	var ioff = 0;
	var _g = 0;
	var _g1 = paintObjects.length;
	while(_g < _g1) {
		var i = _g++;
		var vas = paintObjects[i].data.raw.vertex_arrays;
		var ias = paintObjects[i].data.raw.index_arrays;
		var scale = paintObjects[i].data.scalePos;
		var _g2 = 0;
		var _g3 = vas[0].values.length;
		while(_g2 < _g3) {
			var j = _g2++;
			va0[j + voff * 4] = vas[0].values[j];
		}
		var _g4 = 0;
		var _g5 = va0.length / 4 | 0;
		while(_g4 < _g5) {
			var j1 = _g4++;
			va0[j1 * 4 + voff * 4] = va0[j1 * 4 + voff * 4] * scale / maxScale | 0;
			va0[j1 * 4 + 1 + voff * 4] = va0[j1 * 4 + 1 + voff * 4] * scale / maxScale | 0;
			va0[j1 * 4 + 2 + voff * 4] = va0[j1 * 4 + 2 + voff * 4] * scale / maxScale | 0;
		}
		var _g6 = 0;
		var _g7 = vas[1].values.length;
		while(_g6 < _g7) {
			var j2 = _g6++;
			va1[j2 + voff * 2] = vas[1].values[j2];
		}
		var _g8 = 0;
		var _g9 = vas[2].values.length;
		while(_g8 < _g9) {
			var j3 = _g8++;
			va2[j3 + voff * 2] = vas[2].values[j3];
		}
		if(va3 != null) {
			var _g10 = 0;
			var _g11 = vas[3].values.length;
			while(_g10 < _g11) {
				var j4 = _g10++;
				va3[j4 + voff * 4] = vas[3].values[j4];
			}
		}
		var _g12 = 0;
		var _g13 = ias[0].values.length;
		while(_g12 < _g13) {
			var j5 = _g12++;
			ia[j5 + ioff] = ias[0].values[j5] + voff;
		}
		voff += vas[0].values.length / 4 | 0;
		ioff += ias[0].values.length | 0;
	}
	var raw = { name : arm_Context.paintObject.name, vertex_arrays : [{ values : va0, attrib : "pos", data : "short4norm"},{ values : va1, attrib : "nor", data : "short2norm"},{ values : va2, attrib : "tex", data : "short2norm"}], index_arrays : [{ values : ia, material : 0}], scale_pos : maxScale, scale_tex : 1.0};
	if(va3 != null) {
		raw.vertex_arrays.push({ values : va3, attrib : "col", data : "short4norm", padding : 1});
	}
	new iron_data_MeshData(raw,function(md) {
		arm_Context.mergedObject = new iron_object_MeshObject(md,arm_Context.paintObject.materials);
		arm_Context.mergedObject.name = arm_Context.paintObject.name;
		arm_Context.mergedObject.force_context = "paint";
		arm_Context.mainObject().addChild(arm_Context.mergedObject);
	});
};
arm_util_MeshUtil.swapAxis = function(a,b) {
	var objects = arm_ui_UIHeader.inst.worktab.position == 3 ? [js_Boot.__cast(arm_Context.object , iron_object_MeshObject)] : arm_Project.paintObjects;
	var _g = 0;
	while(_g < objects.length) {
		var o = objects[_g];
		++_g;
		var vas = o.data.raw.vertex_arrays;
		var pa = vas[0].values;
		var na0 = a == 2 ? vas[0].values : vas[1].values;
		var na1 = b == 2 ? vas[0].values : vas[1].values;
		var c = a == 2 ? 3 : a;
		var d = b == 2 ? 3 : b;
		var e = a == 2 ? 4 : 2;
		var f = b == 2 ? 4 : 2;
		var _g1 = 0;
		var _g2 = pa.length / 4 | 0;
		while(_g1 < _g2) {
			var i = _g1++;
			var t = pa[i * 4 + a];
			pa[i * 4 + a] = pa[i * 4 + b];
			pa[i * 4 + b] = -t;
			t = na0[i * e + c];
			na0[i * e + c] = na1[i * f + d];
			na1[i * f + d] = -t;
		}
		var g = o.data.geom;
		var posbuf = g.vertexBufferMap.h["pos"];
		if(posbuf != null) {
			posbuf.delete();
			var _this = g.vertexBufferMap;
			if(Object.prototype.hasOwnProperty.call(_this.h,"pos")) {
				delete(_this.h["pos"]);
			}
		}
		var l = g.structLength;
		var vertices = g.vertexBuffer.lockInt16();
		var _g3 = 0;
		var _g4 = vertices.length / l | 0;
		while(_g3 < _g4) {
			var i1 = _g3++;
			vertices[i1 * l] = vas[0].values[i1 * 4];
			vertices[i1 * l + 1] = vas[0].values[i1 * 4 + 1];
			vertices[i1 * l + 2] = vas[0].values[i1 * 4 + 2];
			vertices[i1 * l + 3] = vas[0].values[i1 * 4 + 3];
			vertices[i1 * l + 4] = vas[1].values[i1 * 2];
			vertices[i1 * l + 5] = vas[1].values[i1 * 2 + 1];
		}
		g.vertexBuffer.unlock();
	}
	if(arm_Context.mergedObject != null) {
		arm_Context.mergedObject.remove();
		iron_data_Data.deleteMesh(arm_Context.mergedObject.data.handle);
		arm_Context.mergedObject = null;
	}
	arm_util_MeshUtil.mergeMesh();
};
arm_util_MeshUtil.flipNormals = function() {
	var objects = arm_ui_UIHeader.inst.worktab.position == 3 ? [js_Boot.__cast(arm_Context.object , iron_object_MeshObject)] : arm_Project.paintObjects;
	var _g = 0;
	while(_g < objects.length) {
		var g = objects[_g++].data.geom;
		var l = g.structLength;
		var vertices = g.vertexBuffer.lockInt16();
		var _g1 = 0;
		var _g2 = vertices.length / l | 0;
		while(_g1 < _g2) {
			var i = _g1++;
			vertices[i * l + 3] = -vertices[i * l + 3];
			vertices[i * l + 4] = -vertices[i * l + 4];
			vertices[i * l + 5] = -vertices[i * l + 5];
		}
		g.vertexBuffer.unlock();
	}
};
arm_util_MeshUtil.calcNormals = function() {
	var va_x = 0.0;
	var va_y = 0.0;
	var va_z = 0.0;
	var vb_x = 0.0;
	var vb_y = 0.0;
	var vb_z = 0.0;
	var vc_x = 0.0;
	var vc_y = 0.0;
	var vc_z = 0.0;
	var cb_x = 0.0;
	var cb_y = 0.0;
	var cb_z = 0.0;
	var ab_x = 0.0;
	var ab_y = 0.0;
	var ab_z = 0.0;
	var objects = arm_ui_UIHeader.inst.worktab.position == 3 ? [js_Boot.__cast(arm_Context.object , iron_object_MeshObject)] : arm_Project.paintObjects;
	var _g = 0;
	while(_g < objects.length) {
		var g = objects[_g++].data.geom;
		var l = g.structLength;
		var inda = g.indices[0];
		var vertices = g.vertexBuffer.lockInt16();
		var _g1 = 0;
		var _g2 = inda.length / 3 | 0;
		while(_g1 < _g2) {
			var i = _g1++;
			var i1 = inda[i * 3];
			var i2 = inda[i * 3 + 1];
			var i3 = inda[i * 3 + 2];
			va_x = vertices[i1 * l];
			va_y = vertices[i1 * l + 1];
			va_z = vertices[i1 * l + 2];
			vb_x = vertices[i2 * l];
			vb_y = vertices[i2 * l + 1];
			vb_z = vertices[i2 * l + 2];
			vc_x = vertices[i3 * l];
			vc_y = vertices[i3 * l + 1];
			vc_z = vertices[i3 * l + 2];
			cb_x = vc_x - vb_x;
			cb_y = vc_y - vb_y;
			cb_z = vc_z - vb_z;
			ab_x = va_x - vb_x;
			ab_y = va_y - vb_y;
			ab_z = va_z - vb_z;
			var ax = cb_x;
			var ay = cb_y;
			var az = cb_z;
			var vx = ab_x;
			var vy = ab_y;
			var vz = ab_z;
			cb_x = ay * vz - az * vy;
			cb_y = az * vx - ax * vz;
			cb_z = ax * vy - ay * vx;
			var n = Math.sqrt(cb_x * cb_x + cb_y * cb_y + cb_z * cb_z);
			if(n > 0.0) {
				var invN = 1.0 / n;
				cb_x *= invN;
				cb_y *= invN;
				cb_z *= invN;
			}
			vertices[i1 * l + 4] = cb_x * 32767 | 0;
			vertices[i1 * l + 5] = cb_y * 32767 | 0;
			vertices[i1 * l + 3] = cb_z * 32767 | 0;
			vertices[i2 * l + 4] = cb_x * 32767 | 0;
			vertices[i2 * l + 5] = cb_y * 32767 | 0;
			vertices[i2 * l + 3] = cb_z * 32767 | 0;
			vertices[i3 * l + 4] = cb_x * 32767 | 0;
			vertices[i3 * l + 5] = cb_y * 32767 | 0;
			vertices[i3 * l + 3] = cb_z * 32767 | 0;
		}
		g.vertexBuffer.unlock();
	}
};
var arm_node_NodesBrush = function() { };
$hxClasses["arm.node.NodesBrush"] = arm_node_NodesBrush;
arm_node_NodesBrush.__name__ = "arm.node.NodesBrush";
arm_node_NodesBrush.createNode = function(nodeType) {
	var _g = 0;
	var _g1 = arm_node_NodesBrush.list;
	while(_g < _g1.length) {
		var c = _g1[_g];
		++_g;
		var _g2 = 0;
		while(_g2 < c.length) {
			var n = c[_g2];
			++_g2;
			if(n.type == nodeType) {
				var canvas = arm_Context.brush.canvas;
				var node = arm_ui_UINodes.makeNode(n,arm_Context.brush.nodes,canvas);
				canvas.nodes.push(node);
				return node;
			}
		}
	}
	return null;
};
arm_node_NodesBrush.f32 = function(ar) {
	var res = new Float32Array(ar.length);
	var _g = 0;
	var _g1 = ar.length;
	while(_g < _g1) {
		var i = _g++;
		res[i] = ar[i];
	}
	return res;
};
var arm_shader_NodesMaterial = function() { };
$hxClasses["arm.shader.NodesMaterial"] = arm_shader_NodesMaterial;
arm_shader_NodesMaterial.__name__ = "arm.shader.NodesMaterial";
arm_shader_NodesMaterial.createNode = function(nodeType) {
	var _g = 0;
	var _g1 = arm_shader_NodesMaterial.list;
	while(_g < _g1.length) {
		var c = _g1[_g];
		++_g;
		var _g2 = 0;
		while(_g2 < c.length) {
			var n = c[_g2];
			++_g2;
			if(n.type == nodeType) {
				var material = arm_ui_UIHeader.inst.worktab.position == 3 ? arm_Context.materialScene : arm_Context.material;
				var canvas = material.canvas;
				var node = arm_ui_UINodes.makeNode(n,material.nodes,canvas);
				canvas.nodes.push(node);
				return node;
			}
		}
	}
	return null;
};
arm_shader_NodesMaterial.f32 = function(ar) {
	var res = new Float32Array(ar.length);
	var _g = 0;
	var _g1 = ar.length;
	while(_g < _g1) {
		var i = _g++;
		res[i] = ar[i];
	}
	return res;
};
var arm_sys_Path = function() { };
$hxClasses["arm.sys.Path"] = arm_sys_Path;
arm_sys_Path.__name__ = "arm.sys.Path";
arm_sys_Path.data = function() {
	return Krom.getFilesLocation() + arm_sys_Path.sep + iron_data_Data.dataPath;
};
arm_sys_Path.toRelative = function(from,to) {
	var a = from.split(arm_sys_Path.sep);
	var b = to.split(arm_sys_Path.sep);
	while(a[0] == b[0]) {
		a.shift();
		b.shift();
		if(a.length == 0 || b.length == 0) {
			break;
		}
	}
	var base = "";
	var _g = 0;
	var _g1 = a.length - 1;
	while(_g < _g1) {
		++_g;
		base += ".." + arm_sys_Path.sep;
	}
	base += b.join(arm_sys_Path.sep);
	return base;
};
arm_sys_Path.baseDir = function(path) {
	return HxOverrides.substr(path,0,path.lastIndexOf(arm_sys_Path.sep) + 1);
};
arm_sys_Path.isMesh = function(path) {
	var p = path.toLowerCase();
	var _g = 0;
	var _g1 = arm_sys_Path.meshFormats;
	while(_g < _g1.length) if(StringTools.endsWith(p,"." + _g1[_g++])) {
		return true;
	}
	return false;
};
arm_sys_Path.isTexture = function(path) {
	var p = path.toLowerCase();
	var _g = 0;
	var _g1 = arm_sys_Path.textureFormats;
	while(_g < _g1.length) if(StringTools.endsWith(p,"." + _g1[_g++])) {
		return true;
	}
	return false;
};
arm_sys_Path.isFont = function(path) {
	var p = path.toLowerCase();
	if(!(StringTools.endsWith(p,".ttf") || StringTools.endsWith(p,".ttc"))) {
		return StringTools.endsWith(p,".otf");
	} else {
		return true;
	}
};
arm_sys_Path.isProject = function(path) {
	return StringTools.endsWith(path.toLowerCase(),".arm");
};
arm_sys_Path.isPlugin = function(path) {
	return StringTools.endsWith(path.toLowerCase(),".js");
};
arm_sys_Path.isJson = function(path) {
	return StringTools.endsWith(path.toLowerCase(),".json");
};
arm_sys_Path.isKnown = function(path) {
	if(!(arm_sys_Path.isMesh(path) || arm_sys_Path.isTexture(path) || arm_sys_Path.isFont(path) || arm_sys_Path.isProject(path))) {
		return arm_sys_Path.isPlugin(path);
	} else {
		return true;
	}
};
arm_sys_Path.checkExt = function(p,exts) {
	p = StringTools.replace(p,"-","_");
	var _g = 0;
	while(_g < exts.length) if(StringTools.endsWith(p,"_" + exts[_g++])) {
		return true;
	}
	return false;
};
arm_sys_Path.isFolder = function(p) {
	return p.indexOf(".") == -1;
};
arm_sys_Path.isProtected = function() {
	return Krom.getFilesLocation().indexOf("Program Files") >= 0;
};
var arm_Project = function() { };
$hxClasses["arm.Project"] = arm_Project;
arm_Project.__name__ = "arm.Project";
arm_Project.projectOpen = function() {
	arm_ui_UIFiles.show("arm",false,function(path) {
		if(!StringTools.endsWith(path,".arm")) {
			arm_Log.error(arm_Strings.error5);
			return;
		}
		var current = kha_graphics4_Graphics2.current;
		if(current != null) {
			current.end();
		}
		arm_io_ImportArm.runProject(path);
		if(current != null) {
			current.begin(false);
		}
	});
};
arm_Project.projectOpenRecentBox = function() {
	arm_ui_UIBox.showCustom(function(ui) {
		if(ui.tab(zui_Handle.global.nest(12,null),arm_Translator.tr("Recent Projects"))) {
			var _g = 0;
			var _g1 = arm_Config.raw.recent_projects;
			while(_g < _g1.length) {
				var path = _g1[_g];
				++_g;
				if(ui.button(path,0)) {
					var current = kha_graphics4_Graphics2.current;
					if(current != null) {
						current.end();
					}
					arm_io_ImportArm.runProject(path);
					if(current != null) {
						current.begin(false);
					}
					arm_ui_UIBox.show = false;
				}
			}
			if(ui.button("Clear",0)) {
				arm_Config.raw.recent_projects = [];
				arm_Config.save();
			}
		}
	},400,320);
};
arm_Project.projectSave = function(saveAndQuit) {
	if(saveAndQuit == null) {
		saveAndQuit = false;
	}
	if(arm_Project.filepath == "") {
		arm_Project.projectSaveAs();
		return;
	}
	kha_Window.get(0).set_title(arm_ui_UIFiles.filename + " - ArmorPaint");
	iron_App.notifyOnInit(function() {
		arm_io_ExportArm.runProject();
		if(saveAndQuit) {
			kha_System.stop();
		}
	});
};
arm_Project.projectSaveAs = function() {
	arm_ui_UIFiles.show("arm",true,function(path) {
		var f = arm_ui_UIFiles.filename;
		if(f == "") {
			f = arm_Translator.tr("untitled");
		}
		arm_Project.filepath = path + arm_sys_Path.sep + f;
		if(!StringTools.endsWith(arm_Project.filepath,".arm")) {
			arm_Project.filepath += ".arm";
		}
		arm_Project.projectSave();
	});
};
arm_Project.projectNewBox = function() {
	arm_ui_UIBox.showCustom(function(ui) {
		if(ui.tab(zui_Handle.global.nest(13,null),arm_Translator.tr("New Project"))) {
			if(arm_Project.meshList == null) {
				arm_Project.meshList = arm_sys_File.readDirectory(arm_sys_Path.data() + arm_sys_Path.sep + "meshes");
				var _g = 0;
				var _g1 = arm_Project.meshList.length;
				while(_g < _g1) {
					var i = _g++;
					arm_Project.meshList[i] = HxOverrides.substr(arm_Project.meshList[i],0,arm_Project.meshList[i].length - 4);
				}
				arm_Project.meshList.unshift("plane");
				arm_Project.meshList.unshift("sphere");
				arm_Project.meshList.unshift("rounded_cube");
			}
			ui.row([0.5,0.5]);
			arm_Context.projectType = ui.combo(zui_Handle.global.nest(14,{ position : arm_Context.projectType}),arm_Project.meshList,arm_Translator.tr("Template"),true);
			arm_Context.projectAspectRatio = ui.combo(zui_Handle.global.nest(15,{ position : arm_Context.projectAspectRatio}),["1:1","2:1","1:2"],arm_Translator.tr("Aspect Ratio"),true);
			ui.endElement();
			ui.row([0.5,0.5]);
			if(ui.button(arm_Translator.tr("Cancel"))) {
				arm_ui_UIBox.show = false;
			}
			if(ui.button(arm_Translator.tr("OK")) || ui.isReturnDown) {
				arm_Project.projectNew();
				arm_util_ViewportUtil.scaleToBounds();
				arm_ui_UIBox.show = false;
				arm_App.redrawUI();
			}
		}
	});
};
arm_Project.projectNew = function(resetLayers) {
	if(resetLayers == null) {
		resetLayers = true;
	}
	kha_Window.get(0).set_title("ArmorPaint");
	arm_Project.filepath = "";
	if(arm_Context.mergedObject != null) {
		arm_Context.mergedObject.remove();
		iron_data_Data.deleteMesh(arm_Context.mergedObject.data.handle);
		arm_Context.mergedObject = null;
	}
	arm_util_ViewportUtil.resetViewport();
	arm_Context.layerPreviewDirty = true;
	arm_Context.layerFilter = 0;
	arm_Project.meshAssets = [];
	arm_Context.paintObject = arm_Context.mainObject();
	arm_Context.selectPaintObject(arm_Context.mainObject());
	var _g = 1;
	var _g1 = arm_Project.paintObjects.length;
	while(_g < _g1) {
		var p = arm_Project.paintObjects[_g++];
		if(p == arm_Context.paintObject) {
			continue;
		}
		iron_data_Data.deleteMesh(p.data.handle);
		p.remove();
	}
	var meshes = iron_Scene.active.meshes;
	var len = meshes.length;
	var _g = 0;
	while(_g < len) {
		var m = meshes[len - _g++ - 1];
		if(arm_Context.projectObjects.indexOf(m) == -1 && m.name != ".ParticleEmitter" && m.name != ".Particle") {
			iron_data_Data.deleteMesh(m.data.handle);
			m.remove();
		}
	}
	var handle = arm_Context.paintObject.data.handle;
	if(handle != "SceneSphere" && handle != "ScenePlane") {
		iron_data_Data.deleteMesh(handle);
	}
	if(arm_Context.projectType != 0) {
		var raw = null;
		if(arm_Context.projectType == 1 || arm_Context.projectType == 2) {
			var mesh = arm_Context.projectType == 1 ? new arm_geom_Sphere(1,512,256) : new arm_geom_Plane(1,1,512,512);
			raw = { name : "Tessellated", vertex_arrays : [{ values : mesh.posa, attrib : "pos", data : "short4norm"},{ values : mesh.nora, attrib : "nor", data : "short2norm"},{ values : mesh.texa, attrib : "tex", data : "short2norm"}], index_arrays : [{ values : mesh.inda, material : 0}], scale_pos : mesh.scalePos, scale_tex : mesh.scaleTex};
		} else {
			iron_data_Data.getBlob("meshes/" + arm_Project.meshList[arm_Context.projectType] + ".arm",function(b) {
				var i = new haxe_io_BytesInput(b.toBytes());
				i.set_bigEndian(false);
				raw = iron_system_ArmPack.read(i).mesh_datas[0];
			});
		}
		var md = new iron_data_MeshData(raw,function(md) {
		});
		iron_data_Data.cachedMeshes.h["SceneTessellated"] = md;
		if(arm_Context.projectType == 2) {
			arm_util_ViewportUtil.setView(0,0,5,0,0,0);
			arm_util_ViewportUtil.orbit(0,Math.PI / 6);
		}
	}
	var n = arm_Context.projectType == 0 ? "Cube" : "Tessellated";
	iron_data_Data.getMesh("Scene",n,function(md) {
		var current = kha_graphics4_Graphics2.current;
		if(current != null) {
			current.end();
		}
		arm_Context.pickerMaskHandle.position = 0;
		arm_Context.paintObject.setData(md);
		var _this = arm_Context.paintObject.transform.scale;
		_this.x = 1;
		_this.y = 1;
		_this.z = 1;
		_this.w = 1.0;
		arm_Context.paintObject.transform.buildMatrix();
		arm_Context.paintObject.name = n;
		arm_Project.paintObjects = [arm_Context.paintObject];
		while(arm_Project.materials.length > 0) arm_Project.materials.pop().unload();
		iron_data_Data.getMaterial("Scene","Material",function(m) {
			arm_Project.materials.push(new arm_data_MaterialSlot(m));
		});
		arm_Context.material = arm_Project.materials[0];
		arm_Project.brushes = [new arm_data_BrushSlot()];
		arm_Context.brush = arm_Project.brushes[0];
		var fontNames = arm_App.font.getFontNames();
		arm_Project.fonts = [new arm_data_FontSlot(fontNames.length > 0 ? fontNames[0] : "default.ttf",arm_App.font)];
		arm_Context.font = arm_Project.fonts[0];
		arm_History.reset();
		arm_node_MakeMaterial.parsePaintMaterial();
		arm_util_RenderUtil.makeMaterialPreview();
		var _g = 0;
		var _g1 = arm_Project.assets;
		while(_g < _g1.length) iron_data_Data.deleteImage(_g1[_g++].file);
		arm_Project.assets = [];
		arm_Project.assetNames = [];
		arm_Project.assetId = 0;
		arm_Context.ddirty = 4;
		arm_ui_UISidebar.inst.hwnd0.redraws = 2;
		arm_ui_UISidebar.inst.hwnd1.redraws = 2;
		arm_ui_UISidebar.inst.hwnd2.redraws = 2;
		if(resetLayers) {
			var aspectRatioChanged = arm_Project.layers[0].texpaint.get_width() != arm_Config.getTextureResX() || arm_Project.layers[0].texpaint.get_height() != arm_Config.getTextureResY();
			while(arm_Project.layers.length > 0) arm_Project.layers.pop().unload();
			var layer = new arm_data_LayerSlot();
			arm_Project.layers.push(layer);
			arm_Context.setLayer(layer);
			if(aspectRatioChanged) {
				iron_App.notifyOnInit(arm_Layers.resizeLayers);
			}
			iron_App.notifyOnInit(arm_Layers.initLayers);
		}
		if(current != null) {
			current.begin(false);
		}
		arm_Context.savedEnvmap = arm_Context.defaultEnvmap;
		iron_Scene.active.world.envmap = arm_Context.emptyEnvmap;
		iron_Scene.active.world.raw.envmap = "World_radiance.k";
		arm_Context.showEnvmapHandle.selected = arm_Context.showEnvmap = false;
		iron_Scene.active.world.probe.radiance = arm_Context.defaultRadiance;
		iron_Scene.active.world.probe.radianceMipmaps = arm_Context.defaultRadianceMipmaps;
		iron_Scene.active.world.probe.irradiance = arm_Context.defaultIrradiance;
		iron_Scene.active.world.probe.raw.strength = 4.0;
		arm_Context.initTool();
	});
};
arm_Project.importMaterial = function() {
	arm_ui_UIFiles.show("arm,blend",false,function(path) {
		if(StringTools.endsWith(path,".blend")) {
			arm_io_ImportBlend.runMaterial(path);
		} else {
			arm_io_ImportArm.runMaterial(path);
		}
	});
};
arm_Project.importBrush = function() {
	arm_ui_UIFiles.show("arm," + arm_sys_Path.textureFormats.join(","),false,function(path) {
		if(arm_sys_Path.isTexture(path)) {
			arm_io_ImportAsset.run(path);
			var assetIndex = 0;
			var _g = 0;
			var _g1 = arm_Project.assets.length;
			while(_g < _g1) {
				var i = _g++;
				if(arm_Project.assets[i].file == path) {
					assetIndex = i;
					break;
				}
			}
			arm_Context.brush = new arm_data_BrushSlot();
			arm_Project.brushes.push(arm_Context.brush);
			var n = arm_node_NodesBrush.createNode("TEX_IMAGE");
			n.x = 83;
			n.y = 340;
			n.buttons[0].default_value = assetIndex;
			var links = arm_Context.brush.canvas.links;
			links.push({ id : arm_Context.brush.nodes.getLinkId(links), from_id : n.id, from_socket : 0, to_id : 0, to_socket : 4});
			arm_node_MakeMaterial.parseBrush();
			arm_Context.parseBrushInputs();
			arm_ui_UINodes.inst.hwnd.redraws = 2;
			iron_App.notifyOnInit(function() {
				arm_util_RenderUtil.makeBrushPreview();
			});
		} else {
			arm_io_ImportArm.runBrush(path);
		}
	});
};
arm_Project.importMesh = function() {
	arm_ui_UIFiles.show(arm_sys_Path.meshFormats.join(","),false,function(path) {
		arm_Project.importMeshBox(path);
	});
};
arm_Project.importMeshBox = function(path) {
	arm_ui_UIBox.showCustom(function(ui) {
		if(ui.tab(zui_Handle.global.nest(16,null),arm_Translator.tr("Import Mesh"))) {
			if(StringTools.endsWith(path.toLowerCase(),".obj")) {
				arm_Context.splitBy = ui.combo(zui_Handle.global.nest(17,null),[arm_Translator.tr("Object"),arm_Translator.tr("Group"),arm_Translator.tr("Material"),arm_Translator.tr("UDIM Tile")],arm_Translator.tr("Split By"),true);
				if(ui.isHovered) {
					ui.tooltip(arm_Translator.tr("Split .obj mesh into objects"));
				}
			}
			if(StringTools.endsWith(path.toLowerCase(),".fbx")) {
				arm_Context.parseTransform = ui.check(zui_Handle.global.nest(18,{ selected : arm_Context.parseTransform}),arm_Translator.tr("Parse Transforms"));
				if(ui.isHovered) {
					ui.tooltip(arm_Translator.tr("Load per-object transforms from .fbx"));
				}
			}
			if(StringTools.endsWith(path.toLowerCase(),".fbx") || StringTools.endsWith(path.toLowerCase(),".blend")) {
				arm_Context.parseVCols = ui.check(zui_Handle.global.nest(19,{ selected : arm_Context.parseVCols}),arm_Translator.tr("Parse Vertex Colors"));
				if(ui.isHovered) {
					ui.tooltip(arm_Translator.tr("Import vertex color data"));
				}
			}
			ui.row([0.5,0.5]);
			if(ui.button(arm_Translator.tr("Cancel"))) {
				arm_ui_UIBox.show = false;
			}
			if(ui.button(arm_Translator.tr("Import")) || ui.isReturnDown) {
				arm_ui_UIBox.show = false;
				arm_App.redrawUI();
				arm_io_ImportMesh.run(path,true,arm_ui_UIHeader.inst.worktab.position != 3);
			}
		}
	});
	arm_ui_UIBox.clickToHide = false;
};
arm_Project.reimportMesh = function() {
	if(arm_Project.meshAssets != null && arm_Project.meshAssets.length > 0) {
		arm_io_ImportMesh.run(arm_Project.meshAssets[0],false);
		arm_Log.info("Mesh reimported.");
	} else {
		arm_Project.importAsset();
	}
};
arm_Project.importAsset = function(filters) {
	if(filters == null) {
		filters = arm_sys_Path.textureFormats.join(",") + "," + arm_sys_Path.meshFormats.join(",");
	}
	arm_ui_UIFiles.show(filters,false,function(path) {
		arm_io_ImportAsset.run(path);
	});
};
arm_Project.reimportTextures = function() {
	var _g = 0;
	var _g1 = arm_Project.assets;
	while(_g < _g1.length) {
		var asset = [_g1[_g]];
		++_g;
		iron_data_Data.deleteImage(asset[0].file);
		iron_data_Data.getImage(asset[0].file,(function(asset) {
			return function(image) {
				arm_Project.assetMap.h[asset[0].id] = image;
			};
		})(asset));
	}
};
arm_Project.getImage = function(asset) {
	if(asset != null) {
		return arm_Project.assetMap.h[asset.id];
	} else {
		return null;
	}
};
var arm_util_RenderUtil = function() { };
$hxClasses["arm.util.RenderUtil"] = arm_util_RenderUtil;
arm_util_RenderUtil.__name__ = "arm.util.RenderUtil";
arm_util_RenderUtil.makeMaterialPreview = function() {
	arm_Context.materialPreview = true;
	var sphere = iron_Scene.active.getChild(".Sphere");
	sphere.visible = true;
	var meshes = iron_Scene.active.meshes;
	iron_Scene.active.meshes = [sphere];
	var painto = arm_Context.paintObject;
	arm_Context.paintObject = sphere;
	if(arm_ui_UIHeader.inst.worktab.position == 3) {
		sphere.materials[0] = arm_Context.materialScene.data;
		arm_Context.materialScene.previewReady = true;
	} else {
		sphere.materials[0] = arm_Project.materials[0].data;
		arm_Context.material.previewReady = true;
	}
	var _this = arm_Context.savedCamera;
	var m = iron_Scene.active.camera.transform.local;
	_this.self._00 = m.self._00;
	_this.self._01 = m.self._01;
	_this.self._02 = m.self._02;
	_this.self._03 = m.self._03;
	_this.self._10 = m.self._10;
	_this.self._11 = m.self._11;
	_this.self._12 = m.self._12;
	_this.self._13 = m.self._13;
	_this.self._20 = m.self._20;
	_this.self._21 = m.self._21;
	_this.self._22 = m.self._22;
	_this.self._23 = m.self._23;
	_this.self._30 = m.self._30;
	_this.self._31 = m.self._31;
	_this.self._32 = m.self._32;
	_this.self._33 = m.self._33;
	iron_Scene.active.camera.transform.setMatrix(new iron_math_Mat4(0.9146286343879498,-0.0032648027153306235,0.404281837254303,0.4659988049397712,0.404295023959927,0.007367569133732468,-0.9145989516155143,-1.0687517188018691,0.000007410128652369705,0.9999675337275382,0.008058532943908717,0.015935682577325486,0,0,0,1));
	var savedFov = iron_Scene.active.camera.data.raw.fov;
	iron_Scene.active.camera.data.raw.fov = 0.92;
	arm_util_ViewportUtil.updateCameraType(0);
	var light = iron_Scene.active.lights[0];
	var savedLight = light.data.raw.strength;
	var probe = iron_Scene.active.world.probe;
	var savedProbe = probe.raw.strength;
	light.data.raw.strength = 1500;
	probe.raw.strength = 4;
	iron_Scene.active.world.envmap = arm_Context.previewEnvmap;
	iron_RenderPath.active.lastW = 256;
	iron_RenderPath.active.lastH = 256;
	iron_Scene.active.camera.buildProjection();
	iron_Scene.active.camera.buildMatrix();
	arm_node_MakeMaterial.parseMeshPreviewMaterial();
	var _commands = iron_RenderPath.active.commands;
	iron_RenderPath.active.commands = arm_render_RenderPathPreview.commandsPreview;
	iron_RenderPath.active.renderFrame(iron_RenderPath.active.frameG);
	iron_RenderPath.active.commands = _commands;
	arm_Context.materialPreview = false;
	iron_RenderPath.active.lastW = arm_App.w();
	iron_RenderPath.active.lastH = arm_App.h();
	sphere.visible = false;
	iron_Scene.active.meshes = meshes;
	arm_Context.paintObject = painto;
	iron_Scene.active.camera.transform.setMatrix(arm_Context.savedCamera);
	arm_util_ViewportUtil.updateCameraType(arm_Context.cameraType);
	iron_Scene.active.camera.data.raw.fov = savedFov;
	iron_Scene.active.camera.buildProjection();
	iron_Scene.active.camera.buildMatrix();
	light.data.raw.strength = savedLight;
	probe.raw.strength = savedProbe;
	iron_Scene.active.world.envmap = arm_Context.showEnvmap ? arm_Context.savedEnvmap : arm_Context.emptyEnvmap;
	arm_node_MakeMaterial.parseMeshMaterial();
	arm_Context.ddirty = 0;
};
arm_util_RenderUtil.makeDecalPreview = function() {
	var current = kha_graphics4_Graphics2.current;
	if(current != null) {
		current.end();
	}
	if(arm_Context.decalImage == null) {
		arm_Context.decalImage = kha_Image.createRenderTarget(512,512);
	}
	arm_Context.decalPreview = true;
	var plane = iron_Scene.active.getChild(".Plane");
	var _this = plane.transform.scale;
	_this.x = 1;
	_this.y = 1;
	_this.z = 1;
	_this.w = 1.0;
	var _this = plane.transform.rot;
	var f = -Math.PI / 2 / 2;
	var c1 = Math.cos(f);
	var s1 = Math.sin(f);
	f = 0.;
	var c2 = Math.cos(0.);
	var s2 = Math.sin(0.);
	f = 0.;
	var c3 = Math.cos(0.);
	var s3 = Math.sin(0.);
	_this.x = s1 * c2 * c3 + c1 * s2 * s3;
	_this.y = c1 * s2 * c3 + s1 * c2 * s3;
	_this.z = c1 * c2 * s3 - s1 * s2 * c3;
	_this.w = c1 * c2 * c3 - s1 * s2 * s3;
	plane.transform.buildMatrix();
	plane.visible = true;
	var meshes = iron_Scene.active.meshes;
	iron_Scene.active.meshes = [plane];
	var painto = arm_Context.paintObject;
	arm_Context.paintObject = plane;
	var _this = arm_Context.savedCamera;
	var m = iron_Scene.active.camera.transform.local;
	_this.self._00 = m.self._00;
	_this.self._01 = m.self._01;
	_this.self._02 = m.self._02;
	_this.self._03 = m.self._03;
	_this.self._10 = m.self._10;
	_this.self._11 = m.self._11;
	_this.self._12 = m.self._12;
	_this.self._13 = m.self._13;
	_this.self._20 = m.self._20;
	_this.self._21 = m.self._21;
	_this.self._22 = m.self._22;
	_this.self._23 = m.self._23;
	_this.self._30 = m.self._30;
	_this.self._31 = m.self._31;
	_this.self._32 = m.self._32;
	_this.self._33 = m.self._33;
	var m = new iron_math_Mat4(1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0);
	m.self._00 += 0 * m.self._03;
	m.self._01 += 0 * m.self._03;
	m.self._02 += m.self._03;
	m.self._10 += 0 * m.self._13;
	m.self._11 += 0 * m.self._13;
	m.self._12 += m.self._13;
	m.self._20 += 0 * m.self._23;
	m.self._21 += 0 * m.self._23;
	m.self._22 += m.self._23;
	m.self._30 += 0 * m.self._33;
	m.self._31 += 0 * m.self._33;
	m.self._32 += m.self._33;
	iron_Scene.active.camera.transform.setMatrix(m);
	var savedFov = iron_Scene.active.camera.data.raw.fov;
	iron_Scene.active.camera.data.raw.fov = 0.92;
	arm_util_ViewportUtil.updateCameraType(0);
	iron_Scene.active.lights[0].visible = false;
	iron_Scene.active.world.envmap = arm_Context.previewEnvmap;
	iron_RenderPath.active.lastW = 512;
	iron_RenderPath.active.lastH = 512;
	iron_Scene.active.camera.buildProjection();
	iron_Scene.active.camera.buildMatrix();
	arm_node_MakeMaterial.parseMeshPreviewMaterial();
	var _commands = iron_RenderPath.active.commands;
	iron_RenderPath.active.commands = arm_render_RenderPathPreview.commandsDecal;
	iron_RenderPath.active.renderFrame(iron_RenderPath.active.frameG);
	iron_RenderPath.active.commands = _commands;
	arm_Context.decalPreview = false;
	iron_RenderPath.active.lastW = arm_App.w();
	iron_RenderPath.active.lastH = arm_App.h();
	plane.visible = false;
	iron_Scene.active.meshes = meshes;
	arm_Context.paintObject = painto;
	iron_Scene.active.camera.transform.setMatrix(arm_Context.savedCamera);
	iron_Scene.active.camera.data.raw.fov = savedFov;
	arm_util_ViewportUtil.updateCameraType(arm_Context.cameraType);
	iron_Scene.active.camera.buildProjection();
	iron_Scene.active.camera.buildMatrix();
	iron_Scene.active.lights[0].visible = true;
	iron_Scene.active.world.envmap = arm_Context.showEnvmap ? arm_Context.savedEnvmap : arm_Context.emptyEnvmap;
	arm_node_MakeMaterial.parseMeshMaterial();
	arm_Context.ddirty = 1;
	if(current != null) {
		current.begin(false);
	}
};
arm_util_RenderUtil.makeTextPreview = function() {
	var current = kha_graphics4_Graphics2.current;
	if(current != null) {
		current.end();
	}
	var text = arm_Context.textToolText;
	var font = arm_Context.font.font;
	var textW = font.width(200,text) | 0;
	var textH = font.height(200) | 0;
	var texW = textW + 32;
	if(texW < 512) {
		texW = 512;
	}
	if(arm_Context.textToolImage != null && arm_Context.textToolImage.get_width() < texW) {
		arm_Context.textToolImage.unload();
		arm_Context.textToolImage = null;
	}
	if(arm_Context.textToolImage == null) {
		arm_Context.textToolImage = kha_Image.createRenderTarget(texW,texW,1);
	}
	var g2 = arm_Context.textToolImage.get_g2();
	g2.begin(true,-16777216);
	g2.set_font(font);
	g2.set_fontSize(200);
	g2.set_color(-1);
	g2.drawString(text,texW / 2 - textW / 2,texW / 2 - textH / 2);
	g2.end();
	if(current != null) {
		current.begin(false);
	}
};
arm_util_RenderUtil.makeFontPreview = function() {
	var current = kha_graphics4_Graphics2.current;
	if(current != null) {
		current.end();
	}
	var font = arm_Context.font.font;
	var textW = (font.width(120,"Abg") | 0) + 8;
	var textH = (font.height(120) | 0) + 8;
	if(arm_Context.font.image == null) {
		arm_Context.font.image = kha_Image.createRenderTarget(200,200,0);
	}
	var g2 = arm_Context.font.image.get_g2();
	g2.begin(true,0);
	g2.set_font(font);
	g2.set_fontSize(120);
	g2.set_color(-1);
	g2.drawString("Abg",100. - textW / 2,100. - textH / 2);
	g2.end();
	arm_Context.font.previewReady = true;
	if(current != null) {
		current.begin(false);
	}
};
arm_util_RenderUtil.makeBrushPreview = function() {
	if(arm_render_RenderPathPaint.liveLayerLocked) {
		return;
	}
	var current = kha_graphics4_Graphics2.current;
	if(current != null) {
		current.end();
	}
	if(arm_render_RenderPathPaint.liveLayer == null) {
		arm_render_RenderPathPaint.liveLayer = new arm_data_LayerSlot("_live");
		arm_render_RenderPathPaint.liveLayer.createMask(0);
	}
	var l = arm_render_RenderPathPaint.liveLayer;
	l.texpaint.get_g4().begin();
	l.texpaint.get_g4().clear(kha_Color.fromFloats(0.0,0.0,0.0,0.0));
	l.texpaint.get_g4().end();
	l.texpaint_nor.get_g4().begin();
	l.texpaint_nor.get_g4().clear(kha_Color.fromFloats(0.5,0.5,1.0,0.0));
	l.texpaint_nor.get_g4().end();
	l.texpaint_pack.get_g4().begin();
	l.texpaint_pack.get_g4().clear(kha_Color.fromFloats(1.0,0.0,0.0,0.0));
	l.texpaint_pack.get_g4().end();
	if(arm_Context.brush.image == null) {
		arm_Context.brush.image = kha_Image.createRenderTarget(256,256);
		arm_Context.brush.imageIcon = kha_Image.createRenderTarget(50,50);
	}
	var _material = arm_Context.material;
	arm_Context.material = new arm_data_MaterialSlot();
	var _tool = arm_Context.tool;
	arm_Context.tool = 0;
	arm_node_MakeMaterial.parsePaintMaterial();
	arm_render_RenderPathPaint.useLiveLayer(true);
	var path = iron_RenderPath.active;
	path.renderTargets.h["texpaint_undo" + (arm_History.undoI - 1 < 0 ? arm_Config.raw.undo_steps - 1 : arm_History.undoI - 1)] = path.renderTargets.h["empty_black"];
	var painto = arm_Context.paintObject;
	var visibles = [];
	var _g = 0;
	var _g1 = arm_Project.paintObjects;
	while(_g < _g1.length) {
		var p = _g1[_g];
		++_g;
		visibles.push(p.visible);
		p.visible = false;
	}
	var mergedObjectVisible = false;
	if(arm_Context.mergedObject != null) {
		mergedObjectVisible = arm_Context.mergedObject.visible;
		arm_Context.mergedObject.visible = false;
	}
	var cam = iron_Scene.active.camera;
	var _this = arm_Context.savedCamera;
	var m = cam.transform.local;
	_this.self._00 = m.self._00;
	_this.self._01 = m.self._01;
	_this.self._02 = m.self._02;
	_this.self._03 = m.self._03;
	_this.self._10 = m.self._10;
	_this.self._11 = m.self._11;
	_this.self._12 = m.self._12;
	_this.self._13 = m.self._13;
	_this.self._20 = m.self._20;
	_this.self._21 = m.self._21;
	_this.self._22 = m.self._22;
	_this.self._23 = m.self._23;
	_this.self._30 = m.self._30;
	_this.self._31 = m.self._31;
	_this.self._32 = m.self._32;
	_this.self._33 = m.self._33;
	var savedFov = cam.data.raw.fov;
	arm_util_ViewportUtil.updateCameraType(0);
	var m = new iron_math_Mat4(1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0);
	m.self._00 += 0 * m.self._03;
	m.self._01 += 0 * m.self._03;
	m.self._02 += 0.5 * m.self._03;
	m.self._10 += 0 * m.self._13;
	m.self._11 += 0 * m.self._13;
	m.self._12 += 0.5 * m.self._13;
	m.self._20 += 0 * m.self._23;
	m.self._21 += 0 * m.self._23;
	m.self._22 += 0.5 * m.self._23;
	m.self._30 += 0 * m.self._33;
	m.self._31 += 0 * m.self._33;
	m.self._32 += 0.5 * m.self._33;
	cam.transform.setMatrix(m);
	cam.data.raw.fov = 0.92;
	cam.buildProjection();
	cam.buildMatrix();
	var m1 = iron_Scene.active.camera.VP;
	var a00 = m1.self._00;
	var a01 = m1.self._01;
	var a02 = m1.self._02;
	var a03 = m1.self._03;
	var a10 = m1.self._10;
	var a11 = m1.self._11;
	var a12 = m1.self._12;
	var a13 = m1.self._13;
	var a20 = m1.self._20;
	var a21 = m1.self._21;
	var a22 = m1.self._22;
	var a23 = m1.self._23;
	var a30 = m1.self._30;
	var a31 = m1.self._31;
	var a32 = m1.self._32;
	var a33 = m1.self._33;
	var b00 = a00 * a11 - a01 * a10;
	var b01 = a00 * a12 - a02 * a10;
	var b02 = a00 * a13 - a03 * a10;
	var b03 = a01 * a12 - a02 * a11;
	var b04 = a01 * a13 - a03 * a11;
	var b05 = a02 * a13 - a03 * a12;
	var b06 = a20 * a31 - a21 * a30;
	var b07 = a20 * a32 - a22 * a30;
	var b08 = a20 * a33 - a23 * a30;
	var b09 = a21 * a32 - a22 * a31;
	var b10 = a21 * a33 - a23 * a31;
	var b11 = a22 * a33 - a23 * a32;
	var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;
	if(det == 0.0) {
		m.self._00 = 1.0;
		m.self._01 = 0.0;
		m.self._02 = 0.0;
		m.self._03 = 0.0;
		m.self._10 = 0.0;
		m.self._11 = 1.0;
		m.self._12 = 0.0;
		m.self._13 = 0.0;
		m.self._20 = 0.0;
		m.self._21 = 0.0;
		m.self._22 = 1.0;
		m.self._23 = 0.0;
		m.self._30 = 0.0;
		m.self._31 = 0.0;
		m.self._32 = 0.0;
		m.self._33 = 1.0;
	} else {
		det = 1.0 / det;
		m.self._00 = (a11 * b11 - a12 * b10 + a13 * b09) * det;
		m.self._01 = (a02 * b10 - a01 * b11 - a03 * b09) * det;
		m.self._02 = (a31 * b05 - a32 * b04 + a33 * b03) * det;
		m.self._03 = (a22 * b04 - a21 * b05 - a23 * b03) * det;
		m.self._10 = (a12 * b08 - a10 * b11 - a13 * b07) * det;
		m.self._11 = (a00 * b11 - a02 * b08 + a03 * b07) * det;
		m.self._12 = (a32 * b02 - a30 * b05 - a33 * b01) * det;
		m.self._13 = (a20 * b05 - a22 * b02 + a23 * b01) * det;
		m.self._20 = (a10 * b10 - a11 * b08 + a13 * b06) * det;
		m.self._21 = (a01 * b08 - a00 * b10 - a03 * b06) * det;
		m.self._22 = (a30 * b04 - a31 * b02 + a33 * b00) * det;
		m.self._23 = (a21 * b02 - a20 * b04 - a23 * b00) * det;
		m.self._30 = (a11 * b07 - a10 * b09 - a12 * b06) * det;
		m.self._31 = (a00 * b09 - a01 * b07 + a02 * b06) * det;
		m.self._32 = (a31 * b01 - a30 * b03 - a32 * b00) * det;
		m.self._33 = (a20 * b03 - a21 * b01 + a22 * b00) * det;
	}
	var planeo = iron_Scene.active.getChild(".Plane");
	planeo.visible = true;
	arm_Context.paintObject = planeo;
	var x = m.self._00;
	var y = m.self._01;
	var z = m.self._02;
	var sx = Math.sqrt(x * x + y * y + z * z);
	var _this = planeo.transform.rot;
	var f = -Math.PI / 2 / 2;
	var c1 = Math.cos(f);
	var s1 = Math.sin(f);
	f = 0.;
	var c2 = Math.cos(0.);
	var s2 = Math.sin(0.);
	f = 0.;
	var c3 = Math.cos(0.);
	var s3 = Math.sin(0.);
	_this.x = s1 * c2 * c3 + c1 * s2 * s3;
	_this.y = c1 * s2 * c3 + s1 * c2 * s3;
	_this.z = c1 * c2 * s3 - s1 * s2 * c3;
	_this.w = c1 * c2 * c3 - s1 * s2 * s3;
	var _this = planeo.transform.scale;
	_this.x = sx;
	_this.y = 1.0;
	_this.z = sx;
	_this.w = 1.0;
	var _this = planeo.transform.loc;
	_this.x = m.self._30;
	_this.y = -m.self._31;
	_this.z = 0.0;
	_this.w = 1.0;
	planeo.transform.buildMatrix();
	arm_render_RenderPathPaint.liveLayerDrawn = 0;
	arm_render_RenderPathDeferred.drawGbuffer();
	var _brushRadius = arm_Context.brushRadius;
	var _brushOpacity = arm_Context.brushOpacity;
	var _brushHardness = arm_Context.brushHardness;
	arm_Context.brushRadius = 0.25;
	arm_Context.brushOpacity = 1.0;
	arm_Context.brushHardness = 0.8;
	var _x = arm_Context.paintVec.x;
	var _y = arm_Context.paintVec.y;
	var _lastX = arm_Context.lastPaintVecX;
	var _lastY = arm_Context.lastPaintVecY;
	var _pdirty = arm_Context.pdirty;
	arm_Context.pdirty = 2;
	var pointsX = [0.2,0.2,0.35,0.5,0.5,0.5,0.65,0.8,0.8,0.8];
	var pointsY = [0.5,0.5,0.35,0.2,0.4,0.6,0.45,0.3,0.5,0.7];
	var _g = 1;
	var _g1 = pointsX.length;
	while(_g < _g1) {
		var i = _g++;
		arm_Context.lastPaintVecX = pointsX[i - 1];
		arm_Context.lastPaintVecY = pointsY[i - 1];
		arm_Context.paintVec.x = pointsX[i];
		arm_Context.paintVec.y = pointsY[i];
		arm_Context.parseBrushInputs();
		arm_render_RenderPathPaint.commandsPaint();
	}
	arm_Context.brushRadius = _brushRadius;
	arm_Context.brushOpacity = _brushOpacity;
	arm_Context.brushHardness = _brushHardness;
	arm_Context.paintVec.x = _x;
	arm_Context.paintVec.y = _y;
	arm_Context.lastPaintVecX = _lastX;
	arm_Context.lastPaintVecY = _lastY;
	arm_Context.prevPaintVecX = -1;
	arm_Context.prevPaintVecY = -1;
	arm_Context.pdirty = _pdirty;
	arm_Context.material = _material;
	arm_Context.tool = _tool;
	iron_App.notifyOnInit(function() {
		arm_node_MakeMaterial.parsePaintMaterial();
	});
	planeo.visible = false;
	var _g = 0;
	var _g1 = arm_Project.paintObjects.length;
	while(_g < _g1) {
		var i = _g++;
		arm_Project.paintObjects[i].visible = visibles[i];
	}
	if(arm_Context.mergedObject != null) {
		arm_Context.mergedObject.visible = mergedObjectVisible;
	}
	arm_Context.paintObject = painto;
	iron_Scene.active.camera.transform.setMatrix(arm_Context.savedCamera);
	iron_Scene.active.camera.data.raw.fov = savedFov;
	arm_util_ViewportUtil.updateCameraType(arm_Context.cameraType);
	iron_Scene.active.camera.buildProjection();
	iron_Scene.active.camera.buildMatrix();
	arm_render_RenderPathPaint.useLiveLayer(false);
	if(arm_Layers.pipeMerge == null) {
		arm_Layers.makePipe();
	}
	var l = arm_render_RenderPathPaint.liveLayer;
	var target = arm_Context.brush.image;
	target.get_g2().begin(true,0);
	target.get_g2().set_pipeline(arm_Layers.pipeCopy);
	target.get_g2().drawScaledImage(l.texpaint,0,0,target.get_width(),target.get_height());
	target.get_g2().set_pipeline(null);
	target.get_g2().end();
	path.renderTargets.h["texpreview"].image = arm_Context.brush.image;
	path.renderTargets.h["texpreview_icon"].image = arm_Context.brush.imageIcon;
	path.setTarget("texpreview_icon");
	path.bindTarget("texpreview","tex");
	path.drawShader("shader_datas/supersample_resolve/supersample_resolve");
	arm_Context.brush.previewReady = true;
	arm_Context.brushBlendDirty = true;
	if(current != null) {
		current.begin(false);
	}
};
arm_util_RenderUtil.createScreenAlignedFullData = function() {
	var data = [-10922,-10922,0,32767,0,0,0,0,0,0,0,0,32767,-10922,0,32767,0,0,0,0,0,0,0,0,-10922,32767,0,32767,0,0,0,0,0,0,0,0];
	var indices = [0,1,2];
	var structure = new kha_graphics4_VertexStructure();
	structure.add("pos",6);
	structure.add("nor",5);
	structure.add("tex",5);
	structure.add("col",6);
	arm_util_RenderUtil.screenAlignedFullVB = new kha_graphics4_VertexBuffer(data.length / (structure.byteSize() / 4 | 0) | 0,structure,0);
	var vertices = arm_util_RenderUtil.screenAlignedFullVB.lockInt16();
	var _g = 0;
	var _g1 = vertices.length;
	while(_g < _g1) {
		var i = _g++;
		vertices[i] = data[i];
	}
	arm_util_RenderUtil.screenAlignedFullVB.unlock();
	arm_util_RenderUtil.screenAlignedFullIB = new kha_graphics4_IndexBuffer(indices.length,0);
	var id = arm_util_RenderUtil.screenAlignedFullIB.lock();
	var _g = 0;
	var _g1 = id.length;
	while(_g < _g1) {
		var i = _g++;
		id[i] = indices[i];
	}
	arm_util_RenderUtil.screenAlignedFullIB.unlock();
};
arm_util_RenderUtil.makeNodePreview = function(canvas,node,image) {
	var res = arm_node_MakeMaterial.parseNodePreviewMaterial(node);
	if(res == null || res.scon == null) {
		return;
	}
	var g4 = image.get_g4();
	if(arm_util_RenderUtil.screenAlignedFullVB == null) {
		arm_util_RenderUtil.createScreenAlignedFullData();
	}
	var _scaleWorld = arm_Context.paintObject.transform.scaleWorld;
	arm_Context.paintObject.transform.scaleWorld = 3.0;
	arm_Context.paintObject.transform.buildMatrix();
	g4.begin();
	g4.setPipeline(res.scon.pipeState);
	iron_object_Uniforms.setContextConstants(g4,res.scon,[""]);
	iron_object_Uniforms.setObjectConstants(g4,res.scon,arm_Context.paintObject);
	iron_object_Uniforms.setMaterialConstants(g4,res.scon,res.mcon);
	g4.setVertexBuffer(arm_util_RenderUtil.screenAlignedFullVB);
	g4.setIndexBuffer(arm_util_RenderUtil.screenAlignedFullIB);
	g4.drawIndexedVertices();
	g4.end();
	arm_Context.paintObject.transform.scaleWorld = _scaleWorld;
	arm_Context.paintObject.transform.buildMatrix();
};
var arm_Res = function() { };
$hxClasses["arm.Res"] = arm_Res;
arm_Res.__name__ = "arm.Res";
arm_Res.load = function(names,done) {
	var loaded = 0;
	var _g = 0;
	while(_g < names.length) {
		var s = [names[_g]];
		++_g;
		iron_data_Data.getImage(s[0],(function(s) {
			return function(image) {
				arm_Res.bundled.h[s[0]] = image;
				loaded += 1;
				if(loaded == names.length) {
					done();
				}
			};
		})(s));
	}
};
arm_Res.tile50 = function(img,x,y) {
	var size = arm_ui_UISidebar.inst.ui.ops.scaleFactor > 1 ? 100 : 50;
	return { x : x * size, y : y * size, w : size, h : size};
};
arm_Res.tile18 = function(img,x,y) {
	var size = arm_ui_UISidebar.inst.ui.ops.scaleFactor > 1 ? 36 : 18;
	return { x : x * size, y : img.get_height() - (y + 1) * size, w : size, h : size};
};
var kha_Scheduler = function() { };
$hxClasses["kha.Scheduler"] = kha_Scheduler;
kha_Scheduler.__name__ = "kha.Scheduler";
kha_Scheduler.init = function() {
	kha_Scheduler.deltas = [];
	var _g = 0;
	var _g1 = kha_Scheduler.DIF_COUNT;
	while(_g < _g1) kha_Scheduler.deltas[_g++] = 0;
	kha_Scheduler.stopped = true;
	kha_Scheduler.frame_tasks_sorted = true;
	kha_Scheduler.current = kha_Scheduler.lastTime = kha_Scheduler.lastFrameEnd = kha_Scheduler.realTime();
	kha_Scheduler.currentFrameTaskId = 0;
	kha_Scheduler.currentTimeTaskId = 0;
	kha_Scheduler.currentGroupId = 0;
	kha_Scheduler.timeTasks = [];
	kha_Scheduler.pausedTimeTasks = [];
	kha_Scheduler.outdatedTimeTasks = [];
	kha_Scheduler.timeTasksScratchpad = [];
	kha_Scheduler.frameTasks = [];
	kha_Scheduler.toDeleteFrame = [];
};
kha_Scheduler.start = function(restartTimers) {
	if(restartTimers == null) {
		restartTimers = false;
	}
	kha_Scheduler.vsync = kha_Window.get(0).get_vSynced();
	var hz = kha_Display.get_primary() != null ? kha_Display.get_primary().get_frequency() : 60;
	if(hz >= 57 && hz <= 63) {
		hz = 60;
	}
	kha_Scheduler.onedifhz = 1.0 / hz;
	kha_Scheduler.stopped = false;
	kha_Scheduler.resetTime();
	kha_Scheduler.lastTime = kha_Scheduler.realTime() - kha_Scheduler.startTime;
	var _g = 0;
	var _g1 = kha_Scheduler.DIF_COUNT;
	while(_g < _g1) kha_Scheduler.deltas[_g++] = 0;
	if(restartTimers) {
		var _g = 0;
		var _g1 = kha_Scheduler.timeTasks;
		while(_g < _g1.length) _g1[_g++].paused = false;
		var _g = 0;
		var _g1 = kha_Scheduler.frameTasks;
		while(_g < _g1.length) _g1[_g++].paused = false;
	}
};
kha_Scheduler.executeFrame = function() {
	var delta = kha_Scheduler.realTime() - kha_Scheduler.startTime - kha_Scheduler.lastTime;
	var frameEnd = kha_Scheduler.lastFrameEnd;
	if(delta >= 0) {
		if(delta > kha_Scheduler.maxframetime) {
			kha_Scheduler.startTime += delta - kha_Scheduler.maxframetime;
			delta = kha_Scheduler.maxframetime;
			frameEnd += delta;
		} else if(kha_Scheduler.vsync) {
			var realdif = kha_Scheduler.onedifhz;
			while(realdif < delta - kha_Scheduler.onedifhz) realdif += kha_Scheduler.onedifhz;
			delta = realdif;
			var _g = 0;
			var _g1 = kha_Scheduler.DIF_COUNT - 2;
			while(_g < _g1) {
				var i = _g++;
				delta += kha_Scheduler.deltas[i];
				kha_Scheduler.deltas[i] = kha_Scheduler.deltas[i + 1];
			}
			delta += kha_Scheduler.deltas[kha_Scheduler.DIF_COUNT - 2];
			delta /= kha_Scheduler.DIF_COUNT;
			kha_Scheduler.deltas[kha_Scheduler.DIF_COUNT - 2] = realdif;
			frameEnd += delta;
		} else {
			var _g = 0;
			var _g1 = kha_Scheduler.DIF_COUNT - 1;
			while(_g < _g1) {
				var i = _g++;
				kha_Scheduler.deltas[i] = kha_Scheduler.deltas[i + 1];
			}
			kha_Scheduler.deltas[kha_Scheduler.DIF_COUNT - 1] = delta;
			var next = 0;
			var _g = 0;
			var _g1 = kha_Scheduler.DIF_COUNT;
			while(_g < _g1) next += kha_Scheduler.deltas[_g++];
			next /= kha_Scheduler.DIF_COUNT;
			frameEnd += next;
		}
		kha_Scheduler.lastTime = frameEnd;
		if(!kha_Scheduler.stopped) {
			kha_Scheduler.lastFrameEnd = frameEnd;
		}
		var _g = 0;
		var _g1 = kha_Scheduler.pausedTimeTasks;
		while(_g < _g1.length) _g1[_g++].next += delta;
		if(kha_Scheduler.stopped) {
			var _g = 0;
			var _g1 = kha_Scheduler.timeTasks;
			while(_g < _g1.length) _g1[_g++].next += delta;
		}
		kha_Scheduler.executeTimeTasks(frameEnd);
		var _g = 0;
		var _g1 = kha_Scheduler.outdatedTimeTasks;
		while(_g < _g1.length) {
			var task = _g1[_g];
			++_g;
			if(task.next < frameEnd - 10.0) {
				kha_Scheduler.timeTasksScratchpad.push(task);
			}
		}
		var _g = 0;
		var _g1 = kha_Scheduler.timeTasksScratchpad;
		while(_g < _g1.length) HxOverrides.remove(kha_Scheduler.outdatedTimeTasks,_g1[_g++]);
		while(kha_Scheduler.timeTasksScratchpad.length > 0) HxOverrides.remove(kha_Scheduler.timeTasksScratchpad,kha_Scheduler.timeTasksScratchpad[0]);
	}
	kha_Scheduler.current = frameEnd;
	kha_Scheduler.sortFrameTasks();
	var _g = 0;
	var _g1 = kha_Scheduler.frameTasks;
	while(_g < _g1.length) {
		var frameTask = _g1[_g];
		++_g;
		if(!kha_Scheduler.stopped && !frameTask.paused && frameTask.active) {
			if(!frameTask.task()) {
				frameTask.active = false;
			}
		}
	}
	var _g = 0;
	var _g1 = kha_Scheduler.frameTasks;
	while(_g < _g1.length) {
		var frameTask = _g1[_g];
		++_g;
		if(!frameTask.active) {
			kha_Scheduler.toDeleteFrame.push(frameTask);
		}
	}
	while(kha_Scheduler.toDeleteFrame.length > 0) HxOverrides.remove(kha_Scheduler.frameTasks,kha_Scheduler.toDeleteFrame.pop());
};
kha_Scheduler.executeTimeTasks = function(until) {
	while(kha_Scheduler.timeTasks.length > 0) {
		kha_Scheduler.activeTimeTask = kha_Scheduler.timeTasks[0];
		if(kha_Scheduler.activeTimeTask.next <= until) {
			kha_Scheduler.current = kha_Scheduler.activeTimeTask.next;
			kha_Scheduler.activeTimeTask.next += kha_Scheduler.activeTimeTask.period;
			HxOverrides.remove(kha_Scheduler.timeTasks,kha_Scheduler.activeTimeTask);
			if(kha_Scheduler.activeTimeTask.active && kha_Scheduler.activeTimeTask.task()) {
				if(kha_Scheduler.activeTimeTask.period > 0 && (kha_Scheduler.activeTimeTask.duration == 0 || kha_Scheduler.activeTimeTask.duration >= kha_Scheduler.activeTimeTask.start + kha_Scheduler.activeTimeTask.next)) {
					kha_Scheduler.insertSorted(kha_Scheduler.timeTasks,kha_Scheduler.activeTimeTask);
				}
			} else {
				kha_Scheduler.activeTimeTask.active = false;
			}
		} else {
			break;
		}
	}
	kha_Scheduler.activeTimeTask = null;
};
kha_Scheduler.time = function() {
	return kha_Scheduler.current;
};
kha_Scheduler.realTime = function() {
	return kha_System.get_time();
};
kha_Scheduler.resetTime = function() {
	var now = kha_System.get_time();
	var dif = now - kha_Scheduler.startTime;
	kha_Scheduler.startTime = now;
	var _g = 0;
	var _g1 = kha_Scheduler.timeTasks;
	while(_g < _g1.length) {
		var timeTask = _g1[_g];
		++_g;
		timeTask.start -= dif;
		timeTask.next -= dif;
	}
	var _g = 0;
	var _g1 = kha_Scheduler.DIF_COUNT;
	while(_g < _g1) kha_Scheduler.deltas[_g++] = 0;
	kha_Scheduler.current = 0;
	kha_Scheduler.lastTime = 0;
	kha_Scheduler.lastFrameEnd = 0;
};
kha_Scheduler.addBreakableTimeTaskToGroup = function(groupId,task,start,period,duration) {
	if(duration == null) {
		duration = 0;
	}
	if(period == null) {
		period = 0;
	}
	var t = new kha_TimeTask();
	t.active = true;
	t.task = task;
	t.id = ++kha_Scheduler.currentTimeTaskId;
	t.groupId = groupId;
	t.start = kha_Scheduler.current + start;
	t.period = 0;
	if(period != 0) {
		t.period = period;
	}
	t.duration = 0;
	if(duration != 0) {
		t.duration = t.start + duration;
	}
	t.next = t.start;
	kha_Scheduler.insertSorted(kha_Scheduler.timeTasks,t);
	return t.id;
};
kha_Scheduler.addTimeTaskToGroup = function(groupId,task,start,period,duration) {
	if(duration == null) {
		duration = 0;
	}
	if(period == null) {
		period = 0;
	}
	return kha_Scheduler.addBreakableTimeTaskToGroup(groupId,function() {
		task();
		return true;
	},start,period,duration);
};
kha_Scheduler.addTimeTask = function(task,start,period,duration) {
	if(duration == null) {
		duration = 0;
	}
	if(period == null) {
		period = 0;
	}
	return kha_Scheduler.addTimeTaskToGroup(0,task,start,period,duration);
};
kha_Scheduler.insertSorted = function(list,task) {
	var _g = 0;
	var _g1 = list.length;
	while(_g < _g1) {
		var i = _g++;
		if(list[i].next > task.next) {
			list.splice(i,0,task);
			return;
		}
	}
	list.push(task);
};
kha_Scheduler.sortFrameTasks = function() {
	if(kha_Scheduler.frame_tasks_sorted) {
		return;
	}
	kha_Scheduler.frameTasks.sort(function(a,b) {
		if(a.priority > b.priority) {
			return 1;
		} else if(a.priority < b.priority) {
			return -1;
		} else {
			return 0;
		}
	});
	kha_Scheduler.frame_tasks_sorted = true;
};
var js_Boot = function() { };
$hxClasses["js.Boot"] = js_Boot;
js_Boot.__name__ = "js.Boot";
js_Boot.getClass = function(o) {
	if(o == null) {
		return null;
	} else if(((o) instanceof Array)) {
		return Array;
	} else {
		var cl = o.__class__;
		if(cl != null) {
			return cl;
		}
		var name = js_Boot.__nativeClassName(o);
		if(name != null) {
			return js_Boot.__resolveNativeClass(name);
		}
		return null;
	}
};
js_Boot.__string_rec = function(o,s) {
	if(o == null) {
		return "null";
	}
	if(s.length >= 5) {
		return "<...>";
	}
	var t = typeof(o);
	if(t == "function" && (o.__name__ || o.__ename__)) {
		t = "object";
	}
	switch(t) {
	case "function":
		return "<function>";
	case "object":
		if(o.__enum__) {
			var e = $hxEnums[o.__enum__];
			var n = e.__constructs__[o._hx_index];
			var con = e[n];
			if(con.__params__) {
				s = s + "\t";
				return n + "(" + ((function($this) {
					var $r;
					var _g = [];
					{
						var _g1 = 0;
						var _g2 = con.__params__;
						while(true) {
							if(!(_g1 < _g2.length)) {
								break;
							}
							var p = _g2[_g1];
							_g1 = _g1 + 1;
							_g.push(js_Boot.__string_rec(o[p],s));
						}
					}
					$r = _g;
					return $r;
				}(this))).join(",") + ")";
			} else {
				return n;
			}
		}
		if(((o) instanceof Array)) {
			var str = "[";
			s += "\t";
			var _g = 0;
			var _g1 = o.length;
			while(_g < _g1) {
				var i = _g++;
				str += (i > 0 ? "," : "") + js_Boot.__string_rec(o[i],s);
			}
			str += "]";
			return str;
		}
		var tostr;
		try {
			tostr = o.toString;
		} catch( _g ) {
			return "???";
		}
		if(tostr != null && tostr != Object.toString && typeof(tostr) == "function") {
			var s2 = o.toString();
			if(s2 != "[object Object]") {
				return s2;
			}
		}
		var str = "{\n";
		s += "\t";
		var hasp = o.hasOwnProperty != null;
		var k = null;
		for( k in o ) {
		if(hasp && !o.hasOwnProperty(k)) {
			continue;
		}
		if(k == "prototype" || k == "__class__" || k == "__super__" || k == "__interfaces__" || k == "__properties__") {
			continue;
		}
		if(str.length != 2) {
			str += ", \n";
		}
		str += s + k + " : " + js_Boot.__string_rec(o[k],s);
		}
		s = s.substring(1);
		str += "\n" + s + "}";
		return str;
	case "string":
		return o;
	default:
		return String(o);
	}
};
js_Boot.__interfLoop = function(cc,cl) {
	while(true) {
		if(cc == null) {
			return false;
		}
		if(cc == cl) {
			return true;
		}
		var intf = cc.__interfaces__;
		if(intf != null) {
			var _g = 0;
			var _g1 = intf.length;
			while(_g < _g1) {
				var i = intf[_g++];
				if(i == cl || js_Boot.__interfLoop(i,cl)) {
					return true;
				}
			}
		}
		cc = cc.__super__;
	}
};
js_Boot.__instanceof = function(o,cl) {
	if(cl == null) {
		return false;
	}
	switch(cl) {
	case Array:
		return ((o) instanceof Array);
	case Bool:
		return typeof(o) == "boolean";
	case Dynamic:
		return o != null;
	case Float:
		return typeof(o) == "number";
	case Int:
		if(typeof(o) == "number") {
			return ((o | 0) === o);
		} else {
			return false;
		}
		break;
	case String:
		return typeof(o) == "string";
	default:
		if(o != null) {
			if(typeof(cl) == "function") {
				if(js_Boot.__downcastCheck(o,cl)) {
					return true;
				}
			} else if(typeof(cl) == "object" && js_Boot.__isNativeObj(cl)) {
				if(((o) instanceof cl)) {
					return true;
				}
			}
		} else {
			return false;
		}
		if(cl == Class ? o.__name__ != null : false) {
			return true;
		}
		if(cl == Enum ? o.__ename__ != null : false) {
			return true;
		}
		return o.__enum__ != null ? $hxEnums[o.__enum__] == cl : false;
	}
};
js_Boot.__downcastCheck = function(o,cl) {
	if(!((o) instanceof cl)) {
		if(cl.__isInterface__) {
			return js_Boot.__interfLoop(js_Boot.getClass(o),cl);
		} else {
			return false;
		}
	} else {
		return true;
	}
};
js_Boot.__cast = function(o,t) {
	if(o == null || js_Boot.__instanceof(o,t)) {
		return o;
	} else {
		throw haxe_Exception.thrown("Cannot cast " + Std.string(o) + " to " + Std.string(t));
	}
};
js_Boot.__nativeClassName = function(o) {
	var name = js_Boot.__toStr.call(o).slice(8,-1);
	if(name == "Object" || name == "Function" || name == "Math" || name == "JSON") {
		return null;
	}
	return name;
};
js_Boot.__isNativeObj = function(o) {
	return js_Boot.__nativeClassName(o) != null;
};
js_Boot.__resolveNativeClass = function(name) {
	return $global[name];
};
var arm_ui_UIFiles = function() { };
$hxClasses["arm.ui.UIFiles"] = arm_ui_UIFiles;
arm_ui_UIFiles.__name__ = "arm.ui.UIFiles";
arm_ui_UIFiles.show = function(filters,isSave,filesDone) {
	if(!arm_Config.raw.native_file_browser) {
		if(arm_ui_UIFiles.path == null) {
			arm_ui_UIFiles.path = "C:\\Users";
		}
		arm_ui_UIFiles.showCustom(filters,isSave,filesDone);
		return;
	}
	arm_ui_UIFiles.path = isSave ? Krom.saveDialog(filters,"") : Krom.openDialog(filters,"");
	if(arm_ui_UIFiles.path != null) {
		while(arm_ui_UIFiles.path.indexOf(arm_sys_Path.sep + arm_sys_Path.sep) >= 0) arm_ui_UIFiles.path = StringTools.replace(arm_ui_UIFiles.path,arm_sys_Path.sep + arm_sys_Path.sep,arm_sys_Path.sep);
		arm_ui_UIFiles.path = StringTools.replace(arm_ui_UIFiles.path,"\r","");
		arm_ui_UIFiles.filename = HxOverrides.substr(arm_ui_UIFiles.path,arm_ui_UIFiles.path.lastIndexOf(arm_sys_Path.sep) + 1,null);
		if(isSave) {
			arm_ui_UIFiles.path = HxOverrides.substr(arm_ui_UIFiles.path,0,arm_ui_UIFiles.path.lastIndexOf(arm_sys_Path.sep));
		}
		filesDone(arm_ui_UIFiles.path);
	}
	arm_ui_UIFiles.releaseKeys();
};
arm_ui_UIFiles.showCustom = function(filters,isSave,filesDone) {
	var known = false;
	arm_ui_UIBox.showCustom(function(ui) {
		if(ui.tab(zui_Handle.global.nest(9,null),arm_Translator.tr("File Browser"))) {
			var pathHandle = zui_Handle.global.nest(10,null);
			var fileHandle = zui_Handle.global.nest(11,null);
			ui.row([0.6,0.2,0.2]);
			arm_ui_UIFiles.filename = ui.textInput(fileHandle,arm_Translator.tr("File"));
			ui.text("*." + filters,1);
			if(ui.button(isSave ? arm_Translator.tr("Save") : arm_Translator.tr("Open")) || known || ui.isReturnDown) {
				arm_ui_UIBox.show = false;
				filesDone(known || isSave ? arm_ui_UIFiles.path : arm_ui_UIFiles.path + arm_sys_Path.sep + arm_ui_UIFiles.filename);
				if(known) {
					pathHandle.text = HxOverrides.substr(pathHandle.text,0,pathHandle.text.lastIndexOf(arm_sys_Path.sep));
				}
			}
			known = arm_sys_Path.isTexture(arm_ui_UIFiles.path) || arm_sys_Path.isMesh(arm_ui_UIFiles.path) || arm_sys_Path.isProject(arm_ui_UIFiles.path);
			arm_ui_UIFiles.path = arm_ui_UIFiles.fileBrowser(ui,pathHandle,false);
			if(pathHandle.changed) {
				ui.currentWindow.redraws = 3;
			}
		}
	},600,500);
};
arm_ui_UIFiles.releaseKeys = function() {
	var kb = kha_input_Keyboard.get();
	kb.sendUpEvent(16);
	kb.sendUpEvent(17);
};
arm_ui_UIFiles.fileBrowser = function(ui,handle,foldersOnly,dragFiles) {
	if(dragFiles == null) {
		dragFiles = false;
	}
	if(foldersOnly == null) {
		foldersOnly = false;
	}
	var icons = arm_Res.bundled.h["icons.k"];
	var folder = arm_Res.tile50(icons,2,1);
	var file = arm_Res.tile50(icons,3,1);
	if(handle.text == "") {
		handle.text = "C:\\Users";
	}
	if(handle.text != arm_ui_UIFiles.lastPath) {
		arm_ui_UIFiles.files = [];
		var i1 = handle.text.indexOf(arm_sys_Path.sep);
		if(i1 > -1 && handle.text.length - 1 > i1) {
			arm_ui_UIFiles.files.push("..");
		}
		var filesAll = arm_sys_File.readDirectory(handle.text,foldersOnly);
		var _g = 0;
		while(_g < filesAll.length) {
			var f = filesAll[_g];
			++_g;
			if(f == "" || f.charAt(0) == ".") {
				continue;
			}
			if(f.indexOf(".") > 0 && !arm_sys_Path.isKnown(f)) {
				continue;
			}
			arm_ui_UIFiles.files.push(f);
		}
	}
	arm_ui_UIFiles.lastPath = handle.text;
	handle.changed = false;
	var slotw = 70 * ui.ops.scaleFactor | 0;
	var num = ui._w / slotw | 0;
	var _g = 0;
	var _g1 = Math.ceil(arm_ui_UIFiles.files.length / num) | 0;
	while(_g < _g1) {
		var row = _g++;
		var _g2 = [];
		var _g3 = 0;
		var _g4 = num * 2;
		while(_g3 < _g4) {
			++_g3;
			_g2.push(1 / num);
		}
		ui.row(_g2);
		if(row > 0) {
			ui._y += ui.t.ELEMENT_OFFSET * ui.ops.scaleFactor * 14.0;
		}
		var _g5 = 0;
		while(_g5 < num) {
			var i = _g5++ + row * num;
			if(i >= arm_ui_UIFiles.files.length) {
				ui.endElement(slotw);
				ui.endElement(slotw);
				continue;
			}
			var f = arm_ui_UIFiles.files[i];
			var _x = ui._x;
			var rect = f.indexOf(".") > 0 ? file : folder;
			var col = rect == file ? ui.t.LABEL_COL : ui.t.LABEL_COL - 2105376;
			if(arm_ui_UIFiles.selected == i) {
				col = ui.t.HIGHLIGHT_COL;
			}
			var uix = ui._x += ui._w / 2 - 25 * ui.ops.scaleFactor;
			var uiy = ui._y;
			var state = 0;
			var generic = true;
			if(StringTools.endsWith(f,".arm")) {
				if(arm_ui_UIFiles.iconMap == null) {
					arm_ui_UIFiles.iconMap = new haxe_ds_StringMap();
				}
				var icon = arm_ui_UIFiles.iconMap.h[handle.text + arm_sys_Path.sep + f];
				if(icon == null) {
					var i1 = new haxe_io_BytesInput(haxe_io_Bytes.ofData(Krom.loadBlob(handle.text + arm_sys_Path.sep + f)));
					i1.set_bigEndian(false);
					var raw = iron_system_ArmPack.read(i1);
					if(raw.material_icons != null) {
						icon = kha_Image.fromBytes(iron_system_Lz4.decode(raw.material_icons[0],262144),256,256);
						arm_ui_UIFiles.iconMap.h[handle.text + arm_sys_Path.sep + f] = icon;
					}
				}
				if(icon != null) {
					state = ui.image(icon,-1,50 * ui.ops.scaleFactor);
					generic = false;
				}
			}
			if(generic) {
				state = ui.image(icons,col,50 * ui.ops.scaleFactor,rect.x,rect.y,rect.w,rect.h);
			}
			if(state == 1) {
				if(f != ".." && dragFiles) {
					var mouse = iron_system_Input.getMouse();
					arm_App.dragOffX = -(mouse.x - uix - ui._windowX - 3);
					arm_App.dragOffY = -(mouse.y - uiy - ui._windowY + 1);
					arm_App.dragFile = handle.text;
					if(arm_App.dragFile.charAt(arm_App.dragFile.length - 1) != arm_sys_Path.sep) {
						arm_App.dragFile += arm_sys_Path.sep;
					}
					arm_App.dragFile += f;
				}
				arm_ui_UIFiles.selected = i;
				if(kha_Scheduler.time() - arm_Context.selectTime < 0.25) {
					arm_App.dragFile = null;
					arm_App.isDragging = false;
					handle.changed = ui.changed = true;
					if(f == "..") {
						handle.text = handle.text.substring(0,handle.text.lastIndexOf(arm_sys_Path.sep));
						if(handle.text.length == 2 && handle.text.charAt(1) == ":") {
							handle.text += arm_sys_Path.sep;
						}
					} else {
						if(handle.text.charAt(handle.text.length - 1) != arm_sys_Path.sep) {
							handle.text += arm_sys_Path.sep;
						}
						handle.text += f;
					}
					arm_ui_UIFiles.selected = -1;
				}
				arm_Context.selectTime = kha_Scheduler.time();
			}
			ui._x = _x;
			ui._y += slotw * 0.75;
			ui.text(arm_ui_UIFiles.showExtensions || f.indexOf(".") <= 0 ? f : HxOverrides.substr(f,0,f.lastIndexOf(".")),1);
			ui._y -= slotw * 0.75;
			if(handle.changed) {
				break;
			}
		}
		if(handle.changed) {
			break;
		}
	}
	ui._y += slotw * 0.8;
	return handle.text;
};
var arm_ui_UIMenu = function() { };
$hxClasses["arm.ui.UIMenu"] = arm_ui_UIMenu;
arm_ui_UIMenu.__name__ = "arm.ui.UIMenu";
arm_ui_UIMenu.render = function(g) {
	var ui = arm_App.uiMenu;
	var menuW = ui.t.ELEMENT_W * ui.ops.scaleFactor * 2.0 | 0;
	var BUTTON_COL = ui.t.BUTTON_COL;
	ui.t.BUTTON_COL = ui.t.SEPARATOR_COL;
	var ELEMENT_OFFSET = ui.t.ELEMENT_OFFSET;
	ui.t.ELEMENT_OFFSET = 0;
	var ELEMENT_H = ui.t.ELEMENT_H;
	ui.t.ELEMENT_H = 28;
	ui.beginRegion(g,arm_ui_UIMenu.menuX,arm_ui_UIMenu.menuY,menuW);
	if(arm_ui_UIMenu.menuCommands != null) {
		ui.fill(0,0,ui._w / ui.ops.scaleFactor,ui.t.ELEMENT_H * arm_ui_UIMenu.menuElements,ui.t.SEPARATOR_COL);
		arm_ui_UIMenu.menuCommands(ui);
	} else {
		var sepw = menuW / ui.ops.scaleFactor;
		g.set_color(ui.t.SEPARATOR_COL);
		g.fillRect(arm_ui_UIMenu.menuX,arm_ui_UIMenu.menuY,menuW,28 * [16,4,13,12,17,7][arm_ui_UIMenu.menuCategory] * ui.ops.scaleFactor);
		if(arm_ui_UIMenu.menuCategory == 0) {
			if(ui.button("      " + arm_Translator.tr("New Project..."),0,arm_Config.keymap.file_new)) {
				arm_Project.projectNewBox();
			}
			if(ui.button("      " + arm_Translator.tr("Open..."),0,arm_Config.keymap.file_open)) {
				arm_Project.projectOpen();
			}
			if(ui.button("      " + arm_Translator.tr("Open Recent..."),0,arm_Config.keymap.file_open_recent)) {
				arm_Project.projectOpenRecentBox();
			}
			if(ui.button("      " + arm_Translator.tr("Save"),0,arm_Config.keymap.file_save)) {
				arm_Project.projectSave();
			}
			if(ui.button("      " + arm_Translator.tr("Save As..."),0,arm_Config.keymap.file_save_as)) {
				arm_Project.projectSaveAs();
			}
			ui.fill(0,0,sepw,1,ui.t.ACCENT_SELECT_COL);
			if(ui.button("      " + arm_Translator.tr("Import Texture..."),0,arm_Config.keymap.file_import_assets)) {
				arm_Project.importAsset(arm_sys_Path.textureFormats.join(","));
			}
			if(ui.button("      " + arm_Translator.tr("Import Font..."),0)) {
				arm_Project.importAsset("ttf,ttc,otf");
			}
			if(ui.button("      " + arm_Translator.tr("Import Material..."),0)) {
				arm_Project.importMaterial();
			}
			if(ui.button("      " + arm_Translator.tr("Import Brush..."),0)) {
				arm_Project.importBrush();
			}
			if(ui.button("      " + arm_Translator.tr("Import Mesh..."),0)) {
				arm_Project.importMesh();
			}
			if(ui.button("      " + arm_Translator.tr("Reimport Mesh"),0,arm_Config.keymap.file_reimport_mesh)) {
				arm_Project.reimportMesh();
			}
			if(ui.button("      " + arm_Translator.tr("Reimport Textures"),0,arm_Config.keymap.file_reimport_textures)) {
				arm_Project.reimportTextures();
			}
			ui.fill(0,0,sepw,1,ui.t.ACCENT_SELECT_COL);
			if(ui.button("      " + arm_Translator.tr("Export Textures..."),0,arm_Config.keymap.file_export_textures_as)) {
				arm_Context.layersExport = 0;
				arm_ui_BoxExport.showTextures();
			}
			if(ui.button("      " + arm_Translator.tr("Export Mesh..."),0)) {
				arm_ui_BoxExport.showMesh();
			}
			if(ui.button("      " + arm_Translator.tr("Bake Material..."),0)) {
				arm_ui_BoxExport.showBakeMaterial();
			}
			ui.fill(0,0,sepw,1,ui.t.ACCENT_SELECT_COL);
			if(ui.button("      " + arm_Translator.tr("Exit"),0)) {
				kha_System.stop();
			}
		} else if(arm_ui_UIMenu.menuCategory == 1) {
			var stepUndo = "";
			var stepRedo = "";
			if(arm_History.undos > 0) {
				stepUndo = arm_History.steps[arm_History.steps.length - 1 - arm_History.redos].name;
			}
			if(arm_History.redos > 0) {
				stepRedo = arm_History.steps[arm_History.steps.length - arm_History.redos].name;
			}
			ui.enabled = arm_History.undos > 0;
			var _g = new haxe_ds_StringMap();
			_g.h["step"] = stepUndo;
			if(ui.button("      " + arm_Translator.tr("Undo {step}",_g),0,arm_Config.keymap.edit_undo)) {
				arm_History.undo();
			}
			ui.enabled = arm_History.redos > 0;
			var _g = new haxe_ds_StringMap();
			_g.h["step"] = stepRedo;
			if(ui.button("      " + arm_Translator.tr("Redo {step}",_g),0,arm_Config.keymap.edit_redo)) {
				arm_History.redo();
			}
			ui.enabled = true;
			ui.fill(0,0,sepw,1,ui.t.ACCENT_SELECT_COL);
			if(ui.button("      " + arm_Translator.tr("Reset Layout"),0)) {
				arm_ui_UIMenu.askToResetLayout = true;
			}
			if(ui.button("      " + arm_Translator.tr("Preferences..."),0,arm_Config.keymap.edit_prefs)) {
				arm_ui_BoxPreferences.show();
			}
		} else if(arm_ui_UIMenu.menuCategory == 2) {
			if(ui.button("      " + arm_Translator.tr("Import Envmap..."),0)) {
				arm_ui_UIFiles.show("hdr",false,function(path) {
					if(!StringTools.endsWith(path,".hdr")) {
						arm_Log.error("Error: .hdr file expected");
						return;
					}
					arm_io_ImportAsset.run(path);
				});
			}
			if(ui.button("      " + arm_Translator.tr("Distract Free"),0,arm_Config.keymap.view_distract_free)) {
				arm_ui_UISidebar.inst.toggleDistractFree();
				arm_ui_UISidebar.inst.ui.isHovered = false;
			}
			ui.changed = false;
			var p = iron_Scene.active.world.probe;
			var envHandle = zui_Handle.global.nest(78,null);
			envHandle.value = p.raw.strength;
			ui.row([0.125,0.875]);
			ui.endElement();
			var tmp = arm_Translator.tr("Environment");
			p.raw.strength = ui.slider(envHandle,tmp,0.0,8.0,true);
			if(envHandle.changed) {
				arm_Context.ddirty = 2;
			}
			if(iron_Scene.active.lights.length > 0) {
				var light = iron_Scene.active.lights[0];
				var lhandle = zui_Handle.global.nest(79,null);
				var scale = 1333;
				lhandle.value = light.data.raw.strength / scale;
				lhandle.value = (lhandle.value * 100 | 0) / 100;
				ui.row([0.125,0.875]);
				ui.endElement();
				var tmp = ui.slider(lhandle,arm_Translator.tr("Light"),0.0,4.0,true);
				light.data.raw.strength = tmp * scale;
				if(lhandle.changed) {
					arm_Context.ddirty = 2;
				}
				var sxhandle = zui_Handle.global.nest(80,null);
				sxhandle.value = light.data.raw.size;
				ui.row([0.125,0.875]);
				ui.endElement();
				var tmp = arm_Translator.tr("Light Size");
				light.data.raw.size = ui.slider(sxhandle,tmp,0.0,4.0,true);
				if(sxhandle.changed) {
					arm_Context.ddirty = 2;
				}
			}
			var splitViewHandle = zui_Handle.global.nest(81,{ selected : arm_Context.splitView});
			arm_Context.splitView = ui.check(splitViewHandle," " + arm_Translator.tr("Split View"));
			if(splitViewHandle.changed) {
				arm_App.resize();
			}
			var cullHandle = zui_Handle.global.nest(82,{ selected : arm_Context.cullBackfaces});
			arm_Context.cullBackfaces = ui.check(cullHandle," " + arm_Translator.tr("Cull Backfaces"));
			if(cullHandle.changed) {
				arm_node_MakeMaterial.parseMeshMaterial();
			}
			var filterHandle = zui_Handle.global.nest(83,{ selected : arm_Context.textureFilter});
			arm_Context.textureFilter = ui.check(filterHandle," " + arm_Translator.tr("Filter Textures"));
			if(filterHandle.changed) {
				arm_node_MakeMaterial.parsePaintMaterial();
				arm_node_MakeMaterial.parseMeshMaterial();
			}
			arm_Context.drawWireframe = ui.check(arm_Context.wireframeHandle," " + arm_Translator.tr("Wireframe"));
			if(arm_Context.wireframeHandle.changed) {
				ui.g.end();
				arm_util_UVUtil.cacheUVMap();
				ui.g.begin(false);
				arm_node_MakeMaterial.parseMeshMaterial();
			}
			arm_Context.drawTexels = ui.check(arm_Context.texelsHandle," " + arm_Translator.tr("Texels"));
			if(arm_Context.texelsHandle.changed) {
				arm_node_MakeMaterial.parseMeshMaterial();
			}
			var compassHandle = zui_Handle.global.nest(84,{ selected : arm_Context.showCompass});
			arm_Context.showCompass = ui.check(compassHandle," " + arm_Translator.tr("Compass"));
			if(compassHandle.changed) {
				arm_Context.ddirty = 2;
			}
			arm_Context.showEnvmap = ui.check(arm_Context.showEnvmapHandle," " + arm_Translator.tr("Envmap"));
			if(arm_Context.showEnvmapHandle.changed) {
				arm_Context.loadEnvmap();
				arm_Context.ddirty = 2;
			}
			arm_Context.showEnvmapBlur = ui.check(arm_Context.showEnvmapBlurHandle," " + arm_Translator.tr("Blur Envmap"));
			if(arm_Context.showEnvmapBlurHandle.changed) {
				arm_Context.ddirty = 2;
			}
			if(arm_Context.showEnvmap) {
				iron_Scene.active.world.envmap = arm_Context.showEnvmapBlur ? iron_Scene.active.world.probe.radianceMipmaps[0] : arm_Context.savedEnvmap;
			} else {
				iron_Scene.active.world.envmap = arm_Context.emptyEnvmap;
			}
			if(ui.changed) {
				arm_ui_UIMenu.keepOpen = true;
			}
		} else if(arm_ui_UIMenu.menuCategory == 3) {
			var modeHandle = zui_Handle.global.nest(85,null);
			var modes = [arm_Translator.tr("Lit"),arm_Translator.tr("Base Color"),arm_Translator.tr("Normal"),arm_Translator.tr("Occlusion"),arm_Translator.tr("Roughness"),arm_Translator.tr("Metallic"),arm_Translator.tr("Opacity"),arm_Translator.tr("TexCoord"),arm_Translator.tr("Object Normal"),arm_Translator.tr("Material ID"),arm_Translator.tr("Object ID"),arm_Translator.tr("Mask")];
			var _g = 0;
			var _g1 = modes.length;
			while(_g < _g1) {
				var i = _g++;
				ui.radio(modeHandle,i,modes[i]);
			}
			arm_Context.viewportMode = modeHandle.position;
			if(modeHandle.changed) {
				if(arm_Context.renderMode != 1 && (arm_Context.viewportMode == 0 || arm_Context.viewportMode == 12)) {
					iron_RenderPath.active.commands = arm_render_RenderPathDeferred.commands;
				} else {
					if(arm_render_RenderPathForward.path == null) {
						arm_render_RenderPathForward.init(iron_RenderPath.active);
					}
					iron_RenderPath.active.commands = arm_render_RenderPathForward.commands;
				}
				var _workspace = arm_ui_UIHeader.inst.worktab.position;
				arm_ui_UIHeader.inst.worktab.position = 0;
				arm_node_MakeMaterial.parseMeshMaterial();
				arm_ui_UIHeader.inst.worktab.position = _workspace;
			}
		} else if(arm_ui_UIMenu.menuCategory == 4) {
			if(ui.button("      " + arm_Translator.tr("Reset"),0,arm_Config.keymap.view_reset)) {
				arm_util_ViewportUtil.resetViewport();
				arm_util_ViewportUtil.scaleToBounds();
			}
			ui.fill(0,0,sepw,1,ui.t.ACCENT_SELECT_COL);
			if(ui.button("      " + arm_Translator.tr("Front"),0,arm_Config.keymap.view_front)) {
				arm_util_ViewportUtil.setView(0,-1,0,Math.PI / 2,0,0);
			}
			if(ui.button("      " + arm_Translator.tr("Back"),0,arm_Config.keymap.view_back)) {
				arm_util_ViewportUtil.setView(0,1,0,Math.PI / 2,0,Math.PI);
			}
			if(ui.button("      " + arm_Translator.tr("Right"),0,arm_Config.keymap.view_right)) {
				arm_util_ViewportUtil.setView(1,0,0,Math.PI / 2,0,Math.PI / 2);
			}
			if(ui.button("      " + arm_Translator.tr("Left"),0,arm_Config.keymap.view_left)) {
				arm_util_ViewportUtil.setView(-1,0,0,Math.PI / 2,0,-Math.PI / 2);
			}
			if(ui.button("      " + arm_Translator.tr("Top"),0,arm_Config.keymap.view_top)) {
				arm_util_ViewportUtil.setView(0,0,1,0,0,0);
			}
			if(ui.button("      " + arm_Translator.tr("Bottom"),0,arm_Config.keymap.view_bottom)) {
				arm_util_ViewportUtil.setView(0,0,-1,Math.PI,0,Math.PI);
			}
			ui.fill(0,0,sepw,1,ui.t.ACCENT_SELECT_COL);
			ui.changed = false;
			if(ui.button("      " + arm_Translator.tr("Orbit Left"),0,arm_Config.keymap.view_orbit_left)) {
				arm_util_ViewportUtil.orbit(-Math.PI / 12,0);
			}
			if(ui.button("      " + arm_Translator.tr("Orbit Right"),0,arm_Config.keymap.view_orbit_right)) {
				arm_util_ViewportUtil.orbit(Math.PI / 12,0);
			}
			if(ui.button("      " + arm_Translator.tr("Orbit Up"),0,arm_Config.keymap.view_orbit_up)) {
				arm_util_ViewportUtil.orbit(0,-Math.PI / 12);
			}
			if(ui.button("      " + arm_Translator.tr("Orbit Down"),0,arm_Config.keymap.view_orbit_down)) {
				arm_util_ViewportUtil.orbit(0,Math.PI / 12);
			}
			if(ui.button("      " + arm_Translator.tr("Orbit Opposite"),0,arm_Config.keymap.view_orbit_opposite)) {
				arm_util_ViewportUtil.orbitOpposite();
			}
			if(ui.button("      " + arm_Translator.tr("Zoom In"),0,arm_Config.keymap.view_zoom_in)) {
				arm_util_ViewportUtil.zoom(0.2);
			}
			if(ui.button("      " + arm_Translator.tr("Zoom Out"),0,arm_Config.keymap.view_zoom_out)) {
				arm_util_ViewportUtil.zoom(-0.2);
			}
			var cam = iron_Scene.active.camera;
			arm_Context.fovHandle = zui_Handle.global.nest(86,{ value : (cam.data.raw.fov * 100 | 0) / 100});
			ui.row([0.125,0.875]);
			ui.endElement();
			var tmp = arm_Context.fovHandle;
			var tmp1 = arm_Translator.tr("FoV");
			cam.data.raw.fov = ui.slider(tmp,tmp1,0.3,2.0,true);
			if(arm_Context.fovHandle.changed) {
				arm_util_ViewportUtil.updateCameraType(arm_Context.cameraType);
			}
			ui.row([0.125,0.875]);
			ui.endElement();
			arm_Context.cameraControls = zui_Ext.inlineRadio(ui,zui_Handle.global.nest(87,{ position : arm_Context.cameraControls}),[arm_Translator.tr("Orbit"),arm_Translator.tr("Rotate"),arm_Translator.tr("Fly")],0);
			ui.row([0.125,0.875]);
			ui.endElement();
			arm_Context.cameraType = zui_Ext.inlineRadio(ui,arm_Context.camHandle,[arm_Translator.tr("Perspective"),arm_Translator.tr("Orthographic")],0);
			if(ui.isHovered) {
				ui.tooltip(arm_Translator.tr("Camera Type") + (" (" + Std.string(arm_Config.keymap.view_camera_type) + ")"));
			}
			if(arm_Context.camHandle.changed) {
				arm_util_ViewportUtil.updateCameraType(arm_Context.cameraType);
			}
			if(ui.changed) {
				arm_ui_UIMenu.keepOpen = true;
			}
		} else if(arm_ui_UIMenu.menuCategory == 5) {
			if(ui.button("      " + arm_Translator.tr("Manual"),0)) {
				arm_sys_File.explorer("https://armorpaint.org/manual");
			}
			if(ui.button("      " + arm_Translator.tr("What's New"),0)) {
				arm_sys_File.explorer("https://armorpaint.org/notes");
			}
			if(ui.button("      " + arm_Translator.tr("Issue Tracker"),0)) {
				arm_sys_File.explorer("https://github.com/armory3d/armorpaint/issues");
			}
			if(ui.button("      " + arm_Translator.tr("Report Bug"),0)) {
				arm_sys_File.explorer("https://github.com/armory3d/armorpaint/issues/new?labels=bug&template=bug_report.md&body=*ArmorPaint%20" + Main.version + "-" + Main.sha + ",%20" + kha_System.get_systemId() + "*%0A%0A**Issue description:**%0A%0A**Steps to reproduce:**%0A%0A");
			}
			if(ui.button("      " + arm_Translator.tr("Request Feature"),0)) {
				arm_sys_File.explorer("https://github.com/armory3d/armorpaint/issues/new?labels=feature%20request&template=feature_request.md&body=*ArmorPaint%20" + Main.version + "-" + Main.sha + ",%20" + kha_System.get_systemId() + "*%0A%0A**Feature description:**%0A%0A");
			}
			ui.fill(0,0,sepw,1,ui.t.ACCENT_SELECT_COL);
			if(ui.button("      " + arm_Translator.tr("Check for Updates..."),0)) {
				var blob = arm_sys_File.downloadBytes("'https://luboslenco.gitlab.io/armorpaint/index.html'");
				if(blob != null) {
					var updateVersion = JSON.parse(blob.toString()).version | 0;
					if(updateVersion > 0) {
						if(updateVersion > Std.parseInt(StringTools.replace(HxOverrides.substr("2020-10-29 01:17:11".split(" ")[0],2,null),"-",""))) {
							arm_ui_UIBox.showMessage(arm_Translator.tr("Update"),arm_Translator.tr("Update is available!\nPlease visit armorpaint.org to download."));
						} else {
							arm_ui_UIBox.showMessage(arm_Translator.tr("Update"),arm_Translator.tr("You are up to date!"));
						}
					}
				} else {
					arm_ui_UIBox.showMessage(arm_Translator.tr("Update"),arm_Translator.tr("Unable to check for updates.\nPlease visit armorpaint.org."));
				}
			}
			if(ui.button("      " + arm_Translator.tr("About..."),0)) {
				var msg = "ArmorPaint.org - v" + Main.version + " (" + Main.date + ") - " + Main.sha + "\n";
				msg += kha_System.get_systemId() + " - " + "Direct3D11";
				var save = (arm_sys_Path.isProtected() ? Krom.savePath() : arm_sys_Path.data()) + arm_sys_Path.sep + "tmp.txt";
				Krom.sysCommand("wmic path win32_VideoController get name > \"" + save + "\"");
				var bytes = haxe_io_Bytes.ofData(Krom.loadBlob(save));
				var gpu = "";
				var _g = 30;
				var _g1 = bytes.length / 2 | 0;
				while(_g < _g1) {
					var code = bytes.b[_g++ * 2];
					var c = String.fromCodePoint(code);
					if(c == "\n") {
						continue;
					}
					gpu += c;
				}
				msg += "\n" + gpu;
				arm_ui_UIBox.showMessage(arm_Translator.tr("About"),msg,true);
			}
		}
	}
	arm_ui_UIMenu.hideMenu = ui.comboSelectedHandle == null && !arm_ui_UIMenu.changeStarted && !arm_ui_UIMenu.keepOpen && !arm_ui_UIMenu.showMenuFirst && (ui.changed || ui.inputReleased || ui.inputReleasedR || ui.isEscapeDown);
	arm_ui_UIMenu.showMenuFirst = false;
	arm_ui_UIMenu.keepOpen = false;
	if(ui.inputReleased) {
		arm_ui_UIMenu.changeStarted = false;
	}
	ui.t.BUTTON_COL = BUTTON_COL;
	ui.t.ELEMENT_OFFSET = ELEMENT_OFFSET;
	ui.t.ELEMENT_H = ELEMENT_H;
	ui.endRegion();
};
arm_ui_UIMenu.update = function() {
	if(arm_ui_UIMenu.hideMenu) {
		arm_ui_UIMenu.show = false;
		arm_App.redrawUI();
		arm_ui_UIMenu.showMenuFirst = true;
		arm_ui_UIMenu.menuCommands = null;
	}
	if(arm_ui_UIMenu.askToResetLayout) {
		arm_ui_UIMenu.askToResetLayout = false;
		arm_ui_UIMenu.draw(function(ui) {
			ui.text(arm_Translator.tr("Reset layout?"),2,ui.t.HIGHLIGHT_COL);
			if(ui.button(arm_Translator.tr("Confirm"),0)) {
				arm_Config.initLayout();
				arm_Config.save();
			}
		},2);
	}
};
arm_ui_UIMenu.draw = function(commands,elements,x,y) {
	if(y == null) {
		y = -1;
	}
	if(x == null) {
		x = -1;
	}
	arm_ui_UIMenu.show = true;
	arm_ui_UIMenu.menuCommands = commands;
	arm_ui_UIMenu.menuElements = elements;
	arm_ui_UIMenu.menuX = x > -1 ? x : iron_system_Input.getMouse().x | 0;
	arm_ui_UIMenu.menuY = y > -1 ? y : iron_system_Input.getMouse().y | 0;
	var _this = arm_App.uiMenu;
	var menuW = _this.t.ELEMENT_W * _this.ops.scaleFactor * 2.0;
	if(arm_ui_UIMenu.menuX + menuW > kha_System.windowWidth()) {
		arm_ui_UIMenu.menuX = kha_System.windowWidth() - menuW | 0;
	}
	var menuH = arm_ui_UIMenu.menuElements * 28;
	if(arm_ui_UIMenu.menuY + menuH > kha_System.windowHeight()) {
		arm_ui_UIMenu.menuY = kha_System.windowHeight() - menuH;
		arm_ui_UIMenu.menuX += 1;
	}
};
var arm_ui_UINodes = function() {
	this.hwnd = zui_Handle.global.nest(6,null);
	this.grid = null;
	this.lastNodeSelected = null;
	this.nodeSearchLast = "";
	this.nodeSearchOffset = 0;
	this.nodeSearchSpawn = null;
	this.recompileMatFinal = false;
	this.recompileMat = false;
	this.mstartedlast = false;
	this.mchanged = false;
	this.mreleased = false;
	this.mdown = false;
	this.changed = false;
	this.popupY = 0.0;
	this.popupX = 0.0;
	this.addNodeButton = false;
	this.menuCategory = 0;
	this.hideMenu = false;
	this.showMenu = false;
	this.drawMenu = false;
	this.canvasType = 0;
	this.show = false;
	arm_ui_UINodes.inst = this;
	zui_Nodes.excludeRemove.push("OUTPUT_MATERIAL_PBR");
	zui_Nodes.excludeRemove.push("BrushOutputNode");
	zui_Nodes.onLinkDrag = $bind(this,this.onLinkDrag);
	this.ui = new zui_Zui({ font : arm_App.font, theme : arm_App.theme, color_wheel : arm_App.colorWheel, scaleFactor : arm_Config.raw.window_scale});
	this.ui.scrollEnabled = false;
};
$hxClasses["arm.ui.UINodes"] = arm_ui_UINodes;
arm_ui_UINodes.__name__ = "arm.ui.UINodes";
arm_ui_UINodes.makeNode = function(n,nodes,canvas) {
	var node = JSON.parse(JSON.stringify(n));
	node.id = nodes.getNodeId(canvas.nodes);
	node.x = arm_ui_UINodes.inst.getNodeX();
	node.y = arm_ui_UINodes.inst.getNodeY();
	var _g = 0;
	var _g1 = node.inputs;
	while(_g < _g1.length) {
		var soc = _g1[_g];
		++_g;
		soc.id = nodes.getSocketId(canvas.nodes);
		soc.node_id = node.id;
	}
	var _g = 0;
	var _g1 = node.outputs;
	while(_g < _g1.length) {
		var soc = _g1[_g];
		++_g;
		soc.id = nodes.getSocketId(canvas.nodes);
		soc.node_id = node.id;
	}
	return node;
};
arm_ui_UINodes.prototype = {
	onLinkDrag: function(linkDrag,isNewLink) {
		var _gthis = this;
		if(isNewLink) {
			var nodes = this.getNodes();
			var node = linkDrag.from_id > -1 ? linkDrag.from_id : linkDrag.to_id;
			var node1 = nodes.getNode(this.getCanvas().nodes,node);
			var linkX = this.ui._windowX + (node1.x * (nodes.scaleFactor * nodes.zoom) + (nodes.panX * (nodes.scaleFactor * nodes.zoom) + (1.0 - nodes.zoom) * nodes.uiw / 2.5));
			var linkY = this.ui._windowY + (node1.y * (nodes.scaleFactor * nodes.zoom) + (nodes.panY * (nodes.scaleFactor * nodes.zoom) + (1.0 - nodes.zoom) * nodes.uih / 2.5));
			if(linkDrag.from_id > -1) {
				linkX += 140 * (nodes.scaleFactor * nodes.zoom) | 0;
				linkY += ((nodes.ELEMENT_H * (nodes.scaleFactor * nodes.zoom) | 0) * 1.62 | 0) + linkDrag.from_socket * (nodes.ELEMENT_H * (nodes.scaleFactor * nodes.zoom) | 0);
			} else {
				linkY += ((nodes.ELEMENT_H * (nodes.scaleFactor * nodes.zoom) | 0) * 1.62 | 0) + (linkDrag.to_socket + node1.outputs.length) * (nodes.ELEMENT_H * (nodes.scaleFactor * nodes.zoom) | 0) + nodes.BUTTONS_H(node1);
			}
			var mouse = iron_system_Input.getMouse();
			if(Math.abs(mouse.x - linkX) > 5 || Math.abs(mouse.y - linkY) > 5) {
				this.nodeSearch(-1,-1,function() {
					var n = nodes.nodesSelected[0];
					if(linkDrag.to_id == -1 && n.inputs.length > 0) {
						linkDrag.to_id = n.id;
						linkDrag.to_socket = 0;
						_gthis.getCanvas().links.push(linkDrag);
					} else if(linkDrag.from_id == -1 && n.outputs.length > 0) {
						linkDrag.from_id = n.id;
						linkDrag.from_socket = 0;
						_gthis.getCanvas().links.push(linkDrag);
					}
				});
			} else {
				arm_Context.nodePreviewSocket = linkDrag.from_id > -1 ? linkDrag.from_socket : 0;
			}
		}
	}
	,getCanvas: function() {
		if(this.canvasType == 0) {
			return this.getCanvasMaterial();
		} else {
			return arm_Context.brush.canvas;
		}
	}
	,getCanvasMaterial: function() {
		if(arm_ui_UIHeader.inst.worktab.position == 3) {
			return arm_Context.materialScene.canvas;
		} else {
			return arm_Context.material.canvas;
		}
	}
	,getNodes: function() {
		if(this.canvasType == 0) {
			if(arm_ui_UIHeader.inst.worktab.position == 3) {
				return arm_Context.materialScene.nodes;
			} else {
				return arm_Context.material.nodes;
			}
		} else {
			return arm_Context.brush.nodes;
		}
	}
	,update: function() {
		var mouse = iron_system_Input.getMouse();
		this.mreleased = mouse.released();
		this.mdown = mouse.down();
		if(this.ui.changed) {
			this.mchanged = true;
			if(!this.mdown) {
				this.changed = true;
			}
		}
		if(this.mreleased && this.mchanged || this.changed) {
			this.mchanged = this.changed = false;
			this.canvasChanged();
			if(this.mreleased) {
				arm_ui_UISidebar.inst.hwnd0.redraws = 2;
				arm_History.editNodes(this.lastCanvas,this.canvasType);
			}
		} else if(this.ui.changed && (this.mstartedlast || mouse.moved) && arm_Config.raw.material_live) {
			this.recompileMat = true;
		}
		this.mstartedlast = mouse.started();
		if(!this.show) {
			return;
		}
		if(!arm_App.uiEnabled) {
			return;
		}
		var kb = iron_system_Input.getKeyboard();
		this.wx = (arm_App.w() | 0) + arm_ui_UIToolbar.inst.toolbarw;
		this.wy = arm_ui_UIHeader.inst.headerh * 2;
		if(arm_ui_UIView2D.inst.show) {
			this.wy += arm_App.h() - arm_Config.raw.layout[5];
		}
		var mx = mouse.x;
		if(mx < this.wx || mx > this.wx + arm_Config.raw.layout[4] || mouse.y < this.wy) {
			return;
		}
		if(this.ui.isTyping) {
			return;
		}
		if(this.addNodeButton) {
			this.showMenu = true;
			this.addNodeButton = false;
		} else if(mouse.released()) {
			this.hideMenu = true;
		}
		var nodes = this.getNodes();
		if(nodes.nodesSelected.length > 0 && this.ui.isKeyPressed) {
			if(this.ui.key == 37) {
				var _g = 0;
				var _g1 = nodes.nodesSelected;
				while(_g < _g1.length) _g1[_g++].x -= 1;
			} else if(this.ui.key == 39) {
				var _g = 0;
				var _g1 = nodes.nodesSelected;
				while(_g < _g1.length) _g1[_g++].x += 1;
			}
			if(this.ui.key == 38) {
				var _g = 0;
				var _g1 = nodes.nodesSelected;
				while(_g < _g1.length) _g1[_g++].y -= 1;
			} else if(this.ui.key == 40) {
				var _g = 0;
				var _g1 = nodes.nodesSelected;
				while(_g < _g1.length) _g1[_g++].y += 1;
			}
		}
		if(kb.started(arm_Config.keymap.node_search)) {
			this.nodeSearch();
		}
		if(this.nodeSearchSpawn != null) {
			this.ui.inputX = mouse.x;
			this.ui.inputY = mouse.y;
			this.nodeSearchSpawn = null;
		}
	}
	,canvasChanged: function() {
		this.recompileMat = true;
		this.recompileMatFinal = true;
	}
	,nodeSearch: function(x,y,done) {
		if(y == null) {
			y = -1;
		}
		if(x == null) {
			x = -1;
		}
		var _gthis = this;
		var kb = iron_system_Input.getKeyboard();
		var searchHandle = zui_Handle.global.nest(89,null);
		var first = true;
		arm_ui_UIMenu.draw(function(ui) {
			ui.fill(0,0,ui._w / ui.ops.scaleFactor,ui.t.ELEMENT_H * 8,ui.t.WINDOW_BG_COL);
			ui.textInput(searchHandle,"");
			ui.changed = false;
			if(first) {
				first = false;
				ui.startTextEdit(searchHandle);
				ui.textSelected = searchHandle.text;
				searchHandle.text = "";
				_gthis.nodeSearchLast = "";
			}
			var search = searchHandle.text;
			if(ui.textSelected != "") {
				search = ui.textSelected;
			}
			if(search != _gthis.nodeSearchLast) {
				_gthis.nodeSearchOffset = 0;
				_gthis.nodeSearchLast = search;
			}
			if(ui.isKeyPressed) {
				if(ui.key == 40 && _gthis.nodeSearchOffset < 6) {
					_gthis.nodeSearchOffset++;
				}
				if(ui.key == 38 && _gthis.nodeSearchOffset > 0) {
					_gthis.nodeSearchOffset--;
				}
			}
			var enter = kb.down("enter");
			var count = 0;
			var BUTTON_COL = ui.t.BUTTON_COL;
			var nodeList = _gthis.canvasType == 0 ? arm_shader_NodesMaterial.list : arm_node_NodesBrush.list;
			var _g = 0;
			while(_g < nodeList.length) {
				var list = nodeList[_g];
				++_g;
				var _g1 = 0;
				while(_g1 < list.length) {
					var n = list[_g1];
					++_g1;
					if(arm_Translator.tr(n.name).toLowerCase().indexOf(search) >= 0) {
						ui.t.BUTTON_COL = count == _gthis.nodeSearchOffset ? ui.t.HIGHLIGHT_COL : ui.t.WINDOW_BG_COL;
						if(ui.button(arm_Translator.tr(n.name),0) || enter && count == _gthis.nodeSearchOffset) {
							var nodes = _gthis.getNodes();
							var canvas = _gthis.getCanvas();
							_gthis.nodeSearchSpawn = arm_ui_UINodes.makeNode(n,nodes,canvas);
							canvas.nodes.push(_gthis.nodeSearchSpawn);
							nodes.nodesSelected = [_gthis.nodeSearchSpawn];
							nodes.nodesDrag = true;
							_gthis.hwnd.redraws = 2;
							if(enter) {
								ui.changed = true;
								count = 6;
							}
							if(done != null) {
								done();
							}
						}
						if(++count > 6) {
							break;
						}
					}
				}
				if(count > 6) {
					break;
				}
			}
			if(enter && count == 0) {
				ui.changed = true;
				searchHandle.text = "";
			}
			ui.t.BUTTON_COL = BUTTON_COL;
		},0,x,y);
	}
	,getNodeX: function() {
		var x = iron_system_Input.getMouse().x - this.wx;
		var _this = this.getNodes();
		var x1 = x - (_this.panX * (_this.scaleFactor * _this.zoom) + (1.0 - _this.zoom) * _this.uiw / 2.5);
		var _this = this.getNodes();
		return x1 / (_this.scaleFactor * _this.zoom) | 0;
	}
	,getNodeY: function() {
		var x = iron_system_Input.getMouse().y - this.wy;
		var _this = this.getNodes();
		var x1 = x - (_this.panY * (_this.scaleFactor * _this.zoom) + (1.0 - _this.zoom) * _this.uih / 2.5);
		var _this = this.getNodes();
		return x1 / (_this.scaleFactor * _this.zoom) | 0;
	}
	,drawGrid: function() {
		var w = arm_Config.raw.layout[4] + 200;
		var h = arm_App.h() + 200;
		if(w < 1) {
			w = 1;
		}
		if(h < 1) {
			h = 1;
		}
		this.grid = kha_Image.createRenderTarget(w,h);
		this.grid.get_g2().begin(true,this.ui.t.SEPARATOR_COL);
		this.grid.get_g2().set_color(this.ui.t.SEPARATOR_COL - 328965);
		var _g = 0;
		var _g1 = (h / 20 | 0) + 1;
		while(_g < _g1) {
			var i = _g++;
			this.grid.get_g2().drawLine(0,i * 20,w,i * 20);
		}
		var _g = 0;
		var _g1 = (w / 20 | 0) + 1;
		while(_g < _g1) {
			var i = _g++;
			this.grid.get_g2().drawLine(i * 20,0,i * 20,h);
		}
		this.grid.get_g2().set_color(this.ui.t.SEPARATOR_COL - 592137);
		var _g = 0;
		var _g1 = (h / 100 | 0) + 1;
		while(_g < _g1) {
			var i = _g++;
			this.grid.get_g2().drawLine(0,i * 100,w,i * 100);
		}
		var _g = 0;
		var _g1 = (w / 100 | 0) + 1;
		while(_g < _g1) {
			var i = _g++;
			this.grid.get_g2().drawLine(i * 100,0,i * 100,h);
		}
		this.grid.get_g2().end();
	}
	,render: function(g) {
		if(this.recompileMat) {
			if(this.canvasType == 1) {
				arm_node_MakeMaterial.parseBrush();
				arm_Context.parseBrushInputs();
				arm_util_RenderUtil.makeBrushPreview();
				arm_ui_UISidebar.inst.hwnd1.redraws = 2;
			} else if(arm_Layers.isFillMaterial()) {
				arm_Layers.updateFillLayers();
			} else {
				arm_util_RenderUtil.makeMaterialPreview();
			}
			arm_ui_UISidebar.inst.hwnd1.redraws = 2;
			this.recompileMat = false;
		} else if(this.recompileMatFinal) {
			arm_node_MakeMaterial.parsePaintMaterial();
			if(arm_Layers.isFillMaterial()) {
				arm_util_RenderUtil.makeMaterialPreview();
			}
			if(arm_Context.tool == 3 || arm_Context.tool == 4) {
				arm_util_RenderUtil.makeDecalPreview();
			}
			arm_ui_UISidebar.inst.hwnd0.redraws = 2;
			this.recompileMatFinal = false;
			arm_Context.nodePreviewDirty = true;
		}
		var nodes = this.getNodes();
		if(nodes.nodesSelected.length > 0 && nodes.nodesSelected[0] != this.lastNodeSelected) {
			this.lastNodeSelected = nodes.nodesSelected[0];
			arm_Context.nodePreviewDirty = true;
			arm_Context.nodePreviewSocket = 0;
		}
		if(!this.show) {
			return;
		}
		if(kha_System.windowWidth() == 0 || kha_System.windowHeight() == 0) {
			return;
		}
		if(!arm_App.uiEnabled && this.ui.inputRegistered) {
			this.ui.unregisterInput();
		}
		if(arm_App.uiEnabled && !this.ui.inputRegistered) {
			this.ui.registerInput();
		}
		if(this.ui.inputStarted) {
			this.lastCanvas = JSON.parse(JSON.stringify(this.getCanvas()));
		}
		g.end();
		if(this.grid == null) {
			this.drawGrid();
		}
		if(arm_Config.raw.node_preview && arm_Context.nodePreviewDirty) {
			this.makeNodePreview();
		}
		this.ui.begin(g);
		this.ww = arm_Config.raw.layout[4];
		this.wx = (arm_App.w() | 0) + arm_ui_UIToolbar.inst.toolbarw;
		this.wy = arm_ui_UIHeader.inst.headerh * 2;
		var _this = this.ui;
		var ew = _this.t.ELEMENT_W * _this.ops.scaleFactor * 0.7 | 0;
		this.wh = arm_App.h();
		if(arm_ui_UIView2D.inst.show) {
			this.wh = arm_Config.raw.layout[5];
			this.wy = arm_App.h() - arm_Config.raw.layout[5] + arm_ui_UIHeader.inst.headerh * 2;
		}
		if(this.ui.window(this.hwnd,this.wx,this.wy,this.ww,this.wh)) {
			this.ui.g.set_color(-1);
			this.ui.g.drawImage(this.grid,nodes.panX * (nodes.scaleFactor * nodes.zoom) % 100 - 100,nodes.panY * (nodes.scaleFactor * nodes.zoom) % 100 - 100);
			var c = this.getCanvas();
			nodes.nodeCanvas(this.ui,c);
			if(arm_Config.raw.node_preview && nodes.nodesSelected.length > 0) {
				var img = null;
				var sel = nodes.nodesSelected[0];
				if(sel.type == "TEX_IMAGE") {
					var id = sel.buttons[0].default_value;
					if(id < arm_Project.assets.length) {
						img = arm_Project.getImage(arm_Project.assets[id]);
					}
				} else if(sel.type == "LAYER") {
					var id = sel.buttons[0].default_value;
					if(id < arm_Project.layers.length) {
						img = arm_Project.layers[id].texpaint_preview;
					}
				} else if(sel.type == "LAYER_MASK") {
					var id = sel.buttons[0].default_value;
					if(id < arm_Project.layers.length) {
						img = arm_Project.layers[id].texpaint_mask_preview;
					}
				} else if(sel.type == "MATERIAL") {
					var id = sel.buttons[0].default_value;
					if(id < arm_Project.materials.length) {
						img = arm_Project.materials[id].image;
					}
				} else if(sel.type == "OUTPUT_MATERIAL_PBR") {
					img = arm_Context.material.image;
				} else if(sel.type == "BrushOutputNode") {
					img = arm_Context.brush.image;
				} else if(this.canvasType == 0) {
					img = arm_Context.nodePreview;
				}
				if(img != null) {
					var tw = 80 * this.ui.ops.scaleFactor;
					var th = tw * (img.get_height() / img.get_width());
					var tx = this.ww - tw - 8 * this.ui.ops.scaleFactor;
					var ty = this.wh - th - 40 * this.ui.ops.scaleFactor;
					this.ui.g.set_color(-1);
					this.ui.g.drawScaledImage(img,tx,ty,tw,th);
				}
			}
			var ACCENT_COL = this.ui.t.ACCENT_COL;
			var BUTTON_H = this.ui.t.BUTTON_H;
			var ELEMENT_H = this.ui.t.ELEMENT_H;
			var FONT_SIZE = this.ui.fontSize;
			this.ui.t.ACCENT_COL = 0;
			this.ui.t.BUTTON_H = 30;
			this.ui.t.ELEMENT_H = 30;
			this.ui.fontSize = 22 * this.ui.ops.scaleFactor | 0;
			var _this = this.ui;
			this.ui._x = this.ww - _this.t.ELEMENT_W * _this.ops.scaleFactor * 1.4;
			var _this = this.ui;
			this.ui._y = this.wh - _this.t.ELEMENT_H * _this.ops.scaleFactor * 1.2;
			var _this = this.ui;
			this.ui._w = _this.t.ELEMENT_W * _this.ops.scaleFactor * 1.4 | 0;
			var h = zui_Handle.global.nest(94,null);
			h.text = c.name;
			c.name = this.ui.textInput(h,"",2);
			this.ui.t.ACCENT_COL = ACCENT_COL;
			this.ui.t.BUTTON_H = BUTTON_H;
			this.ui.t.ELEMENT_H = ELEMENT_H;
			this.ui.fontSize = FONT_SIZE;
			this.ui.g.set_color(this.ui.t.WINDOW_BG_COL);
			var _this = this.ui;
			var _this1 = this.ui;
			this.ui.g.fillRect(0,0,this.ww,_this.t.ELEMENT_H * _this.ops.scaleFactor + _this1.t.ELEMENT_OFFSET * _this1.ops.scaleFactor);
			this.ui.g.set_color(-1);
			this.ui._x = 0;
			this.ui._y = 0;
			this.ui._w = ew;
			var BUTTON_COL = this.ui.t.BUTTON_COL;
			this.ui.t.BUTTON_COL = this.ui.t.WINDOW_BG_COL;
			var cats = this.canvasType == 0 ? arm_shader_NodesMaterial.categories : arm_node_NodesBrush.categories;
			var _g = 0;
			var _g1 = cats.length;
			while(_g < _g1) {
				var i = _g++;
				if(this.ui.button(arm_Translator.tr(cats[i]),0) && arm_ui_UISidebar.inst.ui.comboSelectedHandle == null || this.ui.isHovered && this.drawMenu) {
					this.addNodeButton = true;
					this.menuCategory = i;
					this.popupX = this.wx + this.ui._x;
					this.popupY = this.wy + this.ui._y;
				}
				if(i < cats.length - 1) {
					this.ui._x += ew + 3;
					this.ui._y = 0;
				}
			}
			this.ui._x += ew + 3;
			this.ui._y = 0;
			if(this.ui.button(arm_Translator.tr("Search"),0)) {
				this.nodeSearch(this.ui._windowX + this.ui._x | 0,this.ui._windowY + this.ui._y | 0);
			}
			if(this.ui.isHovered) {
				this.ui.tooltip(arm_Translator.tr("Search for nodes") + (" (" + Std.string(arm_Config.keymap.node_search) + ")"));
			}
			this.ui.t.BUTTON_COL = BUTTON_COL;
		}
		this.ui.end(!this.drawMenu);
		g.begin(false);
		if(this.drawMenu) {
			var list = this.canvasType == 0 ? arm_shader_NodesMaterial.list : arm_node_NodesBrush.list;
			var ph = list[this.menuCategory].length * this.ui.t.ELEMENT_H * this.ui.ops.scaleFactor;
			var py = this.popupY;
			g.set_color(this.ui.t.WINDOW_BG_COL);
			var menuw = ew * 2.0 | 0;
			g.fillRect(this.popupX,py,menuw,ph);
			this.ui.beginRegion(g,this.popupX | 0,py | 0,menuw);
			var BUTTON_COL = this.ui.t.BUTTON_COL;
			this.ui.t.BUTTON_COL = this.ui.t.WINDOW_BG_COL;
			var ELEMENT_OFFSET = this.ui.t.ELEMENT_OFFSET;
			this.ui.t.ELEMENT_OFFSET = 0;
			var _g = 0;
			var _g1 = list[this.menuCategory];
			while(_g < _g1.length) {
				var n = _g1[_g];
				++_g;
				if(this.ui.button("      " + arm_Translator.tr(n.name),0)) {
					var canvas = this.getCanvas();
					var nodes = this.getNodes();
					var node = arm_ui_UINodes.makeNode(n,nodes,canvas);
					canvas.nodes.push(node);
					nodes.nodesSelected = [node];
					nodes.nodesDrag = true;
				}
			}
			this.ui.t.BUTTON_COL = BUTTON_COL;
			this.ui.t.ELEMENT_OFFSET = ELEMENT_OFFSET;
			this.ui.endRegion();
		}
		if(this.showMenu) {
			this.showMenu = false;
			this.drawMenu = true;
		}
		if(this.hideMenu) {
			this.hideMenu = false;
			this.drawMenu = false;
		}
	}
	,acceptAssetDrag: function(assetIndex) {
		var n = this.canvasType == 0 ? arm_shader_NodesMaterial.createNode("TEX_IMAGE") : arm_node_NodesBrush.createNode("TEX_IMAGE");
		n.buttons[0].default_value = assetIndex;
		this.getNodes().nodesSelected = [n];
	}
	,acceptLayerDrag: function(layerIndex) {
		if(arm_Project.layers[layerIndex].getChildren() != null) {
			return;
		}
		var n = arm_shader_NodesMaterial.createNode(arm_Context.layerIsMask ? "LAYER_MASK" : "LAYER");
		n.buttons[0].default_value = layerIndex;
		this.getNodes().nodesSelected = [n];
	}
	,acceptMaterialDrag: function(layerIndex) {
		var n = arm_shader_NodesMaterial.createNode("MATERIAL");
		n.buttons[0].default_value = layerIndex;
		this.getNodes().nodesSelected = [n];
	}
	,makeNodePreview: function() {
		var nodes = arm_Context.material.nodes;
		if(nodes.nodesSelected.length == 0) {
			return;
		}
		var node = nodes.nodesSelected[0];
		if(node.type == "TEX_IMAGE" || node.type == "LAYER" || node.type == "LAYER_MASK" || node.type == "MATERIAL" || node.type == "OUTPUT_MATERIAL_PBR") {
			return;
		}
		if(arm_Context.material.canvas.nodes.indexOf(node) == -1) {
			return;
		}
		if(arm_Context.nodePreview == null) {
			arm_Context.nodePreview = kha_Image.createRenderTarget(256,256);
		}
		arm_Context.nodePreviewDirty = false;
		arm_ui_UINodes.inst.hwnd.redraws = 2;
		arm_util_RenderUtil.makeNodePreview(arm_Context.material.canvas,node,arm_Context.nodePreview);
	}
	,__class__: arm_ui_UINodes
};
var arm_ui_UISidebar = function() {
	this.borderHandle = null;
	this.borderStarted = 0;
	this.htab2 = zui_Handle.global.nest(155,null);
	this.htab1 = zui_Handle.global.nest(135,null);
	this.htab0 = zui_Handle.global.nest(88,null);
	this.hwnd2 = zui_Handle.global.nest(5,null);
	this.hwnd1 = zui_Handle.global.nest(4,null);
	this.hwnd0 = zui_Handle.global.nest(3,null);
	this.isScrolling = false;
	this.show = true;
	this.tabx = 0;
	arm_ui_UISidebar.inst = this;
	new arm_ui_UIToolbar();
	new arm_ui_UIHeader();
	new arm_ui_UIStatus();
	new arm_ui_UIMenubar();
	arm_Context.textToolText = arm_Translator.tr("Text");
	arm_ui_UIToolbar.inst.toolbarw = 36 * arm_Config.raw.window_scale | 0;
	arm_ui_UIHeader.inst.headerh = 28 * arm_Config.raw.window_scale | 0;
	arm_ui_UIMenubar.inst.menubarw = 330 * arm_Config.raw.window_scale | 0;
	if(arm_Project.materials == null) {
		arm_Project.materials = [];
		iron_data_Data.getMaterial("Scene","Material",function(m) {
			arm_Project.materials.push(new arm_data_MaterialSlot(m));
			arm_Context.material = arm_Project.materials[0];
		});
	}
	if(arm_Project.materialsScene == null) {
		arm_Project.materialsScene = [];
		iron_data_Data.getMaterial("Scene","Material2",function(m) {
			arm_Project.materialsScene.push(new arm_data_MaterialSlot(m));
			arm_Context.materialScene = arm_Project.materialsScene[0];
		});
	}
	if(arm_Project.brushes == null) {
		arm_Project.brushes = [];
		arm_Project.brushes.push(new arm_data_BrushSlot());
		arm_Context.brush = arm_Project.brushes[0];
		arm_node_MakeMaterial.parseBrush();
		arm_Context.parseBrushInputs();
	}
	if(arm_Project.fonts == null) {
		arm_Project.fonts = [];
		var fontNames = arm_App.font.getFontNames();
		arm_Project.fonts.push(new arm_data_FontSlot(fontNames.length > 0 ? fontNames[0] : "default.ttf",arm_App.font));
		arm_Context.font = arm_Project.fonts[0];
	}
	if(arm_Project.layers == null) {
		arm_Project.layers = [];
		arm_Project.layers.push(new arm_data_LayerSlot());
		arm_Context.layer = arm_Project.layers[0];
	}
	if(arm_Context.emptyEnvmap == null) {
		var b = new haxe_io_Bytes(new ArrayBuffer(4));
		b.b[0] = 3;
		b.b[1] = 3;
		b.b[2] = 3;
		b.b[3] = 255;
		arm_Context.emptyEnvmap = kha_Image.fromBytes(b,1,1);
	}
	if(arm_Context.previewEnvmap == null) {
		var b = new haxe_io_Bytes(new ArrayBuffer(4));
		b.b[0] = 0;
		b.b[1] = 0;
		b.b[2] = 0;
		b.b[3] = 255;
		arm_Context.previewEnvmap = kha_Image.fromBytes(b,1,1);
	}
	var world = iron_Scene.active.world;
	if(arm_Context.savedEnvmap == null) {
		arm_Context.defaultIrradiance = world.probe.irradiance;
		arm_Context.defaultRadiance = world.probe.radiance;
		arm_Context.defaultRadianceMipmaps = world.probe.radianceMipmaps;
	}
	world.envmap = arm_Context.showEnvmap ? arm_Context.savedEnvmap : arm_Context.emptyEnvmap;
	arm_Context.ddirty = 1;
	this.ui = new zui_Zui({ theme : arm_App.theme, font : arm_App.font, scaleFactor : arm_Config.raw.window_scale, color_wheel : arm_App.colorWheel});
	zui_Zui.onBorderHover = $bind(this,this.onBorderHover);
	zui_Zui.onTextHover = $bind(this,this.onTextHover);
	arm_Res.load(["cursor.k","icons.k"],$bind(this,this.done));
	arm_Context.projectObjects = [];
	var _g = 0;
	var _g1 = iron_Scene.active.meshes;
	while(_g < _g1.length) arm_Context.projectObjects.push(_g1[_g++]);
};
$hxClasses["arm.ui.UISidebar"] = arm_ui_UISidebar;
arm_ui_UISidebar.__name__ = "arm.ui.UISidebar";
arm_ui_UISidebar.hitRect = function(mx,my,x,y,w,h) {
	if(mx > x && mx < x + w && my > y) {
		return my < y + h;
	} else {
		return false;
	}
};
arm_ui_UISidebar.prototype = {
	done: function() {
		if(this.ui.ops.scaleFactor > 1) {
			this.setIconScale();
		}
		arm_Context.gizmo = iron_Scene.active.getChild(".GizmoTranslate");
		var _this = arm_Context.gizmo.transform.scale;
		_this.x = 0.5;
		_this.y = 0.5;
		_this.z = 0.5;
		_this.w = 1.0;
		arm_Context.gizmo.transform.buildMatrix();
		arm_Context.gizmoX = iron_Scene.active.getChild("GizmoX");
		arm_Context.gizmoY = iron_Scene.active.getChild("GizmoY");
		arm_Context.gizmoZ = iron_Scene.active.getChild("GizmoZ");
		arm_Context.object = iron_Scene.active.getChild("Cube");
		arm_Context.paintObject = js_Boot.__cast(arm_Context.object , iron_object_MeshObject);
		arm_Project.paintObjects = [arm_Context.paintObject];
		if(arm_Project.filepath == "") {
			iron_App.notifyOnInit(arm_Layers.initLayers);
		}
		if(arm_Config.raw.plugins != null) {
			var _g = 0;
			var _g1 = arm_Config.raw.plugins;
			while(_g < _g1.length) arm_Plugin.start(_g1[_g++]);
		}
	}
	,update: function() {
		this.isScrolling = this.ui.isScrolling;
		this.updateUI();
		var p = haxe_ds_StringMap.valueIterator(arm_Plugin.plugins.h);
		while(p.hasNext()) {
			var p1 = p.next();
			if(p1.update != null) {
				p1.update();
			}
		}
		if(!arm_App.uiEnabled) {
			return;
		}
		if(!arm_ui_UINodes.inst.ui.isTyping && !this.ui.isTyping) {
			if(arm_Operator.shortcut(arm_Config.keymap.cycle_layers)) {
				arm_Context.setLayer(arm_Project.layers[(arm_Project.layers.indexOf(arm_Context.layer) + 1) % arm_Project.layers.length]);
			} else if(arm_Operator.shortcut(arm_Config.keymap.toggle_2d_view)) {
				this.show2DView(0);
			} else if(arm_Operator.shortcut(arm_Config.keymap.toggle_node_editor)) {
				if(arm_ui_UINodes.inst.canvasType == 0) {
					this.showMaterialNodes();
				} else {
					this.showBrushNodes();
				}
			} else if(arm_Operator.shortcut(arm_Config.keymap.toggle_browser)) {
				this.toggleBrowser();
			}
		}
		if(arm_Operator.shortcut(arm_Config.keymap.file_save_as)) {
			arm_Project.projectSaveAs();
		} else if(arm_Operator.shortcut(arm_Config.keymap.file_save)) {
			arm_Project.projectSave();
		} else if(arm_Operator.shortcut(arm_Config.keymap.file_open)) {
			arm_Project.projectOpen();
		} else if(arm_Operator.shortcut(arm_Config.keymap.file_open_recent)) {
			arm_Project.projectOpenRecentBox();
		} else if(arm_Operator.shortcut(arm_Config.keymap.file_reimport_mesh)) {
			arm_Project.reimportMesh();
		} else if(arm_Operator.shortcut(arm_Config.keymap.file_reimport_textures)) {
			arm_Project.reimportTextures();
		} else if(arm_Operator.shortcut(arm_Config.keymap.file_new)) {
			arm_Project.projectNewBox();
		} else if(arm_Operator.shortcut(arm_Config.keymap.file_export_textures)) {
			if(arm_Context.textureExportPath == "") {
				arm_Context.layersExport = 0;
				arm_ui_BoxExport.showTextures();
			} else {
				iron_App.notifyOnInit(function() {
					arm_io_ExportTexture.run(arm_Context.textureExportPath);
				});
			}
		} else if(arm_Operator.shortcut(arm_Config.keymap.file_export_textures_as)) {
			arm_Context.layersExport = 0;
			arm_ui_BoxExport.showTextures();
		} else if(arm_Operator.shortcut(arm_Config.keymap.file_import_assets)) {
			arm_Project.importAsset();
		} else if(arm_Operator.shortcut(arm_Config.keymap.edit_prefs)) {
			arm_ui_BoxPreferences.show();
		}
		var kb = iron_system_Input.getKeyboard();
		if(kb.started(arm_Config.keymap.view_distract_free) || kb.started("escape") && !this.show && !arm_ui_UIBox.show) {
			this.toggleDistractFree();
		}
		var mouse = iron_system_Input.getMouse();
		if((arm_Context.brushCanLock || arm_Context.brushLocked) && mouse.moved) {
			if(arm_Operator.shortcut(arm_Config.keymap.brush_radius,2) || arm_Operator.shortcut(arm_Config.keymap.brush_opacity,2) || arm_Operator.shortcut(arm_Config.keymap.brush_angle,2)) {
				if(arm_Context.brushLocked) {
					if(arm_Operator.shortcut(arm_Config.keymap.brush_opacity,2)) {
						arm_Context.brushOpacity += mouse.movementX / 500;
						arm_Context.brushOpacity = Math.max(0.0,Math.min(1.0,arm_Context.brushOpacity));
						arm_Context.brushOpacity = Math.round(arm_Context.brushOpacity * 100) / 100;
						arm_Context.brushOpacityHandle.value = arm_Context.brushOpacity;
					} else if(arm_Operator.shortcut(arm_Config.keymap.brush_angle,2)) {
						arm_Context.brushAngle -= mouse.movementX / 5;
						arm_Context.brushAngle = (arm_Context.brushAngle | 0) % 360;
						if(arm_Context.brushAngle < 0) {
							arm_Context.brushAngle += 360;
						}
						arm_Context.brushAngleHandle.value = arm_Context.brushAngle;
						arm_node_MakeMaterial.parsePaintMaterial();
					} else {
						arm_Context.brushRadius += mouse.movementX / 150;
						arm_Context.brushRadius = Math.max(0.05,Math.min(4.0,arm_Context.brushRadius));
						arm_Context.brushRadius = Math.round(arm_Context.brushRadius * 100) / 100;
						arm_Context.brushRadiusHandle.value = arm_Context.brushRadius;
					}
					arm_ui_UIHeader.inst.headerHandle.redraws = 2;
				} else if(arm_Context.brushCanLock) {
					arm_Context.brushCanLock = false;
					arm_Context.brushLocked = true;
				}
			}
		}
		var right = arm_App.w();
		if(arm_ui_UIView2D.inst.show) {
			right += arm_ui_UIView2D.inst.ww;
		}
		if(mouse.x - arm_App.x() > 0 && mouse.x - arm_App.x() < right && mouse.y - arm_App.y() > 0 && mouse.y - arm_App.y() < arm_App.h() && !this.ui.isTyping && !arm_ui_UIView2D.inst.ui.isTyping && !arm_ui_UINodes.inst.ui.isTyping) {
			if(arm_ui_UIHeader.inst.worktab.position == 0) {
				if(kb.down("shift")) {
					if(kb.started("1")) {
						arm_Context.selectMaterial(0);
					} else if(kb.started("2")) {
						arm_Context.selectMaterial(1);
					} else if(kb.started("3")) {
						arm_Context.selectMaterial(2);
					} else if(kb.started("4")) {
						arm_Context.selectMaterial(3);
					} else if(kb.started("5")) {
						arm_Context.selectMaterial(4);
					} else if(kb.started("6")) {
						arm_Context.selectMaterial(5);
					}
				}
				if(!mouse.down("right")) {
					if(arm_Operator.shortcut(arm_Config.keymap.tool_brush)) {
						arm_Context.selectTool(0);
					} else if(arm_Operator.shortcut(arm_Config.keymap.tool_eraser)) {
						arm_Context.selectTool(1);
					} else if(arm_Operator.shortcut(arm_Config.keymap.tool_fill)) {
						arm_Context.selectTool(2);
					} else if(arm_Operator.shortcut(arm_Config.keymap.tool_colorid)) {
						arm_Context.selectTool(8);
					} else if(arm_Operator.shortcut(arm_Config.keymap.tool_decal)) {
						arm_Context.selectTool(3);
					} else if(arm_Operator.shortcut(arm_Config.keymap.tool_text)) {
						arm_Context.selectTool(4);
					} else if(arm_Operator.shortcut(arm_Config.keymap.tool_clone)) {
						arm_Context.selectTool(5);
					} else if(arm_Operator.shortcut(arm_Config.keymap.tool_blur)) {
						arm_Context.selectTool(6);
					} else if(arm_Operator.shortcut(arm_Config.keymap.tool_particle)) {
						arm_Context.selectTool(7);
					} else if(arm_Operator.shortcut(arm_Config.keymap.tool_picker)) {
						arm_Context.selectTool(9);
					} else if(arm_Operator.shortcut(arm_Config.keymap.swap_brush_eraser)) {
						arm_Context.selectTool(arm_Context.tool == 0 ? 1 : 0);
					}
				}
				if(arm_Context.tool == 0 || arm_Context.tool == 1 || arm_Context.tool == 3 || arm_Context.tool == 4 || arm_Context.tool == 5 || arm_Context.tool == 6 || arm_Context.tool == 7) {
					if(arm_Operator.shortcut(arm_Config.keymap.brush_radius) || arm_Operator.shortcut(arm_Config.keymap.brush_opacity) || arm_Operator.shortcut(arm_Config.keymap.brush_angle)) {
						arm_Context.brushCanLock = true;
						if(!iron_system_Input.getPen().connected) {
							mouse.lock();
						}
						arm_Context.lockStartedX = mouse.x;
						arm_Context.lockStartedY = mouse.y;
					} else if(arm_Operator.shortcut(arm_Config.keymap.brush_radius_decrease,1)) {
						arm_Context.brushRadius -= 0.1;
						arm_Context.brushRadius = Math.max(Math.round(arm_Context.brushRadius * 100) / 100,0.01);
						arm_Context.brushRadiusHandle.value = arm_Context.brushRadius;
						arm_ui_UIHeader.inst.headerHandle.redraws = 2;
					} else if(arm_Operator.shortcut(arm_Config.keymap.brush_radius_increase,1)) {
						arm_Context.brushRadius += 0.1;
						arm_Context.brushRadius = Math.round(arm_Context.brushRadius * 100) / 100;
						arm_Context.brushRadiusHandle.value = arm_Context.brushRadius;
						arm_ui_UIHeader.inst.headerHandle.redraws = 2;
					}
				}
			}
			if(arm_Operator.shortcut(arm_Config.keymap.view_reset)) {
				arm_util_ViewportUtil.resetViewport();
				arm_util_ViewportUtil.scaleToBounds();
			} else if(arm_Operator.shortcut(arm_Config.keymap.view_back)) {
				arm_util_ViewportUtil.setView(0,1,0,Math.PI / 2,0,Math.PI);
			} else if(arm_Operator.shortcut(arm_Config.keymap.view_front)) {
				arm_util_ViewportUtil.setView(0,-1,0,Math.PI / 2,0,0);
			} else if(arm_Operator.shortcut(arm_Config.keymap.view_left)) {
				arm_util_ViewportUtil.setView(-1,0,0,Math.PI / 2,0,-Math.PI / 2);
			} else if(arm_Operator.shortcut(arm_Config.keymap.view_right)) {
				arm_util_ViewportUtil.setView(1,0,0,Math.PI / 2,0,Math.PI / 2);
			} else if(arm_Operator.shortcut(arm_Config.keymap.view_bottom)) {
				arm_util_ViewportUtil.setView(0,0,-1,Math.PI,0,Math.PI);
			} else if(arm_Operator.shortcut(arm_Config.keymap.view_top)) {
				arm_util_ViewportUtil.setView(0,0,1,0,0,0);
			} else if(arm_Operator.shortcut(arm_Config.keymap.view_camera_type)) {
				arm_Context.cameraType = arm_Context.cameraType == 0 ? 1 : 0;
				arm_Context.camHandle.position = arm_Context.cameraType;
				arm_util_ViewportUtil.updateCameraType(arm_Context.cameraType);
			} else if(arm_Operator.shortcut(arm_Config.keymap.view_orbit_left,1)) {
				arm_util_ViewportUtil.orbit(-Math.PI / 12,0);
			} else if(arm_Operator.shortcut(arm_Config.keymap.view_orbit_right,1)) {
				arm_util_ViewportUtil.orbit(Math.PI / 12,0);
			} else if(arm_Operator.shortcut(arm_Config.keymap.view_orbit_up,1)) {
				arm_util_ViewportUtil.orbit(0,-Math.PI / 12);
			} else if(arm_Operator.shortcut(arm_Config.keymap.view_orbit_down,1)) {
				arm_util_ViewportUtil.orbit(0,Math.PI / 12);
			} else if(arm_Operator.shortcut(arm_Config.keymap.view_orbit_opposite)) {
				arm_util_ViewportUtil.orbitOpposite();
			} else if(arm_Operator.shortcut(arm_Config.keymap.view_zoom_in,1)) {
				arm_util_ViewportUtil.zoom(0.2);
			} else if(arm_Operator.shortcut(arm_Config.keymap.view_zoom_out,1)) {
				arm_util_ViewportUtil.zoom(-0.2);
			}
		}
		if(arm_Context.brushCanLock || arm_Context.brushLocked) {
			if(mouse.moved && arm_Context.brushCanUnlock) {
				arm_Context.brushLocked = false;
				arm_Context.brushCanUnlock = false;
			}
			if(arm_Context.brushLocked && !arm_Operator.shortcut(arm_Config.keymap.brush_radius,2) && !arm_Operator.shortcut(arm_Config.keymap.brush_opacity,2) && !arm_Operator.shortcut(arm_Config.keymap.brush_angle,2)) {
				mouse.unlock();
				arm_Context.brushCanUnlock = true;
				arm_Context.lastPaintX = -1;
				arm_Context.lastPaintY = -1;
			}
		}
		if(this.borderHandle != null) {
			if(this.borderHandle == arm_ui_UINodes.inst.hwnd || this.borderHandle == arm_ui_UIView2D.inst.hwnd) {
				if(this.borderStarted == 0) {
					arm_Config.raw.layout[4] -= mouse.movementX | 0;
					if(arm_Config.raw.layout[4] < 32) {
						arm_Config.raw.layout[4] = 32;
					} else if(arm_Config.raw.layout[4] > kha_System.windowWidth() * 0.7) {
						arm_Config.raw.layout[4] = kha_System.windowWidth() * 0.7 | 0;
					}
				} else {
					arm_Config.raw.layout[5] -= mouse.movementY | 0;
					if(arm_Config.raw.layout[5] < 32) {
						arm_Config.raw.layout[5] = 32;
					} else if(arm_Config.raw.layout[5] > arm_App.h() * 0.95) {
						arm_Config.raw.layout[5] = arm_App.h() * 0.95 | 0;
					}
				}
			} else if(this.borderHandle == arm_ui_UIStatus.inst.statusHandle) {
				var my = mouse.movementY | 0;
				if(arm_Config.raw.layout[6] - my >= 32 * arm_Config.raw.window_scale && arm_Config.raw.layout[6] - my < kha_System.windowHeight() * 0.7) {
					arm_Config.raw.layout[6] -= my;
				}
			} else if(this.borderStarted == 0) {
				arm_Config.raw.layout[0] -= mouse.movementX | 0;
				if(arm_Config.raw.layout[0] < 32) {
					arm_Config.raw.layout[0] = 32;
				} else if(arm_Config.raw.layout[0] > kha_System.windowWidth() - 32) {
					arm_Config.raw.layout[0] = kha_System.windowWidth() - 32;
				}
			} else {
				var my = mouse.movementY | 0;
				if(this.borderHandle == this.hwnd1 && this.borderStarted == 2) {
					if(arm_Config.raw.layout[1] + my > 32 && arm_Config.raw.layout[2] - my > 32) {
						arm_Config.raw.layout[1] += my;
						arm_Config.raw.layout[2] -= my;
					}
				} else if(this.borderHandle == this.hwnd2 && this.borderStarted == 2) {
					if(arm_Config.raw.layout[2] + my > 32 && arm_Config.raw.layout[3] - my > 32) {
						arm_Config.raw.layout[2] += my;
						arm_Config.raw.layout[3] -= my;
					}
				}
			}
		}
		if(!mouse.down()) {
			this.borderHandle = null;
			arm_App.isResizing = false;
		}
	}
	,toggleDistractFree: function() {
		this.show = !this.show;
		arm_App.resize();
	}
	,getBrushStencilRect: function() {
		return { w : arm_Context.brushStencilImage.get_width() * (arm_App.h() / arm_Context.brushStencilImage.get_height()) * arm_Context.brushStencilScale | 0, h : arm_App.h() * arm_Context.brushStencilScale | 0, x : arm_App.x() + arm_Context.brushStencilX * arm_App.w() | 0, y : arm_App.y() + arm_Context.brushStencilY * arm_App.h() | 0};
	}
	,updateUI: function() {
		if(arm_Log.messageTimer > 0) {
			arm_Log.messageTimer -= 1 / iron_system_Time.frequency * iron_system_Time.scale;
			if(arm_Log.messageTimer <= 0) {
				arm_ui_UIStatus.inst.statusHandle.redraws = 2;
			}
		}
		if(!arm_App.uiEnabled) {
			return;
		}
		var mouse = iron_system_Input.getMouse();
		var kb = iron_system_Input.getKeyboard();
		if(arm_Context.brushStencilImage != null && arm_Operator.shortcut(arm_Config.keymap.stencil_transform,2)) {
			var r = this.getBrushStencilRect();
			if(mouse.started("left")) {
				arm_Context.brushStencilScaling = arm_ui_UISidebar.hitRect(mouse.x,mouse.y,r.x - 8,r.y - 8,16,16) || arm_ui_UISidebar.hitRect(mouse.x,mouse.y,r.x - 8,r.h + r.y - 8,16,16) || arm_ui_UISidebar.hitRect(mouse.x,mouse.y,r.w + r.x - 8,r.y - 8,16,16) || arm_ui_UISidebar.hitRect(mouse.x,mouse.y,r.w + r.x - 8,r.h + r.y - 8,16,16);
				var cosa = Math.cos(-arm_Context.brushStencilAngle);
				var sina = Math.sin(-arm_Context.brushStencilAngle);
				var oy = -r.h / 2;
				var x = 0 * cosa - oy * sina;
				var y = 0 * sina + oy * cosa;
				x += r.x + r.w / 2;
				y += r.y + r.h / 2;
				arm_Context.brushStencilRotating = arm_ui_UISidebar.hitRect(mouse.x,mouse.y,x - 16 | 0,y - 16 | 0,32,32);
			}
			var _scale = arm_Context.brushStencilScale;
			if(mouse.down("left")) {
				if(arm_Context.brushStencilScaling) {
					arm_Context.brushStencilScale += mouse.movementX / 400 * (mouse.x > r.x + r.w / 2 ? 1 : -1);
				} else if(arm_Context.brushStencilRotating) {
					arm_Context.brushStencilAngle = -Math.atan2(mouse.y - (r.y + r.h / 2),mouse.x - (r.x + r.w / 2)) - Math.PI / 2;
				} else {
					arm_Context.brushStencilX += mouse.movementX / arm_App.w();
					arm_Context.brushStencilY += mouse.movementY / arm_App.h();
				}
			} else {
				arm_Context.brushStencilScaling = false;
			}
			if(mouse.wheelDelta != 0) {
				arm_Context.brushStencilScale -= mouse.wheelDelta / 10;
			}
			var ratio = arm_App.h() / arm_Context.brushStencilImage.get_height();
			var oldW = _scale * arm_Context.brushStencilImage.get_width() * ratio;
			var newW = arm_Context.brushStencilScale * arm_Context.brushStencilImage.get_width() * ratio;
			var oldH = _scale * arm_App.h();
			var newH = arm_Context.brushStencilScale * arm_App.h();
			arm_Context.brushStencilX += (oldW - newW) / arm_App.w() / 2;
			arm_Context.brushStencilY += (oldH - newH) / arm_App.h() / 2;
		}
		var decalMask = (arm_Context.tool == 3 || arm_Context.tool == 4) && arm_Operator.shortcut(Std.string(arm_Config.keymap.decal_mask) + "+" + Std.string(arm_Config.keymap.action_paint),2);
		var setCloneSource = arm_Context.tool == 5 && arm_Operator.shortcut(Std.string(arm_Config.keymap.set_clone_source) + "+" + Std.string(arm_Config.keymap.action_paint),2);
		if(arm_Operator.shortcut(arm_Config.keymap.action_paint,2) || decalMask || setCloneSource || arm_Operator.shortcut(Std.string(arm_Config.keymap.brush_ruler) + "+" + Std.string(arm_Config.keymap.action_paint),2) || iron_system_Input.getPen().down() && !kb.down("alt")) {
			var mx = mouse.x - arm_App.x();
			var my = mouse.y - arm_App.y();
			var ww = arm_App.w();
			if(arm_Context.paint2d) {
				mx -= arm_App.w();
				ww = arm_ui_UIView2D.inst.ww;
			}
			if(mx < ww && mx > arm_App.x() && my < arm_App.h() && my > arm_App.y()) {
				if(setCloneSource) {
					arm_Context.cloneStartX = mx;
					arm_Context.cloneStartY = my;
				} else {
					if(arm_Context.brushTime == 0 && !arm_App.isDragging && !arm_App.isResizing && this.ui.comboSelectedHandle == null) {
						if(arm_Operator.shortcut(Std.string(arm_Config.keymap.brush_ruler) + "+" + Std.string(arm_Config.keymap.action_paint),2)) {
							arm_Context.lastPaintVecX = arm_Context.lastPaintX;
							arm_Context.lastPaintVecY = arm_Context.lastPaintY;
						}
						arm_History.pushUndo = true;
						if(arm_Context.tool == 5 && arm_Context.cloneStartX >= 0.0) {
							arm_Context.cloneDeltaX = (arm_Context.cloneStartX - mx) / ww;
							arm_Context.cloneDeltaY = (arm_Context.cloneStartY - my) / arm_App.h();
							arm_Context.cloneStartX = -1;
						} else if(arm_Context.tool == 7) {
							iron_Scene.active.getChild(".ParticleEmitter").particleSystems[0].time = 0;
						}
					}
					arm_Context.brushTime += 1 / iron_system_Time.frequency * iron_system_Time.scale;
					if(arm_Context.runBrush != null) {
						arm_Context.runBrush(0);
					}
				}
			}
		} else if(arm_Context.brushTime > 0) {
			arm_Context.brushTime = 0;
			arm_Context.prevPaintVecX = -1;
			arm_Context.prevPaintVecY = -1;
			arm_Context.ddirty = 3;
			arm_Context.brushBlendDirty = true;
			arm_Context.layerPreviewDirty = true;
		}
		if(arm_Context.layersPreviewDirty) {
			arm_Context.layersPreviewDirty = false;
			arm_Context.layerPreviewDirty = false;
			if(arm_Layers.pipeMerge == null) {
				arm_Layers.makePipe();
			}
			var _g = 0;
			var _g1 = arm_Project.layers;
			while(_g < _g1.length) {
				var l = _g1[_g];
				++_g;
				if(l.getChildren() != null) {
					continue;
				}
				var target = l.texpaint_preview;
				var source = l.texpaint;
				var g2 = target.get_g2();
				g2.begin(true,0);
				g2.set_pipeline(arm_Layers.pipeCopy);
				g2.drawScaledImage(source,0,0,target.get_width(),target.get_height());
				g2.set_pipeline(null);
				g2.end();
				if(l.texpaint_mask != null) {
					var target1 = l.texpaint_mask_preview;
					var source1 = l.texpaint_mask;
					var g21 = target1.get_g2();
					g21.begin(true,0);
					g21.set_pipeline(arm_Layers.pipeCopy8);
					g21.drawScaledImage(source1,0,0,target1.get_width(),target1.get_height());
					g21.set_pipeline(null);
					g21.end();
				}
			}
			this.hwnd0.redraws = 2;
		}
		if(arm_Context.layerPreviewDirty && arm_Context.layer.getChildren() == null) {
			arm_Context.layerPreviewDirty = false;
			if(arm_Layers.pipeMerge == null) {
				arm_Layers.makePipe();
			}
			var l = arm_Context.layer;
			var target = arm_Context.layerIsMask ? l.texpaint_mask_preview : l.texpaint_preview;
			var source = arm_Context.layerIsMask ? l.texpaint_mask : l.texpaint;
			var g2 = target.get_g2();
			g2.begin(true,0);
			g2.set_pipeline(arm_Context.layerIsMask ? arm_Layers.pipeCopy8 : arm_Layers.pipeCopy);
			g2.drawScaledImage(source,0,0,target.get_width(),target.get_height());
			g2.set_pipeline(null);
			g2.end();
			this.hwnd0.redraws = 2;
		}
		var undoPressed = arm_Operator.shortcut(arm_Config.keymap.edit_undo);
		var redoPressed = arm_Operator.shortcut(arm_Config.keymap.edit_redo) || kb.down("control") && kb.started("y");
		if(undoPressed) {
			arm_History.undo();
		} else if(redoPressed) {
			arm_History.redo();
		}
		arm_plugin_Gizmo.update();
		if(arm_Context.lastCombo != null || this.ui.tooltipImg == null && arm_Context.lastTooltip != null) {
			arm_App.redrawUI();
		}
		arm_Context.lastCombo = this.ui.comboSelectedHandle;
		arm_Context.lastTooltip = this.ui.tooltipImg;
	}
	,render: function(g) {
		if(kha_System.windowWidth() == 0 || kha_System.windowHeight() == 0) {
			return;
		}
		if(!arm_App.uiEnabled && this.ui.inputRegistered) {
			this.ui.unregisterInput();
		}
		if(arm_App.uiEnabled && !this.ui.inputRegistered) {
			this.ui.registerInput();
		}
		if(!this.show) {
			return;
		}
		g.end();
		this.ui.begin(g);
		arm_ui_UIToolbar.inst.renderUI(g);
		arm_ui_UIMenubar.inst.renderUI(g);
		arm_ui_UIHeader.inst.renderUI(g);
		arm_ui_UIStatus.inst.renderUI(g);
		this.tabx = kha_System.windowWidth() - arm_Config.raw.layout[0];
		if(this.ui.window(this.hwnd0,this.tabx,0,arm_Config.raw.layout[0],arm_Config.raw.layout[1])) {
			arm_ui_TabLayers.draw();
			arm_ui_TabHistory.draw();
			arm_ui_TabPlugins.draw();
			if(arm_ui_UIHeader.inst.worktab.position == 3) {
				arm_ui_TabOutliner.draw();
			}
		}
		if(this.ui.window(this.hwnd1,this.tabx,arm_Config.raw.layout[1],arm_Config.raw.layout[0],arm_Config.raw.layout[2])) {
			if(arm_ui_UIHeader.inst.worktab.position != 3) {
				arm_Context.object = arm_Context.paintObject;
			}
			arm_ui_TabMaterials.draw();
			arm_ui_TabBrushes.draw();
			arm_ui_TabParticles.draw();
			if(arm_ui_UIHeader.inst.worktab.position == 3) {
				arm_ui_TabProperties.draw();
			}
		}
		if(this.ui.window(this.hwnd2,this.tabx,arm_Config.raw.layout[1] + arm_Config.raw.layout[2],arm_Config.raw.layout[0],arm_Config.raw.layout[3])) {
			arm_ui_TabTextures.draw();
			arm_ui_TabMeshes.draw();
			arm_ui_TabFonts.draw();
		}
		this.ui.end();
		g.begin(false);
	}
	,renderCursor: function(g) {
		g.set_color(-1);
		if(arm_App.uiEnabled && arm_ui_UIHeader.inst.worktab.position == 0) {
			arm_Context.viewIndex = arm_Context.viewIndexLast;
			var mx = arm_App.x() + arm_Context.paintVec.x * arm_App.w();
			var my = arm_App.y() + arm_Context.paintVec.y * arm_App.h();
			arm_Context.viewIndex = -1;
			if(arm_Context.brushLocked) {
				mx += arm_Context.lockStartedX - kha_System.windowWidth() / 2;
				my += arm_Context.lockStartedY - kha_System.windowHeight() / 2;
			}
			if(arm_Context.brushStencilImage != null && arm_Context.tool != 11 && arm_Context.tool != 9 && arm_Context.tool != 8) {
				var r = this.getBrushStencilRect();
				if(!arm_Operator.shortcut(arm_Config.keymap.stencil_hide,2)) {
					g.set_color(-1996488705);
					g.pushRotation(-arm_Context.brushStencilAngle,r.x + r.w / 2,r.y + r.h / 2);
					g.drawScaledImage(arm_Context.brushStencilImage,r.x,r.y,r.w,r.h);
					g.popTransformation();
					g.set_color(-1);
				}
				if(arm_Operator.shortcut(arm_Config.keymap.stencil_transform,2)) {
					g.drawRect(r.x,r.y,r.w,r.h);
					g.drawRect(r.x - 8,r.y - 8,16,16);
					g.drawRect(r.x - 8 + r.w,r.y - 8,16,16);
					g.drawRect(r.x - 8,r.y - 8 + r.h,16,16);
					g.drawRect(r.x - 8 + r.w,r.y - 8 + r.h,16,16);
					g.pushRotation(-arm_Context.brushStencilAngle,r.x + r.w / 2,r.y + r.h / 2);
					kha_graphics2_GraphicsExtension.fillCircle(g,r.x + r.w / 2,r.y - 4,8);
					g.popTransformation();
				}
			}
			if(arm_Context.tool == 9 && arm_Context.pickerSelectMaterial) {
				g.drawImage(arm_Context.material.imageIcon,mx + 10,my + 10);
			}
			var cursorImg = arm_Res.bundled.h["cursor.k"];
			var psize = cursorImg.get_width() * (arm_Context.brushRadius * arm_Context.brushNodesRadius) * this.ui.ops.scaleFactor | 0;
			var mouse = iron_system_Input.getMouse();
			var pen = iron_system_Input.getPen();
			var kb = iron_system_Input.getKeyboard();
			if(arm_Context.tool == 5 && !kb.down("alt") && (mouse.down() || pen.down())) {
				g.set_color(1728053247);
				g.drawScaledImage(cursorImg,mx + arm_Context.cloneDeltaX * arm_App.w() - psize / 2,my + arm_Context.cloneDeltaY * arm_App.h() - psize / 2,psize,psize);
				g.set_color(-1);
			}
			var decal = arm_Context.tool == 3 || arm_Context.tool == 4;
			if(!arm_Config.raw.brush_3d || arm_ui_UIView2D.inst.show && arm_ui_UIView2D.inst.type == 0 && mx > arm_ui_UIView2D.inst.wx && mx < arm_ui_UIView2D.inst.wx + arm_ui_UIView2D.inst.ww && my > arm_ui_UIView2D.inst.wy && my < arm_ui_UIView2D.inst.wy + arm_ui_UIView2D.inst.wh || decal && !arm_Config.raw.brush_live) {
				if(decal && !(arm_ui_UINodes.inst.show && mx > arm_ui_UINodes.inst.wx && mx < arm_ui_UINodes.inst.wx + arm_ui_UINodes.inst.ww && my > arm_ui_UINodes.inst.wy && my < arm_ui_UINodes.inst.wy + arm_ui_UINodes.inst.wh)) {
					var psizex = 256 * this.ui.ops.scaleFactor * (arm_Context.brushRadius * arm_Context.brushNodesRadius * arm_Context.brushScaleX) | 0;
					var psizey = 256 * this.ui.ops.scaleFactor * (arm_Context.brushRadius * arm_Context.brushNodesRadius) | 0;
					var decalAlpha = 0.5;
					if(!arm_Operator.shortcut(arm_Config.keymap.decal_mask,2)) {
						arm_Context.decalX = arm_Context.paintVec.x;
						arm_Context.decalY = arm_Context.paintVec.y;
						decalAlpha = arm_Context.brushOpacity;
					}
					arm_Context.viewIndex = arm_Context.viewIndexLast;
					var decalX = arm_App.x() + arm_Context.decalX * arm_App.w() - psizex / 2;
					var decalY = arm_App.y() + arm_Context.decalY * arm_App.h() - psizey / 2;
					arm_Context.viewIndex = -1;
					if(arm_Context.brushLocked) {
						decalX += arm_Context.lockStartedX - kha_System.windowWidth() / 2;
						decalY += arm_Context.lockStartedY - kha_System.windowHeight() / 2;
					}
					g.set_color(kha_Color.fromFloats(1,1,1,decalAlpha));
					g.pushRotation(-((arm_Context.brushAngle + arm_Context.brushNodesAngle) * (Math.PI / 180)),decalX + psizex / 2,decalY + psizey / 2);
					g.drawScaledImage(arm_Context.decalImage,decalX,decalY,psizex,psizey);
					g.popTransformation();
					g.set_color(-1);
				} else if(arm_Context.tool == 0 || arm_Context.tool == 1 || arm_Context.tool == 5 || arm_Context.tool == 6 || arm_Context.tool == 7) {
					g.drawScaledImage(cursorImg,mx - psize / 2,my - psize / 2,psize,psize);
				}
			}
			if(arm_Context.brushLazyRadius > 0 && !arm_Context.brushLocked && (arm_Context.tool == 0 || arm_Context.tool == 1 || arm_Context.tool == 3 || arm_Context.tool == 4 || arm_Context.tool == 5 || arm_Context.tool == 6 || arm_Context.tool == 7)) {
				g.fillRect(mx - 1,my - 1,2,2);
				var mx = arm_Context.brushLazyX * arm_App.w() + arm_App.x();
				var my = arm_Context.brushLazyY * arm_App.h() + arm_App.y();
				var radius = arm_Context.brushLazyRadius * 180;
				g.set_color(-10066330);
				g.drawScaledImage(cursorImg,mx - radius / 2,my - radius / 2,radius,radius);
				g.set_color(-1);
			}
		}
	}
	,showMaterialNodes: function() {
		arm_ui_UINodes.inst.ui.endInput();
		arm_ui_UINodes.inst.show = !arm_ui_UINodes.inst.show || arm_ui_UINodes.inst.canvasType != 0;
		arm_ui_UINodes.inst.canvasType = 0;
		arm_App.resize();
	}
	,showBrushNodes: function() {
		arm_ui_UINodes.inst.ui.endInput();
		arm_ui_UINodes.inst.show = !arm_ui_UINodes.inst.show || arm_ui_UINodes.inst.canvasType != 1;
		arm_ui_UINodes.inst.canvasType = 1;
		arm_App.resize();
	}
	,show2DView: function(type) {
		arm_ui_UIView2D.inst.ui.endInput();
		if(arm_ui_UIView2D.inst.type != type) {
			arm_ui_UIView2D.inst.show = true;
		} else {
			arm_ui_UIView2D.inst.show = !arm_ui_UIView2D.inst.show;
		}
		arm_ui_UIView2D.inst.type = type;
		arm_ui_UIView2D.inst.hwnd.redraws = 2;
		arm_App.resize();
	}
	,toggleBrowser: function() {
		arm_Config.raw.layout[6] = arm_Config.raw.layout[6] <= 32 * arm_Config.raw.window_scale ? 240 : 32;
		arm_Config.raw.layout[6] = arm_Config.raw.layout[6] * arm_Config.raw.window_scale | 0;
	}
	,setIconScale: function() {
		if(this.ui.ops.scaleFactor > 1) {
			arm_Res.load(["icons2x.k"],function() {
				arm_Res.bundled.h["icons.k"] = arm_Res.bundled.h["icons2x.k"];
			});
		} else {
			arm_Res.load(["icons.k"],function() {
			});
		}
	}
	,onBorderHover: function(handle,side) {
		if(!arm_App.uiEnabled) {
			return;
		}
		if(handle != this.hwnd0 && handle != this.hwnd1 && handle != this.hwnd2 && handle != arm_ui_UIStatus.inst.statusHandle && handle != arm_ui_UINodes.inst.hwnd && handle != arm_ui_UIView2D.inst.hwnd) {
			return;
		}
		if(handle == arm_ui_UINodes.inst.hwnd && side != 0 && side != 2) {
			return;
		}
		if(handle == arm_ui_UINodes.inst.hwnd && side == 2 && !arm_ui_UIView2D.inst.show) {
			return;
		}
		if(handle == arm_ui_UIView2D.inst.hwnd && side != 0) {
			return;
		}
		if(handle == this.hwnd0 && side == 2) {
			return;
		}
		if(handle == this.hwnd2 && side == 3) {
			return;
		}
		if(handle == arm_ui_UIStatus.inst.statusHandle && side != 2) {
			return;
		}
		if(side == 1) {
			return;
		}
		if(side == 0 || side == 1) {
			Krom.setMouseCursor(3);
		} else {
			Krom.setMouseCursor(4);
		}
		if(this.ui.inputStarted) {
			this.borderStarted = side;
			this.borderHandle = handle;
			arm_App.isResizing = true;
		}
	}
	,onTextHover: function() {
		Krom.setMouseCursor(2);
	}
	,tagUIRedraw: function() {
		arm_ui_UIHeader.inst.headerHandle.redraws = 2;
		arm_ui_UIToolbar.inst.toolbarHandle.redraws = 2;
		arm_ui_UIStatus.inst.statusHandle.redraws = 2;
		arm_ui_UIMenubar.inst.workspaceHandle.redraws = 2;
		arm_ui_UIMenubar.inst.menuHandle.redraws = 2;
		this.hwnd0.redraws = 2;
		this.hwnd1.redraws = 2;
		this.hwnd2.redraws = 2;
	}
	,__class__: arm_ui_UISidebar
};
var arm_util_UVUtil = function() { };
$hxClasses["arm.util.UVUtil"] = arm_util_UVUtil;
arm_util_UVUtil.__name__ = "arm.util.UVUtil";
arm_util_UVUtil.cacheUVMap = function() {
	if(arm_util_UVUtil.uvmapCached) {
		return;
	}
	var resX = arm_Config.getTextureResX();
	if(arm_util_UVUtil.uvmap == null) {
		arm_util_UVUtil.uvmap = kha_Image.createRenderTarget(resX,arm_Config.getTextureResY());
	}
	arm_util_UVUtil.uvmapCached = true;
	var merged = arm_Context.mergedObject;
	var mesh = arm_Context.layerFilter == 0 && merged != null ? merged.data.raw : arm_Context.paintObject.data.raw;
	var texa = mesh.vertex_arrays[2].values;
	var inda = mesh.index_arrays[0].values;
	arm_util_UVUtil.uvmap.get_g2().begin(true,0);
	arm_util_UVUtil.uvmap.get_g2().set_color(-3355444);
	var strength = resX > 2048 ? 2.0 : 1.0;
	var f = 3.0518509475997192e-005 * arm_util_UVUtil.uvmap.get_width();
	var _g = 0;
	var _g1 = inda.length / 3 | 0;
	while(_g < _g1) {
		var i = _g++;
		var x1 = texa[inda[i * 3] * 2] * f;
		var x2 = texa[inda[i * 3 + 1] * 2] * f;
		var x3 = texa[inda[i * 3 + 2] * 2] * f;
		var y1 = texa[inda[i * 3] * 2 + 1] * f;
		var y2 = texa[inda[i * 3 + 1] * 2 + 1] * f;
		var y3 = texa[inda[i * 3 + 2] * 2 + 1] * f;
		arm_util_UVUtil.uvmap.get_g2().drawLine(x1,y1,x2,y2,strength);
		arm_util_UVUtil.uvmap.get_g2().drawLine(x2,y2,x3,y3,strength);
		arm_util_UVUtil.uvmap.get_g2().drawLine(x3,y3,x1,y1,strength);
	}
	arm_util_UVUtil.uvmap.get_g2().end();
};
arm_util_UVUtil.cacheTriangleMap = function() {
	if(arm_util_UVUtil.trianglemapCached) {
		return;
	}
	if(arm_util_UVUtil.trianglemap == null) {
		arm_util_UVUtil.trianglemap = kha_Image.createRenderTarget(arm_Config.getTextureResX(),arm_Config.getTextureResY());
	}
	arm_util_UVUtil.trianglemapCached = true;
	var mesh = arm_Context.mergedObject != null ? arm_Context.mergedObject.data.raw : arm_Context.paintObject.data.raw;
	var texa = mesh.vertex_arrays[2].values;
	var inda = mesh.index_arrays[0].values;
	arm_util_UVUtil.trianglemap.get_g2().begin(true,-16777216);
	var f = 3.0518509475997192e-005 * arm_util_UVUtil.trianglemap.get_width();
	var color = -16777216;
	var _g = 0;
	var _g1 = inda.length / 3 | 0;
	while(_g < _g1) {
		var i = _g++;
		if(color == -1) {
			color = -16777216;
		}
		++color;
		arm_util_UVUtil.trianglemap.get_g2().set_color(color);
		var x1 = texa[inda[i * 3] * 2] * f;
		var x2 = texa[inda[i * 3 + 1] * 2] * f;
		var x3 = texa[inda[i * 3 + 2] * 2] * f;
		var y1 = texa[inda[i * 3] * 2 + 1] * f;
		var y2 = texa[inda[i * 3 + 1] * 2 + 1] * f;
		var y3 = texa[inda[i * 3 + 2] * 2 + 1] * f;
		arm_util_UVUtil.trianglemap.get_g2().fillTriangle(x1,y1,x2,y2,x3,y3);
	}
	arm_util_UVUtil.trianglemap.get_g2().end();
};
var arm_util_ViewportUtil = function() { };
$hxClasses["arm.util.ViewportUtil"] = arm_util_ViewportUtil;
arm_util_ViewportUtil.__name__ = "arm.util.ViewportUtil";
arm_util_ViewportUtil.scaleToBounds = function() {
	var po = arm_Context.mergedObject == null ? arm_Context.mainObject() : arm_Context.mergedObject;
	var md = po.data;
	md.geom.calculateAABB();
	var r = Math.sqrt(md.geom.aabb.x * md.geom.aabb.x + md.geom.aabb.y * md.geom.aabb.y + md.geom.aabb.z * md.geom.aabb.z);
	po = arm_Context.mainObject();
	po.transform.dim.x = md.geom.aabb.x;
	po.transform.dim.y = md.geom.aabb.y;
	po.transform.dim.z = md.geom.aabb.z;
	var _this = po.transform.scale;
	_this.x = 2 / r;
	_this.y = 2 / r;
	_this.z = 2 / r;
	_this.w = 1.0;
	var _this = po.transform.loc;
	_this.x = 0;
	_this.y = 0;
	_this.z = 0;
	_this.w = 1.0;
	po.transform.buildMatrix();
	var _g = 0;
	var _g1 = po.children;
	while(_g < _g1.length) {
		var c = _g1[_g];
		++_g;
		var _this = c.transform.loc;
		_this.x = 0;
		_this.y = 0;
		_this.z = 0;
		_this.w = 1.0;
		c.transform.buildMatrix();
	}
};
arm_util_ViewportUtil.resetViewport = function() {
	var cam = iron_Scene.active.camera;
	var _g = 0;
	var _g1 = iron_Scene.active.raw.objects;
	while(_g < _g1.length) {
		var o = _g1[_g];
		++_g;
		if(o.type == "camera_object") {
			var _this = cam.transform.local;
			var a = o.transform.values;
			_this.self._00 = a[0];
			_this.self._10 = a[1];
			_this.self._20 = a[2];
			_this.self._30 = a[3];
			_this.self._01 = a[4];
			_this.self._11 = a[5];
			_this.self._21 = a[6];
			_this.self._31 = a[7];
			_this.self._02 = a[8];
			_this.self._12 = a[9];
			_this.self._22 = a[10];
			_this.self._32 = a[11];
			_this.self._03 = a[12];
			_this.self._13 = a[13];
			_this.self._23 = a[14];
			_this.self._33 = a[15];
			cam.transform.decompose();
			if(arm_Context.fovHandle != null) {
				arm_Context.fovHandle.value = 0.92;
			}
			arm_Context.camHandle.position = 0;
			cam.data.raw.ortho = null;
			cam.buildProjection();
			arm_Context.ddirty = 2;
			arm_plugin_Camera.inst.reset();
			break;
		}
	}
};
arm_util_ViewportUtil.setView = function(x,y,z,rx,ry,rz) {
	var _this = arm_Context.object.transform.rot;
	_this.x = 0;
	_this.y = 0;
	_this.z = 0;
	_this.w = 1;
	arm_Context.object.transform.dirty = true;
	var cam = iron_Scene.active.camera;
	var _this = cam.transform.loc;
	var dist = Math.sqrt(_this.x * _this.x + _this.y * _this.y + _this.z * _this.z);
	var _this = cam.transform.loc;
	_this.x = x * dist;
	_this.y = y * dist;
	_this.z = z * dist;
	_this.w = 1.0;
	var _this = cam.transform.rot;
	var f = rx / 2;
	var c1 = Math.cos(f);
	var s1 = Math.sin(f);
	f = ry / 2;
	var c2 = Math.cos(f);
	var s2 = Math.sin(f);
	f = rz / 2;
	var c3 = Math.cos(f);
	var s3 = Math.sin(f);
	_this.x = s1 * c2 * c3 + c1 * s2 * s3;
	_this.y = c1 * s2 * c3 + s1 * c2 * s3;
	_this.z = c1 * c2 * s3 - s1 * s2 * c3;
	_this.w = c1 * c2 * c3 - s1 * s2 * s3;
	cam.transform.buildMatrix();
	cam.buildProjection();
	arm_Context.ddirty = 2;
	arm_plugin_Camera.inst.reset(arm_Context.viewIndexLast);
};
arm_util_ViewportUtil.orbit = function(x,y) {
	var cam = iron_Scene.active.camera;
	var dist = arm_plugin_Camera.inst.distance();
	cam.transform.move(new iron_math_Vec4(-cam.transform.world.self._20,-cam.transform.world.self._21,-cam.transform.world.self._22),dist);
	cam.transform.rotate(new iron_math_Vec4(0,0,1),x);
	cam.transform.rotate(new iron_math_Vec4(cam.transform.world.self._00,cam.transform.world.self._01,cam.transform.world.self._02),y);
	cam.transform.move(new iron_math_Vec4(-cam.transform.world.self._20,-cam.transform.world.self._21,-cam.transform.world.self._22),-dist);
	arm_Context.ddirty = 2;
};
arm_util_ViewportUtil.orbitOpposite = function() {
	var cam = iron_Scene.active.camera;
	var x = -cam.transform.local.self._20;
	var y = -cam.transform.local.self._21;
	var z = -cam.transform.local.self._22;
	if(z == null) {
		z = 0.0;
	}
	if(y == null) {
		y = 0.0;
	}
	if(x == null) {
		x = 0.0;
	}
	var z1 = Math.abs(z) - 1.0;
	if(z1 < 0.0001 && z1 > -0.0001) {
		arm_util_ViewportUtil.orbit(0,Math.PI);
	} else {
		arm_util_ViewportUtil.orbit(Math.PI,0);
	}
};
arm_util_ViewportUtil.zoom = function(f) {
	var cam = iron_Scene.active.camera;
	cam.transform.move(new iron_math_Vec4(-cam.transform.local.self._20,-cam.transform.local.self._21,-cam.transform.local.self._22),f);
	arm_Context.ddirty = 2;
};
arm_util_ViewportUtil.updateCameraType = function(cameraType) {
	var cam = iron_Scene.active.cameras[0];
	var light = iron_Scene.active.lights[0];
	if(cameraType == 0) {
		cam.data.raw.ortho = null;
		light.visible = true;
	} else {
		var f32 = new Float32Array(4);
		var _this = cam.transform.world;
		var x = _this.self._30;
		var y = _this.self._31;
		var z = _this.self._32;
		var w = _this.self._33;
		if(w == null) {
			w = 1.0;
		}
		if(z == null) {
			z = 0.0;
		}
		if(y == null) {
			y = 0.0;
		}
		if(x == null) {
			x = 0.0;
		}
		var _this_x = x;
		var _this_y = y;
		var _this_z = z;
		var f = cam.data.raw.fov * Math.sqrt(_this_x * _this_x + _this_y * _this_y + _this_z * _this_z) / 2.5;
		f32[0] = -2 * f;
		f32[1] = 2 * f;
		f32[2] = -2 * f * (arm_App.h() / arm_App.w());
		f32[3] = 2 * f * (arm_App.h() / arm_App.w());
		cam.data.raw.ortho = f32;
		light.visible = false;
	}
	cam.buildProjection();
	arm_Context.ddirty = 2;
};
var arm_ArmBridge = $hx_exports["arm"] = function() { };
$hxClasses["arm.ArmBridge"] = arm_ArmBridge;
arm_ArmBridge.__name__ = "arm.ArmBridge";
arm_ArmBridge.colorFromFloats = function(r,g,b,a) {
	return kha_Color.fromFloats(r,g,b,a);
};
var zui_Ext = function() { };
$hxClasses["zui.Ext"] = zui_Ext;
zui_Ext.__name__ = "zui.Ext";
zui_Ext.inlineRadio = function(ui,handle,texts,align) {
	if(align == null) {
		align = 1;
	}
	if(!ui.isVisible(ui.t.ELEMENT_H * ui.ops.scaleFactor)) {
		ui.endElement();
		return handle.position;
	}
	var step = ui._w / texts.length;
	var hovered = -1;
	if(ui.getHover()) {
		var ix = ui.inputX - ui._x - ui._windowX | 0;
		var _g = 0;
		var _g1 = texts.length;
		while(_g < _g1) {
			var i = _g++;
			if(ix < i * step + step) {
				hovered = i;
				break;
			}
		}
	}
	if(ui.getReleased()) {
		handle.position = hovered;
		handle.changed = ui.changed = true;
	} else {
		handle.changed = false;
	}
	var _g = 0;
	var _g1 = texts.length;
	while(_g < _g1) {
		var i = _g++;
		if(handle.position == i) {
			ui.g.set_color(ui.t.ACCENT_HOVER_COL);
			if(!ui.enabled) {
				ui.fadeColor();
			}
			ui.g.fillRect(ui._x + step * i,ui._y + ui.buttonOffsetY,step,ui.t.BUTTON_H * ui.ops.scaleFactor);
		} else if(hovered == i) {
			ui.g.set_color(ui.t.ACCENT_COL);
			if(!ui.enabled) {
				ui.fadeColor();
			}
			ui.g.drawRect(ui._x + step * i,ui._y + ui.buttonOffsetY,step,ui.t.BUTTON_H * ui.ops.scaleFactor);
		}
		ui.g.set_color(ui.t.TEXT_COL);
		ui.drawString(ui.g,texts[i],ui.t.TEXT_OFFSET * ui.ops.scaleFactor + step * i / ui.ops.scaleFactor,0,0);
	}
	ui.endElement();
	return handle.position;
};
zui_Ext.colorWheel = function(ui,handle,alpha,w,colorPreview) {
	if(colorPreview == null) {
		colorPreview = true;
	}
	if(alpha == null) {
		alpha = false;
	}
	if(w == null) {
		w = ui._w;
	}
	zui_Ext.rgbToHsv(((handle.color & 16711680) >>> 16) * 0.00392156862745098,((handle.color & 65280) >>> 8) * 0.00392156862745098,(handle.color & 255) * 0.00392156862745098,zui_Ext.ar);
	var chue = zui_Ext.ar[0];
	var csat = zui_Ext.ar[1];
	var cval = zui_Ext.ar[2];
	var calpha = (handle.color >>> 24) * 0.00392156862745098;
	var px = ui._x;
	var py = ui._y;
	var scroll = ui.currentWindow != null && ui.currentWindow.scrollEnabled;
	if(!scroll) {
		w -= ui.t.SCROLL_W * ui.ops.scaleFactor | 0;
		px += (ui.t.SCROLL_W * ui.ops.scaleFactor | 0) / 2;
	}
	ui.image(ui.ops.color_wheel,kha_Color.fromFloats(cval,cval,cval));
	var ph = ui._y - py;
	var ox = px + w / 2;
	var oy = py + ph / 2;
	var cw = w * 0.7;
	var cwh = cw / 2;
	var cx = ox;
	var cy = oy + csat * cwh;
	var theta = chue * (Math.PI * 2.0);
	var cx2 = Math.cos(theta) * (cx - ox) - Math.sin(theta) * (cy - oy) + ox;
	var cy2 = Math.sin(theta) * (cx - ox) + Math.cos(theta) * (cy - oy) + oy;
	cx = cx2;
	cy = cy2;
	ui.g.set_color(-16777216);
	ui.g.fillRect(cx - 3 * ui.ops.scaleFactor,cy - 3 * ui.ops.scaleFactor,6 * ui.ops.scaleFactor,6 * ui.ops.scaleFactor);
	ui.g.set_color(-1);
	ui.g.fillRect(cx - 2 * ui.ops.scaleFactor,cy - 2 * ui.ops.scaleFactor,4 * ui.ops.scaleFactor,4 * ui.ops.scaleFactor);
	if(alpha) {
		var alphaHandle = handle.nest(1,{ value : Math.round(calpha * 100) / 100});
		calpha = ui.slider(alphaHandle,"Alpha",0.0,1.0,true);
		if(alphaHandle.changed) {
			handle.changed = ui.changed = true;
		}
	}
	var gx = ox + ui._windowX;
	var gy = oy + ui._windowY;
	if(ui.inputStarted && ui.getInputInRect(gx - cwh,gy - cwh,cw,cw)) {
		zui_Ext.wheelSelectedHande = handle;
	}
	if(ui.inputReleased) {
		zui_Ext.wheelSelectedHande = null;
	}
	if(ui.inputDown && zui_Ext.wheelSelectedHande == handle) {
		var vx = gx - ui.inputX;
		var vy = gy - ui.inputY;
		csat = Math.min(Math.sqrt(vx * vx + vy * vy),cwh) / cwh;
		var angle = Math.atan2(ui.inputX - gx,ui.inputY - gy);
		if(angle < 0) {
			angle = Math.PI + (Math.PI - Math.abs(angle));
		}
		angle = Math.PI * 2 - angle;
		chue = angle / (Math.PI * 2);
		handle.changed = ui.changed = true;
	}
	zui_Ext.hsvToRgb(chue,csat,cval,zui_Ext.ar);
	handle.color = kha_Color.fromFloats(zui_Ext.ar[0],zui_Ext.ar[1],zui_Ext.ar[2],calpha);
	if(colorPreview) {
		ui.text("",2,handle.color);
	}
	var pos = zui_Ext.inlineRadio(ui,zui_Handle.global.nest(0,null),["RGB","HSV","Hex"]);
	var h0 = handle.nest(0).nest(0);
	var h1 = handle.nest(0).nest(1);
	var h2 = handle.nest(0).nest(2);
	if(pos == 0) {
		h0.value = ((handle.color & 16711680) >>> 16) * 0.00392156862745098;
		var f = ui.slider(h0,"R",0,1,true);
		handle.color = Math.round((handle.color >>> 24) * 0.00392156862745098 * 255) << 24 | Math.round(f * 255) << 16 | Math.round(((handle.color & 65280) >>> 8) * 0.00392156862745098 * 255) << 8 | Math.round((handle.color & 255) * 0.00392156862745098 * 255);
		h1.value = ((handle.color & 65280) >>> 8) * 0.00392156862745098;
		var f = ui.slider(h1,"G",0,1,true);
		handle.color = Math.round((handle.color >>> 24) * 0.00392156862745098 * 255) << 24 | Math.round(((handle.color & 16711680) >>> 16) * 0.00392156862745098 * 255) << 16 | Math.round(f * 255) << 8 | Math.round((handle.color & 255) * 0.00392156862745098 * 255);
		h2.value = (handle.color & 255) * 0.00392156862745098;
		var f = ui.slider(h2,"B",0,1,true);
		handle.color = Math.round((handle.color >>> 24) * 0.00392156862745098 * 255) << 24 | Math.round(((handle.color & 16711680) >>> 16) * 0.00392156862745098 * 255) << 16 | Math.round(((handle.color & 65280) >>> 8) * 0.00392156862745098 * 255) << 8 | Math.round(f * 255);
	} else if(pos == 1) {
		zui_Ext.rgbToHsv(((handle.color & 16711680) >>> 16) * 0.00392156862745098,((handle.color & 65280) >>> 8) * 0.00392156862745098,(handle.color & 255) * 0.00392156862745098,zui_Ext.ar);
		h0.value = zui_Ext.ar[0];
		h1.value = zui_Ext.ar[1];
		h2.value = zui_Ext.ar[2];
		var chue = ui.slider(h0,"H",0,1,true);
		var csat = ui.slider(h1,"S",0,1,true);
		var cval = ui.slider(h2,"V",0,1,true);
		zui_Ext.hsvToRgb(chue,csat,cval,zui_Ext.ar);
		handle.color = kha_Color.fromFloats(zui_Ext.ar[0],zui_Ext.ar[1],zui_Ext.ar[2]);
	} else if(pos == 2) {
		handle.text = (handle.color >>> 0).toString(16);
		handle.color = parseInt(ui.textInput(handle,"#"),16);
	}
	if(h0.changed || h1.changed || h2.changed) {
		handle.changed = ui.changed = true;
	}
	return handle.color;
};
zui_Ext.textArea = function(ui,handle,align,editable) {
	if(editable == null) {
		editable = true;
	}
	if(align == null) {
		align = 0;
	}
	handle.text = StringTools.replace(handle.text,"\t","    ");
	var lines = handle.text.split("\n");
	var selected = ui.textSelectedHandle == handle;
	var cursorStartX = ui.cursorX;
	var keyPressed = selected && ui.isKeyPressed;
	ui.highlightOnSelect = false;
	ui.tabSwitchEnabled = false;
	ui.g.set_color(ui.t.SEPARATOR_COL);
	var g = ui.g;
	var x = ui._x + ui.buttonOffsetY;
	var y = ui._y + ui.buttonOffsetY;
	var w = ui._w - ui.buttonOffsetY * 2;
	var h = lines.length * (ui.t.ELEMENT_H * ui.ops.scaleFactor) - ui.buttonOffsetY * 2;
	if(!ui.enabled) {
		ui.fadeColor();
	}
	g.fillRect(x,y - 1,w,h + 1);
	var _g = 0;
	var _g1 = lines.length;
	while(_g < _g1) {
		var i = _g++;
		if(!selected && ui.getHover() || selected && i == handle.position) {
			handle.position = i;
			handle.text = lines[i];
			ui.textInput(handle,"",align,editable);
			if(keyPressed && ui.key != 13) {
				lines[i] = ui.textSelected;
			}
		} else {
			ui.text(lines[i],align);
		}
		ui._y -= ui.t.ELEMENT_OFFSET * ui.ops.scaleFactor;
	}
	ui._y += ui.t.ELEMENT_OFFSET * ui.ops.scaleFactor;
	if(keyPressed) {
		if(ui.key == 40 && handle.position < lines.length - 1) {
			handle.position++;
		}
		if(ui.key == 38 && handle.position > 0) {
			handle.position--;
		}
		if(editable && ui.key == 13) {
			handle.position++;
			lines.splice(handle.position,0,HxOverrides.substr(lines[handle.position - 1],ui.cursorX,null));
			lines[handle.position - 1] = HxOverrides.substr(lines[handle.position - 1],0,ui.cursorX);
			ui.startTextEdit(handle);
			ui.cursorX = ui.highlightAnchor = 0;
		}
		if(editable && ui.key == 8 && cursorStartX == 0 && handle.position > 0) {
			handle.position--;
			ui.cursorX = ui.highlightAnchor = lines[handle.position].length;
			lines[handle.position] += lines[handle.position + 1];
			lines.splice(handle.position + 1,1);
		}
		ui.textSelected = lines[handle.position];
	}
	ui.highlightOnSelect = true;
	ui.tabSwitchEnabled = true;
	handle.text = lines.join("\n");
	return handle.text;
};
zui_Ext.beginMenu = function(ui) {
	zui_Ext._ELEMENT_OFFSET = ui.t.ELEMENT_OFFSET;
	zui_Ext._BUTTON_COL = ui.t.BUTTON_COL;
	ui.t.ELEMENT_OFFSET = 0;
	ui.t.BUTTON_COL = ui.t.SEPARATOR_COL;
	ui.g.set_color(ui.t.SEPARATOR_COL);
	ui.g.fillRect(0,0,ui._windowW,ui.t.BUTTON_H * ui.ops.scaleFactor * 1.1 + 2 + ui.buttonOffsetY);
};
zui_Ext.endMenu = function(ui) {
	ui.t.ELEMENT_OFFSET = zui_Ext._ELEMENT_OFFSET;
	ui.t.BUTTON_COL = zui_Ext._BUTTON_COL;
};
zui_Ext.menuButton = function(ui,text) {
	ui._w = ui.ops.font.width(ui.fontSize,text) + 25 * ui.ops.scaleFactor | 0;
	return ui.button(text);
};
zui_Ext.hsvToRgb = function(cR,cG,cB,out) {
	var f = cR + 1.0;
	var f1 = cR + 0.66666666666666663;
	var py = Math.abs((f1 - (f1 | 0)) * 6.0 - 3.0);
	var f1 = cR + 0.33333333333333331;
	var pz = Math.abs((f1 - (f1 | 0)) * 6.0 - 3.0);
	out[0] = cB * (1.0 - cG + Math.min(Math.max(Math.abs((f - (f | 0)) * 6.0 - 3.0) - 1.0,0.0),1.0) * cG);
	out[1] = cB * (1.0 - cG + Math.min(Math.max(py - 1.0,0.0),1.0) * cG);
	out[2] = cB * (1.0 - cG + Math.min(Math.max(pz - 1.0,0.0),1.0) * cG);
};
zui_Ext.rgbToHsv = function(cR,cG,cB,out) {
	var a = cG < cB ? 0.0 : 1.0;
	var px = cB * (1.0 - a) + cG * a;
	var a = cG < cB ? 0.0 : 1.0;
	var py = cG * (1.0 - a) + cB * a;
	var a = cG < cB ? 0.0 : 1.0;
	var a1 = cG < cB ? 0.0 : 1.0;
	var a2 = cR < px ? 0.0 : 1.0;
	var qx = px * (1.0 - a2) + cR * a2;
	var a2 = cR < px ? 0.0 : 1.0;
	var qy = py * (1.0 - a2) + py * a2;
	var a2 = cR < px ? 0.0 : 1.0;
	var a3 = cR < px ? 0.0 : 1.0;
	var qw = cR * (1.0 - a3) + px * a3;
	var d = qx - Math.min(qw,qy);
	out[0] = Math.abs((0.66666666666666663 * (1.0 - a1) + -0.33333333333333331 * a1) * (1.0 - a2) + (-1.0 * (1.0 - a) + 0.0 * a) * a2 + (qw - qy) / (6.0 * d + 1.0e-10));
	out[1] = d / (qx + 1.0e-10);
	out[2] = qx;
};
var arm_ZuiBridge = $hx_exports["zui"] = function() { };
$hxClasses["arm.ZuiBridge"] = arm_ZuiBridge;
arm_ZuiBridge.__name__ = "arm.ZuiBridge";
var arm_Keep = function() { };
$hxClasses["arm.Keep"] = arm_Keep;
arm_Keep.__name__ = "arm.Keep";
arm_Keep.keep = function() {
	return [iron_system_ArmPack.decode,iron_system_ArmPack.encode];
};
var arm_Strings = function() { };
$hxClasses["arm.Strings"] = arm_Strings;
arm_Strings.__name__ = "arm.Strings";
var arm_Translator = function() { };
$hxClasses["arm.Translator"] = arm_Translator;
arm_Translator.__name__ = "arm.Translator";
arm_Translator.tr = function(id,vars) {
	var translation = id;
	if(arm_Config.raw.locale != "en" && Object.prototype.hasOwnProperty.call(arm_Translator.translations.h,id)) {
		translation = arm_Translator.translations.h[id];
	}
	if(vars != null) {
		var _g = haxe_ds_StringMap.kvIterator(vars.h);
		while(_g.hasNext()) {
			var _g1 = _g.next();
			var value = _g1.value;
			translation = StringTools.replace(translation,"{" + _g1.key + "}",value == null ? "null" : "" + value);
		}
	}
	return translation;
};
arm_Translator.loadTranslations = function(newLocale) {
	if(newLocale == "system") {
		arm_Config.raw.locale = Krom.language();
	}
	if(arm_Config.raw.locale != "en" && arm_Translator.getSupportedLocales().indexOf(arm_Config.raw.locale) == -1) {
		arm_Config.raw.locale = "en";
	}
	arm_Translator.translations.h = Object.create(null);
	if(arm_Config.raw.locale == "en" && arm_Translator.lastLocale == "en") {
		return;
	}
	arm_Translator.lastLocale = arm_Config.raw.locale;
	if(arm_Config.raw.locale != "en") {
		var data = JSON.parse(haxe_io_Bytes.ofData(Krom.loadBlob("data/locale/" + arm_Config.raw.locale + ".json")).toString());
		var _g_keys = Reflect.fields(data);
		var _g_index = 0;
		while(_g_index < _g_keys.length) {
			var key = _g_keys[_g_index++];
			var _g = { value : data[key], key : key};
			var key1 = _g.key;
			arm_Translator.translations.h[key1 == null ? "null" : "" + key1] = _g.value;
		}
	}
	var _g = [];
	var _g1 = 32;
	while(_g1 < 383) _g.push(_g1++);
	kha_graphics2_Graphics.fontGlyphs = _g;
	var _g = 880;
	while(_g < 1023) kha_graphics2_Graphics.fontGlyphs.push(_g++);
	var _g = 1024;
	while(_g < 1119) kha_graphics2_Graphics.fontGlyphs.push(_g++);
	var cjk = false;
	var s = haxe_ds_StringMap.valueIterator(arm_Translator.translations.h);
	while(s.hasNext()) {
		var s1 = s.next();
		var _g = 0;
		var _g1 = s1.length;
		while(_g < _g1) {
			var i = _g++;
			if(HxOverrides.cca(s1,i) > 1119 && kha_graphics2_Graphics.fontGlyphs.indexOf(HxOverrides.cca(s1,i)) == -1) {
				if(!cjk) {
					var _g2 = [];
					var _g3 = 32;
					while(_g3 < 127) _g2.push(_g3++);
					kha_graphics2_Graphics.fontGlyphs = _g2;
					cjk = true;
				}
				kha_graphics2_Graphics.fontGlyphs.push(HxOverrides.cca(s1,i));
			}
		}
	}
	var newFont = { path : "font.ttf", scale : 1.0};
	if(cjk) {
		newFont = { path : "font_cjk.ttc", scale : 1.4};
		var cjkFontPath = arm_sys_Path.data() + arm_sys_Path.sep + newFont.path;
		if(!arm_sys_File.exists(cjkFontPath)) {
			arm_sys_File.download("https://github.com/armory3d/armorpaint/raw/master/Assets/fonts/font_cjk.ttc",cjkFontPath);
		}
		if(!arm_sys_File.exists(cjkFontPath)) {
			arm_Config.raw.locale = "en";
			var _g = [];
			var _g1 = 32;
			while(_g1 < 383) _g.push(_g1++);
			kha_graphics2_Graphics.fontGlyphs = _g;
			var _g = 880;
			while(_g < 1023) kha_graphics2_Graphics.fontGlyphs.push(_g++);
			var _g = 1024;
			while(_g < 1119) kha_graphics2_Graphics.fontGlyphs.push(_g++);
			arm_Translator.translations.h = Object.create(null);
			newFont = { path : "font.ttf", scale : 1.0};
		}
	}
	kha_graphics2_Graphics.fontGlyphs.sort(Reflect.compare);
	iron_App.notifyOnInit(function() {
		iron_data_Data.getFont(newFont.path,function(f) {
			if(cjk) {
				f.setFontIndex(Object.prototype.hasOwnProperty.call(arm_Translator.cjkFontIndices.h,arm_Config.raw.locale) ? arm_Translator.cjkFontIndices.h[arm_Config.raw.locale] : 0);
			}
			arm_App.font = f;
			var uis = [arm_App.uiBox,arm_App.uiMenu,arm_ui_UISidebar.inst.ui,arm_ui_UINodes.inst.ui,arm_ui_UIView2D.inst.ui];
			var originFontSize = uis[0].t.FONT_SIZE;
			uis[0].t.FONT_SIZE = uis[0].t.FONT_SIZE * newFont.scale | 0;
			var _g = 0;
			while(_g < uis.length) {
				var ui = uis[_g];
				++_g;
				ui.ops.font = f;
				ui.setScale(ui.ops.scaleFactor);
			}
			uis[0].t.FONT_SIZE = originFontSize;
		});
	});
};
arm_Translator.getSupportedLocales = function() {
	var locales = ["system","en"];
	var _g = 0;
	var _g1 = arm_sys_File.readDirectory(arm_sys_Path.data() + arm_sys_Path.sep + "locale");
	while(_g < _g1.length) locales.push(HxOverrides.substr(_g1[_g++],0,-5));
	return locales;
};
var arm_data_BrushSlot = function(c) {
	this.id = 0;
	this.previewReady = false;
	this.imageIcon = null;
	this.image = null;
	this.nodes = new zui_Nodes();
	var _g = 0;
	var _g1 = arm_Project.brushes;
	while(_g < _g1.length) {
		var brush = _g1[_g];
		++_g;
		if(brush.id >= this.id) {
			this.id = brush.id + 1;
		}
	}
	if(c == null) {
		if(arm_data_BrushSlot.defaultCanvas == null) {
			iron_data_Data.getBlob("default_brush.arm",function(b) {
				arm_data_BrushSlot.defaultCanvas = b;
			});
		}
		var i = new haxe_io_BytesInput(arm_data_BrushSlot.defaultCanvas.toBytes());
		i.set_bigEndian(false);
		this.canvas = iron_system_ArmPack.read(i);
		this.canvas.name = "Brush " + (this.id + 1);
	} else {
		this.canvas = c;
	}
};
$hxClasses["arm.data.BrushSlot"] = arm_data_BrushSlot;
arm_data_BrushSlot.__name__ = "arm.data.BrushSlot";
arm_data_BrushSlot.prototype = {
	__class__: arm_data_BrushSlot
};
var arm_data_ConstData = function() { };
$hxClasses["arm.data.ConstData"] = arm_data_ConstData;
arm_data_ConstData.__name__ = "arm.data.ConstData";
arm_data_ConstData.initLTC = function() {
	iron_data_Data.getBlob("ltc_mat.arm",function(ltc_mat) {
		iron_data_Data.getBlob("ltc_mag.arm",function(ltc_mag) {
			var i = new haxe_io_BytesInput(ltc_mat.toBytes());
			i.set_bigEndian(false);
			arm_data_ConstData.ltcMatTex = kha_Image.fromBytes(iron_system_ArmPack.read(i),64,64,2);
			var i = new haxe_io_BytesInput(ltc_mag.toBytes());
			i.set_bigEndian(false);
			arm_data_ConstData.ltcMagTex = kha_Image.fromBytes(iron_system_ArmPack.read(i),64,64,5);
		});
	});
};
var arm_data_FontSlot = function(name,font,file) {
	if(file == null) {
		file = "";
	}
	this.id = 0;
	this.previewReady = false;
	this.image = null;
	var _g = 0;
	var _g1 = arm_Project.fonts;
	while(_g < _g1.length) {
		var slot = _g1[_g];
		++_g;
		if(slot.id >= this.id) {
			this.id = slot.id + 1;
		}
	}
	this.name = name;
	this.font = font;
	this.file = file;
};
$hxClasses["arm.data.FontSlot"] = arm_data_FontSlot;
arm_data_FontSlot.__name__ = "arm.data.FontSlot";
arm_data_FontSlot.prototype = {
	__class__: arm_data_FontSlot
};
var arm_data_LayerSlot = function(ext,isGroup) {
	if(isGroup == null) {
		isGroup = false;
	}
	if(ext == null) {
		ext = "";
	}
	this.decalDim = new iron_math_Vec4(1,1,1);
	this.decalMat = new iron_math_Mat4(1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0);
	this.paintSubs = true;
	this.paintEmis = true;
	this.paintHeight = true;
	this.paintNor = true;
	this.paintMet = true;
	this.paintRough = true;
	this.paintOcc = true;
	this.paintOpac = true;
	this.paintBase = true;
	this.uvType = 0;
	this.angle = 0.0;
	this.scale = 1.0;
	this.objectMask = 0;
	this.blending = 0;
	this.show_panel = false;
	this.fill_mask = null;
	this.fill_layer = null;
	this.maskOpacity = 1.0;
	this.texpaint_mask = null;
	this.texpaint_preview = null;
	this.texpaint_pack = null;
	this.texpaint_nor = null;
	this.texpaint = null;
	this.parent = null;
	this.ext = "";
	this.visible = true;
	this.id = 0;
	if(ext == "") {
		this.id = 0;
		var _g = 0;
		var _g1 = arm_Project.layers;
		while(_g < _g1.length) {
			var l = _g1[_g];
			++_g;
			if(l.id >= this.id) {
				this.id = l.id + 1;
			}
		}
		ext = this.id + "";
	}
	this.ext = ext;
	if(isGroup) {
		this.name = "Group " + (this.id + 1);
		return;
	}
	this.name = "Layer " + (this.id + 1);
	var format = arm_App.bitsHandle.position == 0 ? "RGBA32" : arm_App.bitsHandle.position == 1 ? "RGBA64" : "RGBA128";
	var t = new iron_RenderTargetRaw();
	t.name = "texpaint" + ext;
	t.width = arm_Config.getTextureResX();
	t.height = arm_Config.getTextureResY();
	t.format = format;
	this.texpaint = iron_RenderPath.active.createRenderTarget(t).image;
	var t = new iron_RenderTargetRaw();
	t.name = "texpaint_nor" + ext;
	t.width = arm_Config.getTextureResX();
	t.height = arm_Config.getTextureResY();
	t.format = format;
	this.texpaint_nor = iron_RenderPath.active.createRenderTarget(t).image;
	var t = new iron_RenderTargetRaw();
	t.name = "texpaint_pack" + ext;
	t.width = arm_Config.getTextureResX();
	t.height = arm_Config.getTextureResY();
	t.format = format;
	this.texpaint_pack = iron_RenderPath.active.createRenderTarget(t).image;
	this.texpaint_preview = kha_Image.createRenderTarget(200,200,0);
};
$hxClasses["arm.data.LayerSlot"] = arm_data_LayerSlot;
arm_data_LayerSlot.__name__ = "arm.data.LayerSlot";
arm_data_LayerSlot.prototype = {
	'delete': function() {
		this.unload();
		var children = this.getChildren();
		if(children != null) {
			var _g = 0;
			while(_g < children.length) children[_g++].parent = null;
		}
		var lpos = arm_Project.layers.indexOf(this);
		HxOverrides.remove(arm_Project.layers,this);
		if(arm_Project.layers.length > 0) {
			arm_Context.setLayer(arm_Project.layers[lpos > 0 ? lpos - 1 : 0]);
		}
	}
	,unload: function() {
		if(this.texpaint == null) {
			return;
		}
		var _texpaint = this.texpaint;
		var _texpaint_nor = this.texpaint_nor;
		var _texpaint_pack = this.texpaint_pack;
		var _texpaint_preview = this.texpaint_preview;
		arm_App.notifyOnNextFrame(function() {
			_texpaint.unload();
			_texpaint_nor.unload();
			_texpaint_pack.unload();
			_texpaint_preview.unload();
		});
		var key = "texpaint" + this.ext;
		var _this = iron_RenderPath.active.renderTargets;
		if(Object.prototype.hasOwnProperty.call(_this.h,key)) {
			delete(_this.h[key]);
		}
		var key = "texpaint_nor" + this.ext;
		var _this = iron_RenderPath.active.renderTargets;
		if(Object.prototype.hasOwnProperty.call(_this.h,key)) {
			delete(_this.h[key]);
		}
		var key = "texpaint_pack" + this.ext;
		var _this = iron_RenderPath.active.renderTargets;
		if(Object.prototype.hasOwnProperty.call(_this.h,key)) {
			delete(_this.h[key]);
		}
		this.deleteMask();
	}
	,swap: function(other) {
		iron_RenderPath.active.renderTargets.h["texpaint" + this.ext].image = other.texpaint;
		iron_RenderPath.active.renderTargets.h["texpaint_nor" + this.ext].image = other.texpaint_nor;
		iron_RenderPath.active.renderTargets.h["texpaint_pack" + this.ext].image = other.texpaint_pack;
		iron_RenderPath.active.renderTargets.h["texpaint" + other.ext].image = this.texpaint;
		iron_RenderPath.active.renderTargets.h["texpaint_nor" + other.ext].image = this.texpaint_nor;
		iron_RenderPath.active.renderTargets.h["texpaint_pack" + other.ext].image = this.texpaint_pack;
		var _texpaint = this.texpaint;
		var _texpaint_nor = this.texpaint_nor;
		var _texpaint_pack = this.texpaint_pack;
		this.texpaint = other.texpaint;
		this.texpaint_nor = other.texpaint_nor;
		this.texpaint_pack = other.texpaint_pack;
		other.texpaint = _texpaint;
		other.texpaint_nor = _texpaint_nor;
		other.texpaint_pack = _texpaint_pack;
	}
	,clearLayer: function(baseColor) {
		if(baseColor == null) {
			baseColor = 0;
		}
		this.texpaint.get_g4().begin();
		this.texpaint.get_g4().clear(baseColor);
		this.texpaint.get_g4().end();
		this.texpaint_nor.get_g4().begin();
		this.texpaint_nor.get_g4().clear(kha_Color.fromFloats(0.5,0.5,1.0,0.0));
		this.texpaint_nor.get_g4().end();
		this.texpaint_pack.get_g4().begin();
		this.texpaint_pack.get_g4().clear(kha_Color.fromFloats(1.0,0.4,0.0,0.0));
		this.texpaint_pack.get_g4().end();
		arm_Context.layerPreviewDirty = true;
		arm_Context.ddirty = 3;
	}
	,swapMask: function(other) {
		iron_RenderPath.active.renderTargets.h["texpaint_mask" + this.ext].image = other.texpaint_mask;
		iron_RenderPath.active.renderTargets.h["texpaint_mask" + other.ext].image = this.texpaint_mask;
		var _texpaint_mask = this.texpaint_mask;
		this.texpaint_mask = other.texpaint_mask;
		other.texpaint_mask = _texpaint_mask;
		var _texpaint_mask_preview = this.texpaint_mask_preview;
		this.texpaint_mask_preview = other.texpaint_mask_preview;
		other.texpaint_mask_preview = _texpaint_mask_preview;
	}
	,createMask: function(color,clear,image) {
		if(clear == null) {
			clear = true;
		}
		var _gthis = this;
		if(this.texpaint_mask != null) {
			return;
		}
		var t = new iron_RenderTargetRaw();
		t.name = "texpaint_mask" + this.ext;
		t.width = arm_Config.getTextureResX();
		t.height = arm_Config.getTextureResY();
		t.format = "R8";
		this.texpaint_mask = iron_RenderPath.active.createRenderTarget(t).image;
		this.texpaint_mask_preview = kha_Image.createRenderTarget(200,200,1);
		if(clear) {
			var _clearMask = function() {
				_gthis.clearMask(_gthis.createMaskColor);
				_gthis.createMaskColor = 0;
				_gthis.createMaskImage = null;
			};
			this.createMaskColor = color;
			this.createMaskImage = image;
			iron_App.notifyOnInit(_clearMask);
		}
	}
	,clearMask: function(color) {
		if(color == null) {
			color = 0;
		}
		this.texpaint_mask.get_g2().begin(false);
		if(this.createMaskImage != null) {
			this.texpaint_mask.get_g2().drawScaledImage(this.createMaskImage,0,0,this.texpaint_mask.get_width(),this.texpaint_mask.get_height());
		} else {
			this.texpaint_mask.get_g2().clear(color);
		}
		this.texpaint_mask.get_g2().end();
		arm_Context.layerPreviewDirty = true;
		arm_Context.ddirty = 3;
	}
	,invertMask: function() {
		if(arm_Layers.pipeInvert8 == null) {
			arm_Layers.makePipe();
		}
		var inverted = kha_Image.createRenderTarget(this.texpaint_mask.get_width(),this.texpaint_mask.get_height(),1);
		inverted.get_g2().begin(false);
		inverted.get_g2().set_pipeline(arm_Layers.pipeInvert8);
		inverted.get_g2().drawImage(this.texpaint_mask,0,0);
		inverted.get_g2().set_pipeline(null);
		inverted.get_g2().end();
		var _texpaint_mask = this.texpaint_mask;
		arm_App.notifyOnNextFrame(function() {
			_texpaint_mask.unload();
		});
		this.texpaint_mask = iron_RenderPath.active.renderTargets.h["texpaint_mask" + this.id].image = inverted;
		arm_Context.layerPreviewDirty = true;
		arm_Context.ddirty = 3;
	}
	,deleteMask: function() {
		if(this.texpaint_mask == null) {
			return;
		}
		var _texpaint_mask = this.texpaint_mask;
		var _texpaint_mask_preview = this.texpaint_mask_preview;
		arm_App.notifyOnNextFrame(function() {
			_texpaint_mask.unload();
			_texpaint_mask_preview.unload();
		});
		var key = "texpaint_mask" + this.ext;
		var _this = iron_RenderPath.active.renderTargets;
		if(Object.prototype.hasOwnProperty.call(_this.h,key)) {
			delete(_this.h[key]);
		}
		this.texpaint_mask = null;
		this.fill_mask = null;
	}
	,applyMask: function() {
		if(this.texpaint_mask == null) {
			return;
		}
		if(arm_Layers.pipeMerge == null) {
			arm_Layers.makePipe();
		}
		arm_Layers.makeTempImg();
		arm_Layers.imga.get_g2().begin(false);
		arm_Layers.imga.get_g2().set_pipeline(arm_Layers.pipeCopy);
		arm_Layers.imga.get_g2().drawImage(this.texpaint,0,0);
		arm_Layers.imga.get_g2().set_pipeline(null);
		arm_Layers.imga.get_g2().end();
		if(iron_data_ConstData.screenAlignedVB == null) {
			iron_data_ConstData.createScreenAlignedData();
		}
		this.texpaint.get_g4().begin();
		this.texpaint.get_g4().setPipeline(arm_Layers.pipeMask);
		this.texpaint.get_g4().setTexture(arm_Layers.tex0Mask,arm_Layers.imga);
		this.texpaint.get_g4().setTexture(arm_Layers.texaMask,this.texpaint_mask);
		this.texpaint.get_g4().setVertexBuffer(iron_data_ConstData.screenAlignedVB);
		this.texpaint.get_g4().setIndexBuffer(iron_data_ConstData.screenAlignedIB);
		this.texpaint.get_g4().drawIndexedVertices();
		this.texpaint.get_g4().end();
		this.deleteMask();
	}
	,duplicate: function() {
		var layers = arm_Project.layers;
		var i = 0;
		while(i++ < layers.length) if(layers[i] == this) {
			break;
		}
		++i;
		var l = new arm_data_LayerSlot();
		layers.splice(i,0,l);
		if(arm_Layers.pipeMerge == null) {
			arm_Layers.makePipe();
		}
		l.texpaint.get_g2().begin(false);
		l.texpaint.get_g2().set_pipeline(arm_Layers.pipeCopy);
		l.texpaint.get_g2().drawImage(this.texpaint,0,0);
		l.texpaint.get_g2().set_pipeline(null);
		l.texpaint.get_g2().end();
		l.texpaint_nor.get_g2().begin(false);
		l.texpaint_nor.get_g2().set_pipeline(arm_Layers.pipeCopy);
		l.texpaint_nor.get_g2().drawImage(this.texpaint_nor,0,0);
		l.texpaint_nor.get_g2().set_pipeline(null);
		l.texpaint_nor.get_g2().end();
		l.texpaint_pack.get_g2().begin(false);
		l.texpaint_pack.get_g2().set_pipeline(arm_Layers.pipeCopy);
		l.texpaint_pack.get_g2().drawImage(this.texpaint_pack,0,0);
		l.texpaint_pack.get_g2().set_pipeline(null);
		l.texpaint_pack.get_g2().end();
		l.texpaint_preview.get_g2().begin(true,0);
		l.texpaint_preview.get_g2().set_pipeline(arm_Layers.pipeCopy);
		l.texpaint_preview.get_g2().drawScaledImage(this.texpaint_preview,0,0,this.texpaint_preview.get_width(),this.texpaint_preview.get_height());
		l.texpaint_preview.get_g2().set_pipeline(null);
		l.texpaint_preview.get_g2().end();
		if(this.texpaint_mask != null) {
			l.createMask(0,false);
			l.texpaint_mask.get_g2().begin(false);
			l.texpaint_mask.get_g2().set_pipeline(arm_Layers.pipeCopy8);
			l.texpaint_mask.get_g2().drawImage(this.texpaint_mask,0,0);
			l.texpaint_mask.get_g2().set_pipeline(null);
			l.texpaint_mask.get_g2().end();
			l.texpaint_mask_preview.get_g2().begin(true,0);
			l.texpaint_mask_preview.get_g2().set_pipeline(arm_Layers.pipeCopy8);
			l.texpaint_mask_preview.get_g2().drawScaledImage(this.texpaint_mask_preview,0,0,this.texpaint_mask_preview.get_width(),this.texpaint_mask_preview.get_height());
			l.texpaint_mask_preview.get_g2().set_pipeline(null);
			l.texpaint_mask_preview.get_g2().end();
		}
		l.parent = this.parent;
		l.visible = this.visible;
		l.maskOpacity = this.maskOpacity;
		l.fill_layer = this.fill_layer;
		l.objectMask = this.objectMask;
		l.blending = this.blending;
		l.paintBase = this.paintBase;
		l.paintOpac = this.paintOpac;
		l.paintOcc = this.paintOcc;
		l.paintRough = this.paintRough;
		l.paintMet = this.paintMet;
		l.paintNor = this.paintNor;
		l.paintHeight = this.paintHeight;
		l.paintEmis = this.paintEmis;
		l.paintSubs = this.paintSubs;
		return l;
	}
	,resizeAndSetBits: function() {
		var format = arm_App.bitsHandle.position == 0 ? 0 : arm_App.bitsHandle.position == 1 ? 4 : 2;
		var resX = arm_Config.getTextureResX();
		var resY = arm_Config.getTextureResY();
		var rts = iron_RenderPath.active.renderTargets;
		var _texpaint = this.texpaint;
		var _texpaint_nor = this.texpaint_nor;
		var _texpaint_pack = this.texpaint_pack;
		this.texpaint = kha_Image.createRenderTarget(resX,resY,format);
		this.texpaint_nor = kha_Image.createRenderTarget(resX,resY,format);
		this.texpaint_pack = kha_Image.createRenderTarget(resX,resY,format);
		if(arm_Layers.pipeMerge == null) {
			arm_Layers.makePipe();
		}
		this.texpaint.get_g2().begin(false);
		this.texpaint.get_g2().set_pipeline(arm_Layers.pipeCopy);
		this.texpaint.get_g2().drawScaledImage(_texpaint,0,0,resX,resY);
		this.texpaint.get_g2().set_pipeline(null);
		this.texpaint.get_g2().end();
		this.texpaint_nor.get_g2().begin(false);
		this.texpaint_nor.get_g2().set_pipeline(arm_Layers.pipeCopy);
		this.texpaint_nor.get_g2().drawScaledImage(_texpaint_nor,0,0,resX,resY);
		this.texpaint_nor.get_g2().set_pipeline(null);
		this.texpaint_nor.get_g2().end();
		this.texpaint_pack.get_g2().begin(false);
		this.texpaint_pack.get_g2().set_pipeline(arm_Layers.pipeCopy);
		this.texpaint_pack.get_g2().drawScaledImage(_texpaint_pack,0,0,resX,resY);
		this.texpaint_pack.get_g2().set_pipeline(null);
		this.texpaint_pack.get_g2().end();
		arm_App.notifyOnNextFrame(function() {
			_texpaint.unload();
			_texpaint_nor.unload();
			_texpaint_pack.unload();
		});
		rts.h["texpaint" + this.ext].image = this.texpaint;
		rts.h["texpaint_nor" + this.ext].image = this.texpaint_nor;
		rts.h["texpaint_pack" + this.ext].image = this.texpaint_pack;
		if(this.texpaint_mask != null && (this.texpaint_mask.get_width() != resX || this.texpaint_mask.get_height() != resY)) {
			var _texpaint_mask = this.texpaint_mask;
			this.texpaint_mask = kha_Image.createRenderTarget(resX,resY,1);
			this.texpaint_mask.get_g2().begin(false);
			this.texpaint_mask.get_g2().set_pipeline(arm_Layers.pipeCopy8);
			this.texpaint_mask.get_g2().drawScaledImage(_texpaint_mask,0,0,resX,resY);
			this.texpaint_mask.get_g2().set_pipeline(null);
			this.texpaint_mask.get_g2().end();
			arm_App.notifyOnNextFrame(function() {
				_texpaint_mask.unload();
			});
			rts.h["texpaint_mask" + this.ext].image = this.texpaint_mask;
		}
	}
	,clear: function() {
		this.texpaint.get_g4().begin();
		this.texpaint.get_g4().clear(kha_Color.fromFloats(0.0,0.0,0.0,0.0));
		this.texpaint.get_g4().end();
		this.texpaint_nor.get_g4().begin();
		this.texpaint_nor.get_g4().clear(kha_Color.fromFloats(0.5,0.5,1.0,0.0));
		this.texpaint_nor.get_g4().end();
		this.texpaint_pack.get_g4().begin();
		this.texpaint_pack.get_g4().clear(kha_Color.fromFloats(1.0,0.0,0.0,0.0));
		this.texpaint_pack.get_g4().end();
	}
	,toFillLayer: function() {
		arm_Context.setLayer(this);
		this.fill_layer = arm_Context.material;
		arm_Layers.updateFillLayer(4);
		iron_App.notifyOnInit(function() {
			arm_node_MakeMaterial.parsePaintMaterial();
			arm_Context.layerPreviewDirty = true;
			arm_ui_UISidebar.inst.hwnd0.redraws = 2;
		});
	}
	,toPaintLayer: function() {
		arm_Context.setLayer(this);
		this.fill_layer = null;
		arm_node_MakeMaterial.parsePaintMaterial();
		arm_Context.layerPreviewDirty = true;
		arm_ui_UISidebar.inst.hwnd0.redraws = 2;
	}
	,toFillMask: function() {
		arm_Context.setLayer(this,true);
		this.fill_mask = arm_Context.material;
		arm_Layers.updateFillLayers(4);
		iron_App.notifyOnInit(function() {
			arm_node_MakeMaterial.parsePaintMaterial();
			arm_Context.layerPreviewDirty = true;
			arm_ui_UISidebar.inst.hwnd0.redraws = 2;
		});
	}
	,toPaintMask: function() {
		arm_Context.setLayer(this,true);
		this.fill_mask = null;
		arm_node_MakeMaterial.parsePaintMaterial();
		arm_Context.layerPreviewDirty = true;
		arm_ui_UISidebar.inst.hwnd0.redraws = 2;
	}
	,isVisible: function() {
		if(this.visible) {
			if(this.parent != null) {
				return this.parent.visible;
			} else {
				return true;
			}
		} else {
			return false;
		}
	}
	,getChildren: function() {
		var children = null;
		var _g = 0;
		var _g1 = arm_Project.layers;
		while(_g < _g1.length) {
			var l = _g1[_g];
			++_g;
			if(l.parent == this) {
				if(children == null) {
					children = [];
				}
				children.push(l);
			}
		}
		return children;
	}
	,move: function(to) {
		var i = arm_Project.layers.indexOf(this);
		var delta = to - i;
		if(i + delta < 0 || i + delta > arm_Project.layers.length - 1) {
			return;
		}
		var pointers = arm_ui_TabLayers.initLayerMap();
		var isGroup = this.getChildren() != null;
		var j = delta > 0 ? to : to - 1;
		var k = delta > 0 ? to + 1 : to;
		var jParent = j >= 0 ? arm_Project.layers[j].parent : null;
		var kParent = k < arm_Project.layers.length ? arm_Project.layers[k].parent : null;
		var kGroup = k < arm_Project.layers.length && arm_Project.layers[k].getChildren() != null;
		var kLayer = k < arm_Project.layers.length ? arm_Project.layers[k] : null;
		if(isGroup && jParent != null) {
			return;
		}
		arm_Context.setLayer(this);
		arm_History.orderLayers(i + delta);
		arm_ui_UISidebar.inst.hwnd0.redraws = 2;
		HxOverrides.remove(arm_Project.layers,this);
		arm_Project.layers.splice(i + delta,0,this);
		if(isGroup) {
			var children = this.getChildren();
			var _g = 0;
			var _g1 = children.length;
			while(_g < _g1) {
				var l = _g++;
				var c = children[delta > 0 ? l : children.length - 1 - l];
				HxOverrides.remove(arm_Project.layers,c);
				arm_Project.layers.splice(delta > 0 ? i + delta - 1 : i + delta,0,c);
			}
		} else {
			if(this.parent == null && jParent != null) {
				this.parent = jParent;
			}
			if(this.parent != null && kParent == null && !kGroup) {
				var parent = this.parent;
				this.parent = null;
				if(parent.getChildren() == null) {
					parent.delete();
				}
			}
			if(this.parent != null && (kParent != null || kGroup)) {
				this.parent = kGroup ? kLayer : kParent;
			}
		}
		var _g = 0;
		var _g1 = arm_Project.materials;
		while(_g < _g1.length) arm_ui_TabLayers.remapLayerPointers(_g1[_g++].canvas.nodes,arm_ui_TabLayers.fillLayerMap(pointers));
	}
	,__class__: arm_data_LayerSlot
};
var arm_data_MaterialSlot = function(m,c) {
	this.paintSubs = true;
	this.paintEmis = true;
	this.paintHeight = true;
	this.paintNor = true;
	this.paintMet = true;
	this.paintRough = true;
	this.paintOcc = true;
	this.paintOpac = true;
	this.paintBase = true;
	this.id = 0;
	this.previewReady = false;
	this.imageIcon = null;
	this.image = null;
	this.nodes = new zui_Nodes();
	var _g = 0;
	var _g1 = arm_Project.materials;
	while(_g < _g1.length) {
		var mat = _g1[_g];
		++_g;
		if(mat.id >= this.id) {
			this.id = mat.id + 1;
		}
	}
	this.data = m;
	this.image = kha_Image.createRenderTarget(256,256);
	this.imageIcon = kha_Image.createRenderTarget(50,50);
	if(c == null) {
		if(arm_data_MaterialSlot.defaultCanvas == null) {
			iron_data_Data.getBlob("default_material.arm",function(b) {
				arm_data_MaterialSlot.defaultCanvas = b;
			});
		}
		var i = new haxe_io_BytesInput(arm_data_MaterialSlot.defaultCanvas.toBytes());
		i.set_bigEndian(false);
		this.canvas = iron_system_ArmPack.read(i);
		this.canvas.name = "Material " + (this.id + 1);
	} else {
		this.canvas = c;
	}
};
$hxClasses["arm.data.MaterialSlot"] = arm_data_MaterialSlot;
arm_data_MaterialSlot.__name__ = "arm.data.MaterialSlot";
arm_data_MaterialSlot.prototype = {
	unload: function() {
		this.image.unload();
		this.imageIcon.unload();
	}
	,__class__: arm_data_MaterialSlot
};
var arm_format_BlendParser = function(blob) {
	this.map = new haxe_ds_IntMap();
	this.dna = null;
	this.blocks = [];
	this.blob = blob;
	this.pos = 0;
	if(this.readChars(7) != "BLENDER") {
		this.blob = kha_Blob.fromBytes(haxe_io_Bytes.ofData(Krom.inflate(blob.toBytes().b.bufferValue,false)));
		this.pos = 0;
		if(this.readChars(7) != "BLENDER") {
			return;
		}
	}
	this.parse();
};
$hxClasses["arm.format.BlendParser"] = arm_format_BlendParser;
arm_format_BlendParser.__name__ = "arm.format.BlendParser";
arm_format_BlendParser.getStruct = function(dna,typeIndex) {
	var _g = 0;
	var _g1 = dna.structs;
	while(_g < _g1.length) {
		var ds = _g1[_g];
		++_g;
		if(ds.type == typeIndex) {
			return ds;
		}
	}
	return null;
};
arm_format_BlendParser.getTypeIndex = function(dna,type) {
	var _g = 0;
	var _g1 = dna.types.length;
	while(_g < _g1) {
		var i = _g++;
		if(type == dna.types[i]) {
			return i;
		}
	}
	return -1;
};
arm_format_BlendParser.prototype = {
	get: function(type) {
		if(this.dna == null) {
			return null;
		}
		var typeIndex = arm_format_BlendParser.getTypeIndex(this.dna,type);
		if(typeIndex == -1) {
			return null;
		}
		var ds = arm_format_BlendParser.getStruct(this.dna,typeIndex);
		var handles = [];
		var _g = 0;
		var _g1 = this.blocks;
		while(_g < _g1.length) {
			var b = _g1[_g];
			++_g;
			if(this.dna.structs[b.sdnaIndex].type == typeIndex) {
				var h = new arm_format_Handle();
				handles.push(h);
				h.block = b;
				h.ds = ds;
			}
		}
		return handles;
	}
	,parse: function() {
		this.pointerSize = this.readChar() == "_" ? 4 : 8;
		this.littleEndian = this.readChar() == "v";
		if(this.littleEndian) {
			this.read16 = $bind(this,this.read16LE);
			this.read32 = $bind(this,this.read32LE);
			this.read64 = $bind(this,this.read64LE);
			this.readf32 = $bind(this,this.readf32LE);
		} else {
			this.read16 = $bind(this,this.read16BE);
			this.read32 = $bind(this,this.read32BE);
			this.read64 = $bind(this,this.read64BE);
			this.readf32 = $bind(this,this.readf32BE);
		}
		this.version = this.readChars(3);
		while(this.pos < this.blob.get_length()) {
			this.align();
			var b = new arm_format_Block();
			b.code = this.readChars(4);
			if(b.code == "ENDB") {
				break;
			}
			this.blocks.push(b);
			b.blend = this;
			b.size = this.read32();
			var addr = this.readPointer();
			if(!this.map.h.hasOwnProperty(addr.high)) {
				this.map.h[addr.high] = new haxe_ds_IntMap();
			}
			this.map.h[addr.high].h[addr.low] = b;
			b.sdnaIndex = this.read32();
			b.count = this.read32();
			b.pos = this.pos;
			if(b.code == "DNA1") {
				this.dna = new arm_format_Dna();
				this.readChars(4);
				this.readChars(4);
				var namesCount = this.read32();
				var _g = 0;
				while(_g < namesCount) {
					++_g;
					this.dna.names.push(this.readString());
				}
				this.align();
				this.readChars(4);
				var typesCount = this.read32();
				var _g1 = 0;
				while(_g1 < typesCount) {
					++_g1;
					this.dna.types.push(this.readString());
				}
				this.align();
				this.readChars(4);
				var _g2 = 0;
				while(_g2 < typesCount) {
					++_g2;
					this.dna.typesLength.push(this.read16());
				}
				this.align();
				this.readChars(4);
				var structCount = this.read32();
				var _g3 = 0;
				while(_g3 < structCount) {
					++_g3;
					var ds = new arm_format_DnaStruct();
					this.dna.structs.push(ds);
					ds.dna = this.dna;
					ds.type = this.read16();
					var fieldCount = this.read16();
					if(fieldCount > 0) {
						ds.fieldTypes = [];
						ds.fieldNames = [];
						var _g4 = 0;
						while(_g4 < fieldCount) {
							++_g4;
							ds.fieldTypes.push(this.read16());
							ds.fieldNames.push(this.read16());
						}
					}
				}
			} else {
				this.pos += b.size;
			}
		}
	}
	,align: function() {
		var mod = this.pos % 4;
		if(mod > 0) {
			this.pos += 4 - mod;
		}
	}
	,read8: function() {
		var i = this.blob.readU8(this.pos);
		this.pos += 1;
		return i;
	}
	,read16LE: function() {
		var i = this.blob.readS16LE(this.pos);
		this.pos += 2;
		return i;
	}
	,read32LE: function() {
		var i = this.blob.readS32LE(this.pos);
		this.pos += 4;
		return i;
	}
	,read64LE: function() {
		return new haxe__$Int64__$_$_$Int64(this.read32(),this.read32());
	}
	,readf32LE: function() {
		var f = this.blob.readF32LE(this.pos);
		this.pos += 4;
		return f;
	}
	,read16BE: function() {
		var i = this.blob.readS16BE(this.pos);
		this.pos += 2;
		return i;
	}
	,read32BE: function() {
		var i = this.blob.readS32BE(this.pos);
		this.pos += 4;
		return i;
	}
	,read64BE: function() {
		return new haxe__$Int64__$_$_$Int64(this.read32(),this.read32());
	}
	,readf32BE: function() {
		var f = this.blob.readF32BE(this.pos);
		this.pos += 4;
		return f;
	}
	,read8array: function(len) {
		var ar = new Int32Array(len);
		var _g = 0;
		while(_g < len) ar[_g++] = this.read8();
		return ar;
	}
	,read16array: function(len) {
		var ar = new Int32Array(len);
		var _g = 0;
		while(_g < len) ar[_g++] = this.read16();
		return ar;
	}
	,read32array: function(len) {
		var ar = new Int32Array(len);
		var _g = 0;
		while(_g < len) ar[_g++] = this.read32();
		return ar;
	}
	,readf32array: function(len) {
		var ar = new Float32Array(len);
		var _g = 0;
		while(_g < len) ar[_g++] = this.readf32();
		return ar;
	}
	,readString: function() {
		var s = "";
		while(true) {
			var ch = this.read8();
			if(ch == 0) {
				break;
			}
			s += String.fromCodePoint(ch);
		}
		return s;
	}
	,readChars: function(len) {
		var s = "";
		var _g = 0;
		while(_g < len) {
			++_g;
			s += this.readChar();
		}
		return s;
	}
	,readChar: function() {
		var code = this.read8();
		return String.fromCodePoint(code);
	}
	,readPointer: function() {
		if(this.pointerSize == 4) {
			var x = this.read32();
			return new haxe__$Int64__$_$_$Int64(x >> 31,x);
		} else {
			return this.read64();
		}
	}
	,__class__: arm_format_BlendParser
};
var arm_format_Block = function() {
};
$hxClasses["arm.format.Block"] = arm_format_Block;
arm_format_Block.__name__ = "arm.format.Block";
arm_format_Block.prototype = {
	__class__: arm_format_Block
};
var arm_format_Dna = function() {
	this.structs = [];
	this.typesLength = [];
	this.types = [];
	this.names = [];
};
$hxClasses["arm.format.Dna"] = arm_format_Dna;
arm_format_Dna.__name__ = "arm.format.Dna";
arm_format_Dna.prototype = {
	__class__: arm_format_Dna
};
var arm_format_DnaStruct = function() {
};
$hxClasses["arm.format.DnaStruct"] = arm_format_DnaStruct;
arm_format_DnaStruct.__name__ = "arm.format.DnaStruct";
arm_format_DnaStruct.prototype = {
	__class__: arm_format_DnaStruct
};
var arm_format_Handle = function() {
	this.offset = 0;
};
$hxClasses["arm.format.Handle"] = arm_format_Handle;
arm_format_Handle.__name__ = "arm.format.Handle";
arm_format_Handle.prototype = {
	getSize: function(index) {
		var dna = this.ds.dna;
		var n = dna.names[this.ds.fieldNames[index]];
		var size = 0;
		if(n.indexOf("*") >= 0) {
			size = this.block.blend.pointerSize;
		} else {
			size = dna.typesLength[this.ds.fieldTypes[index]];
		}
		if(n.indexOf("[") > 0) {
			size *= this.getArrayLen(n);
		}
		return size;
	}
	,baseName: function(s) {
		while(s.charAt(0) == "*") s = s.substring(1,s.length);
		if(s.charAt(s.length - 1) == "]") {
			s = s.substring(0,s.indexOf("["));
		}
		return s;
	}
	,getArrayLen: function(s) {
		return Std.parseInt(s.substring(s.indexOf("[") + 1,s.indexOf("]")));
	}
	,get: function(name,index,asType,arrayLen) {
		if(arrayLen == null) {
			arrayLen = 0;
		}
		if(index == null) {
			index = 0;
		}
		var dna = this.ds.dna;
		var _g = 0;
		var _g1 = this.ds.fieldNames.length;
		while(_g < _g1) {
			var i = _g++;
			var dnaName = dna.names[this.ds.fieldNames[i]];
			if(name == this.baseName(dnaName)) {
				var typeIndex = this.ds.fieldTypes[i];
				var type = dna.types[typeIndex];
				var newOffset = this.offset;
				var _g2 = 0;
				while(_g2 < i) newOffset += this.getSize(_g2++);
				if(asType != null) {
					var _g3 = 0;
					var _g4 = dna.types.length;
					while(_g3 < _g4) {
						var i1 = _g3++;
						if(dna.types[i1] == asType) {
							typeIndex = i1;
							break;
						}
					}
				}
				if(typeIndex < 12) {
					var blend = this.block.blend;
					blend.pos = this.block.pos + newOffset;
					var isArray = dnaName.charAt(dnaName.length - 1) == "]";
					var len = isArray ? arrayLen > 0 ? arrayLen : this.getArrayLen(dnaName) : 1;
					switch(type) {
					case "char":
						if(isArray) {
							return blend.readString();
						} else {
							return blend.read8();
						}
						break;
					case "double":
						return 0;
					case "float":
						if(isArray) {
							return blend.readf32array(len);
						} else {
							return blend.readf32();
						}
						break;
					case "int":
						if(isArray) {
							return blend.read32array(len);
						} else {
							return blend.read32();
						}
						break;
					case "int64_t":
						return blend.read64();
					case "long":
						if(isArray) {
							return blend.read32array(len);
						} else {
							return blend.read32();
						}
						break;
					case "short":
						if(isArray) {
							return blend.read16array(len);
						} else {
							return blend.read16();
						}
						break;
					case "uchar":
						if(isArray) {
							return blend.read8array(len);
						} else {
							return blend.read8();
						}
						break;
					case "uint64_t":
						return blend.read64();
					case "ulong":
						if(isArray) {
							return blend.read32array(len);
						} else {
							return blend.read32();
						}
						break;
					case "ushort":
						if(isArray) {
							return blend.read16array(len);
						} else {
							return blend.read16();
						}
						break;
					case "void":
						return 0;
					}
				}
				var h = new arm_format_Handle();
				h.ds = arm_format_BlendParser.getStruct(dna,typeIndex);
				if(dnaName.charAt(0) == "*") {
					this.block.blend.pos = this.block.pos + newOffset;
					var addr = this.block.blend.readPointer();
					if(this.block.blend.map.h.hasOwnProperty(addr.high)) {
						h.block = this.block.blend.map.h[addr.high].h[addr.low];
					} else {
						h.block = this.block;
					}
					h.offset = 0;
				} else {
					h.block = this.block;
					h.offset = newOffset;
				}
				h.offset += dna.typesLength[typeIndex] * index;
				return h;
			}
		}
		return null;
	}
	,__class__: arm_format_Handle
};
var arm_format_ExrWriter = function(out,width,height,src,bits,type,off) {
	if(off == null) {
		off = 0;
	}
	if(type == null) {
		type = 1;
	}
	if(bits == null) {
		bits = 16;
	}
	out.writeByte(118);
	out.writeByte(47);
	out.writeByte(49);
	out.writeByte(1);
	out.writeByte(2);
	out.writeByte(0);
	out.writeByte(0);
	out.writeByte(0);
	out.writeString("channels");
	out.writeByte(0);
	out.writeString("chlist");
	out.writeByte(0);
	out.writeByte(55);
	out.writeByte(0);
	out.writeByte(0);
	out.writeByte(0);
	var attrib = bits == 16 ? 1 : 2;
	out.writeByte(66);
	out.writeByte(0);
	out.writeByte(attrib);
	out.writeByte(0);
	out.writeByte(0);
	out.writeByte(0);
	out.writeByte(0);
	out.writeByte(0);
	out.writeByte(0);
	out.writeByte(0);
	out.writeByte(1);
	out.writeByte(0);
	out.writeByte(0);
	out.writeByte(0);
	out.writeByte(1);
	out.writeByte(0);
	out.writeByte(0);
	out.writeByte(0);
	out.writeByte(71);
	out.writeByte(0);
	out.writeByte(attrib);
	out.writeByte(0);
	out.writeByte(0);
	out.writeByte(0);
	out.writeByte(0);
	out.writeByte(0);
	out.writeByte(0);
	out.writeByte(0);
	out.writeByte(1);
	out.writeByte(0);
	out.writeByte(0);
	out.writeByte(0);
	out.writeByte(1);
	out.writeByte(0);
	out.writeByte(0);
	out.writeByte(0);
	out.writeByte(82);
	out.writeByte(0);
	out.writeByte(attrib);
	out.writeByte(0);
	out.writeByte(0);
	out.writeByte(0);
	out.writeByte(0);
	out.writeByte(0);
	out.writeByte(0);
	out.writeByte(0);
	out.writeByte(1);
	out.writeByte(0);
	out.writeByte(0);
	out.writeByte(0);
	out.writeByte(1);
	out.writeByte(0);
	out.writeByte(0);
	out.writeByte(0);
	out.writeByte(0);
	out.writeString("compression");
	out.writeByte(0);
	out.writeString("compression");
	out.writeByte(0);
	out.writeByte(1);
	out.writeByte(0);
	out.writeByte(0);
	out.writeByte(0);
	out.writeByte(0);
	out.writeString("dataWindow");
	out.writeByte(0);
	out.writeString("box2i");
	out.writeByte(0);
	out.writeByte(16);
	out.writeByte(0);
	out.writeByte(0);
	out.writeByte(0);
	out.writeByte(0);
	out.writeByte(0);
	out.writeByte(0);
	out.writeByte(0);
	out.writeByte(0);
	out.writeByte(0);
	out.writeByte(0);
	out.writeByte(0);
	var ww = width - 1;
	var hh = height - 1;
	out.writeByte(ww & 255);
	out.writeByte(ww >> 8 & 255);
	out.writeByte(ww >> 16 & 255);
	out.writeByte(ww >> 24 & 255);
	out.writeByte(hh & 255);
	out.writeByte(hh >> 8 & 255);
	out.writeByte(hh >> 16 & 255);
	out.writeByte(hh >> 24 & 255);
	out.writeString("displayWindow");
	out.writeByte(0);
	out.writeString("box2i");
	out.writeByte(0);
	out.writeByte(16);
	out.writeByte(0);
	out.writeByte(0);
	out.writeByte(0);
	out.writeByte(0);
	out.writeByte(0);
	out.writeByte(0);
	out.writeByte(0);
	out.writeByte(0);
	out.writeByte(0);
	out.writeByte(0);
	out.writeByte(0);
	out.writeByte(ww & 255);
	out.writeByte(ww >> 8 & 255);
	out.writeByte(ww >> 16 & 255);
	out.writeByte(ww >> 24 & 255);
	out.writeByte(hh & 255);
	out.writeByte(hh >> 8 & 255);
	out.writeByte(hh >> 16 & 255);
	out.writeByte(hh >> 24 & 255);
	out.writeString("lineOrder");
	out.writeByte(0);
	out.writeString("lineOrder");
	out.writeByte(0);
	out.writeByte(1);
	out.writeByte(0);
	out.writeByte(0);
	out.writeByte(0);
	out.writeByte(0);
	out.writeString("pixelAspectRatio");
	out.writeByte(0);
	out.writeString("float");
	out.writeByte(0);
	out.writeByte(4);
	out.writeByte(0);
	out.writeByte(0);
	out.writeByte(0);
	out.writeByte(0);
	out.writeByte(0);
	out.writeByte(128);
	out.writeByte(63);
	out.writeString("screenWindowCenter");
	out.writeByte(0);
	out.writeString("v2f");
	out.writeByte(0);
	out.writeByte(8);
	out.writeByte(0);
	out.writeByte(0);
	out.writeByte(0);
	out.writeByte(0);
	out.writeByte(0);
	out.writeByte(0);
	out.writeByte(0);
	out.writeByte(0);
	out.writeByte(0);
	out.writeByte(0);
	out.writeByte(0);
	out.writeString("screenWindowWidth");
	out.writeByte(0);
	out.writeString("float");
	out.writeByte(0);
	out.writeByte(4);
	out.writeByte(0);
	out.writeByte(0);
	out.writeByte(0);
	out.writeByte(0);
	out.writeByte(0);
	out.writeByte(128);
	out.writeByte(63);
	out.writeByte(0);
	var byteSize = bits == 16 ? 2 : 4;
	var pixelRowSize = width * 3 * byteSize;
	var fullRowSize = pixelRowSize + 8;
	var ofs = out.b.pos + 8 * height;
	var _g = 0;
	while(_g < height) {
		++_g;
		out.writeByte(ofs & 255);
		out.writeByte(ofs >> 8 & 255);
		out.writeByte(ofs >> 16 & 255);
		out.writeByte(ofs >> 24 & 255);
		out.writeByte(0);
		out.writeByte(0);
		out.writeByte(0);
		out.writeByte(0);
		ofs += fullRowSize;
	}
	var stride = 4 * byteSize;
	var pos = 0;
	var writeLine16 = function(bytePos) {
		var _g = 0;
		var _g1 = width;
		while(_g < _g1) {
			++_g;
			out.writeByte(src.b[bytePos]);
			out.writeByte(src.b[bytePos + 1]);
			bytePos += stride;
		}
	};
	var writeLine32 = function(bytePos) {
		var _g = 0;
		var _g1 = width;
		while(_g < _g1) {
			++_g;
			out.writeByte(src.b[bytePos]);
			out.writeByte(src.b[bytePos + 1]);
			out.writeByte(src.b[bytePos + 2]);
			out.writeByte(src.b[bytePos + 3]);
			bytePos += stride;
		}
	};
	var writeLine = bits == 16 ? writeLine16 : writeLine32;
	var writeBGR = function(off) {
		writeLine(pos + byteSize * 2);
		writeLine(pos + byteSize);
		writeLine(pos);
	};
	var writeSingle = function(off) {
		writeLine(pos + off * byteSize);
		writeLine(pos + off * byteSize);
		writeLine(pos + off * byteSize);
	};
	var writeData = type == 1 ? writeBGR : writeSingle;
	var _g = 0;
	while(_g < height) {
		var y = _g++;
		out.writeByte(y & 255);
		out.writeByte(y >> 8 & 255);
		out.writeByte(y >> 16 & 255);
		out.writeByte(y >> 24 & 255);
		out.writeByte(pixelRowSize & 255);
		out.writeByte(pixelRowSize >> 8 & 255);
		out.writeByte(pixelRowSize >> 16 & 255);
		out.writeByte(pixelRowSize >> 24 & 255);
		writeData(off);
		pos += width * stride;
	}
};
$hxClasses["arm.format.ExrWriter"] = arm_format_ExrWriter;
arm_format_ExrWriter.__name__ = "arm.format.ExrWriter";
arm_format_ExrWriter.prototype = {
	__class__: arm_format_ExrWriter
};
var arm_format_FbxBinaryParser = function(blob) {
	this.blob = blob;
	this.pos = 0;
	if(this.readChars("Kaydara FBX Binary  \x00\x1A\x00".length) != "Kaydara FBX Binary  \x00\x1A\x00") {
		return;
	}
	this.is64 = this.read32() >= 7500;
	this.root = { name : "Root", props : [arm_format_FbxProp.PInt(0),arm_format_FbxProp.PString("Root"),arm_format_FbxProp.PString("Root")], childs : this.parseNodes()};
};
$hxClasses["arm.format.FbxBinaryParser"] = arm_format_FbxBinaryParser;
arm_format_FbxBinaryParser.__name__ = "arm.format.FbxBinaryParser";
arm_format_FbxBinaryParser.parse = function(blob) {
	return new arm_format_FbxBinaryParser(blob).root;
};
arm_format_FbxBinaryParser.prototype = {
	parseArray: function(readVal,isFloat) {
		if(isFloat == null) {
			isFloat = false;
		}
		var len = this.read32();
		var encoding = this.read32();
		var compressedLen = this.read32();
		var endPos = this.pos + compressedLen;
		var _blob = this.blob;
		if(encoding != 0) {
			this.pos += 2;
			this.blob = kha_Blob.fromBytes(haxe_io_Bytes.ofData(Krom.inflate(this.blob.sub(this.pos,compressedLen).toBytes().b.bufferValue,true)));
			this.pos = 0;
		}
		var res = isFloat ? this.parseArrayf(readVal,len) : this.parseArrayi(readVal,len);
		if(encoding != 0) {
			this.pos = endPos;
			this.blob = _blob;
		}
		return res;
	}
	,parseArrayf: function(readVal,len) {
		var res = [];
		var _g = 0;
		while(_g < len) {
			++_g;
			res.push(readVal());
		}
		return arm_format_FbxProp.PFloats(res);
	}
	,parseArrayi: function(readVal,len) {
		var res = [];
		var _g = 0;
		while(_g < len) {
			++_g;
			res.push(readVal());
		}
		return arm_format_FbxProp.PInts(res);
	}
	,parseProp: function() {
		switch(this.readChar()) {
		case "C":
			return arm_format_FbxProp.PString(this.readChar());
		case "D":
			return arm_format_FbxProp.PFloat(this.readf64());
		case "F":
			return arm_format_FbxProp.PFloat(this.readf32());
		case "I":
			return arm_format_FbxProp.PInt(this.read32());
		case "L":
			return arm_format_FbxProp.PInt(this.read64());
		case "R":
			this.readBytes(this.read32());
			return null;
		case "S":
			return arm_format_FbxProp.PString(this.readChars(this.read32()));
		case "Y":
			return arm_format_FbxProp.PInt(this.read16());
		case "b":
			return this.parseArray($bind(this,this.readBool));
		case "d":
			return this.parseArray($bind(this,this.readf64),true);
		case "f":
			return this.parseArray($bind(this,this.readf32),true);
		case "i":
			return this.parseArray($bind(this,this.read32));
		case "l":
			return this.parseArray($bind(this,this.read64));
		default:
			return null;
		}
	}
	,parseNode: function() {
		var endPos = 0;
		var numProps = 0;
		if(this.is64) {
			endPos = this.read64();
			numProps = this.read64();
			this.read64();
		} else {
			endPos = this.read32();
			numProps = this.read32();
			this.read32();
		}
		var nameLen = this.read8();
		var name = nameLen == 0 ? "" : this.readChars(nameLen);
		if(endPos == 0) {
			return null;
		}
		var props = null;
		if(numProps > 0) {
			props = [];
		}
		var _g = 0;
		var _g1 = numProps;
		while(_g < _g1) {
			++_g;
			props.push(this.parseProp());
		}
		var childs = null;
		if(endPos - this.pos > 0) {
			childs = [];
			while(true) {
				var nested = this.parseNode();
				if(nested == null) {
					break;
				} else {
					childs.push(nested);
				}
			}
		}
		return { name : name, props : props, childs : childs};
	}
	,parseNodes: function() {
		var nodes = [];
		while(true) {
			var n = this.parseNode();
			if(n == null) {
				break;
			} else {
				nodes.push(n);
			}
		}
		return nodes;
	}
	,read8: function() {
		var i = this.blob.readU8(this.pos);
		this.pos += 1;
		return i;
	}
	,read16: function() {
		var i = this.blob.readS16LE(this.pos);
		this.pos += 2;
		return i;
	}
	,read32: function() {
		var i = this.blob.bytes.getInt32(this.pos);
		this.pos += 4;
		return i;
	}
	,read64: function() {
		var i1 = this.read32();
		this.read32();
		return i1;
	}
	,readf32: function() {
		var f = this.blob.readF32LE(this.pos);
		this.pos += 4;
		return f;
	}
	,readf64: function() {
		return haxe_io_FPHelper.i64ToDouble(this.read32(),this.read32());
	}
	,readChars: function(len) {
		var s = "";
		var _g = 0;
		while(_g < len) {
			++_g;
			s += this.readChar();
		}
		return s;
	}
	,readChar: function() {
		var code = this.read8();
		return String.fromCodePoint(code);
	}
	,readBool: function() {
		return this.read8();
	}
	,readBytes: function(len) {
		var b = this.blob.sub(this.pos,len);
		this.pos += len;
		return b;
	}
	,__class__: arm_format_FbxBinaryParser
};
var arm_format_FbxProp = $hxEnums["arm.format.FbxProp"] = { __ename__ : true, __constructs__ : ["PInt","PFloat","PString","PIdent","PInts","PFloats"]
	,PInt: ($_=function(v) { return {_hx_index:0,v:v,__enum__:"arm.format.FbxProp",toString:$estr}; },$_.__params__ = ["v"],$_)
	,PFloat: ($_=function(v) { return {_hx_index:1,v:v,__enum__:"arm.format.FbxProp",toString:$estr}; },$_.__params__ = ["v"],$_)
	,PString: ($_=function(v) { return {_hx_index:2,v:v,__enum__:"arm.format.FbxProp",toString:$estr}; },$_.__params__ = ["v"],$_)
	,PIdent: ($_=function(i) { return {_hx_index:3,i:i,__enum__:"arm.format.FbxProp",toString:$estr}; },$_.__params__ = ["i"],$_)
	,PInts: ($_=function(v) { return {_hx_index:4,v:v,__enum__:"arm.format.FbxProp",toString:$estr}; },$_.__params__ = ["v"],$_)
	,PFloats: ($_=function(v) { return {_hx_index:5,v:v,__enum__:"arm.format.FbxProp",toString:$estr}; },$_.__params__ = ["v"],$_)
};
var arm_format_FbxTools = function() { };
$hxClasses["arm.format.FbxTools"] = arm_format_FbxTools;
arm_format_FbxTools.__name__ = "arm.format.FbxTools";
arm_format_FbxTools.get = function(n,path,opt) {
	if(opt == null) {
		opt = false;
	}
	var parts = path.split(".");
	var cur = n;
	var _g = 0;
	while(_g < parts.length) {
		var p = parts[_g];
		++_g;
		var found = false;
		var _g1 = 0;
		var _g2 = cur.childs;
		while(_g1 < _g2.length) {
			var c = _g2[_g1];
			++_g1;
			if(c.name == p) {
				cur = c;
				found = true;
				break;
			}
		}
		if(!found) {
			if(opt) {
				return null;
			}
			throw haxe_Exception.thrown(n.name + " does not have " + path + " (" + p + " not found)");
		}
	}
	return cur;
};
arm_format_FbxTools.getAll = function(n,path) {
	var parts = path.split(".");
	var cur = [n];
	var _g = 0;
	while(_g < parts.length) {
		var p = parts[_g++];
		var out = [];
		var _g1 = 0;
		while(_g1 < cur.length) {
			var _g2 = 0;
			var _g3 = cur[_g1++].childs;
			while(_g2 < _g3.length) {
				var c = _g3[_g2];
				++_g2;
				if(c.name == p) {
					out.push(c);
				}
			}
		}
		cur = out;
		if(out.length == 0) {
			return out;
		}
	}
	return cur;
};
arm_format_FbxTools.getInts = function(n) {
	if(n.props.length != 1) {
		throw haxe_Exception.thrown(n.name + " has " + Std.string(n.props) + " props");
	}
	var _g = n.props[0];
	if(_g._hx_index == 4) {
		return _g.v;
	} else {
		throw haxe_Exception.thrown(n.name + " has " + Std.string(n.props) + " props");
	}
};
arm_format_FbxTools.getFloats = function(n) {
	if(n.props.length != 1) {
		throw haxe_Exception.thrown(n.name + " has " + Std.string(n.props) + " props");
	}
	var _g = n.props[0];
	switch(_g._hx_index) {
	case 4:
		var _g1 = _g.v;
		var fl = [];
		var _g2 = 0;
		while(_g2 < _g1.length) fl.push(_g1[_g2++]);
		n.props[0] = arm_format_FbxProp.PFloats(fl);
		return fl;
	case 5:
		return _g.v;
	default:
		throw haxe_Exception.thrown(n.name + " has " + Std.string(n.props) + " props");
	}
};
arm_format_FbxTools.toInt = function(n) {
	if(n == null) {
		throw haxe_Exception.thrown("null prop");
	}
	switch(n._hx_index) {
	case 0:
		return n.v;
	case 1:
		return n.v | 0;
	default:
		throw haxe_Exception.thrown("Invalid prop " + Std.string(n));
	}
};
arm_format_FbxTools.toFloat = function(n) {
	if(n == null) {
		throw haxe_Exception.thrown("null prop");
	}
	switch(n._hx_index) {
	case 0:
		return n.v * 1.0;
	case 1:
		return n.v;
	default:
		throw haxe_Exception.thrown("Invalid prop " + Std.string(n));
	}
};
arm_format_FbxTools.toString = function(n) {
	if(n == null) {
		throw haxe_Exception.thrown("null prop");
	}
	if(n._hx_index == 2) {
		return n.v;
	} else {
		throw haxe_Exception.thrown("Invalid prop " + Std.string(n));
	}
};
arm_format_FbxTools.getId = function(n) {
	if(n.props.length != 3) {
		throw haxe_Exception.thrown(n.name + " is not an object");
	}
	var _g = n.props[0];
	switch(_g._hx_index) {
	case 0:
		return _g.v;
	case 1:
		return _g.v | 0;
	default:
		throw haxe_Exception.thrown(n.name + " is not an object " + Std.string(n.props));
	}
};
arm_format_FbxTools.getName = function(n) {
	if(n.props.length != 3) {
		throw haxe_Exception.thrown(n.name + " is not an object");
	}
	var _g = n.props[1];
	if(_g._hx_index == 2) {
		return _g.v.split("::").pop();
	} else {
		throw haxe_Exception.thrown(n.name + " is not an object");
	}
};
var arm_format__$FbxLibrary_Token = $hxEnums["arm.format._FbxLibrary.Token"] = { __ename__ : true, __constructs__ : ["TIdent","TNode","TInt","TFloat","TString","TLength","TBraceOpen","TBraceClose","TColon","TEof"]
	,TIdent: ($_=function(s) { return {_hx_index:0,s:s,__enum__:"arm.format._FbxLibrary.Token",toString:$estr}; },$_.__params__ = ["s"],$_)
	,TNode: ($_=function(s) { return {_hx_index:1,s:s,__enum__:"arm.format._FbxLibrary.Token",toString:$estr}; },$_.__params__ = ["s"],$_)
	,TInt: ($_=function(s) { return {_hx_index:2,s:s,__enum__:"arm.format._FbxLibrary.Token",toString:$estr}; },$_.__params__ = ["s"],$_)
	,TFloat: ($_=function(s) { return {_hx_index:3,s:s,__enum__:"arm.format._FbxLibrary.Token",toString:$estr}; },$_.__params__ = ["s"],$_)
	,TString: ($_=function(s) { return {_hx_index:4,s:s,__enum__:"arm.format._FbxLibrary.Token",toString:$estr}; },$_.__params__ = ["s"],$_)
	,TLength: ($_=function(v) { return {_hx_index:5,v:v,__enum__:"arm.format._FbxLibrary.Token",toString:$estr}; },$_.__params__ = ["v"],$_)
	,TBraceOpen: {_hx_index:6,__enum__:"arm.format._FbxLibrary.Token",toString:$estr}
	,TBraceClose: {_hx_index:7,__enum__:"arm.format._FbxLibrary.Token",toString:$estr}
	,TColon: {_hx_index:8,__enum__:"arm.format._FbxLibrary.Token",toString:$estr}
	,TEof: {_hx_index:9,__enum__:"arm.format._FbxLibrary.Token",toString:$estr}
};
var arm_format_Parser = function() {
};
$hxClasses["arm.format.Parser"] = arm_format_Parser;
arm_format_Parser.__name__ = "arm.format.Parser";
arm_format_Parser.parse = function(text) {
	return new arm_format_Parser().parseText(text);
};
arm_format_Parser.prototype = {
	parseText: function(str) {
		this.buf = str;
		this.pos = 0;
		this.line = 1;
		this.token = null;
		return { name : "Root", props : [arm_format_FbxProp.PInt(0),arm_format_FbxProp.PString("Root"),arm_format_FbxProp.PString("Root")], childs : this.parseNodes()};
	}
	,parseNodes: function() {
		var nodes = [];
		while(true) {
			var _g = this.peek();
			if(_g != null) {
				switch(_g._hx_index) {
				case 7:case 9:
					return nodes;
				default:
				}
			}
			nodes.push(this.parseNode());
		}
	}
	,parseNode: function() {
		var t = this.next();
		var name = t._hx_index == 1 ? t.s : this.unexpected(t);
		var props = [];
		var childs = null;
		_hx_loop1: while(true) {
			t = this.next();
			switch(t._hx_index) {
			case 0:
				props.push(arm_format_FbxProp.PIdent(t.s));
				break;
			case 1:
				this.token = t;
				break;
			case 2:
				props.push(arm_format_FbxProp.PInt(Std.parseInt(t.s)));
				break;
			case 3:
				props.push(arm_format_FbxProp.PFloat(parseFloat(t.s)));
				break;
			case 4:
				props.push(arm_format_FbxProp.PString(t.s));
				break;
			case 5:
				var _g = t.v;
				this.except(arm_format__$FbxLibrary_Token.TBraceOpen);
				this.except(arm_format__$FbxLibrary_Token.TNode("a"));
				var ints = [];
				var floats = null;
				var i = 0;
				while(i < _g) {
					t = this.next();
					switch(t._hx_index) {
					case 2:
						var _g1 = t.s;
						++i;
						if(floats == null) {
							ints.push(Std.parseInt(_g1));
						} else {
							floats.push(Std.parseInt(_g1));
						}
						break;
					case 3:
						var _g2 = t.s;
						++i;
						if(floats == null) {
							floats = [];
							var _g3 = 0;
							while(_g3 < ints.length) floats.push(ints[_g3++]);
							ints = null;
						}
						floats.push(parseFloat(_g2));
						break;
					case 8:
						continue;
					default:
						this.unexpected(t);
					}
				}
				props.push(floats == null ? arm_format_FbxProp.PInts(ints) : arm_format_FbxProp.PFloats(floats));
				this.except(arm_format__$FbxLibrary_Token.TBraceClose);
				break _hx_loop1;
			case 6:case 7:
				this.token = t;
				break;
			default:
				this.unexpected(t);
			}
			t = this.next();
			switch(t._hx_index) {
			case 1:
				this.token = t;
				break _hx_loop1;
			case 6:
				childs = this.parseNodes();
				this.except(arm_format__$FbxLibrary_Token.TBraceClose);
				break _hx_loop1;
			case 7:
				this.token = t;
				break _hx_loop1;
			case 8:
				break;
			default:
				this.unexpected(t);
			}
		}
		if(childs == null) {
			childs = [];
		}
		return { name : name, props : props, childs : childs};
	}
	,except: function(except) {
		var t = this.next();
		if(!Type.enumEq(t,except)) {
			this.error("Unexpected '" + this.tokenStr(t) + "' (" + this.tokenStr(except) + " expected)");
		}
	}
	,peek: function() {
		if(this.token == null) {
			this.token = this.nextToken();
		}
		return this.token;
	}
	,next: function() {
		if(this.token == null) {
			return this.nextToken();
		}
		var tmp = this.token;
		this.token = null;
		return tmp;
	}
	,error: function(msg) {
		throw haxe_Exception.thrown(msg + " (line " + this.line + ")");
	}
	,unexpected: function(t) {
		return this.error("Unexpected " + this.tokenStr(t));
	}
	,tokenStr: function(t) {
		switch(t._hx_index) {
		case 0:
			return t.s;
		case 1:
			return t.s + ":";
		case 2:
			return t.s;
		case 3:
			return t.s;
		case 4:
			return "\"" + t.s + "\"";
		case 5:
			return "*" + t.v;
		case 6:
			return "{";
		case 7:
			return "}";
		case 8:
			return ",";
		case 9:
			return "<eof>";
		}
	}
	,nextToken: function() {
		var start = this.pos;
		while(true) {
			var c = this.buf.charCodeAt(this.pos++);
			switch(c) {
			case 10:
				this.line++;
				++start;
				break;
			case 9:case 13:case 32:
				++start;
				break;
			case 34:
				start = this.pos;
				while(true) {
					c = this.buf.charCodeAt(this.pos++);
					if(c == 34) {
						break;
					}
					if(c != c || c == 10) {
						this.error("Unclosed string");
					}
				}
				return arm_format__$FbxLibrary_Token.TString(HxOverrides.substr(this.buf,start,this.pos - start - 1));
			case 42:
				start = this.pos;
				while(true) {
					c = this.buf.charCodeAt(this.pos++);
					if(!(c >= 48 && c <= 57)) {
						break;
					}
				}
				this.pos--;
				return arm_format__$FbxLibrary_Token.TLength(Std.parseInt(HxOverrides.substr(this.buf,start,this.pos - start)));
			case 44:
				return arm_format__$FbxLibrary_Token.TColon;
			case 59:
				while(true) {
					var c1 = this.buf.charCodeAt(this.pos++);
					if(c1 != c1 || c1 == 10) {
						this.pos--;
						break;
					}
				}
				start = this.pos;
				break;
			case 123:
				return arm_format__$FbxLibrary_Token.TBraceOpen;
			case 125:
				return arm_format__$FbxLibrary_Token.TBraceClose;
			default:
				if(c >= 97 && c <= 122 || c >= 65 && c <= 90 || c == 95) {
					while(true) {
						c = this.buf.charCodeAt(this.pos++);
						if(!(c >= 97 && c <= 122 || c >= 65 && c <= 90 || c >= 48 && c <= 57 || c == 95 || c == 45)) {
							break;
						}
					}
					if(c == 58) {
						return arm_format__$FbxLibrary_Token.TNode(HxOverrides.substr(this.buf,start,this.pos - start - 1));
					}
					this.pos--;
					return arm_format__$FbxLibrary_Token.TIdent(HxOverrides.substr(this.buf,start,this.pos - start));
				}
				if(c >= 48 && c <= 57 || c == 45) {
					while(true) {
						c = this.buf.charCodeAt(this.pos++);
						if(!(c >= 48 && c <= 57)) {
							break;
						}
					}
					if(c != 46 && c != 69 && c != 101 && this.pos - start < 10) {
						this.pos--;
						return arm_format__$FbxLibrary_Token.TInt(HxOverrides.substr(this.buf,start,this.pos - start));
					}
					if(c == 46) {
						while(true) {
							c = this.buf.charCodeAt(this.pos++);
							if(!(c >= 48 && c <= 57)) {
								break;
							}
						}
					}
					if(c == 101 || c == 69) {
						c = this.buf.charCodeAt(this.pos++);
						if(c != 45 && c != 43) {
							this.pos--;
						}
						while(true) {
							c = this.buf.charCodeAt(this.pos++);
							if(!(c >= 48 && c <= 57)) {
								break;
							}
						}
					}
					this.pos--;
					return arm_format__$FbxLibrary_Token.TFloat(HxOverrides.substr(this.buf,start,this.pos - start));
				}
				if(c != c) {
					this.pos--;
					return arm_format__$FbxLibrary_Token.TEof;
				}
				this.error("Unexpected char '" + String.fromCodePoint(c) + "'");
			}
		}
	}
	,__class__: arm_format_Parser
};
var arm_format_FbxLibrary = function() {
	this.version = 0.;
	this.root = { name : "Root", props : [], childs : []};
	this.reset();
};
$hxClasses["arm.format.FbxLibrary"] = arm_format_FbxLibrary;
arm_format_FbxLibrary.__name__ = "arm.format.FbxLibrary";
arm_format_FbxLibrary.prototype = {
	reset: function() {
		this.ids = new haxe_ds_IntMap();
		this.connect = new haxe_ds_IntMap();
		this.namedConnect = new haxe_ds_IntMap();
		this.invConnect = new haxe_ds_IntMap();
	}
	,load: function(root) {
		this.reset();
		this.root = root;
		this.version = arm_format_FbxTools.toInt(arm_format_FbxTools.get(root,"FBXHeaderExtension.FBXVersion").props[0]) / 1000;
		if((this.version | 0) != 7) {
			throw haxe_Exception.thrown("FBX Version 7.x required : use FBX 2010 export");
		}
		var _g = 0;
		var _g1 = root.childs;
		while(_g < _g1.length) this.init(_g1[_g++]);
	}
	,init: function(n) {
		switch(n.name) {
		case "Connections":
			var _g = 0;
			var _g1 = n.childs;
			while(_g < _g1.length) {
				var c = _g1[_g];
				++_g;
				if(c.name != "C") {
					continue;
				}
				var child = arm_format_FbxTools.toInt(c.props[1]);
				var parent = arm_format_FbxTools.toInt(c.props[2]);
				if(this.ids.h[child] == null || this.ids.h[parent] == null) {
					continue;
				}
				var name = c.props[3];
				if(name != null) {
					var name1 = arm_format_FbxTools.toString(name);
					var nc = this.namedConnect.h[parent];
					if(nc == null) {
						nc = new haxe_ds_StringMap();
						this.namedConnect.h[parent] = nc;
					}
					nc.h[name1] = child;
					if(name1 == "LookAtProperty") {
						continue;
					}
				}
				var c1 = this.connect.h[parent];
				if(c1 == null) {
					c1 = [];
					this.connect.h[parent] = c1;
				}
				c1.push(child);
				if(parent == 0) {
					continue;
				}
				var c2 = this.invConnect.h[child];
				if(c2 == null) {
					c2 = [];
					this.invConnect.h[child] = c2;
				}
				c2.push(parent);
			}
			break;
		case "Objects":
			var _g = 0;
			var _g1 = n.childs;
			while(_g < _g1.length) {
				var c = _g1[_g];
				++_g;
				var this1 = this.ids;
				var key = arm_format_FbxTools.getId(c);
				this1.h[key] = c;
			}
			break;
		default:
		}
	}
	,getAllGeometries: function() {
		var geoms = arm_format_FbxTools.getAll(this.root,"Objects.Geometry");
		var res = [];
		var _g = 0;
		while(_g < geoms.length) res.push(new arm_format_Geometry(this,geoms[_g++]));
		return res;
	}
	,__class__: arm_format_FbxLibrary
};
var arm_format_Geometry = function(l,root) {
	this.lib = l;
	this.root = root;
};
$hxClasses["arm.format.Geometry"] = arm_format_Geometry;
arm_format_Geometry.__name__ = "arm.format.Geometry";
arm_format_Geometry.prototype = {
	getRoot: function() {
		return this.root;
	}
	,getVertices: function() {
		return arm_format_FbxTools.getFloats(arm_format_FbxTools.get(this.root,"Vertices"));
	}
	,getPolygons: function() {
		return arm_format_FbxTools.getInts(arm_format_FbxTools.get(this.root,"PolygonVertexIndex"));
	}
	,getNormals: function() {
		return this.processVectors("LayerElementNormal","Normals");
	}
	,processVectors: function(layer,name,opt) {
		if(opt == null) {
			opt = false;
		}
		var vect = arm_format_FbxTools.get(this.root,layer + "." + name,opt);
		if(vect == null) {
			return null;
		}
		var nrm = arm_format_FbxTools.getFloats(vect);
		if(arm_format_FbxTools.toString(arm_format_FbxTools.get(this.root,layer + ".MappingInformationType").props[0]) == "ByVertice") {
			var nout = [];
			var _g = 0;
			var _g1 = this.getPolygons();
			while(_g < _g1.length) {
				var i = _g1[_g];
				++_g;
				var vid = i;
				if(i < 0) {
					vid = -i - 1;
				}
				nout.push(nrm[vid * 3]);
				nout.push(nrm[vid * 3 + 1]);
				nout.push(nrm[vid * 3 + 2]);
			}
			nrm = nout;
		}
		return nrm;
	}
	,getColors: function() {
		var color = arm_format_FbxTools.get(this.root,"LayerElementColor",true);
		if(color == null) {
			return null;
		} else {
			return { values : arm_format_FbxTools.getFloats(arm_format_FbxTools.get(color,"Colors")), index : arm_format_FbxTools.getInts(arm_format_FbxTools.get(color,"ColorIndex"))};
		}
	}
	,getUVs: function() {
		var uvs = [];
		var _g = 0;
		var _g1 = arm_format_FbxTools.getAll(this.root,"LayerElementUV");
		while(_g < _g1.length) {
			var v = _g1[_g];
			++_g;
			var index = arm_format_FbxTools.get(v,"UVIndex",true);
			var values = arm_format_FbxTools.getFloats(arm_format_FbxTools.get(v,"UV"));
			var index1;
			if(index == null) {
				var _g2 = [];
				var _g3 = 0;
				var _g4 = this.getPolygons();
				while(_g3 < _g4.length) {
					var i = _g4[_g3];
					++_g3;
					if(i < 0) {
						_g2.push(-i - 1);
					} else {
						_g2.push(i);
					}
				}
				index1 = _g2;
			} else {
				index1 = arm_format_FbxTools.getInts(index);
			}
			uvs.push({ values : values, index : index1});
		}
		return uvs;
	}
	,getBuffers: function(binary,p) {
		var pbuf = this.getVertices();
		var nbuf = this.getNormals();
		var tbuf = this.getUVs()[0];
		var cbuf = arm_format_FbxParser.parseVCols ? this.getColors() : null;
		var polys = this.getPolygons();
		if(arm_format_FbxParser.parseTransform) {
			var _g = 0;
			var _g1 = pbuf.length / 3 | 0;
			while(_g < _g1) {
				var i = _g++;
				pbuf[i * 3] *= p.sx;
				pbuf[i * 3] += p.tx;
				pbuf[i * 3 + 1] *= p.sy;
				pbuf[i * 3 + 1] += p.ty;
				pbuf[i * 3 + 2] *= p.sz;
				pbuf[i * 3 + 2] += p.tz;
			}
		}
		var scalePos = 0.0;
		var _g = 0;
		while(_g < pbuf.length) {
			var f = Math.abs(pbuf[_g++]);
			if(scalePos < f) {
				scalePos = f;
			}
		}
		var inv = 32767 * (1 / scalePos);
		var pos = 0;
		var count = 0;
		var vlen = 0;
		var ilen = 0;
		var _g = 0;
		while(_g < polys.length) {
			++count;
			if(polys[_g++] < 0) {
				var _g1 = 0;
				var _g2 = count;
				while(_g1 < _g2) {
					++_g1;
					++vlen;
				}
				var _g3 = 0;
				var _g4 = count - 2;
				while(_g3 < _g4) {
					++_g3;
					ilen += 3;
				}
				count = 0;
			}
			++pos;
		}
		var posa = new Int16Array(vlen * 4);
		var nora = new Int16Array(vlen * 2);
		var texa = tbuf != null ? new Int16Array(vlen * 2) : null;
		var cola = cbuf != null ? new Int16Array(vlen * 4) : null;
		var inda = new Uint32Array(ilen);
		pos = 0;
		count = 0;
		vlen = 0;
		ilen = 0;
		var _g = 0;
		while(_g < polys.length) {
			var i = polys[_g];
			++_g;
			++count;
			if(i < 0) {
				polys[pos] = -i - 1;
				var start = pos - count + 1;
				var _g1 = 0;
				var _g2 = count;
				while(_g1 < _g2) {
					var k = _g1++ + start;
					var vidx = polys[k];
					posa[vlen * 4] = pbuf[vidx * 3] * inv | 0;
					posa[vlen * 4 + 1] = pbuf[vidx * 3 + 1] * inv | 0;
					posa[vlen * 4 + 2] = pbuf[vidx * 3 + 2] * inv | 0;
					posa[vlen * 4 + 3] = nbuf[k * 3 + 2] * 32767 | 0;
					nora[vlen * 2] = nbuf[k * 3] * 32767 | 0;
					nora[vlen * 2 + 1] = nbuf[k * 3 + 1] * 32767 | 0;
					if(tbuf != null) {
						var iuv = tbuf.index[k];
						texa[vlen * 2] = tbuf.values[iuv * 2] * 32767 | 0;
						texa[vlen * 2 + 1] = (1.0 - tbuf.values[iuv * 2 + 1]) * 32767 | 0;
					}
					if(cbuf != null) {
						var icol = cbuf.index[k];
						cola[vlen * 3] = cbuf.values[icol * 4] * 32767 | 0;
						cola[vlen * 3 + 1] = cbuf.values[icol * 4 + 1] * 32767 | 0;
						cola[vlen * 3 + 2] = cbuf.values[icol * 4 + 2] * 32767 | 0;
					}
					++vlen;
				}
				var _g3 = 0;
				var _g4 = count - 2;
				while(_g3 < _g4) {
					var n = _g3++;
					inda[ilen + 2] = start + n;
					inda[ilen + 1] = start + count - 1;
					inda[ilen] = start + n + 1;
					ilen += 3;
				}
				polys[pos] = i;
				count = 0;
			}
			++pos;
		}
		return { posa : posa, nora : nora, texa : texa, cola : cola, inda : inda, scalePos : scalePos};
	}
	,__class__: arm_format_Geometry
};
var arm_format_FbxParser = function(blob) {
	this.binary = true;
	this.current = 0;
	this.sz = 1.0;
	this.sy = 1.0;
	this.sx = 1.0;
	this.rz = 0.0;
	this.ry = 0.0;
	this.rx = 0.0;
	this.tz = 0.0;
	this.ty = 0.0;
	this.tx = 0.0;
	this.name = "";
	this.scalePos = 1.0;
	this.inda = null;
	this.cola = null;
	this.texa = null;
	this.nora = null;
	this.posa = null;
	var magic = "Kaydara FBX Binary  \x00\x1A\x00";
	var s = "";
	var _g = 0;
	var _g1 = magic.length;
	while(_g < _g1) {
		var code = blob.readU8(_g++);
		s += String.fromCodePoint(code);
	}
	this.binary = s == magic;
	var fbx = this.binary ? arm_format_FbxBinaryParser.parse(blob) : arm_format_Parser.parse(blob.toString());
	var lib = new arm_format_FbxLibrary();
	try {
		lib.load(fbx);
	} catch( _g ) {
		haxe_Log.trace(haxe_Exception.caught(_g).unwrap(),{ fileName : "Sources/arm/format/FbxParser.hx", lineNumber : 45, className : "arm.format.FbxParser", methodName : "new"});
	}
	this.geoms = lib.getAllGeometries();
	this.next();
};
$hxClasses["arm.format.FbxParser"] = arm_format_FbxParser;
arm_format_FbxParser.__name__ = "arm.format.FbxParser";
arm_format_FbxParser.prototype = {
	next: function() {
		if(this.current >= this.geoms.length) {
			return false;
		}
		var geom = this.geoms[this.current];
		var lib = geom.lib;
		this.tx = this.ty = this.tz = 0;
		this.rx = this.ry = this.rz = 0;
		this.sx = this.sy = this.sz = 1;
		if(arm_format_FbxParser.parseTransform) {
			var this1 = lib.invConnect;
			var key = arm_format_FbxTools.getId(geom.getRoot());
			var connects = this1.h[key];
			var _g = 0;
			while(_g < connects.length) {
				var _g1 = 0;
				var _g2 = arm_format_FbxTools.getAll(lib.ids.h[connects[_g++]],"Properties70.P");
				while(_g1 < _g2.length) {
					var p = _g2[_g1];
					++_g1;
					switch(arm_format_FbxTools.toString(p.props[0])) {
					case "Lcl Rotation":
						this.rx = arm_format_FbxTools.toFloat(p.props[4]) * Math.PI / 180;
						this.ry = arm_format_FbxTools.toFloat(p.props[5]) * Math.PI / 180;
						this.rz = arm_format_FbxTools.toFloat(p.props[6]) * Math.PI / 180;
						break;
					case "Lcl Scaling":
						this.sx = arm_format_FbxTools.toFloat(p.props[4]) / 100;
						this.sy = arm_format_FbxTools.toFloat(p.props[5]) / 100;
						this.sz = arm_format_FbxTools.toFloat(p.props[6]) / 100;
						break;
					case "Lcl Translation":
						this.tx = arm_format_FbxTools.toFloat(p.props[4]) / 100;
						this.ty = arm_format_FbxTools.toFloat(p.props[5]) / 100;
						this.tz = arm_format_FbxTools.toFloat(p.props[6]) / 100;
						break;
					default:
					}
				}
			}
		}
		var res = geom.getBuffers(this.binary,this);
		this.scalePos = res.scalePos;
		this.posa = res.posa;
		this.nora = res.nora;
		this.texa = res.texa;
		this.cola = res.cola;
		this.inda = res.inda;
		this.name = arm_format_FbxTools.getName(geom.getRoot());
		if(HxOverrides.cca(this.name,0) == 0) {
			this.name = this.name.substring(1);
		}
		if(HxOverrides.cca(this.name,0) == 1) {
			this.name = this.name.substring(1);
		}
		if(this.name == "Geometry") {
			this.name = "Object -Geometry";
		}
		this.name = this.name.substring(0,this.name.length - 10);
		this.current++;
		return true;
	}
	,__class__: arm_format_FbxParser
};
var arm_format_JpgWriter = function(out) {
	this.YTable = [];
	this.UVTable = [];
	this.fdtbl_Y = [];
	this.fdtbl_UV = [];
	var _g = 0;
	while(_g < 64) {
		++_g;
		this.YTable.push(0);
		this.UVTable.push(0);
		this.fdtbl_Y.push(0.0);
		this.fdtbl_UV.push(0.0);
	}
	this.bitcode = new haxe_ds_IntMap();
	this.category = new haxe_ds_IntMap();
	this.byteout = out;
	this.bytenew = 0;
	this.bytepos = 7;
	this.YDC_HT = new haxe_ds_IntMap();
	this.UVDC_HT = new haxe_ds_IntMap();
	this.YAC_HT = new haxe_ds_IntMap();
	this.UVAC_HT = new haxe_ds_IntMap();
	this.YDU = [];
	this.UDU = [];
	this.VDU = [];
	this.DU = [];
	var _g = 0;
	while(_g < 64) {
		++_g;
		this.YDU.push(0.0);
		this.UDU.push(0.0);
		this.VDU.push(0.0);
		this.DU.push(0.0);
	}
	this.initZigZag();
	this.initLuminance();
	this.initChrominance();
	this.initHuffmanTbl();
	this.initCategoryNumber();
};
$hxClasses["arm.format.JpgWriter"] = arm_format_JpgWriter;
arm_format_JpgWriter.__name__ = "arm.format.JpgWriter";
arm_format_JpgWriter.prototype = {
	initZigZag: function() {
		this.ZigZag = [0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63];
	}
	,initQuantTables: function(sf) {
		var YQT = [16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99];
		var _g = 0;
		while(_g < 64) {
			var i = _g++;
			var t = Math.floor((YQT[i] * sf + 50) / 100);
			if(t < 1) {
				t = 1;
			} else if(t > 255) {
				t = 255;
			}
			this.YTable[this.ZigZag[i]] = t;
		}
		var UVQT = [17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99];
		var _g = 0;
		while(_g < 64) {
			var j = _g++;
			var u = Math.floor((UVQT[j] * sf + 50) / 100);
			if(u < 1) {
				u = 1;
			} else if(u > 255) {
				u = 255;
			}
			this.UVTable[this.ZigZag[j]] = u;
		}
		var aasf = [1.0,1.387039845,1.306562965,1.175875602,1.0,0.785694958,0.541196100,0.275899379];
		var k = 0;
		var _g = 0;
		while(_g < 8) {
			var row = _g++;
			var _g1 = 0;
			while(_g1 < 8) {
				var col = _g1++;
				this.fdtbl_Y[k] = 1.0 / (this.YTable[this.ZigZag[k]] * aasf[row] * aasf[col] * 8.0);
				this.fdtbl_UV[k] = 1.0 / (this.UVTable[this.ZigZag[k]] * aasf[row] * aasf[col] * 8.0);
				++k;
			}
		}
	}
	,initLuminance: function() {
		this.std_dc_luminance_nrcodes = [0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0];
		this.std_dc_luminance_values = this.strIntsToBytes("0,1,2,3,4,5,6,7,8,9,10,11");
		this.std_ac_luminance_nrcodes = [0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125];
		this.std_ac_luminance_values = this.strIntsToBytes("0x01,0x02,0x03,0x00,0x04,0x11,0x05,0x12," + "0x21,0x31,0x41,0x06,0x13,0x51,0x61,0x07," + "0x22,0x71,0x14,0x32,0x81,0x91,0xa1,0x08," + "0x23,0x42,0xb1,0xc1,0x15,0x52,0xd1,0xf0," + "0x24,0x33,0x62,0x72,0x82,0x09,0x0a,0x16," + "0x17,0x18,0x19,0x1a,0x25,0x26,0x27,0x28," + "0x29,0x2a,0x34,0x35,0x36,0x37,0x38,0x39," + "0x3a,0x43,0x44,0x45,0x46,0x47,0x48,0x49," + "0x4a,0x53,0x54,0x55,0x56,0x57,0x58,0x59," + "0x5a,0x63,0x64,0x65,0x66,0x67,0x68,0x69," + "0x6a,0x73,0x74,0x75,0x76,0x77,0x78,0x79," + "0x7a,0x83,0x84,0x85,0x86,0x87,0x88,0x89," + "0x8a,0x92,0x93,0x94,0x95,0x96,0x97,0x98," + "0x99,0x9a,0xa2,0xa3,0xa4,0xa5,0xa6,0xa7," + "0xa8,0xa9,0xaa,0xb2,0xb3,0xb4,0xb5,0xb6," + "0xb7,0xb8,0xb9,0xba,0xc2,0xc3,0xc4,0xc5," + "0xc6,0xc7,0xc8,0xc9,0xca,0xd2,0xd3,0xd4," + "0xd5,0xd6,0xd7,0xd8,0xd9,0xda,0xe1,0xe2," + "0xe3,0xe4,0xe5,0xe6,0xe7,0xe8,0xe9,0xea," + "0xf1,0xf2,0xf3,0xf4,0xf5,0xf6,0xf7,0xf8," + "0xf9,0xfa");
	}
	,strIntsToBytes: function(s) {
		var len = s.length;
		var b = new haxe_io_BytesBuffer();
		var val = 0;
		var i = 0;
		var _g = 0;
		while(_g < len) {
			var j = _g++;
			if(s.charAt(j) == ",") {
				val = Std.parseInt(HxOverrides.substr(s,i,j - i));
				b.addByte(val);
				i = j + 1;
			}
		}
		if(i < len) {
			val = Std.parseInt(HxOverrides.substr(s,i,null));
			b.addByte(val);
		}
		return b.getBytes();
	}
	,initChrominance: function() {
		this.std_dc_chrominance_nrcodes = [0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0];
		this.std_dc_chrominance_values = this.strIntsToBytes("0,1,2,3,4,5,6,7,8,9,10,11");
		this.std_ac_chrominance_nrcodes = [0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119];
		this.std_ac_chrominance_values = this.strIntsToBytes("0x00,0x01,0x02,0x03,0x11,0x04,0x05,0x21," + "0x31,0x06,0x12,0x41,0x51,0x07,0x61,0x71," + "0x13,0x22,0x32,0x81,0x08,0x14,0x42,0x91," + "0xa1,0xb1,0xc1,0x09,0x23,0x33,0x52,0xf0," + "0x15,0x62,0x72,0xd1,0x0a,0x16,0x24,0x34," + "0xe1,0x25,0xf1,0x17,0x18,0x19,0x1a,0x26," + "0x27,0x28,0x29,0x2a,0x35,0x36,0x37,0x38," + "0x39,0x3a,0x43,0x44,0x45,0x46,0x47,0x48," + "0x49,0x4a,0x53,0x54,0x55,0x56,0x57,0x58," + "0x59,0x5a,0x63,0x64,0x65,0x66,0x67,0x68," + "0x69,0x6a,0x73,0x74,0x75,0x76,0x77,0x78," + "0x79,0x7a,0x82,0x83,0x84,0x85,0x86,0x87," + "0x88,0x89,0x8a,0x92,0x93,0x94,0x95,0x96," + "0x97,0x98,0x99,0x9a,0xa2,0xa3,0xa4,0xa5," + "0xa6,0xa7,0xa8,0xa9,0xaa,0xb2,0xb3,0xb4," + "0xb5,0xb6,0xb7,0xb8,0xb9,0xba,0xc2,0xc3," + "0xc4,0xc5,0xc6,0xc7,0xc8,0xc9,0xca,0xd2," + "0xd3,0xd4,0xd5,0xd6,0xd7,0xd8,0xd9,0xda," + "0xe2,0xe3,0xe4,0xe5,0xe6,0xe7,0xe8,0xe9," + "0xea,0xf2,0xf3,0xf4,0xf5,0xf6,0xf7,0xf8," + "0xf9,0xfa");
	}
	,initHuffmanTbl: function() {
		this.YDC_HT = this.computeHuffmanTbl(this.std_dc_luminance_nrcodes,this.std_dc_luminance_values);
		this.UVDC_HT = this.computeHuffmanTbl(this.std_dc_chrominance_nrcodes,this.std_dc_chrominance_values);
		this.YAC_HT = this.computeHuffmanTbl(this.std_ac_luminance_nrcodes,this.std_ac_luminance_values);
		this.UVAC_HT = this.computeHuffmanTbl(this.std_ac_chrominance_nrcodes,this.std_ac_chrominance_values);
	}
	,computeHuffmanTbl: function(nrcodes,std_table) {
		var codevalue = 0;
		var pos_in_table = 0;
		var HT = new haxe_ds_IntMap();
		var _g = 1;
		while(_g < 17) {
			var k = _g++;
			var end = nrcodes[k];
			var _g1 = 0;
			while(_g1 < end) {
				++_g1;
				HT.h[std_table.b[pos_in_table]] = new arm_format_BitString(k,codevalue);
				++pos_in_table;
				++codevalue;
			}
			codevalue *= 2;
		}
		return HT;
	}
	,initCategoryNumber: function() {
		var nrlower = 1;
		var nrupper = 2;
		var idx;
		var _g = 1;
		while(_g < 16) {
			var cat = _g++;
			var _g1 = nrlower;
			var _g2 = nrupper;
			while(_g1 < _g2) {
				var nr = _g1++;
				idx = 32767 + nr;
				this.category.h[idx] = cat;
				this.bitcode.h[idx] = new arm_format_BitString(cat,nr);
			}
			var nrneg = -(nrupper - 1);
			while(nrneg <= -nrlower) {
				idx = 32767 + nrneg;
				this.category.h[idx] = cat;
				this.bitcode.h[idx] = new arm_format_BitString(cat,nrupper - 1 + nrneg);
				++nrneg;
			}
			nrlower <<= 1;
			nrupper <<= 1;
		}
	}
	,writeBits: function(bs) {
		var value = bs.val;
		var posval = bs.len - 1;
		while(posval >= 0) {
			if((value & 1 << posval) != 0) {
				this.bytenew |= 1 << this.bytepos;
			}
			--posval;
			this.bytepos--;
			if(this.bytepos < 0) {
				if(this.bytenew == 255) {
					this.byteout.writeByte(255);
					this.byteout.writeByte(0);
				} else {
					this.byteout.writeByte(this.bytenew);
				}
				this.bytepos = 7;
				this.bytenew = 0;
			}
		}
	}
	,writeWord: function(val) {
		this.byteout.writeByte(val >> 8 & 255);
		this.byteout.writeByte(val & 255);
	}
	,fDCTQuant: function(data,fdtbl) {
		var dataOff = 0;
		var _g = 0;
		while(_g < 8) {
			++_g;
			var tmp0 = data[dataOff] + data[dataOff + 7];
			var tmp7 = data[dataOff] - data[dataOff + 7];
			var tmp1 = data[dataOff + 1] + data[dataOff + 6];
			var tmp6 = data[dataOff + 1] - data[dataOff + 6];
			var tmp2 = data[dataOff + 2] + data[dataOff + 5];
			var tmp5 = data[dataOff + 2] - data[dataOff + 5];
			var tmp3 = data[dataOff + 3] + data[dataOff + 4];
			var tmp4 = data[dataOff + 3] - data[dataOff + 4];
			var tmp10 = tmp0 + tmp3;
			var tmp13 = tmp0 - tmp3;
			var tmp11 = tmp1 + tmp2;
			var tmp12 = tmp1 - tmp2;
			data[dataOff] = tmp10 + tmp11;
			data[dataOff + 4] = tmp10 - tmp11;
			var z1 = (tmp12 + tmp13) * 0.707106781;
			data[dataOff + 2] = tmp13 + z1;
			data[dataOff + 6] = tmp13 - z1;
			tmp10 = tmp4 + tmp5;
			tmp11 = tmp5 + tmp6;
			tmp12 = tmp6 + tmp7;
			var z5 = (tmp10 - tmp12) * 0.382683433;
			var z2 = 0.541196100 * tmp10 + z5;
			var z4 = 1.306562965 * tmp12 + z5;
			var z3 = tmp11 * 0.707106781;
			var z11 = tmp7 + z3;
			var z13 = tmp7 - z3;
			data[dataOff + 5] = z13 + z2;
			data[dataOff + 3] = z13 - z2;
			data[dataOff + 1] = z11 + z4;
			data[dataOff + 7] = z11 - z4;
			dataOff += 8;
		}
		dataOff = 0;
		var _g = 0;
		while(_g < 8) {
			++_g;
			var tmp0p2 = data[dataOff] + data[dataOff + 56];
			var tmp7p2 = data[dataOff] - data[dataOff + 56];
			var tmp1p2 = data[dataOff + 8] + data[dataOff + 48];
			var tmp6p2 = data[dataOff + 8] - data[dataOff + 48];
			var tmp2p2 = data[dataOff + 16] + data[dataOff + 40];
			var tmp5p2 = data[dataOff + 16] - data[dataOff + 40];
			var tmp3p2 = data[dataOff + 24] + data[dataOff + 32];
			var tmp4p2 = data[dataOff + 24] - data[dataOff + 32];
			var tmp10p2 = tmp0p2 + tmp3p2;
			var tmp13p2 = tmp0p2 - tmp3p2;
			var tmp11p2 = tmp1p2 + tmp2p2;
			var tmp12p2 = tmp1p2 - tmp2p2;
			data[dataOff] = tmp10p2 + tmp11p2;
			data[dataOff + 32] = tmp10p2 - tmp11p2;
			var z1p2 = (tmp12p2 + tmp13p2) * 0.707106781;
			data[dataOff + 16] = tmp13p2 + z1p2;
			data[dataOff + 48] = tmp13p2 - z1p2;
			tmp10p2 = tmp4p2 + tmp5p2;
			tmp11p2 = tmp5p2 + tmp6p2;
			tmp12p2 = tmp6p2 + tmp7p2;
			var z5p2 = (tmp10p2 - tmp12p2) * 0.382683433;
			var z2p2 = 0.541196100 * tmp10p2 + z5p2;
			var z4p2 = 1.306562965 * tmp12p2 + z5p2;
			var z3p2 = tmp11p2 * 0.707106781;
			var z11p2 = tmp7p2 + z3p2;
			var z13p2 = tmp7p2 - z3p2;
			data[dataOff + 40] = z13p2 + z2p2;
			data[dataOff + 24] = z13p2 - z2p2;
			data[dataOff + 8] = z11p2 + z4p2;
			data[dataOff + 56] = z11p2 - z4p2;
			++dataOff;
		}
		var _g = 0;
		while(_g < 64) {
			var k = _g++;
			data[k] = Math.round(data[k] * fdtbl[k]);
		}
		return data;
	}
	,writeAPP0: function() {
		this.byteout.writeByte(255);
		this.byteout.writeByte(224);
		this.byteout.writeByte(0);
		this.byteout.writeByte(16);
		this.byteout.writeByte(74);
		this.byteout.writeByte(70);
		this.byteout.writeByte(73);
		this.byteout.writeByte(70);
		this.byteout.writeByte(0);
		this.byteout.writeByte(1);
		this.byteout.writeByte(1);
		this.byteout.writeByte(0);
		this.byteout.writeByte(0);
		this.byteout.writeByte(1);
		this.byteout.writeByte(0);
		this.byteout.writeByte(1);
		this.byteout.writeByte(0);
		this.byteout.writeByte(0);
	}
	,writeDQT: function() {
		this.byteout.writeByte(255);
		this.byteout.writeByte(219);
		this.byteout.writeByte(0);
		this.byteout.writeByte(132);
		this.byteout.writeByte(0);
		var _g = 0;
		while(_g < 64) this.byteout.writeByte(this.YTable[_g++]);
		this.byteout.writeByte(1);
		var _g = 0;
		while(_g < 64) this.byteout.writeByte(this.UVTable[_g++]);
	}
	,writeSOF0: function(width,height) {
		this.byteout.writeByte(255);
		this.byteout.writeByte(192);
		this.byteout.writeByte(0);
		this.byteout.writeByte(17);
		this.byteout.writeByte(8);
		this.byteout.writeByte(height >> 8 & 255);
		this.byteout.writeByte(height & 255);
		this.byteout.writeByte(width >> 8 & 255);
		this.byteout.writeByte(width & 255);
		this.byteout.writeByte(3);
		this.byteout.writeByte(1);
		this.byteout.writeByte(17);
		this.byteout.writeByte(0);
		this.byteout.writeByte(2);
		this.byteout.writeByte(17);
		this.byteout.writeByte(1);
		this.byteout.writeByte(3);
		this.byteout.writeByte(17);
		this.byteout.writeByte(1);
	}
	,writeDHT: function() {
		this.byteout.writeByte(255);
		this.byteout.writeByte(196);
		this.byteout.writeByte(1);
		this.byteout.writeByte(162);
		this.byteout.writeByte(0);
		this.byteout.writeByte(this.std_dc_luminance_nrcodes[1]);
		this.byteout.writeByte(this.std_dc_luminance_nrcodes[2]);
		this.byteout.writeByte(this.std_dc_luminance_nrcodes[3]);
		this.byteout.writeByte(this.std_dc_luminance_nrcodes[4]);
		this.byteout.writeByte(this.std_dc_luminance_nrcodes[5]);
		this.byteout.writeByte(this.std_dc_luminance_nrcodes[6]);
		this.byteout.writeByte(this.std_dc_luminance_nrcodes[7]);
		this.byteout.writeByte(this.std_dc_luminance_nrcodes[8]);
		this.byteout.writeByte(this.std_dc_luminance_nrcodes[9]);
		this.byteout.writeByte(this.std_dc_luminance_nrcodes[10]);
		this.byteout.writeByte(this.std_dc_luminance_nrcodes[11]);
		this.byteout.writeByte(this.std_dc_luminance_nrcodes[12]);
		this.byteout.writeByte(this.std_dc_luminance_nrcodes[13]);
		this.byteout.writeByte(this.std_dc_luminance_nrcodes[14]);
		this.byteout.writeByte(this.std_dc_luminance_nrcodes[15]);
		this.byteout.writeByte(this.std_dc_luminance_nrcodes[16]);
		this.byteout.write(this.std_dc_luminance_values);
		this.byteout.writeByte(16);
		this.byteout.writeByte(this.std_ac_luminance_nrcodes[1]);
		this.byteout.writeByte(this.std_ac_luminance_nrcodes[2]);
		this.byteout.writeByte(this.std_ac_luminance_nrcodes[3]);
		this.byteout.writeByte(this.std_ac_luminance_nrcodes[4]);
		this.byteout.writeByte(this.std_ac_luminance_nrcodes[5]);
		this.byteout.writeByte(this.std_ac_luminance_nrcodes[6]);
		this.byteout.writeByte(this.std_ac_luminance_nrcodes[7]);
		this.byteout.writeByte(this.std_ac_luminance_nrcodes[8]);
		this.byteout.writeByte(this.std_ac_luminance_nrcodes[9]);
		this.byteout.writeByte(this.std_ac_luminance_nrcodes[10]);
		this.byteout.writeByte(this.std_ac_luminance_nrcodes[11]);
		this.byteout.writeByte(this.std_ac_luminance_nrcodes[12]);
		this.byteout.writeByte(this.std_ac_luminance_nrcodes[13]);
		this.byteout.writeByte(this.std_ac_luminance_nrcodes[14]);
		this.byteout.writeByte(this.std_ac_luminance_nrcodes[15]);
		this.byteout.writeByte(this.std_ac_luminance_nrcodes[16]);
		this.byteout.write(this.std_ac_luminance_values);
		this.byteout.writeByte(1);
		this.byteout.writeByte(this.std_dc_chrominance_nrcodes[1]);
		this.byteout.writeByte(this.std_dc_chrominance_nrcodes[2]);
		this.byteout.writeByte(this.std_dc_chrominance_nrcodes[3]);
		this.byteout.writeByte(this.std_dc_chrominance_nrcodes[4]);
		this.byteout.writeByte(this.std_dc_chrominance_nrcodes[5]);
		this.byteout.writeByte(this.std_dc_chrominance_nrcodes[6]);
		this.byteout.writeByte(this.std_dc_chrominance_nrcodes[7]);
		this.byteout.writeByte(this.std_dc_chrominance_nrcodes[8]);
		this.byteout.writeByte(this.std_dc_chrominance_nrcodes[9]);
		this.byteout.writeByte(this.std_dc_chrominance_nrcodes[10]);
		this.byteout.writeByte(this.std_dc_chrominance_nrcodes[11]);
		this.byteout.writeByte(this.std_dc_chrominance_nrcodes[12]);
		this.byteout.writeByte(this.std_dc_chrominance_nrcodes[13]);
		this.byteout.writeByte(this.std_dc_chrominance_nrcodes[14]);
		this.byteout.writeByte(this.std_dc_chrominance_nrcodes[15]);
		this.byteout.writeByte(this.std_dc_chrominance_nrcodes[16]);
		this.byteout.write(this.std_dc_chrominance_values);
		this.byteout.writeByte(17);
		this.byteout.writeByte(this.std_ac_chrominance_nrcodes[1]);
		this.byteout.writeByte(this.std_ac_chrominance_nrcodes[2]);
		this.byteout.writeByte(this.std_ac_chrominance_nrcodes[3]);
		this.byteout.writeByte(this.std_ac_chrominance_nrcodes[4]);
		this.byteout.writeByte(this.std_ac_chrominance_nrcodes[5]);
		this.byteout.writeByte(this.std_ac_chrominance_nrcodes[6]);
		this.byteout.writeByte(this.std_ac_chrominance_nrcodes[7]);
		this.byteout.writeByte(this.std_ac_chrominance_nrcodes[8]);
		this.byteout.writeByte(this.std_ac_chrominance_nrcodes[9]);
		this.byteout.writeByte(this.std_ac_chrominance_nrcodes[10]);
		this.byteout.writeByte(this.std_ac_chrominance_nrcodes[11]);
		this.byteout.writeByte(this.std_ac_chrominance_nrcodes[12]);
		this.byteout.writeByte(this.std_ac_chrominance_nrcodes[13]);
		this.byteout.writeByte(this.std_ac_chrominance_nrcodes[14]);
		this.byteout.writeByte(this.std_ac_chrominance_nrcodes[15]);
		this.byteout.writeByte(this.std_ac_chrominance_nrcodes[16]);
		this.byteout.write(this.std_ac_chrominance_values);
	}
	,writeSOS: function() {
		this.byteout.writeByte(255);
		this.byteout.writeByte(218);
		this.byteout.writeByte(0);
		this.byteout.writeByte(12);
		this.byteout.writeByte(3);
		this.byteout.writeByte(1);
		this.byteout.writeByte(0);
		this.byteout.writeByte(2);
		this.byteout.writeByte(17);
		this.byteout.writeByte(3);
		this.byteout.writeByte(17);
		this.byteout.writeByte(0);
		this.byteout.writeByte(63);
		this.byteout.writeByte(0);
	}
	,processDU: function(CDU,fdtbl,DC,HTDC,HTAC) {
		var EOB = HTAC.h[0];
		var M16zeroes = HTAC.h[240];
		var DU_DCT = this.fDCTQuant(CDU,fdtbl);
		var _g = 0;
		while(_g < 64) {
			var i = _g++;
			this.DU[this.ZigZag[i]] = DU_DCT[i];
		}
		var idx;
		var Diff = this.DU[0] - DC | 0;
		DC = this.DU[0];
		if(Diff == 0) {
			this.writeBits(HTDC.h[0]);
		} else {
			idx = 32767 + Diff;
			this.writeBits(HTDC.h[this.category.h[idx]]);
			this.writeBits(this.bitcode.h[idx]);
		}
		var end0pos = 63;
		while(end0pos > 0 && this.DU[end0pos] == 0.0) --end0pos;
		if(end0pos == 0) {
			this.writeBits(EOB);
			return DC;
		}
		var i = 1;
		while(i <= end0pos) {
			var startpos = i;
			while(this.DU[i] == 0.0 && i <= end0pos) ++i;
			var nrzeroes = i - startpos;
			if(nrzeroes >= 16) {
				var _g = 0;
				var _g1 = nrzeroes >> 4;
				while(_g < _g1) {
					++_g;
					this.writeBits(M16zeroes);
				}
				nrzeroes &= 15;
			}
			idx = 32767 + (this.DU[i] | 0);
			this.writeBits(HTAC.h[nrzeroes * 16 + this.category.h[idx]]);
			this.writeBits(this.bitcode.h[idx]);
			++i;
		}
		if(end0pos != 63) {
			this.writeBits(EOB);
		}
		return DC;
	}
	,ARGB2YUV: function(img,width,xpos,ypos) {
		var pos = 0;
		var _g = 0;
		while(_g < 8) {
			var offset = (_g++ + ypos) * width + xpos << 2;
			var _g1 = 0;
			while(_g1 < 8) {
				++_g1;
				++offset;
				var R = img.b[offset++];
				var G = img.b[offset++];
				var B = img.b[offset++];
				this.YDU[pos] = 0.29900 * R + 0.58700 * G + 0.11400 * B - 128;
				this.UDU[pos] = -0.16874 * R + -0.33126 * G + 0.50000 * B;
				this.VDU[pos] = 0.50000 * R + -0.41869 * G + -0.08131 * B;
				++pos;
			}
		}
	}
	,write: function(image,type,off,swapRG) {
		if(swapRG == null) {
			swapRG = false;
		}
		if(off == null) {
			off = 0;
		}
		if(type == null) {
			type = 0;
		}
		var quality = image.quality;
		if(quality <= 0) {
			quality = 1;
		}
		if(quality > 100) {
			quality = 100;
		}
		this.initQuantTables(quality < 50 ? 5000 / quality | 0 : 200 - quality * 2 | 0);
		this.bytenew = 0;
		this.bytepos = 7;
		var width = image.width;
		var height = image.height;
		this.writeWord(65496);
		this.writeAPP0();
		this.writeDQT();
		this.writeSOF0(width,height);
		this.writeDHT();
		this.writeSOS();
		var DCY = 0.0;
		var DCU = 0.0;
		var DCV = 0.0;
		this.bytenew = 0;
		this.bytepos = 7;
		var ypos = 0;
		if(type == 0) {
			while(ypos < height) {
				var xpos = 0;
				while(xpos < width) {
					this.ARGB2YUV(image.pixels,width,xpos,ypos);
					DCY = this.processDU(this.YDU,this.fdtbl_Y,DCY,this.YDC_HT,this.YAC_HT);
					DCU = this.processDU(this.UDU,this.fdtbl_UV,DCU,this.UVDC_HT,this.UVAC_HT);
					DCV = this.processDU(this.VDU,this.fdtbl_UV,DCV,this.UVDC_HT,this.UVAC_HT);
					xpos += 8;
				}
				ypos += 8;
			}
		} else if(type == 1 && !swapRG) {
			while(ypos < height) {
				var xpos = 0;
				while(xpos < width) {
					this.RGBA2YUV(image.pixels,width,xpos,ypos);
					DCY = this.processDU(this.YDU,this.fdtbl_Y,DCY,this.YDC_HT,this.YAC_HT);
					DCU = this.processDU(this.UDU,this.fdtbl_UV,DCU,this.UVDC_HT,this.UVAC_HT);
					DCV = this.processDU(this.VDU,this.fdtbl_UV,DCV,this.UVDC_HT,this.UVAC_HT);
					xpos += 8;
				}
				ypos += 8;
			}
		} else if(type == 1 && swapRG) {
			while(ypos < height) {
				var xpos = 0;
				while(xpos < width) {
					this.BGRA2YUV(image.pixels,width,xpos,ypos);
					DCY = this.processDU(this.YDU,this.fdtbl_Y,DCY,this.YDC_HT,this.YAC_HT);
					DCU = this.processDU(this.UDU,this.fdtbl_UV,DCU,this.UVDC_HT,this.UVAC_HT);
					DCV = this.processDU(this.VDU,this.fdtbl_UV,DCV,this.UVDC_HT,this.UVAC_HT);
					xpos += 8;
				}
				ypos += 8;
			}
		} else if(type == 2) {
			while(ypos < height) {
				var xpos = 0;
				while(xpos < width) {
					this.RRR2YUV(image.pixels,width,xpos,ypos,off);
					DCY = this.processDU(this.YDU,this.fdtbl_Y,DCY,this.YDC_HT,this.YAC_HT);
					DCU = this.processDU(this.UDU,this.fdtbl_UV,DCU,this.UVDC_HT,this.UVAC_HT);
					DCV = this.processDU(this.VDU,this.fdtbl_UV,DCV,this.UVDC_HT,this.UVAC_HT);
					xpos += 8;
				}
				ypos += 8;
			}
		}
		if(this.bytepos >= 0) {
			this.writeBits(new arm_format_BitString(this.bytepos + 1,(1 << this.bytepos + 1) - 1));
		}
		this.writeWord(65497);
	}
	,RGBA2YUV: function(img,width,xpos,ypos) {
		var pos = 0;
		var _g = 0;
		while(_g < 8) {
			var offset = (_g++ + ypos) * width + xpos << 2;
			var _g1 = 0;
			while(_g1 < 8) {
				++_g1;
				var R = img.b[offset++];
				var G = img.b[offset++];
				var B = img.b[offset++];
				++offset;
				this.YDU[pos] = 0.29900 * R + 0.58700 * G + 0.11400 * B - 128;
				this.UDU[pos] = -0.16874 * R + -0.33126 * G + 0.50000 * B;
				this.VDU[pos] = 0.50000 * R + -0.41869 * G + -0.08131 * B;
				++pos;
			}
		}
	}
	,BGRA2YUV: function(img,width,xpos,ypos) {
		var pos = 0;
		var _g = 0;
		while(_g < 8) {
			var offset = (_g++ + ypos) * width + xpos << 2;
			var _g1 = 0;
			while(_g1 < 8) {
				++_g1;
				var B = img.b[offset++];
				var G = img.b[offset++];
				var R = img.b[offset++];
				++offset;
				this.YDU[pos] = 0.29900 * R + 0.58700 * G + 0.11400 * B - 128;
				this.UDU[pos] = -0.16874 * R + -0.33126 * G + 0.50000 * B;
				this.VDU[pos] = 0.50000 * R + -0.41869 * G + -0.08131 * B;
				++pos;
			}
		}
	}
	,RRR2YUV: function(img,width,xpos,ypos,off) {
		var pos = 0;
		var _g = 0;
		while(_g < 8) {
			var offset = (_g++ + ypos) * width + xpos << 2;
			var _g1 = 0;
			while(_g1 < 8) {
				++_g1;
				var R = img.b[offset + off];
				offset += 4;
				this.YDU[pos] = 0.29900 * R + 0.58700 * R + 0.11400 * R - 128;
				this.UDU[pos] = -0.16874 * R + -0.33126 * R + 0.50000 * R;
				this.VDU[pos] = 0.50000 * R + -0.41869 * R + -0.08131 * R;
				++pos;
			}
		}
	}
	,__class__: arm_format_JpgWriter
};
var arm_format_BitString = function(l,v) {
	this.len = l;
	this.val = v;
};
$hxClasses["arm.format.BitString"] = arm_format_BitString;
arm_format_BitString.__name__ = "arm.format.BitString";
arm_format_BitString.prototype = {
	__class__: arm_format_BitString
};
var arm_format_ObjParser = function(blob,startPos,udim) {
	if(udim == null) {
		udim = false;
	}
	if(startPos == null) {
		startPos = 0;
	}
	this.buf = null;
	this.ni = 0;
	this.ui = 0;
	this.vi = 0;
	this.pos = 0;
	this.hasNext = false;
	this.name = "";
	this.scalePos = 1.0;
	this.udimsU = 1;
	this.udims = null;
	this.inda = null;
	this.texa = null;
	this.nora = null;
	this.posa = null;
	var _gthis = this;
	this.pos = startPos;
	var posIndices = [];
	var uvIndices = [];
	var norIndices = [];
	var readingFaces = false;
	var readingObject = false;
	var fullAttrib = false;
	arm_format_ObjParser.bytes = blob.bytes;
	this.posTemp = [];
	this.uvTemp = [];
	this.norTemp = [];
	this.va = new Uint32Array(60);
	this.ua = new Uint32Array(60);
	this.na = new Uint32Array(60);
	this.buf = new Uint8Array(64);
	if(arm_format_ObjParser.splitCode == 117 && startPos > 0) {
		this.posTemp = arm_format_ObjParser.posFirst;
		this.norTemp = arm_format_ObjParser.norFirst;
		this.uvTemp = arm_format_ObjParser.uvFirst;
	}
	while(this.pos < arm_format_ObjParser.bytes.length) {
		var c0 = arm_format_ObjParser.bytes.b[this.pos++];
		if(readingObject && readingFaces && (c0 == 118 || c0 == arm_format_ObjParser.splitCode)) {
			this.pos--;
			this.hasNext = true;
			break;
		}
		if(c0 == 118) {
			var c1 = arm_format_ObjParser.bytes.b[this.pos++];
			if(c1 == 32) {
				if(arm_format_ObjParser.bytes.b[this.pos] == 32) {
					this.pos++;
				}
				this.posTemp.push(this.readFloat());
				this.pos++;
				this.posTemp.push(this.readFloat());
				this.pos++;
				this.posTemp.push(this.readFloat());
			} else if(c1 == 116) {
				this.pos++;
				this.uvTemp.push(this.readFloat());
				this.pos++;
				this.uvTemp.push(this.readFloat());
				if(this.norTemp.length > 0) {
					fullAttrib = true;
				}
			} else if(c1 == 110) {
				this.pos++;
				this.norTemp.push(this.readFloat());
				this.pos++;
				this.norTemp.push(this.readFloat());
				this.pos++;
				this.norTemp.push(this.readFloat());
				if(this.uvTemp.length > 0) {
					fullAttrib = true;
				}
			}
		} else if(c0 == 102) {
			this.pos++;
			readingFaces = true;
			this.vi = 0;
			this.ui = 0;
			this.ni = 0;
			if(fullAttrib) {
				this.readFaceFast();
			} else {
				this.readFace();
			}
			posIndices.push(this.va[0]);
			posIndices.push(this.va[1]);
			posIndices.push(this.va[2]);
			var _g = 3;
			var _g1 = this.vi;
			while(_g < _g1) {
				var i = _g++;
				posIndices.push(this.va[0]);
				posIndices.push(this.va[i - 1]);
				posIndices.push(this.va[i]);
			}
			if(this.uvTemp.length > 0) {
				uvIndices.push(this.ua[0]);
				uvIndices.push(this.ua[1]);
				uvIndices.push(this.ua[2]);
				var _g2 = 3;
				var _g3 = this.ui;
				while(_g2 < _g3) {
					var i1 = _g2++;
					uvIndices.push(this.ua[0]);
					uvIndices.push(this.ua[i1 - 1]);
					uvIndices.push(this.ua[i1]);
				}
			}
			if(this.norTemp.length > 0) {
				norIndices.push(this.na[0]);
				norIndices.push(this.na[1]);
				norIndices.push(this.na[2]);
				var _g4 = 3;
				var _g5 = this.ni;
				while(_g4 < _g5) {
					var i2 = _g4++;
					norIndices.push(this.na[0]);
					norIndices.push(this.na[i2 - 1]);
					norIndices.push(this.na[i2]);
				}
			}
		} else if(c0 == arm_format_ObjParser.splitCode) {
			if(arm_format_ObjParser.splitCode == 117) {
				this.pos += 5;
			}
			this.pos++;
			if(!udim) {
				readingObject = true;
			}
			this.name = this.readString();
		}
		this.nextLine();
	}
	if(startPos > 0) {
		if(arm_format_ObjParser.splitCode != 117) {
			var _g = 0;
			var _g1 = posIndices.length;
			while(_g < _g1) posIndices[_g++] -= arm_format_ObjParser.vindOff;
			var _g = 0;
			var _g1 = uvIndices.length;
			while(_g < _g1) uvIndices[_g++] -= arm_format_ObjParser.tindOff;
			var _g = 0;
			var _g1 = norIndices.length;
			while(_g < _g1) norIndices[_g++] -= arm_format_ObjParser.nindOff;
		}
	} else {
		arm_format_ObjParser.vindOff = arm_format_ObjParser.tindOff = arm_format_ObjParser.nindOff = 0;
		if(arm_format_ObjParser.splitCode == 117) {
			arm_format_ObjParser.posFirst = this.posTemp;
			arm_format_ObjParser.norFirst = this.norTemp;
			arm_format_ObjParser.uvFirst = this.uvTemp;
		}
	}
	arm_format_ObjParser.vindOff += this.posTemp.length / 3 | 0;
	arm_format_ObjParser.tindOff += this.uvTemp.length / 2 | 0;
	arm_format_ObjParser.nindOff += this.norTemp.length / 3 | 0;
	this.scalePos = 0.0;
	var _g = 0;
	var _g1 = this.posTemp.length;
	while(_g < _g1) {
		var f = Math.abs(this.posTemp[_g++]);
		if(this.scalePos < f) {
			this.scalePos = f;
		}
	}
	var inv = 32767 * (1 / this.scalePos);
	this.posa = new Int16Array(posIndices.length * 4);
	this.inda = new Uint32Array(posIndices.length);
	var _g = 0;
	var _g1 = posIndices.length;
	while(_g < _g1) {
		var i = _g++;
		this.posa[i * 4] = this.posTemp[posIndices[i] * 3] * inv | 0;
		this.posa[i * 4 + 1] = -this.posTemp[posIndices[i] * 3 + 2] * inv | 0;
		this.posa[i * 4 + 2] = this.posTemp[posIndices[i] * 3 + 1] * inv | 0;
		this.inda[i] = i;
	}
	if(norIndices.length > 0) {
		this.nora = new Int16Array(norIndices.length * 2);
		var _g = 0;
		var _g1 = posIndices.length;
		while(_g < _g1) {
			var i = _g++;
			this.nora[i * 2] = this.norTemp[norIndices[i] * 3] * 32767 | 0;
			this.nora[i * 2 + 1] = -this.norTemp[norIndices[i] * 3 + 2] * 32767 | 0;
			this.posa[i * 4 + 3] = this.norTemp[norIndices[i] * 3 + 1] * 32767 | 0;
		}
	} else {
		this.nora = new Int16Array(this.inda.length * 2);
		var cb_x = 0.0;
		var cb_y = 0.0;
		var cb_z = 0.0;
		var ab_x = 0.0;
		var ab_y = 0.0;
		var ab_z = 0.0;
		var _g = 0;
		var _g1 = this.inda.length / 3 | 0;
		while(_g < _g1) {
			var i = _g++;
			var i1 = this.inda[i * 3];
			var i2 = this.inda[i * 3 + 1];
			var i3 = this.inda[i * 3 + 2];
			var x = this.posa[i2 * 4];
			var y = this.posa[i2 * 4 + 1];
			var z = this.posa[i2 * 4 + 2];
			cb_x = this.posa[i3 * 4] - x;
			cb_y = this.posa[i3 * 4 + 1] - y;
			cb_z = this.posa[i3 * 4 + 2] - z;
			ab_x = this.posa[i1 * 4] - x;
			ab_y = this.posa[i1 * 4 + 1] - y;
			ab_z = this.posa[i1 * 4 + 2] - z;
			var ax = cb_x;
			var ay = cb_y;
			var az = cb_z;
			var vx = ab_x;
			var vy = ab_y;
			var vz = ab_z;
			cb_x = ay * vz - az * vy;
			cb_y = az * vx - ax * vz;
			cb_z = ax * vy - ay * vx;
			var n = Math.sqrt(cb_x * cb_x + cb_y * cb_y + cb_z * cb_z);
			if(n > 0.0) {
				var invN = 1.0 / n;
				cb_x *= invN;
				cb_y *= invN;
				cb_z *= invN;
			}
			this.nora[i1 * 2] = cb_x * 32767 | 0;
			this.nora[i1 * 2 + 1] = cb_y * 32767 | 0;
			this.posa[i1 * 4 + 3] = cb_z * 32767 | 0;
			this.nora[i2 * 2] = cb_x * 32767 | 0;
			this.nora[i2 * 2 + 1] = cb_y * 32767 | 0;
			this.posa[i2 * 4 + 3] = cb_z * 32767 | 0;
			this.nora[i3 * 2] = cb_x * 32767 | 0;
			this.nora[i3 * 2 + 1] = cb_y * 32767 | 0;
			this.posa[i3 * 4 + 3] = cb_z * 32767 | 0;
		}
	}
	if(uvIndices.length > 0) {
		if(udim) {
			var tilesU = 1;
			var tilesV = 1;
			var _g = 0;
			var _g1 = this.uvTemp.length / 2 | 0;
			while(_g < _g1) {
				var i = _g++;
				while(this.uvTemp[i * 2] > tilesU) tilesU += 1;
				while(this.uvTemp[i * 2 + 1] > tilesV) ++tilesV;
			}
			var getTile = function(i1,i2,i3) {
				return ((_gthis.uvTemp[uvIndices[i1] * 2] + _gthis.uvTemp[uvIndices[i2] * 2] + _gthis.uvTemp[uvIndices[i3] * 2]) / 3 | 0) + ((_gthis.uvTemp[uvIndices[i1] * 2 + 1] + _gthis.uvTemp[uvIndices[i2] * 2 + 1] + _gthis.uvTemp[uvIndices[i3] * 2 + 1]) / 3 | 0) * tilesU;
			};
			var num = new Uint32Array(tilesU * tilesV);
			var _g = 0;
			var _g1 = this.inda.length / 3 | 0;
			while(_g < _g1) {
				var i = _g++;
				num[getTile(this.inda[i * 3],this.inda[i * 3 + 1],this.inda[i * 3 + 2])] += 3;
			}
			this.udims = [];
			this.udimsU = tilesU;
			var _g = 0;
			var _g1 = tilesU * tilesV;
			while(_g < _g1) {
				var i = _g++;
				this.udims.push(new Uint32Array(num[i]));
				num[i] = 0;
			}
			var _g = 0;
			var _g1 = this.inda.length / 3 | 0;
			while(_g < _g1) {
				var i = _g++;
				var i1 = this.inda[i * 3];
				var i2 = this.inda[i * 3 + 1];
				var i3 = this.inda[i * 3 + 2];
				var tile = getTile(i1,i2,i3);
				var this1 = this.udims[tile];
				var tmp = num[tile];
				num[tile] = tmp + 1;
				this1[tmp] = i1;
				var this2 = this.udims[tile];
				var tmp1 = num[tile];
				num[tile] = tmp1 + 1;
				this2[tmp1] = i2;
				var this3 = this.udims[tile];
				var tmp2 = num[tile];
				num[tile] = tmp2 + 1;
				this3[tmp2] = i3;
			}
			var uvtiles = new Int16Array(this.uvTemp.length);
			var _g = 0;
			var _g1 = this.inda.length / 3 | 0;
			while(_g < _g1) {
				var i = _g++;
				var i1 = this.inda[i * 3];
				var i2 = this.inda[i * 3 + 1];
				var i3 = this.inda[i * 3 + 2];
				var tile = getTile(i1,i2,i3);
				var tileU = tile % tilesU;
				var tileV = tile / tilesU | 0;
				uvtiles[uvIndices[i1] * 2] = tileU;
				uvtiles[uvIndices[i1] * 2 + 1] = tileV;
				uvtiles[uvIndices[i2] * 2] = tileU;
				uvtiles[uvIndices[i2] * 2 + 1] = tileV;
				uvtiles[uvIndices[i3] * 2] = tileU;
				uvtiles[uvIndices[i3] * 2 + 1] = tileV;
			}
			var _g = 0;
			var _g1 = uvtiles.length;
			while(_g < _g1) {
				var i = _g++;
				this.uvTemp[i] -= uvtiles[i];
			}
		}
		this.texa = new Int16Array(uvIndices.length * 2);
		var _g = 0;
		var _g1 = posIndices.length;
		while(_g < _g1) {
			var i = _g++;
			this.texa[i * 2] = this.uvTemp[uvIndices[i] * 2] * 32767 | 0;
			this.texa[i * 2 + 1] = (1.0 - this.uvTemp[uvIndices[i] * 2 + 1]) * 32767 | 0;
		}
	}
	arm_format_ObjParser.bytes = null;
	if(!this.hasNext) {
		arm_format_ObjParser.posFirst = arm_format_ObjParser.norFirst = arm_format_ObjParser.uvFirst = null;
	}
};
$hxClasses["arm.format.ObjParser"] = arm_format_ObjParser;
arm_format_ObjParser.__name__ = "arm.format.ObjParser";
arm_format_ObjParser.prototype = {
	readFaceFast: function() {
		while(true) {
			this.va[this.vi++] = this.readInt() - 1;
			this.pos++;
			this.ua[this.ui++] = this.readInt() - 1;
			this.pos++;
			this.na[this.ni++] = this.readInt() - 1;
			if(arm_format_ObjParser.bytes.b[this.pos] == 10 || arm_format_ObjParser.bytes.b[this.pos] == 13) {
				break;
			}
			this.pos++;
			if(this.vi >= 3 && (arm_format_ObjParser.bytes.b[this.pos] == 10 || arm_format_ObjParser.bytes.b[this.pos] == 13)) {
				break;
			}
		}
	}
	,readFace: function() {
		while(true) {
			this.va[this.vi++] = this.readInt() - 1;
			if(this.uvTemp.length > 0 || this.norTemp.length > 0) {
				this.pos++;
			}
			if(this.uvTemp.length > 0) {
				this.ua[this.ui++] = this.readInt() - 1;
			}
			if(this.norTemp.length > 0) {
				this.pos++;
				this.na[this.ni++] = this.readInt() - 1;
			}
			if(arm_format_ObjParser.bytes.b[this.pos] == 10 || arm_format_ObjParser.bytes.b[this.pos] == 13) {
				break;
			}
			this.pos++;
			if(this.vi >= 3 && (arm_format_ObjParser.bytes.b[this.pos] == 10 || arm_format_ObjParser.bytes.b[this.pos] == 13)) {
				break;
			}
		}
	}
	,readFloat: function() {
		var bi = 0;
		while(true) {
			var c = arm_format_ObjParser.bytes.b[this.pos];
			if(c == 32 || c == 10 || c == 13) {
				break;
			}
			if(c == 69 || c == 101) {
				this.pos++;
				var first = this.buf[0] == 45 ? -(this.buf[1] - 48) : this.buf[0] - 48;
				var exp = this.readInt();
				var dec = 1;
				var _g = 0;
				var _g1 = exp > 0 ? exp : -exp;
				while(_g < _g1) {
					++_g;
					dec *= 10;
				}
				if(exp > 0) {
					return first * dec;
				} else {
					return first / dec;
				}
			}
			this.pos++;
			this.buf[bi++] = c;
		}
		var res = 0.0;
		var dot = 1;
		var dec = 1;
		var off = this.buf[0] == 45 ? 1 : 0;
		var len = bi - 1;
		var _g = 0;
		var _g1 = bi - off;
		while(_g < _g1) {
			var c = this.buf[len - _g++];
			if(c == 46) {
				dot = dec;
				continue;
			}
			res += (c - 48) * dec;
			dec *= 10;
		}
		if(off > 0) {
			res /= -dot;
		} else {
			res /= dot;
		}
		return res;
	}
	,readInt: function() {
		var bi = 0;
		while(true) {
			var c = arm_format_ObjParser.bytes.b[this.pos];
			if(c == 47 || c == 10 || c == 13 || c == 32) {
				break;
			}
			this.pos++;
			this.buf[bi++] = c;
		}
		var res = 0;
		var dec = 1;
		var off = this.buf[0] == 45 ? 1 : 0;
		var len = bi - 1;
		var _g = 0;
		var _g1 = bi - off;
		while(_g < _g1) {
			res += (this.buf[len - _g++] - 48) * dec;
			dec *= 10;
		}
		if(off > 0) {
			res *= -1;
		}
		return res;
	}
	,readString: function() {
		var s = "";
		while(true) {
			var c = arm_format_ObjParser.bytes.b[this.pos];
			if(c == 10 || c == 13 || c == 32) {
				break;
			}
			this.pos++;
			s += String.fromCodePoint(c);
		}
		return s;
	}
	,nextLine: function() {
		while(!(arm_format_ObjParser.bytes.b[this.pos++] == 10 || this.pos >= arm_format_ObjParser.bytes.length)) {
		}
	}
	,__class__: arm_format_ObjParser
};
var arm_format_Color = $hxEnums["arm.format.Color"] = { __ename__ : true, __constructs__ : ["ColGrey","ColTrue","ColIndexed"]
	,ColGrey: ($_=function(alpha) { return {_hx_index:0,alpha:alpha,__enum__:"arm.format.Color",toString:$estr}; },$_.__params__ = ["alpha"],$_)
	,ColTrue: ($_=function(alpha) { return {_hx_index:1,alpha:alpha,__enum__:"arm.format.Color",toString:$estr}; },$_.__params__ = ["alpha"],$_)
	,ColIndexed: {_hx_index:2,__enum__:"arm.format.Color",toString:$estr}
};
var arm_format_Chunk = $hxEnums["arm.format.Chunk"] = { __ename__ : true, __constructs__ : ["CEnd","CHeader","CData","CPalette","CUnknown"]
	,CEnd: {_hx_index:0,__enum__:"arm.format.Chunk",toString:$estr}
	,CHeader: ($_=function(h) { return {_hx_index:1,h:h,__enum__:"arm.format.Chunk",toString:$estr}; },$_.__params__ = ["h"],$_)
	,CData: ($_=function(b) { return {_hx_index:2,b:b,__enum__:"arm.format.Chunk",toString:$estr}; },$_.__params__ = ["b"],$_)
	,CPalette: ($_=function(b) { return {_hx_index:3,b:b,__enum__:"arm.format.Chunk",toString:$estr}; },$_.__params__ = ["b"],$_)
	,CUnknown: ($_=function(id,data) { return {_hx_index:4,id:id,data:data,__enum__:"arm.format.Chunk",toString:$estr}; },$_.__params__ = ["id","data"],$_)
};
var arm_format_PngTools = function() { };
$hxClasses["arm.format.PngTools"] = arm_format_PngTools;
arm_format_PngTools.__name__ = "arm.format.PngTools";
arm_format_PngTools.buildGrey = function(width,height,data,level) {
	if(level == null) {
		level = 9;
	}
	var rgb = new haxe_io_Bytes(new ArrayBuffer(width * height + height));
	var w = 0;
	var r = 0;
	var _g = 0;
	while(_g < height) {
		++_g;
		rgb.b[w++] = 0;
		var _g1 = 0;
		while(_g1 < width) {
			++_g1;
			rgb.b[w++] = data.b[r++];
		}
	}
	var l = new haxe_ds_List();
	l.add(arm_format_Chunk.CHeader({ width : width, height : height, colbits : 8, color : arm_format_Color.ColGrey(false), interlaced : false}));
	l.add(arm_format_Chunk.CData(arm_format_PngTools.deflate(rgb,level)));
	l.add(arm_format_Chunk.CEnd);
	return l;
};
arm_format_PngTools.build32RGBA = function(width,height,data,level) {
	if(level == null) {
		level = 9;
	}
	var rgba = new haxe_io_Bytes(new ArrayBuffer(width * height * 4 + height));
	var w = 0;
	var r = 0;
	var _g = 0;
	while(_g < height) {
		++_g;
		rgba.b[w++] = 0;
		var _g1 = 0;
		while(_g1 < width) {
			++_g1;
			rgba.b[w++] = data.b[r];
			rgba.b[w++] = data.b[r + 1];
			rgba.b[w++] = data.b[r + 2];
			rgba.b[w++] = data.b[r + 3];
			r += 4;
		}
	}
	var l = new haxe_ds_List();
	l.add(arm_format_Chunk.CHeader({ width : width, height : height, colbits : 8, color : arm_format_Color.ColTrue(true), interlaced : false}));
	l.add(arm_format_Chunk.CData(arm_format_PngTools.deflate(rgba,level)));
	l.add(arm_format_Chunk.CEnd);
	return l;
};
arm_format_PngTools.build32RGB1 = function(width,height,data,level) {
	if(level == null) {
		level = 9;
	}
	var rgba = new haxe_io_Bytes(new ArrayBuffer(width * height * 4 + height));
	var w = 0;
	var r = 0;
	var _g = 0;
	while(_g < height) {
		++_g;
		rgba.b[w++] = 0;
		var _g1 = 0;
		while(_g1 < width) {
			++_g1;
			rgba.b[w++] = data.b[r];
			rgba.b[w++] = data.b[r + 1];
			rgba.b[w++] = data.b[r + 2];
			rgba.b[w++] = 255;
			r += 4;
		}
	}
	var l = new haxe_ds_List();
	l.add(arm_format_Chunk.CHeader({ width : width, height : height, colbits : 8, color : arm_format_Color.ColTrue(true), interlaced : false}));
	l.add(arm_format_Chunk.CData(arm_format_PngTools.deflate(rgba,level)));
	l.add(arm_format_Chunk.CEnd);
	return l;
};
arm_format_PngTools.build32RRR1 = function(width,height,data,off,level) {
	if(level == null) {
		level = 9;
	}
	var rgba = new haxe_io_Bytes(new ArrayBuffer(width * height * 4 + height));
	var w = 0;
	var r = 0;
	var _g = 0;
	while(_g < height) {
		++_g;
		rgba.b[w++] = 0;
		var _g1 = 0;
		while(_g1 < width) {
			++_g1;
			rgba.b[w++] = data.b[r + off];
			rgba.b[w++] = data.b[r + off];
			rgba.b[w++] = data.b[r + off];
			rgba.b[w++] = 255;
			r += 4;
		}
	}
	var l = new haxe_ds_List();
	l.add(arm_format_Chunk.CHeader({ width : width, height : height, colbits : 8, color : arm_format_Color.ColTrue(true), interlaced : false}));
	l.add(arm_format_Chunk.CData(arm_format_PngTools.deflate(rgba,level)));
	l.add(arm_format_Chunk.CEnd);
	return l;
};
arm_format_PngTools.deflate = function(b,level) {
	if(level == null) {
		level = 9;
	}
	return haxe_io_Bytes.ofData(Krom.deflate(b.b.bufferValue,false));
};
var arm_format_PngWriter = function(o) {
	this.o = o;
	o.set_bigEndian(true);
};
$hxClasses["arm.format.PngWriter"] = arm_format_PngWriter;
arm_format_PngWriter.__name__ = "arm.format.PngWriter";
arm_format_PngWriter.prototype = {
	write: function(png) {
		this.o.writeByte(137);
		this.o.writeByte(80);
		this.o.writeByte(78);
		this.o.writeByte(71);
		this.o.writeByte(13);
		this.o.writeByte(10);
		this.o.writeByte(26);
		this.o.writeByte(10);
		var _g_head = png.h;
		while(_g_head != null) {
			var val = _g_head.item;
			_g_head = _g_head.next;
			switch(val._hx_index) {
			case 0:
				this.writeChunk("IEND",new haxe_io_Bytes(new ArrayBuffer(0)));
				break;
			case 1:
				var _g = val.h;
				var b = new haxe_io_BytesOutput();
				b.set_bigEndian(true);
				b.writeInt32(_g.width);
				b.writeInt32(_g.height);
				b.writeByte(_g.colbits);
				var _g1 = _g.color;
				var tmp;
				switch(_g1._hx_index) {
				case 0:
					tmp = _g1.alpha ? 4 : 0;
					break;
				case 1:
					tmp = _g1.alpha ? 6 : 2;
					break;
				case 2:
					tmp = 3;
					break;
				}
				b.writeByte(tmp);
				b.writeByte(0);
				b.writeByte(0);
				b.writeByte(_g.interlaced ? 1 : 0);
				this.writeChunk("IHDR",b.getBytes());
				break;
			case 2:
				this.writeChunk("IDAT",val.b);
				break;
			case 3:
				this.writeChunk("PLTE",val.b);
				break;
			case 4:
				this.writeChunk(val.id,val.data);
				break;
			}
		}
	}
	,writeChunk: function(id,data) {
		this.o.writeInt32(data.length);
		this.o.writeString(id);
		this.o.write(data);
		var crc_crc = -1;
		var tmp = (-1 ^ HxOverrides.cca(id,0)) & 255;
		tmp = tmp >>> 1 ^ -(tmp & 1) & -306674912;
		tmp = tmp >>> 1 ^ -(tmp & 1) & -306674912;
		tmp = tmp >>> 1 ^ -(tmp & 1) & -306674912;
		tmp = tmp >>> 1 ^ -(tmp & 1) & -306674912;
		tmp = tmp >>> 1 ^ -(tmp & 1) & -306674912;
		tmp = tmp >>> 1 ^ -(tmp & 1) & -306674912;
		tmp = tmp >>> 1 ^ -(tmp & 1) & -306674912;
		tmp = tmp >>> 1 ^ -(tmp & 1) & -306674912;
		crc_crc = 16777215 ^ tmp;
		var tmp = (crc_crc ^ HxOverrides.cca(id,1)) & 255;
		tmp = tmp >>> 1 ^ -(tmp & 1) & -306674912;
		tmp = tmp >>> 1 ^ -(tmp & 1) & -306674912;
		tmp = tmp >>> 1 ^ -(tmp & 1) & -306674912;
		tmp = tmp >>> 1 ^ -(tmp & 1) & -306674912;
		tmp = tmp >>> 1 ^ -(tmp & 1) & -306674912;
		tmp = tmp >>> 1 ^ -(tmp & 1) & -306674912;
		tmp = tmp >>> 1 ^ -(tmp & 1) & -306674912;
		tmp = tmp >>> 1 ^ -(tmp & 1) & -306674912;
		crc_crc = crc_crc >>> 8 ^ tmp;
		var tmp = (crc_crc ^ HxOverrides.cca(id,2)) & 255;
		tmp = tmp >>> 1 ^ -(tmp & 1) & -306674912;
		tmp = tmp >>> 1 ^ -(tmp & 1) & -306674912;
		tmp = tmp >>> 1 ^ -(tmp & 1) & -306674912;
		tmp = tmp >>> 1 ^ -(tmp & 1) & -306674912;
		tmp = tmp >>> 1 ^ -(tmp & 1) & -306674912;
		tmp = tmp >>> 1 ^ -(tmp & 1) & -306674912;
		tmp = tmp >>> 1 ^ -(tmp & 1) & -306674912;
		tmp = tmp >>> 1 ^ -(tmp & 1) & -306674912;
		crc_crc = crc_crc >>> 8 ^ tmp;
		var tmp = (crc_crc ^ HxOverrides.cca(id,3)) & 255;
		tmp = tmp >>> 1 ^ -(tmp & 1) & -306674912;
		tmp = tmp >>> 1 ^ -(tmp & 1) & -306674912;
		tmp = tmp >>> 1 ^ -(tmp & 1) & -306674912;
		tmp = tmp >>> 1 ^ -(tmp & 1) & -306674912;
		tmp = tmp >>> 1 ^ -(tmp & 1) & -306674912;
		tmp = tmp >>> 1 ^ -(tmp & 1) & -306674912;
		tmp = tmp >>> 1 ^ -(tmp & 1) & -306674912;
		tmp = tmp >>> 1 ^ -(tmp & 1) & -306674912;
		crc_crc = crc_crc >>> 8 ^ tmp;
		var len = data.length;
		var b = data.b.bufferValue;
		var _g = 0;
		while(_g < len) {
			var tmp = (crc_crc ^ b.bytes[_g++]) & 255;
			tmp = tmp >>> 1 ^ -(tmp & 1) & -306674912;
			tmp = tmp >>> 1 ^ -(tmp & 1) & -306674912;
			tmp = tmp >>> 1 ^ -(tmp & 1) & -306674912;
			tmp = tmp >>> 1 ^ -(tmp & 1) & -306674912;
			tmp = tmp >>> 1 ^ -(tmp & 1) & -306674912;
			tmp = tmp >>> 1 ^ -(tmp & 1) & -306674912;
			tmp = tmp >>> 1 ^ -(tmp & 1) & -306674912;
			tmp = tmp >>> 1 ^ -(tmp & 1) & -306674912;
			crc_crc = crc_crc >>> 8 ^ tmp;
		}
		this.o.writeInt32(crc_crc ^ -1);
	}
	,__class__: arm_format_PngWriter
};
var arm_geom_Plane = function(sizeX,sizeY,vertsX,vertsY) {
	if(vertsY == null) {
		vertsY = 2;
	}
	if(vertsX == null) {
		vertsX = 2;
	}
	if(sizeY == null) {
		sizeY = 1.0;
	}
	if(sizeX == null) {
		sizeX = 1.0;
	}
	this.scalePos = 1.0;
	this.inda = null;
	this.texa = null;
	this.nora = null;
	this.posa = null;
	var halfX = sizeX / 2;
	var halfY = sizeY / 2;
	this.scalePos = Math.max(halfX,halfY);
	var inv = 1 / this.scalePos * 32767;
	this.posa = new Int16Array(vertsX * vertsY * 4);
	this.nora = new Int16Array(vertsX * vertsY * 2);
	this.texa = new Int16Array(vertsX * vertsY * 2);
	this.inda = new Uint32Array((vertsX - 1) * (vertsY - 1) * 6);
	var stepX = sizeX / (vertsX - 1);
	var stepY = sizeY / (vertsY - 1);
	var _g = 0;
	var _g1 = vertsX * vertsY;
	while(_g < _g1) {
		var i = _g++;
		var x = i % vertsX * stepX - halfX;
		var y = (i / vertsX | 0) * stepY - halfY;
		this.posa[i * 4] = x * inv | 0;
		this.posa[i * 4 + 1] = y * inv | 0;
		this.posa[i * 4 + 2] = 0;
		this.nora[i * 2] = 0;
		this.nora[i * 2 + 1] = 0;
		this.posa[i * 4 + 3] = 32767;
		x = i % vertsX / vertsX;
		y = (i / vertsX | 0) / vertsY;
		this.texa[i * 2] = x * 32767 | 0;
		this.texa[i * 2 + 1] = y * 32767 | 0;
	}
	var _g = 0;
	var _g1 = (vertsX - 1) * (vertsY - 1);
	while(_g < _g1) {
		var i = _g++;
		var x = i % (vertsX - 1);
		var y = i / (vertsY - 1) | 0;
		this.inda[i * 6] = y * vertsX + x;
		this.inda[i * 6 + 1] = y * vertsX + x + 1;
		this.inda[i * 6 + 2] = (y + 1) * vertsX + x;
		this.inda[i * 6 + 3] = y * vertsX + x + 1;
		this.inda[i * 6 + 4] = (y + 1) * vertsX + x + 1;
		this.inda[i * 6 + 5] = (y + 1) * vertsX + x;
	}
};
$hxClasses["arm.geom.Plane"] = arm_geom_Plane;
arm_geom_Plane.__name__ = "arm.geom.Plane";
arm_geom_Plane.prototype = {
	__class__: arm_geom_Plane
};
var arm_geom_Sphere = function(radius,widthSegments,heightSegments) {
	if(heightSegments == null) {
		heightSegments = 16;
	}
	if(widthSegments == null) {
		widthSegments = 32;
	}
	if(radius == null) {
		radius = 1.0;
	}
	this.scalePos = 1.0;
	this.inda = null;
	this.texa = null;
	this.nora = null;
	this.posa = null;
	this.scalePos = radius;
	var inv = 1 / this.scalePos * 32767;
	var pi2 = Math.PI * 2;
	var widthVerts = widthSegments + 1;
	var heightVerts = heightSegments + 1;
	this.posa = new Int16Array(widthVerts * heightVerts * 4);
	this.nora = new Int16Array(widthVerts * heightVerts * 2);
	this.texa = new Int16Array(widthVerts * heightVerts * 2);
	this.inda = new Uint32Array(widthSegments * heightSegments * 6 - widthSegments * 6);
	var _this_x = 0.0;
	var _this_y = 0.0;
	var _this_z = 0.0;
	var pos = 0;
	var _g = 0;
	while(_g < heightVerts) {
		var y = _g++;
		var v = y / heightSegments;
		var vFlip = 1.0 - v;
		var uOff = y == 0 ? 0.5 / widthSegments : y == heightSegments ? -0.5 / widthSegments : 0.0;
		var _g1 = 0;
		while(_g1 < widthVerts) {
			var u = _g1++ / widthSegments;
			var uPI2 = u * pi2;
			var vPI = v * Math.PI;
			var vPIsin = Math.sin(vPI);
			var vx = -radius * Math.cos(uPI2) * vPIsin;
			var vy = radius * Math.cos(vPI);
			var vz = radius * Math.sin(uPI2) * vPIsin;
			var i4 = pos * 4;
			var i2 = pos * 2;
			this.posa[i4] = vx * inv | 0;
			this.posa[i4 + 1] = vy * inv | 0;
			this.posa[i4 + 2] = vz * inv | 0;
			_this_x = vx;
			_this_y = vy;
			_this_z = vz;
			var n = Math.sqrt(vx * vx + vy * vy + vz * vz);
			if(n > 0.0) {
				var invN = 1.0 / n;
				_this_x = vx * invN;
				_this_y = vy * invN;
				_this_z = vz * invN;
			}
			this.posa[i4 + 3] = _this_z * 32767 | 0;
			this.nora[i2] = _this_x * 32767 | 0;
			this.nora[i2 + 1] = _this_y * 32767 | 0;
			this.texa[i2] = (u + uOff) * 32767 | 0;
			this.texa[i2 + 1] = vFlip * 32767 | 0;
			++pos;
		}
	}
	pos = 0;
	var heightSegments1 = heightSegments - 1;
	var _g = 0;
	while(_g < heightSegments) {
		var y = _g++;
		var _g1 = 0;
		while(_g1 < widthSegments) {
			var x = _g1++;
			var x1 = x + 1;
			var y1 = y + 1;
			var b = y * widthVerts + x;
			var d = y1 * widthVerts + x1;
			if(y > 0) {
				this.inda[pos++] = y * widthVerts + x1;
				this.inda[pos++] = b;
				this.inda[pos++] = d;
			}
			if(y < heightSegments1) {
				this.inda[pos++] = b;
				this.inda[pos++] = y1 * widthVerts + x;
				this.inda[pos++] = d;
			}
		}
	}
};
$hxClasses["arm.geom.Sphere"] = arm_geom_Sphere;
arm_geom_Sphere.__name__ = "arm.geom.Sphere";
arm_geom_Sphere.prototype = {
	__class__: arm_geom_Sphere
};
var arm_io_ExportArm = function() { };
$hxClasses["arm.io.ExportArm"] = arm_io_ExportArm;
arm_io_ExportArm.__name__ = "arm.io.ExportArm";
arm_io_ExportArm.run = function(path) {
	var raw = { mesh_datas : [arm_Context.paintObject.data.raw]};
	var o = new haxe_io_BytesOutput();
	o.set_bigEndian(false);
	iron_system_ArmPack.write(o,raw);
	var b = o.getBytes();
	if(!StringTools.endsWith(path,".arm")) {
		path += ".arm";
	}
	Krom.fileSaveBytes(path,b.b.bufferValue);
};
arm_io_ExportArm.runProject = function() {
	var mnodes = [];
	var bnodes = [];
	var _g = 0;
	var _g1 = arm_Project.materials;
	while(_g < _g1.length) {
		var c = JSON.parse(JSON.stringify(_g1[_g++].canvas));
		var _g2 = 0;
		var _g3 = c.nodes;
		while(_g2 < _g3.length) {
			var n = _g3[_g2];
			++_g2;
			if(n.type == "TEX_IMAGE") {
				var tmp = arm_App.enumTexts(n.type);
				n.buttons[0].data = tmp[n.buttons[0].default_value];
			}
		}
		mnodes.push(c);
	}
	var _g = 0;
	var _g1 = arm_Project.brushes;
	while(_g < _g1.length) bnodes.push(_g1[_g++].canvas);
	var md = [];
	var _g = 0;
	var _g1 = arm_Project.paintObjects;
	while(_g < _g1.length) md.push(_g1[_g++].data.raw);
	var texture_files = arm_io_ExportArm.assetsToFiles(arm_Project.assets);
	var font_files = arm_io_ExportArm.fontsToFiles(arm_Project.fonts);
	var mesh_files = arm_io_ExportArm.meshesToFiles();
	var bitsPos = arm_App.bitsHandle.position;
	var bpp = bitsPos == 0 ? 8 : bitsPos == 1 ? 16 : 32;
	var ld = [];
	var _g = 0;
	var _g1 = arm_Project.layers;
	while(_g < _g1.length) {
		var l = _g1[_g];
		++_g;
		ld.push({ name : l.name, res : l.texpaint != null ? l.texpaint.get_width() : arm_Project.layers[0].texpaint.get_width(), bpp : bpp, texpaint : l.texpaint != null ? iron_system_Lz4.encode(l.texpaint.getPixels()) : null, texpaint_nor : l.texpaint_nor != null ? iron_system_Lz4.encode(l.texpaint_nor.getPixels()) : null, texpaint_pack : l.texpaint_pack != null ? iron_system_Lz4.encode(l.texpaint_pack.getPixels()) : null, texpaint_mask : l.texpaint_mask != null ? iron_system_Lz4.encode(l.texpaint_mask.getPixels()) : null, uv_scale : l.scale, uv_rot : l.angle, uv_type : l.uvType, opacity_mask : l.maskOpacity, fill_layer : l.fill_layer != null ? arm_Project.materials.indexOf(l.fill_layer) : -1, fill_mask : l.fill_mask != null ? arm_Project.materials.indexOf(l.fill_mask) : -1, object_mask : l.objectMask, blending : l.blending, parent : l.parent != null ? arm_Project.layers.indexOf(l.parent) : -1, visible : l.visible, paint_base : l.paintBase, paint_opac : l.paintOpac, paint_occ : l.paintOcc, paint_rough : l.paintRough, paint_met : l.paintMet, paint_nor : l.paintNor, paint_height : l.paintHeight, paint_emis : l.paintEmis, paint_subs : l.paintSubs});
	}
	arm_Project.raw = { version : Main.version, material_nodes : mnodes, brush_nodes : bnodes, mesh_datas : md, layer_datas : ld, assets : texture_files, font_assets : font_files, mesh_assets : mesh_files, is_bgra : false};
	var d = arm_Project.raw;
	var o = new haxe_io_BytesOutput();
	o.set_bigEndian(false);
	iron_system_ArmPack.write(o,d);
	var bytes = o.getBytes();
	Krom.fileSaveBytes(arm_Project.filepath,bytes.b.bufferValue);
	var recent = arm_Config.raw.recent_projects;
	HxOverrides.remove(recent,arm_Project.filepath);
	recent.unshift(arm_Project.filepath);
	arm_Config.save();
	arm_Log.info("Project saved.");
};
arm_io_ExportArm.runMaterial = function(path) {
	var mnodes = [];
	var m = arm_Context.material;
	var c = JSON.parse(JSON.stringify(m.canvas));
	var assets = [];
	var _g = 0;
	var _g1 = c.nodes;
	while(_g < _g1.length) {
		var n = _g1[_g];
		++_g;
		if(n.type == "TEX_IMAGE") {
			var index = n.buttons[0].default_value;
			var tmp = arm_App.enumTexts(n.type);
			n.buttons[0].data = tmp[index];
			var asset = arm_Project.assets[index];
			if(assets.indexOf(asset) == -1) {
				assets.push(asset);
			}
		}
	}
	mnodes.push(c);
	var texture_files = arm_io_ExportArm.assetsToFiles(assets);
	var raw = { version : Main.version, material_nodes : mnodes, material_icons : [iron_system_Lz4.encode(m.image.getPixels())], assets : texture_files};
	var o = new haxe_io_BytesOutput();
	o.set_bigEndian(false);
	iron_system_ArmPack.write(o,raw);
	var bytes = o.getBytes();
	if(!StringTools.endsWith(path,".arm")) {
		path += ".arm";
	}
	Krom.fileSaveBytes(path,bytes.b.bufferValue);
};
arm_io_ExportArm.runBrush = function(path) {
	var bnodes = [];
	var b = arm_Context.brush;
	var c = JSON.parse(JSON.stringify(b.canvas));
	var assets = [];
	var _g = 0;
	var _g1 = c.nodes;
	while(_g < _g1.length) {
		var n = _g1[_g];
		++_g;
		if(n.type == "TEX_IMAGE") {
			var index = n.buttons[0].default_value;
			var tmp = arm_App.enumTexts(n.type);
			n.buttons[0].data = tmp[index];
			var asset = arm_Project.assets[index];
			if(assets.indexOf(asset) == -1) {
				assets.push(asset);
			}
		}
	}
	bnodes.push(c);
	var texture_files = arm_io_ExportArm.assetsToFiles(assets);
	var raw = { version : Main.version, brush_nodes : bnodes, brush_icons : [iron_system_Lz4.encode(b.image.getPixels())], assets : texture_files};
	var o = new haxe_io_BytesOutput();
	o.set_bigEndian(false);
	iron_system_ArmPack.write(o,raw);
	var bytes = o.getBytes();
	if(!StringTools.endsWith(path,".arm")) {
		path += ".arm";
	}
	Krom.fileSaveBytes(path,bytes.b.bufferValue);
};
arm_io_ExportArm.assetsToFiles = function(assets) {
	var texture_files = [];
	var _g = 0;
	while(_g < assets.length) {
		var a = assets[_g];
		++_g;
		if(arm_Project.filepath.charAt(0) == a.file.charAt(0)) {
			texture_files.push(arm_sys_Path.toRelative(arm_Project.filepath,a.file));
		} else {
			texture_files.push(a.file);
		}
	}
	return texture_files;
};
arm_io_ExportArm.meshesToFiles = function() {
	var mesh_files = [];
	var _g = 0;
	var _g1 = arm_Project.meshAssets;
	while(_g < _g1.length) {
		var file = _g1[_g];
		++_g;
		if(arm_Project.filepath.charAt(0) == file.charAt(0)) {
			mesh_files.push(arm_sys_Path.toRelative(arm_Project.filepath,file));
		} else {
			mesh_files.push(file);
		}
	}
	return mesh_files;
};
arm_io_ExportArm.fontsToFiles = function(fonts) {
	var font_files = [];
	var _g = 1;
	var _g1 = fonts.length;
	while(_g < _g1) {
		var f = fonts[_g++];
		if(arm_Project.filepath.charAt(0) == f.file.charAt(0)) {
			font_files.push(arm_sys_Path.toRelative(arm_Project.filepath,f.file));
		} else {
			font_files.push(f.file);
		}
	}
	return font_files;
};
var arm_io_ExportMesh = function() { };
$hxClasses["arm.io.ExportMesh"] = arm_io_ExportMesh;
arm_io_ExportMesh.__name__ = "arm.io.ExportMesh";
arm_io_ExportMesh.run = function(path,applyDisplacement) {
	if(applyDisplacement == null) {
		applyDisplacement = false;
	}
	if(arm_Context.exportMeshFormat == 0) {
		arm_io_ExportObj.run(path,applyDisplacement);
	} else {
		arm_io_ExportArm.run(path);
	}
};
var arm_io_ExportObj = function() { };
$hxClasses["arm.io.ExportObj"] = arm_io_ExportObj;
arm_io_ExportObj.__name__ = "arm.io.ExportObj";
arm_io_ExportObj.run = function(path,applyDisplacement) {
	if(applyDisplacement == null) {
		applyDisplacement = false;
	}
	if(applyDisplacement) {
		arm_Project.layers[0].texpaint_pack.getPixels();
	}
	arm_Project.layers[0].texpaint_pack.get_width();
	var o = new haxe_io_BytesOutput();
	o.set_bigEndian(false);
	var off = 0;
	var _g = 0;
	var _g1 = arm_Project.paintObjects;
	while(_g < _g1.length) {
		var p = _g1[_g];
		++_g;
		var mesh = p.data.raw;
		var sc = p.data.scalePos * 3.0518509475997192e-005;
		var posa = mesh.vertex_arrays[0].values;
		var nora = mesh.vertex_arrays[1].values;
		var texa = mesh.vertex_arrays[2].values;
		var len = posa.length / 4 | 0;
		o.writeString("o " + p.name + "\n");
		var _g2 = 0;
		while(_g2 < len) {
			var i = _g2++;
			o.writeString("v ");
			o.writeString(posa[i * 4] * sc + "");
			o.writeString(" ");
			o.writeString(posa[i * 4 + 2] * sc + "");
			o.writeString(" ");
			o.writeString(-posa[i * 4 + 1] * sc + "");
			o.writeString("\n");
		}
		var _g3 = 0;
		while(_g3 < len) {
			var i1 = _g3++;
			o.writeString("vn ");
			o.writeString(nora[i1 * 2] * 3.0518509475997192e-005 + "");
			o.writeString(" ");
			o.writeString(posa[i1 * 4 + 3] * 3.0518509475997192e-005 + "");
			o.writeString(" ");
			o.writeString(-nora[i1 * 2 + 1] * 3.0518509475997192e-005 + "");
			o.writeString("\n");
		}
		var _g4 = 0;
		while(_g4 < len) {
			var i2 = _g4++;
			o.writeString("vt ");
			o.writeString(texa[i2 * 2] * 3.0518509475997192e-005 + "");
			o.writeString(" ");
			o.writeString(1.0 - texa[i2 * 2 + 1] * 3.0518509475997192e-005 + "");
			o.writeString("\n");
		}
		var inda = mesh.index_arrays[0].values;
		var _g5 = 0;
		var _g6 = inda.length / 3 | 0;
		while(_g5 < _g6) {
			var i3 = _g5++;
			var i11 = inda[i3 * 3] + 1 + off;
			var i21 = inda[i3 * 3 + 1] + 1 + off;
			var i31 = inda[i3 * 3 + 2] + 1 + off;
			o.writeString("f ");
			o.writeString(i11 + "");
			o.writeString("/");
			o.writeString(i11 + "");
			o.writeString("/");
			o.writeString(i11 + "");
			o.writeString(" ");
			o.writeString(i21 + "");
			o.writeString("/");
			o.writeString(i21 + "");
			o.writeString("/");
			o.writeString(i21 + "");
			o.writeString(" ");
			o.writeString(i31 + "");
			o.writeString("/");
			o.writeString(i31 + "");
			o.writeString("/");
			o.writeString(i31 + "");
			o.writeString("\n");
		}
		off += inda.length;
	}
	if(!StringTools.endsWith(path,".obj")) {
		path += ".obj";
	}
	Krom.fileSaveBytes(path,o.getBytes().b.bufferValue);
};
var arm_io_ExportTexture = function() { };
$hxClasses["arm.io.ExportTexture"] = arm_io_ExportTexture;
arm_io_ExportTexture.__name__ = "arm.io.ExportTexture";
arm_io_ExportTexture.run = function(path,bakeMaterial) {
	if(bakeMaterial == null) {
		bakeMaterial = false;
	}
	if(bakeMaterial) {
		arm_io_ExportTexture.runBakeMaterial(path);
	} else if(arm_Context.layersExport == 3) {
		var udimTiles = [];
		var _g = 0;
		var _g1 = arm_Project.layers;
		while(_g < _g1.length) {
			var l = _g1[_g];
			++_g;
			if(l.objectMask > 0) {
				var name = arm_Project.paintObjects[l.objectMask - 1].name;
				if(HxOverrides.substr(name,name.length - 5,2) == ".1") {
					udimTiles.push(HxOverrides.substr(name,name.length - 5,null));
				}
			}
		}
		if(udimTiles.length > 0) {
			var _g = 0;
			while(_g < udimTiles.length) arm_io_ExportTexture.runLayers(path,arm_Project.layers,udimTiles[_g++]);
		} else {
			arm_io_ExportTexture.runLayers(path,arm_Project.layers);
		}
	} else if(arm_Context.layersExport == 2) {
		var objectNames = [];
		var _g = 0;
		var _g1 = arm_Project.layers;
		while(_g < _g1.length) {
			var l = _g1[_g];
			++_g;
			if(l.objectMask > 0) {
				var name = arm_Project.paintObjects[l.objectMask - 1].name;
				if(objectNames.indexOf(name) == -1) {
					objectNames.push(name);
				}
			}
		}
		if(objectNames.length > 0) {
			var _g = 0;
			while(_g < objectNames.length) arm_io_ExportTexture.runLayers(path,arm_Project.layers,objectNames[_g++]);
		} else {
			arm_io_ExportTexture.runLayers(path,arm_Project.layers);
		}
	} else {
		var atlasExport = false;
		if(arm_Project.atlasObjects != null) {
			var _g = 1;
			var _g1 = arm_Project.atlasObjects.length;
			while(_g < _g1) {
				var i = _g++;
				if(arm_Project.atlasObjects[i - 1] != arm_Project.atlasObjects[i]) {
					atlasExport = true;
					break;
				}
			}
		}
		if(atlasExport) {
			var _g = 0;
			var _g1 = arm_Project.atlasObjects.length;
			while(_g < _g1) {
				var atlasIndex = _g++;
				var layers = [];
				var _g2 = 0;
				var _g3 = arm_Project.atlasObjects.length;
				while(_g2 < _g3) {
					var objectIndex = _g2++;
					if(arm_Project.atlasObjects[objectIndex] == atlasIndex) {
						var _g4 = 0;
						var _g5 = arm_Project.layers;
						while(_g4 < _g5.length) {
							var l = _g5[_g4];
							++_g4;
							if(l.objectMask - 1 == objectIndex) {
								layers.push(l);
							}
						}
					}
				}
				if(layers.length > 0) {
					arm_io_ExportTexture.runLayers(path,layers,arm_Project.atlasNames[atlasIndex]);
				}
			}
		} else {
			arm_io_ExportTexture.runLayers(path,arm_Context.layersExport == 1 ? [arm_Context.layer] : arm_Project.layers);
		}
	}
	arm_Log.info("Textures exported.");
};
arm_io_ExportTexture.runBakeMaterial = function(path) {
	if(arm_render_RenderPathPaint.liveLayer == null) {
		arm_render_RenderPathPaint.liveLayer = new arm_data_LayerSlot("_live");
		arm_render_RenderPathPaint.liveLayer.createMask(0);
	}
	var _space = arm_ui_UIHeader.inst.worktab.position;
	var _tool = arm_Context.tool;
	arm_ui_UIHeader.inst.worktab.position = 0;
	arm_Context.tool = 2;
	arm_node_MakeMaterial.parsePaintMaterial();
	var _paintObject = arm_Context.paintObject;
	var planeo = iron_Scene.active.getChild(".Plane");
	planeo.visible = true;
	arm_Context.paintObject = planeo;
	arm_Context.pdirty = 1;
	arm_render_RenderPathPaint.useLiveLayer(true);
	arm_render_RenderPathPaint.commandsPaint();
	arm_render_RenderPathPaint.useLiveLayer(false);
	arm_Context.tool = _tool;
	arm_node_MakeMaterial.parsePaintMaterial();
	arm_Context.pdirty = 0;
	arm_ui_UIHeader.inst.worktab.position = _space;
	planeo.visible = false;
	arm_Context.paintObject = _paintObject;
	arm_io_ExportTexture.runLayers(path,[arm_render_RenderPathPaint.liveLayer],"",true);
};
arm_io_ExportTexture.runLayers = function(path,layers,objectName,bakeMaterial) {
	if(bakeMaterial == null) {
		bakeMaterial = false;
	}
	if(objectName == null) {
		objectName = "";
	}
	var textureSizeX = arm_Config.getTextureResX();
	var textureSizeY = arm_Config.getTextureResY();
	var f = arm_ui_UIFiles.filename;
	if(f == "") {
		f = arm_Translator.tr("untitled");
	}
	var bits = arm_App.bitsHandle.position == 0 ? 8 : 16;
	var ext = bits == 16 ? ".exr" : arm_Context.formatType == 0 ? ".png" : ".jpg";
	if(StringTools.endsWith(f,ext)) {
		f = HxOverrides.substr(f,0,f.length - 4);
	}
	var isUdim = arm_Context.layersExport == 3;
	if(isUdim) {
		ext = objectName + ext;
	}
	arm_Layers.makeTempImg();
	arm_Layers.makeExportImg();
	if(arm_Layers.pipeMerge == null) {
		arm_Layers.makePipe();
	}
	if(iron_data_ConstData.screenAlignedVB == null) {
		iron_data_ConstData.createScreenAlignedData();
	}
	var empty = iron_RenderPath.active.renderTargets.h["empty_white"].image;
	var exportSelected = arm_Context.layersExport == 1;
	if(exportSelected && layers[0].objectMask > 0) {
		f += "_" + arm_Project.paintObjects[layers[0].objectMask - 1].name;
	}
	if(!isUdim && !exportSelected && objectName != "") {
		f += "_" + objectName;
	}
	arm_Layers.expa.get_g4().begin();
	arm_Layers.expa.get_g4().clear(kha_Color.fromFloats(0.0,0.0,0.0,0.0));
	arm_Layers.expa.get_g4().end();
	arm_Layers.expb.get_g4().begin();
	arm_Layers.expb.get_g4().clear(kha_Color.fromFloats(0.5,0.5,1.0,0.0));
	arm_Layers.expb.get_g4().end();
	arm_Layers.expc.get_g4().begin();
	arm_Layers.expc.get_g4().clear(kha_Color.fromFloats(1.0,0.0,0.0,0.0));
	arm_Layers.expc.get_g4().end();
	var _g = 0;
	while(_g < layers.length) {
		var l1 = layers[_g];
		++_g;
		if(!exportSelected && !l1.isVisible()) {
			continue;
		}
		if(objectName != "" && l1.objectMask > 0) {
			if(isUdim && !StringTools.endsWith(arm_Project.paintObjects[l1.objectMask - 1].name,objectName)) {
				continue;
			}
			if(arm_Context.layersExport == 2 && arm_Project.paintObjects[l1.objectMask - 1].name != objectName) {
				continue;
			}
		}
		var hasMask = l1.texpaint_mask != null && !bakeMaterial;
		if(l1.paintBase) {
			arm_Layers.imga.get_g2().begin(false);
			arm_Layers.imga.get_g2().set_pipeline(arm_Layers.pipeCopy);
			arm_Layers.imga.get_g2().drawImage(arm_Layers.expa,0,0);
			arm_Layers.imga.get_g2().set_pipeline(null);
			arm_Layers.imga.get_g2().end();
			arm_Layers.expa.get_g4().begin();
			arm_Layers.expa.get_g4().setPipeline(arm_Layers.pipeMerge);
			arm_Layers.expa.get_g4().setTexture(arm_Layers.tex0,l1.texpaint);
			arm_Layers.expa.get_g4().setTexture(arm_Layers.tex1,empty);
			var tmp = hasMask ? l1.texpaint_mask : empty;
			arm_Layers.expa.get_g4().setTexture(arm_Layers.texmask,tmp);
			arm_Layers.expa.get_g4().setTexture(arm_Layers.texa,arm_Layers.imga);
			arm_Layers.expa.get_g4().setFloat(arm_Layers.opac,l1.maskOpacity);
			var tmp1 = layers.length > 1 ? l1.blending : 0;
			arm_Layers.expa.get_g4().setInt(arm_Layers.blending,tmp1);
			arm_Layers.expa.get_g4().setVertexBuffer(iron_data_ConstData.screenAlignedVB);
			arm_Layers.expa.get_g4().setIndexBuffer(iron_data_ConstData.screenAlignedIB);
			arm_Layers.expa.get_g4().drawIndexedVertices();
			arm_Layers.expa.get_g4().end();
		}
		if(l1.paintNor) {
			arm_Layers.imga.get_g2().begin(false);
			arm_Layers.imga.get_g2().set_pipeline(arm_Layers.pipeCopy);
			arm_Layers.imga.get_g2().drawImage(arm_Layers.expb,0,0);
			arm_Layers.imga.get_g2().set_pipeline(null);
			arm_Layers.imga.get_g2().end();
			arm_Layers.expb.get_g4().begin();
			arm_Layers.expb.get_g4().setPipeline(arm_Layers.pipeMerge);
			arm_Layers.expb.get_g4().setTexture(arm_Layers.tex0,l1.texpaint);
			arm_Layers.expb.get_g4().setTexture(arm_Layers.tex1,l1.texpaint_nor);
			var tmp2 = hasMask ? l1.texpaint_mask : empty;
			arm_Layers.expb.get_g4().setTexture(arm_Layers.texmask,tmp2);
			arm_Layers.expb.get_g4().setTexture(arm_Layers.texa,arm_Layers.imga);
			arm_Layers.expb.get_g4().setFloat(arm_Layers.opac,l1.maskOpacity);
			arm_Layers.expb.get_g4().setInt(arm_Layers.blending,-1);
			arm_Layers.expb.get_g4().setVertexBuffer(iron_data_ConstData.screenAlignedVB);
			arm_Layers.expb.get_g4().setIndexBuffer(iron_data_ConstData.screenAlignedIB);
			arm_Layers.expb.get_g4().drawIndexedVertices();
			arm_Layers.expb.get_g4().end();
		}
		if(l1.paintOcc || l1.paintRough || l1.paintMet || l1.paintHeight) {
			arm_Layers.imga.get_g2().begin(false);
			arm_Layers.imga.get_g2().set_pipeline(arm_Layers.pipeCopy);
			arm_Layers.imga.get_g2().drawImage(arm_Layers.expc,0,0);
			arm_Layers.imga.get_g2().set_pipeline(null);
			arm_Layers.imga.get_g2().end();
			if(l1.paintOcc && l1.paintRough && l1.paintMet && l1.paintHeight) {
				arm_Layers.commandsMergePack(arm_Layers.pipeMerge,arm_Layers.expc,l1.texpaint,l1.texpaint_pack,l1.maskOpacity,hasMask ? l1.texpaint_mask : empty);
			} else {
				if(l1.paintOcc) {
					arm_Layers.commandsMergePack(arm_Layers.pipeMergeR,arm_Layers.expc,l1.texpaint,l1.texpaint_pack,l1.maskOpacity,hasMask ? l1.texpaint_mask : empty);
				}
				if(l1.paintRough) {
					arm_Layers.commandsMergePack(arm_Layers.pipeMergeG,arm_Layers.expc,l1.texpaint,l1.texpaint_pack,l1.maskOpacity,hasMask ? l1.texpaint_mask : empty);
				}
				if(l1.paintMet) {
					arm_Layers.commandsMergePack(arm_Layers.pipeMergeB,arm_Layers.expc,l1.texpaint,l1.texpaint_pack,l1.maskOpacity,hasMask ? l1.texpaint_mask : empty);
				}
			}
		}
	}
	var texpaint = arm_Layers.expa;
	var texpaint_nor = arm_Layers.expb;
	var texpaint_pack = arm_Layers.expc;
	var pixpaint = null;
	var pixpaint_nor = null;
	var pixpaint_pack = null;
	var preset = arm_ui_BoxExport.preset;
	var pix = null;
	var _g = 0;
	var _g1 = preset.textures;
	while(_g < _g1.length) {
		var _g2 = 0;
		var _g3 = _g1[_g++].channels;
		while(_g2 < _g3.length) {
			var c = _g3[_g2];
			++_g2;
			if((c == "base_r" || c == "base_g" || c == "base_b" || c == "opac") && pixpaint == null) {
				pixpaint = texpaint.getPixels();
			} else if((c == "nor_r" || c == "nor_g" || c == "nor_b" || c == "emis" || c == "subs") && pixpaint_nor == null) {
				pixpaint_nor = texpaint_nor.getPixels();
			} else if((c == "occ" || c == "rough" || c == "metal" || c == "height" || c == "smooth") && pixpaint_pack == null) {
				pixpaint_pack = texpaint_pack.getPixels();
			}
		}
	}
	var _g = 0;
	var _g1 = preset.textures;
	while(_g < _g1.length) {
		var t = _g1[_g];
		++_g;
		var c = t.channels;
		var tex_name = t.name != "" ? "_" + t.name : "";
		var singleChannel = c[0] == c[1] && c[1] == c[2] && c[3] == "1.0";
		if(c[0] == "base_r" && c[1] == "base_g" && c[2] == "base_b" && c[3] == "1.0") {
			arm_io_ExportTexture.writeTexture(path + arm_sys_Path.sep + f + tex_name + ext,pixpaint,1);
		} else if(c[0] == "nor_r" && c[1] == "nor_g" && c[2] == "nor_b" && c[3] == "1.0") {
			arm_io_ExportTexture.writeTexture(path + arm_sys_Path.sep + f + tex_name + ext,pixpaint_nor,1);
		} else if(c[0] == "occ" && c[1] == "rough" && c[2] == "metal" && c[3] == "1.0") {
			arm_io_ExportTexture.writeTexture(path + arm_sys_Path.sep + f + tex_name + ext,pixpaint_pack,1);
		} else if(singleChannel && c[0] == "occ") {
			arm_io_ExportTexture.writeTexture(path + arm_sys_Path.sep + f + tex_name + ext,pixpaint_pack,2,0);
		} else if(singleChannel && c[0] == "rough") {
			arm_io_ExportTexture.writeTexture(path + arm_sys_Path.sep + f + tex_name + ext,pixpaint_pack,2,1);
		} else if(singleChannel && c[0] == "metal") {
			arm_io_ExportTexture.writeTexture(path + arm_sys_Path.sep + f + tex_name + ext,pixpaint_pack,2,2);
		} else if(singleChannel && c[0] == "height") {
			arm_io_ExportTexture.writeTexture(path + arm_sys_Path.sep + f + tex_name + ext,pixpaint_pack,2,3);
		} else if(singleChannel && c[0] == "opac") {
			arm_io_ExportTexture.writeTexture(path + arm_sys_Path.sep + f + tex_name + ext,pixpaint,2,3);
		} else {
			if(pix == null) {
				pix = new haxe_io_Bytes(new ArrayBuffer(textureSizeX * textureSizeY * 4 * (bits / 8 | 0)));
			}
			var _g2 = 0;
			while(_g2 < 4) {
				var i = _g2++;
				var c1 = t.channels[i];
				if(c1 == "base_r") {
					arm_io_ExportTexture.copyChannel(pixpaint,0,pix,i);
				} else if(c1 == "base_g") {
					arm_io_ExportTexture.copyChannel(pixpaint,1,pix,i);
				} else if(c1 == "base_b") {
					arm_io_ExportTexture.copyChannel(pixpaint,2,pix,i);
				} else if(c1 == "height") {
					arm_io_ExportTexture.copyChannel(pixpaint_pack,3,pix,i);
				} else if(c1 == "metal") {
					arm_io_ExportTexture.copyChannel(pixpaint_pack,2,pix,i);
				} else if(c1 == "nor_r") {
					arm_io_ExportTexture.copyChannel(pixpaint_nor,0,pix,i);
				} else if(c1 == "nor_g") {
					arm_io_ExportTexture.copyChannel(pixpaint_nor,1,pix,i);
				} else if(c1 == "nor_b") {
					arm_io_ExportTexture.copyChannel(pixpaint_nor,2,pix,i);
				} else if(c1 == "occ") {
					arm_io_ExportTexture.copyChannel(pixpaint_pack,0,pix,i);
				} else if(c1 == "opac") {
					arm_io_ExportTexture.copyChannel(pixpaint,3,pix,i);
				} else if(c1 == "rough") {
					arm_io_ExportTexture.copyChannel(pixpaint_pack,1,pix,i);
				} else if(c1 == "smooth") {
					arm_io_ExportTexture.copyChannelInv(pixpaint_pack,1,pix,i);
				} else if(c1 == "emis") {
					arm_io_ExportTexture.extractChannel(pixpaint_nor,3,pix,i,255);
				} else if(c1 == "subs") {
					arm_io_ExportTexture.extractChannel(pixpaint_nor,3,pix,i,254);
				} else if(c1 == "0.0") {
					arm_io_ExportTexture.setChannel(0,pix,i);
				} else if(c1 == "1.0") {
					arm_io_ExportTexture.setChannel(255,pix,i);
				}
			}
			arm_io_ExportTexture.writeTexture(path + arm_sys_Path.sep + f + tex_name + ext,pix,3);
		}
	}
};
arm_io_ExportTexture.writeTexture = function(file,pixels,type,off) {
	if(off == null) {
		off = 0;
	}
	if(type == null) {
		type = 1;
	}
	var out = new haxe_io_BytesOutput();
	var resX = arm_Config.getTextureResX();
	var resY = arm_Config.getTextureResY();
	var bitsHandle = arm_App.bitsHandle.position;
	var bits = bitsHandle == 0 ? 8 : bitsHandle == 1 ? 16 : 32;
	if(bits > 8) {
		new arm_format_ExrWriter(out,resX,resY,pixels,bits,type,off);
	} else if(arm_Context.formatType == 0) {
		new arm_format_PngWriter(out).write(type == 1 ? arm_format_PngTools.build32RGB1(resX,resY,pixels) : type == 2 ? arm_format_PngTools.build32RRR1(resX,resY,pixels,off) : arm_format_PngTools.build32RGBA(resX,resY,pixels));
	} else {
		new arm_format_JpgWriter(out).write({ width : resX, height : resY, quality : arm_Context.formatQuality, pixels : pixels},type,off,false);
	}
	Krom.fileSaveBytes(file,out.getBytes().b.bufferValue);
};
arm_io_ExportTexture.copyChannel = function(from,fromChannel,to,toChannel) {
	var _g = 0;
	var _g1 = to.length / 4 | 0;
	while(_g < _g1) {
		var i = _g++;
		to.b[i * 4 + toChannel] = from.b[i * 4 + fromChannel];
	}
};
arm_io_ExportTexture.copyChannelInv = function(from,fromChannel,to,toChannel) {
	var _g = 0;
	var _g1 = to.length / 4 | 0;
	while(_g < _g1) {
		var i = _g++;
		to.b[i * 4 + toChannel] = 255 - from.b[i * 4 + fromChannel];
	}
};
arm_io_ExportTexture.setChannel = function(value,to,toChannel) {
	var _g = 0;
	var _g1 = to.length / 4 | 0;
	while(_g < _g1) to.b[_g++ * 4 + toChannel] = value;
};
arm_io_ExportTexture.extractChannel = function(from,fromChannel,to,toChannel,mask) {
	var _g = 0;
	var _g1 = to.length / 4 | 0;
	while(_g < _g1) {
		var i = _g++;
		to.b[i * 4 + toChannel] = from.b[i * 4 + fromChannel] == mask ? 255 : 0;
	}
};
var arm_io_ImportArm = function() { };
$hxClasses["arm.io.ImportArm"] = arm_io_ImportArm;
arm_io_ImportArm.__name__ = "arm.io.ImportArm";
arm_io_ImportArm.runMesh = function(raw) {
	arm_Project.paintObjects = [];
	var _g = 0;
	var _g1 = raw.mesh_datas.length;
	while(_g < _g1) {
		var i = [_g++];
		new iron_data_MeshData(raw.mesh_datas[i[0]],(function(i) {
			return function(md) {
				var object = null;
				if(i[0] == 0) {
					arm_Context.paintObject.setData(md);
					object = arm_Context.paintObject;
				} else {
					object = iron_Scene.active.addMeshObject(md,arm_Context.paintObject.materials,arm_Context.paintObject);
					object.name = md.name;
					object.skip_context = "paint";
					md.handle = md.name;
					iron_data_Data.cachedMeshes.h[md.handle] = md;
				}
				var _this = object.transform.scale;
				_this.x = 1;
				_this.y = 1;
				_this.z = 1;
				_this.w = 1.0;
				object.transform.buildMatrix();
				object.name = md.name;
				arm_Project.paintObjects.push(object);
			};
		})(i));
	}
	iron_App.notifyOnInit(arm_Layers.initLayers);
	arm_History.reset();
};
arm_io_ImportArm.runScene = function(raw,path) {
	var _dataPath = iron_data_Data.dataPath;
	iron_data_Data.dataPath = path.substring(0,path.lastIndexOf(arm_sys_Path.sep) + 1);
	raw.name += "_imported";
	iron_data_Data.cachedSceneRaws.h[raw.name] = raw;
	iron_Scene.active.addScene(raw.name,null,function(sceneObject) {
		arm_io_ImportArm.traverseObjects(sceneObject.children);
	});
	iron_data_Data.dataPath = _dataPath;
};
arm_io_ImportArm.traverseObjects = function(objects) {
	if(objects == null) {
		return;
	}
	var _g = 0;
	while(_g < objects.length) {
		var o = objects[_g];
		++_g;
		if(((o) instanceof iron_object_MeshObject)) {
			var mo = js_Boot.__cast(o , iron_object_MeshObject);
			var count = mo.data.geom.indices.length;
			mo.materials = new Array(count);
			var _g1 = 0;
			while(_g1 < count) mo.materials[_g1++] = arm_Context.materialScene.data;
		}
		arm_io_ImportArm.traverseObjects(o.children);
	}
};
arm_io_ImportArm.runProject = function(path) {
	iron_data_Data.getBlob(path,function(b) {
		var i = new haxe_io_BytesInput(b.toBytes());
		i.set_bigEndian(false);
		var project = iron_system_ArmPack.read(i);
		if(project.version != null && project.layer_datas == null) {
			arm_io_ImportArm.runMaterialFromProject(project,path);
			return;
		}
		arm_Context.layersPreviewDirty = true;
		arm_Context.layerFilter = 0;
		arm_Project.projectNew(false);
		arm_Project.filepath = path;
		arm_ui_UIFiles.filename = path.substring(path.lastIndexOf(arm_sys_Path.sep) + 1,path.lastIndexOf("."));
		kha_Window.get(0).set_title(arm_ui_UIFiles.filename + " - ArmorPaint");
		if(project.version == null) {
			if(project.objects == null) {
				arm_io_ImportArm.runMesh(project);
			} else {
				arm_io_ImportArm.runScene(project,path);
			}
			return;
		}
		var recent = arm_Config.raw.recent_projects;
		HxOverrides.remove(recent,path);
		recent.unshift(path);
		arm_Config.save();
		arm_Project.raw = project;
		var l0 = project.layer_datas[0];
		arm_App.resHandle.position = arm_Config.getTextureResPos(l0.res);
		var bitsPos = l0.bpp == 8 ? 0 : l0.bpp == 16 ? 1 : 2;
		arm_App.bitsHandle.position = bitsPos;
		var bytesPerPixel = l0.bpp / 8 | 0;
		var format = l0.bpp == 8 ? 0 : l0.bpp == 16 ? 4 : 2;
		var base = arm_sys_Path.baseDir(path);
		var _g = 0;
		var _g1 = project.assets;
		while(_g < _g1.length) {
			var file = _g1[_g];
			++_g;
			file = StringTools.replace(file,"/","\\");
			var abs = iron_data_Data.isAbsolute(file) ? file : base + file;
			if(!arm_sys_File.exists(abs)) {
				arm_io_ImportArm.makePink(abs);
			}
			arm_io_ImportTexture.run(abs);
		}
		if(project.font_assets != null) {
			var _g = 0;
			var _g1 = project.font_assets;
			while(_g < _g1.length) {
				var file = _g1[_g];
				++_g;
				file = StringTools.replace(file,"/","\\");
				var abs = iron_data_Data.isAbsolute(file) ? file : base + file;
				if(arm_sys_File.exists(abs)) {
					arm_io_ImportFont.run(abs);
				}
			}
		}
		new iron_data_MeshData(project.mesh_datas[0],function(md) {
			arm_Context.paintObject.setData(md);
			var _this = arm_Context.paintObject.transform.scale;
			_this.x = 1;
			_this.y = 1;
			_this.z = 1;
			_this.w = 1.0;
			arm_Context.paintObject.transform.buildMatrix();
			arm_Context.paintObject.name = md.name;
			arm_Project.paintObjects = [arm_Context.paintObject];
		});
		var _g = 1;
		var _g1 = project.mesh_datas.length;
		while(_g < _g1) {
			var i = _g++;
			var raw = project.mesh_datas[i];
			new iron_data_MeshData(raw,function(md) {
				var object = iron_Scene.active.addMeshObject(md,arm_Context.paintObject.materials,arm_Context.paintObject);
				object.name = md.name;
				object.skip_context = "paint";
				arm_Project.paintObjects.push(object);
			});
		}
		if(project.mesh_assets != null && project.mesh_assets.length > 0) {
			var file = project.mesh_assets[0];
			var abs = iron_data_Data.isAbsolute(file) ? file : base + file;
			arm_Project.meshAssets = [abs];
		}
		if(arm_Context.mergedObject == null) {
			arm_util_MeshUtil.mergeMesh();
		}
		arm_Context.selectPaintObject(arm_Context.mainObject());
		arm_util_ViewportUtil.scaleToBounds();
		arm_Context.paintObject.skip_context = "paint";
		arm_Context.mergedObject.visible = true;
		var tex = arm_Project.layers[0].texpaint;
		if(tex.get_width() != arm_Config.getTextureResX() || tex.get_height() != arm_Config.getTextureResY()) {
			if(arm_History.undoLayers != null) {
				var _g = 0;
				var _g1 = arm_History.undoLayers;
				while(_g < _g1.length) {
					var l = _g1[_g];
					++_g;
					l.resizeAndSetBits();
				}
			}
			var rts = iron_RenderPath.active.renderTargets;
			var _texpaint_blend0 = rts.h["texpaint_blend0"].image;
			arm_App.notifyOnNextFrame(function() {
				_texpaint_blend0.unload();
			});
			rts.h["texpaint_blend0"].raw.width = arm_Config.getTextureResX();
			rts.h["texpaint_blend0"].raw.height = arm_Config.getTextureResY();
			rts.h["texpaint_blend0"].image = kha_Image.createRenderTarget(arm_Config.getTextureResX(),arm_Config.getTextureResY(),1,0);
			var _texpaint_blend1 = rts.h["texpaint_blend1"].image;
			arm_App.notifyOnNextFrame(function() {
				_texpaint_blend1.unload();
			});
			rts.h["texpaint_blend1"].raw.width = arm_Config.getTextureResX();
			rts.h["texpaint_blend1"].raw.height = arm_Config.getTextureResY();
			rts.h["texpaint_blend1"].image = kha_Image.createRenderTarget(arm_Config.getTextureResX(),arm_Config.getTextureResY(),1,0);
			arm_Context.brushBlendDirty = true;
		}
		var _g = 0;
		var _g1 = arm_Project.layers;
		while(_g < _g1.length) {
			var l = _g1[_g];
			++_g;
			l.unload();
		}
		arm_Project.layers = [];
		var _g = 0;
		var _g1 = project.layer_datas.length;
		while(_g < _g1) {
			var i = _g++;
			var ld = project.layer_datas[i];
			var isGroup = ld.texpaint == null;
			var l = new arm_data_LayerSlot("",isGroup);
			if(ld.name != null) {
				l.name = ld.name;
			}
			l.visible = ld.visible;
			arm_Project.layers.push(l);
			if(!isGroup) {
				if(arm_Layers.pipeMerge == null) {
					arm_Layers.makePipe();
				}
				var _texpaint = [kha_Image.fromBytes(iron_system_Lz4.decode(ld.texpaint,ld.res * ld.res * 4 * bytesPerPixel),ld.res,ld.res,format)];
				l.texpaint.get_g2().begin(false);
				var tmp = project.is_bgra ? arm_Layers.pipeCopyBGRA : arm_Layers.pipeCopy;
				l.texpaint.get_g2().set_pipeline(tmp);
				l.texpaint.get_g2().drawImage(_texpaint[0],0,0);
				l.texpaint.get_g2().set_pipeline(null);
				l.texpaint.get_g2().end();
				var _texpaint_nor = [kha_Image.fromBytes(iron_system_Lz4.decode(ld.texpaint_nor,ld.res * ld.res * 4 * bytesPerPixel),ld.res,ld.res,format)];
				l.texpaint_nor.get_g2().begin(false);
				var tmp1 = project.is_bgra ? arm_Layers.pipeCopyBGRA : arm_Layers.pipeCopy;
				l.texpaint_nor.get_g2().set_pipeline(tmp1);
				l.texpaint_nor.get_g2().drawImage(_texpaint_nor[0],0,0);
				l.texpaint_nor.get_g2().set_pipeline(null);
				l.texpaint_nor.get_g2().end();
				var _texpaint_pack = [kha_Image.fromBytes(iron_system_Lz4.decode(ld.texpaint_pack,ld.res * ld.res * 4 * bytesPerPixel),ld.res,ld.res,format)];
				l.texpaint_pack.get_g2().begin(false);
				var tmp2 = project.is_bgra ? arm_Layers.pipeCopyBGRA : arm_Layers.pipeCopy;
				l.texpaint_pack.get_g2().set_pipeline(tmp2);
				l.texpaint_pack.get_g2().drawImage(_texpaint_pack[0],0,0);
				l.texpaint_pack.get_g2().set_pipeline(null);
				l.texpaint_pack.get_g2().end();
				var _texpaint_mask = [null];
				if(ld.texpaint_mask != null) {
					l.createMask(0,false);
					_texpaint_mask[0] = kha_Image.fromBytes(iron_system_Lz4.decode(ld.texpaint_mask,ld.res * ld.res),ld.res,ld.res,1);
					l.texpaint_mask.get_g2().begin(false);
					l.texpaint_mask.get_g2().set_pipeline(arm_Layers.pipeCopy8);
					l.texpaint_mask.get_g2().drawImage(_texpaint_mask[0],0,0);
					l.texpaint_mask.get_g2().set_pipeline(null);
					l.texpaint_mask.get_g2().end();
				}
				l.scale = ld.uv_scale;
				l.angle = ld.uv_rot;
				l.uvType = ld.uv_type;
				l.maskOpacity = ld.opacity_mask;
				l.objectMask = ld.object_mask;
				l.blending = ld.blending;
				l.paintBase = ld.paint_base;
				l.paintOpac = ld.paint_opac;
				l.paintOcc = ld.paint_occ;
				l.paintRough = ld.paint_rough;
				l.paintMet = ld.paint_met;
				l.paintNor = ld.paint_nor;
				l.paintHeight = ld.paint_height;
				l.paintEmis = ld.paint_emis;
				l.paintSubs = ld.paint_subs;
				arm_App.notifyOnNextFrame((function(_texpaint_mask,_texpaint_pack,_texpaint_nor,_texpaint) {
					return function() {
						_texpaint[0].unload();
						_texpaint_nor[0].unload();
						_texpaint_pack[0].unload();
						if(_texpaint_mask[0] != null) {
							_texpaint_mask[0].unload();
						}
					};
				})(_texpaint_mask,_texpaint_pack,_texpaint_nor,_texpaint));
			}
		}
		var _g = 0;
		var _g1 = project.layer_datas.length;
		while(_g < _g1) {
			var i = _g++;
			var ld = project.layer_datas[i];
			if(ld.parent >= 0) {
				arm_Project.layers[i].parent = arm_Project.layers[ld.parent];
			}
		}
		arm_Context.setLayer(arm_Project.layers[0]);
		var m0 = null;
		iron_data_Data.getMaterial("Scene","Material",function(m) {
			m0 = m;
		});
		arm_Project.materials = [];
		var _g = 0;
		var _g1 = project.material_nodes;
		while(_g < _g1.length) {
			var n = _g1[_g];
			++_g;
			arm_io_ImportArm.initNodes(n.nodes);
			arm_Context.material = new arm_data_MaterialSlot(m0,n);
			arm_Project.materials.push(arm_Context.material);
			arm_node_MakeMaterial.parsePaintMaterial();
			arm_util_RenderUtil.makeMaterialPreview();
		}
		arm_Project.brushes = [];
		var _g = 0;
		var _g1 = project.brush_nodes;
		while(_g < _g1.length) {
			var n = _g1[_g];
			++_g;
			arm_io_ImportArm.initNodes(n.nodes);
			arm_Context.brush = new arm_data_BrushSlot(n);
			arm_Project.brushes.push(arm_Context.brush);
			arm_node_MakeMaterial.parseBrush();
			arm_Context.parseBrushInputs();
			arm_util_RenderUtil.makeBrushPreview();
		}
		var _g = 0;
		var _g1 = project.layer_datas.length;
		while(_g < _g1) {
			var i = _g++;
			var ld = project.layer_datas[i];
			var l = arm_Project.layers[i];
			var isGroup = ld.texpaint == null;
			if(!isGroup) {
				var material_mask = ld.material_mask;
				if(material_mask != null) {
					l.fill_layer = material_mask > -1 ? arm_Project.materials[material_mask] : null;
				} else {
					l.fill_layer = ld.fill_layer > -1 ? arm_Project.materials[ld.fill_layer] : null;
				}
				l.fill_mask = ld.fill_mask > -1 ? arm_Project.materials[ld.fill_mask] : null;
			}
		}
		arm_Context.ddirty = 4;
		arm_ui_UISidebar.inst.hwnd0.redraws = 2;
		arm_ui_UISidebar.inst.hwnd1.redraws = 2;
		arm_ui_UISidebar.inst.hwnd2.redraws = 2;
		iron_data_Data.deleteBlob(path);
	});
};
arm_io_ImportArm.runMaterial = function(path) {
	iron_data_Data.getBlob(path,function(b) {
		var i = new haxe_io_BytesInput(b.toBytes());
		i.set_bigEndian(false);
		var project = iron_system_ArmPack.read(i);
		if(project.version == null) {
			iron_data_Data.deleteBlob(path);
			return;
		}
		arm_io_ImportArm.runMaterialFromProject(project,path);
	});
};
arm_io_ImportArm.runMaterialFromProject = function(project,path) {
	var base = arm_sys_Path.baseDir(path);
	var _g = 0;
	var _g1 = project.assets;
	while(_g < _g1.length) {
		var file = _g1[_g];
		++_g;
		file = StringTools.replace(file,"/","\\");
		var abs = iron_data_Data.isAbsolute(file) ? file : base + file;
		if(!arm_sys_File.exists(abs)) {
			arm_io_ImportArm.makePink(abs);
		}
		arm_io_ImportTexture.run(abs);
	}
	var m0 = null;
	iron_data_Data.getMaterial("Scene","Material",function(m) {
		m0 = m;
	});
	var imported = [];
	var _g = 0;
	var _g1 = project.material_nodes;
	while(_g < _g1.length) {
		var n = _g1[_g];
		++_g;
		arm_io_ImportArm.initNodes(n.nodes);
		arm_Context.material = new arm_data_MaterialSlot(m0,n);
		arm_Project.materials.push(arm_Context.material);
		imported.push(arm_Context.material);
	}
	iron_App.notifyOnInit(function() {
		var _g = 0;
		while(_g < imported.length) {
			arm_Context.setMaterial(imported[_g++]);
			arm_node_MakeMaterial.parsePaintMaterial();
			arm_util_RenderUtil.makeMaterialPreview();
		}
	});
	arm_ui_UISidebar.inst.hwnd1.redraws = 2;
	iron_data_Data.deleteBlob(path);
};
arm_io_ImportArm.runBrush = function(path) {
	iron_data_Data.getBlob(path,function(b) {
		var i = new haxe_io_BytesInput(b.toBytes());
		i.set_bigEndian(false);
		var project = iron_system_ArmPack.read(i);
		if(project.version == null) {
			iron_data_Data.deleteBlob(path);
			return;
		}
		arm_io_ImportArm.runBrushFromProject(project,path);
	});
};
arm_io_ImportArm.runBrushFromProject = function(project,path) {
	var base = arm_sys_Path.baseDir(path);
	var _g = 0;
	var _g1 = project.assets;
	while(_g < _g1.length) {
		var file = _g1[_g];
		++_g;
		file = StringTools.replace(file,"/","\\");
		var abs = iron_data_Data.isAbsolute(file) ? file : base + file;
		if(!arm_sys_File.exists(abs)) {
			arm_io_ImportArm.makePink(abs);
		}
		arm_io_ImportTexture.run(abs);
	}
	var imported = [];
	var _g = 0;
	var _g1 = project.brush_nodes;
	while(_g < _g1.length) {
		var n = _g1[_g];
		++_g;
		arm_io_ImportArm.initNodes(n.nodes);
		arm_Context.brush = new arm_data_BrushSlot(n);
		arm_Project.brushes.push(arm_Context.brush);
		imported.push(arm_Context.brush);
	}
	iron_App.notifyOnInit(function() {
		var _g = 0;
		while(_g < imported.length) {
			arm_Context.setBrush(imported[_g++]);
			arm_util_RenderUtil.makeBrushPreview();
		}
	});
	arm_ui_UISidebar.inst.hwnd1.redraws = 2;
	iron_data_Data.deleteBlob(path);
};
arm_io_ImportArm.makePink = function(abs) {
	arm_Log.error(arm_Strings.error2 + abs);
	var b = new haxe_io_Bytes(new ArrayBuffer(4));
	b.b[0] = 255;
	b.b[1] = 0;
	b.b[2] = 255;
	b.b[3] = 255;
	var pink = kha_Image.fromBytes(b,1,1);
	iron_data_Data.cachedImages.h[abs] = pink;
};
arm_io_ImportArm.initNodes = function(nodes) {
	var _g = 0;
	while(_g < nodes.length) {
		var node = nodes[_g];
		++_g;
		if(node.type == "TEX_IMAGE") {
			node.buttons[0].default_value = arm_App.getAssetIndex(node.buttons[0].data);
		}
	}
};
var arm_io_ImportAsset = function() { };
$hxClasses["arm.io.ImportAsset"] = arm_io_ImportAsset;
arm_io_ImportAsset.__name__ = "arm.io.ImportAsset";
arm_io_ImportAsset.run = function(path,dropX,dropY,showBox) {
	if(showBox == null) {
		showBox = true;
	}
	if(dropY == null) {
		dropY = -1.0;
	}
	if(dropX == null) {
		dropX = -1.0;
	}
	if(arm_sys_Path.isMesh(path)) {
		if(showBox) {
			arm_Project.importMeshBox(path);
		} else {
			arm_io_ImportMesh.run(path);
		}
		if(dropX > 0) {
			arm_ui_UIBox.clickToHide = false;
		}
	} else if(arm_sys_Path.isTexture(path)) {
		arm_io_ImportTexture.run(path);
		if(arm_ui_UINodes.inst.show && dropX > arm_ui_UINodes.inst.wx && dropX < arm_ui_UINodes.inst.wx + arm_ui_UINodes.inst.ww) {
			var assetIndex = 0;
			var _g = 0;
			var _g1 = arm_Project.assets.length;
			while(_g < _g1) {
				var i = _g++;
				if(arm_Project.assets[i].file == path) {
					assetIndex = i;
					break;
				}
			}
			arm_ui_UINodes.inst.acceptAssetDrag(assetIndex);
			arm_ui_UINodes.inst.getNodes().nodesDrag = false;
			arm_ui_UINodes.inst.hwnd.redraws = 2;
		}
	} else if(arm_sys_Path.isFont(path)) {
		arm_io_ImportFont.run(path);
	} else if(arm_sys_Path.isProject(path)) {
		arm_io_ImportArm.runProject(path);
	} else if(arm_sys_Path.isPlugin(path)) {
		arm_io_ImportPlugin.run(path);
	} else if(arm_sys_Path.isFolder(path)) {
		arm_io_ImportFolder.run(path);
	} else {
		arm_Log.error(arm_Strings.error1);
	}
};
var arm_io_ImportBlend = function() { };
$hxClasses["arm.io.ImportBlend"] = arm_io_ImportBlend;
arm_io_ImportBlend.__name__ = "arm.io.ImportBlend";
arm_io_ImportBlend.run = function(path) {
	iron_data_Data.getBlob(path,function(b) {
		var bl = new arm_format_BlendParser(b);
		if(bl.dna == null) {
			arm_Log.error(arm_Strings.error3);
			return;
		}
		var obs = bl.get("Object");
		if(obs == null || obs.length == 0) {
			arm_io_ImportMesh.makeMesh(null,path);
			return;
		}
		var first = true;
		var _g = 0;
		while(_g < obs.length) {
			var ob = obs[_g];
			++_g;
			if(ob.get("type") != 1) {
				continue;
			}
			var name = ob.get("id").get("name");
			name = name.substring(2,name.length);
			var m = ob.get("data",0,"Mesh");
			if(m == null) {
				continue;
			}
			var totpoly = m.get("totpoly");
			if(totpoly == 0) {
				continue;
			}
			var numtri = 0;
			var _g1 = 0;
			while(_g1 < totpoly) numtri += m.get("mpoly",_g1++).get("totloop") - 2;
			var inda = new Uint32Array(numtri * 3);
			var _g2 = 0;
			var _g3 = inda.length;
			while(_g2 < _g3) {
				var i = _g2++;
				inda[i] = i;
			}
			var posa32 = new Float32Array(numtri * 3 * 4);
			var posa = new Int16Array(numtri * 3 * 4);
			var nora = new Int16Array(numtri * 3 * 2);
			var hasuv = m.get("mloopuv") != null;
			var texa = hasuv ? new Int16Array(numtri * 3 * 2) : null;
			var hascol = arm_Context.parseVCols && m.get("mloopcol") != null;
			var cola = hascol ? new Int16Array(numtri * 3 * 3) : null;
			var tri = 0;
			var _this_x = 0.0;
			var _this_y = 0.0;
			var _this_z = 0.0;
			var _this_x1 = 0.0;
			var _this_y1 = 0.0;
			var _this_z1 = 0.0;
			var _this_x2 = 0.0;
			var _this_y2 = 0.0;
			var _this_z2 = 0.0;
			var _g4 = 0;
			while(_g4 < totpoly) {
				var poly = m.get("mpoly",_g4++);
				var loopstart = poly.get("loopstart");
				var totloop = poly.get("totloop");
				if(totloop == 3) {
					var v0 = m.get("mvert",m.get("mloop",loopstart).get("v"));
					var v1 = m.get("mvert",m.get("mloop",loopstart + 1).get("v"));
					var v2 = m.get("mvert",m.get("mloop",loopstart + 2).get("v"));
					var co0 = v0.get("co");
					var co1 = v1.get("co");
					var co2 = v2.get("co");
					var no0 = v0.get("no");
					var no1 = v1.get("no");
					var no2 = v2.get("no");
					_this_x = no0[0] / 32767;
					_this_y = no0[1] / 32767;
					_this_z = no0[2] / 32767;
					var n = Math.sqrt(_this_x * _this_x + _this_y * _this_y + _this_z * _this_z);
					if(n > 0.0) {
						var invN = 1.0 / n;
						_this_x *= invN;
						_this_y *= invN;
						_this_z *= invN;
					}
					_this_x1 = no1[0] / 32767;
					_this_y1 = no1[1] / 32767;
					_this_z1 = no1[2] / 32767;
					var n1 = Math.sqrt(_this_x1 * _this_x1 + _this_y1 * _this_y1 + _this_z1 * _this_z1);
					if(n1 > 0.0) {
						var invN1 = 1.0 / n1;
						_this_x1 *= invN1;
						_this_y1 *= invN1;
						_this_z1 *= invN1;
					}
					_this_x2 = no2[0] / 32767;
					_this_y2 = no2[1] / 32767;
					_this_z2 = no2[2] / 32767;
					var n2 = Math.sqrt(_this_x2 * _this_x2 + _this_y2 * _this_y2 + _this_z2 * _this_z2);
					if(n2 > 0.0) {
						var invN2 = 1.0 / n2;
						_this_x2 *= invN2;
						_this_y2 *= invN2;
						_this_z2 *= invN2;
					}
					posa32[tri * 9] = co0[0];
					posa32[tri * 9 + 1] = co0[1];
					posa32[tri * 9 + 2] = co0[2];
					posa32[tri * 9 + 3] = co1[0];
					posa32[tri * 9 + 4] = co1[1];
					posa32[tri * 9 + 5] = co1[2];
					posa32[tri * 9 + 6] = co2[0];
					posa32[tri * 9 + 7] = co2[1];
					posa32[tri * 9 + 8] = co2[2];
					posa[tri * 12 + 3] = _this_z * 32767 | 0;
					posa[tri * 12 + 7] = _this_z1 * 32767 | 0;
					posa[tri * 12 + 11] = _this_z2 * 32767 | 0;
					nora[tri * 6] = _this_x * 32767 | 0;
					nora[tri * 6 + 1] = _this_y * 32767 | 0;
					nora[tri * 6 + 2] = _this_x1 * 32767 | 0;
					nora[tri * 6 + 3] = _this_y1 * 32767 | 0;
					nora[tri * 6 + 4] = _this_x2 * 32767 | 0;
					nora[tri * 6 + 5] = _this_y2 * 32767 | 0;
					if(hasuv) {
						var uv0 = m.get("mloopuv",loopstart).get("uv");
						var uv1 = m.get("mloopuv",loopstart + 1).get("uv");
						var uv2 = m.get("mloopuv",loopstart + 2).get("uv");
						texa[tri * 6] = uv0[0] * 32767 | 0;
						texa[tri * 6 + 1] = (1.0 - uv0[1]) * 32767 | 0;
						texa[tri * 6 + 2] = uv1[0] * 32767 | 0;
						texa[tri * 6 + 3] = (1.0 - uv1[1]) * 32767 | 0;
						texa[tri * 6 + 4] = uv2[0] * 32767 | 0;
						texa[tri * 6 + 5] = (1.0 - uv2[1]) * 32767 | 0;
					}
					if(hascol) {
						var loop = m.get("mloopcol",loopstart);
						var col0r = loop.get("r");
						var col0g = loop.get("g");
						var col0b = loop.get("b");
						loop = m.get("mloopcol",loopstart + 1);
						var col1r = loop.get("r");
						var col1g = loop.get("g");
						var col1b = loop.get("b");
						loop = m.get("mloopcol",loopstart + 2);
						var col2r = loop.get("r");
						var col2g = loop.get("g");
						var col2b = loop.get("b");
						cola[tri * 9] = col0r * 128;
						cola[tri * 9 + 1] = col0g * 128;
						cola[tri * 9 + 2] = col0b * 128;
						cola[tri * 9 + 3] = col1r * 128;
						cola[tri * 9 + 4] = col1g * 128;
						cola[tri * 9 + 5] = col1b * 128;
						cola[tri * 9 + 6] = col2r * 128;
						cola[tri * 9 + 7] = col2g * 128;
						cola[tri * 9 + 8] = col2b * 128;
					}
					++tri;
				} else {
					var v01 = m.get("mvert",m.get("mloop",loopstart + totloop - 1).get("v"));
					var v11 = m.get("mvert",m.get("mloop",loopstart).get("v"));
					var co01 = v01.get("co");
					var co11 = v11.get("co");
					var no01 = v01.get("no");
					var no11 = v11.get("no");
					_this_x = no01[0] / 32767;
					_this_y = no01[1] / 32767;
					_this_z = no01[2] / 32767;
					var n3 = Math.sqrt(_this_x * _this_x + _this_y * _this_y + _this_z * _this_z);
					if(n3 > 0.0) {
						var invN3 = 1.0 / n3;
						_this_x *= invN3;
						_this_y *= invN3;
						_this_z *= invN3;
					}
					_this_x1 = no11[0] / 32767;
					_this_y1 = no11[1] / 32767;
					_this_z1 = no11[2] / 32767;
					var n4 = Math.sqrt(_this_x1 * _this_x1 + _this_y1 * _this_y1 + _this_z1 * _this_z1);
					if(n4 > 0.0) {
						var invN4 = 1.0 / n4;
						_this_x1 *= invN4;
						_this_y1 *= invN4;
						_this_z1 *= invN4;
					}
					var uv01 = null;
					var uv11 = null;
					var uv21 = null;
					if(hasuv) {
						uv01 = m.get("mloopuv",loopstart + totloop - 1).get("uv");
						uv11 = m.get("mloopuv",loopstart).get("uv");
					}
					var col0r1 = 0;
					var col0g1 = 0;
					var col0b1 = 0;
					var col1r1 = 0;
					var col1g1 = 0;
					var col1b1 = 0;
					var col2r1 = 0;
					var col2g1 = 0;
					var col2b1 = 0;
					if(hascol) {
						var loop1 = m.get("mloopcol",loopstart + totloop - 1);
						col0r1 = loop1.get("r");
						col0g1 = loop1.get("g");
						col0b1 = loop1.get("b");
						loop1 = m.get("mloopcol",loopstart);
						col1r1 = loop1.get("r");
						col1g1 = loop1.get("g");
						col1b1 = loop1.get("b");
					}
					var _g5 = 0;
					var _g6 = totloop - 2;
					while(_g5 < _g6) {
						var j = _g5++;
						var v21 = m.get("mvert",m.get("mloop",loopstart + j + 1).get("v"));
						var co21 = v21.get("co");
						var no21 = v21.get("no");
						_this_x2 = no21[0] / 32767;
						_this_y2 = no21[1] / 32767;
						_this_z2 = no21[2] / 32767;
						var n5 = Math.sqrt(_this_x2 * _this_x2 + _this_y2 * _this_y2 + _this_z2 * _this_z2);
						if(n5 > 0.0) {
							var invN5 = 1.0 / n5;
							_this_x2 *= invN5;
							_this_y2 *= invN5;
							_this_z2 *= invN5;
						}
						posa32[tri * 9] = co01[0];
						posa32[tri * 9 + 1] = co01[1];
						posa32[tri * 9 + 2] = co01[2];
						posa32[tri * 9 + 3] = co11[0];
						posa32[tri * 9 + 4] = co11[1];
						posa32[tri * 9 + 5] = co11[2];
						posa32[tri * 9 + 6] = co21[0];
						posa32[tri * 9 + 7] = co21[1];
						posa32[tri * 9 + 8] = co21[2];
						posa[tri * 12 + 3] = _this_z * 32767 | 0;
						posa[tri * 12 + 7] = _this_z1 * 32767 | 0;
						posa[tri * 12 + 11] = _this_z2 * 32767 | 0;
						nora[tri * 6] = _this_x * 32767 | 0;
						nora[tri * 6 + 1] = _this_y * 32767 | 0;
						nora[tri * 6 + 2] = _this_x1 * 32767 | 0;
						nora[tri * 6 + 3] = _this_y1 * 32767 | 0;
						nora[tri * 6 + 4] = _this_x2 * 32767 | 0;
						nora[tri * 6 + 5] = _this_y2 * 32767 | 0;
						co11 = co21;
						no11 = no21;
						_this_x1 = _this_x2;
						_this_y1 = _this_y2;
						_this_z1 = _this_z2;
						if(hasuv) {
							uv21 = m.get("mloopuv",loopstart + j + 1).get("uv");
							texa[tri * 6] = uv01[0] * 32767 | 0;
							texa[tri * 6 + 1] = (1.0 - uv01[1]) * 32767 | 0;
							texa[tri * 6 + 2] = uv11[0] * 32767 | 0;
							texa[tri * 6 + 3] = (1.0 - uv11[1]) * 32767 | 0;
							texa[tri * 6 + 4] = uv21[0] * 32767 | 0;
							texa[tri * 6 + 5] = (1.0 - uv21[1]) * 32767 | 0;
							uv11 = uv21;
						}
						if(hascol) {
							var loop2 = m.get("mloopcol",loopstart + j + 1);
							col2r1 = loop2.get("r");
							col2g1 = loop2.get("g");
							col2b1 = loop2.get("b");
							cola[tri * 9] = col0r1 * 128;
							cola[tri * 9 + 1] = col0g1 * 128;
							cola[tri * 9 + 2] = col0b1 * 128;
							cola[tri * 9 + 3] = col1r1 * 128;
							cola[tri * 9 + 4] = col1g1 * 128;
							cola[tri * 9 + 5] = col1b1 * 128;
							cola[tri * 9 + 6] = col2r1 * 128;
							cola[tri * 9 + 7] = col2g1 * 128;
							cola[tri * 9 + 8] = col2b1 * 128;
							col1r1 = col2r1;
							col1g1 = col2g1;
							col1b1 = col2b1;
						}
						++tri;
					}
				}
			}
			var obmat = ob.get("obmat",0,"float",16);
			var _this = new iron_math_Mat4(obmat[0],obmat[1],obmat[2],obmat[3],obmat[4],obmat[5],obmat[6],obmat[7],obmat[8],obmat[9],obmat[10],obmat[11],obmat[12],obmat[13],obmat[14],obmat[15]);
			var f = _this.self._01;
			_this.self._01 = _this.self._10;
			_this.self._10 = f;
			f = _this.self._02;
			_this.self._02 = _this.self._20;
			_this.self._20 = f;
			f = _this.self._03;
			_this.self._03 = _this.self._30;
			_this.self._30 = f;
			f = _this.self._12;
			_this.self._12 = _this.self._21;
			_this.self._21 = f;
			f = _this.self._13;
			_this.self._13 = _this.self._31;
			_this.self._31 = f;
			f = _this.self._23;
			_this.self._23 = _this.self._32;
			_this.self._32 = f;
			var v_x = 0.0;
			var v_y = 0.0;
			var v_z = 0.0;
			var _g7 = 0;
			var _g8 = posa32.length / 3 | 0;
			while(_g7 < _g8) {
				var i1 = _g7++;
				v_x = posa32[i1 * 3];
				v_y = posa32[i1 * 3 + 1];
				v_z = posa32[i1 * 3 + 2];
				var x = v_x;
				var y = v_y;
				var z = v_z;
				v_x = _this.self._00 * x + _this.self._10 * y + _this.self._20 * z + _this.self._30;
				v_y = _this.self._01 * x + _this.self._11 * y + _this.self._21 * z + _this.self._31;
				v_z = _this.self._02 * x + _this.self._12 * y + _this.self._22 * z + _this.self._32;
				posa32[i1 * 3] = v_x;
				posa32[i1 * 3 + 1] = v_y;
				posa32[i1 * 3 + 2] = v_z;
			}
			var a00 = _this.self._00;
			var a01 = _this.self._01;
			var a02 = _this.self._02;
			var a03 = _this.self._03;
			var a10 = _this.self._10;
			var a11 = _this.self._11;
			var a12 = _this.self._12;
			var a13 = _this.self._13;
			var a20 = _this.self._20;
			var a21 = _this.self._21;
			var a22 = _this.self._22;
			var a23 = _this.self._23;
			var a30 = _this.self._30;
			var a31 = _this.self._31;
			var a32 = _this.self._32;
			var a33 = _this.self._33;
			var b00 = a00 * a11 - a01 * a10;
			var b01 = a00 * a12 - a02 * a10;
			var b02 = a00 * a13 - a03 * a10;
			var b03 = a01 * a12 - a02 * a11;
			var b04 = a01 * a13 - a03 * a11;
			var b05 = a02 * a13 - a03 * a12;
			var b06 = a20 * a31 - a21 * a30;
			var b07 = a20 * a32 - a22 * a30;
			var b08 = a20 * a33 - a23 * a30;
			var b09 = a21 * a32 - a22 * a31;
			var b10 = a21 * a33 - a23 * a31;
			var b11 = a22 * a33 - a23 * a32;
			var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;
			if(det == 0.0) {
				_this.self._00 = 1.0;
				_this.self._01 = 0.0;
				_this.self._02 = 0.0;
				_this.self._03 = 0.0;
				_this.self._10 = 0.0;
				_this.self._11 = 1.0;
				_this.self._12 = 0.0;
				_this.self._13 = 0.0;
				_this.self._20 = 0.0;
				_this.self._21 = 0.0;
				_this.self._22 = 1.0;
				_this.self._23 = 0.0;
				_this.self._30 = 0.0;
				_this.self._31 = 0.0;
				_this.self._32 = 0.0;
				_this.self._33 = 1.0;
			} else {
				det = 1.0 / det;
				_this.self._00 = (a11 * b11 - a12 * b10 + a13 * b09) * det;
				_this.self._01 = (a02 * b10 - a01 * b11 - a03 * b09) * det;
				_this.self._02 = (a31 * b05 - a32 * b04 + a33 * b03) * det;
				_this.self._03 = (a22 * b04 - a21 * b05 - a23 * b03) * det;
				_this.self._10 = (a12 * b08 - a10 * b11 - a13 * b07) * det;
				_this.self._11 = (a00 * b11 - a02 * b08 + a03 * b07) * det;
				_this.self._12 = (a32 * b02 - a30 * b05 - a33 * b01) * det;
				_this.self._13 = (a20 * b05 - a22 * b02 + a23 * b01) * det;
				_this.self._20 = (a10 * b10 - a11 * b08 + a13 * b06) * det;
				_this.self._21 = (a01 * b08 - a00 * b10 - a03 * b06) * det;
				_this.self._22 = (a30 * b04 - a31 * b02 + a33 * b00) * det;
				_this.self._23 = (a21 * b02 - a20 * b04 - a23 * b00) * det;
				_this.self._30 = (a11 * b07 - a10 * b09 - a12 * b06) * det;
				_this.self._31 = (a00 * b09 - a01 * b07 + a02 * b06) * det;
				_this.self._32 = (a31 * b01 - a30 * b03 - a32 * b00) * det;
				_this.self._33 = (a20 * b03 - a21 * b01 + a22 * b00) * det;
			}
			var f1 = _this.self._01;
			_this.self._01 = _this.self._10;
			_this.self._10 = f1;
			f1 = _this.self._02;
			_this.self._02 = _this.self._20;
			_this.self._20 = f1;
			f1 = _this.self._12;
			_this.self._12 = _this.self._21;
			_this.self._21 = f1;
			var _g9 = 0;
			var _g10 = nora.length / 2 | 0;
			while(_g9 < _g10) {
				var i2 = _g9++;
				v_x = nora[i2 * 2] / 32767;
				v_y = nora[i2 * 2 + 1] / 32767;
				v_z = posa[i2 * 4 + 3] / 32767;
				var x1 = v_x;
				var y1 = v_y;
				var z1 = v_z;
				v_x = _this.self._00 * x1 + _this.self._10 * y1 + _this.self._20 * z1 + _this.self._30;
				v_y = _this.self._01 * x1 + _this.self._11 * y1 + _this.self._21 * z1 + _this.self._31;
				v_z = _this.self._02 * x1 + _this.self._12 * y1 + _this.self._22 * z1 + _this.self._32;
				var n6 = Math.sqrt(v_x * v_x + v_y * v_y + v_z * v_z);
				if(n6 > 0.0) {
					var invN6 = 1.0 / n6;
					v_x *= invN6;
					v_y *= invN6;
					v_z *= invN6;
				}
				nora[i2 * 2] = v_x * 32767 | 0;
				nora[i2 * 2 + 1] = v_y * 32767 | 0;
				posa[i2 * 4 + 3] = v_z * 32767 | 0;
			}
			var scalePos = 0.0;
			var _g11 = 0;
			var _g12 = posa32.length;
			while(_g11 < _g12) {
				var f2 = Math.abs(posa32[_g11++]);
				if(scalePos < f2) {
					scalePos = f2;
				}
			}
			var inv = 1 / scalePos;
			var _g13 = 0;
			var _g14 = posa32.length / 3 | 0;
			while(_g13 < _g14) {
				var i3 = _g13++;
				posa[i3 * 4] = posa32[i3 * 3] * 32767 * inv | 0;
				posa[i3 * 4 + 1] = posa32[i3 * 3 + 1] * 32767 * inv | 0;
				posa[i3 * 4 + 2] = posa32[i3 * 3 + 2] * 32767 * inv | 0;
			}
			var obj = { posa : posa, nora : nora, texa : texa, cola : cola, inda : inda, name : name, scalePos : scalePos, scaleTes : 1.0};
			if(first) {
				arm_io_ImportMesh.makeMesh(obj,path);
			} else {
				arm_io_ImportMesh.addMesh(obj);
			}
			first = false;
		}
		iron_data_Data.deleteBlob(path);
	});
};
arm_io_ImportBlend.runMaterial = function(path) {
	iron_data_Data.getBlob(path,function(b) {
		var bl = new arm_format_BlendParser(b);
		if(bl.dna == null) {
			arm_Log.error(arm_Strings.error3);
			return;
		}
		var mats = bl.get("Material");
		if(mats.length == 0) {
			arm_Log.error("Error: No materials found");
			return;
		}
		var imported = [];
		var _g = 0;
		while(_g < mats.length) {
			var mat = mats[_g];
			++_g;
			arm_Context.material = new arm_data_MaterialSlot(arm_Project.materials[0].data);
			arm_Project.materials.push(arm_Context.material);
			imported.push(arm_Context.material);
			var nodes = arm_Context.material.nodes;
			var canvas = arm_Context.material.canvas;
			canvas.name = mat.get("id").get("name").substr(2);
			var nout = null;
			var _g1 = 0;
			var _g2 = canvas.nodes;
			while(_g1 < _g2.length) {
				var n = _g2[_g1];
				++_g1;
				if(n.type == "OUTPUT_MATERIAL_PBR") {
					nout = n;
					break;
				}
			}
			var _g3 = 0;
			var _g4 = canvas.nodes;
			while(_g3 < _g4.length) {
				var n1 = _g4[_g3];
				++_g3;
				if(n1.name == "RGB") {
					nodes.removeNode(n1,canvas);
					break;
				}
			}
			var nodetree = mat.get("nodetree");
			var blnodes = nodetree.get("nodes");
			var bllinks = nodetree.get("links");
			var node = blnodes.get("first",0,"bNode");
			var last = blnodes.get("last",0,"bNode");
			while(node.get("idname") != "ShaderNodeBsdfPrincipled") {
				if(node.get("name") == last.get("name")) {
					break;
				}
				node = node.get("next");
			}
			if(node.get("idname") != "ShaderNodeBsdfPrincipled") {
				arm_Log.error("Error: No Principled BSDF node found");
				continue;
			}
			nout.name = node.get("name");
			nout.x = node.get("locx") + 400;
			nout.y = -node.get("locy") + 400;
			var node1 = blnodes.get("first",0,"bNode");
			while(true) {
				var search = node1.get("idname").substr(10).toLowerCase();
				var base = null;
				var _g5 = 0;
				var _g6 = arm_shader_NodesMaterial.list;
				while(_g5 < _g6.length) {
					var list = _g6[_g5];
					++_g5;
					var found = false;
					var _g7 = 0;
					while(_g7 < list.length) {
						var n2 = list[_g7];
						++_g7;
						if(search == StringTools.replace(n2.type,"_","").toLowerCase()) {
							base = n2;
							found = true;
							break;
						}
					}
					if(found) {
						break;
					}
				}
				if(base != null) {
					var n3 = arm_ui_UINodes.makeNode(base,nodes,canvas);
					n3.x = node1.get("locx") + 400;
					n3.y = -node1.get("locy") + 400;
					n3.name = node1.get("name");
					var sock = node1.get("inputs").get("first",0,"bNodeSocket");
					var pos = 0;
					while(pos < n3.inputs.length) {
						n3.inputs[pos].default_value = arm_io_ImportBlend.readBlendSocket(sock);
						var last1 = sock;
						sock = sock.get("next");
						if(last1.block == sock.block) {
							break;
						}
						++pos;
					}
					if(search == "teximage") {
						var file = node1.get("id",0,"Image").get("name").substr(2);
						file = arm_sys_Path.baseDir(path) + file;
						arm_io_ImportTexture.run(file);
						var ar = file.split(arm_sys_Path.sep);
						n3.buttons[0].default_value = arm_App.getAssetIndex(ar[ar.length - 1]);
					} else if(search == "valtorgb") {
						var ramp = node1.get("storage",0,"ColorBand");
						var tmp = ramp.get("ipotype") == 0 ? 0 : 1;
						n3.buttons[0].data = tmp;
						var elems = n3.buttons[0].default_value;
						var _g8 = 0;
						var _g9 = ramp.get("tot");
						while(_g8 < _g9) {
							var i = _g8++;
							if(i >= elems.length) {
								elems.push([1.0,1.0,1.0,1.0,0.0]);
							}
							var cbdata = ramp.get("data",i,"CBData");
							elems[i][0] = (cbdata.get("r") * 100 | 0) / 100;
							elems[i][1] = (cbdata.get("g") * 100 | 0) / 100;
							elems[i][2] = (cbdata.get("b") * 100 | 0) / 100;
							elems[i][3] = (cbdata.get("a") * 100 | 0) / 100;
							elems[i][4] = (cbdata.get("pos") * 100 | 0) / 100;
						}
					} else if(search == "mixrgb" || search == "math") {
						n3.buttons[0].default_value = node1.get("custom1");
						var tmp1 = node1.get("custom2");
						n3.buttons[1].default_value = tmp1 & 2;
					} else if(search == "mapping") {
						var storage = node1.get("storage",0,"TexMapping");
						n3.buttons[0].default_value = storage.get("loc");
						n3.buttons[1].default_value = storage.get("rot");
						n3.buttons[2].default_value = storage.get("size");
					}
					var sock1 = node1.get("outputs").get("first",0,"bNodeSocket");
					var pos1 = 0;
					while(pos1 < n3.outputs.length) {
						n3.outputs[pos1].default_value = arm_io_ImportBlend.readBlendSocket(sock1);
						var last2 = sock1;
						sock1 = sock1.get("next");
						if(last2.block == sock1.block) {
							break;
						}
						++pos1;
					}
					canvas.nodes.push(n3);
				}
				if(node1.get("name") == last.get("name")) {
					break;
				}
				node1 = node1.get("next");
			}
			var link = bllinks.get("first",0,"bNodeLink");
			while(true) {
				var fromnode = link.get("fromnode").get("name");
				var tonode = link.get("tonode").get("name");
				var fromsock = link.get("fromsock");
				var tosock = link.get("tosock");
				var from_id = -1;
				var to_id = -1;
				var _g10 = 0;
				var _g11 = canvas.nodes;
				while(_g10 < _g11.length) {
					var n4 = _g11[_g10];
					++_g10;
					if(n4.name == fromnode) {
						from_id = n4.id;
						break;
					}
				}
				var _g12 = 0;
				var _g13 = canvas.nodes;
				while(_g12 < _g13.length) {
					var n5 = _g13[_g12];
					++_g12;
					if(n5.name == tonode) {
						to_id = n5.id;
						break;
					}
				}
				if(from_id >= 0 && to_id >= 0) {
					var from_socket = 0;
					var sock2 = fromsock;
					while(true) {
						var last3 = sock2;
						sock2 = sock2.get("prev");
						if(last3.block == sock2.block) {
							break;
						}
						++from_socket;
					}
					var to_socket = 0;
					var sock3 = tosock;
					while(true) {
						var last4 = sock3;
						sock3 = sock3.get("prev");
						if(last4.block == sock3.block) {
							break;
						}
						++to_socket;
					}
					var valid = true;
					if(tonode == nout.name) {
						if(to_socket == 0) {
							to_socket = 0;
						} else if(to_socket == 18) {
							to_socket = 1;
						} else if(to_socket == 7) {
							to_socket = 3;
						} else if(to_socket == 4) {
							to_socket = 4;
						} else if(to_socket == 19) {
							to_socket = 5;
						} else if(to_socket == 17) {
							to_socket = 6;
						} else if(to_socket == 1) {
							to_socket = 8;
						} else {
							valid = false;
						}
					}
					if(valid) {
						var raw = { id : nodes.getLinkId(canvas.links), from_id : from_id, from_socket : from_socket, to_id : to_id, to_socket : to_socket};
						canvas.links.push(raw);
					}
				}
				var last5 = link;
				link = link.get("next");
				if(last5.block == link.block) {
					break;
				}
			}
		}
		iron_App.notifyOnInit(function() {
			var _g = 0;
			while(_g < imported.length) {
				arm_Context.setMaterial(imported[_g++]);
				arm_node_MakeMaterial.parsePaintMaterial();
				arm_util_RenderUtil.makeMaterialPreview();
			}
		});
		arm_ui_UISidebar.inst.hwnd1.redraws = 2;
		iron_data_Data.deleteBlob(path);
	});
};
arm_io_ImportBlend.readBlendSocket = function(sock) {
	var idname = sock.get("idname");
	if(idname.startsWith("NodeSocketVector")) {
		var v = sock.get("default_value",0,"bNodeSocketValueVector").get("value");
		v[0] = (v[0] * 100 | 0) / 100;
		v[1] = (v[1] * 100 | 0) / 100;
		v[2] = (v[2] * 100 | 0) / 100;
		return v;
	} else if(idname.startsWith("NodeSocketColor")) {
		var v = sock.get("default_value",0,"bNodeSocketValueRGBA").get("value");
		v[0] = (v[0] * 100 | 0) / 100;
		v[1] = (v[1] * 100 | 0) / 100;
		v[2] = (v[2] * 100 | 0) / 100;
		v[3] = (v[3] * 100 | 0) / 100;
		return v;
	} else if(idname.startsWith("NodeSocketFloat")) {
		var v = sock.get("default_value",0,"bNodeSocketValueFloat").get("value");
		v = (v * 100 | 0) / 100;
		return v;
	} else if(idname.startsWith("NodeSocketInt")) {
		return sock.get("default_value",0,"bNodeSocketValueInt").get("value");
	} else if(idname.startsWith("NodeSocketBoolean")) {
		return sock.get("default_value",0,"bNodeSocketValueBoolean").get("value");
	} else if(idname.startsWith("NodeSocketString")) {
		return sock.get("default_value",0,"bNodeSocketValueString").get("value");
	}
	return null;
};
var arm_io_ImportEnvmap = function() { };
$hxClasses["arm.io.ImportEnvmap"] = arm_io_ImportEnvmap;
arm_io_ImportEnvmap.__name__ = "arm.io.ImportEnvmap";
arm_io_ImportEnvmap.run = function(path,image) {
	if(arm_io_ImportEnvmap.pipeline == null) {
		arm_io_ImportEnvmap.pipeline = new kha_graphics4_PipelineState();
		arm_io_ImportEnvmap.pipeline.vertexShader = Reflect.field(kha_Shaders,"pass_vert");
		arm_io_ImportEnvmap.pipeline.fragmentShader = Reflect.field(kha_Shaders,"prefilter_envmap_frag");
		var vs = new kha_graphics4_VertexStructure();
		vs.add("pos",1);
		arm_io_ImportEnvmap.pipeline.inputLayout = [vs];
		arm_io_ImportEnvmap.pipeline.colorAttachmentCount = 1;
		arm_io_ImportEnvmap.pipeline.colorAttachments[0] = 2;
		arm_io_ImportEnvmap.pipeline.compile();
		arm_io_ImportEnvmap.paramsLocation = arm_io_ImportEnvmap.pipeline.getConstantLocation("params");
		arm_io_ImportEnvmap.radianceLocation = arm_io_ImportEnvmap.pipeline.getTextureUnit("radiance");
		arm_io_ImportEnvmap.radiance = kha_Image.createRenderTarget(1024,512,2);
		arm_io_ImportEnvmap.mips = [];
		var w = 512;
		var _g = 0;
		while(_g < 10) {
			++_g;
			arm_io_ImportEnvmap.mips.push(kha_Image.createRenderTarget(w,w > 1 ? w / 2 | 0 : 1,2));
			w = w / 2 | 0;
		}
		if(iron_data_ConstData.screenAlignedVB == null) {
			iron_data_ConstData.createScreenAlignedData();
		}
	}
	arm_io_ImportEnvmap.radiance.get_g2().begin(false);
	arm_io_ImportEnvmap.radiance.get_g2().set_pipeline(arm_Layers.pipeCopy128);
	arm_io_ImportEnvmap.radiance.get_g2().drawScaledImage(image,0,0,1024,512);
	arm_io_ImportEnvmap.radiance.get_g2().set_pipeline(null);
	arm_io_ImportEnvmap.radiance.get_g2().end();
	var radiancePixels = arm_io_ImportEnvmap.radiance.getPixels();
	if(arm_io_ImportEnvmap.radianceCpu != null) {
		arm_io_ImportEnvmap.radianceCpu.unload();
	}
	arm_io_ImportEnvmap.radianceCpu = kha_Image.fromBytes(radiancePixels,arm_io_ImportEnvmap.radiance.get_width(),arm_io_ImportEnvmap.radiance.get_height(),2,1);
	if(arm_io_ImportEnvmap.mipsCpu != null) {
		var _g = 0;
		var _g1 = arm_io_ImportEnvmap.mipsCpu;
		while(_g < _g1.length) _g1[_g++].unload();
	}
	arm_io_ImportEnvmap.mipsCpu = [];
	var _g = 0;
	var _g1 = arm_io_ImportEnvmap.mips.length;
	while(_g < _g1) {
		var i = _g++;
		arm_io_ImportEnvmap.getRadianceMip(arm_io_ImportEnvmap.mips[i],i,arm_io_ImportEnvmap.radiance);
		arm_io_ImportEnvmap.mipsCpu.push(kha_Image.fromBytes(arm_io_ImportEnvmap.mips[i].getPixels(),arm_io_ImportEnvmap.mips[i].get_width(),arm_io_ImportEnvmap.mips[i].get_height(),2,1));
	}
	arm_io_ImportEnvmap.radianceCpu.setMipmaps(arm_io_ImportEnvmap.mipsCpu);
	var tmp = arm_io_ImportEnvmap.radiance.get_width();
	var tmp1 = arm_io_ImportEnvmap.radiance.get_height();
	iron_Scene.active.world.probe.irradiance = arm_io_ImportEnvmap.getSphericalHarmonics(radiancePixels,tmp,tmp1);
	iron_Scene.active.world.probe.raw.strength = 1.0;
	iron_Scene.active.world.probe.raw.radiance_mipmaps = arm_io_ImportEnvmap.mipsCpu.length - 2;
	iron_Scene.active.world.envmap = image;
	iron_Scene.active.world.raw.envmap = path;
	iron_Scene.active.world.probe.radiance = arm_io_ImportEnvmap.radianceCpu;
	iron_Scene.active.world.probe.radianceMipmaps = arm_io_ImportEnvmap.mipsCpu;
	arm_Context.savedEnvmap = image;
	arm_Context.showEnvmapHandle.selected = arm_Context.showEnvmap = true;
	if(arm_Context.showEnvmapBlur) {
		iron_Scene.active.world.envmap = iron_Scene.active.world.probe.radianceMipmaps[0];
	}
	arm_Context.ddirty = 2;
};
arm_io_ImportEnvmap.getRadianceMip = function(mip,level,radiance) {
	mip.get_g4().begin();
	mip.get_g4().setVertexBuffer(iron_data_ConstData.screenAlignedVB);
	mip.get_g4().setIndexBuffer(iron_data_ConstData.screenAlignedIB);
	mip.get_g4().setPipeline(arm_io_ImportEnvmap.pipeline);
	arm_io_ImportEnvmap.params.x = 0.1 + level / 8;
	mip.get_g4().setFloat4(arm_io_ImportEnvmap.paramsLocation,arm_io_ImportEnvmap.params.x,arm_io_ImportEnvmap.params.y,arm_io_ImportEnvmap.params.z,arm_io_ImportEnvmap.params.w);
	mip.get_g4().setTexture(arm_io_ImportEnvmap.radianceLocation,radiance);
	mip.get_g4().drawIndexedVertices();
	mip.get_g4().end();
};
arm_io_ImportEnvmap.reverseEquirect = function(x,y) {
	var theta = x * Math.PI * 2 - Math.PI;
	var phi = y * Math.PI;
	var _this = arm_io_ImportEnvmap.n;
	var y = Math.sin(phi) * Math.cos(theta);
	var z = -(Math.sin(phi) * Math.sin(theta));
	_this.x = -Math.cos(phi);
	_this.y = y;
	_this.z = z;
	_this.w = 1.0;
	return _this;
};
arm_io_ImportEnvmap.getSphericalHarmonics = function(source,sourceWidth,sourceHeight) {
	var sh = new Float32Array(28);
	var accum = 0.0;
	var _g = 0;
	while(_g < sourceWidth) {
		var x = _g++;
		var _g1 = 0;
		while(_g1 < sourceHeight) {
			var y = _g1++;
			arm_io_ImportEnvmap.n = arm_io_ImportEnvmap.reverseEquirect(x / sourceWidth,y / sourceHeight);
			var _g2 = 0;
			while(_g2 < 3) {
				var i = _g2++;
				var value = source.getFloat((x + y * sourceWidth) * 16 + i * 4);
				value = Math.pow(value,0.45454545454545453);
				sh[i] += value * 0.23529411764705882;
				sh[3 + i] += value * 0.47058823529411764 * arm_io_ImportEnvmap.n.x;
				sh[6 + i] += value * 0.47058823529411764 * arm_io_ImportEnvmap.n.y;
				sh[9 + i] += value * 0.47058823529411764 * arm_io_ImportEnvmap.n.z;
				sh[12 + i] += value * 0.88235294117647056 * arm_io_ImportEnvmap.n.x * arm_io_ImportEnvmap.n.z;
				sh[15 + i] += value * 0.88235294117647056 * arm_io_ImportEnvmap.n.z * arm_io_ImportEnvmap.n.y;
				sh[18 + i] += value * 0.88235294117647056 * arm_io_ImportEnvmap.n.y * arm_io_ImportEnvmap.n.x;
				sh[21 + i] += value * 0.073529411764705885 * (3.0 * arm_io_ImportEnvmap.n.z * arm_io_ImportEnvmap.n.z - 1.0);
				sh[24 + i] += value * 0.22058823529411764 * (arm_io_ImportEnvmap.n.x * arm_io_ImportEnvmap.n.x - arm_io_ImportEnvmap.n.y * arm_io_ImportEnvmap.n.y);
				accum += 1.0;
			}
		}
	}
	var _g = 0;
	var _g1 = sh.length;
	while(_g < _g1) sh[_g++] /= accum / 16;
	return sh;
};
var arm_io_ImportFbx = function() { };
$hxClasses["arm.io.ImportFbx"] = arm_io_ImportFbx;
arm_io_ImportFbx.__name__ = "arm.io.ImportFbx";
arm_io_ImportFbx.run = function(path) {
	iron_data_Data.getBlob(path,function(b) {
		arm_format_FbxParser.parseTransform = arm_Context.parseTransform;
		arm_format_FbxParser.parseVCols = arm_Context.parseVCols;
		var obj = new arm_format_FbxParser(b);
		arm_io_ImportMesh.makeMesh(obj,path);
		while(obj.next()) arm_io_ImportMesh.addMesh(obj);
		iron_data_Data.deleteBlob(path);
	});
};
var arm_io_ImportFolder = function() { };
$hxClasses["arm.io.ImportFolder"] = arm_io_ImportFolder;
arm_io_ImportFolder.__name__ = "arm.io.ImportFolder";
arm_io_ImportFolder.run = function(path) {
	var files = arm_sys_File.readDirectory(path);
	var mapbase = "";
	var mapopac = "";
	var mapnor = "";
	var mapocc = "";
	var maprough = "";
	var mapmet = "";
	var mapheight = "";
	var _g = 0;
	while(_g < files.length) {
		var f = files[_g];
		++_g;
		if(!arm_sys_Path.isTexture(f)) {
			continue;
		}
		var base = HxOverrides.substr(f,0,f.lastIndexOf(".")).toLowerCase();
		var valid = false;
		if(mapbase == "" && arm_sys_Path.checkExt(base,arm_sys_Path.baseColorExt)) {
			mapbase = f;
			valid = true;
		}
		if(mapopac == "" && arm_sys_Path.checkExt(base,arm_sys_Path.opacityExt)) {
			mapopac = f;
			valid = true;
		}
		if(mapnor == "" && arm_sys_Path.checkExt(base,arm_sys_Path.normalMapExt)) {
			mapnor = f;
			valid = true;
		}
		if(mapocc == "" && arm_sys_Path.checkExt(base,arm_sys_Path.occlusionExt)) {
			mapocc = f;
			valid = true;
		}
		if(maprough == "" && arm_sys_Path.checkExt(base,arm_sys_Path.roughnessExt)) {
			maprough = f;
			valid = true;
		}
		if(mapmet == "" && arm_sys_Path.checkExt(base,arm_sys_Path.metallicExt)) {
			mapmet = f;
			valid = true;
		}
		if(mapheight == "" && arm_sys_Path.checkExt(base,arm_sys_Path.displacementExt)) {
			mapheight = f;
			valid = true;
		}
		if(valid) {
			arm_io_ImportTexture.run(path + arm_sys_Path.sep + f);
		}
	}
	var isScene = arm_ui_UIHeader.inst.worktab.position == 3;
	if(isScene) {
		arm_util_MaterialUtil.removeMaterialCache();
		iron_data_Data.getMaterial("Scene","Material2",function(md) {
			arm_Context.materialScene = new arm_data_MaterialSlot(md);
			arm_Project.materialsScene.push(arm_Context.materialScene);
		});
	} else {
		arm_Context.material = new arm_data_MaterialSlot(arm_Project.materials[0].data);
		arm_Project.materials.push(arm_Context.material);
	}
	var nodes = isScene ? arm_Context.materialScene.nodes : arm_Context.material.nodes;
	var canvas = isScene ? arm_Context.materialScene.canvas : arm_Context.material.canvas;
	var dirs = path.split(arm_sys_Path.sep);
	canvas.name = dirs[dirs.length - 1];
	var nout = null;
	var _g = 0;
	var _g1 = canvas.nodes;
	while(_g < _g1.length) {
		var n = _g1[_g];
		++_g;
		if(n.type == "OUTPUT_MATERIAL_PBR") {
			nout = n;
			break;
		}
	}
	var _g = 0;
	var _g1 = canvas.nodes;
	while(_g < _g1.length) {
		var n = _g1[_g];
		++_g;
		if(n.name == "RGB") {
			nodes.removeNode(n,canvas);
			break;
		}
	}
	var pos = 0;
	if(mapbase != "") {
		arm_io_ImportFolder.placeImageNode(nodes,canvas,mapbase,100,nout.id,0);
		pos = 1;
	}
	if(mapopac != "") {
		arm_io_ImportFolder.placeImageNode(nodes,canvas,mapopac,100 + 164 * pos,nout.id,1);
		++pos;
	}
	if(mapocc != "") {
		arm_io_ImportFolder.placeImageNode(nodes,canvas,mapocc,100 + 164 * pos,nout.id,2);
		++pos;
	}
	if(maprough != "") {
		arm_io_ImportFolder.placeImageNode(nodes,canvas,maprough,100 + 164 * pos,nout.id,3);
		++pos;
	}
	if(mapmet != "") {
		arm_io_ImportFolder.placeImageNode(nodes,canvas,mapmet,100 + 164 * pos,nout.id,4);
		++pos;
	}
	if(mapnor != "") {
		arm_io_ImportFolder.placeImageNode(nodes,canvas,mapnor,100 + 164 * pos,nout.id,5);
		++pos;
	}
	if(mapheight != "") {
		arm_io_ImportFolder.placeImageNode(nodes,canvas,mapheight,100 + 164 * pos,nout.id,7);
		++pos;
	}
	arm_node_MakeMaterial.parsePaintMaterial();
	arm_util_RenderUtil.makeMaterialPreview();
	arm_ui_UISidebar.inst.hwnd1.redraws = 2;
};
arm_io_ImportFolder.placeImageNode = function(nodes,canvas,asset,ny,to_id,to_socket) {
	var n = arm_shader_NodesMaterial.createNode("TEX_IMAGE");
	n.buttons[0].default_value = arm_App.getAssetIndex(asset);
	n.x = 72;
	n.y = ny;
	var l = { id : nodes.getLinkId(canvas.links), from_id : n.id, from_socket : 0, to_id : to_id, to_socket : to_socket};
	canvas.links.push(l);
};
var arm_io_ImportFont = function() { };
$hxClasses["arm.io.ImportFont"] = arm_io_ImportFont;
arm_io_ImportFont.__name__ = "arm.io.ImportFont";
arm_io_ImportFont.run = function(path) {
	var _g = 0;
	var _g1 = arm_Project.fonts;
	while(_g < _g1.length) if(_g1[_g++].file == path) {
		arm_Log.info(arm_Strings.info0);
		return;
	}
	iron_data_Data.getFont(path,function(font) {
		var fn = font.getFontNames();
		var fontSlots = [];
		var _g = 0;
		var _g1 = fn.length;
		while(_g < _g1) {
			var i = _g++;
			var ar = path.split(arm_sys_Path.sep);
			var name = fn[i] != null ? fn[i] : ar[ar.length - 1];
			var f = font.clone();
			f.setFontIndex(i);
			fontSlots.push(new arm_data_FontSlot(name,f,path));
		}
		iron_App.notifyOnInit(function() {
			var _g = 0;
			while(_g < fontSlots.length) {
				var f = fontSlots[_g];
				++_g;
				arm_Context.font = f;
				arm_Project.fonts.push(f);
				arm_util_RenderUtil.makeFontPreview();
			}
		});
		arm_ui_UISidebar.inst.hwnd2.redraws = 2;
	});
};
var arm_io_ImportKeymap = function() { };
$hxClasses["arm.io.ImportKeymap"] = arm_io_ImportKeymap;
arm_io_ImportKeymap.__name__ = "arm.io.ImportKeymap";
arm_io_ImportKeymap.run = function(path) {
	if(!arm_sys_Path.isJson(path)) {
		arm_Log.error(arm_Strings.error1);
		return;
	}
	var filename = HxOverrides.substr(path,path.lastIndexOf(arm_sys_Path.sep) + 1,null);
	arm_sys_File.copy(path,arm_sys_Path.data() + arm_sys_Path.sep + "keymap_presets" + arm_sys_Path.sep + filename);
	arm_ui_BoxPreferences.fetchKeymaps();
	arm_ui_BoxPreferences.presetHandle.position = arm_ui_BoxPreferences.getPresetIndex();
	arm_Log.info("Keymap '" + filename + "' imported.");
};
var arm_io_ImportMesh = function() { };
$hxClasses["arm.io.ImportMesh"] = arm_io_ImportMesh;
arm_io_ImportMesh.__name__ = "arm.io.ImportMesh";
arm_io_ImportMesh.run = function(path,_clearLayers,_replaceExisting) {
	if(_replaceExisting == null) {
		_replaceExisting = true;
	}
	if(_clearLayers == null) {
		_clearLayers = true;
	}
	if(!arm_sys_Path.isMesh(path)) {
		arm_Log.error(arm_Strings.error1);
		return;
	}
	arm_io_ImportMesh.clearLayers = _clearLayers;
	arm_io_ImportMesh.replaceExisting = _replaceExisting;
	arm_Context.layerFilter = 0;
	var p = path.toLowerCase();
	if(StringTools.endsWith(p,".obj")) {
		arm_io_ImportObj.run(path);
	} else if(StringTools.endsWith(p,".fbx")) {
		arm_io_ImportFbx.run(path);
	} else if(StringTools.endsWith(p,".blend")) {
		arm_io_ImportBlend.run(path);
	} else {
		arm_sys_Path.meshImporters.h[HxOverrides.substr(path,path.lastIndexOf(".") + 1,null)](path,function(mesh) {
			arm_io_ImportMesh.makeMesh(mesh,path);
		});
	}
	if(arm_Context.mergedObject != null) {
		arm_Context.mergedObject.remove();
		iron_data_Data.deleteMesh(arm_Context.mergedObject.data.handle);
		arm_Context.mergedObject = null;
	}
	arm_Context.selectPaintObject(arm_Context.mainObject());
	if(arm_Project.paintObjects.length > 1) {
		arm_Project.paintObjects.sort(function(a,b) {
			if(a.name < b.name) {
				return -1;
			} else if(a.name > b.name) {
				return 1;
			}
			return 0;
		});
		if(arm_Context.mergedObject == null) {
			arm_util_MeshUtil.mergeMesh();
		}
		arm_Context.paintObject.skip_context = "paint";
		arm_Context.mergedObject.visible = true;
	}
	arm_Project.meshAssets = [path];
	if(arm_io_ImportMesh.replaceExisting) {
		arm_util_ViewportUtil.scaleToBounds();
	}
	if(arm_Context.paintObject.name == "") {
		arm_Context.paintObject.name = "Object";
	}
	arm_node_MakeMaterial.parsePaintMaterial();
	arm_node_MakeMaterial.parseMeshMaterial();
	arm_ui_UIView2D.inst.hwnd.redraws = 2;
};
arm_io_ImportMesh.makeMesh = function(mesh,path) {
	if(mesh == null || mesh.posa == null || mesh.nora == null || mesh.inda == null || mesh.posa.length == 0) {
		arm_Log.error(arm_Strings.error3);
		return;
	}
	var raw = null;
	if(arm_ui_UIHeader.inst.worktab.position == 3) {
		raw = arm_io_ImportMesh.rawMesh(mesh);
		if(mesh.texa != null) {
			raw.vertex_arrays.push({ values : mesh.texa, attrib : "tex", data : "short2norm"});
		}
	} else {
		raw = arm_io_ImportMesh.rawMesh(mesh);
		if(mesh.texa == null) {
			arm_io_ImportMesh.equirectUnwrap(mesh);
		}
		raw.vertex_arrays.push({ values : mesh.texa, attrib : "tex", data : "short2norm"});
		if(mesh.cola != null) {
			raw.vertex_arrays.push({ values : mesh.cola, attrib : "col", data : "short4norm", padding : 1});
		}
	}
	new iron_data_MeshData(raw,function(md) {
		if(arm_io_ImportMesh.replaceExisting) {
			arm_Context.paintObject = arm_Context.mainObject();
			arm_Context.selectPaintObject(arm_Context.mainObject());
			var _g = 0;
			var _g1 = arm_Project.paintObjects.length;
			while(_g < _g1) {
				var p = arm_Project.paintObjects[_g++];
				if(p == arm_Context.paintObject) {
					continue;
				}
				iron_data_Data.deleteMesh(p.data.handle);
				p.remove();
			}
			var handle = arm_Context.paintObject.data.handle;
			if(handle != "SceneSphere" && handle != "ScenePlane") {
				iron_data_Data.deleteMesh(handle);
			}
			if(arm_io_ImportMesh.clearLayers) {
				while(arm_Project.layers.length > 0) arm_Project.layers.pop().unload();
				arm_Layers.newLayer(false);
				iron_App.notifyOnInit(arm_Layers.initLayers);
				arm_History.reset();
			}
			arm_Context.paintObject.setData(md);
			arm_Context.paintObject.name = mesh.name;
			var g = arm_Context.paintObject.data.geom;
			var posbuf = g.vertexBufferMap.h["pos"];
			if(posbuf != null) {
				posbuf.delete();
				var _this = g.vertexBufferMap;
				if(Object.prototype.hasOwnProperty.call(_this.h,"pos")) {
					delete(_this.h["pos"]);
				}
			}
			arm_Project.paintObjects = [arm_Context.paintObject];
		} else {
			var mats = new Array(1);
			mats[0] = arm_Context.materialScene.data;
			var object = iron_Scene.active.addMeshObject(md,mats,iron_Scene.active.getChild("Scene"));
			var ar = path.split(arm_sys_Path.sep);
			var s = ar[ar.length - 1];
			object.name = s.substring(0,s.length - 4);
			arm_Context.selectObject(object);
		}
		md.handle = raw.name;
		iron_data_Data.cachedMeshes.h[md.handle] = md;
		arm_Context.ddirty = 4;
		arm_ui_UISidebar.inst.hwnd0.redraws = 2;
		arm_ui_UISidebar.inst.hwnd1.redraws = 2;
		arm_ui_UISidebar.inst.hwnd2.redraws = 2;
		arm_util_UVUtil.uvmapCached = false;
		arm_util_UVUtil.trianglemapCached = false;
	});
};
arm_io_ImportMesh.addMesh = function(mesh) {
	if(mesh.texa == null) {
		arm_io_ImportMesh.equirectUnwrap(mesh);
	}
	var raw = arm_io_ImportMesh.rawMesh(mesh);
	raw.vertex_arrays.push({ values : mesh.texa, attrib : "tex", data : "short2norm"});
	new iron_data_MeshData(raw,function(md) {
		var object = iron_Scene.active.addMeshObject(md,arm_Context.paintObject.materials,arm_Context.paintObject);
		object.name = mesh.name;
		object.skip_context = "paint";
		arm_Project.paintObjects.push(object);
		md.handle = raw.name;
		iron_data_Data.cachedMeshes.h[md.handle] = md;
		arm_Context.ddirty = 4;
		arm_ui_UISidebar.inst.hwnd0.redraws = 2;
		arm_util_UVUtil.uvmapCached = false;
		arm_util_UVUtil.trianglemapCached = false;
	});
};
arm_io_ImportMesh.equirectUnwrap = function(mesh) {
	arm_Log.error(arm_Strings.error4);
	var verts = mesh.posa.length / 4 | 0;
	mesh.texa = new Int16Array(verts * 2);
	var _this_x = 0.0;
	var _this_y = 0.0;
	var _this_z = 0.0;
	var _g = 0;
	while(_g < verts) {
		var i = _g++;
		var x = mesh.posa[i * 4] / 32767;
		var y = mesh.posa[i * 4 + 1] / 32767;
		var z = mesh.posa[i * 4 + 2] / 32767;
		_this_x = x;
		_this_y = y;
		_this_z = z;
		var n = Math.sqrt(x * x + y * y + z * z);
		if(n > 0.0) {
			var invN = 1.0 / n;
			_this_x = x * invN;
			_this_y = y * invN;
			_this_z = z * invN;
		}
		mesh.texa[i * 2] = (Math.atan2(-_this_z,_this_x) + Math.PI) / (Math.PI * 2) * 32767 | 0;
		mesh.texa[i * 2 + 1] = Math.acos(_this_y) / Math.PI * 32767 | 0;
	}
};
arm_io_ImportMesh.rawMesh = function(mesh) {
	return { name : mesh.name, vertex_arrays : [{ values : mesh.posa, attrib : "pos", data : "short4norm"},{ values : mesh.nora, attrib : "nor", data : "short2norm"}], index_arrays : [{ values : mesh.inda, material : 0}], scale_pos : mesh.scalePos, scale_tex : mesh.scaleTex};
};
var arm_io_ImportObj = function() { };
$hxClasses["arm.io.ImportObj"] = arm_io_ImportObj;
arm_io_ImportObj.__name__ = "arm.io.ImportObj";
arm_io_ImportObj.run = function(path) {
	var i = arm_Context.splitBy;
	var isUdim = i == 3;
	arm_format_ObjParser.splitCode = i == 0 || isUdim ? 111 : i == 1 ? 103 : 117;
	iron_data_Data.getBlob(path,function(b) {
		if(isUdim) {
			var obj = new arm_format_ObjParser(b,0,isUdim);
			var name = obj.name;
			var _g = 0;
			var _g1 = obj.udims.length;
			while(_g < _g1) {
				var i = _g++;
				obj.name = name + "." + (1000 + (i / obj.udimsU | 0) * 10 + i % obj.udimsU + 1);
				obj.inda = obj.udims[i];
				if(i == 0) {
					arm_io_ImportMesh.makeMesh(obj,path);
				} else {
					arm_io_ImportMesh.addMesh(obj);
				}
			}
		} else {
			var parts = [];
			var obj = new arm_format_ObjParser(b);
			parts.push(obj);
			while(obj.hasNext) {
				obj = new arm_format_ObjParser(b,obj.pos);
				parts.push(obj);
			}
			if(arm_Context.splitBy == 2) {
				var posa0;
				var posa1;
				var nora0;
				var nora1;
				var texa0;
				var texa1;
				var inda0;
				var inda1;
				var _g = 0;
				var _g1 = parts.length;
				while(_g < _g1) {
					var i = _g++;
					var j = i + 1;
					while(j < parts.length) if(parts[i].name == parts[j].name) {
						posa0 = parts[i].posa;
						posa1 = parts[j].posa;
						nora0 = parts[i].nora;
						nora1 = parts[j].nora;
						texa0 = parts[i].texa != null ? parts[i].texa : null;
						texa1 = parts[j].texa != null ? parts[j].texa : null;
						inda0 = parts[i].inda;
						inda1 = parts[j].inda;
						var posa = new Int16Array(posa0.length + posa1.length);
						var nora = new Int16Array(nora0.length + nora1.length);
						var texa = texa0 != null && texa1 != null ? new Int16Array(texa0.length + texa1.length) : null;
						var inda = new Uint32Array(inda0.length + inda1.length);
						var voff = posa0.length / 4 | 0;
						posa.set(posa0);
						posa.set(posa1, posa0.length);
						nora.set(nora0);
						nora.set(nora1, nora0.length);
						if(texa != null) {
							texa.set(texa0);
							texa.set(texa1, texa0.length);
						}
						inda.set(inda0);
						var _g2 = 0;
						var _g3 = inda1.length;
						while(_g2 < _g3) {
							var k = _g2++;
							inda[k + inda0.length] = inda1[k] + voff;
						}
						parts[i].posa = posa;
						parts[i].nora = nora;
						parts[i].texa = texa;
						parts[i].inda = inda;
						parts.splice(j,1);
					} else {
						++j;
					}
				}
			}
			arm_io_ImportMesh.makeMesh(parts[0],path);
			var _g = 1;
			var _g1 = parts.length;
			while(_g < _g1) arm_io_ImportMesh.addMesh(parts[_g++]);
		}
		iron_data_Data.deleteBlob(path);
	});
};
var arm_io_ImportPlugin = function() { };
$hxClasses["arm.io.ImportPlugin"] = arm_io_ImportPlugin;
arm_io_ImportPlugin.__name__ = "arm.io.ImportPlugin";
arm_io_ImportPlugin.run = function(path) {
	if(!arm_sys_Path.isPlugin(path)) {
		arm_Log.error(arm_Strings.error1);
		return;
	}
	var filename = HxOverrides.substr(path,path.lastIndexOf(arm_sys_Path.sep) + 1,null);
	arm_sys_File.copy(path,arm_sys_Path.data() + arm_sys_Path.sep + "plugins" + arm_sys_Path.sep + filename);
	arm_ui_BoxPreferences.filesPlugin = null;
	arm_Log.info("Plugin '" + filename + "' imported.");
};
var arm_io_ImportTexture = function() { };
$hxClasses["arm.io.ImportTexture"] = arm_io_ImportTexture;
arm_io_ImportTexture.__name__ = "arm.io.ImportTexture";
arm_io_ImportTexture.run = function(path) {
	if(!arm_sys_Path.isTexture(path)) {
		arm_Log.error(arm_Strings.error1);
		return;
	}
	var _g = 0;
	var _g1 = arm_Project.assets;
	while(_g < _g1.length) if(_g1[_g++].file == path) {
		if(StringTools.endsWith(path.toLowerCase(),".hdr")) {
			iron_data_Data.getImage(path,function(image) {
				arm_App.notifyOnNextFrame(function() {
					arm_io_ImportEnvmap.run(path,image);
				});
			});
		}
		arm_Log.info(arm_Strings.info0);
		return;
	}
	var importer = arm_sys_Path.textureImporters.h[HxOverrides.substr(path,path.lastIndexOf(".") + 1,null)];
	if(importer == null) {
		importer = arm_io_ImportTexture.defaultImporter;
	}
	importer(path,function(image) {
		iron_data_Data.cachedImages.h[path] = image;
		var ar = path.split(arm_sys_Path.sep);
		var name = ar[ar.length - 1];
		var asset = { name : name, file : path, id : arm_Project.assetId++};
		arm_Project.assets.push(asset);
		if(arm_Context.texture == null) {
			arm_Context.texture = asset;
		}
		arm_Project.assetNames.push(name);
		arm_Project.assetMap.h[asset.id] = image;
		arm_ui_UISidebar.inst.hwnd2.redraws = 2;
		if(StringTools.endsWith(path.toLowerCase(),".hdr")) {
			arm_App.notifyOnNextFrame(function() {
				arm_io_ImportEnvmap.run(path,image);
			});
		}
	});
};
arm_io_ImportTexture.defaultImporter = function(path,done) {
	iron_data_Data.getImage(path,done);
};
var arm_io_ImportTheme = function() { };
$hxClasses["arm.io.ImportTheme"] = arm_io_ImportTheme;
arm_io_ImportTheme.__name__ = "arm.io.ImportTheme";
arm_io_ImportTheme.run = function(path) {
	if(!arm_sys_Path.isJson(path)) {
		arm_Log.error(arm_Strings.error1);
		return;
	}
	var filename = HxOverrides.substr(path,path.lastIndexOf(arm_sys_Path.sep) + 1,null);
	arm_sys_File.copy(path,arm_sys_Path.data() + arm_sys_Path.sep + "themes" + arm_sys_Path.sep + filename);
	arm_ui_BoxPreferences.fetchThemes();
	arm_Config.raw.theme = filename;
	arm_ui_BoxPreferences.themeHandle.position = arm_ui_BoxPreferences.getThemeIndex();
	arm_ui_BoxPreferences.loadTheme(arm_Config.raw.theme);
	arm_Log.info("Theme '" + filename + "' imported.");
};
var arm_node_LogicNode = function(tree) {
	this.outputs = [];
	this.inputs = [];
	this.tree = tree;
};
$hxClasses["arm.node.LogicNode"] = arm_node_LogicNode;
arm_node_LogicNode.__name__ = "arm.node.LogicNode";
arm_node_LogicNode.prototype = {
	addInput: function(node,from) {
		this.inputs.push(new arm_node_LogicNodeInput(node,from));
	}
	,addOutputs: function(nodes) {
		this.outputs.push(nodes);
	}
	,get: function(from) {
		return this;
	}
	,set: function(value) {
	}
	,__class__: arm_node_LogicNode
};
var arm_node_LogicNodeInput = function(node,from) {
	this.node = node;
	this.from = from;
};
$hxClasses["arm.node.LogicNodeInput"] = arm_node_LogicNodeInput;
arm_node_LogicNodeInput.__name__ = "arm.node.LogicNodeInput";
arm_node_LogicNodeInput.prototype = {
	get: function() {
		return this.node.get(this.from);
	}
	,set: function(value) {
		this.node.set(value);
	}
	,__class__: arm_node_LogicNodeInput
};
var iron_Trait = function() {
	this._render2D = null;
	this._render = null;
	this._lateUpdate = null;
	this._update = null;
	this._remove = null;
	this._init = null;
	this._add = null;
};
$hxClasses["iron.Trait"] = iron_Trait;
iron_Trait.__name__ = "iron.Trait";
iron_Trait.prototype = {
	remove: function() {
		this.object.removeTrait(this);
	}
	,notifyOnAdd: function(f) {
		if(this._add == null) {
			this._add = [];
		}
		this._add.push(f);
	}
	,notifyOnUpdate: function(f) {
		if(this._update == null) {
			this._update = [];
		}
		this._update.push(f);
		iron_App.notifyOnUpdate(f);
	}
	,__class__: iron_Trait
};
var arm_node_LogicTree = function() {
	iron_Trait.call(this);
};
$hxClasses["arm.node.LogicTree"] = arm_node_LogicTree;
arm_node_LogicTree.__name__ = "arm.node.LogicTree";
arm_node_LogicTree.__super__ = iron_Trait;
arm_node_LogicTree.prototype = $extend(iron_Trait.prototype,{
	__class__: arm_node_LogicTree
});
var arm_node_MakeBake = function() { };
$hxClasses["arm.node.MakeBake"] = arm_node_MakeBake;
arm_node_MakeBake.__name__ = "arm.node.MakeBake";
arm_node_MakeBake.run = function(con,vert,frag) {
	if(arm_Context.bakeType == 0) {
		frag.wposition = true;
		frag.n = true;
		frag.vVec = true;
		frag.add_function(arm_shader_ShaderFunctions.str_cotangentFrame);
		frag.write("mat3 TBN = cotangentFrame(n, vVec, texCoord);");
		frag.write("n = nortan * 2.0 - 1.0;");
		frag.write("n.y = -n.y;");
		frag.write("n = normalize(mul(n, TBN));");
		var ext = arm_Context.vxaoExt;
		frag.write("const vec3 voxelgiHalfExtents = vec3(" + ext + ", " + ext + ", " + ext + ");");
		frag.write("vec3 voxpos = wposition / voxelgiHalfExtents;");
		frag.add_uniform("sampler3D voxels");
		frag.add_function(arm_shader_ShaderFunctions.str_traceAO);
		frag.n = true;
		frag.write("float ao = traceAO(voxpos, n, " + arm_Context.bakeAoRadius + ", " + arm_Context.bakeAoOffset + ") * " + arm_Context.bakeAoStrength + ";");
		if(arm_Context.bakeAxis != 0) {
			frag.write("ao *= dot(n, " + arm_node_MakeBake.axisString(arm_Context.bakeAxis) + ");");
		}
		frag.write("ao = 1.0 - ao;");
		frag.write("fragColor[0] = vec4(ao, ao, ao, 1.0);");
	} else if(arm_Context.bakeType == 1) {
		var strength = arm_Context.bakeCurvStrength * 2.0;
		var radius = 1.0 / arm_Context.bakeCurvRadius * 0.25;
		var offset = arm_Context.bakeCurvOffset / 10;
		frag.n = true;
		frag.write("vec3 dx = dFdx(n);");
		frag.write("vec3 dy = dFdy(n);");
		frag.write("float curvature = max(dot(dx, dx), dot(dy, dy));");
		frag.write("curvature = clamp(pow(curvature, " + radius + ") * " + strength + " + " + offset + ", 0.0, 1.0);");
		if(arm_Context.bakeAxis != 0) {
			frag.write("curvature *= dot(n, " + arm_node_MakeBake.axisString(arm_Context.bakeAxis) + ");");
		}
		frag.write("fragColor[0] = vec4(curvature, curvature, curvature, 1.0);");
	} else if(arm_Context.bakeType == 2) {
		frag.n = true;
		frag.add_uniform("sampler2D texpaint_undo","_texpaint_undo");
		frag.write("vec3 n0 = textureLod(texpaint_undo, texCoord, 0.0).rgb * vec3(2.0, 2.0, 2.0) - vec3(1.0, 1.0, 1.0);");
		frag.add_function(arm_shader_ShaderFunctions.str_cotangentFrame);
		frag.write("mat3 invTBN = transpose(cotangentFrame(n, n, texCoord));");
		frag.write("vec3 res = normalize(mul(n0, invTBN)) * vec3(0.5, 0.5, 0.5) + vec3(0.5, 0.5, 0.5);");
		frag.write("fragColor[0] = vec4(res, 1.0);");
	} else if(arm_Context.bakeType == 3) {
		frag.n = true;
		frag.write("fragColor[0] = vec4(n * vec3(0.5, 0.5, 0.5) + vec3(0.5, 0.5, 0.5), 1.0);");
		if(arm_Context.bakeUpAxis == 1) {
			frag.write("fragColor[0].rgb = vec3(fragColor[0].r, fragColor[0].b, 1.0 - fragColor[0].g);");
		}
	} else if(arm_Context.bakeType == 4) {
		frag.wposition = true;
		frag.add_uniform("sampler2D texpaint_undo","_texpaint_undo");
		frag.write("vec3 wpos0 = textureLod(texpaint_undo, texCoord, 0.0).rgb * vec3(2.0, 2.0, 2.0) - vec3(1.0, 1.0, 1.0);");
		frag.write("float res = distance(wpos0, wposition) * 10.0;");
		frag.write("fragColor[0] = vec4(res, res, res, 1.0);");
	} else if(arm_Context.bakeType == 5) {
		frag.add_uniform("sampler2D texpaint_undo","_texpaint_undo");
		frag.write("vec2 texDx = dFdx(texCoord);");
		frag.write("vec2 texDy = dFdy(texCoord);");
		frag.write("float h0 = textureLod(texpaint_undo, texCoord, 0.0).r * 100;");
		frag.write("float h1 = textureLod(texpaint_undo, texCoord + texDx, 0.0).r * 100;");
		frag.write("float h2 = textureLod(texpaint_undo, texCoord + texDy, 0.0).r * 100;");
		frag.write("fragColor[0] = vec4((h1 - h0) * 0.5 + 0.5, (h2 - h0) * 0.5 + 0.5, 0.0, 1.0);");
	} else if(arm_Context.bakeType == 6) {
		frag.wposition = true;
		frag.write("fragColor[0] = vec4(wposition * vec3(0.5, 0.5, 0.5) + vec3(0.5, 0.5, 0.5), 1.0);");
		if(arm_Context.bakeUpAxis == 1) {
			frag.write("fragColor[0].rgb = vec3(fragColor[0].r, fragColor[0].b, 1.0 - fragColor[0].g);");
		}
	} else if(arm_Context.bakeType == 7) {
		frag.write("fragColor[0] = vec4(texCoord.xy, 0.0, 1.0);");
	} else if(arm_Context.bakeType == 8) {
		frag.add_uniform("sampler2D texpaint_nor_undo","_texpaint_nor_undo");
		frag.write("float sample_matid = textureLod(texpaint_nor_undo, texCoord, 0.0).a + 1.0 / 255.0;");
		frag.write("float matid_r = fract(sin(dot(vec2(sample_matid, sample_matid * 20.0), vec2(12.9898, 78.233))) * 43758.5453);");
		frag.write("float matid_g = fract(sin(dot(vec2(sample_matid * 20.0, sample_matid), vec2(12.9898, 78.233))) * 43758.5453);");
		frag.write("float matid_b = fract(sin(dot(vec2(sample_matid, sample_matid * 40.0), vec2(12.9898, 78.233))) * 43758.5453);");
		frag.write("fragColor[0] = vec4(matid_r, matid_g, matid_b, 1.0);");
	} else if(arm_Context.bakeType == 9) {
		frag.add_uniform("float objectId","_objectId");
		frag.write("float obid = objectId + 1.0 / 255.0;");
		frag.write("float id_r = fract(sin(dot(vec2(obid, obid * 20.0), vec2(12.9898, 78.233))) * 43758.5453);");
		frag.write("float id_g = fract(sin(dot(vec2(obid * 20.0, obid), vec2(12.9898, 78.233))) * 43758.5453);");
		frag.write("float id_b = fract(sin(dot(vec2(obid, obid * 40.0), vec2(12.9898, 78.233))) * 43758.5453);");
		frag.write("fragColor[0] = vec4(id_r, id_g, id_b, 1.0);");
	} else if(arm_Context.bakeType == 10) {
		if(con.allow_vcols) {
			con.add_elem("col","short4norm");
			frag.write("fragColor[0] = vec4(vcolor.r, vcolor.g, vcolor.b, 1.0);");
		} else {
			frag.write("fragColor[0] = vec4(1.0, 1.0, 1.0, 1.0);");
		}
	}
};
arm_node_MakeBake.setColorWrites = function(con_paint) {
	con_paint.data.color_writes_red[1] = false;
	con_paint.data.color_writes_green[1] = false;
	con_paint.data.color_writes_blue[1] = false;
	con_paint.data.color_writes_alpha[1] = false;
	con_paint.data.color_writes_red[2] = false;
	con_paint.data.color_writes_green[2] = false;
	con_paint.data.color_writes_blue[2] = false;
	con_paint.data.color_writes_alpha[2] = false;
};
arm_node_MakeBake.axisString = function(i) {
	if(i == 1) {
		return "vec3(1,0,0)";
	} else if(i == 2) {
		return "vec3(0,1,0)";
	} else if(i == 3) {
		return "vec3(0,0,1)";
	} else if(i == 4) {
		return "vec3(-1,0,0)";
	} else if(i == 5) {
		return "vec3(0,-1,0)";
	} else {
		return "vec3(0,0,-1)";
	}
};
var arm_node_MakeBlur = function() { };
$hxClasses["arm.node.MakeBlur"] = arm_node_MakeBlur;
arm_node_MakeBlur.__name__ = "arm.node.MakeBlur";
arm_node_MakeBlur.run = function(vert,frag) {
	frag.write("vec2 gbufferSizeLocal = gbufferSize;");
	frag.write("vec2 texCoordInp = texelFetch(gbuffer2, ivec2(sp.x * gbufferSizeLocal.x, sp.y * gbufferSizeLocal.y), 0).ba;");
	frag.write("vec3 basecol = vec3(0.0, 0.0, 0.0);");
	frag.write("float roughness = 0.0;");
	frag.write("float metallic = 0.0;");
	frag.write("float occlusion = 0.0;");
	frag.write("vec3 nortan = vec3(0.0, 0.0, 0.0);");
	frag.write("float height = 0.0;");
	frag.write("float mat_opacity = 1.0;");
	frag.write("float opacity = 0.0;");
	if(arm_Context.material.paintEmis) {
		frag.write("float emis = 0.0;");
	}
	if(arm_Context.material.paintSubs) {
		frag.write("float subs = 0.0;");
	}
	frag.write("const float blur_weight[15] = {0.034619 / 2.0, 0.044859 / 2.0, 0.055857 / 2.0, 0.066833 / 2.0, 0.076841 / 2.0, 0.084894 / 2.0, 0.090126 / 2.0, 0.09194 / 2.0, 0.090126 / 2.0, 0.084894 / 2.0, 0.076841 / 2.0, 0.066833 / 2.0, 0.055857 / 2.0, 0.044859 / 2.0, 0.034619 / 2.0};");
	frag.add_uniform("vec2 texpaintSize","_texpaintSize");
	frag.write("vec2 texpaintSizeLocal = texpaintSize;");
	frag.write("float blur_step = 1.0 / texpaintSizeLocal.x;");
	frag.write("for (int i = -7; i <= 7; ++i) {");
	frag.write("vec4 texpaint_sample = texture(texpaint_undo, texCoordInp + vec2(blur_step * float(i), 0.0));");
	frag.write("opacity += texpaint_sample.a * blur_weight[i + 7];");
	frag.write("basecol += texpaint_sample.rgb * blur_weight[i + 7];");
	frag.write("vec3 texpaint_pack_sample = texture(texpaint_pack_undo, texCoordInp + vec2(blur_step * float(i), 0.0)).rgb * blur_weight[i + 7];");
	frag.write("roughness += texpaint_pack_sample.g;");
	frag.write("metallic += texpaint_pack_sample.b;");
	frag.write("occlusion += texpaint_pack_sample.r;");
	frag.write("nortan += texture(texpaint_nor_undo, texCoordInp + vec2(blur_step * float(i), 0.0)).rgb * blur_weight[i + 7];");
	frag.write("}");
	frag.write("for (int j = -7; j <= 7; ++j) {");
	frag.write("vec4 texpaint_sample = texture(texpaint_undo, texCoordInp + vec2(0.0, blur_step * float(j)));");
	frag.write("opacity += texpaint_sample.a * blur_weight[j + 7];");
	frag.write("basecol += texpaint_sample.rgb * blur_weight[j + 7];");
	frag.write("vec3 texpaint_pack_sample = texture(texpaint_pack_undo, texCoordInp + vec2(0.0, blur_step * float(j))).rgb * blur_weight[j + 7];");
	frag.write("roughness += texpaint_pack_sample.g;");
	frag.write("metallic += texpaint_pack_sample.b;");
	frag.write("occlusion += texpaint_pack_sample.r;");
	frag.write("nortan += texture(texpaint_nor_undo, texCoordInp + vec2(0.0, blur_step * float(j))).rgb * blur_weight[j + 7];");
	frag.write("}");
	frag.write("opacity *= brushOpacity;");
};
var arm_node_MakeBrush = function() { };
$hxClasses["arm.node.MakeBrush"] = arm_node_MakeBrush;
arm_node_MakeBrush.__name__ = "arm.node.MakeBrush";
arm_node_MakeBrush.run = function(vert,frag) {
	frag.write("float dist = 0.0;");
	if(arm_Context.tool == 7) {
		return;
	}
	var decal = arm_Context.tool == 3 || arm_Context.tool == 4;
	if(decal) {
		frag.write("if (decalMaskLocal.z > 0) {");
	}
	if(arm_Config.raw.brush_3d) {
		frag.write("vec4 inpLocal = inp;");
		frag.write("vec4 inplastLocal = inplast;");
		frag.write("float depth = textureLod(gbufferD, inpLocal.xy, 0.0).r;");
		frag.add_uniform("mat4 invVP","_inverseViewProjectionMatrix");
		frag.write("vec4 winp = vec4(vec2(inpLocal.x, 1.0 - inpLocal.y) * 2.0 - 1.0, depth * 2.0 - 1.0, 1.0);");
		frag.write("winp = mul(winp, invVP);");
		frag.write("winp.xyz /= winp.w;");
		frag.wposition = true;
		if(arm_Context.brushAngleReject || arm_Context.xray) {
			frag.add_function(arm_shader_ShaderFunctions.str_octahedronWrap);
			frag.add_uniform("sampler2D gbuffer0");
			frag.write("vec2 g0 = textureLod(gbuffer0, inpLocal.xy, 0.0).rg;");
			frag.write("vec3 wn;");
			frag.write("wn.z = 1.0 - abs(g0.x) - abs(g0.y);");
			frag.write("wn.xy = wn.z >= 0.0 ? g0.xy : octahedronWrap(g0.xy);");
			frag.write("wn = normalize(wn);");
			frag.write("float planeDist = dot(wn, winp.xyz - wposition);");
			if(arm_Context.brushAngleReject && !arm_Context.xray) {
				frag.write("if (planeDist < -0.01) discard;");
				frag.n = true;
				frag.write("if (dot(wn, n) < " + arm_Context.brushAngleRejectDot + ") discard;");
			}
		}
		frag.write("float depthlast = textureLod(gbufferD, inplastLocal.xy, 0.0).r;");
		frag.write("vec4 winplast = vec4(vec2(inplastLocal.x, 1.0 - inplastLocal.y) * 2.0 - 1.0, depthlast * 2.0 - 1.0, 1.0);");
		frag.write("winplast = mul(winplast, invVP);");
		frag.write("winplast.xyz /= winplast.w;");
		frag.write("vec3 pa = wposition - winp.xyz;");
		if(arm_Context.xray) {
			frag.write("pa += wn * vec3(planeDist, planeDist, planeDist);");
		}
		frag.write("vec3 ba = winplast.xyz - winp.xyz;");
		if(arm_Context.brushLazyRadius > 0 && arm_Context.brushLazyStep > 0) {
			frag.write("dist = distance(wposition, winp.xyz);");
		} else {
			frag.write("float h = clamp(dot(pa, ba) / dot(ba, ba), 0.0, 1.0);");
			frag.write("dist = length(pa - ba * h);");
		}
		frag.write("if (dist > brushRadius) discard;");
	} else {
		frag.write("vec2 binp = inp.xy * 2.0 - 1.0;");
		frag.write("binp.x *= aspectRatio;");
		frag.write("binp = binp * 0.5 + 0.5;");
		frag.write("vec2 binplast = inplast.xy * 2.0 - 1.0;");
		frag.write("binplast.x *= aspectRatio;");
		frag.write("binplast = binplast * 0.5 + 0.5;");
		frag.write("vec2 pa = bsp.xy - binp.xy;");
		frag.write("vec2 ba = binplast.xy - binp.xy;");
		frag.write("float h = clamp(dot(pa, ba) / dot(ba, ba), 0.0, 1.0);");
		frag.write("dist = length(pa - ba * h);");
		frag.write("if (dist > brushRadius) discard;");
	}
	if(decal) {
		frag.write("}");
	}
};
var arm_node_MakeClone = function() { };
$hxClasses["arm.node.MakeClone"] = arm_node_MakeClone;
arm_node_MakeClone.__name__ = "arm.node.MakeClone";
arm_node_MakeClone.run = function(vert,frag) {
	frag.add_uniform("vec2 cloneDelta","_cloneDelta");
	frag.write("vec2 cloneDeltaLocal = cloneDelta;");
	frag.write("vec2 gbufferSizeLocal = gbufferSize;");
	frag.write("vec2 texCoordInp = texelFetch(gbuffer2, ivec2((sp.x + cloneDeltaLocal.x) * gbufferSizeLocal.x, (sp.y + cloneDeltaLocal.y) * gbufferSizeLocal.y), 0).ba;");
	frag.write("vec3 texpaint_pack_sample = textureLod(texpaint_pack_undo, texCoordInp, 0.0).rgb;");
	frag.write("vec3 basecol = " + "textureLod(texpaint_undo, texCoordInp, 0.0).rgb" + ";");
	frag.write("float roughness = " + "texpaint_pack_sample.g" + ";");
	frag.write("float metallic = " + "texpaint_pack_sample.b" + ";");
	frag.write("float occlusion = " + "texpaint_pack_sample.r" + ";");
	frag.write("vec3 nortan = " + "textureLod(texpaint_nor_undo, texCoordInp, 0.0).rgb" + ";");
	frag.write("float height = " + "0.0" + ";");
	frag.write("float mat_opacity = " + "1.0" + ";");
	frag.write("float opacity = mat_opacity * brushOpacity;");
	if(arm_Context.material.paintEmis) {
		frag.write("float emis = 0.0;");
	}
	if(arm_Context.material.paintSubs) {
		frag.write("float subs = 0.0;");
	}
};
var arm_node_MakeColorIdPicker = function() { };
$hxClasses["arm.node.MakeColorIdPicker"] = arm_node_MakeColorIdPicker;
arm_node_MakeColorIdPicker.__name__ = "arm.node.MakeColorIdPicker";
arm_node_MakeColorIdPicker.run = function(vert,frag) {
	vert.write("gl_Position = vec4(-1.0 + float((gl_VertexID & 1) << 2), -1.0 + float((gl_VertexID & 2) << 1), 0.0, 1.0);");
	frag.add_uniform("sampler2D gbuffer2");
	frag.add_uniform("vec2 gbufferSize","_gbufferSize");
	frag.add_uniform("vec4 inp","_inputBrush");
	frag.write("vec4 inpLocal = inp;");
	frag.write("vec2 gbufferSizeLocal = gbufferSize;");
	frag.write("vec2 texCoordInp = texelFetch(gbuffer2, ivec2(inpLocal.x * gbufferSizeLocal.x, inpLocal.y * gbufferSizeLocal.y), 0).ba;");
	if(arm_Context.tool == 8) {
		frag.add_out("vec4 fragColor");
		frag.add_uniform("sampler2D texcolorid","_texcolorid");
		frag.write("vec3 idcol = textureLod(texcolorid, texCoordInp, 0.0).rgb;");
		frag.write("fragColor = vec4(idcol, 1.0);");
	} else if(arm_Context.tool == 9) {
		frag.add_out("vec4 fragColor[3]");
		frag.add_uniform("sampler2D texpaint");
		frag.add_uniform("sampler2D texpaint_nor");
		frag.add_uniform("sampler2D texpaint_pack");
		frag.write("fragColor[0] = textureLod(texpaint, texCoordInp, 0.0);");
		frag.write("fragColor[1] = textureLod(texpaint_nor, texCoordInp, 0.0);");
		frag.write("fragColor[2] = textureLod(texpaint_pack, texCoordInp, 0.0);");
		frag.write("fragColor[0].a = texCoordInp.x;");
		frag.write("fragColor[2].a = texCoordInp.y;");
	}
};
var arm_node_MakeDiscard = function() { };
$hxClasses["arm.node.MakeDiscard"] = arm_node_MakeDiscard;
arm_node_MakeDiscard.__name__ = "arm.node.MakeDiscard";
arm_node_MakeDiscard.colorId = function(vert,frag) {
	frag.add_uniform("sampler2D texpaint_colorid");
	frag.add_uniform("sampler2D texcolorid","_texcolorid");
	frag.write("vec3 colorid_c1 = texelFetch(texpaint_colorid, ivec2(0, 0), 0).rgb;");
	frag.write("vec3 colorid_c2 = textureLod(texcolorid, texCoordPick, 0).rgb;");
	frag.write("if (any(colorid_c1 != colorid_c2)) discard;");
};
arm_node_MakeDiscard.face = function(vert,frag) {
	frag.add_uniform("sampler2D gbuffer2");
	frag.add_uniform("sampler2D textrianglemap","_textrianglemap");
	frag.add_uniform("vec2 textrianglemapSize","_texpaintSize");
	frag.add_uniform("vec2 gbufferSize","_gbufferSize");
	frag.write("vec2 texCoordInp = texelFetch(gbuffer2, ivec2(inp.x * gbufferSize.x, inp.y * gbufferSize.y), 0).ba;");
	frag.write("vec4 face_c1 = texelFetch(textrianglemap, ivec2(texCoordInp * textrianglemapSize), 0);");
	frag.write("vec4 face_c2 = textureLod(textrianglemap, texCoordPick, 0);");
	frag.write("if (any(face_c1 != face_c2)) discard;");
};
arm_node_MakeDiscard.materialId = function(vert,frag) {
	frag.wvpposition = true;
	frag.write("vec2 picker_sample_tc = vec2(wvpposition.x / wvpposition.w, wvpposition.y / wvpposition.w) * 0.5 + 0.5;");
	frag.write("picker_sample_tc.y = 1.0 - picker_sample_tc.y;");
	frag.add_uniform("sampler2D texpaint_nor_undo","_texpaint_nor_undo");
	frag.write("if (" + arm_Context.materialIdPicked / 255 + " != textureLod(texpaint_nor_undo, picker_sample_tc, 0.0).a) discard;");
};
var arm_node_MakeMesh = function() { };
$hxClasses["arm.node.MakeMesh"] = arm_node_MakeMesh;
arm_node_MakeMesh.__name__ = "arm.node.MakeMesh";
arm_node_MakeMesh.run = function(data) {
	var con_mesh = data.add_context({ name : "mesh", depth_write : true, compare_mode : "less", cull_mode : arm_Context.cullBackfaces ? "clockwise" : "none", vertex_elements : [{ name : "pos", data : "short4norm"},{ name : "nor", data : "short2norm"},{ name : "tex", data : "short2norm"}], color_attachments : ["RGBA64","RGBA64","RGBA64"], depth_attachment : "DEPTH32"});
	var vert = con_mesh.make_vert();
	var frag = con_mesh.make_frag();
	frag.ins = vert.outs;
	vert.add_out("vec2 texCoord");
	frag.wvpposition = true;
	vert.add_out("vec4 prevwvpposition");
	vert.add_uniform("mat4 VP","_viewProjectionMatrix");
	vert.add_uniform("mat4 prevWVP","_prevWorldViewProjectionMatrix");
	vert.wposition = true;
	var textureCount = 0;
	if(arm_node_MakeMaterial.heightUsed) {
		var displaceStrength = arm_Config.raw.displace_strength * 0.02 * arm_Context.mainObject().transform.scale.x;
		if(displaceStrength > 0.0) {
			vert.n = true;
			vert.write("float height = 0.0;");
			var numLayers = 0;
			var _g = 0;
			var _g1 = arm_Project.layers;
			while(_g < _g1.length) {
				var l = _g1[_g];
				++_g;
				if(!l.isVisible() || !l.paintHeight || l.getChildren() != null) {
					continue;
				}
				if(numLayers > 16) {
					break;
				}
				++numLayers;
				++textureCount;
				vert.add_uniform("sampler2D texpaint_pack_vert" + l.id,"_texpaint_pack_vert" + l.id);
				vert.write("height += textureLod(texpaint_pack_vert" + l.id + ", tex, 0.0).a;");
				if(l.texpaint_mask != null) {
					++textureCount;
					vert.add_uniform("sampler2D texpaint_mask_vert" + l.id,"_texpaint_mask_vert" + l.id);
					vert.write("height *= textureLod(texpaint_mask_vert" + l.id + ", tex, 0.0).r;");
				}
			}
			vert.write("wposition += wnormal * vec3(height, height, height) * vec3(" + displaceStrength + ", " + displaceStrength + ", " + displaceStrength + ");");
		}
	}
	vert.write("gl_Position = mul(vec4(wposition.xyz, 1.0), VP);");
	vert.write("texCoord = tex;");
	if(arm_node_MakeMaterial.heightUsed) {
		vert.add_uniform("mat4 invW","_inverseWorldMatrix");
		vert.write("prevwvpposition = mul(mul(vec4(wposition, 1.0), invW), prevWVP);");
	} else {
		vert.write("prevwvpposition = mul(vec4(pos.xyz, 1.0), prevWVP);");
	}
	frag.add_out("vec4 fragColor[3]");
	frag.n = true;
	frag.add_function(arm_shader_ShaderFunctions.str_packFloatInt16);
	if(arm_Context.tool == 8) {
		frag.add_uniform("sampler2D texcolorid","_texcolorid");
		frag.write("fragColor[0] = vec4(n.xy, 1.0, packFloatInt16(0.0, uint(0)));");
		frag.write("vec3 idcol = pow(textureLod(texcolorid, texCoord, 0.0).rgb, vec3(2.2, 2.2, 2.2));");
		frag.write("fragColor[1] = vec4(idcol.rgb, 1.0);");
	} else {
		frag.add_function(arm_shader_ShaderFunctions.str_octahedronWrap);
		frag.write("vec3 basecol;");
		frag.write("float roughness;");
		frag.write("float metallic;");
		frag.write("float occlusion;");
		frag.write("float opacity;");
		frag.write("float matid = 0.0;");
		frag.write("vec3 ntex;");
		frag.write("vec4 texpaint_sample;");
		frag.vVec = true;
		frag.add_function(arm_shader_ShaderFunctions.str_cotangentFrame);
		frag.write("mat3 TBN = cotangentFrame(n, vVec, texCoord);");
		if(arm_Project.layers[0].isVisible()) {
			var l = arm_Project.layers[0];
			textureCount += l.texpaint_mask != null ? 4 : 3;
			if(l.objectMask > 0) {
				var uid = arm_Project.paintObjects[l.objectMask - 1].uid;
				frag.add_uniform("int uid","_uid");
				frag.write("if (" + uid + " == uid) {");
			}
			if(l.paintBase) {
				frag.add_shared_sampler("sampler2D texpaint");
				frag.write("texpaint_sample = textureLodShared(texpaint, texCoord, 0.0);");
			} else {
				frag.write("texpaint_sample = vec4(0.0, 0.0, 0.0, 1.0);");
			}
			frag.write("basecol = texpaint_sample.rgb * texpaint_sample.a;");
			if(l.texpaint_mask != null) {
				frag.add_shared_sampler("sampler2D texpaint_mask");
				frag.write("float maskTexture = textureLodShared(texpaint_mask, texCoord, 0.0).r;");
			}
			if(l.paintNor || arm_node_MakeMaterial.emisUsed) {
				frag.add_shared_sampler("sampler2D texpaint_nor");
				frag.write("vec4 texpaint_nor_sample = textureLodShared(texpaint_nor, texCoord, 0.0);");
				if(arm_node_MakeMaterial.emisUsed) {
					frag.write("matid = texpaint_nor_sample.a;");
				}
				if(l.paintNor) {
					frag.write("ntex = texpaint_nor_sample.rgb;");
					frag.write("n = ntex * 2.0 - 1.0;");
					frag.write("n.y = -n.y;");
					if(l.texpaint_mask != null) {
						frag.write("n.xy *= maskTexture;");
					}
					frag.write("n = normalize(mul(n, TBN));");
				}
			}
			if(l.paintHeight && arm_node_MakeMaterial.heightUsed || l.paintOcc || l.paintRough || l.paintMet) {
				frag.add_shared_sampler("sampler2D texpaint_pack");
				frag.write("vec4 pack = textureLodShared(texpaint_pack, texCoord, 0.0);");
			}
			if(l.paintHeight && arm_node_MakeMaterial.heightUsed) {
				var ds = arm_Config.raw.displace_strength * 0.02 * arm_Context.mainObject().transform.scale.x * 5;
				if(ds < 0.1) {
					ds = 0.1;
				} else if(ds > 2.0) {
					ds = 2.0;
				}
				frag.wposition = true;
				frag.write("vec3 dpdx = dFdx(wposition);");
				frag.write("vec3 dpdy = dFdy(wposition);");
				frag.write("float height_sample = pack.a;");
				if(l.texpaint_mask != null) {
					frag.write("height_sample *= maskTexture;");
				}
				frag.write("float dhdx = dFdx(height_sample * " + ds + ");");
				frag.write("float dhdy = dFdy(height_sample * " + ds + ");");
				frag.write("vec3 cross_x = cross(n, dpdx);");
				frag.write("vec3 cross_y = cross(dpdy, n);");
				frag.write("vec3 ngrad = (cross_y * dhdx + cross_x * dhdy) / dot(dpdx, cross_y);");
				frag.write("n = normalize(n - ngrad);");
			}
			if(l.paintOcc) {
				frag.write("occlusion = pack.r;");
			} else {
				frag.write("occlusion = 1.0;");
			}
			if(l.paintRough) {
				frag.write("roughness = pack.g;");
			} else {
				frag.write("roughness = 1.0;");
			}
			if(l.paintMet) {
				frag.write("metallic = pack.b;");
			} else {
				frag.write("metallic = 0.0;");
			}
			if(l.texpaint_mask != null) {
				frag.write("basecol *= maskTexture;");
				frag.write("occlusion *= maskTexture;");
				frag.write("roughness *= maskTexture;");
				frag.write("metallic *= maskTexture;");
			}
			if(l.maskOpacity < 1) {
				frag.write("basecol *= " + l.maskOpacity + ";");
				frag.write("occlusion *= " + l.maskOpacity + ";");
				frag.write("roughness *= " + l.maskOpacity + ";");
				frag.write("metallic *= " + l.maskOpacity + ";");
			}
			if(l.objectMask > 0) {
				frag.write("}");
				frag.write("else {");
				frag.write("basecol = vec3(0.0, 0.0, 0.0);");
				frag.write("occlusion = 1.0;");
				frag.write("roughness = 0.0;");
				frag.write("metallic = 0.0;");
				frag.write("ntex = vec3(0.5, 0.5, 1.0);");
				frag.write("texpaint_sample = vec4(0.0, 0.0, 0.0, 1.0);");
				frag.write("}");
			}
		} else {
			frag.write("basecol = vec3(0.0, 0.0, 0.0);");
			frag.write("occlusion = 1.0;");
			frag.write("roughness = 0.0;");
			frag.write("metallic = 0.0;");
		}
		if(arm_Context.drawWireframe) {
			++textureCount;
			frag.add_uniform("sampler2D texuvmap","_texuvmap");
		}
		if(arm_Context.viewportMode == 11 && arm_Context.layer.texpaint_mask != null) {
			++textureCount;
			frag.add_uniform("sampler2D texpaint_mask_view","_texpaint_mask");
		}
		if(arm_Context.viewportMode == 0 && arm_Context.renderMode == 1) {
			textureCount += 4;
			frag.add_uniform("sampler2D senvmapBrdf","$brdf.k");
			frag.add_uniform("sampler2D senvmapRadiance","_envmapRadiance");
			frag.add_uniform("sampler2D sltcMat","_ltcMat");
			frag.add_uniform("sampler2D sltcMag","_ltcMag");
		}
		if(arm_Project.layers.length > 1) {
			frag.write("float factor0;");
			frag.write("vec4 col_tex0;");
			frag.write("vec4 col_nor0;");
			frag.write("vec4 col_pack0;");
			frag.write("vec3 n0;");
			var len = arm_Project.layers.length;
			var start = len - 1;
			var maxTextures = arm_node_MakeMesh.getMaxTextures();
			var _g = 1;
			while(_g < len) {
				var l = arm_Project.layers[len - _g++];
				if(l.isVisible() && l.getChildren() == null) {
					textureCount += l.texpaint_mask != null ? 4 : 3;
					if(textureCount >= maxTextures) {
						break;
					}
				}
				if(start == 1) {
					break;
				}
				--start;
			}
			var _g = start;
			while(_g < len) {
				var l = arm_Project.layers[_g++];
				if(!l.isVisible() || l.getChildren() != null) {
					continue;
				}
				var id = l.id;
				if(l.objectMask > 0) {
					var uid = arm_Project.paintObjects[l.objectMask - 1].uid;
					frag.add_uniform("int uid","_uid");
					frag.write("if (" + uid + " == uid) {");
				}
				frag.add_shared_sampler("sampler2D texpaint" + id);
				frag.write("col_tex0 = textureLodShared(texpaint" + id + ", texCoord, 0.0);");
				frag.write("factor0 = col_tex0.a;");
				if(l.texpaint_mask != null) {
					frag.add_shared_sampler("sampler2D texpaint_mask" + id);
					frag.write("factor0 *= textureLodShared(texpaint_mask" + id + ", texCoord, 0.0).r;");
				}
				if(l.maskOpacity < 1) {
					frag.write("factor0 *= " + l.maskOpacity + ";");
				}
				if(l.paintBase) {
					frag.write("basecol = " + arm_node_MakeMaterial.blendMode(frag,l.blending,"basecol","col_tex0.rgb","factor0") + ";");
				}
				if(arm_node_MakeMaterial.emisUsed || l.paintNor) {
					frag.add_shared_sampler("sampler2D texpaint_nor" + id);
					frag.write("col_nor0 = textureLodShared(texpaint_nor" + id + ", texCoord, 0.0);");
					if(arm_node_MakeMaterial.emisUsed) {
						frag.write("matid = col_nor0.a;");
					}
					if(l.paintNor) {
						frag.write("n0 = col_nor0.rgb * 2.0 - 1.0;");
						frag.write("n0.y = -n0.y;");
						frag.write("n0 = normalize(mul(n0, TBN));");
						frag.write("n = normalize(mix(n, n0, factor0));");
					}
				}
				if(l.paintOcc || l.paintRough || l.paintMet) {
					frag.add_shared_sampler("sampler2D texpaint_pack" + id);
					frag.write("col_pack0 = textureLodShared(texpaint_pack" + id + ", texCoord, 0.0);");
					if(l.paintOcc) {
						frag.write("occlusion = mix(occlusion, col_pack0.r, factor0);");
					}
					if(l.paintRough) {
						frag.write("roughness = mix(roughness, col_pack0.g, factor0);");
					}
					if(l.paintMet) {
						frag.write("metallic = mix(metallic, col_pack0.b, factor0);");
					}
				}
				if(l.objectMask > 0) {
					frag.write("}");
				}
			}
		}
		if(arm_Context.drawTexels) {
			frag.add_uniform("vec2 texpaintSize","_texpaintSize");
			frag.write("vec2 texel = texCoord * texpaintSize;");
			frag.write("basecol *= max(float(mod(int(texel.x), 2.0) == mod(int(texel.y), 2.0)), 0.9);");
		}
		if(arm_Context.drawWireframe) {
			frag.write("basecol *= 1.0 - textureLod(texuvmap, texCoord, 0.0).r;");
		}
		if(arm_Context.renderMode == 1) {
			frag.write("vec3 wn = n;");
		}
		frag.write("n /= (abs(n.x) + abs(n.y) + abs(n.z));");
		frag.write("n.xy = n.z >= 0.0 ? n.xy : octahedronWrap(n.xy);");
		frag.write("basecol = pow(basecol, vec3(2.2, 2.2, 2.2));");
		frag.write("fragColor[0] = vec4(n.xy, roughness, packFloatInt16(metallic, uint(matid)));");
		if(arm_Context.viewportMode == 0 || arm_Context.viewportMode == 12) {
			if(arm_Context.renderMode == 1) {
				frag.wposition = true;
				frag.write("vec3 albedo = mix(basecol, vec3(0.0, 0.0, 0.0), metallic);");
				frag.write("vec3 f0 = mix(vec3(0.04, 0.04, 0.04), basecol, metallic);");
				frag.write("float dotNV = max(dot(wn, vVec), 0.0);");
				frag.write("vec2 envBRDF = texture(senvmapBrdf, vec2(roughness, 1.0 - dotNV)).xy;");
				frag.add_uniform("int envmapNumMipmaps","_envmapNumMipmaps");
				frag.add_uniform("vec4 envmapData","_envmapData");
				frag.write("vec3 wreflect = reflect(-vVec, wn);");
				frag.write("float envlod = roughness * float(envmapNumMipmaps);");
				frag.add_function(arm_shader_ShaderFunctions.str_envMapEquirect);
				frag.write("vec4 envmapDataLocal = envmapData;");
				frag.write("vec3 prefilteredColor = textureLod(senvmapRadiance, envMapEquirect(wreflect, envmapDataLocal.x), envlod).rgb;");
				frag.add_uniform("vec3 lightArea0","_lightArea0");
				frag.add_uniform("vec3 lightArea1","_lightArea1");
				frag.add_uniform("vec3 lightArea2","_lightArea2");
				frag.add_uniform("vec3 lightArea3","_lightArea3");
				frag.add_function(arm_shader_ShaderFunctions.str_ltcEvaluate);
				frag.add_uniform("vec3 lightPos","_pointPosition");
				frag.add_uniform("vec3 lightColor","_pointColor");
				frag.write("float ldist = distance(wposition, lightPos);");
				frag.write("const float LUT_SIZE = 64.0;");
				frag.write("const float LUT_SCALE = (LUT_SIZE - 1.0) / LUT_SIZE;");
				frag.write("const float LUT_BIAS = 0.5 / LUT_SIZE;");
				frag.write("float theta = acos(dotNV);");
				frag.write("vec2 tuv = vec2(roughness, theta / (0.5 * 3.14159265));");
				frag.write("tuv = tuv * LUT_SCALE + LUT_BIAS;");
				frag.write("vec4 t = textureLod(sltcMat, tuv, 0.0);");
				frag.write("mat3 minv = mat3(vec3(1.0, 0.0, t.y), vec3(0.0, t.z, 0.0), vec3(t.w, 0.0, t.x));");
				frag.write("float ltcspec = ltcEvaluate(wn, vVec, dotNV, wposition, minv, lightArea0, lightArea1, lightArea2, lightArea3);");
				frag.write("ltcspec *= textureLod(sltcMag, tuv, 0.0).a;");
				frag.write("mat3 mident = mat3(1.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 1.0);");
				frag.write("float ltcdiff = ltcEvaluate(wn, vVec, dotNV, wposition, mident, lightArea0, lightArea1, lightArea2, lightArea3);");
				frag.write("vec3 direct = albedo * ltcdiff + ltcspec * 0.05;");
				frag.write("direct *= lightColor * (1.0 / (ldist * ldist));");
				frag.add_uniform("vec4 shirr[7]","_envmapIrradiance");
				frag.add_function(arm_shader_ShaderFunctions.str_shIrradiance);
				frag.write("vec3 indirect = albedo * (shIrradiance(vec3(wn.x * envmapDataLocal.z - wn.y * envmapDataLocal.y, wn.x * envmapDataLocal.y + wn.y * envmapDataLocal.z, wn.z), shirr) / 3.14159265);");
				frag.write("indirect += prefilteredColor * (f0 * envBRDF.x + envBRDF.y) * 1.5;");
				frag.write("indirect *= envmapDataLocal.w * occlusion;");
				frag.write("fragColor[1] = vec4(direct + indirect, 1.0);");
			} else {
				if(arm_node_MakeMaterial.emisUsed) {
					frag.write("if (matid == 1.0) basecol *= 10.0;");
				}
				frag.write("fragColor[1] = vec4(basecol, occlusion);");
			}
		} else if(arm_Context.viewportMode == 1 && arm_Context.layer.paintBase) {
			frag.write("fragColor[1] = vec4(basecol, 1.0);");
		} else if(arm_Context.viewportMode == 2 && arm_Context.layer.paintNor) {
			frag.write("fragColor[1] = vec4(ntex.rgb, 1.0);");
		} else if(arm_Context.viewportMode == 3 && arm_Context.layer.paintOcc) {
			frag.write("fragColor[1] = vec4(vec3(occlusion, occlusion, occlusion), 1.0);");
		} else if(arm_Context.viewportMode == 4 && arm_Context.layer.paintRough) {
			frag.write("fragColor[1] = vec4(vec3(roughness, roughness, roughness), 1.0);");
		} else if(arm_Context.viewportMode == 5 && arm_Context.layer.paintMet) {
			frag.write("fragColor[1] = vec4(vec3(metallic, metallic, metallic), 1.0);");
		} else if(arm_Context.viewportMode == 6 && arm_Context.layer.paintOpac) {
			frag.write("fragColor[1] = vec4(vec3(texpaint_sample.a, texpaint_sample.a, texpaint_sample.a), 1.0);");
		} else if(arm_Context.viewportMode == 7) {
			frag.write("fragColor[1] = vec4(texCoord, 0.0, 1.0);");
		} else if(arm_Context.viewportMode == 8) {
			frag.nAttr = true;
			frag.write("fragColor[1] = vec4(nAttr, 1.0);");
		} else if(arm_Context.viewportMode == 9) {
			frag.write("float sample_matid = textureLodShared(texpaint_nor, texCoord, 0.0).a + 1.0 / 255.0;");
			frag.write("float matid_r = fract(sin(dot(vec2(sample_matid, sample_matid * 20.0), vec2(12.9898, 78.233))) * 43758.5453);");
			frag.write("float matid_g = fract(sin(dot(vec2(sample_matid * 20.0, sample_matid), vec2(12.9898, 78.233))) * 43758.5453);");
			frag.write("float matid_b = fract(sin(dot(vec2(sample_matid, sample_matid * 40.0), vec2(12.9898, 78.233))) * 43758.5453);");
			frag.write("fragColor[1] = vec4(matid_r, matid_g, matid_b, 1.0);");
		} else if(arm_Context.viewportMode == 10) {
			frag.add_uniform("float objectId","_objectId");
			frag.write("float obid = objectId + 1.0 / 255.0;");
			frag.write("float id_r = fract(sin(dot(vec2(obid, obid * 20.0), vec2(12.9898, 78.233))) * 43758.5453);");
			frag.write("float id_g = fract(sin(dot(vec2(obid * 20.0, obid), vec2(12.9898, 78.233))) * 43758.5453);");
			frag.write("float id_b = fract(sin(dot(vec2(obid, obid * 40.0), vec2(12.9898, 78.233))) * 43758.5453);");
			frag.write("fragColor[1] = vec4(id_r, id_g, id_b, 1.0);");
		} else if(arm_Context.viewportMode == 11 && arm_Context.layer.texpaint_mask != null) {
			frag.write("float sample_mask = textureLod(texpaint_mask_view, texCoord, 0.0).r;");
			frag.write("fragColor[1] = vec4(sample_mask, sample_mask, sample_mask, 1.0);");
		} else {
			frag.write("fragColor[1] = vec4(1.0, 0.0, 1.0, 1.0);");
		}
	}
	frag.write("vec2 posa = (wvpposition.xy / wvpposition.w) * 0.5 + 0.5;");
	frag.write("vec2 posb = (prevwvpposition.xy / prevwvpposition.w) * 0.5 + 0.5;");
	frag.write("fragColor[2] = vec4(posa - posb, texCoord.xy);");
	arm_shader_MaterialParser.finalize(con_mesh);
	con_mesh.data.shader_from_source = true;
	con_mesh.data.vertex_shader = vert.get();
	con_mesh.data.fragment_shader = frag.get();
	return con_mesh;
};
arm_node_MakeMesh.getMaxTextures = function() {
	return 62;
};
var arm_node_MakeMeshPreview = function() { };
$hxClasses["arm.node.MakeMeshPreview"] = arm_node_MakeMeshPreview;
arm_node_MakeMeshPreview.__name__ = "arm.node.MakeMeshPreview";
arm_node_MakeMeshPreview.run = function(data,matcon) {
	var isScene = arm_ui_UIHeader.inst.worktab.position == 3;
	var con_mesh = data.add_context({ name : "mesh", depth_write : true, compare_mode : "less", cull_mode : arm_Context.cullBackfaces || !isScene ? "clockwise" : "none", vertex_elements : [{ name : "pos", data : "short4norm"},{ name : "nor", data : "short2norm"},{ name : "tex", data : "short2norm"}], color_attachments : ["RGBA64","RGBA64","RGBA64"], depth_attachment : "DEPTH32"});
	var vert = con_mesh.make_vert();
	var frag = con_mesh.make_frag();
	frag.ins = vert.outs;
	vert.add_uniform("mat4 WVP","_worldViewProjectionMatrix");
	vert.write_attrib("gl_Position = mul(vec4(" + "pos" + ".xyz, 1.0), WVP);");
	var brushScale = arm_Context.brushScale * arm_Context.brushNodesScale + "";
	vert.add_out("vec2 texCoord");
	vert.write_attrib("texCoord = tex * " + brushScale + ";");
	if(arm_node_MakeMaterial.heightUsed) {
		frag.bposition = true;
	}
	var decal = arm_Context.decalPreview;
	arm_shader_MaterialParser.sample_keep_aspect = decal;
	arm_shader_MaterialParser.sample_uv_scale = brushScale;
	arm_shader_MaterialParser.parse_height = arm_node_MakeMaterial.heightUsed;
	var sout = arm_shader_MaterialParser.parse(arm_ui_UINodes.inst.getCanvasMaterial(),con_mesh,vert,frag,null,null,null,matcon);
	arm_shader_MaterialParser.parse_height = false;
	arm_shader_MaterialParser.sample_keep_aspect = false;
	var rough = sout.out_roughness;
	var met = sout.out_metallic;
	var occ = sout.out_occlusion;
	var opac = sout.out_opacity;
	var nortan = arm_shader_MaterialParser.out_normaltan;
	frag.write("vec3 basecol = pow(" + sout.out_basecol + ", vec3(2.2, 2.2, 2.2));");
	frag.write("float roughness = " + rough + ";");
	frag.write("float metallic = " + met + ";");
	frag.write("float occlusion = " + occ + ";");
	frag.write("float opacity = " + opac + ";");
	frag.write("vec3 nortan = " + nortan + ";");
	if(decal) {
		if(arm_Context.tool == 4) {
			frag.add_uniform("sampler2D textexttool","_textexttool");
			frag.write("opacity *= textureLod(textexttool, texCoord, 0.0).r;");
		}
	}
	if(decal || isScene) {
		frag.write("if (opacity < " + (isScene ? arm_node_MakeMeshPreview.opacityDiscardScene : arm_node_MakeMeshPreview.opacityDiscardDecal) + ") discard;");
	}
	frag.add_out("vec4 fragColor[3]");
	frag.n = true;
	frag.add_function(arm_shader_ShaderFunctions.str_packFloatInt16);
	frag.add_function(arm_shader_ShaderFunctions.str_cotangentFrame);
	frag.add_function(arm_shader_ShaderFunctions.str_octahedronWrap);
	if(!decal) {
		frag.vVec = true;
		frag.write("mat3 TBN = cotangentFrame(n, vVec, texCoord);");
		frag.write("n = nortan * 2.0 - 1.0;");
		frag.write("n.y = -n.y;");
		frag.write("n = normalize(mul(n, TBN));");
	}
	frag.write("n /= (abs(n.x) + abs(n.y) + abs(n.z));");
	frag.write("n.xy = n.z >= 0.0 ? n.xy : octahedronWrap(n.xy);");
	frag.write("fragColor[0] = vec4(n.x, n.y, roughness, packFloatInt16(metallic, uint(0)));");
	frag.write("fragColor[1] = vec4(basecol.r, basecol.g, basecol.b, occlusion);");
	frag.write("fragColor[2] = vec4(0.0, 0.0, 0.0, 0.0);");
	arm_shader_MaterialParser.finalize(con_mesh);
	con_mesh.data.shader_from_source = true;
	con_mesh.data.vertex_shader = vert.get();
	con_mesh.data.fragment_shader = frag.get();
	return con_mesh;
};
var arm_node_MakeNodePreview = function() { };
$hxClasses["arm.node.MakeNodePreview"] = arm_node_MakeNodePreview;
arm_node_MakeNodePreview.__name__ = "arm.node.MakeNodePreview";
arm_node_MakeNodePreview.run = function(data,matcon,node) {
	var con_mesh = data.add_context({ name : "mesh", depth_write : true, compare_mode : "less", cull_mode : "clockwise", vertex_elements : [{ name : "pos", data : "short4norm"},{ name : "nor", data : "short2norm"},{ name : "tex", data : "short2norm"},{ name : "col", data : "short4norm"}], color_attachments : ["RGBA32"]});
	con_mesh.allow_vcols = true;
	var vert = con_mesh.make_vert();
	var frag = con_mesh.make_frag();
	frag.ins = vert.outs;
	vert.write_attrib("gl_Position = vec4(pos.xy * 3.0, 0.0, 1.0);");
	vert.write_attrib("const vec2 madd = vec2(0.5, 0.5);");
	vert.add_out("vec2 texCoord");
	vert.write_attrib("texCoord = gl_Position.xy * madd + madd;");
	vert.write_attrib("texCoord.y = 1.0 - texCoord.y;");
	var canvas_nodes = arm_Context.material.canvas.nodes;
	var canvas_links = arm_Context.material.canvas.links;
	var link = { id : arm_Context.material.nodes.getLinkId(canvas_links), from_id : node.id, from_socket : arm_Context.nodePreviewSocket, to_id : 0, to_socket : 0};
	canvas_links.push(link);
	arm_shader_MaterialParser.init();
	arm_shader_MaterialParser.nodes = canvas_nodes;
	arm_shader_MaterialParser.links = canvas_links;
	arm_shader_MaterialParser.con = con_mesh;
	arm_shader_MaterialParser.vert = vert;
	arm_shader_MaterialParser.frag = frag;
	arm_shader_MaterialParser.curshader = frag;
	arm_shader_MaterialParser.matcon = matcon;
	var res = arm_shader_MaterialParser.write_result(link);
	var st = node.outputs[link.from_socket].type;
	if(st != "RGB" && st != "RGBA" && st != "VECTOR") {
		res = "(" + res + ").xxx";
	}
	HxOverrides.remove(canvas_links,link);
	frag.add_out("vec4 fragColor");
	frag.write("vec3 basecol = " + res + ";");
	frag.write("fragColor = vec4(basecol.rgb, 1.0);");
	arm_shader_MaterialParser.finalize(con_mesh);
	con_mesh.data.shader_from_source = true;
	con_mesh.data.vertex_shader = vert.get();
	con_mesh.data.fragment_shader = frag.get();
	return con_mesh;
};
var arm_node_MakePaint = function() { };
$hxClasses["arm.node.MakePaint"] = arm_node_MakePaint;
arm_node_MakePaint.__name__ = "arm.node.MakePaint";
arm_node_MakePaint.run = function(data,matcon) {
	while(true) {
		var layered = arm_Context.layer != arm_Project.layers[0];
		var eraser = arm_Context.tool == 1;
		var con_paint = data.add_context({ name : "paint", depth_write : false, compare_mode : "always", cull_mode : "none", vertex_elements : [{ name : "pos", data : "short4norm"},{ name : "nor", data : "short2norm"},{ name : "tex", data : "short2norm"}], color_attachments : arm_Context.tool == 8 ? ["RGBA32"] : arm_Context.tool == 9 ? [arm_Context.layerIsMask ? "R8" : "RGBA32","RGBA32","RGBA32"] : [arm_Context.layerIsMask ? "R8" : "RGBA32","RGBA32","RGBA32","R8"]});
		con_paint.data.color_writes_red = [true,true,true,true];
		con_paint.data.color_writes_green = [true,true,true,true];
		con_paint.data.color_writes_blue = [true,true,true,true];
		con_paint.data.color_writes_alpha = [true,true,true,true];
		con_paint.allow_vcols = arm_Context.paintObject.data.geom.cols != null;
		var vert = con_paint.make_vert();
		var frag = con_paint.make_frag();
		frag.ins = vert.outs;
		if(arm_Context.tool == 11) {
			arm_node_MakeBake.setColorWrites(con_paint);
		}
		if(arm_Context.tool == 8 || arm_Context.tool == 9) {
			arm_node_MakeColorIdPicker.run(vert,frag);
			con_paint.data.shader_from_source = true;
			con_paint.data.vertex_shader = vert.get();
			con_paint.data.fragment_shader = frag.get();
			return con_paint;
		}
		var faceFill = arm_Context.tool == 2 && arm_Context.fillTypeHandle.position == 1;
		var decal = arm_Context.tool == 3 || arm_Context.tool == 4;
		if(!faceFill && !decal) {
			vert.add_uniform("vec2 sub","_sub");
			vert.write("vec2 subtex = tex + sub;");
		} else {
			vert.write("vec2 subtex = tex;");
			if(decal) {
				vert.add_uniform("vec2 sub","_sub");
				vert.add_uniform("vec4 decalMask","_decalMask");
				vert.write("vec4 decalMaskLocal = decalMask;");
				vert.write("if (decalMaskLocal.z > 0.0) subtex += sub;");
			}
		}
		vert.write("vec2 tpos = vec2(subtex.x * 2.0 - 1.0, (1.0 - subtex.y) * 2.0 - 1.0);");
		vert.write("gl_Position = vec4(tpos, 0.0, 1.0);");
		if(arm_Context.layer.fill_layer != null && arm_Context.layer.uvType == 2) {
			vert.add_uniform("mat4 WVP","_decalLayerMatrix");
		} else {
			vert.add_uniform("mat4 WVP","_worldViewProjectionMatrix");
		}
		vert.add_out("vec4 ndc");
		vert.write_attrib("ndc = mul(vec4(pos.xyz, 1.0), WVP);");
		frag.write_attrib("vec3 sp = vec3((ndc.xyz / ndc.w) * 0.5 + 0.5);");
		frag.write_attrib("sp.y = 1.0 - sp.y;");
		frag.write_attrib("sp.z -= 0.0001;");
		if((arm_Context.layer.fill_layer != null ? arm_Context.layer.uvType : arm_Context.brushPaint) == 2) {
			frag.ndcpos = true;
		}
		frag.add_uniform("vec4 inp","_inputBrush");
		frag.add_uniform("vec4 inplast","_inputBrushLast");
		frag.add_uniform("float aspectRatio","_aspectRatioWindowF");
		frag.write("vec2 bsp = sp.xy * 2.0 - 1.0;");
		frag.write("bsp.x *= aspectRatio;");
		frag.write("bsp = bsp * 0.5 + 0.5;");
		frag.add_uniform("sampler2D gbufferD");
		frag.add_out("vec4 fragColor[4]");
		frag.add_uniform("float brushRadius","_brushRadius");
		frag.add_uniform("float brushOpacity","_brushOpacity");
		frag.add_uniform("float brushHardness","_brushHardness");
		if(arm_Context.tool == 0 || arm_Context.tool == 1 || arm_Context.tool == 5 || arm_Context.tool == 6 || arm_Context.tool == 7 || decal) {
			var depthReject = !arm_Context.xray;
			if(arm_Config.raw.brush_3d && !arm_Context.brushDepthReject) {
				depthReject = false;
			}
			if(arm_Config.raw.brush_3d && !decal && arm_node_MakeMaterial.heightUsed) {
				depthReject = false;
			}
			if(arm_Context.symX || arm_Context.symY || arm_Context.symZ) {
				depthReject = false;
			}
			if(depthReject) {
				frag.write("if (sp.z > textureLod(gbufferD, sp.xy, 0.0).r + 0.0005) discard;");
			}
			arm_node_MakeBrush.run(vert,frag);
		} else {
			frag.write("float dist = 0.0;");
			if(arm_Context.tool == 2 && arm_Context.fillTypeHandle.position == 2) {
				frag.add_function(arm_shader_ShaderFunctions.str_octahedronWrap);
				frag.add_uniform("sampler2D gbuffer0");
				frag.write("vec2 g0 = textureLod(gbuffer0, inp.xy, 0.0).rg;");
				frag.write("vec3 wn;");
				frag.write("wn.z = 1.0 - abs(g0.x) - abs(g0.y);");
				frag.write("wn.xy = wn.z >= 0.0 ? g0.xy : octahedronWrap(g0.xy);");
				frag.write("wn = normalize(wn);");
				frag.n = true;
				frag.write("if (dot(wn, n) < " + arm_Context.brushAngleRejectDot + ") discard;");
			}
			if(arm_Context.tool == 2 && arm_Context.brushStencilImage != null) {
				frag.write("if (sp.z > textureLod(gbufferD, sp.xy, 0.0).r + 0.0005) discard;");
			}
		}
		if(arm_Context.colorIdPicked || faceFill) {
			vert.add_out("vec2 texCoordPick");
			vert.write("texCoordPick = subtex;");
			if(arm_Context.colorIdPicked) {
				arm_node_MakeDiscard.colorId(vert,frag);
			}
			if(faceFill) {
				arm_node_MakeDiscard.face(vert,frag);
			}
		}
		if(arm_Context.pickerMaskHandle.position == 1) {
			arm_node_MakeDiscard.materialId(vert,frag);
		}
		arm_node_MakeTexcoord.run(vert,frag);
		if(arm_Context.tool == 5 || arm_Context.tool == 6) {
			frag.add_uniform("sampler2D gbuffer2");
			frag.add_uniform("vec2 gbufferSize","_gbufferSize");
			frag.add_uniform("sampler2D texpaint_undo","_texpaint_undo");
			frag.add_uniform("sampler2D texpaint_nor_undo","_texpaint_nor_undo");
			frag.add_uniform("sampler2D texpaint_pack_undo","_texpaint_pack_undo");
			if(arm_Context.tool == 5) {
				arm_node_MakeClone.run(vert,frag);
			} else {
				arm_node_MakeBlur.run(vert,frag);
			}
		} else {
			arm_shader_MaterialParser.parse_emission = arm_Context.material.paintEmis;
			arm_shader_MaterialParser.parse_subsurface = arm_Context.material.paintSubs;
			arm_shader_MaterialParser.parse_height = arm_Context.material.paintHeight;
			arm_shader_MaterialParser.parse_height_as_channel = true;
			arm_shader_MaterialParser.triplanar = (arm_Context.layer.fill_layer != null ? arm_Context.layer.uvType : arm_Context.brushPaint) == 1 && !decal;
			arm_shader_MaterialParser.sample_keep_aspect = decal;
			arm_shader_MaterialParser.sample_uv_scale = "brushScale";
			var sout = arm_shader_MaterialParser.parse(arm_ui_UINodes.inst.getCanvasMaterial(),con_paint,vert,frag,null,null,null,matcon);
			arm_shader_MaterialParser.parse_emission = false;
			arm_shader_MaterialParser.parse_subsurface = false;
			arm_shader_MaterialParser.parse_height_as_channel = false;
			arm_shader_MaterialParser.parse_height = false;
			var rough = sout.out_roughness;
			var met = sout.out_metallic;
			var occ = sout.out_occlusion;
			var nortan = arm_shader_MaterialParser.out_normaltan;
			var height = sout.out_height;
			var opac = sout.out_opacity;
			var emis = sout.out_emission;
			var subs = sout.out_subsurface;
			frag.write("vec3 basecol = " + sout.out_basecol + ";");
			frag.write("float roughness = " + rough + ";");
			frag.write("float metallic = " + met + ";");
			frag.write("float occlusion = " + occ + ";");
			frag.write("vec3 nortan = " + nortan + ";");
			frag.write("float height = " + height + ";");
			frag.write("float mat_opacity = " + opac + ";");
			frag.write("float opacity = mat_opacity;");
			if(arm_Context.layer.fill_layer == null) {
				frag.write("opacity *= brushOpacity;");
			}
			if(arm_Context.material.paintEmis) {
				frag.write("float emis = " + emis + ";");
			}
			if(arm_Context.material.paintSubs) {
				frag.write("float subs = " + subs + ";");
			}
			if(height != "0" && !arm_node_MakeMaterial.heightUsed) {
				arm_node_MakeMaterial.heightUsed = true;
				continue;
			}
			if(emis != "0") {
				arm_node_MakeMaterial.emisUsed = true;
			}
			if(subs != "0") {
				arm_node_MakeMaterial.subsUsed = true;
			}
		}
		if(arm_Context.brushMaskImage != null && arm_Context.tool == 3) {
			frag.add_uniform("sampler2D texbrushmask","_texbrushmask");
			frag.write("vec4 mask_sample = textureLod(texbrushmask, uvsp, 0.0);");
			frag.write("opacity *= mask_sample.r * mask_sample.a;");
		} else if(arm_Context.tool == 4) {
			frag.add_uniform("sampler2D textexttool","_textexttool");
			frag.write("opacity *= textureLod(textexttool, uvsp, 0.0).r;");
		}
		if(arm_Context.brushStencilImage != null && (arm_Context.tool == 0 || arm_Context.tool == 1 || arm_Context.tool == 2 || arm_Context.tool == 5 || arm_Context.tool == 6 || arm_Context.tool == 7 || decal)) {
			frag.add_uniform("sampler2D texbrushstencil","_texbrushstencil");
			frag.add_uniform("vec4 stencilTransform","_stencilTransform");
			frag.write("vec2 stencil_uv = vec2((sp.xy - stencilTransform.xy) / stencilTransform.z * vec2(aspectRatio, 1.0));");
			frag.write("vec2 stencil_size = textureSize(texbrushstencil, 0);");
			frag.write("float stencil_ratio = stencil_size.y / stencil_size.x;");
			frag.write("stencil_uv -= vec2(0.5 / stencil_ratio, 0.5);");
			frag.write("stencil_uv = vec2(stencil_uv.x * cos(stencilTransform.w) - stencil_uv.y * sin(stencilTransform.w),\r\n\t\t\t\t\t\t\t\t\t\t  stencil_uv.x * sin(stencilTransform.w) + stencil_uv.y * cos(stencilTransform.w));");
			frag.write("stencil_uv += vec2(0.5 / stencil_ratio, 0.5);");
			frag.write("stencil_uv.x *= stencil_ratio;");
			frag.write("if (stencil_uv.x < 0 || stencil_uv.x > 1 || stencil_uv.y < 0 || stencil_uv.y > 1) discard;");
			frag.write("vec4 texbrushstencil_sample = textureLod(texbrushstencil, stencil_uv, 0.0);");
			frag.write("opacity *= texbrushstencil_sample.r * texbrushstencil_sample.a;");
		}
		if(arm_Context.brushMaskImage != null && (arm_Context.tool == 0 || arm_Context.tool == 1)) {
			frag.add_uniform("sampler2D texbrushmask","_texbrushmask");
			frag.write("vec2 binp_mask = inp.xy * 2.0 - 1.0;");
			frag.write("binp_mask.x *= aspectRatio;");
			frag.write("binp_mask = binp_mask * 0.5 + 0.5;");
			frag.write("vec2 pa_mask = bsp.xy - binp_mask.xy;");
			if(arm_Context.brushDirectional) {
				frag.add_uniform("vec3 brushDirection","_brushDirection");
				frag.write("if (brushDirection.z == 0.0) discard;");
				frag.write("pa_mask = vec2(pa_mask.x * brushDirection.x - pa_mask.y * brushDirection.y, pa_mask.x * brushDirection.y + pa_mask.y * brushDirection.x);");
			}
			if(arm_Context.brushAngle + arm_Context.brushNodesAngle != 0.0) {
				frag.add_uniform("vec2 brushAngle","_brushAngle");
				frag.write("pa_mask.xy = vec2(pa_mask.x * brushAngle.x - pa_mask.y * brushAngle.y, pa_mask.x * brushAngle.y + pa_mask.y * brushAngle.x);");
			}
			frag.write("pa_mask /= brushRadius;");
			if(arm_Config.raw.brush_3d) {
				frag.add_uniform("vec3 eye","_cameraPosition");
				frag.write("pa_mask *= distance(eye, winp.xyz) / 1.5;");
			}
			frag.write("pa_mask = pa_mask.xy * 0.5 + 0.5;");
			frag.write("vec4 mask_sample = textureLod(texbrushmask, pa_mask, 0.0);");
			frag.write("opacity *= mask_sample.r * mask_sample.a;");
		}
		if(arm_Context.tool == 7) {
			frag.add_uniform("sampler2D texparticle","_texparticle");
			frag.write("float str = textureLod(texparticle, sp.xy, 0.0).r;");
		} else {
			frag.write("float str = clamp((brushRadius - dist) * brushHardness * 400.0, 0.0, 1.0) * opacity;");
		}
		frag.wvpposition = true;
		frag.write("vec2 sample_tc = vec2(wvpposition.x / wvpposition.w, wvpposition.y / wvpposition.w) * 0.5 + 0.5;");
		frag.write("sample_tc.y = 1.0 - sample_tc.y;");
		frag.add_uniform("sampler2D paintmask");
		frag.write("float sample_mask = textureLod(paintmask, sample_tc, 0.0).r;");
		frag.write("str = max(str, sample_mask);");
		frag.add_uniform("sampler2D texpaint_undo","_texpaint_undo");
		frag.write("vec4 sample_undo = textureLod(texpaint_undo, sample_tc, 0.0);");
		var matid = arm_Context.material.id / 255;
		if(arm_Context.pickerMaskHandle.position == 1) {
			matid = arm_Context.materialIdPicked / 255;
		}
		frag.write("float matid = " + ("" + matid) + ";");
		if(arm_Context.material.paintSubs) {
			frag.write("if (subs > 0.0) {");
			frag.write("    matid = 254.0 / 255.0;");
			frag.write("\tif (str == 0.0) discard;");
			frag.write("}");
		}
		if(arm_Context.material.paintEmis) {
			frag.write("if (emis > 0.0) {");
			frag.write("\tmatid = 1.0;");
			frag.write("\tif (str == 0.0) discard;");
			frag.write("}");
		}
		if(layered) {
			if(eraser) {
				frag.write("fragColor[0] = vec4(mix(sample_undo.rgb, vec3(0.0, 0.0, 0.0), str), sample_undo.a - str);");
				frag.write("nortan = vec3(0.5, 0.5, 1.0);");
				frag.write("occlusion = 1.0;");
				frag.write("roughness = 0.0;");
				frag.write("metallic = 0.0;");
				frag.write("matid = 0.0;");
			} else if(decal || arm_Context.brushMaskImage != null) {
				frag.write("fragColor[0] = vec4(" + arm_node_MakeMaterial.blendMode(frag,arm_Context.brushBlending,"sample_undo.rgb","basecol","str") + ", max(str, sample_undo.a));");
			} else if(arm_Context.layer.fill_layer != null) {
				frag.write("fragColor[0] = vec4(" + arm_node_MakeMaterial.blendMode(frag,arm_Context.brushBlending,"sample_undo.rgb","basecol","opacity") + ", mat_opacity);");
			} else {
				frag.write("fragColor[0] = vec4(" + arm_node_MakeMaterial.blendMode(frag,arm_Context.brushBlending,"sample_undo.rgb","basecol","opacity") + ", max(str, sample_undo.a));");
			}
			frag.write("fragColor[1] = vec4(nortan, matid);");
			var height1 = "0.0";
			if(arm_Context.material.paintHeight && arm_node_MakeMaterial.heightUsed) {
				height1 = "height";
			}
			if(decal) {
				frag.add_uniform("sampler2D texpaint_pack_undo","_texpaint_pack_undo");
				frag.write("vec4 sample_pack_undo = textureLod(texpaint_pack_undo, sample_tc, 0.0);");
				frag.write("fragColor[2] = mix(sample_pack_undo, vec4(occlusion, roughness, metallic, " + height1 + "), str);");
			} else {
				frag.write("fragColor[2] = vec4(occlusion, roughness, metallic, " + height1 + ");");
			}
		} else if(eraser) {
			frag.write("fragColor[0] = vec4(mix(sample_undo.rgb, vec3(0.0, 0.0, 0.0), str), sample_undo.a - str);");
			frag.write("fragColor[1] = vec4(0.5, 0.5, 1.0, 0.0);");
			frag.write("fragColor[2] = vec4(1.0, 0.0, 0.0, 0.0);");
		} else {
			frag.add_uniform("sampler2D texpaint_nor_undo","_texpaint_nor_undo");
			frag.add_uniform("sampler2D texpaint_pack_undo","_texpaint_pack_undo");
			frag.write("vec4 sample_nor_undo = textureLod(texpaint_nor_undo, sample_tc, 0.0);");
			frag.write("vec4 sample_pack_undo = textureLod(texpaint_pack_undo, sample_tc, 0.0);");
			frag.write("fragColor[0] = vec4(" + arm_node_MakeMaterial.blendMode(frag,arm_Context.brushBlending,"sample_undo.rgb","basecol","str") + ", max(str, sample_undo.a));");
			frag.write("fragColor[1] = vec4(mix(sample_nor_undo.rgb, nortan, str), matid);");
			if(arm_Context.material.paintHeight && arm_node_MakeMaterial.heightUsed) {
				frag.write("fragColor[2] = mix(sample_pack_undo, vec4(occlusion, roughness, metallic, height), str);");
			} else {
				frag.write("fragColor[2] = vec4(mix(sample_pack_undo.rgb, vec3(occlusion, roughness, metallic), str), 0.0);");
			}
		}
		frag.write("fragColor[3] = vec4(str, 0.0, 0.0, 1.0);");
		if(!arm_Context.material.paintBase) {
			con_paint.data.color_writes_red[0] = false;
			con_paint.data.color_writes_green[0] = false;
			con_paint.data.color_writes_blue[0] = false;
		}
		if(!arm_Context.material.paintOpac) {
			con_paint.data.color_writes_alpha[0] = false;
		}
		if(!arm_Context.material.paintNor) {
			con_paint.data.color_writes_red[1] = false;
			con_paint.data.color_writes_green[1] = false;
			con_paint.data.color_writes_blue[1] = false;
		}
		if(!arm_Context.material.paintOcc) {
			con_paint.data.color_writes_red[2] = false;
		}
		if(!arm_Context.material.paintRough) {
			con_paint.data.color_writes_green[2] = false;
		}
		if(!arm_Context.material.paintMet) {
			con_paint.data.color_writes_blue[2] = false;
		}
		if(!arm_Context.material.paintHeight) {
			con_paint.data.color_writes_alpha[2] = false;
		}
		if(arm_Context.layerIsMask) {
			con_paint.data.color_writes_red[1] = false;
			con_paint.data.color_writes_green[1] = false;
			con_paint.data.color_writes_blue[1] = false;
			con_paint.data.color_writes_red[2] = false;
			con_paint.data.color_writes_green[2] = false;
			con_paint.data.color_writes_blue[2] = false;
			con_paint.data.color_writes_alpha[2] = false;
		}
		if(arm_Context.tool == 11) {
			arm_node_MakeBake.run(con_paint,vert,frag);
		}
		arm_shader_MaterialParser.finalize(con_paint);
		arm_shader_MaterialParser.triplanar = false;
		arm_shader_MaterialParser.sample_keep_aspect = false;
		con_paint.data.shader_from_source = true;
		con_paint.data.vertex_shader = vert.get();
		con_paint.data.fragment_shader = frag.get();
		return con_paint;
	}
};
var arm_node_MakeParticle = function() { };
$hxClasses["arm.node.MakeParticle"] = arm_node_MakeParticle;
arm_node_MakeParticle.__name__ = "arm.node.MakeParticle";
arm_node_MakeParticle.run = function(data) {
	var con_part = data.add_context({ name : "mesh", depth_write : false, compare_mode : "always", cull_mode : "clockwise", vertex_elements : [{ name : "pos", data : "short4norm"}], color_attachments : ["R8"]});
	var vert = con_part.make_vert();
	var frag = con_part.make_frag();
	frag.ins = vert.outs;
	vert.write_attrib("vec4 spos = vec4(pos.xyz, 1.0);");
	vert.add_uniform("float brushRadius","_brushRadius");
	vert.write_attrib("vec3 emitFrom = vec3(fhash(gl_InstanceID), fhash(gl_InstanceID * 2), fhash(gl_InstanceID * 3));");
	vert.write_attrib("emitFrom = emitFrom * brushRadius - brushRadius / 2.0;");
	vert.write_attrib("spos.xyz += emitFrom * vec3(256.0, 256.0, 256.0);");
	vert.add_uniform("mat4 pd","_particleData");
	vert.add_function("float fhash(int n) { return fract(sin(float(n)) * 43758.5453); }\n");
	vert.add_out("float p_age");
	vert.write("p_age = pd[3][3] - float(gl_InstanceID) * pd[0][1];");
	vert.write("p_age -= p_age * fhash(gl_InstanceID) * pd[2][3];");
	vert.write("if (pd[0][0] > 0.0 && p_age < 0.0) p_age += float(int(-p_age / pd[0][0]) + 1) * pd[0][0];");
	vert.add_out("float p_lifetime");
	vert.write("p_lifetime = pd[0][2];");
	vert.write("if (p_age < 0.0 || p_age > p_lifetime) {");
	vert.write("spos /= 0.0;");
	vert.write("}");
	vert.add_out("vec3 p_velocity");
	vert.write("p_velocity = vec3(pd[1][0], pd[1][1], pd[1][2]);");
	vert.write("p_velocity.x += fhash(gl_InstanceID)                     * pd[1][3] - pd[1][3] / 2.0;");
	vert.write("p_velocity.y += fhash(gl_InstanceID +     int(pd[0][3])) * pd[1][3] - pd[1][3] / 2.0;");
	vert.write("p_velocity.z += fhash(gl_InstanceID + 2 * int(pd[0][3])) * pd[1][3] - pd[1][3] / 2.0;");
	vert.write("p_velocity.x += (pd[2][0] * p_age) / 5.0;");
	vert.write("p_velocity.y += (pd[2][1] * p_age) / 5.0;");
	vert.write("p_velocity.z += (pd[2][2] * p_age) / 5.0;");
	vert.add_out("vec3 p_location");
	vert.write("p_location = p_velocity * p_age;");
	vert.write("spos.xyz += p_location;");
	vert.add_uniform("mat4 WVP","_worldViewProjectionMatrix");
	vert.write("gl_Position = mul(spos, WVP);");
	vert.add_uniform("vec4 inp","_inputBrush");
	vert.write("vec2 binp = vec2(inp.x, 1.0 - inp.y);");
	vert.write("binp = binp * 2.0 - 1.0;");
	vert.write("binp *= gl_Position.w;");
	vert.write("gl_Position.xy += binp;");
	vert.add_out("float p_fade");
	vert.write("p_fade = sin(min((p_age / 8.0) * 3.141592, 3.141592));");
	frag.add_out("float fragColor");
	frag.write("fragColor = p_fade;");
	con_part.data.shader_from_source = true;
	con_part.data.vertex_shader = vert.get();
	con_part.data.fragment_shader = frag.get();
	return con_part;
};
var arm_node_MakeTexcoord = function() { };
$hxClasses["arm.node.MakeTexcoord"] = arm_node_MakeTexcoord;
arm_node_MakeTexcoord.__name__ = "arm.node.MakeTexcoord";
arm_node_MakeTexcoord.run = function(vert,frag) {
	var fillLayer = arm_Context.layer.fill_layer != null;
	var uvType = fillLayer ? arm_Context.layer.uvType : arm_Context.brushPaint;
	var decal = arm_Context.tool == 3 || arm_Context.tool == 4;
	if(uvType == 2 || decal) {
		frag.add_uniform("float brushScale","_brushScale");
		frag.write_attrib("vec2 uvsp = sp.xy;");
		if(fillLayer) {
			frag.write_attrib("uvsp.x *= aspectRatio;");
			frag.write_attrib("uvsp.xy *= 4.0;");
		} else if(decal) {
			frag.add_uniform("vec4 decalMask","_decalMask");
			frag.write_attrib("vec4 decalMaskLocal = decalMask;");
			frag.write_attrib("uvsp -= decalMaskLocal.xy;");
			frag.write_attrib("uvsp.x *= aspectRatio;");
			frag.write_attrib("uvsp *= 0.21 / (decalMaskLocal.w * 0.9);");
			if(arm_Context.brushDirectional) {
				frag.add_uniform("vec3 brushDirection","_brushDirection");
				frag.write_attrib("if (brushDirection.z == 0.0) discard;");
				frag.write_attrib("uvsp = vec2(uvsp.x * brushDirection.x - uvsp.y * brushDirection.y, uvsp.x * brushDirection.y + uvsp.y * brushDirection.x);");
			}
			if((arm_Context.layer.fill_layer != null ? arm_Context.layer.angle : arm_Context.brushAngle + arm_Context.brushNodesAngle) != 0.0) {
				frag.add_uniform("vec2 brushAngle","_brushAngle");
				frag.write_attrib("uvsp = vec2(uvsp.x * brushAngle.x - uvsp.y * brushAngle.y, uvsp.x * brushAngle.y + uvsp.y * brushAngle.x);");
			}
			frag.add_uniform("float brushScaleX","_brushScaleX");
			frag.write_attrib("uvsp.x *= brushScaleX;");
			frag.write_attrib("uvsp += vec2(0.5, 0.5);");
			frag.write_attrib("if (uvsp.x < 0.0 || uvsp.y < 0.0 || uvsp.x > 1.0 || uvsp.y > 1.0) discard;");
		} else {
			frag.write_attrib("uvsp.x *= aspectRatio;");
		}
		frag.write_attrib("vec2 texCoord = uvsp * brushScale;");
	} else if(uvType == 0) {
		vert.add_uniform("float brushScale","_brushScale");
		vert.add_out("vec2 texCoord");
		vert.write("texCoord = subtex * brushScale;");
		if((arm_Context.layer.fill_layer != null ? arm_Context.layer.angle : arm_Context.brushAngle + arm_Context.brushNodesAngle) > 0.0) {
			vert.add_uniform("vec2 brushAngle","_brushAngle");
			vert.write("texCoord = vec2(texCoord.x * brushAngle.x - texCoord.y * brushAngle.y, texCoord.x * brushAngle.y + texCoord.y * brushAngle.x);");
		}
	} else {
		frag.wposition = true;
		frag.n = true;
		frag.add_uniform("float brushScale","_brushScale");
		frag.write_attrib("vec3 triWeight = wnormal * wnormal;");
		frag.write_attrib("float triMax = max(triWeight.x, max(triWeight.y, triWeight.z));");
		frag.write_attrib("triWeight = max(triWeight - triMax * 0.75, 0.0);");
		frag.write_attrib("vec3 texCoordBlend = triWeight * (1.0 / (triWeight.x + triWeight.y + triWeight.z));");
		frag.write_attrib("vec2 texCoord = wposition.yz * brushScale * 0.5;");
		frag.write_attrib("vec2 texCoord1 = wposition.xz * brushScale * 0.5;");
		frag.write_attrib("vec2 texCoord2 = wposition.xy * brushScale * 0.5;");
	}
};
var arm_node_MakeVoxel = function() { };
$hxClasses["arm.node.MakeVoxel"] = arm_node_MakeVoxel;
arm_node_MakeVoxel.__name__ = "arm.node.MakeVoxel";
arm_node_MakeVoxel.run = function(data) {
	var structure = new kha_graphics4_VertexStructure();
	structure.add("pos",6);
	structure.add("nor",5);
	structure.add("tex",5);
	var pipeState = data.pipeState;
	pipeState.inputLayout = [structure];
	data.raw.vertex_elements = [{ name : "pos", data : "short4norm"},{ name : "nor", data : "short2norm"},{ name : "tex", data : "short2norm"}];
	var ds = arm_Config.raw.displace_strength * 0.02 * arm_Context.mainObject().transform.scale.x;
	var ext = arm_Context.vxaoExt;
	pipeState.vertexShader = kha_graphics4_VertexShader.fromSource("#define vec3 float3\r\n\t\tuniform float4x4 W;\r\n\t\tuniform float3x3 N;\r\n\t\tTexture2D<float4> texpaint_pack;\r\n\t\tSamplerState _texpaint_pack_sampler;\r\n\t\tstruct SPIRV_Cross_Input { float4 pos : TEXCOORD1; float2 nor : TEXCOORD0; float2 tex : TEXCOORD2; };\r\n\t\tstruct SPIRV_Cross_Output { float4 svpos : SV_POSITION; };\r\n\t\tSPIRV_Cross_Output main(SPIRV_Cross_Input stage_input) {\r\n\t\t\tSPIRV_Cross_Output stage_output;\r\n\t\t\t" + ("const vec3 voxelgiHalfExtents = vec3(" + ext + ", " + ext + ", " + ext + ");") + "\r\n\t\t\tstage_output.svpos.xyz = mul(float4(stage_input.pos.xyz, 1.0), W).xyz / voxelgiHalfExtents.xxx;\r\n\t\t\tfloat3 wnormal = normalize(mul(float3(stage_input.nor.xy, stage_input.pos.w), N));\r\n\t\t\tfloat height = texpaint_pack.SampleLevel(_texpaint_pack_sampler, stage_input.tex, 0.0).a;\r\n\t\t\tstage_output.svpos.xyz += wnormal * height.xxx * float3(" + ds + "," + ds + "," + ds + ");\r\n\t\t\tstage_output.svpos.w = 1.0;\r\n\t\t\treturn stage_output;\r\n\t\t}");
	pipeState.compile();
	data.raw.constants = [{ name : "W", type : "mat4", link : "_worldMatrix"},{ name : "N", type : "mat3", link : "_normalMatrix"}];
	data.constants = [pipeState.getConstantLocation("W"),pipeState.getConstantLocation("N")];
	data.raw.texture_units = [{ name : "texpaint_pack"},{ name : "voxels", is_image : true}];
	data.textureUnits = [pipeState.getTextureUnit("texpaint_pack"),pipeState.getTextureUnit("voxels")];
};
var arm_node_brush_BooleanNode = function(tree,value) {
	if(value == null) {
		value = false;
	}
	arm_node_LogicNode.call(this,tree);
	this.value = value;
};
$hxClasses["arm.node.brush.BooleanNode"] = arm_node_brush_BooleanNode;
arm_node_brush_BooleanNode.__name__ = "arm.node.brush.BooleanNode";
arm_node_brush_BooleanNode.__super__ = arm_node_LogicNode;
arm_node_brush_BooleanNode.prototype = $extend(arm_node_LogicNode.prototype,{
	get: function(from) {
		if(this.inputs.length > 0) {
			return this.inputs[0].get();
		}
		return this.value;
	}
	,set: function(value) {
		if(this.inputs.length > 0) {
			this.inputs[0].set(value);
		} else {
			this.value = value;
		}
	}
	,__class__: arm_node_brush_BooleanNode
});
var arm_node_brush_BrushOutputNode = function(tree) {
	this.Directional = false;
	arm_node_LogicNode.call(this,tree);
	arm_Context.runBrush = $bind(this,this.run);
	arm_Context.parseBrushInputs = $bind(this,this.parseInputs);
};
$hxClasses["arm.node.brush.BrushOutputNode"] = arm_node_brush_BrushOutputNode;
arm_node_brush_BrushOutputNode.__name__ = "arm.node.brush.BrushOutputNode";
arm_node_brush_BrushOutputNode.__super__ = arm_node_LogicNode;
arm_node_brush_BrushOutputNode.prototype = $extend(arm_node_LogicNode.prototype,{
	parseInputs: function() {
		var lastMask = arm_Context.brushMaskImage;
		var lastStencil = arm_Context.brushStencilImage;
		var input0;
		var input1;
		var input2;
		var input3;
		var input4;
		var input5;
		var input6;
		try {
			input0 = this.inputs[0].get();
			input1 = this.inputs[1].get();
			input2 = this.inputs[2].get();
			input3 = this.inputs[3].get();
			input4 = this.inputs[4].get();
			input5 = this.inputs[5].get();
			input6 = this.inputs[6].get();
		} catch( _g ) {
			return;
		}
		arm_Context.paintVec = input0;
		arm_Context.brushNodesRadius = input1;
		arm_Context.brushNodesScale = input2;
		arm_Context.brushNodesAngle = input3;
		var opac = input4;
		if(opac == null) {
			opac = 1.0;
		}
		if(typeof(opac) == "string") {
			arm_Context.brushNodesOpacity = 1.0;
			arm_Context.brushMaskImage = arm_Project.getImage(arm_Project.assets[arm_Project.assetNames.indexOf(opac)]);
		} else {
			arm_Context.brushNodesOpacity = opac;
			arm_Context.brushMaskImage = null;
		}
		arm_Context.brushNodesHardness = input5;
		var stencil = input6;
		if(stencil == null) {
			stencil = 1.0;
		}
		if(typeof(stencil) == "string") {
			arm_Context.brushStencilImage = arm_Project.getImage(arm_Project.assets[arm_Project.assetNames.indexOf(stencil)]);
		} else {
			arm_Context.brushStencilImage = null;
		}
		if(lastMask != arm_Context.brushMaskImage || lastStencil != arm_Context.brushStencilImage) {
			arm_node_MakeMaterial.parsePaintMaterial();
		}
		arm_Context.brushDirectional = this.Directional;
	}
	,run: function(from) {
		var left = 0.0;
		var right = 1.0;
		if(arm_Context.paint2d) {
			left = 1.0;
			right = (arm_Context.splitView ? 2.0 : 1.0) + arm_ui_UIView2D.inst.ww / arm_App.w();
		}
		if(arm_Context.lastPaintX < 0 || arm_Context.lastPaintY < 0) {
			arm_Context.lastPaintVecX = arm_Context.paintVec.x;
			arm_Context.lastPaintVecY = arm_Context.paintVec.y;
		}
		var fillLayer = arm_Context.layer.fill_layer != null && arm_Context.tool != 9 && !arm_Context.layerIsMask;
		var groupLayer = arm_Context.layer.getChildren() != null;
		if(arm_Context.paintVec.x > left && arm_Context.paintVec.x < right && arm_Context.paintVec.y > 0 && arm_Context.paintVec.y < 1 && !arm_ui_UISidebar.inst.ui.isHovered && !arm_ui_UISidebar.inst.ui.isScrolling && !fillLayer && !groupLayer && (arm_Context.layer.isVisible() || arm_Context.paint2d) && !arm_App.isDragging && !arm_App.isResizing && arm_ui_UISidebar.inst.ui.comboSelectedHandle == null && arm_ui_UIView2D.inst.ui.comboSelectedHandle == null) {
			var down = iron_system_Input.getMouse().down() || iron_system_Input.getPen().down();
			if(down && arm_Context.tool == 8 && arm_Project.assets.length > 0) {
				arm_Context.colorIdPicked = true;
			}
			if(down && (arm_Context.paintVec.x == arm_Context.lastPaintX && arm_Context.paintVec.y == arm_Context.lastPaintY || arm_Context.tool == 0 && arm_Context.brushLazyRadius > 0)) {
				arm_Context.painted++;
			} else {
				arm_Context.painted = 0;
			}
			arm_Context.lastPaintX = arm_Context.paintVec.x;
			arm_Context.lastPaintY = arm_Context.paintVec.y;
			if(arm_Context.tool == 7) {
				arm_Context.painted = 0;
			}
			if(arm_Context.painted == 0) {
				this.parseInputs();
			}
			if(arm_Context.painted <= (arm_Context.tool == 3 || arm_Context.tool == 4 ? 1 : 4)) {
				arm_Context.pdirty = 1;
				arm_Context.rdirty = 2;
			}
		}
	}
	,__class__: arm_node_brush_BrushOutputNode
});
var arm_node_brush_ColorNode = function(tree,r,g,b,a) {
	if(a == null) {
		a = 1.0;
	}
	if(b == null) {
		b = 0.8;
	}
	if(g == null) {
		g = 0.8;
	}
	if(r == null) {
		r = 0.8;
	}
	this.value = new iron_math_Vec4();
	arm_node_LogicNode.call(this,tree);
	var _this = this.value;
	var w = a;
	if(a == null) {
		w = 1.0;
	}
	_this.x = r;
	_this.y = g;
	_this.z = b;
	_this.w = w;
};
$hxClasses["arm.node.brush.ColorNode"] = arm_node_brush_ColorNode;
arm_node_brush_ColorNode.__name__ = "arm.node.brush.ColorNode";
arm_node_brush_ColorNode.__super__ = arm_node_LogicNode;
arm_node_brush_ColorNode.prototype = $extend(arm_node_LogicNode.prototype,{
	get: function(from) {
		if(this.inputs.length > 0) {
			return this.inputs[0].get();
		}
		return this.value;
	}
	,set: function(value) {
		if(this.inputs.length > 0) {
			this.inputs[0].set(value);
		} else {
			this.value = value;
		}
	}
	,__class__: arm_node_brush_ColorNode
});
var arm_node_brush_FloatNode = function(tree,value) {
	if(value == null) {
		value = 0.0;
	}
	arm_node_LogicNode.call(this,tree);
	this.value = value;
};
$hxClasses["arm.node.brush.FloatNode"] = arm_node_brush_FloatNode;
arm_node_brush_FloatNode.__name__ = "arm.node.brush.FloatNode";
arm_node_brush_FloatNode.__super__ = arm_node_LogicNode;
arm_node_brush_FloatNode.prototype = $extend(arm_node_LogicNode.prototype,{
	get: function(from) {
		if(this.inputs.length > 0) {
			return this.inputs[0].get();
		}
		return this.value;
	}
	,set: function(value) {
		if(this.inputs.length > 0) {
			this.inputs[0].set(value);
		} else {
			this.value = value;
		}
	}
	,__class__: arm_node_brush_FloatNode
});
var arm_node_brush_InputNode = function(tree) {
	arm_node_LogicNode.call(this,tree);
	if(!arm_node_brush_InputNode.registered) {
		arm_node_brush_InputNode.registered = true;
		tree.notifyOnUpdate($bind(this,this.update));
	}
};
$hxClasses["arm.node.brush.InputNode"] = arm_node_brush_InputNode;
arm_node_brush_InputNode.__name__ = "arm.node.brush.InputNode";
arm_node_brush_InputNode.__super__ = arm_node_LogicNode;
arm_node_brush_InputNode.prototype = $extend(arm_node_LogicNode.prototype,{
	update: function() {
		if(arm_Context.splitView) {
			arm_Context.viewIndex = iron_system_Input.getMouse().x - arm_App.x() > arm_App.w() / 2 ? 1 : 0;
		}
		var decalMask = (arm_Context.tool == 3 || arm_Context.tool == 4) && arm_Operator.shortcut(Std.string(arm_Config.keymap.decal_mask) + "+" + Std.string(arm_Config.keymap.action_paint),2);
		var lazyPaint = arm_Context.brushLazyRadius > 0 && (arm_Operator.shortcut(arm_Config.keymap.action_paint,2) || arm_Operator.shortcut(Std.string(arm_Config.keymap.brush_ruler) + "+" + Std.string(arm_Config.keymap.action_paint),2) || decalMask);
		var mouse = iron_system_Input.getMouse();
		var paintX = (mouse.x - arm_App.x()) / arm_App.w();
		var paintY = (mouse.y - arm_App.y()) / arm_App.h();
		if(mouse.started()) {
			arm_node_brush_InputNode.startX = (mouse.x - arm_App.x()) / arm_App.w();
			arm_node_brush_InputNode.startY = (mouse.y - arm_App.y()) / arm_App.h();
		}
		var pen = iron_system_Input.getPen();
		if(pen.down()) {
			paintX = (pen.x - arm_App.x()) / arm_App.w();
			paintY = (pen.y - arm_App.y()) / arm_App.h();
		}
		if(pen.started()) {
			arm_node_brush_InputNode.startX = (pen.x - arm_App.x()) / arm_App.w();
			arm_node_brush_InputNode.startY = (pen.y - arm_App.y()) / arm_App.h();
		}
		if(arm_Operator.shortcut(Std.string(arm_Config.keymap.brush_ruler) + "+" + Std.string(arm_Config.keymap.action_paint),2)) {
			if(arm_node_brush_InputNode.lockX) {
				paintX = arm_node_brush_InputNode.startX;
			}
			if(arm_node_brush_InputNode.lockY) {
				paintY = arm_node_brush_InputNode.startY;
			}
		}
		if(arm_Context.brushLazyRadius > 0) {
			arm_Context.brushLazyX = paintX;
			arm_Context.brushLazyY = paintY;
		}
		if(!lazyPaint) {
			arm_node_brush_InputNode.coords.x = paintX;
			arm_node_brush_InputNode.coords.y = paintY;
		}
		if(arm_Context.splitView) {
			arm_Context.viewIndex = -1;
		}
		if(arm_node_brush_InputNode.lockBegin) {
			var dx = Math.abs(arm_node_brush_InputNode.lockStartX - (mouse.x - arm_App.x()));
			var dy = Math.abs(arm_node_brush_InputNode.lockStartY - (mouse.y - arm_App.y()));
			if(dx > 1 || dy > 1) {
				arm_node_brush_InputNode.lockBegin = false;
				if(dx > dy) {
					arm_node_brush_InputNode.lockY = true;
				} else {
					arm_node_brush_InputNode.lockX = true;
				}
			}
		}
		var kb = iron_system_Input.getKeyboard();
		if(kb.started(arm_Config.keymap.brush_ruler)) {
			arm_node_brush_InputNode.lockStartX = mouse.x - arm_App.x();
			arm_node_brush_InputNode.lockStartY = mouse.y - arm_App.y();
			arm_node_brush_InputNode.lockBegin = true;
		} else if(kb.released(arm_Config.keymap.brush_ruler)) {
			arm_node_brush_InputNode.lockX = arm_node_brush_InputNode.lockY = arm_node_brush_InputNode.lockBegin = false;
		}
		if(arm_Context.brushLazyRadius > 0) {
			var x = arm_Context.brushLazyX * arm_App.w();
			var y = arm_Context.brushLazyY * arm_App.h();
			if(y == null) {
				y = 0.0;
			}
			if(x == null) {
				x = 0.0;
			}
			var v1_x = x;
			var v1_y = y;
			var x = arm_node_brush_InputNode.coords.x * arm_App.w();
			var y = arm_node_brush_InputNode.coords.y * arm_App.h();
			if(y == null) {
				y = 0.0;
			}
			if(x == null) {
				x = 0.0;
			}
			var v2_x = x;
			var v2_y = y;
			var vx = v1_x - v2_x;
			var vy = v1_y - v2_y;
			var r = arm_Context.brushLazyRadius * 85;
			if(Math.sqrt(vx * vx + vy * vy) > r) {
				var v3_x = 0.0;
				var v3_y = 0.0;
				v3_x = v2_x - v1_x;
				v3_y = v2_y - v1_y;
				var n = Math.sqrt(v3_x * v3_x + v3_y * v3_y);
				if(n > 0.0) {
					var invN = 1.0 / n;
					v3_x *= invN;
					v3_y *= invN;
				}
				var f = 1.0 - arm_Context.brushLazyStep;
				v3_x *= f;
				v3_y *= f;
				v3_x *= r;
				v3_y *= r;
				v2_x = v1_x + v3_x;
				v2_y = v1_y + v3_y;
				var tmp = arm_App.w();
				arm_node_brush_InputNode.coords.x = v2_x / tmp;
				var tmp = arm_App.h();
				arm_node_brush_InputNode.coords.y = v2_y / tmp;
				arm_Context.painted = -1;
			}
			arm_Context.lastPaintX = -1;
			arm_Context.lastPaintY = -1;
		}
	}
	,get: function(from) {
		arm_Context.brushLazyRadius = this.inputs[0].get();
		arm_Context.brushLazyStep = this.inputs[1].get();
		return arm_node_brush_InputNode.coords;
	}
	,__class__: arm_node_brush_InputNode
});
var arm_node_brush_IntegerNode = function(tree,value) {
	if(value == null) {
		value = 0;
	}
	arm_node_LogicNode.call(this,tree);
	this.value = value;
};
$hxClasses["arm.node.brush.IntegerNode"] = arm_node_brush_IntegerNode;
arm_node_brush_IntegerNode.__name__ = "arm.node.brush.IntegerNode";
arm_node_brush_IntegerNode.__super__ = arm_node_LogicNode;
arm_node_brush_IntegerNode.prototype = $extend(arm_node_LogicNode.prototype,{
	get: function(from) {
		if(this.inputs.length > 0) {
			return this.inputs[0].get();
		}
		return this.value;
	}
	,set: function(value) {
		if(this.inputs.length > 0) {
			this.inputs[0].set(value);
		} else {
			this.value = value;
		}
	}
	,__class__: arm_node_brush_IntegerNode
});
var arm_node_brush_MathNode = function(tree) {
	arm_node_LogicNode.call(this,tree);
};
$hxClasses["arm.node.brush.MathNode"] = arm_node_brush_MathNode;
arm_node_brush_MathNode.__name__ = "arm.node.brush.MathNode";
arm_node_brush_MathNode.__super__ = arm_node_LogicNode;
arm_node_brush_MathNode.prototype = $extend(arm_node_LogicNode.prototype,{
	get: function(from) {
		var v1 = this.inputs[0].get();
		var v2 = this.inputs[1].get();
		var f = 0.0;
		switch(this.operation) {
		case "Abs":
			f = Math.abs(v1);
			break;
		case "Add":
			f = v1 + v2;
			break;
		case "Arccosine":
			f = Math.acos(v1);
			break;
		case "Arcsine":
			f = Math.asin(v1);
			break;
		case "Arctangent":
			f = Math.atan(v1);
			break;
		case "Cosine":
			f = Math.cos(v1);
			break;
		case "Divide":
			f = v1 / v2;
			break;
		case "Greater Than":
			f = v1 > v2 ? 1.0 : 0.0;
			break;
		case "Less Than":
			f = v1 < v2 ? 1.0 : 0.0;
			break;
		case "Logarithm":
			f = Math.log(v1);
			break;
		case "Max":
			f = Math.max(v1,v2);
			break;
		case "Min":
			f = Math.min(v1,v2);
			break;
		case "Modulo":
			f = v1 % v2;
			break;
		case "Multiply":
			f = v1 * v2;
			break;
		case "Power":
			f = Math.pow(v1,v2);
			break;
		case "Round":
			f = Math.round(v1);
			break;
		case "Sine":
			f = Math.sin(v1);
			break;
		case "Subtract":
			f = v1 - v2;
			break;
		case "Tangent":
			f = Math.tan(v1);
			break;
		}
		if(this.use_clamp) {
			if(f < 0.0) {
				f = 0.0;
			} else if(f > 1.0) {
				f = 1.0;
			}
		}
		return f;
	}
	,__class__: arm_node_brush_MathNode
});
var arm_node_brush_NullNode = function(tree) {
	arm_node_LogicNode.call(this,tree);
};
$hxClasses["arm.node.brush.NullNode"] = arm_node_brush_NullNode;
arm_node_brush_NullNode.__name__ = "arm.node.brush.NullNode";
arm_node_brush_NullNode.__super__ = arm_node_LogicNode;
arm_node_brush_NullNode.prototype = $extend(arm_node_LogicNode.prototype,{
	get: function(from) {
		return null;
	}
	,__class__: arm_node_brush_NullNode
});
var arm_node_brush_ObjectNode = function(tree,objectName) {
	if(objectName == null) {
		objectName = "";
	}
	this.objectName = objectName;
	arm_node_LogicNode.call(this,tree);
};
$hxClasses["arm.node.brush.ObjectNode"] = arm_node_brush_ObjectNode;
arm_node_brush_ObjectNode.__name__ = "arm.node.brush.ObjectNode";
arm_node_brush_ObjectNode.__super__ = arm_node_LogicNode;
arm_node_brush_ObjectNode.prototype = $extend(arm_node_LogicNode.prototype,{
	get: function(from) {
		if(this.inputs.length > 0) {
			return this.inputs[0].get();
		}
		this.value = this.objectName != "" ? iron_Scene.active.getChild(this.objectName) : null;
		return this.value;
	}
	,set: function(value) {
		if(this.inputs.length > 0) {
			this.inputs[0].set(value);
		} else {
			this.value = value;
		}
	}
	,__class__: arm_node_brush_ObjectNode
});
var arm_node_brush_RandomNode = function(tree) {
	arm_node_LogicNode.call(this,tree);
};
$hxClasses["arm.node.brush.RandomNode"] = arm_node_brush_RandomNode;
arm_node_brush_RandomNode.__name__ = "arm.node.brush.RandomNode";
arm_node_brush_RandomNode.__super__ = arm_node_LogicNode;
arm_node_brush_RandomNode.prototype = $extend(arm_node_LogicNode.prototype,{
	get: function(from) {
		var min = this.inputs[0].get();
		var max = this.inputs[1].get();
		return min + Math.random() * (max - min);
	}
	,__class__: arm_node_brush_RandomNode
});
var arm_node_brush_SeparateVectorNode = function(tree) {
	arm_node_LogicNode.call(this,tree);
};
$hxClasses["arm.node.brush.SeparateVectorNode"] = arm_node_brush_SeparateVectorNode;
arm_node_brush_SeparateVectorNode.__name__ = "arm.node.brush.SeparateVectorNode";
arm_node_brush_SeparateVectorNode.__super__ = arm_node_LogicNode;
arm_node_brush_SeparateVectorNode.prototype = $extend(arm_node_LogicNode.prototype,{
	get: function(from) {
		var vector = this.inputs[0].get();
		if(from == 0) {
			return vector.x;
		} else if(from == 1) {
			return vector.y;
		} else {
			return vector.z;
		}
	}
	,__class__: arm_node_brush_SeparateVectorNode
});
var arm_node_brush_StringNode = function(tree,value) {
	if(value == null) {
		value = "";
	}
	arm_node_LogicNode.call(this,tree);
	this.value = value;
};
$hxClasses["arm.node.brush.StringNode"] = arm_node_brush_StringNode;
arm_node_brush_StringNode.__name__ = "arm.node.brush.StringNode";
arm_node_brush_StringNode.__super__ = arm_node_LogicNode;
arm_node_brush_StringNode.prototype = $extend(arm_node_LogicNode.prototype,{
	get: function(from) {
		if(this.inputs.length > 0) {
			return this.inputs[0].get();
		}
		return this.value;
	}
	,set: function(value) {
		if(this.inputs.length > 0) {
			this.inputs[0].set(value);
		} else {
			this.value = value;
		}
	}
	,__class__: arm_node_brush_StringNode
});
var arm_node_brush_TEX_$IMAGE = function(tree) {
	arm_node_LogicNode.call(this,tree);
};
$hxClasses["arm.node.brush.TEX_IMAGE"] = arm_node_brush_TEX_$IMAGE;
arm_node_brush_TEX_$IMAGE.__name__ = "arm.node.brush.TEX_IMAGE";
arm_node_brush_TEX_$IMAGE.__super__ = arm_node_LogicNode;
arm_node_brush_TEX_$IMAGE.prototype = $extend(arm_node_LogicNode.prototype,{
	get: function(from) {
		return this.file;
	}
	,__class__: arm_node_brush_TEX_$IMAGE
});
var arm_node_brush_TimeNode = function(tree) {
	arm_node_LogicNode.call(this,tree);
};
$hxClasses["arm.node.brush.TimeNode"] = arm_node_brush_TimeNode;
arm_node_brush_TimeNode.__name__ = "arm.node.brush.TimeNode";
arm_node_brush_TimeNode.__super__ = arm_node_LogicNode;
arm_node_brush_TimeNode.prototype = $extend(arm_node_LogicNode.prototype,{
	get: function(from) {
		if(from == 0) {
			return kha_Scheduler.time();
		} else if(from == 1) {
			return 1 / iron_system_Time.frequency * iron_system_Time.scale;
		} else {
			return arm_Context.brushTime;
		}
	}
	,__class__: arm_node_brush_TimeNode
});
var arm_node_brush_VectorMathNode = function(tree) {
	this.v = new iron_math_Vec4();
	arm_node_LogicNode.call(this,tree);
};
$hxClasses["arm.node.brush.VectorMathNode"] = arm_node_brush_VectorMathNode;
arm_node_brush_VectorMathNode.__name__ = "arm.node.brush.VectorMathNode";
arm_node_brush_VectorMathNode.__super__ = arm_node_LogicNode;
arm_node_brush_VectorMathNode.prototype = $extend(arm_node_LogicNode.prototype,{
	get: function(from) {
		var v1 = this.inputs[0].get();
		var v2 = this.inputs[1].get();
		var _this = this.v;
		_this.x = v1.x;
		_this.y = v1.y;
		_this.z = v1.z;
		_this.w = v1.w;
		var f = 0.0;
		switch(this.operation) {
		case "Add":
			var _this = this.v;
			_this.x += v2.x;
			_this.y += v2.y;
			_this.z += v2.z;
			break;
		case "Average":
			var _this = this.v;
			_this.x += v2.x;
			_this.y += v2.y;
			_this.z += v2.z;
			this.v.x *= 0.5;
			this.v.y *= 0.5;
			this.v.z *= 0.5;
			break;
		case "Cross Product":
			var _this = this.v;
			var ax = _this.x;
			var ay = _this.y;
			var az = _this.z;
			var vx = v2.x;
			var vy = v2.y;
			var vz = v2.z;
			_this.x = ay * vz - az * vy;
			_this.y = az * vx - ax * vz;
			_this.z = ax * vy - ay * vx;
			break;
		case "Dot Product":
			var _this = this.v;
			f = _this.x * v2.x + _this.y * v2.y + _this.z * v2.z;
			var _this = this.v;
			_this.x = f;
			_this.y = f;
			_this.z = f;
			_this.w = 1.0;
			break;
		case "Multiply":
			this.v.x *= v2.x;
			this.v.y *= v2.y;
			this.v.z *= v2.z;
			break;
		case "Normalize":
			var _this = this.v;
			var n = Math.sqrt(_this.x * _this.x + _this.y * _this.y + _this.z * _this.z);
			if(n > 0.0) {
				var invN = 1.0 / n;
				_this.x *= invN;
				_this.y *= invN;
				_this.z *= invN;
			}
			break;
		case "Subtract":
			var _this = this.v;
			_this.x -= v2.x;
			_this.y -= v2.y;
			_this.z -= v2.z;
			break;
		}
		if(from == 0) {
			return this.v;
		} else {
			return f;
		}
	}
	,__class__: arm_node_brush_VectorMathNode
});
var arm_node_brush_VectorNode = function(tree,x,y,z) {
	this.value = new iron_math_Vec4();
	arm_node_LogicNode.call(this,tree);
	if(x != null) {
		this.addInput(new arm_node_brush_FloatNode(tree,x),0);
		this.addInput(new arm_node_brush_FloatNode(tree,y),0);
		this.addInput(new arm_node_brush_FloatNode(tree,z),0);
	}
};
$hxClasses["arm.node.brush.VectorNode"] = arm_node_brush_VectorNode;
arm_node_brush_VectorNode.__name__ = "arm.node.brush.VectorNode";
arm_node_brush_VectorNode.__super__ = arm_node_LogicNode;
arm_node_brush_VectorNode.prototype = $extend(arm_node_LogicNode.prototype,{
	get: function(from) {
		this.value.x = this.inputs[0].get();
		this.value.y = this.inputs[1].get();
		this.value.z = this.inputs[2].get();
		return this.value;
	}
	,set: function(value) {
		this.inputs[0].set(value.x);
		this.inputs[1].set(value.y);
		this.inputs[2].set(value.z);
	}
	,__class__: arm_node_brush_VectorNode
});
var arm_plugin_Camera = function() {
	this.ease = 1.0;
	this.dir = new iron_math_Vec4();
	this.first = true;
	this.redraws = 0;
	var _gthis = this;
	arm_plugin_Camera.inst = this;
	var mouse = iron_system_Input.getMouse();
	var kb = iron_system_Input.getKeyboard();
	var camera = iron_Scene.active.camera;
	iron_App.notifyOnUpdate(function() {
		if(_gthis.first) {
			_gthis.first = false;
			_gthis.reset();
		}
		if(iron_system_Input.occupied || !arm_App.uiEnabled || arm_App.isDragging || arm_ui_UISidebar.inst.isScrolling || mouse.x - arm_App.x() < 0 || mouse.x - arm_App.x() > arm_App.w() || mouse.y - arm_App.y() < 0 || mouse.y - arm_App.y() > arm_App.h()) {
			return;
		}
		var modifKey = kb.down("alt") || kb.down("shift") || kb.down("control");
		var modif = modifKey || arm_Config.keymap.action_rotate == "middle";
		var controls = arm_Context.cameraControls;
		if(controls == 0) {
			if(arm_Operator.shortcut(arm_Config.keymap.action_rotate,2) || mouse.down("right") && !modif) {
				_gthis.redraws = 2;
				var dist = _gthis.distance();
				camera.transform.move(new iron_math_Vec4(-camera.transform.world.self._20,-camera.transform.world.self._21,-camera.transform.world.self._22),dist);
				camera.transform.rotate(new iron_math_Vec4(0.0,0.0,1.0),-mouse.movementX / 100);
				camera.transform.rotate(new iron_math_Vec4(camera.transform.world.self._00,camera.transform.world.self._01,camera.transform.world.self._02),-mouse.movementY / 100);
				var x = camera.transform.world.self._10;
				var y = camera.transform.world.self._11;
				var z = camera.transform.world.self._12;
				if(z == null) {
					z = 0.0;
				}
				if(y == null) {
					y = 0.0;
				}
				if(x == null) {
					x = 0.0;
				}
				if(z < 0) {
					camera.transform.rotate(new iron_math_Vec4(camera.transform.world.self._00,camera.transform.world.self._01,camera.transform.world.self._02),mouse.movementY / 100);
				}
				camera.transform.move(new iron_math_Vec4(-camera.transform.world.self._20,-camera.transform.world.self._21,-camera.transform.world.self._22),-dist);
			}
			_gthis.panAction(modif);
			if(arm_Operator.shortcut(arm_Config.keymap.action_zoom,2)) {
				_gthis.redraws = 2;
				var f = -mouse.movementY / 150;
				f *= _gthis.getCameraSpeed();
				camera.transform.move(new iron_math_Vec4(-camera.transform.local.self._20,-camera.transform.local.self._21,-camera.transform.local.self._22),f);
			}
			if(mouse.wheelDelta != 0 && !modifKey) {
				_gthis.redraws = 2;
				var f = mouse.wheelDelta * -0.1;
				f *= _gthis.getCameraSpeed();
				camera.transform.move(new iron_math_Vec4(-camera.transform.local.self._20,-camera.transform.local.self._21,-camera.transform.local.self._22),f);
			}
			if(arm_Operator.shortcut(arm_Config.keymap.rotate_light,2)) {
				_gthis.redraws = 2;
				var light = iron_Scene.active.lights[0];
				var m_self = new kha_math_FastMatrix4(1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0);
				var alpha = mouse.movementX / 100;
				var ca = Math.cos(alpha);
				var sa = Math.sin(alpha);
				m_self = new kha_math_FastMatrix4(ca,-sa,0,0,sa,ca,0,0,0,0,1,0,0,0,0,1);
				var _this = light.transform.local;
				var a00 = _this.self._00;
				var a01 = _this.self._01;
				var a02 = _this.self._02;
				var a03 = _this.self._03;
				var a10 = _this.self._10;
				var a11 = _this.self._11;
				var a12 = _this.self._12;
				var a13 = _this.self._13;
				var a20 = _this.self._20;
				var a21 = _this.self._21;
				var a22 = _this.self._22;
				var a23 = _this.self._23;
				var a30 = _this.self._30;
				var a31 = _this.self._31;
				var a32 = _this.self._32;
				var a33 = _this.self._33;
				var b0 = m_self._00;
				var b1 = m_self._10;
				var b2 = m_self._20;
				var b3 = m_self._30;
				_this.self._00 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
				_this.self._10 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
				_this.self._20 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
				_this.self._30 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
				b0 = m_self._01;
				b1 = m_self._11;
				b2 = m_self._21;
				b3 = m_self._31;
				_this.self._01 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
				_this.self._11 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
				_this.self._21 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
				_this.self._31 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
				b0 = m_self._02;
				b1 = m_self._12;
				b2 = m_self._22;
				b3 = m_self._32;
				_this.self._02 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
				_this.self._12 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
				_this.self._22 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
				_this.self._32 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
				b0 = m_self._03;
				b1 = m_self._13;
				b2 = m_self._23;
				b3 = m_self._33;
				_this.self._03 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
				_this.self._13 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
				_this.self._23 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
				_this.self._33 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
				light.transform.decompose();
			}
			if(arm_Operator.shortcut(arm_Config.keymap.rotate_envmap,2)) {
				_gthis.redraws = 2;
				arm_Context.envmapAngle -= mouse.movementX / 100;
			}
		} else if(controls == 1) {
			if(arm_Operator.shortcut(arm_Config.keymap.action_rotate,2) || mouse.down("right") && !modif) {
				_gthis.redraws = 2;
				var t = arm_Context.mainObject().transform;
				var _this = t.world;
				var _this1 = new iron_math_Vec4(_this.self._20,_this.self._21,_this.self._22);
				var n = Math.sqrt(_this1.x * _this1.x + _this1.y * _this1.y + _this1.z * _this1.z);
				if(n > 0.0) {
					var invN = 1.0 / n;
					_this1.x *= invN;
					_this1.y *= invN;
					_this1.z *= invN;
				}
				t.rotate(_this1,mouse.movementX / 100);
				var _this = new iron_math_Vec4(camera.transform.world.self._00,camera.transform.world.self._01,camera.transform.world.self._02);
				var n = Math.sqrt(_this.x * _this.x + _this.y * _this.y + _this.z * _this.z);
				if(n > 0.0) {
					var invN = 1.0 / n;
					_this.x *= invN;
					_this.y *= invN;
					_this.z *= invN;
				}
				t.rotate(_this,mouse.movementY / 100);
				t.buildMatrix();
				var _this1 = t.world;
				var x = _this1.self._20;
				var y = _this1.self._21;
				var z = _this1.self._22;
				if(z == null) {
					z = 0.0;
				}
				if(y == null) {
					y = 0.0;
				}
				if(x == null) {
					x = 0.0;
				}
				if(z < 0) {
					t.rotate(_this,-mouse.movementY / 100);
				}
			}
			_gthis.panAction(modif);
			if(arm_Operator.shortcut(arm_Config.keymap.action_zoom,2)) {
				_gthis.redraws = 2;
				var f = -mouse.movementY / 150;
				f *= _gthis.getCameraSpeed();
				camera.transform.move(new iron_math_Vec4(-camera.transform.local.self._20,-camera.transform.local.self._21,-camera.transform.local.self._22),f);
			}
			if(mouse.wheelDelta != 0) {
				_gthis.redraws = 2;
				var f = mouse.wheelDelta * -0.1;
				f *= _gthis.getCameraSpeed();
				camera.transform.move(new iron_math_Vec4(-camera.transform.local.self._20,-camera.transform.local.self._21,-camera.transform.local.self._22),f);
			}
		} else if(controls == 2 && mouse.down("right")) {
			var moveForward = kb.down("w") || kb.down("up") || mouse.wheelDelta < 0;
			var moveBackward = kb.down("s") || kb.down("down") || mouse.wheelDelta > 0;
			var strafeLeft = kb.down("a") || kb.down("left");
			var strafeRight = kb.down("d") || kb.down("right");
			var strafeUp = kb.down("e");
			var strafeDown = kb.down("q");
			var fast = kb.down("shift") ? 2.0 : kb.down("alt") ? 0.5 : 1.0;
			if(mouse.wheelDelta != 0) {
				fast *= Math.abs(mouse.wheelDelta) * 4.0;
			}
			if(moveForward || moveBackward || strafeRight || strafeLeft || strafeUp || strafeDown) {
				_gthis.ease += 1 / iron_system_Time.frequency * iron_system_Time.scale * 15;
				if(_gthis.ease > 1.0) {
					_gthis.ease = 1.0;
				}
				var _this = _gthis.dir;
				_this.x = 0;
				_this.y = 0;
				_this.z = 0;
				_this.w = 1.0;
				if(moveForward) {
					var _this = _gthis.dir;
					var x = -camera.transform.local.self._20;
					var y = -camera.transform.local.self._21;
					var z = -camera.transform.local.self._22;
					if(z == null) {
						z = 0.0;
					}
					if(y == null) {
						y = 0.0;
					}
					if(x == null) {
						x = 0.0;
					}
					var x1 = -camera.transform.local.self._20;
					var y = -camera.transform.local.self._21;
					var z = -camera.transform.local.self._22;
					if(z == null) {
						z = 0.0;
					}
					if(y == null) {
						y = 0.0;
					}
					if(x1 == null) {
						x1 = 0.0;
					}
					var x1 = -camera.transform.local.self._20;
					var y1 = -camera.transform.local.self._21;
					var z = -camera.transform.local.self._22;
					if(z == null) {
						z = 0.0;
					}
					if(y1 == null) {
						y1 = 0.0;
					}
					if(x1 == null) {
						x1 = 0.0;
					}
					_this.x += x;
					_this.y += y;
					_this.z += z;
				}
				if(moveBackward) {
					var _this = _gthis.dir;
					var x = -camera.transform.local.self._20;
					var y = -camera.transform.local.self._21;
					var z = -camera.transform.local.self._22;
					if(z == null) {
						z = 0.0;
					}
					if(y == null) {
						y = 0.0;
					}
					if(x == null) {
						x = 0.0;
					}
					var x1 = -camera.transform.local.self._20;
					var y = -camera.transform.local.self._21;
					var z = -camera.transform.local.self._22;
					if(z == null) {
						z = 0.0;
					}
					if(y == null) {
						y = 0.0;
					}
					if(x1 == null) {
						x1 = 0.0;
					}
					var x1 = -camera.transform.local.self._20;
					var y1 = -camera.transform.local.self._21;
					var z = -camera.transform.local.self._22;
					if(z == null) {
						z = 0.0;
					}
					if(y1 == null) {
						y1 = 0.0;
					}
					if(x1 == null) {
						x1 = 0.0;
					}
					_this.x += -x;
					_this.y += -y;
					_this.z += -z;
				}
				if(strafeRight) {
					var _this = _gthis.dir;
					var x = camera.transform.local.self._00;
					var y = camera.transform.local.self._01;
					var z = camera.transform.local.self._02;
					if(z == null) {
						z = 0.0;
					}
					if(y == null) {
						y = 0.0;
					}
					if(x == null) {
						x = 0.0;
					}
					var x1 = camera.transform.local.self._00;
					var y = camera.transform.local.self._01;
					var z = camera.transform.local.self._02;
					if(z == null) {
						z = 0.0;
					}
					if(y == null) {
						y = 0.0;
					}
					if(x1 == null) {
						x1 = 0.0;
					}
					var x1 = camera.transform.local.self._00;
					var y1 = camera.transform.local.self._01;
					var z = camera.transform.local.self._02;
					if(z == null) {
						z = 0.0;
					}
					if(y1 == null) {
						y1 = 0.0;
					}
					if(x1 == null) {
						x1 = 0.0;
					}
					_this.x += x;
					_this.y += y;
					_this.z += z;
				}
				if(strafeLeft) {
					var _this = _gthis.dir;
					var x = camera.transform.local.self._00;
					var y = camera.transform.local.self._01;
					var z = camera.transform.local.self._02;
					if(z == null) {
						z = 0.0;
					}
					if(y == null) {
						y = 0.0;
					}
					if(x == null) {
						x = 0.0;
					}
					var x1 = camera.transform.local.self._00;
					var y = camera.transform.local.self._01;
					var z = camera.transform.local.self._02;
					if(z == null) {
						z = 0.0;
					}
					if(y == null) {
						y = 0.0;
					}
					if(x1 == null) {
						x1 = 0.0;
					}
					var x1 = camera.transform.local.self._00;
					var y1 = camera.transform.local.self._01;
					var z = camera.transform.local.self._02;
					if(z == null) {
						z = 0.0;
					}
					if(y1 == null) {
						y1 = 0.0;
					}
					if(x1 == null) {
						x1 = 0.0;
					}
					_this.x += -x;
					_this.y += -y;
					_this.z += -z;
				}
				if(strafeUp) {
					var _this = _gthis.dir;
					_this.x += 0;
					_this.y += 0;
					_this.z += 1;
				}
				if(strafeDown) {
					var _this = _gthis.dir;
					_this.x += 0;
					_this.y += 0;
					_this.z += -1;
				}
			} else {
				_gthis.ease -= 1 / iron_system_Time.frequency * iron_system_Time.scale * 20.0 * _gthis.ease;
				if(_gthis.ease < 0.0) {
					_gthis.ease = 0.0;
				}
			}
			var d = 1 / iron_system_Time.frequency * iron_system_Time.scale * fast * _gthis.ease * 2.0 * arm_Config.raw.camera_speed;
			if(d > 0.0) {
				camera.transform.move(_gthis.dir,d);
				if(arm_Context.cameraType == 1) {
					arm_util_ViewportUtil.updateCameraType(arm_Context.cameraType);
				}
			}
			_gthis.redraws = 2;
			camera.transform.rotate(new iron_math_Vec4(0.0,0.0,1.0),-mouse.movementX / 200);
			camera.transform.rotate(new iron_math_Vec4(camera.transform.local.self._00,camera.transform.local.self._01,camera.transform.local.self._02),-mouse.movementY / 200);
		}
		if(_gthis.redraws > 0) {
			_gthis.redraws--;
			arm_Context.ddirty = 2;
			if(arm_Context.cameraType == 1) {
				arm_util_ViewportUtil.updateCameraType(arm_Context.cameraType);
			}
		}
	});
};
$hxClasses["arm.plugin.Camera"] = arm_plugin_Camera;
arm_plugin_Camera.__name__ = "arm.plugin.Camera";
arm_plugin_Camera.prototype = {
	distance: function() {
		var camera = iron_Scene.active.camera;
		var v1 = this.origins[this.index()];
		var v2 = camera.transform.loc;
		var vx = v1.x - v2.x;
		var vy = v1.y - v2.y;
		var vz = v1.z - v2.z;
		return Math.sqrt(vx * vx + vy * vy + vz * vz);
	}
	,index: function() {
		if(arm_Context.viewIndexLast > 0) {
			return 1;
		} else {
			return 0;
		}
	}
	,getCameraSpeed: function() {
		return arm_Config.raw.camera_speed * (arm_Config.raw.invert_zoom_direction ? -1 : 1);
	}
	,reset: function(viewIndex) {
		if(viewIndex == null) {
			viewIndex = -1;
		}
		var camera = iron_Scene.active.camera;
		if(viewIndex == -1) {
			this.origins = [new iron_math_Vec4(0,0,0),new iron_math_Vec4(0,0,0)];
			var _this = camera.transform.local;
			var _this1 = camera.transform.local;
			this.views = [new iron_math_Mat4(_this.self._00,_this.self._10,_this.self._20,_this.self._30,_this.self._01,_this.self._11,_this.self._21,_this.self._31,_this.self._02,_this.self._12,_this.self._22,_this.self._32,_this.self._03,_this.self._13,_this.self._23,_this.self._33),new iron_math_Mat4(_this1.self._00,_this1.self._10,_this1.self._20,_this1.self._30,_this1.self._01,_this1.self._11,_this1.self._21,_this1.self._31,_this1.self._02,_this1.self._12,_this1.self._22,_this1.self._32,_this1.self._03,_this1.self._13,_this1.self._23,_this1.self._33)];
		} else {
			this.origins[viewIndex] = new iron_math_Vec4(0,0,0);
			var _this = camera.transform.local;
			this.views[viewIndex] = new iron_math_Mat4(_this.self._00,_this.self._10,_this.self._20,_this.self._30,_this.self._01,_this.self._11,_this.self._21,_this.self._31,_this.self._02,_this.self._12,_this.self._22,_this.self._32,_this.self._03,_this.self._13,_this.self._23,_this.self._33);
		}
	}
	,panAction: function(modif) {
		var camera = iron_Scene.active.camera;
		var mouse = iron_system_Input.getMouse();
		if(arm_Operator.shortcut(arm_Config.keymap.action_pan,2) || mouse.down("middle") && !modif) {
			this.redraws = 2;
			var _this = camera.transform.world;
			var x = _this.self._10;
			var y = _this.self._11;
			var z = _this.self._12;
			if(z == null) {
				z = 0.0;
			}
			if(y == null) {
				y = 0.0;
			}
			if(x == null) {
				x = 0.0;
			}
			var look_x = x;
			var look_y = y;
			var look_z = z;
			var n = Math.sqrt(look_x * look_x + look_y * look_y + look_z * look_z);
			if(n > 0.0) {
				var invN = 1.0 / n;
				look_x *= invN;
				look_y *= invN;
				look_z *= invN;
			}
			var f = mouse.movementY / 150;
			look_x *= f;
			look_y *= f;
			look_z *= f;
			var _this = camera.transform.world;
			var x = _this.self._00;
			var y = _this.self._01;
			var z = _this.self._02;
			if(z == null) {
				z = 0.0;
			}
			if(y == null) {
				y = 0.0;
			}
			if(x == null) {
				x = 0.0;
			}
			var right_x = x;
			var right_y = y;
			var right_z = z;
			var n = Math.sqrt(right_x * right_x + right_y * right_y + right_z * right_z);
			if(n > 0.0) {
				var invN = 1.0 / n;
				right_x *= invN;
				right_y *= invN;
				right_z *= invN;
			}
			var f = -mouse.movementX / 150;
			right_x *= f;
			right_y *= f;
			right_z *= f;
			var _this = camera.transform.loc;
			_this.x += look_x;
			_this.y += look_y;
			_this.z += look_z;
			var _this = camera.transform.loc;
			_this.x += right_x;
			_this.y += right_y;
			_this.z += right_z;
			var _this = this.origins[this.index()];
			_this.x += look_x;
			_this.y += look_y;
			_this.z += look_z;
			var _this = this.origins[this.index()];
			_this.x += right_x;
			_this.y += right_y;
			_this.z += right_z;
			camera.buildMatrix();
		}
	}
	,__class__: arm_plugin_Camera
};
var arm_plugin_Gizmo = function() { };
$hxClasses["arm.plugin.Gizmo"] = arm_plugin_Gizmo;
arm_plugin_Gizmo.__name__ = "arm.plugin.Gizmo";
arm_plugin_Gizmo.update = function() {
	var isObject = arm_ui_UIHeader.inst.worktab.position == 3 && arm_Context.object != null;
	var isDecal = arm_ui_UIHeader.inst.worktab.position == 0 && arm_Context.layer.fill_layer != null && arm_Context.layer.uvType == 2;
	var gizmo = arm_Context.gizmo;
	gizmo.visible = isObject || isDecal;
	if(!gizmo.visible) {
		return;
	}
	var mouse = iron_system_Input.getMouse();
	var kb = iron_system_Input.getKeyboard();
	if(isObject) {
		var _this = gizmo.transform.loc;
		var v = arm_Context.object.transform.loc;
		_this.x = v.x;
		_this.y = v.y;
		_this.z = v.z;
		_this.w = v.w;
	} else if(isDecal) {
		var _this = gizmo.transform.loc;
		_this.x = arm_Context.layer.decalMat.self._30;
		_this.y = arm_Context.layer.decalMat.self._31;
		_this.z = arm_Context.layer.decalMat.self._32;
		_this.w = 1.0;
	}
	var v1 = iron_Scene.active.camera.transform.loc;
	var v2 = gizmo.transform.loc;
	var vx = v1.x - v2.x;
	var vy = v1.y - v2.y;
	var vz = v1.z - v2.z;
	var dist = Math.sqrt(vx * vx + vy * vy + vz * vz) / 10;
	var _this = gizmo.transform.scale;
	_this.x = dist;
	_this.y = dist;
	_this.z = dist;
	_this.w = 1.0;
	var _this = arm_Context.gizmoX.transform.scale;
	_this.x = dist;
	_this.y = dist;
	_this.z = dist;
	_this.w = 1.0;
	var _this = arm_Context.gizmoY.transform.scale;
	_this.x = dist;
	_this.y = dist;
	_this.z = dist;
	_this.w = 1.0;
	var _this = arm_Context.gizmoZ.transform.scale;
	_this.x = dist;
	_this.y = dist;
	_this.z = dist;
	_this.w = 1.0;
	gizmo.transform.buildMatrix();
	if(isObject) {
		if(mouse.x - arm_App.x() < arm_App.w()) {
			if(kb.started("delete") || kb.started("backspace")) {
				if(arm_Context.object != null) {
					arm_Context.object.remove();
					arm_Context.selectObject(iron_Scene.active.getChild("Scene"));
				}
			}
			if(kb.started("c") && arm_Context.object != null) {
				if(((arm_Context.object) instanceof iron_object_MeshObject)) {
					var mo = js_Boot.__cast(arm_Context.object , iron_object_MeshObject);
					var object = iron_Scene.active.addMeshObject(mo.data,mo.materials,iron_Scene.active.getChild("Scene"));
					object.name = mo.name + ".1";
					var _this = object.transform.loc;
					var v = mo.transform.loc;
					_this.x = v.x;
					_this.y = v.y;
					_this.z = v.z;
					_this.w = v.w;
					var _this = object.transform.rot;
					var q = mo.transform.rot;
					_this.x = q.x;
					_this.y = q.y;
					_this.z = q.z;
					_this.w = q.w;
					var _this = object.transform.scale;
					var v = mo.transform.scale;
					_this.x = v.x;
					_this.y = v.y;
					_this.z = v.z;
					_this.w = v.w;
					var hit = iron_math_RayCaster.planeIntersect(new iron_math_Vec4(0.0,0.0,1.0),new iron_math_Vec4(),mouse.x - arm_App.x(),mouse.y - arm_App.y(),iron_Scene.active.camera);
					if(hit != null) {
						object.transform.loc.x = hit.x;
						object.transform.loc.y = hit.y;
						object.transform.setRotation(0,0,Math.random() * 3.1516 * 2);
					}
					object.transform.buildMatrix();
					var _g = 0;
					var _g1 = mo.traits;
					while(_g < _g1.length) object.addTrait(Type.createInstance(js_Boot.getClass(_g1[_g++]),[]));
					arm_Context.selectObject(object);
				} else if(((arm_Context.object) instanceof iron_object_LightObject)) {
					var lo = js_Boot.__cast(arm_Context.object , iron_object_LightObject);
					var object = iron_Scene.active.addLightObject(lo.data,iron_Scene.active.getChild("Scene"));
					object.name = lo.name + ".1";
					var _this = object.transform.loc;
					var v = lo.transform.loc;
					_this.x = v.x;
					_this.y = v.y;
					_this.z = v.z;
					_this.w = v.w;
					var _this = object.transform.rot;
					var q = lo.transform.rot;
					_this.x = q.x;
					_this.y = q.y;
					_this.z = q.z;
					_this.w = q.w;
					var _this = object.transform.scale;
					var v = lo.transform.scale;
					_this.x = v.x;
					_this.y = v.y;
					_this.z = v.z;
					_this.w = v.w;
					object.transform.buildMatrix();
					arm_Context.selectObject(object);
				}
				arm_Context.rdirty = 3;
				arm_Context.ddirty = 3;
			}
			if(kb.started("m")) {
				var raw = arm_Context.materialScene.data.raw;
				raw.skip_context = raw.skip_context == "" ? "voxel" : "";
			}
		}
		mouse.started("middle");
		if(arm_Context.axisX || arm_Context.axisY || arm_Context.axisZ) {
			if(arm_Context.axisX) {
				arm_Context.object.transform.loc.x = arm_Context.axisLoc;
			} else if(arm_Context.axisY) {
				arm_Context.object.transform.loc.y = arm_Context.axisLoc;
			} else if(arm_Context.axisZ) {
				arm_Context.object.transform.loc.z = arm_Context.axisLoc;
			}
			arm_Context.object.transform.buildMatrix();
		}
	} else if(isDecal) {
		if(arm_Context.axisX || arm_Context.axisY || arm_Context.axisZ) {
			if(arm_Context.axisX) {
				arm_Context.layer.decalMat.self._30 = arm_Context.axisLoc;
			} else if(arm_Context.axisY) {
				arm_Context.layer.decalMat.self._31 = arm_Context.axisLoc;
			} else if(arm_Context.axisZ) {
				arm_Context.layer.decalMat.self._32 = arm_Context.axisLoc;
			}
			arm_Layers.updateFillLayer();
		}
	}
	if(mouse.started("left") && arm_Context.object.name != "Scene") {
		var hit = iron_math_RayCaster.closestBoxIntersect([arm_Context.gizmoX.transform,arm_Context.gizmoY.transform,arm_Context.gizmoZ.transform],mouse.x - arm_App.x(),mouse.y - arm_App.y(),iron_Scene.active.camera);
		if(hit != null) {
			if(hit.object == arm_Context.gizmoX) {
				arm_Context.axisX = true;
			} else if(hit.object == arm_Context.gizmoY) {
				arm_Context.axisY = true;
			} else if(hit.object == arm_Context.gizmoZ) {
				arm_Context.axisZ = true;
			}
			if(arm_Context.axisX || arm_Context.axisY || arm_Context.axisZ) {
				arm_Context.axisStart = 0.0;
			}
		}
	} else if(mouse.released("left")) {
		arm_Context.axisX = arm_Context.axisY = arm_Context.axisZ = false;
	}
	if(arm_Context.axisX || arm_Context.axisY || arm_Context.axisZ) {
		arm_Context.rdirty = 2;
		if(isObject) {
			var t = arm_Context.object.transform;
			var _this = arm_plugin_Gizmo.v;
			_this.x = t.world.self._30;
			_this.y = t.world.self._31;
			_this.z = t.world.self._32;
			_this.w = 1.0;
		} else if(isDecal) {
			var _this = arm_plugin_Gizmo.v;
			_this.x = arm_Context.layer.decalMat.self._30;
			_this.y = arm_Context.layer.decalMat.self._31;
			_this.z = arm_Context.layer.decalMat.self._32;
			_this.w = 1.0;
		}
		if(arm_Context.axisX) {
			var hit = iron_math_RayCaster.planeIntersect(new iron_math_Vec4(0.0,1.0,0.0),arm_plugin_Gizmo.v,mouse.x - arm_App.x(),mouse.y - arm_App.y(),iron_Scene.active.camera);
			if(hit != null) {
				if(arm_Context.axisStart == 0) {
					arm_Context.axisStart = hit.x - arm_plugin_Gizmo.v.x;
				}
				arm_Context.axisLoc = hit.x - arm_Context.axisStart;
			}
		} else if(arm_Context.axisY) {
			var hit = iron_math_RayCaster.planeIntersect(new iron_math_Vec4(1.0,0.0,0.0),arm_plugin_Gizmo.v,mouse.x - arm_App.x(),mouse.y - arm_App.y(),iron_Scene.active.camera);
			if(hit != null) {
				if(arm_Context.axisStart == 0) {
					arm_Context.axisStart = hit.y - arm_plugin_Gizmo.v.y;
				}
				arm_Context.axisLoc = hit.y - arm_Context.axisStart;
			}
		} else if(arm_Context.axisZ) {
			var hit = iron_math_RayCaster.planeIntersect(new iron_math_Vec4(1.0,0.0,0.0),arm_plugin_Gizmo.v,mouse.x - arm_App.x(),mouse.y - arm_App.y(),iron_Scene.active.camera);
			if(hit != null) {
				if(arm_Context.axisStart == 0) {
					arm_Context.axisStart = hit.z - arm_plugin_Gizmo.v.z;
				}
				arm_Context.axisLoc = hit.z - arm_Context.axisStart;
			}
		}
	}
	iron_system_Input.occupied = (arm_Context.axisX || arm_Context.axisY || arm_Context.axisZ) && mouse.x - arm_App.x() < arm_App.w();
};
var arm_render_Inc = function() { };
$hxClasses["arm.render.Inc"] = arm_render_Inc;
arm_render_Inc.__name__ = "arm.render.Inc";
arm_render_Inc.init = function(_path) {
	arm_render_Inc.path = _path;
	arm_render_Inc.superSample = arm_Config.raw.rp_supersample;
};
arm_render_Inc.applyConfig = function() {
	var config = arm_Config.raw;
	if(arm_render_Inc.superSample != config.rp_supersample) {
		arm_render_Inc.superSample = config.rp_supersample;
		var rt = haxe_ds_StringMap.valueIterator(arm_render_Inc.path.renderTargets.h);
		while(rt.hasNext()) {
			var rt1 = rt.next();
			if(rt1.raw.width == 0 && rt1.raw.scale != null) {
				rt1.raw.scale = arm_render_Inc.superSample;
			}
		}
		arm_render_Inc.path.resize();
	}
	if(!arm_render_Inc.voxelsCreated) {
		arm_render_Inc.initGI();
	}
};
arm_render_Inc.initGI = function(tname) {
	if(tname == null) {
		tname = "voxels";
	}
	if(arm_Config.raw.rp_gi != true || arm_render_Inc.voxelsCreated) {
		return;
	}
	arm_render_Inc.voxelsCreated = true;
	var t = new iron_RenderTargetRaw();
	t.name = tname;
	t.format = "R8";
	t.width = 256;
	t.height = 256;
	t.depth = 256. | 0;
	t.is_image = true;
	t.mipmaps = true;
	arm_render_Inc.path.createRenderTarget(t);
};
arm_render_Inc.drawCompass = function(currentG) {
	if(arm_Context.showCompass) {
		var cam = iron_Scene.active.camera;
		var gizmo = iron_Scene.active.getChild(".GizmoTranslate");
		var visible = gizmo.visible;
		var parent = gizmo.parent;
		var loc = gizmo.transform.loc;
		var rot = gizmo.transform.rot;
		var crot = cam.transform.rot;
		var ratio = arm_App.w() / arm_App.h();
		var P = cam.P;
		var left = -8 * ratio;
		var right = 8 * ratio;
		var rl = right - left;
		cam.P = new iron_math_Mat4(2 / rl,0,0,-(right + left) / rl,0,0.125,0,0.,0,0,-0.5,0.,0,0,0,1);
		gizmo.visible = true;
		gizmo.parent = cam;
		gizmo.transform.loc = new iron_math_Vec4(7.4 * ratio,7.0,-1);
		gizmo.transform.rot = new iron_math_Quat(-crot.x,-crot.y,-crot.z,crot.w);
		var _this = gizmo.transform.scale;
		_this.x = 0.4;
		_this.y = 0.4;
		_this.z = 0.4;
		_this.w = 1.0;
		gizmo.transform.buildMatrix();
		gizmo.render(currentG,"overlay",[]);
		cam.P = P;
		gizmo.visible = visible;
		gizmo.parent = parent;
		gizmo.transform.loc = loc;
		gizmo.transform.rot = rot;
		gizmo.transform.buildMatrix();
	}
};
arm_render_Inc.beginSplit = function() {
	if(arm_Context.splitView && !arm_Context.paint2dView) {
		if(arm_Context.viewIndexLast == -1 && arm_Context.viewIndex == -1) {
			arm_Context.viewIndex = 1;
		} else {
			arm_Context.viewIndex = iron_system_Input.getMouse().x - arm_App.x() > arm_App.w() / 2 ? 1 : 0;
		}
		var cam = iron_Scene.active.camera;
		if(arm_Context.viewIndexLast > -1) {
			var _this = arm_plugin_Camera.inst.views[arm_Context.viewIndexLast];
			var m = cam.transform.local;
			_this.self._00 = m.self._00;
			_this.self._01 = m.self._01;
			_this.self._02 = m.self._02;
			_this.self._03 = m.self._03;
			_this.self._10 = m.self._10;
			_this.self._11 = m.self._11;
			_this.self._12 = m.self._12;
			_this.self._13 = m.self._13;
			_this.self._20 = m.self._20;
			_this.self._21 = m.self._21;
			_this.self._22 = m.self._22;
			_this.self._23 = m.self._23;
			_this.self._30 = m.self._30;
			_this.self._31 = m.self._31;
			_this.self._32 = m.self._32;
			_this.self._33 = m.self._33;
		}
		if(arm_Context.viewIndexLast != arm_Context.viewIndex) {
			arm_Context.ddirty = 1;
		}
		cam.transform.setMatrix(arm_plugin_Camera.inst.views[arm_Context.viewIndex]);
		cam.buildMatrix();
		cam.buildProjection();
	}
};
arm_render_Inc.end = function() {
	arm_render_Inc.endSplit();
	if(arm_Context.foregroundEvent && !iron_system_Input.getMouse().down()) {
		arm_Context.foregroundEvent = false;
		arm_Context.pdirty = 0;
	}
};
arm_render_Inc.endSplit = function() {
	arm_Context.viewIndexLast = arm_Context.viewIndex;
	arm_Context.viewIndex = -1;
};
arm_render_Inc.isCached = function() {
	var mouse = iron_system_Input.getMouse();
	var mx = arm_render_Inc.lastX;
	var my = arm_render_Inc.lastY;
	arm_render_Inc.lastX = mouse.x - arm_App.x();
	arm_render_Inc.lastY = mouse.y - arm_App.y();
	if(arm_Config.raw.brush_live && arm_Context.pdirty <= 0) {
		if((mx != arm_render_Inc.lastX || my != arm_render_Inc.lastY) && (arm_Context.paintVec.x < 1 && arm_Context.paintVec.x > 0 && arm_Context.paintVec.y < 1 && arm_Context.paintVec.y > 0 || arm_ui_UIView2D.inst.show && arm_ui_UIView2D.inst.type == 0 && mx > arm_ui_UIView2D.inst.wx && mx < arm_ui_UIView2D.inst.wx + arm_ui_UIView2D.inst.ww && my > arm_ui_UIView2D.inst.wy && my < arm_ui_UIView2D.inst.wy + arm_ui_UIView2D.inst.wh) || arm_Context.brushLocked) {
			arm_Context.rdirty = 2;
		}
		arm_Context.sub = 0;
	}
	if(arm_Context.ddirty <= 0 && arm_Context.rdirty <= 0 && (arm_Context.pdirty <= 0 || arm_ui_UIHeader.inst.worktab.position == 3)) {
		if(mx != arm_render_Inc.lastX || my != arm_render_Inc.lastY || mouse.locked) {
			arm_Context.ddirty = 0;
		}
		if(arm_Context.ddirty > -2) {
			arm_render_Inc.path.setTarget("");
			arm_render_Inc.path.bindTarget("taa","tex");
			if(arm_Config.raw.rp_supersample == 4) {
				arm_render_Inc.path.drawShader("shader_datas/supersample_resolve/supersample_resolve");
			} else {
				arm_render_Inc.path.drawShader("shader_datas/copy_pass/copy_pass");
			}
			if(arm_Config.raw.brush_3d) {
				arm_render_RenderPathPaint.commandsCursor();
			}
			if(arm_Context.ddirty <= 0) {
				arm_Context.ddirty--;
			}
		}
		arm_render_Inc.end();
		arm_render_RenderPathPaint.finishPaint();
		return true;
	}
	return false;
};
var arm_render_LineDraw = function() { };
$hxClasses["arm.render.LineDraw"] = arm_render_LineDraw;
arm_render_LineDraw.__name__ = "arm.render.LineDraw";
arm_render_LineDraw.render = function(g4) {
	if(!(arm_ui_UIHeader.inst.worktab.position == 0 && arm_Context.layer.fill_layer != null && arm_Context.layer.uvType == 2)) {
		return;
	}
	arm_render_LineDraw.mat = arm_Context.layer.decalMat;
	arm_render_LineDraw.dim = arm_Context.layer.decalDim;
	arm_render_LineDraw.g = g4;
	if(arm_render_LineDraw.pipeline == null) {
		var structure = new kha_graphics4_VertexStructure();
		structure.add("pos",2);
		structure.add("col",2);
		arm_render_LineDraw.pipeline = new kha_graphics4_PipelineState();
		arm_render_LineDraw.pipeline.inputLayout = [structure];
		arm_render_LineDraw.pipeline.fragmentShader = kha_Shaders.line_frag;
		arm_render_LineDraw.pipeline.vertexShader = kha_Shaders.line_vert;
		arm_render_LineDraw.pipeline.depthWrite = true;
		arm_render_LineDraw.pipeline.depthMode = 4;
		arm_render_LineDraw.pipeline.cullMode = 2;
		arm_render_LineDraw.pipeline.colorAttachmentCount = 3;
		arm_render_LineDraw.pipeline.colorAttachments[0] = 4;
		arm_render_LineDraw.pipeline.colorAttachments[1] = 4;
		arm_render_LineDraw.pipeline.colorAttachments[2] = 4;
		arm_render_LineDraw.pipeline.depthStencilAttachment = 1;
		arm_render_LineDraw.pipeline.compile();
		arm_render_LineDraw.vpID = arm_render_LineDraw.pipeline.getConstantLocation("VP");
		arm_render_LineDraw.vp = new iron_math_Mat4(1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0);
		arm_render_LineDraw.vertexBuffer = new kha_graphics4_VertexBuffer(1200,structure,1);
		arm_render_LineDraw.indexBuffer = new kha_graphics4_IndexBuffer(1800,1);
	}
	arm_render_LineDraw.begin();
	arm_render_LineDraw.bounds(arm_render_LineDraw.mat,arm_render_LineDraw.dim);
	arm_render_LineDraw.end();
};
arm_render_LineDraw.bounds = function(mat,dim) {
	arm_render_LineDraw.wpos = new iron_math_Vec4(mat.self._30,mat.self._31,mat.self._32,mat.self._33);
	var dx = dim.x / 2;
	var dy = dim.y / 2;
	var dz = dim.z / 2;
	var x = mat.self._20;
	var y = mat.self._21;
	var z = mat.self._22;
	if(z == null) {
		z = 0.0;
	}
	if(y == null) {
		y = 0.0;
	}
	if(x == null) {
		x = 0.0;
	}
	var up_x = x;
	var up_y = y;
	var up_z = z;
	var x = mat.self._10;
	var y = mat.self._11;
	var z = mat.self._12;
	if(z == null) {
		z = 0.0;
	}
	if(y == null) {
		y = 0.0;
	}
	if(x == null) {
		x = 0.0;
	}
	var look_x = x;
	var look_y = y;
	var look_z = z;
	var x = mat.self._00;
	var y = mat.self._01;
	var z = mat.self._02;
	if(z == null) {
		z = 0.0;
	}
	if(y == null) {
		y = 0.0;
	}
	if(x == null) {
		x = 0.0;
	}
	var right_x = x;
	var right_y = y;
	var right_z = z;
	var n = Math.sqrt(up_x * up_x + up_y * up_y + up_z * up_z);
	if(n > 0.0) {
		var invN = 1.0 / n;
		up_x *= invN;
		up_y *= invN;
		up_z *= invN;
	}
	var n = Math.sqrt(look_x * look_x + look_y * look_y + look_z * look_z);
	if(n > 0.0) {
		var invN = 1.0 / n;
		look_x *= invN;
		look_y *= invN;
		look_z *= invN;
	}
	var n = Math.sqrt(right_x * right_x + right_y * right_y + right_z * right_z);
	if(n > 0.0) {
		var invN = 1.0 / n;
		right_x *= invN;
		right_y *= invN;
		right_z *= invN;
	}
	var _this = arm_render_LineDraw.vx;
	_this.x = right_x;
	_this.y = right_y;
	_this.z = right_z;
	_this.w = 1.0;
	var _this = arm_render_LineDraw.vx;
	_this.x *= dx;
	_this.y *= dx;
	_this.z *= dx;
	var _this = arm_render_LineDraw.vy;
	_this.x = look_x;
	_this.y = look_y;
	_this.z = look_z;
	_this.w = 1.0;
	var _this = arm_render_LineDraw.vy;
	_this.x *= dy;
	_this.y *= dy;
	_this.z *= dy;
	var _this = arm_render_LineDraw.vz;
	_this.x = up_x;
	_this.y = up_y;
	_this.z = up_z;
	_this.w = 1.0;
	var _this = arm_render_LineDraw.vz;
	_this.x *= dz;
	_this.y *= dz;
	_this.z *= dz;
	arm_render_LineDraw.lineb(-1,-1,-1,1,-1,-1);
	arm_render_LineDraw.lineb(-1,1,-1,1,1,-1);
	arm_render_LineDraw.lineb(-1,-1,1,1,-1,1);
	arm_render_LineDraw.lineb(-1,1,1,1,1,1);
	arm_render_LineDraw.lineb(-1,-1,-1,-1,1,-1);
	arm_render_LineDraw.lineb(-1,-1,1,-1,1,1);
	arm_render_LineDraw.lineb(1,-1,-1,1,1,-1);
	arm_render_LineDraw.lineb(1,-1,1,1,1,1);
	arm_render_LineDraw.lineb(-1,-1,-1,-1,-1,1);
	arm_render_LineDraw.lineb(-1,1,-1,-1,1,1);
	arm_render_LineDraw.lineb(1,-1,-1,1,-1,1);
	arm_render_LineDraw.lineb(1,1,-1,1,1,1);
};
arm_render_LineDraw.lineb = function(a,b,c,d,e,f) {
	var _this = arm_render_LineDraw.v1;
	var v = arm_render_LineDraw.wpos;
	_this.x = v.x;
	_this.y = v.y;
	_this.z = v.z;
	_this.w = v.w;
	var _this = arm_render_LineDraw.t;
	var v = arm_render_LineDraw.vx;
	_this.x = v.x;
	_this.y = v.y;
	_this.z = v.z;
	_this.w = v.w;
	var _this = arm_render_LineDraw.t;
	_this.x *= a;
	_this.y *= a;
	_this.z *= a;
	var _this = arm_render_LineDraw.v1;
	var v = arm_render_LineDraw.t;
	_this.x += v.x;
	_this.y += v.y;
	_this.z += v.z;
	var _this = arm_render_LineDraw.t;
	var v = arm_render_LineDraw.vy;
	_this.x = v.x;
	_this.y = v.y;
	_this.z = v.z;
	_this.w = v.w;
	var _this = arm_render_LineDraw.t;
	_this.x *= b;
	_this.y *= b;
	_this.z *= b;
	var _this = arm_render_LineDraw.v1;
	var v = arm_render_LineDraw.t;
	_this.x += v.x;
	_this.y += v.y;
	_this.z += v.z;
	var _this = arm_render_LineDraw.t;
	var v = arm_render_LineDraw.vz;
	_this.x = v.x;
	_this.y = v.y;
	_this.z = v.z;
	_this.w = v.w;
	var _this = arm_render_LineDraw.t;
	_this.x *= c;
	_this.y *= c;
	_this.z *= c;
	var _this = arm_render_LineDraw.v1;
	var v = arm_render_LineDraw.t;
	_this.x += v.x;
	_this.y += v.y;
	_this.z += v.z;
	var _this = arm_render_LineDraw.v2;
	var v = arm_render_LineDraw.wpos;
	_this.x = v.x;
	_this.y = v.y;
	_this.z = v.z;
	_this.w = v.w;
	var _this = arm_render_LineDraw.t;
	var v = arm_render_LineDraw.vx;
	_this.x = v.x;
	_this.y = v.y;
	_this.z = v.z;
	_this.w = v.w;
	var _this = arm_render_LineDraw.t;
	_this.x *= d;
	_this.y *= d;
	_this.z *= d;
	var _this = arm_render_LineDraw.v2;
	var v = arm_render_LineDraw.t;
	_this.x += v.x;
	_this.y += v.y;
	_this.z += v.z;
	var _this = arm_render_LineDraw.t;
	var v = arm_render_LineDraw.vy;
	_this.x = v.x;
	_this.y = v.y;
	_this.z = v.z;
	_this.w = v.w;
	var _this = arm_render_LineDraw.t;
	_this.x *= e;
	_this.y *= e;
	_this.z *= e;
	var _this = arm_render_LineDraw.v2;
	var v = arm_render_LineDraw.t;
	_this.x += v.x;
	_this.y += v.y;
	_this.z += v.z;
	var _this = arm_render_LineDraw.t;
	var v = arm_render_LineDraw.vz;
	_this.x = v.x;
	_this.y = v.y;
	_this.z = v.z;
	_this.w = v.w;
	var _this = arm_render_LineDraw.t;
	_this.x *= f;
	_this.y *= f;
	_this.z *= f;
	var _this = arm_render_LineDraw.v2;
	var v = arm_render_LineDraw.t;
	_this.x += v.x;
	_this.y += v.y;
	_this.z += v.z;
	arm_render_LineDraw.line(arm_render_LineDraw.v1.x,arm_render_LineDraw.v1.y,arm_render_LineDraw.v1.z,arm_render_LineDraw.v2.x,arm_render_LineDraw.v2.y,arm_render_LineDraw.v2.z);
};
arm_render_LineDraw.line = function(x1,y1,z1,x2,y2,z2) {
	if(arm_render_LineDraw.lines >= 300) {
		arm_render_LineDraw.end();
		arm_render_LineDraw.begin();
	}
	var _this = arm_render_LineDraw.midPoint;
	_this.x = x1 + x2;
	_this.y = y1 + y2;
	_this.z = z1 + z2;
	_this.w = 1.0;
	var _this = arm_render_LineDraw.midPoint;
	_this.x *= 0.5;
	_this.y *= 0.5;
	_this.z *= 0.5;
	var _this = arm_render_LineDraw.midLine;
	_this.x = x1;
	_this.y = y1;
	_this.z = z1;
	_this.w = 1.0;
	var _this = arm_render_LineDraw.midLine;
	var v = arm_render_LineDraw.midPoint;
	_this.x -= v.x;
	_this.y -= v.y;
	_this.z -= v.z;
	var _this = iron_Scene.active.camera.transform.world;
	arm_render_LineDraw.cameraLook = new iron_math_Vec4(_this.self._30,_this.self._31,_this.self._32,_this.self._33);
	var _this = arm_render_LineDraw.cameraLook;
	var v = arm_render_LineDraw.midPoint;
	_this.x -= v.x;
	_this.y -= v.y;
	_this.z -= v.z;
	var _this = arm_render_LineDraw.cameraLook;
	var v = arm_render_LineDraw.midLine;
	var ax = _this.x;
	var ay = _this.y;
	var az = _this.z;
	var vx = v.x;
	var vy = v.y;
	var vz = v.z;
	_this.x = ay * vz - az * vy;
	_this.y = az * vx - ax * vz;
	_this.z = ax * vy - ay * vx;
	var n = Math.sqrt(_this.x * _this.x + _this.y * _this.y + _this.z * _this.z);
	if(n > 0.0) {
		var invN = 1.0 / n;
		_this.x *= invN;
		_this.y *= invN;
		_this.z *= invN;
	}
	var f = arm_render_LineDraw.strength;
	_this.x *= f;
	_this.y *= f;
	_this.z *= f;
	var _this1 = arm_render_LineDraw.corner1;
	_this1.x = x1;
	_this1.y = y1;
	_this1.z = z1;
	_this1.w = 1.0;
	_this1.x += _this.x;
	_this1.y += _this.y;
	_this1.z += _this.z;
	var _this1 = arm_render_LineDraw.corner2;
	_this1.x = x1;
	_this1.y = y1;
	_this1.z = z1;
	_this1.w = 1.0;
	_this1.x -= _this.x;
	_this1.y -= _this.y;
	_this1.z -= _this.z;
	var _this1 = arm_render_LineDraw.corner3;
	_this1.x = x2;
	_this1.y = y2;
	_this1.z = z2;
	_this1.w = 1.0;
	_this1.x -= _this.x;
	_this1.y -= _this.y;
	_this1.z -= _this.z;
	var _this1 = arm_render_LineDraw.corner4;
	_this1.x = x2;
	_this1.y = y2;
	_this1.z = z2;
	_this1.w = 1.0;
	_this1.x += _this.x;
	_this1.y += _this.y;
	_this1.z += _this.z;
	var i = arm_render_LineDraw.lines * 24;
	arm_render_LineDraw.vbData[i] = arm_render_LineDraw.corner1.x;
	arm_render_LineDraw.vbData[i + 1] = arm_render_LineDraw.corner1.y;
	arm_render_LineDraw.vbData[i + 2] = arm_render_LineDraw.corner1.z;
	arm_render_LineDraw.vbData[i + 3] = ((arm_render_LineDraw.color & 16711680) >>> 16) * 0.00392156862745098;
	arm_render_LineDraw.vbData[i + 4] = ((arm_render_LineDraw.color & 65280) >>> 8) * 0.00392156862745098;
	arm_render_LineDraw.vbData[i + 5] = (arm_render_LineDraw.color & 255) * 0.00392156862745098;
	i += 6;
	arm_render_LineDraw.vbData[i] = arm_render_LineDraw.corner2.x;
	arm_render_LineDraw.vbData[i + 1] = arm_render_LineDraw.corner2.y;
	arm_render_LineDraw.vbData[i + 2] = arm_render_LineDraw.corner2.z;
	arm_render_LineDraw.vbData[i + 3] = ((arm_render_LineDraw.color & 16711680) >>> 16) * 0.00392156862745098;
	arm_render_LineDraw.vbData[i + 4] = ((arm_render_LineDraw.color & 65280) >>> 8) * 0.00392156862745098;
	arm_render_LineDraw.vbData[i + 5] = (arm_render_LineDraw.color & 255) * 0.00392156862745098;
	i += 6;
	arm_render_LineDraw.vbData[i] = arm_render_LineDraw.corner3.x;
	arm_render_LineDraw.vbData[i + 1] = arm_render_LineDraw.corner3.y;
	arm_render_LineDraw.vbData[i + 2] = arm_render_LineDraw.corner3.z;
	arm_render_LineDraw.vbData[i + 3] = ((arm_render_LineDraw.color & 16711680) >>> 16) * 0.00392156862745098;
	arm_render_LineDraw.vbData[i + 4] = ((arm_render_LineDraw.color & 65280) >>> 8) * 0.00392156862745098;
	arm_render_LineDraw.vbData[i + 5] = (arm_render_LineDraw.color & 255) * 0.00392156862745098;
	i += 6;
	arm_render_LineDraw.vbData[i] = arm_render_LineDraw.corner4.x;
	arm_render_LineDraw.vbData[i + 1] = arm_render_LineDraw.corner4.y;
	arm_render_LineDraw.vbData[i + 2] = arm_render_LineDraw.corner4.z;
	arm_render_LineDraw.vbData[i + 3] = ((arm_render_LineDraw.color & 16711680) >>> 16) * 0.00392156862745098;
	arm_render_LineDraw.vbData[i + 4] = ((arm_render_LineDraw.color & 65280) >>> 8) * 0.00392156862745098;
	arm_render_LineDraw.vbData[i + 5] = (arm_render_LineDraw.color & 255) * 0.00392156862745098;
	i = arm_render_LineDraw.lines * 6;
	arm_render_LineDraw.ibData[i] = arm_render_LineDraw.lines * 4;
	arm_render_LineDraw.ibData[i + 1] = arm_render_LineDraw.lines * 4 + 1;
	arm_render_LineDraw.ibData[i + 2] = arm_render_LineDraw.lines * 4 + 2;
	arm_render_LineDraw.ibData[i + 3] = arm_render_LineDraw.lines * 4 + 2;
	arm_render_LineDraw.ibData[i + 4] = arm_render_LineDraw.lines * 4 + 3;
	arm_render_LineDraw.ibData[i + 5] = arm_render_LineDraw.lines * 4;
	arm_render_LineDraw.lines++;
};
arm_render_LineDraw.begin = function() {
	arm_render_LineDraw.lines = 0;
	arm_render_LineDraw.vbData = arm_render_LineDraw.vertexBuffer.lock();
	arm_render_LineDraw.ibData = arm_render_LineDraw.indexBuffer.lock();
};
arm_render_LineDraw.end = function() {
	arm_render_LineDraw.vertexBuffer.unlock();
	arm_render_LineDraw.indexBuffer.unlock();
	arm_render_LineDraw.g.setVertexBuffer(arm_render_LineDraw.vertexBuffer);
	arm_render_LineDraw.g.setIndexBuffer(arm_render_LineDraw.indexBuffer);
	arm_render_LineDraw.g.setPipeline(arm_render_LineDraw.pipeline);
	var camera = iron_Scene.active.camera;
	var _this = arm_render_LineDraw.vp;
	var m = camera.V;
	_this.self._00 = m.self._00;
	_this.self._01 = m.self._01;
	_this.self._02 = m.self._02;
	_this.self._03 = m.self._03;
	_this.self._10 = m.self._10;
	_this.self._11 = m.self._11;
	_this.self._12 = m.self._12;
	_this.self._13 = m.self._13;
	_this.self._20 = m.self._20;
	_this.self._21 = m.self._21;
	_this.self._22 = m.self._22;
	_this.self._23 = m.self._23;
	_this.self._30 = m.self._30;
	_this.self._31 = m.self._31;
	_this.self._32 = m.self._32;
	_this.self._33 = m.self._33;
	var _this = arm_render_LineDraw.vp;
	var m = camera.P;
	var a00 = _this.self._00;
	var a01 = _this.self._01;
	var a02 = _this.self._02;
	var a03 = _this.self._03;
	var a10 = _this.self._10;
	var a11 = _this.self._11;
	var a12 = _this.self._12;
	var a13 = _this.self._13;
	var a20 = _this.self._20;
	var a21 = _this.self._21;
	var a22 = _this.self._22;
	var a23 = _this.self._23;
	var a30 = _this.self._30;
	var a31 = _this.self._31;
	var a32 = _this.self._32;
	var a33 = _this.self._33;
	var b0 = m.self._00;
	var b1 = m.self._10;
	var b2 = m.self._20;
	var b3 = m.self._30;
	_this.self._00 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
	_this.self._10 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
	_this.self._20 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
	_this.self._30 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
	b0 = m.self._01;
	b1 = m.self._11;
	b2 = m.self._21;
	b3 = m.self._31;
	_this.self._01 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
	_this.self._11 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
	_this.self._21 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
	_this.self._31 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
	b0 = m.self._02;
	b1 = m.self._12;
	b2 = m.self._22;
	b3 = m.self._32;
	_this.self._02 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
	_this.self._12 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
	_this.self._22 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
	_this.self._32 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
	b0 = m.self._03;
	b1 = m.self._13;
	b2 = m.self._23;
	b3 = m.self._33;
	_this.self._03 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
	_this.self._13 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
	_this.self._23 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
	_this.self._33 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
	var matrix = arm_render_LineDraw.vp.self;
	kha_graphics4_Graphics.mat[0] = matrix._00;
	kha_graphics4_Graphics.mat[1] = matrix._01;
	kha_graphics4_Graphics.mat[2] = matrix._02;
	kha_graphics4_Graphics.mat[3] = matrix._03;
	kha_graphics4_Graphics.mat[4] = matrix._10;
	kha_graphics4_Graphics.mat[5] = matrix._11;
	kha_graphics4_Graphics.mat[6] = matrix._12;
	kha_graphics4_Graphics.mat[7] = matrix._13;
	kha_graphics4_Graphics.mat[8] = matrix._20;
	kha_graphics4_Graphics.mat[9] = matrix._21;
	kha_graphics4_Graphics.mat[10] = matrix._22;
	kha_graphics4_Graphics.mat[11] = matrix._23;
	kha_graphics4_Graphics.mat[12] = matrix._30;
	kha_graphics4_Graphics.mat[13] = matrix._31;
	kha_graphics4_Graphics.mat[14] = matrix._32;
	kha_graphics4_Graphics.mat[15] = matrix._33;
	Krom.setMatrix(arm_render_LineDraw.vpID,kha_graphics4_Graphics.mat.buffer);
	arm_render_LineDraw.g.drawIndexedVertices(0,arm_render_LineDraw.lines * 6);
};
var arm_render_RenderPathDeferred = function() { };
$hxClasses["arm.render.RenderPathDeferred"] = arm_render_RenderPathDeferred;
arm_render_RenderPathDeferred.__name__ = "arm.render.RenderPathDeferred";
arm_render_RenderPathDeferred.init = function(_path) {
	arm_render_RenderPathDeferred.path = _path;
	arm_render_RenderPathDeferred.path.createDepthBuffer("main","DEPTH24");
	var t = new iron_RenderTargetRaw();
	t.name = "gbuffer0";
	t.width = 0;
	t.height = 0;
	t.format = "RGBA64";
	t.scale = arm_render_Inc.superSample;
	t.depth_buffer = "main";
	arm_render_RenderPathDeferred.path.createRenderTarget(t);
	var t = new iron_RenderTargetRaw();
	t.name = "gbuffer1";
	t.width = 0;
	t.height = 0;
	t.format = "RGBA64";
	t.scale = arm_render_Inc.superSample;
	arm_render_RenderPathDeferred.path.createRenderTarget(t);
	var t = new iron_RenderTargetRaw();
	t.name = "gbuffer2";
	t.width = 0;
	t.height = 0;
	t.format = "RGBA64";
	t.scale = arm_render_Inc.superSample;
	arm_render_RenderPathDeferred.path.createRenderTarget(t);
	var t = new iron_RenderTargetRaw();
	t.name = "tex";
	t.width = 0;
	t.height = 0;
	t.format = "RGBA64";
	t.scale = arm_render_Inc.superSample;
	arm_render_RenderPathDeferred.path.createRenderTarget(t);
	var t = new iron_RenderTargetRaw();
	t.name = "buf";
	t.width = 0;
	t.height = 0;
	t.format = "RGBA32";
	t.scale = arm_render_Inc.superSample;
	arm_render_RenderPathDeferred.path.createRenderTarget(t);
	var t = new iron_RenderTargetRaw();
	t.name = "bufa";
	t.width = 0;
	t.height = 0;
	t.format = "RGBA32";
	t.scale = arm_render_Inc.superSample;
	arm_render_RenderPathDeferred.path.createRenderTarget(t);
	var t = new iron_RenderTargetRaw();
	t.name = "taa";
	t.width = 0;
	t.height = 0;
	t.format = "RGBA32";
	t.scale = arm_render_Inc.superSample;
	arm_render_RenderPathDeferred.path.createRenderTarget(t);
	var t = new iron_RenderTargetRaw();
	t.name = "taa2";
	t.width = 0;
	t.height = 0;
	t.format = "RGBA32";
	t.scale = arm_render_Inc.superSample;
	arm_render_RenderPathDeferred.path.createRenderTarget(t);
	var t = new iron_RenderTargetRaw();
	t.name = "empty_white";
	t.width = 1;
	t.height = 1;
	t.format = "R8";
	var rt = new iron_RenderTarget(t);
	var b = new haxe_io_Bytes(new ArrayBuffer(1));
	b.b[0] = 255;
	rt.image = kha_Image.fromBytes(b,t.width,t.height,1);
	arm_render_RenderPathDeferred.path.renderTargets.h[t.name] = rt;
	var t = new iron_RenderTargetRaw();
	t.name = "empty_black";
	t.width = 1;
	t.height = 1;
	t.format = "RGBA32";
	var rt = new iron_RenderTarget(t);
	var b = new haxe_io_Bytes(new ArrayBuffer(4));
	b.b[0] = 0;
	b.b[1] = 0;
	b.b[2] = 0;
	b.b[3] = 0;
	rt.image = kha_Image.fromBytes(b,t.width,t.height,0);
	arm_render_RenderPathDeferred.path.renderTargets.h[t.name] = rt;
	arm_render_RenderPathDeferred.path.loadShader("world_pass/world_pass/world_pass");
	arm_render_RenderPathDeferred.path.loadShader("deferred_light/deferred_light/deferred_light");
	arm_render_RenderPathDeferred.path.loadShader("shader_datas/compositor_pass/compositor_pass");
	arm_render_RenderPathDeferred.path.loadShader("shader_datas/copy_pass/copy_pass");
	arm_render_RenderPathDeferred.path.loadShader("shader_datas/copy_pass/copyR8_pass");
	arm_render_RenderPathDeferred.path.loadShader("shader_datas/smaa_edge_detect/smaa_edge_detect");
	arm_render_RenderPathDeferred.path.loadShader("shader_datas/smaa_blend_weight/smaa_blend_weight");
	arm_render_RenderPathDeferred.path.loadShader("shader_datas/smaa_neighborhood_blend/smaa_neighborhood_blend");
	arm_render_RenderPathDeferred.path.loadShader("shader_datas/taa_pass/taa_pass");
	arm_render_RenderPathDeferred.path.loadShader("shader_datas/supersample_resolve/supersample_resolve");
	arm_render_Inc.initGI();
	arm_render_RenderPathDeferred.path.loadShader("deferred_light/deferred_light/deferred_light_voxel");
	arm_render_RenderPathPaint.init(arm_render_RenderPathDeferred.path);
	arm_render_RenderPathPreview.init(arm_render_RenderPathDeferred.path);
};
arm_render_RenderPathDeferred.commands = function() {
	if(kha_System.windowWidth() == 0 || kha_System.windowHeight() == 0) {
		return;
	}
	arm_render_Inc.beginSplit();
	if(arm_render_Inc.isCached()) {
		return;
	}
	if(!arm_Context.splitView) {
		iron_Scene.active.camera.frame = arm_render_RenderPathDeferred.taaFrame;
		iron_Scene.active.camera.projectionJitter();
	}
	iron_Scene.active.camera.buildMatrix();
	arm_render_RenderPathPaint.begin();
	arm_render_RenderPathDeferred.drawSplit();
	arm_render_RenderPathDeferred.drawGbuffer();
	arm_render_RenderPathPaint.draw();
	arm_render_RenderPathDeferred.drawDeferred();
	arm_render_RenderPathPaint.end();
	arm_render_Inc.end();
	arm_render_RenderPathDeferred.taaFrame++;
};
arm_render_RenderPathDeferred.drawDeferred = function() {
	var cameraType = arm_Context.cameraType;
	var ddirty = arm_Context.ddirty;
	if(arm_Config.raw.rp_ssgi != false && cameraType == 0 && ddirty > 0 && arm_render_RenderPathDeferred.taaFrame > 0) {
		if(arm_render_RenderPathDeferred.path.renderTargets.h["singlea"] == null) {
			var t = new iron_RenderTargetRaw();
			t.name = "singlea";
			t.width = 0;
			t.height = 0;
			t.format = "R8";
			t.scale = arm_render_Inc.superSample;
			arm_render_RenderPathDeferred.path.createRenderTarget(t);
			var t = new iron_RenderTargetRaw();
			t.name = "singleb";
			t.width = 0;
			t.height = 0;
			t.format = "R8";
			t.scale = arm_render_Inc.superSample;
			arm_render_RenderPathDeferred.path.createRenderTarget(t);
			arm_render_RenderPathDeferred.path.loadShader("shader_datas/ssgi_pass/ssgi_pass");
			arm_render_RenderPathDeferred.path.loadShader("shader_datas/blur_edge_pass/blur_edge_pass_x");
			arm_render_RenderPathDeferred.path.loadShader("shader_datas/blur_edge_pass/blur_edge_pass_y");
		}
		arm_render_RenderPathDeferred.path.setTarget("singlea");
		arm_render_RenderPathDeferred.path.bindTarget("_main","gbufferD");
		arm_render_RenderPathDeferred.path.bindTarget("gbuffer0","gbuffer0");
		arm_render_RenderPathDeferred.path.drawShader("shader_datas/ssgi_pass/ssgi_pass");
		arm_render_RenderPathDeferred.path.setTarget("singleb");
		arm_render_RenderPathDeferred.path.bindTarget("singlea","tex");
		arm_render_RenderPathDeferred.path.bindTarget("gbuffer0","gbuffer0");
		arm_render_RenderPathDeferred.path.drawShader("shader_datas/blur_edge_pass/blur_edge_pass_x");
		arm_render_RenderPathDeferred.path.setTarget("singlea");
		arm_render_RenderPathDeferred.path.bindTarget("singleb","tex");
		arm_render_RenderPathDeferred.path.bindTarget("gbuffer0","gbuffer0");
		arm_render_RenderPathDeferred.path.drawShader("shader_datas/blur_edge_pass/blur_edge_pass_y");
	}
	if(arm_Config.raw.rp_gi != false) {
		if(arm_render_RenderPathDeferred.path.voxelize() && ddirty > 0 && arm_render_RenderPathDeferred.taaFrame > 0) {
			var voxtex = arm_render_RenderPathDeferred.voxels;
			arm_render_RenderPathDeferred.path.clearImage(voxtex,0);
			arm_render_RenderPathDeferred.path.setTarget("");
			arm_render_RenderPathDeferred.path.setViewport(256,256);
			arm_render_RenderPathDeferred.path.bindTarget(voxtex,"voxels");
			if(arm_node_MakeMaterial.heightUsed) {
				arm_render_RenderPathDeferred.path.bindTarget("texpaint_pack" + arm_Project.layers[0].id,"texpaint_pack");
			}
			arm_render_RenderPathDeferred.path.drawMeshes("voxel");
			arm_render_RenderPathDeferred.path.generateMipmaps(arm_render_RenderPathDeferred.voxels);
		}
	}
	arm_render_RenderPathDeferred.path.setTarget("tex");
	arm_render_RenderPathDeferred.path.bindTarget("_main","gbufferD");
	arm_render_RenderPathDeferred.path.bindTarget("gbuffer0","gbuffer0");
	arm_render_RenderPathDeferred.path.bindTarget("gbuffer1","gbuffer1");
	if(arm_Config.raw.rp_ssgi != false && cameraType == 0 && arm_render_RenderPathDeferred.taaFrame > 0) {
		arm_render_RenderPathDeferred.path.bindTarget("singlea","ssaotex");
	} else {
		arm_render_RenderPathDeferred.path.bindTarget("empty_white","ssaotex");
	}
	var voxelao_pass = false;
	if(arm_Config.raw.rp_gi != false) {
		voxelao_pass = true;
		arm_render_RenderPathDeferred.path.bindTarget(arm_render_RenderPathDeferred.voxels,"voxels");
	}
	if(voxelao_pass) {
		arm_render_RenderPathDeferred.path.drawShader("deferred_light/deferred_light/deferred_light_voxel");
	} else {
		arm_render_RenderPathDeferred.path.drawShader("deferred_light/deferred_light/deferred_light");
	}
	arm_render_RenderPathDeferred.path.setDepthFrom("tex","gbuffer0");
	arm_render_RenderPathDeferred.path.setTarget("tex");
	arm_render_RenderPathDeferred.path.drawSkydome("world_pass/world_pass/world_pass");
	arm_render_RenderPathDeferred.path.setDepthFrom("tex","gbuffer1");
	if(arm_Config.raw.rp_bloom != false) {
		if(arm_render_RenderPathDeferred.path.renderTargets.h["bloomtex"] == null) {
			var t = new iron_RenderTargetRaw();
			t.name = "bloomtex";
			t.width = 0;
			t.height = 0;
			t.scale = 0.25;
			t.format = "RGBA64";
			arm_render_RenderPathDeferred.path.createRenderTarget(t);
			var t = new iron_RenderTargetRaw();
			t.name = "bloomtex2";
			t.width = 0;
			t.height = 0;
			t.scale = 0.25;
			t.format = "RGBA64";
			arm_render_RenderPathDeferred.path.createRenderTarget(t);
			arm_render_RenderPathDeferred.path.loadShader("shader_datas/bloom_pass/bloom_pass");
			arm_render_RenderPathDeferred.path.loadShader("shader_datas/blur_gaus_pass/blur_gaus_pass_x");
			arm_render_RenderPathDeferred.path.loadShader("shader_datas/blur_gaus_pass/blur_gaus_pass_y");
			arm_render_RenderPathDeferred.path.loadShader("shader_datas/blur_gaus_pass/blur_gaus_pass_y_blend");
		}
		arm_render_RenderPathDeferred.path.setTarget("bloomtex");
		arm_render_RenderPathDeferred.path.bindTarget("tex","tex");
		arm_render_RenderPathDeferred.path.drawShader("shader_datas/bloom_pass/bloom_pass");
		arm_render_RenderPathDeferred.path.setTarget("bloomtex2");
		arm_render_RenderPathDeferred.path.bindTarget("bloomtex","tex");
		arm_render_RenderPathDeferred.path.drawShader("shader_datas/blur_gaus_pass/blur_gaus_pass_x");
		arm_render_RenderPathDeferred.path.setTarget("bloomtex");
		arm_render_RenderPathDeferred.path.bindTarget("bloomtex2","tex");
		arm_render_RenderPathDeferred.path.drawShader("shader_datas/blur_gaus_pass/blur_gaus_pass_y");
		arm_render_RenderPathDeferred.path.setTarget("bloomtex2");
		arm_render_RenderPathDeferred.path.bindTarget("bloomtex","tex");
		arm_render_RenderPathDeferred.path.drawShader("shader_datas/blur_gaus_pass/blur_gaus_pass_x");
		arm_render_RenderPathDeferred.path.setTarget("bloomtex");
		arm_render_RenderPathDeferred.path.bindTarget("bloomtex2","tex");
		arm_render_RenderPathDeferred.path.drawShader("shader_datas/blur_gaus_pass/blur_gaus_pass_y");
		arm_render_RenderPathDeferred.path.setTarget("bloomtex2");
		arm_render_RenderPathDeferred.path.bindTarget("bloomtex","tex");
		arm_render_RenderPathDeferred.path.drawShader("shader_datas/blur_gaus_pass/blur_gaus_pass_x");
		arm_render_RenderPathDeferred.path.setTarget("bloomtex");
		arm_render_RenderPathDeferred.path.bindTarget("bloomtex2","tex");
		arm_render_RenderPathDeferred.path.drawShader("shader_datas/blur_gaus_pass/blur_gaus_pass_y");
		arm_render_RenderPathDeferred.path.setTarget("bloomtex2");
		arm_render_RenderPathDeferred.path.bindTarget("bloomtex","tex");
		arm_render_RenderPathDeferred.path.drawShader("shader_datas/blur_gaus_pass/blur_gaus_pass_x");
		arm_render_RenderPathDeferred.path.setTarget("tex");
		arm_render_RenderPathDeferred.path.bindTarget("bloomtex2","tex");
		arm_render_RenderPathDeferred.path.drawShader("shader_datas/blur_gaus_pass/blur_gaus_pass_y_blend");
	}
	if(arm_Config.raw.rp_ssr != false) {
		if(arm_render_RenderPathDeferred.path.cachedShaderContexts.h["shader_datas/ssr_pass/ssr_pass"] == null) {
			var t = new iron_RenderTargetRaw();
			t.name = "bufb";
			t.width = 0;
			t.height = 0;
			t.format = "RGBA64";
			arm_render_RenderPathDeferred.path.createRenderTarget(t);
			arm_render_RenderPathDeferred.path.loadShader("shader_datas/ssr_pass/ssr_pass");
			arm_render_RenderPathDeferred.path.loadShader("shader_datas/blur_adaptive_pass/blur_adaptive_pass_x");
			arm_render_RenderPathDeferred.path.loadShader("shader_datas/blur_adaptive_pass/blur_adaptive_pass_y3_blend");
		}
		arm_render_RenderPathDeferred.path.setTarget("bufb");
		arm_render_RenderPathDeferred.path.bindTarget("tex","tex");
		arm_render_RenderPathDeferred.path.bindTarget("_main","gbufferD");
		arm_render_RenderPathDeferred.path.bindTarget("gbuffer0","gbuffer0");
		arm_render_RenderPathDeferred.path.bindTarget("gbuffer1","gbuffer1");
		arm_render_RenderPathDeferred.path.drawShader("shader_datas/ssr_pass/ssr_pass");
		arm_render_RenderPathDeferred.path.setTarget("gbuffer1");
		arm_render_RenderPathDeferred.path.bindTarget("bufb","tex");
		arm_render_RenderPathDeferred.path.bindTarget("gbuffer0","gbuffer0");
		arm_render_RenderPathDeferred.path.drawShader("shader_datas/blur_adaptive_pass/blur_adaptive_pass_x");
		arm_render_RenderPathDeferred.path.setTarget("tex");
		arm_render_RenderPathDeferred.path.bindTarget("gbuffer1","tex");
		arm_render_RenderPathDeferred.path.bindTarget("gbuffer0","gbuffer0");
		arm_render_RenderPathDeferred.path.drawShader("shader_datas/blur_adaptive_pass/blur_adaptive_pass_y3_blend");
	}
	arm_render_RenderPathDeferred.path.setTarget("buf");
	arm_render_RenderPathDeferred.path.bindTarget("tex","tex");
	arm_render_RenderPathDeferred.path.drawShader("shader_datas/compositor_pass/compositor_pass");
	arm_render_RenderPathDeferred.path.setTarget("buf");
	var currentG = arm_render_RenderPathDeferred.path.currentG;
	arm_render_RenderPathDeferred.path.drawMeshes("overlay");
	arm_render_Inc.drawCompass(currentG);
	var current = arm_render_RenderPathDeferred.taaFrame % 2 == 0 ? "bufa" : "taa2";
	var last = arm_render_RenderPathDeferred.taaFrame % 2 == 0 ? "taa2" : "bufa";
	arm_render_RenderPathDeferred.path.setTarget(current);
	arm_render_RenderPathDeferred.path.clearTarget(0);
	arm_render_RenderPathDeferred.path.bindTarget("buf","colorTex");
	arm_render_RenderPathDeferred.path.drawShader("shader_datas/smaa_edge_detect/smaa_edge_detect");
	arm_render_RenderPathDeferred.path.setTarget("taa");
	arm_render_RenderPathDeferred.path.clearTarget(0);
	arm_render_RenderPathDeferred.path.bindTarget(current,"edgesTex");
	arm_render_RenderPathDeferred.path.drawShader("shader_datas/smaa_blend_weight/smaa_blend_weight");
	arm_render_RenderPathDeferred.path.setTarget(current);
	arm_render_RenderPathDeferred.path.bindTarget("buf","colorTex");
	arm_render_RenderPathDeferred.path.bindTarget("taa","blendTex");
	arm_render_RenderPathDeferred.path.bindTarget("gbuffer2","sveloc");
	arm_render_RenderPathDeferred.path.drawShader("shader_datas/smaa_neighborhood_blend/smaa_neighborhood_blend");
	if(arm_Context.splitView) {
		arm_render_RenderPathDeferred.path.setTarget("taa");
		arm_render_RenderPathDeferred.path.bindTarget(current,"tex");
		arm_render_RenderPathDeferred.path.drawShader("shader_datas/copy_pass/copy_pass");
	} else {
		arm_render_RenderPathDeferred.path.setTarget("taa");
		arm_render_RenderPathDeferred.path.bindTarget(current,"tex");
		arm_render_RenderPathDeferred.path.bindTarget(last,"tex2");
		arm_render_RenderPathDeferred.path.bindTarget("gbuffer2","sveloc");
		arm_render_RenderPathDeferred.path.drawShader("shader_datas/taa_pass/taa_pass");
	}
	if(arm_Config.raw.rp_supersample != 4) {
		arm_render_RenderPathDeferred.path.setTarget("");
		arm_render_RenderPathDeferred.path.bindTarget(arm_render_RenderPathDeferred.taaFrame == 0 ? current : "taa","tex");
		arm_render_RenderPathDeferred.path.drawShader("shader_datas/copy_pass/copy_pass");
	}
	if(arm_Config.raw.rp_supersample == 4) {
		arm_render_RenderPathDeferred.path.setTarget("");
		arm_render_RenderPathDeferred.path.bindTarget(arm_render_RenderPathDeferred.taaFrame % 2 == 0 ? "taa2" : "taa","tex");
		arm_render_RenderPathDeferred.path.drawShader("shader_datas/supersample_resolve/supersample_resolve");
	}
};
arm_render_RenderPathDeferred.drawGbuffer = function() {
	arm_render_RenderPathDeferred.path.setTarget("gbuffer0");
	arm_render_RenderPathDeferred.path.clearTarget(null,1.0);
	arm_render_RenderPathDeferred.path.setTarget("gbuffer2");
	arm_render_RenderPathDeferred.path.clearTarget(-16777216);
	arm_render_RenderPathDeferred.path.setTarget("gbuffer0",["gbuffer1","gbuffer2"]);
	var currentG = arm_render_RenderPathDeferred.path.currentG;
	arm_render_RenderPathPaint.bindLayers();
	arm_render_RenderPathDeferred.path.drawMeshes("mesh");
	arm_render_RenderPathPaint.unbindLayers();
	arm_render_LineDraw.render(currentG);
};
arm_render_RenderPathDeferred.drawSplit = function() {
	if(arm_Context.splitView && !arm_Context.paint2dView) {
		arm_Context.ddirty = 1;
		var cam = iron_Scene.active.camera;
		arm_Context.viewIndex = arm_Context.viewIndex == 0 ? 1 : 0;
		cam.transform.setMatrix(arm_plugin_Camera.inst.views[arm_Context.viewIndex]);
		cam.buildMatrix();
		cam.buildProjection();
		arm_render_RenderPathDeferred.drawGbuffer();
		arm_render_RenderPathDeferred.drawDeferred();
		arm_Context.viewIndex = arm_Context.viewIndex == 0 ? 1 : 0;
		cam.transform.setMatrix(arm_plugin_Camera.inst.views[arm_Context.viewIndex]);
		cam.buildMatrix();
		cam.buildProjection();
	}
};
var arm_render_RenderPathForward = function() { };
$hxClasses["arm.render.RenderPathForward"] = arm_render_RenderPathForward;
arm_render_RenderPathForward.__name__ = "arm.render.RenderPathForward";
arm_render_RenderPathForward.init = function(_path) {
	arm_render_RenderPathForward.path = _path;
};
arm_render_RenderPathForward.commands = function() {
	if(kha_System.windowWidth() == 0 || kha_System.windowHeight() == 0) {
		return;
	}
	arm_render_Inc.beginSplit();
	if(arm_render_Inc.isCached()) {
		return;
	}
	if(!arm_Context.splitView) {
		iron_Scene.active.camera.frame = arm_render_RenderPathDeferred.taaFrame;
		iron_Scene.active.camera.projectionJitter();
	}
	iron_Scene.active.camera.buildMatrix();
	arm_render_RenderPathPaint.begin();
	arm_render_RenderPathForward.drawSplit();
	arm_render_RenderPathForward.drawGbuffer();
	arm_render_RenderPathPaint.draw();
	arm_render_RenderPathForward.drawForward();
	arm_render_RenderPathPaint.end();
	arm_render_Inc.end();
	arm_render_RenderPathDeferred.taaFrame++;
};
arm_render_RenderPathForward.drawGbuffer = function(gbuffer0,gbuffer1,gbuffer2) {
	if(gbuffer2 == null) {
		gbuffer2 = "gbuffer2";
	}
	if(gbuffer1 == null) {
		gbuffer1 = "gbuffer1";
	}
	if(gbuffer0 == null) {
		gbuffer0 = "gbuffer0";
	}
	arm_render_RenderPathForward.path.setTarget(gbuffer0);
	arm_render_RenderPathForward.path.clearTarget(null,1.0);
	arm_render_RenderPathForward.path.setTarget(gbuffer2);
	arm_render_RenderPathForward.path.clearTarget(-16777216);
	arm_render_RenderPathForward.path.setTarget(gbuffer0,[gbuffer1,gbuffer2]);
	arm_render_RenderPathPaint.bindLayers();
	arm_render_RenderPathForward.path.drawMeshes("mesh");
	arm_render_RenderPathPaint.unbindLayers();
	arm_render_LineDraw.render(arm_render_RenderPathForward.path.currentG);
};
arm_render_RenderPathForward.drawForward = function(eye,output,gbuffer0,gbuffer1,gbuffer2,buf,bufa,taa,taa2) {
	if(taa2 == null) {
		taa2 = "taa2";
	}
	if(taa == null) {
		taa = "taa";
	}
	if(bufa == null) {
		bufa = "bufa";
	}
	if(buf == null) {
		buf = "buf";
	}
	if(gbuffer2 == null) {
		gbuffer2 = "gbuffer2";
	}
	if(gbuffer1 == null) {
		gbuffer1 = "gbuffer1";
	}
	if(gbuffer0 == null) {
		gbuffer0 = "gbuffer0";
	}
	if(output == null) {
		output = "";
	}
	if(eye == null) {
		eye = false;
	}
	arm_render_RenderPathForward.path.setDepthFrom(gbuffer1,gbuffer0);
	arm_render_RenderPathForward.path.setTarget(gbuffer1);
	arm_render_RenderPathForward.path.drawSkydome("world_pass/world_pass/world_pass");
	arm_render_RenderPathForward.path.setDepthFrom(gbuffer1,gbuffer2);
	arm_render_RenderPathForward.path.setTarget(buf);
	arm_render_RenderPathForward.path.bindTarget(gbuffer1,"tex");
	arm_render_RenderPathForward.path.drawShader("shader_datas/compositor_pass/compositor_pass");
	if(output == "") {
		arm_render_RenderPathForward.path.setTarget(buf);
		var currentG = arm_render_RenderPathForward.path.currentG;
		arm_render_RenderPathForward.path.drawMeshes("overlay");
		arm_render_Inc.drawCompass(currentG);
	}
	var taaFrame = arm_render_RenderPathDeferred.taaFrame;
	var current = taaFrame % 2 == 0 ? bufa : taa2;
	arm_render_RenderPathForward.path.setTarget(current);
	arm_render_RenderPathForward.path.clearTarget(0);
	arm_render_RenderPathForward.path.bindTarget(buf,"colorTex");
	arm_render_RenderPathForward.path.drawShader("shader_datas/smaa_edge_detect/smaa_edge_detect");
	arm_render_RenderPathForward.path.setTarget(taa);
	arm_render_RenderPathForward.path.clearTarget(0);
	arm_render_RenderPathForward.path.bindTarget(current,"edgesTex");
	arm_render_RenderPathForward.path.drawShader("shader_datas/smaa_blend_weight/smaa_blend_weight");
	arm_render_RenderPathForward.path.setTarget(current);
	arm_render_RenderPathForward.path.bindTarget(buf,"colorTex");
	arm_render_RenderPathForward.path.bindTarget(taa,"blendTex");
	arm_render_RenderPathForward.path.bindTarget(gbuffer2,"sveloc");
	arm_render_RenderPathForward.path.drawShader("shader_datas/smaa_neighborhood_blend/smaa_neighborhood_blend");
	if(arm_Context.splitView || eye) {
		arm_render_RenderPathForward.path.setTarget(taa);
		arm_render_RenderPathForward.path.bindTarget(current,"tex");
		arm_render_RenderPathForward.path.drawShader("shader_datas/copy_pass/copy_pass");
	} else {
		arm_render_RenderPathForward.path.setTarget(taa);
		arm_render_RenderPathForward.path.bindTarget(current,"tex");
		arm_render_RenderPathForward.path.bindTarget(taaFrame % 2 == 0 ? taa2 : bufa,"tex2");
		arm_render_RenderPathForward.path.bindTarget(gbuffer2,"sveloc");
		arm_render_RenderPathForward.path.drawShader("shader_datas/taa_pass/taa_pass");
	}
	if(arm_Config.raw.rp_supersample != 4) {
		arm_render_RenderPathForward.path.setTarget(output);
		arm_render_RenderPathForward.path.bindTarget(taaFrame % 2 == 0 ? current : taa,"tex");
		arm_render_RenderPathForward.path.drawShader("shader_datas/copy_pass/copy_pass");
	}
	if(arm_Config.raw.rp_supersample == 4) {
		arm_render_RenderPathForward.path.setTarget(output);
		arm_render_RenderPathForward.path.bindTarget(taaFrame % 2 == 0 ? taa2 : taa,"tex");
		arm_render_RenderPathForward.path.drawShader("shader_datas/supersample_resolve/supersample_resolve");
	}
};
arm_render_RenderPathForward.drawSplit = function() {
	if(arm_Context.splitView && !arm_Context.paint2dView) {
		arm_Context.ddirty = 1;
		var cam = iron_Scene.active.camera;
		arm_Context.viewIndex = arm_Context.viewIndex == 0 ? 1 : 0;
		cam.transform.setMatrix(arm_plugin_Camera.inst.views[arm_Context.viewIndex]);
		cam.buildMatrix();
		cam.buildProjection();
		arm_render_RenderPathForward.drawGbuffer();
		arm_render_RenderPathForward.drawForward();
		arm_Context.viewIndex = arm_Context.viewIndex == 0 ? 1 : 0;
		cam.transform.setMatrix(arm_plugin_Camera.inst.views[arm_Context.viewIndex]);
		cam.buildMatrix();
		cam.buildProjection();
	}
};
var arm_render_RenderPathPaint = function() { };
$hxClasses["arm.render.RenderPathPaint"] = arm_render_RenderPathPaint;
arm_render_RenderPathPaint.__name__ = "arm.render.RenderPathPaint";
arm_render_RenderPathPaint.init = function(_path) {
	arm_render_RenderPathPaint.path = _path;
	var t = new iron_RenderTargetRaw();
	t.name = "texpaint_blend0";
	t.width = arm_Config.getTextureResX();
	t.height = arm_Config.getTextureResY();
	t.format = "R8";
	arm_render_RenderPathPaint.path.createRenderTarget(t);
	var t = new iron_RenderTargetRaw();
	t.name = "texpaint_blend1";
	t.width = arm_Config.getTextureResX();
	t.height = arm_Config.getTextureResY();
	t.format = "R8";
	arm_render_RenderPathPaint.path.createRenderTarget(t);
	var t = new iron_RenderTargetRaw();
	t.name = "texpaint_colorid";
	t.width = 1;
	t.height = 1;
	t.format = "RGBA32";
	arm_render_RenderPathPaint.path.createRenderTarget(t);
	var t = new iron_RenderTargetRaw();
	t.name = "texpaint_picker";
	t.width = 1;
	t.height = 1;
	t.format = "RGBA32";
	arm_render_RenderPathPaint.path.createRenderTarget(t);
	var t = new iron_RenderTargetRaw();
	t.name = "texpaint_nor_picker";
	t.width = 1;
	t.height = 1;
	t.format = "RGBA32";
	arm_render_RenderPathPaint.path.createRenderTarget(t);
	var t = new iron_RenderTargetRaw();
	t.name = "texpaint_pack_picker";
	t.width = 1;
	t.height = 1;
	t.format = "RGBA32";
	arm_render_RenderPathPaint.path.createRenderTarget(t);
	arm_render_RenderPathPaint.path.loadShader("shader_datas/copy_mrt3_pass/copy_mrt3_pass");
	arm_render_RenderPathPaint.path.loadShader("shader_datas/dilate_pass/dilate_pass");
};
arm_render_RenderPathPaint.commandsPaint = function() {
	var tid = arm_Context.layer.id;
	if(arm_Context.pdirty > 0 && (arm_ui_UIHeader.inst.worktab.position == 0 || arm_ui_UIHeader.inst.worktab.position == 2)) {
		if(arm_Context.tool == 7) {
			arm_render_RenderPathPaint.path.setTarget("texparticle");
			arm_render_RenderPathPaint.path.clearTarget(0);
			arm_render_RenderPathPaint.path.bindTarget("_main","gbufferD");
			if((arm_Context.xray || arm_Context.brushAngleReject) && arm_Config.raw.brush_3d) {
				arm_render_RenderPathPaint.path.bindTarget("gbuffer0","gbuffer0");
			}
			var mo = iron_Scene.active.getChild(".ParticleEmitter");
			mo.visible = true;
			mo.render(arm_render_RenderPathPaint.path.currentG,"mesh",arm_render_RenderPathPaint.path.bindParams);
			mo.visible = false;
			mo = iron_Scene.active.getChild(".Particle");
			mo.visible = true;
			mo.render(arm_render_RenderPathPaint.path.currentG,"mesh",arm_render_RenderPathPaint.path.bindParams);
			mo.visible = false;
			var _this = arm_render_RenderPathPaint.path;
			if(_this.scissorSet) {
				_this.currentG.disableScissor();
				_this.scissorSet = false;
			}
			_this.currentG.end();
			_this.currentG = null;
			_this.bindParams = null;
		}
		if(arm_Context.tool == 8) {
			arm_render_RenderPathPaint.path.setTarget("texpaint_colorid");
			arm_render_RenderPathPaint.path.clearTarget(-16777216);
			arm_render_RenderPathPaint.path.bindTarget("gbuffer2","gbuffer2");
			arm_render_RenderPathPaint.path.drawMeshes("paint");
			arm_ui_UIHeader.inst.headerHandle.redraws = 2;
		} else if(arm_Context.tool == 9) {
			arm_render_RenderPathPaint.path.setTarget("texpaint_picker",["texpaint_nor_picker","texpaint_pack_picker"]);
			arm_render_RenderPathPaint.path.bindTarget("gbuffer2","gbuffer2");
			tid = arm_Context.layer.id;
			arm_render_RenderPathPaint.path.bindTarget("texpaint" + tid,"texpaint");
			arm_render_RenderPathPaint.path.bindTarget("texpaint_nor" + tid,"texpaint_nor");
			arm_render_RenderPathPaint.path.bindTarget("texpaint_pack" + tid,"texpaint_pack");
			arm_render_RenderPathPaint.path.drawMeshes("paint");
			arm_ui_UIHeader.inst.headerHandle.redraws = 2;
			var texpaint_nor_picker = arm_render_RenderPathPaint.path.renderTargets.h["texpaint_nor_picker"].image;
			var texpaint_pack_picker = arm_render_RenderPathPaint.path.renderTargets.h["texpaint_pack_picker"].image;
			var a = arm_render_RenderPathPaint.path.renderTargets.h["texpaint_picker"].image.getPixels();
			var b = texpaint_nor_picker.getPixels();
			var c = texpaint_pack_picker.getPixels();
			arm_Context.baseRPicked = a.b[0] / 255;
			arm_Context.baseGPicked = a.b[1] / 255;
			arm_Context.baseBPicked = a.b[2] / 255;
			arm_Context.uvxPicked = a.b[3] / 255;
			arm_Context.normalRPicked = b.b[0] / 255;
			arm_Context.normalGPicked = b.b[1] / 255;
			arm_Context.normalBPicked = b.b[2] / 255;
			arm_Context.uvyPicked = c.b[3] / 255;
			arm_Context.occlusionPicked = c.b[0] / 255;
			arm_Context.roughnessPicked = c.b[1] / 255;
			arm_Context.metallicPicked = c.b[2] / 255;
			if(arm_Context.pickerSelectMaterial) {
				var matid = b.b[3];
				var _g = 0;
				var _g1 = arm_Project.materials;
				while(_g < _g1.length) {
					var m = _g1[_g];
					++_g;
					if(m.id == matid) {
						arm_Context.setMaterial(m);
						arm_Context.materialIdPicked = matid;
						break;
					}
				}
			}
		} else {
			if(arm_Context.tool == 11 && arm_Context.bakeType == 0) {
				if(arm_render_RenderPathPaint.initVoxels) {
					arm_render_RenderPathPaint.initVoxels = false;
					var rp_gi = arm_Config.raw.rp_gi;
					arm_Config.raw.rp_gi = true;
					arm_render_Inc.initGI();
					arm_Config.raw.rp_gi = rp_gi;
				}
				arm_render_RenderPathPaint.path.clearImage("voxels",0);
				arm_render_RenderPathPaint.path.setTarget("");
				arm_render_RenderPathPaint.path.setViewport(256,256);
				arm_render_RenderPathPaint.path.bindTarget("voxels","voxels");
				arm_render_RenderPathPaint.path.drawMeshes("voxel");
				arm_render_RenderPathPaint.path.generateMipmaps("voxels");
			}
			if(arm_Context.tool == 11 && arm_Context.brushTime == 1 / iron_system_Time.frequency * iron_system_Time.scale) {
				arm_render_RenderPathPaint.path.setTarget("texpaint" + tid);
				arm_render_RenderPathPaint.path.clearTarget(-16777216);
			}
			arm_render_RenderPathPaint.path.setTarget("texpaint_blend1");
			arm_render_RenderPathPaint.path.bindTarget("texpaint_blend0","tex");
			arm_render_RenderPathPaint.path.drawShader("shader_datas/copy_pass/copyR8_pass");
			var texpaint = arm_Context.layerIsMask ? "texpaint_mask" + tid : "texpaint" + tid;
			arm_render_RenderPathPaint.path.setTarget(texpaint,["texpaint_nor" + tid,"texpaint_pack" + tid,"texpaint_blend0"]);
			arm_render_RenderPathPaint.path.bindTarget("_main","gbufferD");
			if((arm_Context.xray || arm_Context.brushAngleReject) && arm_Config.raw.brush_3d) {
				arm_render_RenderPathPaint.path.bindTarget("gbuffer0","gbuffer0");
			}
			arm_render_RenderPathPaint.path.bindTarget("texpaint_blend1","paintmask");
			if(arm_Context.tool == 11 && arm_Context.bakeType == 0) {
				arm_render_RenderPathPaint.path.bindTarget("voxels","voxels");
			}
			if(arm_Context.colorIdPicked) {
				arm_render_RenderPathPaint.path.bindTarget("texpaint_colorid","texpaint_colorid");
			}
			if(arm_Context.tool == 2 && arm_Context.fillTypeHandle.position == 1 || arm_Context.tool == 5 || arm_Context.tool == 6) {
				arm_render_RenderPathPaint.path.bindTarget("gbuffer2","gbuffer2");
			}
			arm_render_RenderPathPaint.path.drawMeshes("paint");
			if(arm_Context.tool == 11 && arm_Context.bakeType == 1 && arm_Context.bakeCurvSmooth > 0) {
				if(arm_render_RenderPathPaint.path.renderTargets.h["texpaint_blur"] == null) {
					var t = new iron_RenderTargetRaw();
					t.name = "texpaint_blur";
					t.width = arm_Config.getTextureResX() * 0.95 | 0;
					t.height = arm_Config.getTextureResY() * 0.95 | 0;
					t.format = "RGBA32";
					arm_render_RenderPathPaint.path.createRenderTarget(t);
				}
				var blurs = Math.round(arm_Context.bakeCurvSmooth);
				var _g = 0;
				while(_g < blurs) {
					++_g;
					arm_render_RenderPathPaint.path.setTarget("texpaint_blur");
					arm_render_RenderPathPaint.path.bindTarget(texpaint,"tex");
					arm_render_RenderPathPaint.path.drawShader("shader_datas/copy_pass/copy_pass");
					arm_render_RenderPathPaint.path.setTarget(texpaint);
					arm_render_RenderPathPaint.path.bindTarget("texpaint_blur","tex");
					arm_render_RenderPathPaint.path.drawShader("shader_datas/copy_pass/copy_pass");
				}
			}
		}
	}
};
arm_render_RenderPathPaint.useLiveLayer = function(use) {
	var tid = arm_Context.layer.id;
	var hid = arm_History.undoI - 1 < 0 ? arm_Config.raw.undo_steps - 1 : arm_History.undoI - 1;
	if(use) {
		arm_render_RenderPathPaint._texpaint = arm_render_RenderPathPaint.path.renderTargets.h["texpaint" + tid];
		arm_render_RenderPathPaint._texpaint_undo = arm_render_RenderPathPaint.path.renderTargets.h["texpaint_undo" + hid];
		arm_render_RenderPathPaint._texpaint_nor_undo = arm_render_RenderPathPaint.path.renderTargets.h["texpaint_nor_undo" + hid];
		arm_render_RenderPathPaint._texpaint_pack_undo = arm_render_RenderPathPaint.path.renderTargets.h["texpaint_pack_undo" + hid];
		arm_render_RenderPathPaint._texpaint_mask = arm_render_RenderPathPaint.path.renderTargets.h["texpaint_mask" + tid];
		arm_render_RenderPathPaint._texpaint_nor = arm_render_RenderPathPaint.path.renderTargets.h["texpaint_nor" + tid];
		arm_render_RenderPathPaint._texpaint_pack = arm_render_RenderPathPaint.path.renderTargets.h["texpaint_pack" + tid];
		arm_render_RenderPathPaint.path.renderTargets.h["texpaint_undo" + hid] = arm_render_RenderPathPaint.path.renderTargets.h["texpaint" + tid];
		arm_render_RenderPathPaint.path.renderTargets.h["texpaint_nor_undo" + hid] = arm_render_RenderPathPaint.path.renderTargets.h["texpaint_nor" + tid];
		arm_render_RenderPathPaint.path.renderTargets.h["texpaint_pack_undo" + hid] = arm_render_RenderPathPaint.path.renderTargets.h["texpaint_pack" + tid];
		arm_render_RenderPathPaint.path.renderTargets.h["texpaint_undo" + hid] = arm_render_RenderPathPaint.path.renderTargets.h["texpaint" + tid];
		arm_render_RenderPathPaint.path.renderTargets.h["texpaint" + tid] = arm_render_RenderPathPaint.path.renderTargets.h["texpaint_live"];
		if(arm_render_RenderPathPaint._texpaint_mask != null) {
			arm_render_RenderPathPaint.path.renderTargets.h["texpaint_mask" + tid] = arm_render_RenderPathPaint.path.renderTargets.h["texpaint_mask_live"];
		}
		arm_render_RenderPathPaint.path.renderTargets.h["texpaint_nor" + tid] = arm_render_RenderPathPaint.path.renderTargets.h["texpaint_nor_live"];
		arm_render_RenderPathPaint.path.renderTargets.h["texpaint_pack" + tid] = arm_render_RenderPathPaint.path.renderTargets.h["texpaint_pack_live"];
	} else {
		arm_render_RenderPathPaint.path.renderTargets.h["texpaint" + tid] = arm_render_RenderPathPaint._texpaint;
		arm_render_RenderPathPaint.path.renderTargets.h["texpaint_undo" + hid] = arm_render_RenderPathPaint._texpaint_undo;
		arm_render_RenderPathPaint.path.renderTargets.h["texpaint_nor_undo" + hid] = arm_render_RenderPathPaint._texpaint_nor_undo;
		arm_render_RenderPathPaint.path.renderTargets.h["texpaint_pack_undo" + hid] = arm_render_RenderPathPaint._texpaint_pack_undo;
		if(arm_render_RenderPathPaint._texpaint_mask != null) {
			arm_render_RenderPathPaint.path.renderTargets.h["texpaint_mask" + tid] = arm_render_RenderPathPaint._texpaint_mask;
		}
		arm_render_RenderPathPaint.path.renderTargets.h["texpaint_nor" + tid] = arm_render_RenderPathPaint._texpaint_nor;
		arm_render_RenderPathPaint.path.renderTargets.h["texpaint_pack" + tid] = arm_render_RenderPathPaint._texpaint_pack;
	}
	arm_render_RenderPathPaint.liveLayerLocked = use;
};
arm_render_RenderPathPaint.commandsLiveBrush = function() {
	var tool = arm_Context.tool;
	if(tool != 0 && tool != 1 && tool != 5 && tool != 3 && tool != 4 && tool != 6) {
		return;
	}
	if(arm_render_RenderPathPaint.liveLayerLocked) {
		return;
	}
	if(arm_render_RenderPathPaint.liveLayer == null) {
		arm_render_RenderPathPaint.liveLayer = new arm_data_LayerSlot("_live");
		arm_render_RenderPathPaint.liveLayer.createMask(0);
	}
	var tid = arm_Context.layer.id;
	if(arm_Context.layerIsMask) {
		arm_render_RenderPathPaint.path.setTarget("texpaint_mask_live");
		arm_render_RenderPathPaint.path.bindTarget("texpaint_mask" + tid,"tex");
		arm_render_RenderPathPaint.path.drawShader("shader_datas/copy_pass/copy_pass");
	} else {
		arm_render_RenderPathPaint.path.setTarget("texpaint_live",["texpaint_nor_live","texpaint_pack_live"]);
		arm_render_RenderPathPaint.path.bindTarget("texpaint" + tid,"tex0");
		arm_render_RenderPathPaint.path.bindTarget("texpaint_nor" + tid,"tex1");
		arm_render_RenderPathPaint.path.bindTarget("texpaint_pack" + tid,"tex2");
		arm_render_RenderPathPaint.path.drawShader("shader_datas/copy_mrt3_pass/copy_mrt3_pass");
	}
	arm_render_RenderPathPaint.useLiveLayer(true);
	arm_render_RenderPathPaint.liveLayerDrawn = 2;
	arm_ui_UIView2D.inst.hwnd.redraws = 2;
	var _x = arm_Context.paintVec.x;
	var _y = arm_Context.paintVec.y;
	if(arm_Context.brushLocked) {
		var tmp = arm_Context.lockStartedX - arm_App.x();
		var tmp1 = arm_App.w();
		arm_Context.paintVec.x = tmp / tmp1;
		var tmp = arm_Context.lockStartedY - arm_App.y();
		var tmp1 = arm_App.h();
		arm_Context.paintVec.y = tmp / tmp1;
	}
	var _lastX = arm_Context.lastPaintVecX;
	var _lastY = arm_Context.lastPaintVecY;
	var _pdirty = arm_Context.pdirty;
	arm_Context.lastPaintVecX = arm_Context.paintVec.x;
	arm_Context.lastPaintVecY = arm_Context.paintVec.y;
	if(arm_Operator.shortcut(arm_Config.keymap.brush_ruler)) {
		arm_Context.lastPaintVecX = arm_Context.lastPaintX;
		arm_Context.lastPaintVecY = arm_Context.lastPaintY;
	}
	arm_Context.pdirty = 2;
	arm_render_RenderPathPaint.commandsSymmetry();
	arm_render_RenderPathPaint.commandsPaint();
	arm_render_RenderPathPaint.useLiveLayer(false);
	arm_Context.paintVec.x = _x;
	arm_Context.paintVec.y = _y;
	arm_Context.lastPaintVecX = _lastX;
	arm_Context.lastPaintVecY = _lastY;
	arm_Context.pdirty = _pdirty;
	arm_Context.brushBlendDirty = true;
};
arm_render_RenderPathPaint.commandsCursor = function() {
	var decalMask = (arm_Context.tool == 3 || arm_Context.tool == 4) && arm_Operator.shortcut(arm_Config.keymap.decal_mask,2);
	var tool = arm_Context.tool;
	if(tool != 0 && tool != 1 && tool != 5 && tool != 6 && tool != 7 && !decalMask) {
		return;
	}
	if(!arm_App.uiEnabled || arm_ui_UIHeader.inst.worktab.position == 3) {
		return;
	}
	var mx = arm_Context.paintVec.x;
	var my = 1.0 - arm_Context.paintVec.y;
	if(arm_Context.brushLocked) {
		mx = (arm_Context.lockStartedX - arm_App.x()) / arm_App.w();
		my = 1.0 - (arm_Context.lockStartedY - arm_App.y()) / arm_App.h();
	}
	arm_render_RenderPathPaint.drawCursor(mx,my,arm_Context.brushNodesRadius * arm_Context.brushRadius / 3.4);
};
arm_render_RenderPathPaint.drawCursor = function(mx,my,radius,tintR,tintG,tintB) {
	if(tintB == null) {
		tintB = 1.0;
	}
	if(tintG == null) {
		tintG = 1.0;
	}
	if(tintR == null) {
		tintR = 1.0;
	}
	var geom = (js_Boot.__cast(iron_Scene.active.getChild(".Plane") , iron_object_MeshObject)).data.geom;
	var g = arm_render_RenderPathPaint.path.frameG;
	if(arm_Layers.pipeCursor == null) {
		arm_Layers.makeCursorPipe();
	}
	arm_render_RenderPathPaint.path.setTarget("");
	g.setPipeline(arm_Layers.pipeCursor);
	var decal = arm_Context.tool == 3 || arm_Context.tool == 4;
	var decalMask = decal && arm_Operator.shortcut(arm_Config.keymap.decal_mask,2);
	g.setTexture(arm_Layers.cursorTex,decal && !decalMask ? arm_Context.decalImage : arm_Res.bundled.h["cursor.k"]);
	var gbuffer0 = arm_render_RenderPathPaint.path.renderTargets.h["gbuffer0"].image;
	g.setTextureDepth(arm_Layers.cursorGbufferD,gbuffer0);
	g.setFloat2(arm_Layers.cursorMouse,mx,my);
	g.setFloat2(arm_Layers.cursorTexStep,1 / gbuffer0.get_width(),1 / gbuffer0.get_height());
	g.setFloat(arm_Layers.cursorRadius,radius);
	var _this = iron_Scene.active.camera;
	var x = _this.transform.world.self._00;
	var y = _this.transform.world.self._01;
	var z = _this.transform.world.self._02;
	if(z == null) {
		z = 0.0;
	}
	if(y == null) {
		y = 0.0;
	}
	if(x == null) {
		x = 0.0;
	}
	var right_x = x;
	var right_y = y;
	var right_z = z;
	var n = Math.sqrt(right_x * right_x + right_y * right_y + right_z * right_z);
	if(n > 0.0) {
		var invN = 1.0 / n;
		right_x *= invN;
		right_y *= invN;
		right_z *= invN;
	}
	g.setFloat3(arm_Layers.cursorCameraRight,right_x,right_y,right_z);
	g.setFloat3(arm_Layers.cursorTint,tintR,tintG,tintB);
	var matrix = iron_Scene.active.camera.VP.self;
	kha_graphics4_Graphics.mat[0] = matrix._00;
	kha_graphics4_Graphics.mat[1] = matrix._01;
	kha_graphics4_Graphics.mat[2] = matrix._02;
	kha_graphics4_Graphics.mat[3] = matrix._03;
	kha_graphics4_Graphics.mat[4] = matrix._10;
	kha_graphics4_Graphics.mat[5] = matrix._11;
	kha_graphics4_Graphics.mat[6] = matrix._12;
	kha_graphics4_Graphics.mat[7] = matrix._13;
	kha_graphics4_Graphics.mat[8] = matrix._20;
	kha_graphics4_Graphics.mat[9] = matrix._21;
	kha_graphics4_Graphics.mat[10] = matrix._22;
	kha_graphics4_Graphics.mat[11] = matrix._23;
	kha_graphics4_Graphics.mat[12] = matrix._30;
	kha_graphics4_Graphics.mat[13] = matrix._31;
	kha_graphics4_Graphics.mat[14] = matrix._32;
	kha_graphics4_Graphics.mat[15] = matrix._33;
	Krom.setMatrix(arm_Layers.cursorVP,kha_graphics4_Graphics.mat.buffer);
	var helpMat = new iron_math_Mat4(1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0);
	var m = iron_Scene.active.camera.VP;
	var a00 = m.self._00;
	var a01 = m.self._01;
	var a02 = m.self._02;
	var a03 = m.self._03;
	var a10 = m.self._10;
	var a11 = m.self._11;
	var a12 = m.self._12;
	var a13 = m.self._13;
	var a20 = m.self._20;
	var a21 = m.self._21;
	var a22 = m.self._22;
	var a23 = m.self._23;
	var a30 = m.self._30;
	var a31 = m.self._31;
	var a32 = m.self._32;
	var a33 = m.self._33;
	var b00 = a00 * a11 - a01 * a10;
	var b01 = a00 * a12 - a02 * a10;
	var b02 = a00 * a13 - a03 * a10;
	var b03 = a01 * a12 - a02 * a11;
	var b04 = a01 * a13 - a03 * a11;
	var b05 = a02 * a13 - a03 * a12;
	var b06 = a20 * a31 - a21 * a30;
	var b07 = a20 * a32 - a22 * a30;
	var b08 = a20 * a33 - a23 * a30;
	var b09 = a21 * a32 - a22 * a31;
	var b10 = a21 * a33 - a23 * a31;
	var b11 = a22 * a33 - a23 * a32;
	var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;
	if(det == 0.0) {
		helpMat.self._00 = 1.0;
		helpMat.self._01 = 0.0;
		helpMat.self._02 = 0.0;
		helpMat.self._03 = 0.0;
		helpMat.self._10 = 0.0;
		helpMat.self._11 = 1.0;
		helpMat.self._12 = 0.0;
		helpMat.self._13 = 0.0;
		helpMat.self._20 = 0.0;
		helpMat.self._21 = 0.0;
		helpMat.self._22 = 1.0;
		helpMat.self._23 = 0.0;
		helpMat.self._30 = 0.0;
		helpMat.self._31 = 0.0;
		helpMat.self._32 = 0.0;
		helpMat.self._33 = 1.0;
	} else {
		det = 1.0 / det;
		helpMat.self._00 = (a11 * b11 - a12 * b10 + a13 * b09) * det;
		helpMat.self._01 = (a02 * b10 - a01 * b11 - a03 * b09) * det;
		helpMat.self._02 = (a31 * b05 - a32 * b04 + a33 * b03) * det;
		helpMat.self._03 = (a22 * b04 - a21 * b05 - a23 * b03) * det;
		helpMat.self._10 = (a12 * b08 - a10 * b11 - a13 * b07) * det;
		helpMat.self._11 = (a00 * b11 - a02 * b08 + a03 * b07) * det;
		helpMat.self._12 = (a32 * b02 - a30 * b05 - a33 * b01) * det;
		helpMat.self._13 = (a20 * b05 - a22 * b02 + a23 * b01) * det;
		helpMat.self._20 = (a10 * b10 - a11 * b08 + a13 * b06) * det;
		helpMat.self._21 = (a01 * b08 - a00 * b10 - a03 * b06) * det;
		helpMat.self._22 = (a30 * b04 - a31 * b02 + a33 * b00) * det;
		helpMat.self._23 = (a21 * b02 - a20 * b04 - a23 * b00) * det;
		helpMat.self._30 = (a11 * b07 - a10 * b09 - a12 * b06) * det;
		helpMat.self._31 = (a00 * b09 - a01 * b07 + a02 * b06) * det;
		helpMat.self._32 = (a31 * b01 - a30 * b03 - a32 * b00) * det;
		helpMat.self._33 = (a20 * b03 - a21 * b01 + a22 * b00) * det;
	}
	var matrix = helpMat.self;
	kha_graphics4_Graphics.mat[0] = matrix._00;
	kha_graphics4_Graphics.mat[1] = matrix._01;
	kha_graphics4_Graphics.mat[2] = matrix._02;
	kha_graphics4_Graphics.mat[3] = matrix._03;
	kha_graphics4_Graphics.mat[4] = matrix._10;
	kha_graphics4_Graphics.mat[5] = matrix._11;
	kha_graphics4_Graphics.mat[6] = matrix._12;
	kha_graphics4_Graphics.mat[7] = matrix._13;
	kha_graphics4_Graphics.mat[8] = matrix._20;
	kha_graphics4_Graphics.mat[9] = matrix._21;
	kha_graphics4_Graphics.mat[10] = matrix._22;
	kha_graphics4_Graphics.mat[11] = matrix._23;
	kha_graphics4_Graphics.mat[12] = matrix._30;
	kha_graphics4_Graphics.mat[13] = matrix._31;
	kha_graphics4_Graphics.mat[14] = matrix._32;
	kha_graphics4_Graphics.mat[15] = matrix._33;
	Krom.setMatrix(arm_Layers.cursorInvVP,kha_graphics4_Graphics.mat.buffer);
	g.setVertexBuffer(geom.vertexBuffer);
	g.setIndexBuffer(geom.indexBuffers[0]);
	g.drawIndexedVertices();
	g.disableScissor();
	var _this = arm_render_RenderPathPaint.path;
	if(_this.scissorSet) {
		_this.currentG.disableScissor();
		_this.scissorSet = false;
	}
	_this.currentG.end();
	_this.currentG = null;
	_this.bindParams = null;
};
arm_render_RenderPathPaint.commandsSymmetry = function() {
	if(arm_Context.symX || arm_Context.symY || arm_Context.symZ) {
		arm_Context.ddirty = 2;
		var t = arm_Context.paintObject.transform;
		var sx = t.scale.x;
		var sy = t.scale.y;
		var sz = t.scale.z;
		if(arm_Context.symX) {
			var _this = t.scale;
			_this.x = -sx;
			_this.y = sy;
			_this.z = sz;
			_this.w = 1.0;
			t.buildMatrix();
			arm_render_RenderPathPaint.commandsPaint();
		}
		if(arm_Context.symY) {
			var _this = t.scale;
			_this.x = sx;
			_this.y = -sy;
			_this.z = sz;
			_this.w = 1.0;
			t.buildMatrix();
			arm_render_RenderPathPaint.commandsPaint();
		}
		if(arm_Context.symZ) {
			var _this = t.scale;
			_this.x = sx;
			_this.y = sy;
			_this.z = -sz;
			_this.w = 1.0;
			t.buildMatrix();
			arm_render_RenderPathPaint.commandsPaint();
		}
		if(arm_Context.symX && arm_Context.symY) {
			var _this = t.scale;
			_this.x = -sx;
			_this.y = -sy;
			_this.z = sz;
			_this.w = 1.0;
			t.buildMatrix();
			arm_render_RenderPathPaint.commandsPaint();
		}
		if(arm_Context.symX && arm_Context.symZ) {
			var _this = t.scale;
			_this.x = -sx;
			_this.y = sy;
			_this.z = -sz;
			_this.w = 1.0;
			t.buildMatrix();
			arm_render_RenderPathPaint.commandsPaint();
		}
		if(arm_Context.symY && arm_Context.symZ) {
			var _this = t.scale;
			_this.x = sx;
			_this.y = -sy;
			_this.z = -sz;
			_this.w = 1.0;
			t.buildMatrix();
			arm_render_RenderPathPaint.commandsPaint();
		}
		if(arm_Context.symX && arm_Context.symY && arm_Context.symZ) {
			var _this = t.scale;
			_this.x = -sx;
			_this.y = -sy;
			_this.z = -sz;
			_this.w = 1.0;
			t.buildMatrix();
			arm_render_RenderPathPaint.commandsPaint();
		}
		var _this = t.scale;
		_this.x = sx;
		_this.y = sy;
		_this.z = sz;
		_this.w = 1.0;
		t.buildMatrix();
	}
};
arm_render_RenderPathPaint.paintEnabled = function() {
	var fillLayer = arm_Context.layer.fill_layer != null && !arm_Context.layerIsMask;
	var fillMask = arm_Context.layer.fill_mask != null && arm_Context.layerIsMask;
	var groupLayer = arm_Context.layer.getChildren() != null;
	if(!fillLayer && !fillMask && !groupLayer) {
		return !arm_Context.foregroundEvent;
	} else {
		return false;
	}
};
arm_render_RenderPathPaint.begin = function() {
	if(!arm_render_RenderPathPaint.paintEnabled()) {
		return;
	}
	arm_render_RenderPathPaint.pushUndoLast = arm_History.pushUndo;
	if(arm_History.pushUndo && arm_History.undoLayers != null) {
		arm_History.paint();
	}
	if(arm_Context.paint2d) {
		arm_Context.paint2dView = true;
		arm_render_RenderPathPaint.painto = arm_Context.paintObject;
		arm_render_RenderPathPaint.visibles = [];
		var _g = 0;
		var _g1 = arm_Project.paintObjects;
		while(_g < _g1.length) {
			var p = _g1[_g];
			++_g;
			arm_render_RenderPathPaint.visibles.push(p.visible);
			p.visible = false;
		}
		if(arm_Context.mergedObject != null) {
			arm_render_RenderPathPaint.mergedObjectVisible = arm_Context.mergedObject.visible;
			arm_Context.mergedObject.visible = false;
		}
		var cam = iron_Scene.active.camera;
		var _this = arm_Context.savedCamera;
		var m = cam.transform.local;
		_this.self._00 = m.self._00;
		_this.self._01 = m.self._01;
		_this.self._02 = m.self._02;
		_this.self._03 = m.self._03;
		_this.self._10 = m.self._10;
		_this.self._11 = m.self._11;
		_this.self._12 = m.self._12;
		_this.self._13 = m.self._13;
		_this.self._20 = m.self._20;
		_this.self._21 = m.self._21;
		_this.self._22 = m.self._22;
		_this.self._23 = m.self._23;
		_this.self._30 = m.self._30;
		_this.self._31 = m.self._31;
		_this.self._32 = m.self._32;
		_this.self._33 = m.self._33;
		arm_render_RenderPathPaint.savedFov = cam.data.raw.fov;
		arm_util_ViewportUtil.updateCameraType(0);
		var m = new iron_math_Mat4(1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0);
		m.self._00 += 0 * m.self._03;
		m.self._01 += 0 * m.self._03;
		m.self._02 += 0.5 * m.self._03;
		m.self._10 += 0 * m.self._13;
		m.self._11 += 0 * m.self._13;
		m.self._12 += 0.5 * m.self._13;
		m.self._20 += 0 * m.self._23;
		m.self._21 += 0 * m.self._23;
		m.self._22 += 0.5 * m.self._23;
		m.self._30 += 0 * m.self._33;
		m.self._31 += 0 * m.self._33;
		m.self._32 += 0.5 * m.self._33;
		cam.transform.setMatrix(m);
		cam.data.raw.fov = 0.92;
		cam.buildProjection();
		cam.buildMatrix();
		var tw = 0.95 * arm_ui_UIView2D.inst.panScale;
		var tx = arm_ui_UIView2D.inst.panX / arm_ui_UIView2D.inst.ww;
		var ty = arm_ui_UIView2D.inst.panY / arm_App.h();
		m.self._00 = 1.0;
		m.self._01 = 0.0;
		m.self._02 = 0.0;
		m.self._03 = 0.0;
		m.self._10 = 0.0;
		m.self._11 = 1.0;
		m.self._12 = 0.0;
		m.self._13 = 0.0;
		m.self._20 = 0.0;
		m.self._21 = 0.0;
		m.self._22 = 1.0;
		m.self._23 = 0.0;
		m.self._30 = 0.0;
		m.self._31 = 0.0;
		m.self._32 = 0.0;
		m.self._33 = 1.0;
		var x = tw;
		var y = tw;
		if(tw == null) {
			y = 0.0;
		}
		if(tw == null) {
			x = 0.0;
		}
		var v_x = x;
		var v_y = y;
		var v_z = 1;
		m.self._00 *= v_x;
		m.self._01 *= v_x;
		m.self._02 *= v_x;
		m.self._03 *= v_x;
		m.self._10 *= v_y;
		m.self._11 *= v_y;
		m.self._12 *= v_y;
		m.self._13 *= v_y;
		m.self._20 *= v_z;
		m.self._21 *= v_z;
		m.self._22 *= v_z;
		m.self._23 *= v_z;
		var x = tx;
		var y = ty;
		if(ty == null) {
			y = 0.0;
		}
		if(tx == null) {
			x = 0.0;
		}
		m.self._30 = x;
		m.self._31 = y;
		m.self._32 = 0;
		var m2 = new iron_math_Mat4(1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0);
		var m1 = iron_Scene.active.camera.VP;
		var a00 = m1.self._00;
		var a01 = m1.self._01;
		var a02 = m1.self._02;
		var a03 = m1.self._03;
		var a10 = m1.self._10;
		var a11 = m1.self._11;
		var a12 = m1.self._12;
		var a13 = m1.self._13;
		var a20 = m1.self._20;
		var a21 = m1.self._21;
		var a22 = m1.self._22;
		var a23 = m1.self._23;
		var a30 = m1.self._30;
		var a31 = m1.self._31;
		var a32 = m1.self._32;
		var a33 = m1.self._33;
		var b00 = a00 * a11 - a01 * a10;
		var b01 = a00 * a12 - a02 * a10;
		var b02 = a00 * a13 - a03 * a10;
		var b03 = a01 * a12 - a02 * a11;
		var b04 = a01 * a13 - a03 * a11;
		var b05 = a02 * a13 - a03 * a12;
		var b06 = a20 * a31 - a21 * a30;
		var b07 = a20 * a32 - a22 * a30;
		var b08 = a20 * a33 - a23 * a30;
		var b09 = a21 * a32 - a22 * a31;
		var b10 = a21 * a33 - a23 * a31;
		var b11 = a22 * a33 - a23 * a32;
		var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;
		if(det == 0.0) {
			m2.self._00 = 1.0;
			m2.self._01 = 0.0;
			m2.self._02 = 0.0;
			m2.self._03 = 0.0;
			m2.self._10 = 0.0;
			m2.self._11 = 1.0;
			m2.self._12 = 0.0;
			m2.self._13 = 0.0;
			m2.self._20 = 0.0;
			m2.self._21 = 0.0;
			m2.self._22 = 1.0;
			m2.self._23 = 0.0;
			m2.self._30 = 0.0;
			m2.self._31 = 0.0;
			m2.self._32 = 0.0;
			m2.self._33 = 1.0;
		} else {
			det = 1.0 / det;
			m2.self._00 = (a11 * b11 - a12 * b10 + a13 * b09) * det;
			m2.self._01 = (a02 * b10 - a01 * b11 - a03 * b09) * det;
			m2.self._02 = (a31 * b05 - a32 * b04 + a33 * b03) * det;
			m2.self._03 = (a22 * b04 - a21 * b05 - a23 * b03) * det;
			m2.self._10 = (a12 * b08 - a10 * b11 - a13 * b07) * det;
			m2.self._11 = (a00 * b11 - a02 * b08 + a03 * b07) * det;
			m2.self._12 = (a32 * b02 - a30 * b05 - a33 * b01) * det;
			m2.self._13 = (a20 * b05 - a22 * b02 + a23 * b01) * det;
			m2.self._20 = (a10 * b10 - a11 * b08 + a13 * b06) * det;
			m2.self._21 = (a01 * b08 - a00 * b10 - a03 * b06) * det;
			m2.self._22 = (a30 * b04 - a31 * b02 + a33 * b00) * det;
			m2.self._23 = (a21 * b02 - a20 * b04 - a23 * b00) * det;
			m2.self._30 = (a11 * b07 - a10 * b09 - a12 * b06) * det;
			m2.self._31 = (a00 * b09 - a01 * b07 + a02 * b06) * det;
			m2.self._32 = (a31 * b01 - a30 * b03 - a32 * b00) * det;
			m2.self._33 = (a20 * b03 - a21 * b01 + a22 * b00) * det;
		}
		var a00 = m.self._00;
		var a01 = m.self._01;
		var a02 = m.self._02;
		var a03 = m.self._03;
		var a10 = m.self._10;
		var a11 = m.self._11;
		var a12 = m.self._12;
		var a13 = m.self._13;
		var a20 = m.self._20;
		var a21 = m.self._21;
		var a22 = m.self._22;
		var a23 = m.self._23;
		var a30 = m.self._30;
		var a31 = m.self._31;
		var a32 = m.self._32;
		var a33 = m.self._33;
		var b0 = m2.self._00;
		var b1 = m2.self._10;
		var b2 = m2.self._20;
		var b3 = m2.self._30;
		m.self._00 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
		m.self._10 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
		m.self._20 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
		m.self._30 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
		b0 = m2.self._01;
		b1 = m2.self._11;
		b2 = m2.self._21;
		b3 = m2.self._31;
		m.self._01 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
		m.self._11 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
		m.self._21 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
		m.self._31 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
		b0 = m2.self._02;
		b1 = m2.self._12;
		b2 = m2.self._22;
		b3 = m2.self._32;
		m.self._02 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
		m.self._12 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
		m.self._22 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
		m.self._32 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
		b0 = m2.self._03;
		b1 = m2.self._13;
		b2 = m2.self._23;
		b3 = m2.self._33;
		m.self._03 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
		m.self._13 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
		m.self._23 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
		m.self._33 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
		arm_render_RenderPathPaint.planeo = iron_Scene.active.getChild(".Plane");
		arm_render_RenderPathPaint.planeo.visible = true;
		arm_Context.paintObject = arm_render_RenderPathPaint.planeo;
		var x = m.self._00;
		var y = m.self._01;
		var z = m.self._02;
		var sx = Math.sqrt(x * x + y * y + z * z);
		var _this = arm_render_RenderPathPaint.planeo.transform.rot;
		var f = -Math.PI / 2 / 2;
		var c1 = Math.cos(f);
		var s1 = Math.sin(f);
		f = 0.;
		var c2 = Math.cos(0.);
		var s2 = Math.sin(0.);
		f = 0.;
		var c3 = Math.cos(0.);
		var s3 = Math.sin(0.);
		_this.x = s1 * c2 * c3 + c1 * s2 * s3;
		_this.y = c1 * s2 * c3 + s1 * c2 * s3;
		_this.z = c1 * c2 * s3 - s1 * s2 * c3;
		_this.w = c1 * c2 * c3 - s1 * s2 * s3;
		var _this = arm_render_RenderPathPaint.planeo.transform.scale;
		_this.x = sx;
		_this.y = 1.0;
		_this.z = sx;
		_this.w = 1.0;
		var _this = arm_render_RenderPathPaint.planeo.transform.loc;
		_this.x = m.self._30;
		_this.y = -m.self._31;
		_this.z = 0.0;
		_this.w = 1.0;
		arm_render_RenderPathPaint.planeo.transform.buildMatrix();
	}
	if(arm_render_RenderPathPaint.liveLayerDrawn > 0) {
		arm_render_RenderPathPaint.liveLayerDrawn--;
	}
	if(arm_Config.raw.brush_live && arm_Context.pdirty <= 0 && arm_Context.ddirty <= 0 && arm_Context.brushTime == 0) {
		arm_render_RenderPathPaint.commandsLiveBrush();
	}
};
arm_render_RenderPathPaint.end = function() {
	if(arm_Config.raw.brush_3d) {
		arm_render_RenderPathPaint.commandsCursor();
	}
	arm_Context.ddirty--;
	arm_Context.rdirty--;
	if(!arm_render_RenderPathPaint.paintEnabled()) {
		return;
	}
	arm_Context.pdirty--;
};
arm_render_RenderPathPaint.draw = function() {
	if(!arm_render_RenderPathPaint.paintEnabled()) {
		return;
	}
	if(arm_Config.raw.brush_live && arm_Context.pdirty <= 0 && arm_Context.ddirty > 0 && arm_Context.brushTime == 0) {
		arm_render_RenderPathPaint.commandsLiveBrush();
	}
	if(arm_History.undoLayers != null) {
		arm_render_RenderPathPaint.commandsSymmetry();
		if(arm_Context.tool == 11) {
			if(arm_Context.pdirty > 0) {
				arm_render_RenderPathPaint.dilated = false;
			}
			if(arm_Context.bakeType == 2 || arm_Context.bakeType == 4 || arm_Context.bakeType == 5) {
				if(!arm_render_RenderPathPaint.baking && arm_Context.pdirty > 0) {
					arm_render_RenderPathPaint.baking = true;
					var _bakeType = arm_Context.bakeType;
					arm_Context.bakeType = arm_Context.bakeType == 2 ? 3 : 6;
					arm_node_MakeMaterial.parsePaintMaterial();
					var _paintObject = arm_Context.paintObject;
					var highPoly = arm_Project.paintObjects[arm_Context.bakeHighPoly];
					var _visible = highPoly.visible;
					highPoly.visible = true;
					arm_Context.selectPaintObject(highPoly);
					arm_render_RenderPathPaint.commandsPaint();
					highPoly.visible = _visible;
					arm_Context.sub--;
					if(arm_render_RenderPathPaint.pushUndoLast) {
						arm_History.paint();
					}
					arm_Context.selectPaintObject(_paintObject);
					var _renderFinal = function() {
						arm_Context.bakeType = _bakeType;
						arm_node_MakeMaterial.parsePaintMaterial();
						arm_Context.pdirty = 1;
						arm_render_RenderPathPaint.commandsPaint();
						arm_Context.pdirty = 0;
						arm_render_RenderPathPaint.baking = false;
					};
					var _renderDeriv = function() {
						arm_Context.bakeType = 4;
						arm_node_MakeMaterial.parsePaintMaterial();
						arm_Context.pdirty = 1;
						arm_render_RenderPathPaint.commandsPaint();
						arm_Context.pdirty = 0;
						arm_Context.sub--;
						if(arm_render_RenderPathPaint.pushUndoLast) {
							arm_History.paint();
						}
						iron_App.notifyOnInit(_renderFinal);
					};
					iron_App.notifyOnInit(arm_Context.bakeType == 5 ? _renderDeriv : _renderFinal);
				}
			} else if(arm_Context.bakeType == 9) {
				var _layerFilter = arm_Context.layerFilter;
				var _paintObject = arm_Context.paintObject;
				var isMerged = arm_Context.mergedObject != null;
				var _visible = isMerged && arm_Context.mergedObject.visible;
				arm_Context.layerFilter = 1;
				if(isMerged) {
					arm_Context.mergedObject.visible = false;
				}
				var _g = 0;
				var _g1 = arm_Project.paintObjects;
				while(_g < _g1.length) {
					arm_Context.selectPaintObject(_g1[_g++]);
					arm_render_RenderPathPaint.commandsPaint();
				}
				arm_Context.layerFilter = _layerFilter;
				arm_Context.selectPaintObject(_paintObject);
				if(isMerged) {
					arm_Context.mergedObject.visible = _visible;
				}
			} else {
				arm_render_RenderPathPaint.commandsPaint();
			}
		} else {
			arm_render_RenderPathPaint.commandsPaint();
		}
	}
	if(arm_Context.brushBlendDirty) {
		arm_Context.brushBlendDirty = false;
		arm_render_RenderPathPaint.path.setTarget("texpaint_blend0",["texpaint_blend1"]);
		arm_render_RenderPathPaint.path.clearTarget(0);
	}
	if(arm_Context.paint2d) {
		arm_Context.paint2dView = false;
		arm_render_RenderPathPaint.planeo.visible = false;
		var _g = 0;
		var _g1 = arm_Project.paintObjects.length;
		while(_g < _g1) {
			var i = _g++;
			arm_Project.paintObjects[i].visible = arm_render_RenderPathPaint.visibles[i];
		}
		if(arm_Context.mergedObject != null) {
			arm_Context.mergedObject.visible = arm_render_RenderPathPaint.mergedObjectVisible;
		}
		arm_Context.paintObject = arm_render_RenderPathPaint.painto;
		iron_Scene.active.camera.transform.setMatrix(arm_Context.savedCamera);
		iron_Scene.active.camera.data.raw.fov = arm_render_RenderPathPaint.savedFov;
		arm_util_ViewportUtil.updateCameraType(arm_Context.cameraType);
		iron_Scene.active.camera.buildProjection();
		iron_Scene.active.camera.buildMatrix();
		arm_render_RenderPathDeferred.drawGbuffer();
	}
};
arm_render_RenderPathPaint.bindLayers = function() {
	if(arm_Config.raw.brush_live && arm_render_RenderPathPaint.liveLayerDrawn > 0 || arm_ui_UIHeader.inst.worktab.position == 1) {
		arm_render_RenderPathPaint.useLiveLayer(true);
	}
	var tid = arm_Project.layers[0].id;
	arm_render_RenderPathPaint.path.bindTarget("texpaint" + tid,"texpaint");
	arm_render_RenderPathPaint.path.bindTarget("texpaint_nor" + tid,"texpaint_nor");
	arm_render_RenderPathPaint.path.bindTarget("texpaint_pack" + tid,"texpaint_pack");
	if(arm_Project.layers[0].texpaint_mask != null) {
		arm_render_RenderPathPaint.path.bindTarget("texpaint_mask" + tid,"texpaint_mask");
	}
	var _g = 1;
	var _g1 = arm_Project.layers.length;
	while(_g < _g1) {
		var l = arm_Project.layers[_g++];
		tid = l.id;
		arm_render_RenderPathPaint.path.bindTarget("texpaint" + tid,"texpaint" + tid);
		arm_render_RenderPathPaint.path.bindTarget("texpaint_nor" + tid,"texpaint_nor" + tid);
		arm_render_RenderPathPaint.path.bindTarget("texpaint_pack" + tid,"texpaint_pack" + tid);
		if(l.texpaint_mask != null) {
			arm_render_RenderPathPaint.path.bindTarget("texpaint_mask" + tid,"texpaint_mask" + tid);
		}
	}
};
arm_render_RenderPathPaint.unbindLayers = function() {
	if(arm_Config.raw.brush_live && arm_render_RenderPathPaint.liveLayerDrawn > 0 || arm_ui_UIHeader.inst.worktab.position == 1) {
		arm_render_RenderPathPaint.useLiveLayer(false);
	}
};
arm_render_RenderPathPaint.finishPaint = function() {
	if(arm_Context.tool == 11 && !arm_render_RenderPathPaint.dilated && arm_Context.dilateRadius > 0) {
		arm_Layers.makeTempImg();
		arm_render_RenderPathPaint.dilated = true;
		var tid = arm_Context.layer.id;
		arm_render_RenderPathPaint.path.setTarget("temptex0");
		arm_render_RenderPathPaint.path.bindTarget("texpaint" + tid,"tex");
		arm_render_RenderPathPaint.path.drawShader("shader_datas/copy_pass/copy_pass");
		arm_render_RenderPathPaint.path.setTarget("texpaint" + tid);
		arm_render_RenderPathPaint.path.bindTarget("temptex0","tex");
		arm_render_RenderPathPaint.path.drawShader("shader_datas/dilate_pass/dilate_pass");
	}
};
var arm_render_RenderPathPreview = function() { };
$hxClasses["arm.render.RenderPathPreview"] = arm_render_RenderPathPreview;
arm_render_RenderPathPreview.__name__ = "arm.render.RenderPathPreview";
arm_render_RenderPathPreview.init = function(_path) {
	arm_render_RenderPathPreview.path = _path;
	var t = new iron_RenderTargetRaw();
	t.name = "texpreview";
	t.width = 1;
	t.height = 1;
	t.format = "RGBA32";
	arm_render_RenderPathPreview.path.createRenderTarget(t);
	var t = new iron_RenderTargetRaw();
	t.name = "texpreview_icon";
	t.width = 1;
	t.height = 1;
	t.format = "RGBA32";
	arm_render_RenderPathPreview.path.createRenderTarget(t);
	arm_render_RenderPathPreview.path.createDepthBuffer("mmain","DEPTH24");
	var t = new iron_RenderTargetRaw();
	t.name = "mtex";
	t.width = 256;
	t.height = 256;
	t.format = "RGBA64";
	t.scale = arm_render_Inc.superSample;
	arm_render_RenderPathPreview.path.createRenderTarget(t);
	var t = new iron_RenderTargetRaw();
	t.name = "mgbuffer0";
	t.width = 256;
	t.height = 256;
	t.format = "RGBA64";
	t.scale = arm_render_Inc.superSample;
	t.depth_buffer = "mmain";
	arm_render_RenderPathPreview.path.createRenderTarget(t);
	var t = new iron_RenderTargetRaw();
	t.name = "mgbuffer1";
	t.width = 256;
	t.height = 256;
	t.format = "RGBA64";
	t.scale = arm_render_Inc.superSample;
	arm_render_RenderPathPreview.path.createRenderTarget(t);
	var t = new iron_RenderTargetRaw();
	t.name = "mgbuffer2";
	t.width = 256;
	t.height = 256;
	t.format = "RGBA64";
	t.scale = arm_render_Inc.superSample;
	arm_render_RenderPathPreview.path.createRenderTarget(t);
};
arm_render_RenderPathPreview.commandsPreview = function() {
	arm_render_RenderPathPreview.path.setTarget("mgbuffer2");
	arm_render_RenderPathPreview.path.clearTarget(-16777216);
	arm_render_RenderPathPreview.path.setTarget("mgbuffer0");
	arm_render_RenderPathPreview.path.clearTarget(null,1.0);
	arm_render_RenderPathPreview.path.setTarget("mgbuffer0",["mgbuffer1","mgbuffer2"]);
	arm_render_RenderPathPreview.path.drawMeshes("mesh");
	arm_render_RenderPathPreview.path.setTarget("mtex");
	arm_render_RenderPathPreview.path.bindTarget("_mmain","gbufferD");
	arm_render_RenderPathPreview.path.bindTarget("mgbuffer0","gbuffer0");
	arm_render_RenderPathPreview.path.bindTarget("mgbuffer1","gbuffer1");
	arm_render_RenderPathPreview.path.bindTarget("empty_white","ssaotex");
	arm_render_RenderPathPreview.path.drawShader("deferred_light/deferred_light/deferred_light");
	arm_render_RenderPathPreview.path.setDepthFrom("mtex","mgbuffer0");
	arm_render_RenderPathPreview.path.setTarget("mtex");
	arm_render_RenderPathPreview.path.drawSkydome("world_pass/world_pass/world_pass");
	arm_render_RenderPathPreview.path.setDepthFrom("mtex","mgbuffer1");
	var selectedMat = arm_ui_UIHeader.inst.worktab.position == 3 ? arm_Context.materialScene : arm_Context.material;
	iron_RenderPath.active.renderTargets.h["texpreview"].image = selectedMat.image;
	iron_RenderPath.active.renderTargets.h["texpreview_icon"].image = selectedMat.imageIcon;
	arm_render_RenderPathPreview.path.setTarget("texpreview");
	arm_render_RenderPathPreview.path.bindTarget("mtex","tex");
	arm_render_RenderPathPreview.path.drawShader("shader_datas/compositor_pass/compositor_pass");
	arm_render_RenderPathPreview.path.setTarget("texpreview_icon");
	arm_render_RenderPathPreview.path.bindTarget("texpreview","tex");
	arm_render_RenderPathPreview.path.drawShader("shader_datas/supersample_resolve/supersample_resolve");
};
arm_render_RenderPathPreview.commandsDecal = function() {
	arm_render_RenderPathPreview.path.setTarget("gbuffer2");
	arm_render_RenderPathPreview.path.clearTarget(-16777216);
	arm_render_RenderPathPreview.path.setTarget("gbuffer0");
	arm_render_RenderPathPreview.path.clearTarget(null,1.0);
	arm_render_RenderPathPreview.path.setTarget("gbuffer0",["gbuffer1","gbuffer2"]);
	arm_render_RenderPathPreview.path.drawMeshes("mesh");
	arm_render_RenderPathPreview.path.setTarget("tex");
	arm_render_RenderPathPreview.path.bindTarget("_main","gbufferD");
	arm_render_RenderPathPreview.path.bindTarget("gbuffer0","gbuffer0");
	arm_render_RenderPathPreview.path.bindTarget("gbuffer1","gbuffer1");
	arm_render_RenderPathPreview.path.bindTarget("empty_white","ssaotex");
	arm_render_RenderPathPreview.path.drawShader("deferred_light/deferred_light/deferred_light");
	arm_render_RenderPathPreview.path.setDepthFrom("tex","gbuffer0");
	arm_render_RenderPathPreview.path.setTarget("tex");
	arm_render_RenderPathPreview.path.drawSkydome("world_pass/world_pass/world_pass");
	arm_render_RenderPathPreview.path.setDepthFrom("tex","gbuffer1");
	iron_RenderPath.active.renderTargets.h["texpreview"].image = arm_Context.decalImage;
	arm_render_RenderPathPreview.path.setTarget("texpreview");
	arm_render_RenderPathPreview.path.bindTarget("tex","tex");
	arm_render_RenderPathPreview.path.drawShader("shader_datas/compositor_pass/compositor_pass");
};
var arm_render_Uniforms = function() { };
$hxClasses["arm.render.Uniforms"] = arm_render_Uniforms;
arm_render_Uniforms.__name__ = "arm.render.Uniforms";
arm_render_Uniforms.init = function() {
	iron_object_Uniforms.externalFloatLinks = [arm_render_Uniforms.linkFloat];
	iron_object_Uniforms.externalVec2Links = [arm_render_Uniforms.linkVec2];
	iron_object_Uniforms.externalVec3Links = [arm_render_Uniforms.linkVec3];
	iron_object_Uniforms.externalVec4Links = [arm_render_Uniforms.linkVec4];
	iron_object_Uniforms.externalMat4Links = [arm_render_Uniforms.linkMat4];
	iron_object_Uniforms.externalTextureLinks = [arm_render_Uniforms.linkTex];
};
arm_render_Uniforms.linkFloat = function(object,mat,link) {
	switch(link) {
	case "_brushHardness":
		if(arm_Context.tool != 0 && arm_Context.tool != 1) {
			return 1.0;
		}
		var val = arm_Context.brushHardness * arm_Context.brushNodesHardness;
		var pen = iron_system_Input.getPen();
		if(arm_Config.raw.pressure_hardness && pen.down()) {
			val *= pen.pressure * arm_Config.raw.pressure_sensitivity;
		}
		if(arm_Config.raw.brush_3d && !arm_Context.paint2d) {
			val *= val;
		}
		return val;
	case "_brushOpacity":
		var val = arm_Context.brushOpacity * arm_Context.brushNodesOpacity;
		var pen = iron_system_Input.getPen();
		if(arm_Config.raw.pressure_opacity && pen.down()) {
			val *= pen.pressure * arm_Config.raw.pressure_sensitivity;
		}
		return val;
	case "_brushRadius":
		var val = arm_render_Uniforms.radiusUniform();
		if(arm_Operator.shortcut(Std.string(arm_Config.keymap.decal_mask) + "+" + Std.string(arm_Config.keymap.action_paint),2)) {
			return val * 2;
		} else {
			return val;
		}
		break;
	case "_brushScale":
		return (arm_Context.layer.fill_layer != null ? arm_Context.layer.scale : arm_Context.brushScale) * arm_Context.brushNodesScale;
	case "_brushScaleX":
		return 1 / arm_Context.brushScaleX;
	case "_coneAperture":
		return arm_Context.vxaoAperture;
	case "_coneOffset":
		return arm_Context.vxaoOffset;
	case "_dilateRadius":
		return arm_Context.dilateRadius;
	case "_objectId":
		return arm_Project.paintObjects.indexOf(object);
	case "_vignetteStrength":
		return arm_Config.raw.rp_vignette;
	}
	if(arm_shader_MaterialParser.script_links != null) {
		var key = haxe_ds_StringMap.keysIterator(arm_shader_MaterialParser.script_links.h);
		while(key.hasNext()) {
			var key1 = key.next();
			var script = arm_shader_MaterialParser.script_links.h[key1];
			if(script == "") {
				return 0.0;
			} else {
				return eval(script);
			}
		}
	}
	return null;
};
arm_render_Uniforms.radiusUniform = function() {
	var val = arm_Context.brushRadius * arm_Context.brushNodesRadius / 15.0;
	var pen = iron_system_Input.getPen();
	if(arm_Config.raw.pressure_radius && pen.down()) {
		val *= pen.pressure * arm_Config.raw.pressure_sensitivity;
	}
	var scale2d = 900 / arm_App.h() * arm_Config.raw.window_scale;
	if(arm_Config.raw.brush_3d && !(arm_Context.tool == 3 || arm_Context.tool == 4)) {
		val *= arm_Context.paint2d ? 0.55 * scale2d : 2;
	} else {
		val *= scale2d;
	}
	return val;
};
arm_render_Uniforms.linkVec2 = function(object,mat,link) {
	switch(link) {
	case "_brushAngle":
		var angle = arm_Context.layer.fill_layer != null ? arm_Context.layer.angle : arm_Context.brushAngle + arm_Context.brushNodesAngle;
		angle *= Math.PI / 180;
		var pen = iron_system_Input.getPen();
		if(arm_Config.raw.pressure_angle && pen.down()) {
			angle *= pen.pressure * arm_Config.raw.pressure_sensitivity;
		}
		var _this = arm_render_Uniforms.vec;
		var y = Math.sin(angle);
		_this.x = Math.cos(angle);
		_this.y = y;
		_this.z = 0;
		_this.w = 1.0;
		return arm_render_Uniforms.vec;
	case "_cloneDelta":
		var _this = arm_render_Uniforms.vec;
		_this.x = arm_Context.cloneDeltaX;
		_this.y = arm_Context.cloneDeltaY;
		_this.z = 0;
		_this.w = 1.0;
		return arm_render_Uniforms.vec;
	case "_gbufferSize":
		var _this = arm_render_Uniforms.vec;
		_this.x = 0;
		_this.y = 0;
		_this.z = 0;
		_this.w = 1.0;
		var gbuffer2 = iron_RenderPath.active.renderTargets.h["gbuffer2"];
		var _this = arm_render_Uniforms.vec;
		var x = gbuffer2.image.get_width();
		var y = gbuffer2.image.get_height();
		_this.x = x;
		_this.y = y;
		_this.z = 0;
		_this.w = 1.0;
		return arm_render_Uniforms.vec;
	case "_sub":
		arm_Context.sub = (arm_Context.sub + 1) % 4;
		var eps = arm_Context.brushBias * 0.00022 * arm_Config.getTextureResBias();
		if(arm_Context.sub == 0) {
			var _this = arm_render_Uniforms.vec;
			_this.x = eps;
			_this.y = eps;
			_this.z = 0.0;
			_this.w = 1.0;
		} else if(arm_Context.sub == 1) {
			var _this = arm_render_Uniforms.vec;
			_this.x = eps;
			_this.y = -eps;
			_this.z = 0.0;
			_this.w = 1.0;
		} else if(arm_Context.sub == 2) {
			var _this = arm_render_Uniforms.vec;
			_this.x = -eps;
			_this.y = -eps;
			_this.z = 0.0;
			_this.w = 1.0;
		} else {
			var _this = arm_render_Uniforms.vec;
			_this.x = -eps;
			_this.y = eps;
			_this.z = 0.0;
			_this.w = 1.0;
		}
		return arm_render_Uniforms.vec;
	case "_texpaintSize":
		var _this = arm_render_Uniforms.vec;
		var y = arm_Config.getTextureResY();
		_this.x = arm_Config.getTextureResX();
		_this.y = y;
		_this.z = 0;
		_this.w = 1.0;
		return arm_render_Uniforms.vec;
	}
	return null;
};
arm_render_Uniforms.linkVec3 = function(object,mat,link) {
	var v = null;
	if(link == "_brushDirection") {
		v = iron_object_Uniforms.helpVec;
		var allowPaint = arm_Context.prevPaintVecX != arm_Context.lastPaintVecX && arm_Context.prevPaintVecY != arm_Context.lastPaintVecY && arm_Context.prevPaintVecX > 0 && arm_Context.prevPaintVecY > 0;
		var x = arm_Context.paintVec.x;
		var y = arm_Context.paintVec.y;
		var lastx = arm_Context.prevPaintVecX;
		var lasty = arm_Context.prevPaintVecY;
		if(arm_Context.paint2d) {
			x = arm_render_Uniforms.vec2d(x);
			lastx = arm_render_Uniforms.vec2d(lastx);
		}
		var angle = Math.atan2(-y + lasty,x - lastx) - Math.PI / 2;
		var y = Math.sin(angle);
		v.x = Math.cos(angle);
		v.y = y;
		v.z = allowPaint ? 1 : 0;
		v.w = 1.0;
		arm_Context.prevPaintVecX = arm_Context.lastPaintVecX;
		arm_Context.prevPaintVecY = arm_Context.lastPaintVecY;
		return v;
	}
	return v;
};
arm_render_Uniforms.vec2d = function(x) {
	arm_Context.paint2dView = false;
	var res = (x * arm_App.w() - arm_App.w()) / arm_ui_UIView2D.inst.ww;
	arm_Context.paint2dView = true;
	return res;
};
arm_render_Uniforms.linkVec4 = function(object,mat,link) {
	switch(link) {
	case "_decalMask":
		var decalMask = arm_Operator.shortcut(Std.string(arm_Config.keymap.decal_mask) + "+" + Std.string(arm_Config.keymap.action_paint),2);
		var _this = arm_render_Uniforms.vec;
		var x = arm_Context.decalX;
		var y = arm_Context.decalY;
		var w = arm_render_Uniforms.radiusUniform();
		if(w == null) {
			w = 1.0;
		}
		_this.x = x;
		_this.y = y;
		_this.z = decalMask ? 1 : 0;
		_this.w = w;
		return arm_render_Uniforms.vec;
	case "_envmapData":
		var _this = arm_render_Uniforms.vec;
		var y = Math.sin(-arm_Context.envmapAngle);
		var z = Math.cos(-arm_Context.envmapAngle);
		var w = iron_Scene.active.world.probe.raw.strength;
		if(w == null) {
			w = 1.0;
		}
		_this.x = arm_Context.envmapAngle;
		_this.y = y;
		_this.z = z;
		_this.w = w;
		return arm_render_Uniforms.vec;
	case "_envmapDataWorld":
		var _this = arm_render_Uniforms.vec;
		var y = Math.sin(-arm_Context.envmapAngle);
		var z = Math.cos(-arm_Context.envmapAngle);
		var w = arm_Context.showEnvmap ? iron_Scene.active.world.probe.raw.strength : 4.0;
		if(w == null) {
			w = 1.0;
		}
		_this.x = arm_Context.envmapAngle;
		_this.y = y;
		_this.z = z;
		_this.w = w;
		return arm_render_Uniforms.vec;
	case "_inputBrush":
		var down = iron_system_Input.getMouse().down() || iron_system_Input.getPen().down();
		var _this = arm_render_Uniforms.vec;
		_this.x = arm_Context.paintVec.x;
		_this.y = arm_Context.paintVec.y;
		_this.z = down ? 1.0 : 0.0;
		_this.w = 0.0;
		if(arm_Context.paint2d) {
			arm_render_Uniforms.vec.x = arm_render_Uniforms.vec2d(arm_render_Uniforms.vec.x);
		}
		return arm_render_Uniforms.vec;
	case "_inputBrushLast":
		var down = iron_system_Input.getMouse().down() || iron_system_Input.getPen().down();
		var _this = arm_render_Uniforms.vec;
		_this.x = arm_Context.lastPaintVecX;
		_this.y = arm_Context.lastPaintVecY;
		_this.z = down ? 1.0 : 0.0;
		_this.w = 0.0;
		if(arm_Context.paint2d) {
			arm_render_Uniforms.vec.x = arm_render_Uniforms.vec2d(arm_render_Uniforms.vec.x);
		}
		return arm_render_Uniforms.vec;
	case "_stencilTransform":
		var _this = arm_render_Uniforms.vec;
		var w = arm_Context.brushStencilAngle;
		if(w == null) {
			w = 1.0;
		}
		_this.x = arm_Context.brushStencilX;
		_this.y = arm_Context.brushStencilY;
		_this.z = arm_Context.brushStencilScale;
		_this.w = w;
		if(arm_Context.paint2d) {
			arm_render_Uniforms.vec.x = arm_render_Uniforms.vec2d(arm_render_Uniforms.vec.x);
		}
		return arm_render_Uniforms.vec;
	}
	return null;
};
arm_render_Uniforms.linkMat4 = function(object,mat,link) {
	if(link == "_decalLayerMatrix") {
		var m = iron_object_Uniforms.helpMat;
		var m1 = arm_Context.layer.decalMat;
		m.self._00 = m1.self._00;
		m.self._01 = m1.self._01;
		m.self._02 = m1.self._02;
		m.self._03 = m1.self._03;
		m.self._10 = m1.self._10;
		m.self._11 = m1.self._11;
		m.self._12 = m1.self._12;
		m.self._13 = m1.self._13;
		m.self._20 = m1.self._20;
		m.self._21 = m1.self._21;
		m.self._22 = m1.self._22;
		m.self._23 = m1.self._23;
		m.self._30 = m1.self._30;
		m.self._31 = m1.self._31;
		m.self._32 = m1.self._32;
		m.self._33 = m1.self._33;
		var a00 = m.self._00;
		var a01 = m.self._01;
		var a02 = m.self._02;
		var a03 = m.self._03;
		var a10 = m.self._10;
		var a11 = m.self._11;
		var a12 = m.self._12;
		var a13 = m.self._13;
		var a20 = m.self._20;
		var a21 = m.self._21;
		var a22 = m.self._22;
		var a23 = m.self._23;
		var a30 = m.self._30;
		var a31 = m.self._31;
		var a32 = m.self._32;
		var a33 = m.self._33;
		var b00 = a00 * a11 - a01 * a10;
		var b01 = a00 * a12 - a02 * a10;
		var b02 = a00 * a13 - a03 * a10;
		var b03 = a01 * a12 - a02 * a11;
		var b04 = a01 * a13 - a03 * a11;
		var b05 = a02 * a13 - a03 * a12;
		var b06 = a20 * a31 - a21 * a30;
		var b07 = a20 * a32 - a22 * a30;
		var b08 = a20 * a33 - a23 * a30;
		var b09 = a21 * a32 - a22 * a31;
		var b10 = a21 * a33 - a23 * a31;
		var b11 = a22 * a33 - a23 * a32;
		var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;
		if(det == 0.0) {
			m.self._00 = 1.0;
			m.self._01 = 0.0;
			m.self._02 = 0.0;
			m.self._03 = 0.0;
			m.self._10 = 0.0;
			m.self._11 = 1.0;
			m.self._12 = 0.0;
			m.self._13 = 0.0;
			m.self._20 = 0.0;
			m.self._21 = 0.0;
			m.self._22 = 1.0;
			m.self._23 = 0.0;
			m.self._30 = 0.0;
			m.self._31 = 0.0;
			m.self._32 = 0.0;
			m.self._33 = 1.0;
		} else {
			det = 1.0 / det;
			m.self._00 = (a11 * b11 - a12 * b10 + a13 * b09) * det;
			m.self._01 = (a02 * b10 - a01 * b11 - a03 * b09) * det;
			m.self._02 = (a31 * b05 - a32 * b04 + a33 * b03) * det;
			m.self._03 = (a22 * b04 - a21 * b05 - a23 * b03) * det;
			m.self._10 = (a12 * b08 - a10 * b11 - a13 * b07) * det;
			m.self._11 = (a00 * b11 - a02 * b08 + a03 * b07) * det;
			m.self._12 = (a32 * b02 - a30 * b05 - a33 * b01) * det;
			m.self._13 = (a20 * b05 - a22 * b02 + a23 * b01) * det;
			m.self._20 = (a10 * b10 - a11 * b08 + a13 * b06) * det;
			m.self._21 = (a01 * b08 - a00 * b10 - a03 * b06) * det;
			m.self._22 = (a30 * b04 - a31 * b02 + a33 * b00) * det;
			m.self._23 = (a21 * b02 - a20 * b04 - a23 * b00) * det;
			m.self._30 = (a11 * b07 - a10 * b09 - a12 * b06) * det;
			m.self._31 = (a00 * b09 - a01 * b07 + a02 * b06) * det;
			m.self._32 = (a31 * b01 - a30 * b03 - a32 * b00) * det;
			m.self._33 = (a20 * b03 - a21 * b01 + a22 * b00) * det;
		}
		var m1 = iron_Scene.active.camera.P;
		var a00 = m.self._00;
		var a01 = m.self._01;
		var a02 = m.self._02;
		var a03 = m.self._03;
		var a10 = m.self._10;
		var a11 = m.self._11;
		var a12 = m.self._12;
		var a13 = m.self._13;
		var a20 = m.self._20;
		var a21 = m.self._21;
		var a22 = m.self._22;
		var a23 = m.self._23;
		var a30 = m.self._30;
		var a31 = m.self._31;
		var a32 = m.self._32;
		var a33 = m.self._33;
		var b0 = m1.self._00;
		var b1 = m1.self._10;
		var b2 = m1.self._20;
		var b3 = m1.self._30;
		m.self._00 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
		m.self._10 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
		m.self._20 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
		m.self._30 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
		b0 = m1.self._01;
		b1 = m1.self._11;
		b2 = m1.self._21;
		b3 = m1.self._31;
		m.self._01 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
		m.self._11 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
		m.self._21 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
		m.self._31 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
		b0 = m1.self._02;
		b1 = m1.self._12;
		b2 = m1.self._22;
		b3 = m1.self._32;
		m.self._02 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
		m.self._12 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
		m.self._22 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
		m.self._32 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
		b0 = m1.self._03;
		b1 = m1.self._13;
		b2 = m1.self._23;
		b3 = m1.self._33;
		m.self._03 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
		m.self._13 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
		m.self._23 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
		m.self._33 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
		return m;
	}
	return null;
};
arm_render_Uniforms.linkTex = function(object,mat,link) {
	switch(link) {
	case "_ltcMag":
		if(arm_data_ConstData.ltcMagTex == null) {
			arm_data_ConstData.initLTC();
		}
		return arm_data_ConstData.ltcMagTex;
	case "_ltcMat":
		if(arm_data_ConstData.ltcMatTex == null) {
			arm_data_ConstData.initLTC();
		}
		return arm_data_ConstData.ltcMatTex;
	case "_texbrushmask":
		return arm_Context.brushMaskImage;
	case "_texbrushstencil":
		return arm_Context.brushStencilImage;
	case "_texcolorid":
		if(arm_Project.assets.length == 0) {
			return iron_RenderPath.active.renderTargets.h["empty_white"].image;
		} else {
			return arm_Project.getImage(arm_Project.assets[arm_Context.colorIdHandle.position]);
		}
		break;
	case "_texpaint_mask":
		return arm_Context.layer.texpaint_mask;
	case "_texpaint_nor_undo":
		return iron_RenderPath.active.renderTargets.h["texpaint_nor_undo" + (arm_History.undoI - 1 < 0 ? arm_Config.raw.undo_steps - 1 : arm_History.undoI - 1)].image;
	case "_texpaint_pack_undo":
		return iron_RenderPath.active.renderTargets.h["texpaint_pack_undo" + (arm_History.undoI - 1 < 0 ? arm_Config.raw.undo_steps - 1 : arm_History.undoI - 1)].image;
	case "_texpaint_undo":
		return iron_RenderPath.active.renderTargets.h["texpaint_undo" + (arm_History.undoI - 1 < 0 ? arm_Config.raw.undo_steps - 1 : arm_History.undoI - 1)].image;
	case "_texparticle":
		return iron_RenderPath.active.renderTargets.h["texparticle"].image;
	case "_textexttool":
		return arm_Context.textToolImage;
	case "_textrianglemap":
		if(!arm_util_UVUtil.trianglemapCached) {
			iron_App.notifyOnInit(function() {
				arm_util_UVUtil.cacheTriangleMap();
			});
		}
		return arm_util_UVUtil.trianglemap;
	case "_texuvmap":
		if(!arm_util_UVUtil.uvmapCached) {
			iron_App.notifyOnInit(function() {
				arm_util_UVUtil.cacheUVMap();
			});
		}
		return arm_util_UVUtil.uvmap;
	}
	if(StringTools.startsWith(link,"_texpaint_pack_vert")) {
		return iron_RenderPath.active.renderTargets.h["texpaint_pack" + HxOverrides.substr(link,link.length - 1,null)].image;
	}
	if(StringTools.startsWith(link,"_texpaint_mask_vert")) {
		var tid = Std.parseInt(HxOverrides.substr(link,link.length - 1,null));
		if(tid < arm_Project.layers.length) {
			return arm_Project.layers[tid].texpaint_mask;
		} else {
			return null;
		}
	}
	if(StringTools.startsWith(link,"_texpaint_mask")) {
		var tid = Std.parseInt(HxOverrides.substr(link,link.length - 1,null));
		if(tid < arm_Project.layers.length) {
			return arm_Project.layers[tid].texpaint_mask;
		} else {
			return null;
		}
	}
	if(StringTools.startsWith(link,"_texpaint_nor")) {
		var tid = Std.parseInt(HxOverrides.substr(link,link.length - 1,null));
		if(tid < arm_Project.layers.length) {
			return arm_Project.layers[tid].texpaint_nor;
		} else {
			return null;
		}
	}
	if(StringTools.startsWith(link,"_texpaint_pack")) {
		var tid = Std.parseInt(HxOverrides.substr(link,link.length - 1,null));
		if(tid < arm_Project.layers.length) {
			return arm_Project.layers[tid].texpaint_pack;
		} else {
			return null;
		}
	}
	if(StringTools.startsWith(link,"_texpaint")) {
		var tid = Std.parseInt(HxOverrides.substr(link,link.length - 1,null));
		if(tid < arm_Project.layers.length) {
			return arm_Project.layers[tid].texpaint;
		} else {
			return null;
		}
	}
	if(StringTools.startsWith(link,"_texblur_")) {
		if(arm_Context.nodePreviewsBlur != null) {
			return arm_Context.nodePreviewsBlur.h[HxOverrides.substr(link,9,null)];
		} else {
			return iron_RenderPath.active.renderTargets.h["empty_black"].image;
		}
	}
	if(StringTools.startsWith(link,"_texwarp_")) {
		if(arm_Context.nodePreviewsWarp != null) {
			return arm_Context.nodePreviewsWarp.h[HxOverrides.substr(link,9,null)];
		} else {
			return iron_RenderPath.active.renderTargets.h["empty_black"].image;
		}
	}
	return null;
};
var arm_shader_NodeShader = function(context,shader_type) {
	this.invTBN = false;
	this.dotNV = false;
	this.nAttr = false;
	this.n = false;
	this.vVecCam = false;
	this.vVec = false;
	this.wtangent = false;
	this.ndcpos = false;
	this.wvpposition = false;
	this.vposition = false;
	this.mposition = false;
	this.wposition = false;
	this.bposition = false;
	this.lock = false;
	this.vstruct_as_vsin = true;
	this.write_textures = 0;
	this.write_normal = 0;
	this.write_pre = false;
	this.header = "";
	this.main_attribs = "";
	this.main_textures = "";
	this.main_normal = "";
	this.main_end = "";
	this.main_init = "";
	this.main = "";
	this.functions = new haxe_ds_StringMap();
	this.uniforms = [];
	this.sharedSamplers = [];
	this.outs = [];
	this.ins = [];
	this.includes = [];
	this.shader_type = "";
	this.context = context;
	this.shader_type = shader_type;
};
$hxClasses["arm.shader.NodeShader"] = arm_shader_NodeShader;
arm_shader_NodeShader.__name__ = "arm.shader.NodeShader";
arm_shader_NodeShader.prototype = {
	add_in: function(s) {
		this.ins.push(s);
	}
	,add_out: function(s) {
		this.outs.push(s);
	}
	,add_uniform: function(s,link,included) {
		if(included == null) {
			included = false;
		}
		var ar = s.split(" ");
		var utype = ar[ar.length - 2];
		var uname = ar[ar.length - 1];
		if(StringTools.startsWith(utype,"sampler") || StringTools.startsWith(utype,"image") || StringTools.startsWith(utype,"uimage")) {
			var is_image = StringTools.startsWith(utype,"image") || StringTools.startsWith(utype,"uimage");
			this.context.add_texture_unit(utype,uname,link,is_image);
		} else {
			if(ar[0] == "float" && ar[1].indexOf("[") >= 0) {
				ar[0] = "floats";
				ar[1] = ar[1].split("[")[0];
			} else if(ar[0] == "vec4" && ar[1].indexOf("[") >= 0) {
				ar[0] = "floats";
				ar[1] = ar[1].split("[")[0];
			}
			this.context.add_constant(ar[0],ar[1],link);
		}
		if(included == false && this.uniforms.indexOf(s) == -1) {
			this.uniforms.push(s);
		}
	}
	,add_shared_sampler: function(s) {
		if(this.sharedSamplers.indexOf(s) == -1) {
			this.sharedSamplers.push(s);
			var ar = s.split(" ");
			this.context.add_texture_unit(ar[ar.length - 2],ar[ar.length - 1],null,false);
		}
	}
	,add_function: function(s) {
		var fname = s.split("(")[0];
		if(Object.prototype.hasOwnProperty.call(this.functions.h,fname)) {
			return;
		}
		this.functions.h[fname] = s;
	}
	,write: function(s) {
		if(this.lock) {
			return;
		}
		if(this.write_textures > 0) {
			this.main_textures += s + "\n";
		} else if(this.write_normal > 0) {
			this.main_normal += s + "\n";
		} else if(this.write_pre) {
			this.main_init += s + "\n";
		} else {
			this.main += s + "\n";
		}
	}
	,write_end: function(s) {
		this.main_end += s + "\n";
	}
	,write_attrib: function(s) {
		this.main_attribs += s + "\n";
	}
	,dataSize: function(data) {
		if(data == "float1") {
			return "1";
		} else if(data == "float2") {
			return "2";
		} else if(data == "float3") {
			return "3";
		} else if(data == "float4") {
			return "4";
		} else if(data == "short2norm") {
			return "2";
		} else if(data == "short4norm") {
			return "4";
		} else {
			return "1";
		}
	}
	,vstruct_to_vsin: function() {
		var vs = this.context.data.vertex_elements;
		var _g = 0;
		while(_g < vs.length) {
			var e = vs[_g];
			++_g;
			this.add_in("vec" + this.dataSize(e.data) + " " + e.name);
		}
	}
	,get: function() {
		if(this.shader_type == "vert" && this.vstruct_as_vsin) {
			this.vstruct_to_vsin();
		}
		var sharedSampler = "shared_sampler";
		if(this.sharedSamplers.length > 0) {
			sharedSampler = this.sharedSamplers[0].split(" ")[1] + "_sampler";
		}
		var s = "#define HLSL\n";
		s = "#define HLSL\n" + "#define textureArg(tex) Texture2D tex,SamplerState tex ## _sampler\n";
		s += "#define texturePass(tex) tex,tex ## _sampler\n";
		s += "#define sampler2D Texture2D\n";
		s += "#define sampler3D Texture3D\n";
		s += "#define texture(tex, coord) tex.Sample(tex ## _sampler, coord)\n";
		s += "#define textureShared(tex, coord) tex.Sample(" + sharedSampler + ", coord)\n";
		s += "#define textureLod(tex, coord, lod) tex.SampleLevel(tex ## _sampler, coord, lod)\n";
		s += "#define textureLodShared(tex, coord, lod) tex.SampleLevel(" + sharedSampler + ", coord, lod)\n";
		s += "#define texelFetch(tex, coord, lod) tex.Load(float3(coord.xy, lod))\n";
		s += "uint2 _GetDimensions(Texture2D tex, uint lod) { uint x, y; tex.GetDimensions(x, y); return uint2(x, y); }\n";
		s += "#define textureSize _GetDimensions\n";
		s += "#define mod(a, b) (a % b)\n";
		s += "#define vec2 float2\n";
		s += "#define vec3 float3\n";
		s += "#define vec4 float4\n";
		s += "#define ivec2 int2\n";
		s += "#define ivec3 int3\n";
		s += "#define ivec4 int4\n";
		s += "#define mat2 float2x2\n";
		s += "#define mat3 float3x3\n";
		s += "#define mat4 float4x4\n";
		s += "#define dFdx ddx\n";
		s += "#define dFdy ddy\n";
		s += "#define inversesqrt rsqrt\n";
		s += "#define fract frac\n";
		s += "#define mix lerp\n";
		s += "#define atan(x, y) atan2(y, x)\n";
		s += this.header;
		var _g = 0;
		var _g1 = this.includes;
		while(_g < _g1.length) s += "#include \"" + _g1[_g++] + "\"\n";
		var index = 0;
		if(this.ins.length > 0) {
			s += "struct SPIRV_Cross_Input {\n";
			index = 0;
			this.ins.sort(function(a,b) {
				if(a.substring(4) >= b.substring(4)) {
					return 1;
				} else {
					return -1;
				}
			});
			var _g = 0;
			var _g1 = this.ins;
			while(_g < _g1.length) {
				s += "" + _g1[_g++] + "" + " : TEXCOORD" + index + ";\n";
				++index;
			}
			if(this.shader_type == "vert" && this.main.indexOf("gl_VertexID") >= 0) {
				s += "uint gl_VertexID : SV_VertexID;\n";
				this.ins.push("uint gl_VertexID");
			}
			if(this.shader_type == "vert" && this.main.indexOf("gl_InstanceID") >= 0) {
				s += "uint gl_InstanceID : SV_InstanceID;\n";
				this.ins.push("uint gl_InstanceID");
			}
			s += "};\n";
		}
		var num = 0;
		if(this.outs.length > 0 || this.shader_type == "vert") {
			s += "struct SPIRV_Cross_Output {\n";
			this.outs.sort(function(a,b) {
				if(a.substring(4) >= b.substring(4)) {
					return 1;
				} else {
					return -1;
				}
			});
			index = 0;
			if(this.shader_type == "vert") {
				var _g = 0;
				var _g1 = this.outs;
				while(_g < _g1.length) {
					s += "" + _g1[_g++] + "" + " : TEXCOORD" + index + ";\n";
					++index;
				}
				s += "float4 svpos : SV_POSITION;\n";
			} else {
				var out = this.outs[0];
				if(out.charAt(out.length - 1) == "]") {
					num = Std.parseInt(out.charAt(out.length - 2));
					s += "vec4 fragColor[" + num + "] : SV_TARGET0;\n";
				} else {
					s += "vec4 fragColor : SV_TARGET0;\n";
				}
			}
			s += "};\n";
		}
		var _g = 0;
		var _g1 = this.uniforms;
		while(_g < _g1.length) {
			var a = _g1[_g];
			++_g;
			s += "uniform " + a + ";\n";
			if(StringTools.startsWith(a,"sampler")) {
				s += "SamplerState " + a.split(" ")[1] + "_sampler;\n";
			}
		}
		if(this.sharedSamplers.length > 0) {
			var _g = 0;
			var _g1 = this.sharedSamplers;
			while(_g < _g1.length) s += "uniform " + _g1[_g++] + ";\n";
			s += "SamplerState " + sharedSampler + ";\n";
		}
		var f = haxe_ds_StringMap.valueIterator(this.functions.h);
		while(f.hasNext()) s += f.next() + "\n";
		if(this.outs.length > 0 || this.shader_type == "vert") {
			if(this.ins.length > 0) {
				s += "SPIRV_Cross_Output main(SPIRV_Cross_Input stage_input) {\n";
			} else {
				s += "SPIRV_Cross_Output main() {\n";
			}
		} else if(this.ins.length > 0) {
			s += "void main(SPIRV_Cross_Input stage_input) {\n";
		} else {
			s += "void main() {\n";
		}
		var _g = 0;
		var _g1 = this.ins;
		while(_g < _g1.length) {
			var a = _g1[_g];
			++_g;
			s += "" + a + " = stage_input." + a.substring(5) + ";\n";
		}
		if(this.shader_type == "vert") {
			s += "vec4 gl_Position;\n";
			var _g = 0;
			var _g1 = this.outs;
			while(_g < _g1.length) s += "" + _g1[_g++] + ";\n";
		} else if(this.outs.length > 0) {
			if(num > 0) {
				s += "vec4 fragColor[" + num + "];\n";
			} else {
				s += "vec4 fragColor;\n";
			}
		}
		s += this.main_attribs;
		s += this.main_textures;
		s += this.main_normal;
		s += this.main_init;
		s += this.main;
		s += this.main_end;
		if(this.outs.length > 0 || this.shader_type == "vert") {
			s += "SPIRV_Cross_Output stage_output;\n";
			if(this.shader_type == "vert") {
				s += "gl_Position.z = (gl_Position.z + gl_Position.w) * 0.5;\n";
				s += "stage_output.svpos = gl_Position;\n";
				var _g = 0;
				var _g1 = this.outs;
				while(_g < _g1.length) {
					var b = _g1[_g++].substring(5);
					s += "stage_output." + b + " = " + b + ";\n";
				}
			} else if(num > 0) {
				var _g = 0;
				var _g1 = num;
				while(_g < _g1) {
					var i = _g++;
					s += "stage_output.fragColor[" + i + "] = fragColor[" + i + "];\n";
				}
			} else {
				s += "stage_output.fragColor = fragColor;\n";
			}
			s += "return stage_output;\n";
		}
		s += "}\n";
		return s;
	}
	,__class__: arm_shader_NodeShader
};
var arm_shader_NodeShaderContext = function(material,props) {
	this.allow_vcols = false;
	this.material = material;
	this.data = { name : props.name, depth_write : props.depth_write, compare_mode : props.compare_mode, cull_mode : props.cull_mode, blend_source : props.blend_source, blend_destination : props.blend_destination, blend_operation : props.blend_operation, alpha_blend_source : props.alpha_blend_source, alpha_blend_destination : props.alpha_blend_destination, alpha_blend_operation : props.alpha_blend_operation, fragment_shader : "", vertex_shader : "", vertex_elements : Object.prototype.hasOwnProperty.call(props,"vertex_elements") ? props.vertex_elements : [{ name : "pos", data : "short4norm"},{ name : "nor", data : "short2norm"}], color_attachments : props.color_attachments, depth_attachment : props.depth_attachment};
	if(props.color_writes_red != null) {
		this.data.color_writes_red = props.color_writes_red;
	}
	if(props.color_writes_green != null) {
		this.data.color_writes_green = props.color_writes_green;
	}
	if(props.color_writes_blue != null) {
		this.data.color_writes_blue = props.color_writes_blue;
	}
	if(props.color_writes_alpha != null) {
		this.data.color_writes_alpha = props.color_writes_alpha;
	}
	this.tunits = this.data.texture_units = [];
	this.constants = this.data.constants = [];
};
$hxClasses["arm.shader.NodeShaderContext"] = arm_shader_NodeShaderContext;
arm_shader_NodeShaderContext.__name__ = "arm.shader.NodeShaderContext";
arm_shader_NodeShaderContext.prototype = {
	add_elem: function(name,data_type) {
		var _g = 0;
		var _g1 = this.data.vertex_elements;
		while(_g < _g1.length) if(_g1[_g++].name == name) {
			return;
		}
		this.data.vertex_elements.push({ name : name, data : data_type});
	}
	,is_elem: function(name) {
		var _g = 0;
		var _g1 = this.data.vertex_elements;
		while(_g < _g1.length) if(_g1[_g++].name == name) {
			return true;
		}
		return false;
	}
	,add_constant: function(ctype,name,link) {
		var _g = 0;
		var _g1 = this.constants;
		while(_g < _g1.length) if(_g1[_g++].name == name) {
			return;
		}
		var c = { name : name, type : ctype};
		if(link != null) {
			c.link = link;
		}
		this.constants.push(c);
	}
	,add_texture_unit: function(ctype,name,link,is_image) {
		if(is_image == null) {
			is_image = false;
		}
		var _g = 0;
		var _g1 = this.tunits;
		while(_g < _g1.length) if(_g1[_g++].name == name) {
			return;
		}
		var c = { name : name};
		if(link != null) {
			c.link = link;
		}
		if(is_image) {
			c.is_image = is_image;
		}
		this.tunits.push(c);
	}
	,make_vert: function() {
		this.data.vertex_shader = this.material.name + "_" + this.data.name + ".vert";
		this.vert = new arm_shader_NodeShader(this,"vert");
		return this.vert;
	}
	,make_frag: function() {
		this.data.fragment_shader = this.material.name + "_" + this.data.name + ".frag";
		this.frag = new arm_shader_NodeShader(this,"frag");
		return this.frag;
	}
	,__class__: arm_shader_NodeShaderContext
};
var arm_shader_NodeShaderData = function(material) {
	this.material = material;
};
$hxClasses["arm.shader.NodeShaderData"] = arm_shader_NodeShaderData;
arm_shader_NodeShaderData.__name__ = "arm.shader.NodeShaderData";
arm_shader_NodeShaderData.prototype = {
	add_context: function(props) {
		return new arm_shader_NodeShaderContext(this.material,props);
	}
	,__class__: arm_shader_NodeShaderData
};
var arm_shader_ShaderFunctions = function() { };
$hxClasses["arm.shader.ShaderFunctions"] = arm_shader_ShaderFunctions;
arm_shader_ShaderFunctions.__name__ = "arm.shader.ShaderFunctions";
var arm_ui_BoxExport = function() { };
$hxClasses["arm.ui.BoxExport"] = arm_ui_BoxExport;
arm_ui_BoxExport.__name__ = "arm.ui.BoxExport";
arm_ui_BoxExport.showTextures = function() {
	arm_ui_UIBox.showCustom(function(ui) {
		if(arm_ui_BoxExport.files == null) {
			arm_ui_BoxExport.fetchPresets();
		}
		if(arm_ui_BoxExport.preset == null) {
			arm_ui_BoxExport.parsePreset();
			arm_ui_BoxExport.hpreset.children = null;
		}
		arm_ui_BoxExport.tabExportTextures(ui,arm_Translator.tr("Export Textures"));
		arm_ui_BoxExport.tabPresets(ui);
		arm_ui_BoxExport.tabAtlases(ui);
	},500,310);
};
arm_ui_BoxExport.showBakeMaterial = function() {
	arm_ui_UIBox.showCustom(function(ui) {
		if(arm_ui_BoxExport.files == null) {
			arm_ui_BoxExport.fetchPresets();
		}
		if(arm_ui_BoxExport.preset == null) {
			arm_ui_BoxExport.parsePreset();
			arm_ui_BoxExport.hpreset.children = null;
		}
		arm_ui_BoxExport.tabExportTextures(ui,arm_Translator.tr("Bake to Textures"),true);
		arm_ui_BoxExport.tabPresets(ui);
	},500,310);
};
arm_ui_BoxExport.tabExportTextures = function(ui,title,bakeMaterial) {
	if(bakeMaterial == null) {
		bakeMaterial = false;
	}
	if(ui.tab(arm_ui_BoxExport.htab,title)) {
		ui.row([0.5,0.5]);
		ui.combo(arm_App.resHandle,["128","256","512","1K","2K","4K","8K","16K"],arm_Translator.tr("Resolution"),true);
		if(arm_App.resHandle.changed) {
			iron_App.notifyOnInit(arm_Layers.resizeLayers);
			arm_util_UVUtil.uvmap = null;
			arm_util_UVUtil.uvmapCached = false;
			arm_util_UVUtil.trianglemap = null;
			arm_util_UVUtil.trianglemapCached = false;
		}
		ui.combo(arm_App.bitsHandle,["8bit","16bit","32bit"],arm_Translator.tr("Color"),true);
		if(arm_App.bitsHandle.changed) {
			iron_App.notifyOnInit(arm_Layers.setLayerBits);
		}
		ui.row([0.5,0.5]);
		if(arm_App.bitsHandle.position == 0) {
			arm_Context.formatType = ui.combo(zui_Handle.global.nest(68,{ position : arm_Context.formatType}),["png","jpg"],arm_Translator.tr("Format"),true);
		} else {
			arm_Context.formatType = ui.combo(zui_Handle.global.nest(69,{ position : arm_Context.formatType}),["exr"],arm_Translator.tr("Format"),true);
		}
		ui.enabled = arm_Context.formatType == 1 && arm_App.bitsHandle.position == 0;
		arm_Context.formatQuality = ui.slider(zui_Handle.global.nest(70,{ value : arm_Context.formatQuality}),arm_Translator.tr("Quality"),0.0,100.0,true,1);
		ui.enabled = true;
		ui.row([0.5,0.5]);
		ui.enabled = !bakeMaterial;
		var layersExportHandle = zui_Handle.global.nest(71,null);
		layersExportHandle.position = arm_Context.layersExport;
		arm_Context.layersExport = ui.combo(layersExportHandle,[arm_Translator.tr("Visible"),arm_Translator.tr("Selected"),arm_Translator.tr("Per Object"),arm_Translator.tr("Per Udim Tile")],arm_Translator.tr("Layers"),true);
		ui.enabled = true;
		ui.combo(arm_ui_BoxExport.hpreset,arm_ui_BoxExport.files,arm_Translator.tr("Preset"),true);
		if(arm_ui_BoxExport.hpreset.changed) {
			arm_ui_BoxExport.preset = null;
		}
		ui.endElement();
		ui.row([0.5,0.5]);
		if(ui.button(arm_Translator.tr("Cancel"))) {
			arm_ui_UIBox.show = false;
		}
		if(ui.button(arm_Translator.tr("Export"))) {
			arm_ui_UIBox.show = false;
			arm_ui_UIFiles.show(arm_App.bitsHandle.position != 0 ? "exr" : arm_Context.formatType == 0 ? "png" : "jpg",true,function(path) {
				arm_Context.textureExportPath = path;
				iron_App.notifyOnInit(function() {
					arm_io_ExportTexture.run(path,bakeMaterial);
				});
			});
		}
		if(ui.isHovered) {
			ui.tooltip(arm_Translator.tr("Export texture files") + (" (" + Std.string(arm_Config.keymap.file_export_textures) + ")"));
		}
	}
};
arm_ui_BoxExport.tabPresets = function(ui) {
	if(ui.tab(arm_ui_BoxExport.htab,arm_Translator.tr("Presets"))) {
		ui.row([0.6,0.2,0.2]);
		ui.combo(arm_ui_BoxExport.hpreset,arm_ui_BoxExport.files,arm_Translator.tr("Preset"));
		if(arm_ui_BoxExport.hpreset.changed) {
			arm_ui_BoxExport.preset = null;
		}
		if(ui.button(arm_Translator.tr("New"))) {
			arm_ui_UIBox.showCustom(function(ui) {
				if(ui.tab(zui_Handle.global.nest(72,null),arm_Translator.tr("New Preset"))) {
					ui.row([0.5,0.5]);
					var presetName = ui.textInput(zui_Handle.global.nest(73,{ text : "new_preset"}),arm_Translator.tr("Name"));
					if(ui.button(arm_Translator.tr("OK")) || ui.isReturnDown) {
						arm_ui_BoxExport.newPreset(presetName);
						arm_ui_BoxExport.fetchPresets();
						arm_ui_BoxExport.preset = null;
						arm_ui_BoxExport.hpreset.position = arm_ui_BoxExport.files.indexOf(presetName);
						arm_ui_UIBox.show = false;
						arm_ui_BoxExport.htab.position = 1;
						arm_ui_BoxExport.showTextures();
					}
				}
			});
		}
		if(ui.button(arm_Translator.tr("Import"))) {
			arm_ui_UIFiles.show("json",false,function(path) {
				path = path.toLowerCase();
				if(StringTools.endsWith(path,".json")) {
					var filename = HxOverrides.substr(path,path.lastIndexOf(arm_sys_Path.sep) + 1,null);
					arm_sys_File.copy(path,arm_sys_Path.data() + arm_sys_Path.sep + "export_presets" + arm_sys_Path.sep + filename);
					arm_ui_BoxExport.fetchPresets();
					arm_ui_BoxExport.preset = null;
					arm_ui_BoxExport.hpreset.position = arm_ui_BoxExport.files.indexOf(HxOverrides.substr(filename,0,filename.length - 5));
					arm_Log.info("Preset '" + filename + "' imported.");
				} else {
					arm_Log.error(arm_Strings.error1);
				}
			});
		}
		if(arm_ui_BoxExport.preset == null) {
			arm_ui_BoxExport.parsePreset();
			arm_ui_BoxExport.hpreset.children = null;
		}
		ui.separator(10,false);
		ui.row([0.2,0.2,0.2,0.2,0.2]);
		ui.text(arm_Translator.tr("Texture"));
		ui.text(arm_Translator.tr("R"));
		ui.text(arm_Translator.tr("G"));
		ui.text(arm_Translator.tr("B"));
		ui.text(arm_Translator.tr("A"));
		ui.changed = false;
		var _g = 0;
		var _g1 = arm_ui_BoxExport.preset.textures.length;
		while(_g < _g1) {
			var i = _g++;
			var t = [arm_ui_BoxExport.preset.textures[i]];
			ui.row([0.2,0.2,0.2,0.2,0.2]);
			var htex = arm_ui_BoxExport.hpreset.nest(i);
			htex.text = t[0].name;
			t[0].name = ui.textInput(htex);
			if(ui.isHovered && ui.inputReleasedR) {
				arm_ui_UIMenu.draw((function(t) {
					return function(ui) {
						ui.text(t[0].name,2,ui.t.HIGHLIGHT_COL);
						if(ui.button(arm_Translator.tr("Delete"),0)) {
							HxOverrides.remove(arm_ui_BoxExport.preset.textures,t[0]);
							arm_ui_BoxExport.savePreset();
						}
					};
				})(t),2);
			}
			var hr = htex.nest(0);
			hr.position = arm_ui_BoxExport.channels.indexOf(t[0].channels[0]);
			var hg = htex.nest(1);
			hg.position = arm_ui_BoxExport.channels.indexOf(t[0].channels[1]);
			var hb = htex.nest(2);
			hb.position = arm_ui_BoxExport.channels.indexOf(t[0].channels[2]);
			var ha = htex.nest(3);
			ha.position = arm_ui_BoxExport.channels.indexOf(t[0].channels[3]);
			ui.combo(hr,arm_ui_BoxExport.channels,arm_Translator.tr("R"));
			if(hr.changed) {
				t[0].channels[0] = arm_ui_BoxExport.channels[hr.position];
			}
			ui.combo(hg,arm_ui_BoxExport.channels,arm_Translator.tr("G"));
			if(hg.changed) {
				t[0].channels[1] = arm_ui_BoxExport.channels[hg.position];
			}
			ui.combo(hb,arm_ui_BoxExport.channels,arm_Translator.tr("B"));
			if(hb.changed) {
				t[0].channels[2] = arm_ui_BoxExport.channels[hb.position];
			}
			ui.combo(ha,arm_ui_BoxExport.channels,arm_Translator.tr("A"));
			if(ha.changed) {
				t[0].channels[3] = arm_ui_BoxExport.channels[ha.position];
			}
		}
		if(ui.changed) {
			arm_ui_BoxExport.savePreset();
		}
		ui.row([0.125]);
		if(ui.button(arm_Translator.tr("Add"))) {
			arm_ui_BoxExport.preset.textures.push({ name : "base", channels : ["base_r","base_g","base_b","1.0"]});
			arm_ui_BoxExport.hpreset.children = null;
			arm_ui_BoxExport.savePreset();
		}
	}
};
arm_ui_BoxExport.tabAtlases = function(ui) {
	if(ui.tab(arm_ui_BoxExport.htab,arm_Translator.tr("Atlases"))) {
		if(arm_Project.atlasObjects == null || arm_Project.atlasObjects.length != arm_Project.paintObjects.length) {
			arm_Project.atlasObjects = [];
			arm_Project.atlasNames = [];
			var _g = 0;
			var _g1 = arm_Project.paintObjects.length;
			while(_g < _g1) {
				arm_Project.atlasObjects.push(0);
				arm_Project.atlasNames.push(arm_Translator.tr("Atlas") + " " + (_g++ + 1));
			}
		}
		var _g = 0;
		var _g1 = arm_Project.paintObjects.length;
		while(_g < _g1) {
			var i = _g++;
			ui.row([0.5,0.5]);
			ui.text(arm_Project.paintObjects[i].name);
			var hatlas = zui_Handle.global.nest(74,null).nest(i);
			hatlas.position = arm_Project.atlasObjects[i];
			arm_Project.atlasObjects[i] = ui.combo(hatlas,arm_Project.atlasNames,arm_Translator.tr("Atlas"));
		}
	}
};
arm_ui_BoxExport.showMesh = function() {
	arm_ui_UIBox.showCustom(function(ui) {
		if(ui.tab(zui_Handle.global.nest(75,null),arm_Translator.tr("Export Mesh"))) {
			arm_Context.exportMeshFormat = ui.combo(zui_Handle.global.nest(76,{ position : arm_Context.exportMeshFormat}),["obj","arm"],arm_Translator.tr("Format"),true);
			var applyDisplacement = ui.check(zui_Handle.global.nest(77,null),arm_Translator.tr("Apply Displacement"));
			var tris = 0;
			var _g = 0;
			var _g1 = arm_Project.paintObjects;
			while(_g < _g1.length) {
				var _g2 = 0;
				var _g3 = _g1[_g++].data.raw.index_arrays;
				while(_g2 < _g3.length) tris += _g3[_g2++].values.length / 3 | 0;
			}
			ui.text(tris + " triangles");
			ui.row([0.5,0.5]);
			if(ui.button(arm_Translator.tr("Cancel"))) {
				arm_ui_UIBox.show = false;
			}
			if(ui.button(arm_Translator.tr("Export"))) {
				arm_ui_UIBox.show = false;
				arm_ui_UIFiles.show(arm_Context.exportMeshFormat == 0 ? "obj" : "arm",true,function(path) {
					var f = arm_ui_UIFiles.filename;
					if(f == "") {
						f = arm_Translator.tr("untitled");
					}
					arm_io_ExportMesh.run(path + arm_sys_Path.sep + f,applyDisplacement);
				});
			}
		}
	});
};
arm_ui_BoxExport.fetchPresets = function() {
	arm_ui_BoxExport.files = arm_sys_File.readDirectory(arm_sys_Path.data() + arm_sys_Path.sep + "export_presets");
	var _g = 0;
	var _g1 = arm_ui_BoxExport.files.length;
	while(_g < _g1) {
		var i = _g++;
		arm_ui_BoxExport.files[i] = HxOverrides.substr(arm_ui_BoxExport.files[i],0,arm_ui_BoxExport.files[i].length - 5);
	}
};
arm_ui_BoxExport.parsePreset = function() {
	var file = "export_presets/" + arm_ui_BoxExport.files[arm_ui_BoxExport.hpreset.position] + ".json";
	iron_data_Data.getBlob(file,function(blob) {
		arm_ui_BoxExport.preset = JSON.parse(blob.toString());
		iron_data_Data.deleteBlob("export_presets/" + file);
	});
};
arm_ui_BoxExport.newPreset = function(name) {
	if(!StringTools.endsWith(name,".json")) {
		name += ".json";
	}
	Krom.fileSaveBytes(arm_sys_Path.data() + arm_sys_Path.sep + "export_presets" + arm_sys_Path.sep + name,haxe_io_Bytes.ofString("{\r\n\t\"textures\": [\r\n\t\t{ \"name\": \"base\", \"channels\": [\"base_r\", \"base_g\", \"base_b\", \"1.0\"] }\r\n\t]\r\n}\r\n").b.bufferValue);
};
arm_ui_BoxExport.savePreset = function() {
	var name = arm_ui_BoxExport.files[arm_ui_BoxExport.hpreset.position];
	if(name == "generic") {
		return;
	}
	Krom.fileSaveBytes(arm_sys_Path.data() + arm_sys_Path.sep + "export_presets" + arm_sys_Path.sep + name + ".json",haxe_io_Bytes.ofString(JSON.stringify(arm_ui_BoxExport.preset)).b.bufferValue);
};
var kha_Color = $hx_exports["kha"]["Color"] = {};
kha_Color.__properties__ = {set_value:"set_value",get_value:"get_value",set_A:"set_A",get_A:"get_A",set_B:"set_B",get_B:"get_B",set_G:"set_G",get_G:"get_G",set_R:"set_R",get_R:"get_R",set_Ab:"set_Ab",get_Ab:"get_Ab",set_Bb:"set_Bb",get_Bb:"get_Bb",set_Gb:"set_Gb",get_Gb:"get_Gb",set_Rb:"set_Rb",get_Rb:"get_Rb"};
kha_Color.fromValue = function(value) {
	return kha_Color._new(value);
};
kha_Color.fromBytes = function(r,g,b,a) {
	if(a == null) {
		a = 255;
	}
	return kha_Color._new(a << 24 | r << 16 | g << 8 | b);
};
kha_Color.fromFloats = function(r,g,b,a) {
	if(a == null) {
		a = 1;
	}
	return kha_Color._new(Math.round(a * 255) << 24 | Math.round(r * 255) << 16 | Math.round(g * 255) << 8 | Math.round(b * 255));
};
kha_Color.fromString = function(value) {
	if((value.length == 7 || value.length == 9) && value.charCodeAt(0) == 35) {
		var colorValue = Std.parseInt("0x" + HxOverrides.substr(value,1,null));
		if(value.length == 7) {
			colorValue += -16777216;
		}
		return kha_Color._new(colorValue | 0);
	} else {
		throw haxe_Exception.thrown("Invalid Color string: '" + value + "'");
	}
};
kha_Color._new = function(value) {
	return value;
};
kha_Color.get_value = function(this1) {
	return this1;
};
kha_Color.set_value = function(this1,value) {
	this1 = value;
	return value;
};
kha_Color.get_Rb = function(this1) {
	return (this1 & 16711680) >>> 16;
};
kha_Color.get_Gb = function(this1) {
	return (this1 & 65280) >>> 8;
};
kha_Color.get_Bb = function(this1) {
	return this1 & 255;
};
kha_Color.get_Ab = function(this1) {
	return this1 >>> 24;
};
kha_Color.set_Rb = function(this1,i) {
	this1 = this1 >>> 24 << 24 | i << 16 | (this1 & 65280) >>> 8 << 8 | this1 & 255;
	return i;
};
kha_Color.set_Gb = function(this1,i) {
	this1 = this1 >>> 24 << 24 | (this1 & 16711680) >>> 16 << 16 | i << 8 | this1 & 255;
	return i;
};
kha_Color.set_Bb = function(this1,i) {
	this1 = this1 >>> 24 << 24 | (this1 & 16711680) >>> 16 << 16 | (this1 & 65280) >>> 8 << 8 | i;
	return i;
};
kha_Color.set_Ab = function(this1,i) {
	this1 = i << 24 | (this1 & 16711680) >>> 16 << 16 | (this1 & 65280) >>> 8 << 8 | this1 & 255;
	return i;
};
kha_Color.get_R = function(this1) {
	return ((this1 & 16711680) >>> 16) * 0.00392156862745098;
};
kha_Color.get_G = function(this1) {
	return ((this1 & 65280) >>> 8) * 0.00392156862745098;
};
kha_Color.get_B = function(this1) {
	return (this1 & 255) * 0.00392156862745098;
};
kha_Color.get_A = function(this1) {
	return (this1 >>> 24) * 0.00392156862745098;
};
kha_Color.set_R = function(this1,f) {
	this1 = Math.round((this1 >>> 24) * 0.00392156862745098 * 255) << 24 | Math.round(f * 255) << 16 | Math.round(((this1 & 65280) >>> 8) * 0.00392156862745098 * 255) << 8 | Math.round((this1 & 255) * 0.00392156862745098 * 255);
	return f;
};
kha_Color.set_G = function(this1,f) {
	this1 = Math.round((this1 >>> 24) * 0.00392156862745098 * 255) << 24 | Math.round(((this1 & 16711680) >>> 16) * 0.00392156862745098 * 255) << 16 | Math.round(f * 255) << 8 | Math.round((this1 & 255) * 0.00392156862745098 * 255);
	return f;
};
kha_Color.set_B = function(this1,f) {
	this1 = Math.round((this1 >>> 24) * 0.00392156862745098 * 255) << 24 | Math.round(((this1 & 16711680) >>> 16) * 0.00392156862745098 * 255) << 16 | Math.round(((this1 & 65280) >>> 8) * 0.00392156862745098 * 255) << 8 | Math.round(f * 255);
	return f;
};
kha_Color.set_A = function(this1,f) {
	this1 = Math.round(f * 255) << 24 | Math.round(((this1 & 16711680) >>> 16) * 0.00392156862745098 * 255) << 16 | Math.round(((this1 & 65280) >>> 8) * 0.00392156862745098 * 255) << 8 | Math.round((this1 & 255) * 0.00392156862745098 * 255);
	return f;
};
var arm_ui_BoxPreferences = function() { };
$hxClasses["arm.ui.BoxPreferences"] = arm_ui_BoxPreferences;
arm_ui_BoxPreferences.__name__ = "arm.ui.BoxPreferences";
arm_ui_BoxPreferences.show = function() {
	arm_ui_UIBox.showCustom(function(ui) {
		if(ui.tab(arm_ui_BoxPreferences.htab,arm_Translator.tr("Interface"),true)) {
			if(arm_ui_BoxPreferences.locales == null) {
				arm_ui_BoxPreferences.locales = arm_Translator.getSupportedLocales();
			}
			var localeHandle = zui_Handle.global.nest(21,{ position : arm_ui_BoxPreferences.locales.indexOf(arm_Config.raw.locale)});
			ui.combo(localeHandle,arm_ui_BoxPreferences.locales,arm_Translator.tr("Language"),true);
			if(localeHandle.changed) {
				var localeCode = arm_ui_BoxPreferences.locales[localeHandle.position];
				arm_Config.raw.locale = localeCode;
				arm_Translator.loadTranslations(localeCode);
				arm_ui_UISidebar.inst.tagUIRedraw();
			}
			var hscale = zui_Handle.global.nest(22,{ value : arm_Config.raw.window_scale});
			ui.slider(hscale,arm_Translator.tr("UI Scale"),1.0,4.0,true,10);
			if(!hscale.changed && arm_Context.hscaleWasChanged) {
				var tmp;
				if(hscale.value != null) {
					var f = hscale.value;
					tmp = isNaN(f);
				} else {
					tmp = true;
				}
				if(tmp) {
					hscale.value = 1.0;
				}
				arm_Config.raw.window_scale = hscale.value;
				arm_ui_BoxPreferences.setScale();
			}
			arm_Context.hscaleWasChanged = hscale.changed;
			var hspeed = zui_Handle.global.nest(23,{ value : arm_Config.raw.camera_speed});
			var tmp = arm_Translator.tr("Camera Speed");
			arm_Config.raw.camera_speed = ui.slider(hspeed,tmp,0.1,4.0,true);
			var tmp = zui_Handle.global.nest(24,{ selected : arm_Config.raw.invert_zoom_direction});
			var tmp1 = arm_Translator.tr("Invert Zoom Direction");
			arm_Config.raw.invert_zoom_direction = ui.check(tmp,tmp1);
			var tmp = zui_Handle.global.nest(25,{ selected : arm_Config.raw.native_file_browser});
			var tmp1 = arm_Translator.tr("Native File Browser");
			arm_Config.raw.native_file_browser = ui.check(tmp,tmp1);
			var tmp = zui_Handle.global.nest(26,{ selected : arm_Config.raw.node_preview});
			var tmp1 = arm_Translator.tr("Show Node Preview");
			arm_Config.raw.node_preview = ui.check(tmp,tmp1);
			ui.changed = false;
			var tmp = zui_Handle.global.nest(27,{ selected : arm_Config.raw.show_asset_names});
			var tmp1 = arm_Translator.tr("Show Asset Names");
			arm_Config.raw.show_asset_names = ui.check(tmp,tmp1);
			if(ui.changed) {
				arm_ui_UISidebar.inst.tagUIRedraw();
			}
			ui.endElement();
			ui.row([0.5]);
			if(ui.button(arm_Translator.tr("Restore"))) {
				arm_ui_UIMenu.draw(function(ui) {
					ui.text(arm_Translator.tr("Restore defaults?"),2,ui.t.HIGHLIGHT_COL);
					if(ui.button(arm_Translator.tr("Confirm"),0)) {
						ui.t.ELEMENT_H = arm_App.defaultElementH;
						arm_Config.restore();
						arm_ui_BoxPreferences.setScale();
						if(arm_ui_BoxPreferences.filesPlugin != null) {
							var _g = 0;
							var _g1 = arm_ui_BoxPreferences.filesPlugin;
							while(_g < _g1.length) {
								var f = _g1[_g];
								++_g;
								arm_Plugin.stop(f);
							}
						}
						arm_ui_BoxPreferences.filesPlugin = null;
						arm_ui_BoxPreferences.filesKeymap = null;
					}
				},2);
			}
		}
		if(ui.tab(arm_ui_BoxPreferences.htab,arm_Translator.tr("Theme"),true)) {
			if(arm_ui_BoxPreferences.themes == null) {
				arm_ui_BoxPreferences.fetchThemes();
			}
			arm_ui_BoxPreferences.themeHandle = zui_Handle.global.nest(28,{ position : arm_ui_BoxPreferences.getThemeIndex()});
			ui.beginSticky();
			ui.row([0.25,0.25,0.25,0.25]);
			ui.combo(arm_ui_BoxPreferences.themeHandle,arm_ui_BoxPreferences.themes,arm_Translator.tr("Theme"));
			if(arm_ui_BoxPreferences.themeHandle.changed) {
				arm_Config.raw.theme = arm_ui_BoxPreferences.themes[arm_ui_BoxPreferences.themeHandle.position] + ".json";
				arm_ui_BoxPreferences.loadTheme(arm_Config.raw.theme);
			}
			if(ui.button(arm_Translator.tr("New"))) {
				arm_ui_UIBox.showCustom(function(ui) {
					if(ui.tab(zui_Handle.global.nest(29,null),arm_Translator.tr("New Theme"))) {
						ui.row([0.5,0.5]);
						var themeName = ui.textInput(zui_Handle.global.nest(30,{ text : "new_theme"}),arm_Translator.tr("Name"));
						if(ui.button(arm_Translator.tr("OK")) || ui.isReturnDown) {
							var template = JSON.stringify(arm_App.theme);
							if(!StringTools.endsWith(themeName,".json")) {
								themeName += ".json";
							}
							var path = arm_sys_Path.data() + arm_sys_Path.sep + "themes" + arm_sys_Path.sep + themeName;
							Krom.fileSaveBytes(path,haxe_io_Bytes.ofString(template).b.bufferValue);
							arm_ui_BoxPreferences.fetchThemes();
							arm_Config.raw.theme = themeName;
							arm_ui_BoxPreferences.themeHandle.position = arm_ui_BoxPreferences.getThemeIndex();
							arm_ui_UIBox.show = false;
							arm_App.redrawUI();
							arm_ui_BoxPreferences.htab.position = 1;
							arm_ui_BoxPreferences.show();
						}
					}
				});
			}
			if(ui.button(arm_Translator.tr("Import"))) {
				arm_ui_UIFiles.show("json",false,function(path) {
					arm_io_ImportTheme.run(path);
				});
			}
			if(ui.button(arm_Translator.tr("Export"))) {
				arm_ui_UIFiles.show("json",true,function(path) {
					path += arm_sys_Path.sep + arm_ui_UIFiles.filename;
					if(!StringTools.endsWith(path,".json")) {
						path += ".json";
					}
					Krom.fileSaveBytes(path,haxe_io_Bytes.ofString(JSON.stringify(arm_App.theme)).b.bufferValue);
				});
			}
			ui.endSticky();
			var i = 0;
			var theme = arm_App.theme;
			var hlist = zui_Handle.global.nest(31,null);
			var h = hlist.nest(i++,{ color : arm_ui_BoxPreferences.worldColor});
			ui.row([0.125,0.875]);
			ui.text("",0,h.color);
			if(ui.isHovered && ui.inputReleased) {
				arm_ui_UIMenu.draw(function(ui) {
					ui.fill(0,0,ui._w / ui.ops.scaleFactor,ui.t.ELEMENT_H * 9,ui.t.SEPARATOR_COL);
					ui.changed = false;
					zui_Ext.colorWheel(ui,h,false,null,false);
					if(ui.changed) {
						arm_ui_UIMenu.keepOpen = true;
					}
				},3);
			}
			var val = h.color;
			if(val < 0) {
				val += 4294967296;
			}
			h.text = val.toString(16);
			ui.textInput(h,"VIEWPORT_COL");
			h.color = parseInt(h.text,16);
			if(arm_ui_BoxPreferences.worldColor != h.color) {
				arm_ui_BoxPreferences.worldColor = h.color;
				var b = new haxe_io_Bytes(new ArrayBuffer(4));
				b.b[0] = (arm_ui_BoxPreferences.worldColor & 16711680) >>> 16;
				b.b[1] = (arm_ui_BoxPreferences.worldColor & 65280) >>> 8;
				b.b[2] = arm_ui_BoxPreferences.worldColor & 255;
				b.b[3] = 255;
				arm_Context.emptyEnvmap = kha_Image.fromBytes(b,1,1);
				arm_Context.ddirty = 2;
				if(!arm_Context.showEnvmap) {
					iron_Scene.active.world.envmap = arm_Context.emptyEnvmap;
				}
			}
			var _g = 0;
			var _g1 = Reflect.fields(theme);
			while(_g < _g1.length) {
				var key = [_g1[_g]];
				++_g;
				if(key[0] == "NAME") {
					continue;
				}
				var h1 = [hlist.nest(i++)];
				var val = theme[key[0]];
				var isHex = StringTools.endsWith(key[0],"_COL");
				if(isHex && val < 0) {
					val += 4294967296;
				}
				if(isHex) {
					ui.row([0.125,0.875]);
					ui.text("",0,val);
					if(ui.isHovered && ui.inputReleased) {
						h1[0].color = theme[key[0]];
						arm_ui_UIMenu.draw((function(h,key) {
							return function(ui) {
								ui.fill(0,0,ui._w / ui.ops.scaleFactor,ui.t.ELEMENT_H * 6,ui.t.SEPARATOR_COL);
								ui.changed = false;
								theme[key[0]] = zui_Ext.colorWheel(ui,h[0],false,null,false);
								if(ui.changed) {
									arm_ui_UIMenu.keepOpen = true;
								}
							};
						})(h1,key),3);
					}
				}
				if(typeof(val) == "boolean") {
					h1[0].selected = val;
					theme[key[0]] = ui.check(h1[0],key[0]);
				} else if(key[0] == "LINK_STYLE") {
					var styles = [arm_Translator.tr("Straight"),arm_Translator.tr("Curved")];
					h1[0].position = val;
					theme[key[0]] = ui.combo(h1[0],styles,key[0],true);
				} else {
					var tmp = isHex ? val.toString(16) : val.toString();
					h1[0].text = tmp;
					var res = ui.textInput(h1[0],key[0]);
					if(isHex) {
						theme[key[0]] = parseInt(h1[0].text,16);
					} else {
						theme[key[0]] = parseInt(h1[0].text);
					}
				}
			}
		}
		if(ui.tab(arm_ui_BoxPreferences.htab,arm_Translator.tr("Usage"),true)) {
			arm_Context.undoHandle = zui_Handle.global.nest(32,{ value : arm_Config.raw.undo_steps});
			var tmp = ui.slider(arm_Context.undoHandle,arm_Translator.tr("Undo Steps"),1,64,false,1) | 0;
			arm_Config.raw.undo_steps = tmp;
			if(arm_Context.undoHandle.changed) {
				ui.g.end();
				while(arm_History.undoLayers.length < arm_Config.raw.undo_steps) {
					var l = new arm_data_LayerSlot("_undo" + arm_History.undoLayers.length);
					l.createMask(0,false);
					arm_History.undoLayers.push(l);
				}
				while(arm_History.undoLayers.length > arm_Config.raw.undo_steps) {
					var l = arm_History.undoLayers.pop();
					l.unload();
				}
				arm_History.reset();
				ui.g.begin(false);
			}
			arm_Context.brushBias = ui.slider(zui_Handle.global.nest(33,{ value : arm_Context.brushBias}),arm_Translator.tr("Paint Bleed"),0.0,2.0,true);
			if(ui.isHovered) {
				ui.tooltip(arm_Translator.tr("Stretch brush strokes on the uv map to prevent seams"));
			}
			arm_Context.dilateRadius = ui.slider(zui_Handle.global.nest(34,{ value : arm_Context.dilateRadius}),arm_Translator.tr("Dilate Radius"),0.0,64.0,true,1);
			if(ui.isHovered) {
				ui.tooltip(arm_Translator.tr("Dilate baked textures to prevent seams"));
			}
			var workspaceHandle = zui_Handle.global.nest(35,{ position : arm_Config.raw.workspace});
			ui.combo(workspaceHandle,[arm_Translator.tr("Paint"),arm_Translator.tr("Material"),arm_Translator.tr("Bake")],arm_Translator.tr("Default Workspace"),true);
			if(workspaceHandle.changed) {
				arm_Config.raw.workspace = workspaceHandle.position;
			}
			var materialLiveHandle = zui_Handle.global.nest(36,{ selected : arm_Config.raw.material_live});
			var tmp = arm_Translator.tr("Live Material Preview");
			arm_Config.raw.material_live = ui.check(materialLiveHandle,tmp);
			if(ui.isHovered) {
				ui.tooltip(arm_Translator.tr("Instantly update material preview on node change"));
			}
			var brushLiveHandle = zui_Handle.global.nest(37,{ selected : arm_Config.raw.brush_live});
			var tmp = arm_Translator.tr("Live Brush Preview");
			arm_Config.raw.brush_live = ui.check(brushLiveHandle,tmp);
			if(ui.isHovered) {
				ui.tooltip(arm_Translator.tr("Draw live brush preview in viewport"));
			}
			if(brushLiveHandle.changed) {
				arm_Context.ddirty = 2;
			}
			var brush3dHandle = zui_Handle.global.nest(38,{ selected : arm_Config.raw.brush_3d});
			var tmp = arm_Translator.tr("3D Cursor");
			arm_Config.raw.brush_3d = ui.check(brush3dHandle,tmp);
			if(brush3dHandle.changed) {
				arm_node_MakeMaterial.parsePaintMaterial();
			}
			ui.enabled = arm_Config.raw.brush_3d;
			var brushDepthRejectHandle = zui_Handle.global.nest(39,{ selected : arm_Context.brushDepthReject});
			arm_Context.brushDepthReject = ui.check(brushDepthRejectHandle,arm_Translator.tr("Depth Reject"));
			if(brushDepthRejectHandle.changed) {
				arm_node_MakeMaterial.parsePaintMaterial();
			}
			ui.row([0.5,0.5]);
			var brushAngleRejectHandle = zui_Handle.global.nest(40,{ selected : arm_Context.brushAngleReject});
			arm_Context.brushAngleReject = ui.check(brushAngleRejectHandle,arm_Translator.tr("Angle Reject"));
			if(brushAngleRejectHandle.changed) {
				arm_node_MakeMaterial.parsePaintMaterial();
			}
			if(!arm_Context.brushAngleReject) {
				ui.enabled = false;
			}
			var angleDotHandle = zui_Handle.global.nest(41,{ value : arm_Context.brushAngleRejectDot});
			arm_Context.brushAngleRejectDot = ui.slider(angleDotHandle,arm_Translator.tr("Angle"),0.0,1.0,true);
			if(angleDotHandle.changed) {
				arm_node_MakeMaterial.parsePaintMaterial();
			}
			ui.enabled = true;
		}
		if(ui.tab(arm_ui_BoxPreferences.htab,arm_Translator.tr("Pen"),true)) {
			ui.text(arm_Translator.tr("Pressure controls"));
			var tmp = zui_Handle.global.nest(42,{ selected : arm_Config.raw.pressure_radius});
			var tmp1 = arm_Translator.tr("Brush Radius");
			arm_Config.raw.pressure_radius = ui.check(tmp,tmp1);
			var tmp = zui_Handle.global.nest(43,{ selected : arm_Config.raw.pressure_hardness});
			var tmp1 = arm_Translator.tr("Brush Hardness");
			arm_Config.raw.pressure_hardness = ui.check(tmp,tmp1);
			var tmp = zui_Handle.global.nest(44,{ selected : arm_Config.raw.pressure_opacity});
			var tmp1 = arm_Translator.tr("Brush Opacity");
			arm_Config.raw.pressure_opacity = ui.check(tmp,tmp1);
			var tmp = zui_Handle.global.nest(45,{ selected : arm_Config.raw.pressure_angle});
			var tmp1 = arm_Translator.tr("Brush Angle");
			arm_Config.raw.pressure_angle = ui.check(tmp,tmp1);
			var tmp = zui_Handle.global.nest(46,{ value : arm_Config.raw.pressure_sensitivity});
			var tmp1 = arm_Translator.tr("Sensitivity");
			arm_Config.raw.pressure_sensitivity = ui.slider(tmp,tmp1,0.0,2.0,true);
			ui.endElement();
			ui.row([0.5]);
			if(ui.button(arm_Translator.tr("Help"))) {
				arm_sys_File.explorer("https://github.com/armory3d/armorpaint_docs#pen");
			}
		}
		arm_Context.hssgi = zui_Handle.global.nest(47,{ selected : arm_Config.raw.rp_ssgi});
		arm_Context.hssr = zui_Handle.global.nest(48,{ selected : arm_Config.raw.rp_ssr});
		arm_Context.hbloom = zui_Handle.global.nest(49,{ selected : arm_Config.raw.rp_bloom});
		var f = arm_Config.raw.rp_supersample;
		arm_Context.hsupersample = zui_Handle.global.nest(50,{ position : f == 0.25 ? 0 : f == 0.5 ? 1 : f == 1.0 ? 2 : f == 1.5 ? 3 : f == 2.0 ? 4 : 5});
		arm_Context.hvxao = zui_Handle.global.nest(51,{ selected : arm_Config.raw.rp_gi});
		if(ui.tab(arm_ui_BoxPreferences.htab,arm_Translator.tr("Viewport"),true)) {
			var hrendermode = zui_Handle.global.nest(52,{ position : arm_Context.renderMode});
			arm_Context.renderMode = ui.combo(hrendermode,[arm_Translator.tr("Full"),arm_Translator.tr("Mobile")],arm_Translator.tr("Renderer"),true);
			if(hrendermode.changed) {
				if(hrendermode.position == 1) {
					if(arm_render_RenderPathForward.path == null) {
						arm_render_RenderPathForward.init(iron_RenderPath.active);
					}
					iron_RenderPath.active.commands = arm_render_RenderPathForward.commands;
				} else {
					iron_RenderPath.active.commands = arm_render_RenderPathDeferred.commands;
				}
				arm_node_MakeMaterial.parseMeshMaterial();
			}
			ui.combo(arm_Context.hsupersample,["0.25x","0.5x","1.0x","1.5x","2.0x","4.0x"],arm_Translator.tr("Super Sample"),true);
			if(arm_Context.hsupersample.changed) {
				arm_Config.applyConfig();
			}
			if(arm_Context.renderMode == 0) {
				ui.check(arm_Context.hvxao,arm_Translator.tr("Voxel AO"));
				if(ui.isHovered) {
					ui.tooltip(arm_Translator.tr("Cone-traced AO and shadows"));
				}
				if(arm_Context.hvxao.changed) {
					arm_Config.applyConfig();
				}
				ui.enabled = arm_Context.hvxao.selected;
				var h2 = zui_Handle.global.nest(53,{ value : arm_Context.vxaoOffset});
				arm_Context.vxaoOffset = ui.slider(h2,arm_Translator.tr("Cone Offset"),1.0,4.0,true);
				if(h2.changed) {
					arm_Context.ddirty = 2;
				}
				var h2 = zui_Handle.global.nest(54,{ value : arm_Context.vxaoAperture});
				arm_Context.vxaoAperture = ui.slider(h2,arm_Translator.tr("Aperture"),1.0,4.0,true);
				if(h2.changed) {
					arm_Context.ddirty = 2;
				}
				ui.enabled = true;
				ui.check(arm_Context.hssgi,arm_Translator.tr("SSAO"));
				if(arm_Context.hssgi.changed) {
					arm_Config.applyConfig();
				}
				ui.check(arm_Context.hssr,arm_Translator.tr("SSR"));
				if(arm_Context.hssr.changed) {
					arm_Config.applyConfig();
				}
				ui.check(arm_Context.hbloom,arm_Translator.tr("Bloom"));
				if(arm_Context.hbloom.changed) {
					arm_Config.applyConfig();
				}
			}
			var h2 = zui_Handle.global.nest(55,{ value : arm_Config.raw.rp_vignette});
			var tmp = arm_Translator.tr("Vignette");
			arm_Config.raw.rp_vignette = ui.slider(h2,tmp,0.0,1.0,true);
			if(h2.changed) {
				arm_Context.ddirty = 2;
			}
			var cam = iron_Scene.active.camera;
			var camRaw = cam.data.raw;
			var near_handle = zui_Handle.global.nest(56,null);
			var far_handle = zui_Handle.global.nest(57,null);
			near_handle.value = (camRaw.near_plane * 1000 | 0) / 1000;
			far_handle.value = (camRaw.far_plane * 100 | 0) / 100;
			camRaw.near_plane = ui.slider(near_handle,arm_Translator.tr("Clip Start"),0.001,1.0,true);
			camRaw.far_plane = ui.slider(far_handle,arm_Translator.tr("Clip End"),50.0,100.0,true);
			if(near_handle.changed || far_handle.changed) {
				cam.buildProjection();
			}
			var dispHandle = zui_Handle.global.nest(58,{ value : arm_Config.raw.displace_strength});
			var tmp = arm_Translator.tr("Displacement Strength");
			arm_Config.raw.displace_strength = ui.slider(dispHandle,tmp,0.0,10.0,true);
			if(dispHandle.changed) {
				arm_Context.ddirty = 2;
				arm_node_MakeMaterial.parseMeshMaterial();
			}
		}
		if(ui.tab(arm_ui_BoxPreferences.htab,arm_Translator.tr("Keymap"),true)) {
			if(arm_ui_BoxPreferences.filesKeymap == null) {
				arm_ui_BoxPreferences.fetchKeymaps();
			}
			ui.beginSticky();
			ui.row([0.5,0.25,0.25]);
			arm_ui_BoxPreferences.presetHandle = zui_Handle.global.nest(59,{ position : arm_ui_BoxPreferences.getPresetIndex()});
			ui.combo(arm_ui_BoxPreferences.presetHandle,arm_ui_BoxPreferences.filesKeymap,arm_Translator.tr("Preset"));
			if(arm_ui_BoxPreferences.presetHandle.changed) {
				arm_Config.raw.keymap = arm_ui_BoxPreferences.filesKeymap[arm_ui_BoxPreferences.presetHandle.position] + ".json";
				arm_Config.applyConfig();
				arm_Config.loadKeymap();
			}
			if(ui.button(arm_Translator.tr("Import"))) {
				arm_ui_UIFiles.show("json",false,function(path) {
					arm_io_ImportKeymap.run(path);
				});
			}
			if(ui.button(arm_Translator.tr("Export"))) {
				arm_ui_UIFiles.show("json",true,function(dest) {
					if(!StringTools.endsWith(arm_ui_UIFiles.filename,".json")) {
						arm_ui_UIFiles.filename += ".json";
					}
					var path = arm_sys_Path.data() + arm_sys_Path.sep + "keymap_presets" + arm_sys_Path.sep + arm_Config.raw.keymap;
					arm_sys_File.copy(path,dest + arm_sys_Path.sep + arm_ui_UIFiles.filename);
				});
			}
			ui.endSticky();
			ui.separator(8,false);
			var i = 0;
			ui.changed = false;
			var _g = 0;
			var _g1 = Reflect.fields(arm_Config.keymap);
			while(_g < _g1.length) {
				var key1 = _g1[_g];
				++_g;
				var h2 = zui_Handle.global.nest(60,null).nest(i++);
				h2.text = Reflect.field(arm_Config.keymap,key1);
				var text = ui.textInput(h2,key1,0);
				arm_Config.keymap[key1] = text;
			}
			if(ui.changed) {
				arm_Config.applyConfig();
				arm_Config.saveKeymap();
			}
		}
		if(ui.tab(arm_ui_BoxPreferences.htab,arm_Translator.tr("Plugins"),true)) {
			ui.beginSticky();
			ui.row([0.25,0.25]);
			if(ui.button(arm_Translator.tr("New"))) {
				arm_ui_UIBox.showCustom(function(ui) {
					if(ui.tab(zui_Handle.global.nest(61,null),arm_Translator.tr("New Plugin"))) {
						ui.row([0.5,0.5]);
						var pluginName = ui.textInput(zui_Handle.global.nest(62,{ text : "new_plugin"}),arm_Translator.tr("Name"));
						if(ui.button(arm_Translator.tr("OK")) || ui.isReturnDown) {
							var template = "let plugin = new arm.Plugin();\r\nlet h1 = new zui.Handle();\r\nplugin.drawUI = function(ui) {\r\n\tif (ui.panel(h1, 'New Plugin')) {\r\n\t\tif (ui.button('Button')) {\r\n\t\t\tarm.Log.error('Hello');\r\n\t\t}\r\n\t}\r\n}\r\n";
							if(!StringTools.endsWith(pluginName,".js")) {
								pluginName += ".js";
							}
							var path = arm_sys_Path.data() + arm_sys_Path.sep + "plugins" + arm_sys_Path.sep + pluginName;
							Krom.fileSaveBytes(path,haxe_io_Bytes.ofString(template).b.bufferValue);
							arm_ui_BoxPreferences.filesPlugin = null;
							arm_ui_UIBox.show = false;
							arm_App.redrawUI();
							arm_ui_BoxPreferences.htab.position = 6;
							arm_ui_BoxPreferences.show();
						}
					}
				});
			}
			if(ui.button(arm_Translator.tr("Import"))) {
				arm_ui_UIFiles.show("js,wasm,zip",false,function(path) {
					arm_io_ImportPlugin.run(path);
				});
			}
			ui.endSticky();
			if(arm_ui_BoxPreferences.filesPlugin == null) {
				arm_ui_BoxPreferences.filesPlugin = arm_sys_File.readDirectory(arm_sys_Path.data() + arm_sys_Path.sep + "plugins");
			}
			if(arm_Config.raw.plugins == null) {
				arm_Config.raw.plugins = [];
			}
			var h2 = zui_Handle.global.nest(63,{ selected : false});
			var _g = 0;
			var _g1 = arm_ui_BoxPreferences.filesPlugin;
			while(_g < _g1.length) {
				var f = [_g1[_g]];
				++_g;
				var isJs = StringTools.endsWith(f[0],".js");
				var isWasm = false;
				if(!isJs && !isWasm) {
					continue;
				}
				var enabled = arm_Config.raw.plugins.indexOf(f[0]) >= 0;
				h2.selected = enabled;
				var tag = isJs ? f[0].split(".")[0] : f[0];
				ui.check(h2,tag);
				if(h2.changed && h2.selected != enabled) {
					if(h2.selected) {
						arm_Config.raw.plugins.push(f[0]);
						arm_Plugin.start(f[0]);
					} else {
						HxOverrides.remove(arm_Config.raw.plugins,f[0]);
						arm_Plugin.stop(f[0]);
					}
					arm_App.redrawUI();
				}
				if(ui.isHovered && ui.inputReleasedR) {
					arm_ui_UIMenu.draw((function(f) {
						return function(ui) {
							ui.text(f[0],2,ui.t.HIGHLIGHT_COL);
							var path = arm_sys_Path.data() + arm_sys_Path.sep + "plugins" + arm_sys_Path.sep + f[0];
							if(ui.button(arm_Translator.tr("Edit in Text Editor"),0)) {
								arm_sys_File.start(path);
							}
							if(ui.button(arm_Translator.tr("Edit in Script Tab"),0)) {
								iron_data_Data.getBlob("plugins/" + f[0],(function(f) {
									return function(blob) {
										arm_ui_TabScript.hscript.text = blob.toString();
										iron_data_Data.deleteBlob("plugins/" + f[0]);
										arm_Log.info("Script opened");
									};
								})(f));
							}
							if(ui.button(arm_Translator.tr("Export"),0)) {
								arm_ui_UIFiles.show("js",true,(function() {
									return function(dest) {
										if(!StringTools.endsWith(arm_ui_UIFiles.filename,".js")) {
											arm_ui_UIFiles.filename += ".js";
										}
										arm_sys_File.copy(path,dest + arm_sys_Path.sep + arm_ui_UIFiles.filename);
									};
								})());
							}
							if(ui.button(arm_Translator.tr("Delete"),0)) {
								if(arm_Config.raw.plugins.indexOf(f[0]) >= 0) {
									HxOverrides.remove(arm_Config.raw.plugins,f[0]);
									arm_Plugin.stop(f[0]);
								}
								HxOverrides.remove(arm_ui_BoxPreferences.filesPlugin,f[0]);
								arm_sys_File.delete(path);
							}
						};
					})(f),5);
				}
			}
		}
	},600,400,function() {
		arm_Config.save();
	});
};
arm_ui_BoxPreferences.fetchThemes = function() {
	arm_ui_BoxPreferences.themes = arm_sys_File.readDirectory(arm_sys_Path.data() + arm_sys_Path.sep + "themes");
	var _g = 0;
	var _g1 = arm_ui_BoxPreferences.themes.length;
	while(_g < _g1) {
		var i = _g++;
		arm_ui_BoxPreferences.themes[i] = HxOverrides.substr(arm_ui_BoxPreferences.themes[i],0,arm_ui_BoxPreferences.themes[i].length - 5);
	}
	arm_ui_BoxPreferences.themes.unshift("default");
};
arm_ui_BoxPreferences.fetchKeymaps = function() {
	arm_ui_BoxPreferences.filesKeymap = arm_sys_File.readDirectory(arm_sys_Path.data() + arm_sys_Path.sep + "keymap_presets");
	var _g = 0;
	var _g1 = arm_ui_BoxPreferences.filesKeymap.length;
	while(_g < _g1) {
		var i = _g++;
		arm_ui_BoxPreferences.filesKeymap[i] = HxOverrides.substr(arm_ui_BoxPreferences.filesKeymap[i],0,arm_ui_BoxPreferences.filesKeymap[i].length - 5);
	}
};
arm_ui_BoxPreferences.getThemeIndex = function() {
	return arm_ui_BoxPreferences.themes.indexOf(HxOverrides.substr(arm_Config.raw.theme,0,arm_Config.raw.theme.length - 5));
};
arm_ui_BoxPreferences.getPresetIndex = function() {
	return arm_ui_BoxPreferences.filesKeymap.indexOf(HxOverrides.substr(arm_Config.raw.keymap,0,arm_Config.raw.keymap.length - 5));
};
arm_ui_BoxPreferences.setScale = function() {
	var scale = arm_Config.raw.window_scale;
	arm_ui_UISidebar.inst.ui.setScale(scale);
	arm_Config.raw.layout[0] = 280 * scale | 0;
	arm_ui_UIToolbar.inst.toolbarw = 36 * scale | 0;
	arm_ui_UIHeader.inst.headerh = 28 * scale | 0;
	arm_Config.raw.layout[6] = 32 * scale | 0;
	arm_ui_UIMenubar.inst.menubarw = 330 * scale | 0;
	arm_ui_UISidebar.inst.setIconScale();
	arm_ui_UINodes.inst.ui.setScale(scale);
	arm_ui_UIView2D.inst.ui.setScale(scale);
	arm_App.uiBox.setScale(scale);
	arm_App.uiMenu.setScale(scale);
	arm_App.resize();
};
arm_ui_BoxPreferences.loadTheme = function(theme) {
	if(theme == "default.json") {
		arm_App.theme = zui_Themes.dark;
	} else {
		iron_data_Data.getBlob("themes/" + theme,function(b) {
			arm_App.theme = JSON.parse(b.toString());
		});
	}
	arm_App.uiBox.t = arm_App.theme;
	arm_ui_UISidebar.inst.ui.t = arm_App.theme;
	arm_ui_UINodes.inst.ui.t = arm_App.theme;
	arm_ui_UIView2D.inst.ui.t = arm_App.theme;
	arm_ui_UISidebar.inst.tagUIRedraw();
};
var arm_ui_TabBrowser = function() { };
$hxClasses["arm.ui.TabBrowser"] = arm_ui_TabBrowser;
arm_ui_TabBrowser.__name__ = "arm.ui.TabBrowser";
arm_ui_TabBrowser.draw = function() {
	var ui = arm_ui_UISidebar.inst.ui;
	var statush = arm_Config.raw.layout[6];
	if(ui.tab(arm_ui_UIStatus.inst.statustab,arm_Translator.tr("Browser")) && statush > 32 * ui.ops.scaleFactor) {
		if(arm_Config.raw.bookmarks == null) {
			arm_Config.raw.bookmarks = [];
		}
		var bookmarksW = 100 * ui.ops.scaleFactor | 0;
		var _y = ui._y;
		ui._x = bookmarksW;
		ui._w -= bookmarksW;
		if(arm_ui_TabBrowser.hpath.text == "" && arm_Config.raw.bookmarks.length > 0) {
			arm_ui_TabBrowser.hpath.text = arm_Config.raw.bookmarks[0];
		}
		var tmp = arm_ui_TabBrowser.hpath;
		var tmp1 = arm_Translator.tr("Path");
		arm_ui_TabBrowser.hpath.text = ui.textInput(tmp,tmp1);
		arm_ui_UIFiles.fileBrowser(ui,arm_ui_TabBrowser.hpath,false,true);
		if(arm_ui_TabBrowser.known) {
			var path = arm_ui_TabBrowser.hpath.text;
			iron_App.notifyOnInit(function() {
				arm_io_ImportAsset.run(path);
			});
			arm_ui_TabBrowser.hpath.text = HxOverrides.substr(arm_ui_TabBrowser.hpath.text,0,arm_ui_TabBrowser.hpath.text.lastIndexOf(arm_sys_Path.sep));
		}
		arm_ui_TabBrowser.known = arm_ui_TabBrowser.hpath.text.indexOf(".") > 0;
		var bottomY = ui._y;
		ui._x = 0;
		ui._y = _y;
		ui._w = bookmarksW;
		if(ui.button("+")) {
			arm_Config.raw.bookmarks.push(arm_ui_TabBrowser.hpath.text);
			arm_Config.save();
		}
		var _g = 0;
		var _g1 = arm_Config.raw.bookmarks;
		while(_g < _g1.length) {
			var b = [_g1[_g]];
			++_g;
			var folder = [HxOverrides.substr(b[0],b[0].lastIndexOf(arm_sys_Path.sep) + 1,null)];
			if(ui.button(folder[0],0)) {
				arm_ui_TabBrowser.hpath.text = b[0];
			}
			if(ui.isHovered && ui.inputReleasedR) {
				arm_ui_UIMenu.draw((function(folder,b) {
					return function(ui) {
						ui.text(folder[0],2,ui.t.HIGHLIGHT_COL);
						if(ui.button(arm_Translator.tr("Delete"),0)) {
							HxOverrides.remove(arm_Config.raw.bookmarks,b[0]);
							arm_Config.save();
						}
					};
				})(folder,b),2);
			}
		}
		ui._y = bottomY;
	}
};
var arm_ui_TabBrushes = function() { };
$hxClasses["arm.ui.TabBrushes"] = arm_ui_TabBrushes;
arm_ui_TabBrushes.__name__ = "arm.ui.TabBrushes";
arm_ui_TabBrushes.draw = function() {
	var ui = arm_ui_UISidebar.inst.ui;
	if(ui.tab(arm_ui_UISidebar.inst.htab1,arm_Translator.tr("Brushes"))) {
		ui.beginSticky();
		ui.row([0.25,0.25,0.25]);
		if(ui.button(arm_Translator.tr("New"))) {
			arm_Context.brush = new arm_data_BrushSlot();
			arm_Project.brushes.push(arm_Context.brush);
			arm_node_MakeMaterial.parseBrush();
			arm_Context.parseBrushInputs();
			arm_ui_UINodes.inst.hwnd.redraws = 2;
		}
		if(ui.button(arm_Translator.tr("Import"))) {
			arm_Project.importBrush();
		}
		if(ui.button(arm_Translator.tr("Nodes"))) {
			arm_ui_UISidebar.inst.showBrushNodes();
		}
		ui.endSticky();
		ui.separator(3,false);
		var num = arm_Config.raw.layout[0] / (51 * ui.ops.scaleFactor | 0) | 0;
		var _g = 0;
		var _g1 = Math.ceil(arm_Project.brushes.length / num) | 0;
		while(_g < _g1) {
			var row = _g++;
			var _g2 = [];
			var _g3 = 0;
			while(_g3 < num) {
				++_g3;
				_g2.push(1 / num);
			}
			ui.row(_g2);
			ui._x += 2;
			if(row > 0) {
				ui._y += 6;
			}
			var _g4 = 0;
			while(_g4 < num) {
				var i = [_g4++ + row * num];
				if(i[0] >= arm_Project.brushes.length) {
					ui.endElement(50 * ui.ops.scaleFactor | 0);
					continue;
				}
				var img = ui.ops.scaleFactor > 1 ? arm_Project.brushes[i[0]].image : arm_Project.brushes[i[0]].imageIcon;
				var imgFull = arm_Project.brushes[i[0]].image;
				if(arm_Context.brush == arm_Project.brushes[i[0]]) {
					var off = row % 2 == 1 ? 1 : 0;
					var w = 50;
					if(arm_Config.raw.window_scale > 1) {
						w = 50 + (arm_Config.raw.window_scale * 2 | 0);
					}
					ui.fill(-1,-2,w + 3,2,ui.t.HIGHLIGHT_COL);
					ui.fill(-1,w - off,w + 3,2 + off,ui.t.HIGHLIGHT_COL);
					ui.fill(-1,-2,2,w + 3,ui.t.HIGHLIGHT_COL);
					ui.fill(w + 1,-2,2,w + 4,ui.t.HIGHLIGHT_COL);
				}
				var tile = ui.ops.scaleFactor > 1 ? 100 : 50;
				if((arm_Project.brushes[i[0]].previewReady ? ui.image(img) : ui.image(arm_Res.bundled.h["icons.k"],-1,null,tile * 5,tile,tile,tile)) == 1) {
					if(arm_Context.brush != arm_Project.brushes[i[0]]) {
						arm_Context.selectBrush(i[0]);
					}
					if(kha_Scheduler.time() - arm_Context.selectTime < 0.25) {
						arm_ui_UISidebar.inst.showBrushNodes();
					}
					arm_Context.selectTime = kha_Scheduler.time();
				}
				if(ui.isHovered && ui.inputReleasedR) {
					var add = arm_Project.brushes.length > 1 ? 1 : 0;
					arm_ui_UIMenu.draw((function(i) {
						return function(ui) {
							ui.text(arm_Project.brushes[i[0]].canvas.name,2,ui.t.HIGHLIGHT_COL);
							if(ui.button(arm_Translator.tr("Export"),0)) {
								arm_Context.selectBrush(i[0]);
								arm_ui_UIFiles.show("arm",true,(function() {
									return function(path) {
										var f = arm_ui_UIFiles.filename;
										if(f == "") {
											f = arm_Translator.tr("untitled");
										}
										arm_io_ExportArm.runBrush(path + arm_sys_Path.sep + f);
									};
								})());
							}
							if(ui.button(arm_Translator.tr("Duplicate"),0)) {
								iron_App.notifyOnInit((function(i) {
									return function() {
										arm_Context.brush = new arm_data_BrushSlot();
										arm_Project.brushes.push(arm_Context.brush);
										var cloned = JSON.parse(JSON.stringify(arm_Project.brushes[i[0]].canvas));
										arm_Context.brush.canvas = cloned;
										arm_Context.setBrush(arm_Context.brush);
										arm_util_RenderUtil.makeBrushPreview();
									};
								})(i));
							}
							if(arm_Project.brushes.length > 1 && ui.button(arm_Translator.tr("Delete"),0)) {
								arm_Context.selectBrush(i[0] == 0 ? 1 : 0);
								arm_Project.brushes.splice(i[0],1);
								arm_ui_UISidebar.inst.hwnd1.redraws = 2;
							}
						};
					})(i),3 + add);
				}
				if(ui.isHovered && imgFull != null) {
					ui.tooltipImage(imgFull);
				}
			}
			ui._y += 6;
		}
	}
};
var arm_ui_TabConsole = function() { };
$hxClasses["arm.ui.TabConsole"] = arm_ui_TabConsole;
arm_ui_TabConsole.__name__ = "arm.ui.TabConsole";
arm_ui_TabConsole.draw = function() {
	var ui = arm_ui_UISidebar.inst.ui;
	var title = arm_Log.messageTimer > 0 ? arm_Log.message + "        " : arm_Translator.tr("Console");
	var statush = arm_Config.raw.layout[6];
	if(ui.tab(arm_ui_UIStatus.inst.statustab,title,false,arm_Log.messageTimer > 0 ? arm_Log.messageColor : -1) && statush > 32 * ui.ops.scaleFactor) {
		ui.beginSticky();
		ui.row([0.05,0.05]);
		if(ui.button(arm_Translator.tr("Clear"))) {
			arm_Log.lastTraces = [];
		}
		if(ui.button(arm_Translator.tr("Export"))) {
			var str = arm_Log.lastTraces.join("\n");
			arm_ui_UIFiles.show("txt",true,function(path) {
				var f = arm_ui_UIFiles.filename;
				if(f == "") {
					f = arm_Translator.tr("untitled");
				}
				path = path + arm_sys_Path.sep + f;
				if(!StringTools.endsWith(path,".txt")) {
					path += ".txt";
				}
				Krom.fileSaveBytes(path,haxe_io_Bytes.ofString(str).b.bufferValue);
			});
		}
		ui.endSticky();
		var _g = 0;
		var _g1 = arm_Log.lastTraces;
		while(_g < _g1.length) ui.text(_g1[_g++]);
	}
};
var arm_ui_TabFonts = function() { };
$hxClasses["arm.ui.TabFonts"] = arm_ui_TabFonts;
arm_ui_TabFonts.__name__ = "arm.ui.TabFonts";
arm_ui_TabFonts.draw = function() {
	var ui = arm_ui_UISidebar.inst.ui;
	if(ui.tab(arm_ui_UISidebar.inst.htab2,arm_Translator.tr("Fonts"))) {
		ui.beginSticky();
		ui.row([0.25,0.25]);
		if(ui.button(arm_Translator.tr("Import"))) {
			arm_Project.importAsset("ttf,ttc,otf");
		}
		if(ui.isHovered) {
			ui.tooltip(arm_Translator.tr("Import font file") + (" (" + Std.string(arm_Config.keymap.file_import_assets) + ")"));
		}
		if(ui.button(arm_Translator.tr("2D View"))) {
			arm_ui_UISidebar.inst.show2DView(2);
		}
		ui.endSticky();
		ui.separator(3,false);
		var num = arm_Config.raw.layout[0] / (51 * ui.ops.scaleFactor | 0) | 0;
		var _g = 0;
		var _g1 = Math.ceil(arm_Project.fonts.length / num) | 0;
		while(_g < _g1) {
			var row = _g++;
			var _g2 = [];
			var _g3 = 0;
			while(_g3 < num) {
				++_g3;
				_g2.push(1 / num);
			}
			ui.row(_g2);
			ui._x += 2;
			if(row > 0) {
				ui._y += 6;
			}
			var _g4 = 0;
			while(_g4 < num) {
				var i = [_g4++ + row * num];
				if(i[0] >= arm_Project.fonts.length) {
					ui.endElement(50 * ui.ops.scaleFactor | 0);
					continue;
				}
				var img = arm_Project.fonts[i[0]].image;
				if(arm_Context.font == arm_Project.fonts[i[0]]) {
					var off = row % 2 == 1 ? 1 : 0;
					var w = 50;
					if(arm_Config.raw.window_scale > 1) {
						w = 50 + (arm_Config.raw.window_scale * 2 | 0);
					}
					ui.fill(-1,-2,w + 3,2,ui.t.HIGHLIGHT_COL);
					ui.fill(-1,w - off,w + 3,2 + off,ui.t.HIGHLIGHT_COL);
					ui.fill(-1,-2,2,w + 3,ui.t.HIGHLIGHT_COL);
					ui.fill(w + 1,-2,2,w + 4,ui.t.HIGHLIGHT_COL);
				}
				var tile = ui.ops.scaleFactor > 1 ? 100 : 50;
				var state = 0;
				if(arm_Project.fonts[i[0]].previewReady) {
					state = ui.image(img);
				} else {
					state = ui.image(arm_Res.bundled.h["icons.k"],-1,null,tile * 6,tile,tile,tile);
				}
				if(state == 1) {
					if(arm_Context.font != arm_Project.fonts[i[0]]) {
						iron_App.notifyOnInit((function(i) {
							return function() {
								arm_Context.selectFont(i[0]);
							};
						})(i));
					}
					if(kha_Scheduler.time() - arm_Context.selectTime < 0.25) {
						arm_ui_UISidebar.inst.show2DView(2);
					}
					arm_Context.selectTime = kha_Scheduler.time();
				}
				if(ui.isHovered && ui.inputReleasedR) {
					var add = arm_Project.fonts.length > 1 ? 1 : 0;
					arm_ui_UIMenu.draw((function(fontName,i) {
						return function(ui) {
							ui.text(fontName[0],2,ui.t.HIGHLIGHT_COL);
							if(arm_Project.fonts.length > 1 && ui.button(arm_Translator.tr("Delete"),0) && arm_Project.fonts[i[0]].file != "") {
								iron_App.notifyOnInit((function(i) {
									return function() {
										arm_Context.selectFont(i[0] == 0 ? 1 : 0);
										iron_data_Data.deleteFont(arm_Project.fonts[i[0]].file);
										arm_Project.fonts.splice(i[0],1);
									};
								})(i));
								arm_ui_UISidebar.inst.hwnd2.redraws = 2;
							}
						};
					})([arm_Project.fonts[i[0]].name],i),1 + add);
				}
				if(ui.isHovered && img != null) {
					ui.tooltipImage(img);
				}
			}
			ui._y += 6;
		}
	}
};
var arm_ui_TabHistory = function() { };
$hxClasses["arm.ui.TabHistory"] = arm_ui_TabHistory;
arm_ui_TabHistory.__name__ = "arm.ui.TabHistory";
arm_ui_TabHistory.draw = function() {
	var ui = arm_ui_UISidebar.inst.ui;
	if(ui.tab(arm_ui_UISidebar.inst.htab0,arm_Translator.tr("History"))) {
		var _g = 0;
		var _g1 = arm_History.steps.length;
		while(_g < _g1) {
			var i = _g++;
			var active = arm_History.steps.length - 1 - arm_History.redos;
			if(i == active) {
				ui.fill(0,0,ui._windowW,ui.t.ELEMENT_H,ui.t.HIGHLIGHT_COL);
			}
			ui.text(arm_History.steps[i].name);
			if(ui.isReleased) {
				var diff = i - active;
				while(diff > 0) {
					--diff;
					arm_History.redo();
				}
				while(diff < 0) {
					++diff;
					arm_History.undo();
				}
			}
		}
	}
};
var arm_ui_TabLayers = function() { };
$hxClasses["arm.ui.TabLayers"] = arm_ui_TabLayers;
arm_ui_TabLayers.__name__ = "arm.ui.TabLayers";
arm_ui_TabLayers.draw = function() {
	var ui = arm_ui_UISidebar.inst.ui;
	if(ui.tab(arm_ui_UISidebar.inst.htab0,arm_Translator.tr("Layers"))) {
		ui.beginSticky();
		ui.row([0.25,0.25,0.5]);
		if(ui.button(arm_Translator.tr("New"))) {
			arm_Layers.newLayer();
			arm_History.newLayer();
		}
		if(ui.button(arm_Translator.tr("2D View"))) {
			arm_ui_UISidebar.inst.show2DView(0);
		} else if(ui.isHovered) {
			ui.tooltip(arm_Translator.tr("Show 2D View") + (" (" + Std.string(arm_Config.keymap.toggle_node_editor) + ")"));
		}
		var ar = [arm_Translator.tr("All")];
		var _g = 0;
		var _g1 = arm_Project.paintObjects;
		while(_g < _g1.length) ar.push(_g1[_g++].name);
		var filterHandle = zui_Handle.global.nest(117,null);
		filterHandle.position = arm_Context.layerFilter;
		arm_Context.layerFilter = ui.combo(filterHandle,ar,arm_Translator.tr("Filter"),false,0,16);
		if(filterHandle.changed) {
			var _g = 0;
			var _g1 = arm_Project.paintObjects;
			while(_g < _g1.length) {
				var p = _g1[_g];
				++_g;
				p.visible = arm_Context.layerFilter == 0 || p.name == ar[arm_Context.layerFilter];
				arm_Layers.setObjectMask();
			}
			arm_util_UVUtil.uvmapCached = false;
			arm_Context.ddirty = 2;
		}
		ui.endSticky();
		var drawList = function(l,i) {
			if(arm_Context.layerFilter > 0 && l.objectMask > 0 && l.objectMask != arm_Context.layerFilter) {
				return;
			}
			if(l.parent != null && !l.parent.show_panel) {
				return;
			}
			var off = ui.t.ELEMENT_OFFSET;
			var step = ui.t.ELEMENT_H;
			var checkw = ui._windowW / 100 * 8 / ui.ops.scaleFactor;
			if(l.show_panel && l.getChildren() == null) {
				ui.fill(checkw,step * 2,ui._windowW / ui.ops.scaleFactor - 2 - checkw,(step + off) * (l.fill_layer != null ? 2 : 1),ui.t.SEPARATOR_COL);
			}
			if(arm_Context.layer == l) {
				if(arm_Context.layerIsMask) {
					ui.rect(ui._windowW / 100 * 24 / ui.ops.scaleFactor + (ui.ops.scaleFactor | 0),0,step * 2,step * 2,ui.t.HIGHLIGHT_COL,2);
				} else {
					ui.fill(checkw,0,ui._windowW / ui.ops.scaleFactor - 2 - checkw,step * 2,ui.t.HIGHLIGHT_COL);
				}
			}
			var mouse = iron_system_Input.getMouse();
			var my = mouse.y;
			if(arm_App.isDragging && arm_App.dragLayer != null && (mouse.x > arm_ui_UISidebar.inst.tabx && my < arm_Config.raw.layout[1])) {
				if(my > ui._y - step && my < ui._y + step) {
					ui.fill(checkw,0,ui._windowW / ui.ops.scaleFactor - 2 - checkw,2 * ui.ops.scaleFactor,ui.t.HIGHLIGHT_COL);
					arm_Context.dragDestination = arm_Project.layers.indexOf(arm_App.dragLayer) < i ? i : i + 1;
				} else if(i == 0 && my > ui._y + step) {
					ui.fill(checkw,step * 2,ui._windowW / ui.ops.scaleFactor - 2 - checkw,2 * ui.ops.scaleFactor,ui.t.HIGHLIGHT_COL);
					arm_Context.dragDestination = 0;
				}
			}
			if(l.texpaint_mask != null) {
				ui.row([0.08,0.16,0.16,0.2,0.3,0.1]);
			} else {
				ui.row([0.08,0.16,0.36,0.3,0.1]);
			}
			var center = step / 2 * ui.ops.scaleFactor;
			ui._y += center;
			var icons = arm_Res.bundled.h["icons.k"];
			var r = arm_Res.tile18(icons,l.visible ? 0 : 1,0);
			ui._x += 2;
			ui._y += 3;
			var col = ui.t.ACCENT_SELECT_COL;
			if(!(l.parent == null || l.parent.visible)) {
				col -= -1728053248;
			}
			if(ui.image(icons,col,null,r.x,r.y,r.w,r.h) == 3) {
				l.visible = !l.visible;
				arm_node_MakeMaterial.parseMeshMaterial();
			}
			ui._x -= 2;
			ui._y -= 3;
			ui._y -= center;
			var contextMenu = false;
			var uix = ui._x;
			var uiy = ui._y;
			ui._x += 2;
			ui._y += 3;
			if(l.parent != null) {
				ui._x += 10 * ui.ops.scaleFactor;
			}
			var state = 0;
			var iconH = (ui.t.ELEMENT_H * ui.ops.scaleFactor - 3) * 2;
			if(l.getChildren() == null) {
				var icon = l.fill_layer == null ? l.texpaint_preview : l.fill_layer.imageIcon;
				if(l.fill_layer == null) {
					var r = arm_Res.tile50(icons,4,1);
					var _x = ui._x;
					var _y = ui._y;
					ui.curRatio--;
					ui.image(icons,-1,iconH,r.x,r.y,r.w,r.h);
					ui._x = _x;
					ui._y = _y;
				}
				state = ui.image(icon,-1,iconH);
			} else {
				var folder = l.show_panel ? arm_Res.tile50(icons,8,1) : arm_Res.tile50(icons,2,1);
				state = ui.image(icons,ui.t.LABEL_COL - 2105376,iconH,folder.x,folder.y,folder.w,folder.h);
			}
			ui._x -= 2;
			ui._y -= 3;
			if(ui.isHovered && l.texpaint_preview != null) {
				ui.tooltipImage(l.texpaint_preview);
			}
			if(ui.isHovered && ui.inputReleasedR) {
				contextMenu = true;
			}
			if(state == 1) {
				arm_Context.setLayer(l);
				if(kha_Scheduler.time() - arm_Context.selectTime < 0.25) {
					arm_ui_UISidebar.inst.show2DView(0);
				}
				arm_Context.selectTime = kha_Scheduler.time();
				var mouse = iron_system_Input.getMouse();
				arm_App.dragOffX = -(mouse.x - uix - ui._windowX - 3);
				arm_App.dragOffY = -(mouse.y - uiy - ui._windowY + 1);
				arm_App.dragLayer = arm_Context.layer;
			}
			if(l.texpaint_mask != null) {
				var uix1 = ui._x;
				var uiy1 = ui._y;
				ui._x += 4 * ui.ops.scaleFactor | 0;
				ui._y += 3;
				var state = 0;
				if(l.fill_mask != null) {
					state = ui.image(l.fill_mask.imageIcon,-1,(ui.t.ELEMENT_H * ui.ops.scaleFactor - 3) * 2);
				} else {
					ui.g.set_pipeline(arm_ui_UIView2D.inst.pipe);
					ui.currentWindow.texture.get_g4().setInt(arm_ui_UIView2D.inst.channelLocation,1);
					state = ui.image(l.texpaint_mask_preview,-1,(ui.t.ELEMENT_H * ui.ops.scaleFactor - 3) * 2);
					ui.g.set_pipeline(null);
				}
				ui._x -= 4 * ui.ops.scaleFactor | 0;
				ui._y -= 3;
				if(ui.isHovered) {
					ui.tooltipImage(l.texpaint_mask_preview);
				}
				if(ui.isHovered && ui.inputReleasedR) {
					arm_ui_UIMenu.draw(function(ui) {
						ui.text("" + l.name + " " + arm_Translator.tr("Mask"),2,ui.t.HIGHLIGHT_COL);
						if(ui.button(arm_Translator.tr("Export"),0)) {
							arm_ui_UIFiles.show("png",true,function(path) {
								var f = arm_ui_UIFiles.filename;
								if(f == "") {
									f = arm_Translator.tr("untitled");
								}
								if(!StringTools.endsWith(f,".png")) {
									f += ".png";
								}
								var out = new haxe_io_BytesOutput();
								new arm_format_PngWriter(out).write(arm_format_PngTools.buildGrey(l.texpaint_mask.get_width(),l.texpaint_mask.get_height(),l.texpaint_mask.getPixels()));
								Krom.fileSaveBytes(path + arm_sys_Path.sep + f,out.getBytes().b.bufferValue);
							});
						}
						if(l.fill_mask == null && ui.button(arm_Translator.tr("To Fill Mask"),0)) {
							iron_App.notifyOnInit(function() {
								arm_History.toFillMask();
								l.toFillMask();
							});
						}
						if(l.fill_mask != null && ui.button(arm_Translator.tr("To Paint Mask"),0)) {
							iron_App.notifyOnInit(function() {
								arm_History.toPaintMask();
								l.toPaintMask();
							});
						}
						if(l.fill_mask != null && ui.button(arm_Translator.tr("Select Material"),0)) {
							arm_Context.setMaterial(l.fill_mask);
						}
						if(ui.button(arm_Translator.tr("Delete"),0)) {
							arm_Context.setLayer(l,true);
							arm_History.deleteMask();
							l.deleteMask();
							arm_Context.setLayer(l,false);
						}
						if(l.fill_mask == null && ui.button(arm_Translator.tr("Clear to Black"),0)) {
							iron_App.notifyOnInit(function() {
								l.clearMask(0);
							});
						}
						if(l.fill_mask == null && ui.button(arm_Translator.tr("Clear to White"),0)) {
							iron_App.notifyOnInit(function() {
								l.clearMask(-1);
							});
						}
						if(l.fill_mask == null && ui.button(arm_Translator.tr("Invert"),0)) {
							iron_App.notifyOnInit(function() {
								l.invertMask();
							});
						}
						if(ui.button(arm_Translator.tr("Apply"),0)) {
							iron_App.notifyOnInit(function() {
								arm_Context.setLayer(l);
								arm_History.applyMask();
								l.applyMask();
								arm_node_MakeMaterial.parseMeshMaterial();
							});
						}
					},6 + (l.fill_mask == null ? 2 : 0));
				}
				if(state == 1) {
					arm_Context.setLayer(l,true);
					if(kha_Scheduler.time() - arm_Context.selectTime < 0.25) {
						arm_ui_UISidebar.inst.show2DView(0);
					}
					arm_Context.selectTime = kha_Scheduler.time();
					var mouse = iron_system_Input.getMouse();
					arm_App.dragOffX = -(mouse.x - uix1 - ui._windowX - 3);
					arm_App.dragOffY = -(mouse.y - uiy1 - ui._windowY + 1);
					arm_App.dragLayer = arm_Context.layer;
				}
			}
			ui._y += center;
			var state = ui.text(l.name);
			ui._y -= center;
			if(l.parent != null) {
				ui._x -= 10 * ui.ops.scaleFactor;
			}
			if(state == 1) {
				arm_Context.setLayer(l);
				if(kha_Scheduler.time() - arm_Context.selectTime < 0.25) {
					arm_ui_UISidebar.inst.show2DView(0);
				}
				arm_Context.selectTime = kha_Scheduler.time();
				var mouse = iron_system_Input.getMouse();
				arm_App.dragOffX = -(mouse.x - uix - ui._windowX - 3);
				arm_App.dragOffY = -(mouse.y - uiy - ui._windowY + 1);
				arm_App.dragLayer = arm_Context.layer;
			}
			if(ui.isHovered && ui.inputReleasedR) {
				contextMenu = true;
			}
			if(contextMenu) {
				var add = l.fill_layer != null ? 1 : 0;
				arm_ui_UIMenu.draw(function(ui) {
					ui.text(l.name,2,ui.t.HIGHLIGHT_COL);
					if(ui.button(arm_Translator.tr("Export"),0)) {
						arm_Context.layersExport = 1;
						arm_ui_BoxExport.showTextures();
					}
					if(l.getChildren() == null && l.fill_layer == null && ui.button(arm_Translator.tr("To Fill Layer"),0)) {
						iron_App.notifyOnInit(function() {
							arm_History.toFillLayer();
							l.toFillLayer();
						});
					}
					if(l.getChildren() == null && l.fill_layer != null && ui.button(arm_Translator.tr("To Paint Layer"),0)) {
						iron_App.notifyOnInit(function() {
							arm_History.toPaintLayer();
							l.toPaintLayer();
						});
					}
					if(l.getChildren() == null && ui.button(arm_Translator.tr("To Group"),0)) {
						if(l.parent == null) {
							var pointers = arm_ui_TabLayers.initLayerMap();
							arm_Context.setLayer(l);
							var group = arm_Layers.newGroup();
							HxOverrides.remove(arm_Project.layers,group);
							arm_Project.layers.splice(arm_Project.layers.indexOf(l) + 1,0,group);
							group.show_panel = true;
							l.parent = group;
							arm_Context.setLayer(l);
							var _g = 0;
							var _g1 = arm_Project.materials;
							while(_g < _g1.length) arm_ui_TabLayers.remapLayerPointers(_g1[_g++].canvas.nodes,arm_ui_TabLayers.fillLayerMap(pointers));
						}
					}
					if(ui.button(arm_Translator.tr("Delete"),0)) {
						if(arm_Project.layers.length > 1) {
							var pointers = arm_ui_TabLayers.initLayerMap();
							arm_Context.layer = l;
							if(l.getChildren() == null) {
								arm_History.deleteLayer();
							} else {
								var _g = 0;
								var _g1 = l.getChildren();
								while(_g < _g1.length) {
									var c = _g1[_g];
									++_g;
									arm_Context.layer = c;
									arm_History.deleteLayer();
									c.delete();
								}
							}
							l.delete();
							if(l.parent != null && l.parent.getChildren() == null) {
								l.parent.delete();
							}
							arm_Context.ddirty = 2;
							var _g = 0;
							var _g1 = arm_Project.materials;
							while(_g < _g1.length) arm_ui_TabLayers.remapLayerPointers(_g1[_g++].canvas.nodes,arm_ui_TabLayers.fillLayerMap(pointers));
						}
					}
					if(ui.button(arm_Translator.tr("Clear"),0)) {
						arm_Context.setLayer(l);
						iron_App.notifyOnInit(function() {
							if(l.getChildren() == null) {
								arm_History.clearLayer();
								l.clearLayer();
							} else {
								var _g = 0;
								var _g1 = l.getChildren();
								while(_g < _g1.length) {
									var c = _g1[_g];
									++_g;
									arm_Context.layer = c;
									arm_History.clearLayer();
									c.clearLayer();
								}
								arm_Context.layer = l;
							}
						});
					}
					if(l.getChildren() != null && ui.button(arm_Translator.tr("Merge Group"),0)) {
						iron_App.notifyOnInit(function() {
							var children = l.getChildren();
							var _g = 0;
							var _g1 = children.length - 1;
							while(_g < _g1) {
								arm_Context.setLayer(children[children.length - 1 - _g++]);
								arm_History.mergeLayers();
								arm_Layers.mergeSelectedLayer();
							}
							children[0].parent = null;
							children[0].name = l.name;
							l.delete();
						});
					}
					if(l.getChildren() == null && ui.button(arm_Translator.tr("Merge Down"),0)) {
						arm_Context.setLayer(l);
						iron_App.notifyOnInit(arm_History.mergeLayers);
						iron_App.notifyOnInit(arm_Layers.mergeSelectedLayer);
					}
					if(ui.button(arm_Translator.tr("Duplicate"),0)) {
						iron_App.notifyOnInit(function() {
							if(l.getChildren() == null) {
								arm_Context.setLayer(l);
								arm_History.duplicateLayer();
								l = l.duplicate();
								arm_Context.setLayer(l);
							} else {
								var group = arm_Layers.newGroup();
								HxOverrides.remove(arm_Project.layers,group);
								arm_Project.layers.splice(arm_Project.layers.indexOf(l) + 1,0,group);
								var _g = 0;
								var _g1 = l.getChildren();
								while(_g < _g1.length) {
									var c = _g1[_g];
									++_g;
									arm_Context.setLayer(c);
									arm_History.duplicateLayer();
									c = c.duplicate();
									c.parent = group;
									HxOverrides.remove(arm_Project.layers,c);
									arm_Project.layers.splice(arm_Project.layers.indexOf(group),0,c);
								}
								arm_Context.setLayer(group);
							}
						});
					}
					if(l.getChildren() == null && ui.button(arm_Translator.tr("Black Mask"),0)) {
						l.createMask(0);
						arm_Context.setLayer(l,true);
						arm_Context.layerPreviewDirty = true;
						arm_History.newMask();
					}
					if(l.getChildren() == null && ui.button(arm_Translator.tr("White Mask"),0)) {
						l.createMask(-1);
						arm_Context.setLayer(l,true);
						arm_Context.layerPreviewDirty = true;
						arm_History.newMask();
					}
					if(l.fill_layer != null && ui.button(arm_Translator.tr("Select Material"),0)) {
						arm_Context.setMaterial(l.fill_layer);
					}
					if(l.getChildren() == null) {
						var baseHandle = zui_Handle.global.nest(118,null).nest(l.id);
						var opacHandle = zui_Handle.global.nest(119,null).nest(l.id);
						var norHandle = zui_Handle.global.nest(120,null).nest(l.id);
						var occHandle = zui_Handle.global.nest(121,null).nest(l.id);
						var roughHandle = zui_Handle.global.nest(122,null).nest(l.id);
						var metHandle = zui_Handle.global.nest(123,null).nest(l.id);
						var heightHandle = zui_Handle.global.nest(124,null).nest(l.id);
						var emisHandle = zui_Handle.global.nest(125,null).nest(l.id);
						var subsHandle = zui_Handle.global.nest(126,null).nest(l.id);
						baseHandle.selected = l.paintBase;
						opacHandle.selected = l.paintOpac;
						norHandle.selected = l.paintNor;
						occHandle.selected = l.paintOcc;
						roughHandle.selected = l.paintRough;
						metHandle.selected = l.paintMet;
						heightHandle.selected = l.paintHeight;
						emisHandle.selected = l.paintEmis;
						subsHandle.selected = l.paintSubs;
						var drawList = arm_Translator.tr("Base Color");
						l.paintBase = ui.check(baseHandle,drawList);
						var drawList = arm_Translator.tr("Opacity");
						l.paintOpac = ui.check(opacHandle,drawList);
						var drawList = arm_Translator.tr("Normal");
						l.paintNor = ui.check(norHandle,drawList);
						var drawList = arm_Translator.tr("Occlusion");
						l.paintOcc = ui.check(occHandle,drawList);
						var drawList = arm_Translator.tr("Roughness");
						l.paintRough = ui.check(roughHandle,drawList);
						var drawList = arm_Translator.tr("Metallic");
						l.paintMet = ui.check(metHandle,drawList);
						var drawList = arm_Translator.tr("Height");
						l.paintHeight = ui.check(heightHandle,drawList);
						var drawList = arm_Translator.tr("Emission");
						l.paintEmis = ui.check(emisHandle,drawList);
						var drawList = arm_Translator.tr("Subsurface");
						l.paintSubs = ui.check(subsHandle,drawList);
						if(baseHandle.changed || opacHandle.changed || norHandle.changed || occHandle.changed || roughHandle.changed || metHandle.changed || heightHandle.changed || emisHandle.changed || subsHandle.changed) {
							arm_node_MakeMaterial.parseMeshMaterial();
							arm_ui_UIMenu.keepOpen = true;
						}
					}
				},l.getChildren() != null ? 6 : 19 + add);
			}
			if(l.getChildren() != null) {
				ui.endElement();
			} else {
				var blendingHandle = zui_Handle.global.nest(127,null).nest(l.id);
				blendingHandle.position = l.blending;
				ui.combo(blendingHandle,[arm_Translator.tr("Mix"),arm_Translator.tr("Darken"),arm_Translator.tr("Multiply"),arm_Translator.tr("Burn"),arm_Translator.tr("Lighten"),arm_Translator.tr("Screen"),arm_Translator.tr("Dodge"),arm_Translator.tr("Add"),arm_Translator.tr("Overlay"),arm_Translator.tr("Soft Light"),arm_Translator.tr("Linear Light"),arm_Translator.tr("Difference"),arm_Translator.tr("Subtract"),arm_Translator.tr("Divide"),arm_Translator.tr("Hue"),arm_Translator.tr("Saturation"),arm_Translator.tr("Color"),arm_Translator.tr("Value")],arm_Translator.tr("Blending"));
				if(blendingHandle.changed) {
					arm_Context.setLayer(l);
					arm_History.layerBlending();
					l.blending = blendingHandle.position;
					arm_node_MakeMaterial.parseMeshMaterial();
				}
			}
			ui._y += center;
			var layerPanel = zui_Handle.global.nest(128,null).nest(l.id);
			layerPanel.selected = l.show_panel;
			l.show_panel = ui.panel(layerPanel,"",true,false,false);
			ui._y -= center;
			if(l.getChildren() != null) {
				ui._y -= ui.t.ELEMENT_OFFSET;
				ui.endElement();
			} else {
				ui._y -= ui.t.ELEMENT_OFFSET;
				ui.row([0.08,0.16,0.36,0.3,0.1]);
				ui.endElement();
				ui.endElement();
				ui.endElement();
				var ar = [arm_Translator.tr("Shared")];
				var _g = 0;
				var _g1 = arm_Project.paintObjects;
				while(_g < _g1.length) ar.push(_g1[_g++].name);
				var objectHandle = zui_Handle.global.nest(129,null).nest(l.id);
				objectHandle.position = l.objectMask == null ? 0 : l.objectMask;
				var ui1 = ui;
				var drawList = arm_Translator.tr("Object");
				l.objectMask = ui1.combo(objectHandle,ar,drawList,false,0,16);
				if(objectHandle.changed) {
					arm_Context.setLayer(l);
					arm_node_MakeMaterial.parseMeshMaterial();
					if(l.fill_layer != null) {
						iron_App.notifyOnInit($bind(l,l.clear));
						iron_App.notifyOnInit(function() {
							arm_Layers.updateFillLayers(4);
						});
					} else {
						arm_Layers.setObjectMask();
					}
				}
				ui.endElement();
			}
			ui._y -= ui.t.ELEMENT_OFFSET;
			if(l.show_panel && l.getChildren() == null) {
				ui.row([0.08,0.3066666666666667,0.3066666666666667,0.3066666666666667]);
				ui.endElement();
				ui._x += 1;
				ui._y += 2;
				var layerOpacHandle = zui_Handle.global.nest(130,null).nest(l.id);
				layerOpacHandle.value = l.maskOpacity;
				ui.slider(layerOpacHandle,arm_Translator.tr("Opacity"),0.0,1.0,true);
				if(layerOpacHandle.changed) {
					arm_Context.setLayer(l);
					if(ui.inputStarted) {
						arm_History.layerOpacity();
					}
					l.maskOpacity = layerOpacHandle.value;
					arm_node_MakeMaterial.parseMeshMaterial();
				}
				ui.combo(arm_App.resHandle,["128","256","512","1K","2K","4K","8K","16K"],arm_Translator.tr("Res"),true);
				if(arm_App.resHandle.changed) {
					iron_App.notifyOnInit(arm_Layers.resizeLayers);
					arm_util_UVUtil.uvmap = null;
					arm_util_UVUtil.uvmapCached = false;
					arm_util_UVUtil.trianglemap = null;
					arm_util_UVUtil.trianglemapCached = false;
				}
				ui.combo(arm_App.bitsHandle,["8bit","16bit","32bit"],arm_Translator.tr("Color"),true);
				if(arm_App.bitsHandle.changed) {
					iron_App.notifyOnInit(arm_Layers.setLayerBits);
				}
				if(l.fill_layer != null) {
					ui.row([0.08,0.3066666666666667,0.3066666666666667,0.3066666666666667]);
					ui.endElement();
					var scaleHandle = zui_Handle.global.nest(131,null).nest(l.id);
					scaleHandle.value = l.scale;
					var ui1 = ui;
					var drawList = arm_Translator.tr("UV Scale");
					l.scale = ui1.slider(scaleHandle,drawList,0.0,5.0,true);
					if(scaleHandle.changed) {
						arm_Context.setMaterial(l.fill_layer);
						arm_Context.setLayer(l);
						iron_App.notifyOnInit(function() {
							arm_Layers.updateFillLayers();
						});
					}
					var angleHandle = zui_Handle.global.nest(132,null).nest(l.id);
					angleHandle.value = l.angle;
					var ui1 = ui;
					var drawList = arm_Translator.tr("Angle");
					l.angle = ui1.slider(angleHandle,drawList,0.0,360,true,1);
					if(angleHandle.changed) {
						arm_Context.setMaterial(l.fill_layer);
						arm_Context.setLayer(l);
						arm_node_MakeMaterial.parsePaintMaterial();
						iron_App.notifyOnInit(function() {
							arm_Layers.updateFillLayers();
						});
					}
					var uvTypeHandle = zui_Handle.global.nest(133,null).nest(l.id);
					uvTypeHandle.position = l.uvType;
					var ui1 = ui;
					var drawList = [arm_Translator.tr("UV Map"),arm_Translator.tr("Triplanar"),arm_Translator.tr("Project")];
					var drawList1 = arm_Translator.tr("TexCoord");
					l.uvType = ui1.combo(uvTypeHandle,drawList,drawList1);
					if(uvTypeHandle.changed) {
						arm_Context.setMaterial(l.fill_layer);
						arm_Context.setLayer(l);
						arm_node_MakeMaterial.parsePaintMaterial();
						iron_App.notifyOnInit(function() {
							arm_Layers.updateFillLayers();
						});
					}
				}
			}
		};
		var _g = 0;
		var _g1 = arm_Project.layers.length;
		while(_g < _g1) {
			var i = _g++;
			if(i >= arm_Project.layers.length) {
				break;
			}
			var j = arm_Project.layers.length - 1 - i;
			drawList(arm_Project.layers[j],j);
		}
	}
};
arm_ui_TabLayers.remapLayerPointers = function(nodes,pointerMap) {
	var _g = 0;
	while(_g < nodes.length) {
		var n = nodes[_g];
		++_g;
		if(n.type == "LAYER" || n.type == "LAYER_MASK") {
			var i = n.buttons[0].default_value;
			if(pointerMap.h.hasOwnProperty(i)) {
				n.buttons[0].default_value = pointerMap.h[i];
			}
		}
	}
};
arm_ui_TabLayers.initLayerMap = function() {
	var res = new haxe_ds_ObjectMap();
	var _g = 0;
	var _g1 = arm_Project.layers.length;
	while(_g < _g1) {
		var i = _g++;
		res.set(arm_Project.layers[i],i);
	}
	return res;
};
arm_ui_TabLayers.fillLayerMap = function(map) {
	var res = new haxe_ds_IntMap();
	var l = map.keys();
	while(l.hasNext()) {
		var l1 = l.next();
		res.h[map.h[l1.__id__]] = arm_Project.layers.indexOf(l1) > -1 ? arm_Project.layers.indexOf(l1) : 9999;
	}
	return res;
};
var arm_ui_TabMaterials = function() { };
$hxClasses["arm.ui.TabMaterials"] = arm_ui_TabMaterials;
arm_ui_TabMaterials.__name__ = "arm.ui.TabMaterials";
arm_ui_TabMaterials.draw = function() {
	var ui = arm_ui_UISidebar.inst.ui;
	var isScene = arm_ui_UIHeader.inst.worktab.position == 3;
	var materials = isScene ? arm_Project.materialsScene : arm_Project.materials;
	var selectMaterial = isScene ? arm_Context.selectMaterialScene : arm_Context.selectMaterial;
	if(ui.tab(arm_ui_UISidebar.inst.htab1,arm_Translator.tr("Materials"))) {
		ui.beginSticky();
		ui.row([0.25,0.25,0.25]);
		if(ui.button(arm_Translator.tr("New"))) {
			if(isScene) {
				if(arm_Context.object != arm_Context.paintObject && ((arm_Context.object) instanceof iron_object_MeshObject)) {
					arm_util_MaterialUtil.removeMaterialCache();
					iron_data_Data.getMaterial("Scene","Material2",function(md) {
						ui.g.end();
						md.name = "Material2." + materials.length;
						arm_Context.materialScene = new arm_data_MaterialSlot(md);
						materials.push(arm_Context.materialScene);
						selectMaterial(materials.length - 1);
						arm_util_RenderUtil.makeMaterialPreview();
						ui.g.begin(false);
					});
				}
			} else {
				ui.g.end();
				arm_Context.material = new arm_data_MaterialSlot(materials[0].data);
				materials.push(arm_Context.material);
				arm_ui_TabMaterials.updateMaterial();
				ui.g.begin(false);
			}
		}
		if(ui.button(arm_Translator.tr("Import"))) {
			arm_Project.importMaterial();
		}
		if(ui.button(arm_Translator.tr("Nodes"))) {
			arm_ui_UISidebar.inst.showMaterialNodes();
		} else if(ui.isHovered) {
			ui.tooltip(arm_Translator.tr("Show Node Editor") + (" (" + Std.string(arm_Config.keymap.toggle_2d_view) + ")"));
		}
		ui.endSticky();
		ui.separator(3,false);
		var slotw = 51 * ui.ops.scaleFactor | 0;
		var num = arm_Config.raw.layout[0] / slotw | 0;
		var _g = 0;
		var _g1 = Math.ceil(materials.length / num) | 0;
		while(_g < _g1) {
			var row = _g++;
			var ui1 = ui;
			var _g2 = [];
			var _g3 = 0;
			var _g4 = num * (arm_Config.raw.show_asset_names ? 2 : 1);
			while(_g3 < _g4) {
				++_g3;
				_g2.push(1 / num);
			}
			ui1.row(_g2);
			ui._x += 2;
			if(row > 0) {
				ui._y += arm_Config.raw.show_asset_names ? ui.t.ELEMENT_OFFSET * ui.ops.scaleFactor * 10.0 : 6;
			}
			var _g5 = 0;
			while(_g5 < num) {
				var i = [_g5++ + row * num];
				if(i[0] >= materials.length) {
					ui.endElement(50 * ui.ops.scaleFactor | 0);
					continue;
				}
				var img = ui.ops.scaleFactor > 1 ? materials[i[0]].image : materials[i[0]].imageIcon;
				var imgFull = materials[i[0]].image;
				if(arm_ui_TabMaterials.getSelectedMaterial() == materials[i[0]]) {
					var off = row % 2 == 1 ? 1 : 0;
					var w = 50;
					if(arm_Config.raw.window_scale > 1) {
						w = 50 + (arm_Config.raw.window_scale * 2 | 0);
					}
					ui.fill(-1,-2,w + 3,2,ui.t.HIGHLIGHT_COL);
					ui.fill(-1,w - off,w + 3,2 + off,ui.t.HIGHLIGHT_COL);
					ui.fill(-1,-2,2,w + 3,ui.t.HIGHLIGHT_COL);
					ui.fill(w + 1,-2,2,w + 4,ui.t.HIGHLIGHT_COL);
				}
				var uix = ui._x;
				var uiy = ui._y;
				var tile = ui.ops.scaleFactor > 1 ? 100 : 50;
				if((materials[i[0]].previewReady ? ui.image(img) : ui.image(arm_Res.bundled.h["icons.k"],-1,null,tile,tile,tile,tile)) == 1 && ui.inputY > ui._windowY) {
					if(arm_ui_TabMaterials.getSelectedMaterial() != materials[i[0]]) {
						selectMaterial(i[0]);
						if(arm_ui_UIHeader.inst.worktab.position == 1) {
							iron_App.notifyOnInit((function() {
								return function() {
									arm_Layers.updateFillLayers(4);
								};
							})());
						}
					}
					var mouse = iron_system_Input.getMouse();
					arm_App.dragOffX = -(mouse.x - uix - ui._windowX - 3);
					arm_App.dragOffY = -(mouse.y - uiy - ui._windowY + 1);
					arm_App.dragMaterial = arm_ui_TabMaterials.getSelectedMaterial();
					if(kha_Scheduler.time() - arm_Context.selectTime < 0.25) {
						arm_ui_UISidebar.inst.showMaterialNodes();
						arm_App.dragMaterial = null;
						arm_App.isDragging = false;
					}
					arm_Context.selectTime = kha_Scheduler.time();
				}
				if(ui.isHovered && ui.inputReleasedR) {
					var add = materials.length > 1 ? 1 : 0;
					arm_ui_UIMenu.draw((function(i) {
						return function(ui) {
							var m = materials[i[0]];
							ui.text(materials[i[0]].canvas.name,2,ui.t.HIGHLIGHT_COL);
							if(ui.button(arm_Translator.tr("To Fill Layer"),0)) {
								selectMaterial(i[0]);
								arm_Layers.createFillLayer();
							}
							if(ui.button(arm_Translator.tr("Export"),0)) {
								selectMaterial(i[0]);
								arm_ui_UIFiles.show("arm",true,(function() {
									return function(path) {
										var f = arm_ui_UIFiles.filename;
										if(f == "") {
											f = arm_Translator.tr("untitled");
										}
										arm_io_ExportArm.runMaterial(path + arm_sys_Path.sep + f);
									};
								})());
							}
							if(ui.button(arm_Translator.tr("Bake"),0)) {
								selectMaterial(i[0]);
								arm_ui_BoxExport.showBakeMaterial();
							}
							if(ui.button(arm_Translator.tr("Duplicate"),0)) {
								iron_App.notifyOnInit((function(i) {
									return function() {
										arm_Context.material = new arm_data_MaterialSlot(materials[0].data);
										materials.push(arm_Context.material);
										var cloned = JSON.parse(JSON.stringify(materials[i[0]].canvas));
										arm_Context.material.canvas = cloned;
										arm_ui_TabMaterials.updateMaterial();
									};
								})(i));
							}
							if(materials.length > 1 && ui.button(arm_Translator.tr("Delete"),0)) {
								selectMaterial(i[0] == 0 ? 1 : 0);
								materials.splice(i[0],1);
								arm_ui_UISidebar.inst.hwnd1.redraws = 2;
								var _g = 0;
								var _g1 = arm_Project.materials;
								while(_g < _g1.length) arm_ui_TabMaterials.updateMaterialPointers(_g1[_g++].canvas.nodes,i[0]);
							}
							var baseHandle = zui_Handle.global.nest(136,null).nest(m.id,{ selected : m.paintBase});
							var opacHandle = zui_Handle.global.nest(137,null).nest(m.id,{ selected : m.paintOpac});
							var norHandle = zui_Handle.global.nest(138,null).nest(m.id,{ selected : m.paintNor});
							var occHandle = zui_Handle.global.nest(139,null).nest(m.id,{ selected : m.paintOcc});
							var roughHandle = zui_Handle.global.nest(140,null).nest(m.id,{ selected : m.paintRough});
							var metHandle = zui_Handle.global.nest(141,null).nest(m.id,{ selected : m.paintMet});
							var heightHandle = zui_Handle.global.nest(142,null).nest(m.id,{ selected : m.paintHeight});
							var emisHandle = zui_Handle.global.nest(143,null).nest(m.id,{ selected : m.paintEmis});
							var subsHandle = zui_Handle.global.nest(144,null).nest(m.id,{ selected : m.paintSubs});
							m.paintBase = ui.check(baseHandle,arm_Translator.tr("Base Color"));
							m.paintOpac = ui.check(opacHandle,arm_Translator.tr("Opacity"));
							m.paintNor = ui.check(norHandle,arm_Translator.tr("Normal"));
							m.paintOcc = ui.check(occHandle,arm_Translator.tr("Occlusion"));
							m.paintRough = ui.check(roughHandle,arm_Translator.tr("Roughness"));
							m.paintMet = ui.check(metHandle,arm_Translator.tr("Metallic"));
							m.paintHeight = ui.check(heightHandle,arm_Translator.tr("Height"));
							m.paintEmis = ui.check(emisHandle,arm_Translator.tr("Emission"));
							m.paintSubs = ui.check(subsHandle,arm_Translator.tr("Subsurface"));
							if(baseHandle.changed || opacHandle.changed || norHandle.changed || occHandle.changed || roughHandle.changed || metHandle.changed || heightHandle.changed || emisHandle.changed || subsHandle.changed) {
								arm_node_MakeMaterial.parsePaintMaterial();
								arm_ui_UIMenu.keepOpen = true;
							}
						};
					})(i),14 + add);
				}
				if(ui.isHovered) {
					ui.tooltipImage(imgFull);
				}
				if(arm_Config.raw.show_asset_names) {
					ui._x = uix;
					ui._y += slotw * 0.9;
					ui.text(materials[i[0]].canvas.name,1);
					ui._y -= slotw * 0.9;
				}
			}
			ui._y += 6;
		}
	}
};
arm_ui_TabMaterials.updateMaterial = function() {
	arm_ui_UIHeader.inst.headerHandle.redraws = 2;
	arm_ui_UINodes.inst.hwnd.redraws = 2;
	arm_node_MakeMaterial.parsePaintMaterial();
	arm_util_RenderUtil.makeMaterialPreview();
	if(arm_Context.tool == 3 || arm_Context.tool == 4) {
		arm_util_RenderUtil.makeDecalPreview();
	}
};
arm_ui_TabMaterials.getSelectedMaterial = function() {
	if(arm_ui_UIHeader.inst.worktab.position == 3) {
		return arm_Context.materialScene;
	} else {
		return arm_Context.material;
	}
};
arm_ui_TabMaterials.updateMaterialPointers = function(nodes,i) {
	var _g = 0;
	while(_g < nodes.length) {
		var n = nodes[_g];
		++_g;
		if(n.type == "MATERIAL") {
			if(n.buttons[0].default_value == i) {
				n.buttons[0].default_value = 9999;
			} else if(n.buttons[0].default_value > i) {
				n.buttons[0].default_value--;
			}
		}
	}
};
var arm_ui_TabMeshes = function() { };
$hxClasses["arm.ui.TabMeshes"] = arm_ui_TabMeshes;
arm_ui_TabMeshes.__name__ = "arm.ui.TabMeshes";
arm_ui_TabMeshes.draw = function() {
	var ui = arm_ui_UISidebar.inst.ui;
	if(ui.tab(arm_ui_UISidebar.inst.htab2,arm_Translator.tr("Meshes"))) {
		ui.beginSticky();
		ui.row([0.25,0.25]);
		if(ui.button(arm_Translator.tr("Import"))) {
			arm_Project.importMesh();
		}
		if(ui.isHovered) {
			ui.tooltip(arm_Translator.tr("Import mesh file") + (" (" + Std.string(arm_Config.keymap.file_import_assets) + ")"));
		}
		if(ui.button(arm_Translator.tr("Tools..."))) {
			arm_ui_UIMenu.draw(function(ui) {
				ui.text(arm_Translator.tr("Tools"),2,ui.t.HIGHLIGHT_COL);
				if(ui.button(arm_Translator.tr("Flip Normals"),0)) {
					arm_util_MeshUtil.flipNormals();
					arm_Context.ddirty = 2;
				}
				if(ui.button(arm_Translator.tr("Calculate Normals"),0)) {
					arm_util_MeshUtil.calcNormals();
					arm_Context.ddirty = 2;
				}
				if(ui.button(arm_Translator.tr("Rotate X"),0)) {
					arm_util_MeshUtil.swapAxis(1,2);
					arm_Context.ddirty = 2;
				}
				if(ui.button(arm_Translator.tr("Rotate Y"),0)) {
					arm_util_MeshUtil.swapAxis(2,0);
					arm_Context.ddirty = 2;
				}
				if(ui.button(arm_Translator.tr("Rotate Z"),0)) {
					arm_util_MeshUtil.swapAxis(0,1);
					arm_Context.ddirty = 2;
				}
			},6);
		}
		ui.endSticky();
		if(ui.panel(zui_Handle.global.nest(156,{ selected : false}),arm_Translator.tr("Scene"),true,false,false)) {
			ui.indent();
			var _g = 0;
			var _g1 = arm_Project.paintObjects;
			while(_g < _g1.length) ui.text(_g1[_g++].name);
			ui.unindent();
		}
	}
};
var arm_ui_TabOutliner = function() { };
$hxClasses["arm.ui.TabOutliner"] = arm_ui_TabOutliner;
arm_ui_TabOutliner.__name__ = "arm.ui.TabOutliner";
arm_ui_TabOutliner.draw = function() {
	var ui = arm_ui_UISidebar.inst.ui;
	if(ui.tab(arm_ui_UISidebar.inst.htab0,arm_Translator.tr("Outliner"))) {
		ui.row([0.25]);
		if(ui.button(arm_Translator.tr("Import"))) {
			arm_Project.importMesh();
		}
		var i = 0;
		var drawList = null;
		drawList = function(h,o) {
			if(o.name.charAt(0) == ".") {
				return;
			}
			if(((o) instanceof iron_object_MeshObject) && (js_Boot.__cast(o , iron_object_MeshObject)).force_context != null) {
				return;
			}
			var b = false;
			if(i % 2 == 0) {
				ui.fill(-ui._x,0,ui._windowW,ui.t.ELEMENT_H,ui.t.WINDOW_BG_COL - 263172);
			}
			if(arm_Context.object == o) {
				ui.fill(-ui._x,0,ui._windowW,ui.t.ELEMENT_H,ui.t.HIGHLIGHT_COL);
			}
			if(o.children.length > 0) {
				ui.row([0.076923076923076927,0.92307692307692313]);
				b = ui.panel(h.nest(i,{ selected : true}),"",true,false,false);
				ui.text(o.name);
			} else {
				ui._x += 18;
				ui.fill(-15 / ui.ops.scaleFactor,ui.t.ELEMENT_H / 2,15,1,ui.t.ACCENT_COL);
				ui.text(o.name);
				ui._x -= 18;
			}
			if(ui.isReleased) {
				arm_Context.selectObject(o);
				arm_Context.ddirty = 2;
				arm_ui_UISidebar.inst.hwnd1.redraws = 2;
			}
			i += 1;
			if(b) {
				var currentY = ui._y;
				var _g = 0;
				var _g1 = o.children;
				while(_g < _g1.length) {
					var c = _g1[_g++];
					ui.indent();
					drawList(h,c);
					ui.unindent();
				}
				var h = (ui._y - currentY - ui.t.ELEMENT_H * ui.ops.scaleFactor / 2) / ui.ops.scaleFactor;
				ui.fill(15,-h - ui.t.ELEMENT_H / 2,1,h,ui.t.ACCENT_COL);
			}
		};
		var _ELEMENT_OFFSET = ui.t.ELEMENT_OFFSET;
		ui.t.ELEMENT_OFFSET = 0;
		var _g = 0;
		var _g1 = iron_Scene.active.root.children;
		while(_g < _g1.length) {
			var c = _g1[_g++];
			drawList(zui_Handle.global.nest(134,null),c);
		}
		ui.t.ELEMENT_OFFSET = _ELEMENT_OFFSET;
	}
};
var arm_ui_TabParticles = function() { };
$hxClasses["arm.ui.TabParticles"] = arm_ui_TabParticles;
arm_ui_TabParticles.__name__ = "arm.ui.TabParticles";
arm_ui_TabParticles.draw = function() {
	var ui = arm_ui_UISidebar.inst.ui;
	if(ui.tab(arm_ui_UISidebar.inst.htab1,arm_Translator.tr("Particles"))) {
		ui.beginSticky();
		ui.row([0.25,0.25,0.25]);
		ui.button(arm_Translator.tr("New"));
		ui.button(arm_Translator.tr("Import"));
		ui.button(arm_Translator.tr("Nodes"));
		ui.endSticky();
	}
};
var arm_ui_TabPlugins = function() { };
$hxClasses["arm.ui.TabPlugins"] = arm_ui_TabPlugins;
arm_ui_TabPlugins.__name__ = "arm.ui.TabPlugins";
arm_ui_TabPlugins.draw = function() {
	var ui = arm_ui_UISidebar.inst.ui;
	if(ui.tab(arm_ui_UISidebar.inst.htab0,arm_Translator.tr("Plugins"))) {
		ui.beginSticky();
		ui.row([0.25]);
		if(ui.button(arm_Translator.tr("Manager"))) {
			arm_ui_BoxPreferences.htab.position = 6;
			arm_ui_BoxPreferences.show();
		}
		ui.endSticky();
		var p = haxe_ds_StringMap.valueIterator(arm_Plugin.plugins.h);
		while(p.hasNext()) {
			var p1 = p.next();
			if(p1.drawUI != null) {
				p1.drawUI(ui);
			}
		}
	}
};
var arm_ui_TabProperties = function() { };
$hxClasses["arm.ui.TabProperties"] = arm_ui_TabProperties;
arm_ui_TabProperties.__name__ = "arm.ui.TabProperties";
arm_ui_TabProperties.draw = function() {
	var ui = arm_ui_UISidebar.inst.ui;
	if(ui.tab(arm_ui_UISidebar.inst.htab1,arm_Translator.tr("Properties"))) {
		if(arm_Context.object != null) {
			var h = zui_Handle.global.nest(145,null);
			h.selected = arm_Context.object.visible;
			var tmp = arm_Translator.tr("Visible");
			arm_Context.object.visible = ui.check(h,tmp);
			if(h.changed) {
				arm_Context.ddirty = 2;
			}
			var loc = arm_Context.object.transform.loc;
			var scale = arm_Context.object.transform.scale;
			var _this = arm_Context.object.transform.rot;
			var x = Math.atan2(-2 * (_this.y * _this.z - _this.w * _this.x),_this.w * _this.w - _this.x * _this.x + _this.y * _this.y - _this.z * _this.z);
			var y = Math.atan2(-2 * (_this.x * _this.z - _this.w * _this.y),_this.w * _this.w + _this.x * _this.x - _this.y * _this.y - _this.z * _this.z);
			var z = Math.asin(2 * (_this.x * _this.y + _this.w * _this.z));
			if(z == null) {
				z = 0.0;
			}
			if(y == null) {
				y = 0.0;
			}
			if(x == null) {
				x = 0.0;
			}
			var rot_x = x;
			var rot_y = y;
			var rot_z = z;
			rot_x *= 57.29579143313326;
			rot_y *= 57.29579143313326;
			rot_z *= 57.29579143313326;
			var f = 0.0;
			ui.changed = false;
			ui.row(arm_ui_TabProperties.row4);
			ui.text(arm_Translator.tr("Location"));
			h = zui_Handle.global.nest(146,null);
			h.text = arm_ui_TabProperties.roundfp(loc.x) + "";
			f = parseFloat(ui.textInput(h,"X"));
			if(h.changed) {
				loc.x = f;
				arm_Context.ddirty = 2;
			}
			h = zui_Handle.global.nest(147,null);
			h.text = arm_ui_TabProperties.roundfp(loc.y) + "";
			f = parseFloat(ui.textInput(h,"Y"));
			if(h.changed) {
				loc.y = f;
				arm_Context.ddirty = 2;
			}
			h = zui_Handle.global.nest(148,null);
			h.text = arm_ui_TabProperties.roundfp(loc.z) + "";
			f = parseFloat(ui.textInput(h,"Z"));
			if(h.changed) {
				loc.z = f;
				arm_Context.ddirty = 2;
			}
			ui.row(arm_ui_TabProperties.row4);
			ui.text(arm_Translator.tr("Rotation"));
			h = zui_Handle.global.nest(149,null);
			h.text = arm_ui_TabProperties.roundfp(rot_x) + "";
			f = parseFloat(ui.textInput(h,"X"));
			if(h.changed) {
				rot_x = f;
				arm_Context.ddirty = 2;
			}
			h = zui_Handle.global.nest(150,null);
			h.text = arm_ui_TabProperties.roundfp(rot_y) + "";
			f = parseFloat(ui.textInput(h,"Y"));
			if(h.changed) {
				rot_y = f;
				arm_Context.ddirty = 2;
			}
			h = zui_Handle.global.nest(151,null);
			h.text = arm_ui_TabProperties.roundfp(rot_z) + "";
			f = parseFloat(ui.textInput(h,"Z"));
			if(h.changed) {
				rot_z = f;
				arm_Context.ddirty = 2;
			}
			if(ui.changed && arm_Context.object.name != "Scene") {
				rot_x *= 0.01745328888888889;
				rot_y *= 0.01745328888888889;
				rot_z *= 0.01745328888888889;
				var _this = arm_Context.object.transform.rot;
				var f1 = rot_x / 2;
				var c1 = Math.cos(f1);
				var s1 = Math.sin(f1);
				f1 = rot_y / 2;
				var c2 = Math.cos(f1);
				var s2 = Math.sin(f1);
				f1 = rot_z / 2;
				var c3 = Math.cos(f1);
				var s3 = Math.sin(f1);
				_this.x = s1 * c2 * c3 + c1 * s2 * s3;
				_this.y = c1 * s2 * c3 + s1 * c2 * s3;
				_this.z = c1 * c2 * s3 - s1 * s2 * c3;
				_this.w = c1 * c2 * c3 - s1 * s2 * s3;
				arm_Context.object.transform.buildMatrix();
			}
			ui.row(arm_ui_TabProperties.row4);
			ui.text(arm_Translator.tr("Scale"));
			h = zui_Handle.global.nest(152,null);
			h.text = arm_ui_TabProperties.roundfp(scale.x) + "";
			f = parseFloat(ui.textInput(h,"X"));
			if(h.changed) {
				scale.x = f;
				arm_Context.ddirty = 2;
			}
			h = zui_Handle.global.nest(153,null);
			h.text = arm_ui_TabProperties.roundfp(scale.y) + "";
			f = parseFloat(ui.textInput(h,"Y"));
			if(h.changed) {
				scale.y = f;
				arm_Context.ddirty = 2;
			}
			h = zui_Handle.global.nest(154,null);
			h.text = arm_ui_TabProperties.roundfp(scale.z) + "";
			f = parseFloat(ui.textInput(h,"Z"));
			if(h.changed) {
				scale.z = f;
				arm_Context.ddirty = 2;
			}
			arm_Context.object.transform.dirty = true;
		}
	}
};
arm_ui_TabProperties.roundfp = function(f,precision) {
	if(precision == null) {
		precision = 2;
	}
	f *= Math.pow(10,precision);
	return Math.round(f) / Math.pow(10,precision);
};
var arm_ui_TabScript = function() { };
$hxClasses["arm.ui.TabScript"] = arm_ui_TabScript;
arm_ui_TabScript.__name__ = "arm.ui.TabScript";
arm_ui_TabScript.draw = function() {
	var ui = arm_ui_UISidebar.inst.ui;
	var statush = arm_Config.raw.layout[6];
	if(ui.tab(arm_ui_UIStatus.inst.statustab,arm_Translator.tr("Script")) && statush > 32 * ui.ops.scaleFactor) {
		ui.beginSticky();
		ui.row([0.05,0.05,0.05,0.05]);
		if(ui.button(arm_Translator.tr("Run"))) {
			try {
				eval(arm_ui_TabScript.hscript.text);
			} catch( _g ) {
				var e = haxe_Exception.caught(_g).unwrap();
				arm_Log.trace(e);
			}
		}
		if(ui.button(arm_Translator.tr("Clear"))) {
			arm_ui_TabScript.hscript.text = "";
		}
		if(ui.button(arm_Translator.tr("Import"))) {
			arm_ui_UIFiles.show("js",false,function(path) {
				iron_data_Data.getBlob(path,function(b) {
					arm_ui_TabScript.hscript.text = b.toString();
					iron_data_Data.deleteBlob(path);
				});
			});
		}
		if(ui.button(arm_Translator.tr("Export"))) {
			var str = arm_ui_TabScript.hscript.text;
			arm_ui_UIFiles.show("js",true,function(path) {
				var f = arm_ui_UIFiles.filename;
				if(f == "") {
					f = arm_Translator.tr("untitled");
				}
				path = path + arm_sys_Path.sep + f;
				if(!StringTools.endsWith(path,".js")) {
					path += ".js";
				}
				Krom.fileSaveBytes(path,haxe_io_Bytes.ofString(str).b.bufferValue);
			});
		}
		ui.endSticky();
		var _font = ui.ops.font;
		var _fontSize = ui.fontSize;
		iron_data_Data.getFont("font_mono.ttf",function(f) {
			ui.ops.font = f;
		});
		ui.fontSize = 15;
		zui_Ext.textArea(ui,arm_ui_TabScript.hscript);
		ui.ops.font = _font;
		ui.fontSize = _fontSize;
	}
};
var arm_ui_TabTextures = function() { };
$hxClasses["arm.ui.TabTextures"] = arm_ui_TabTextures;
arm_ui_TabTextures.__name__ = "arm.ui.TabTextures";
arm_ui_TabTextures.draw = function() {
	var ui = arm_ui_UISidebar.inst.ui;
	if(ui.tab(arm_ui_UISidebar.inst.htab2,arm_Translator.tr("Textures"))) {
		ui.beginSticky();
		ui.row([0.25,0.25]);
		if(ui.button(arm_Translator.tr("Import"))) {
			arm_ui_UIFiles.show(arm_sys_Path.textureFormats.join(","),false,function(path) {
				arm_io_ImportAsset.run(path);
			});
		}
		if(ui.isHovered) {
			ui.tooltip(arm_Translator.tr("Import texture file") + (" (" + Std.string(arm_Config.keymap.file_import_assets) + ")"));
		}
		if(ui.button(arm_Translator.tr("2D View"))) {
			arm_ui_UISidebar.inst.show2DView(1);
		}
		ui.endSticky();
		if(arm_Project.assets.length > 0) {
			var slotw = 51 * ui.ops.scaleFactor | 0;
			var num = arm_Config.raw.layout[0] / slotw | 0;
			var _g = 0;
			var _g1 = Math.ceil(arm_Project.assets.length / num) | 0;
			while(_g < _g1) {
				var row = _g++;
				var _g2 = [];
				var _g3 = 0;
				while(_g3 < num) {
					++_g3;
					_g2.push(1 / num);
				}
				ui.row(_g2);
				ui._x += 2;
				if(row > 0) {
					ui._y += 6;
				}
				var _g4 = 0;
				while(_g4 < num) {
					var i = [_g4++ + row * num];
					if(i[0] >= arm_Project.assets.length) {
						ui.endElement(50 * ui.ops.scaleFactor | 0);
						continue;
					}
					var asset = [arm_Project.assets[i[0]]];
					var img = [arm_Project.getImage(asset[0])];
					var uix = ui._x;
					var uiy = ui._y;
					var sw = img[0].get_height() < img[0].get_width() ? img[0].get_height() : 0;
					if(ui.image(img[0],-1,slotw,0,0,sw,sw) == 1 && ui.inputY > ui._windowY) {
						var mouse = iron_system_Input.getMouse();
						arm_App.dragOffX = -(mouse.x - uix - ui._windowX - 3);
						arm_App.dragOffY = -(mouse.y - uiy - ui._windowY + 1);
						arm_App.dragAsset = asset[0];
						arm_Context.texture = asset[0];
						if(kha_Scheduler.time() - arm_Context.selectTime < 0.25) {
							arm_ui_UISidebar.inst.show2DView(1);
						}
						arm_Context.selectTime = kha_Scheduler.time();
						arm_ui_UIView2D.inst.hwnd.redraws = 2;
					}
					var _uix = ui._x;
					var _uiy = ui._y;
					ui._x = uix;
					ui._y = uiy;
					if(asset[0] == arm_Context.texture) {
						var off = i[0] % 2 == 1 ? 1 : 0;
						ui.fill(0,0,53,2,ui.t.HIGHLIGHT_COL);
						ui.fill(0,50 - off + 2,53,2 + off,ui.t.HIGHLIGHT_COL);
						ui.fill(0,0,2,53,ui.t.HIGHLIGHT_COL);
						ui.fill(52,0,2,54,ui.t.HIGHLIGHT_COL);
					}
					ui._x = _uix;
					ui._y = _uiy;
					if(i[0] % num == num - 1) {
						ui._y = uiy + slotw;
					}
					if(ui.isHovered) {
						ui.tooltipImage(img[0],256);
					}
					if(ui.isHovered && ui.inputReleasedR) {
						arm_ui_UIMenu.draw((function(img,asset,i) {
							return function(ui) {
								ui.text(asset[0].name,2,ui.t.HIGHLIGHT_COL);
								if(ui.button(arm_Translator.tr("Export"),0)) {
									arm_ui_UIFiles.show("png",true,(function(img) {
										return function(path) {
											var target = kha_Image.createRenderTarget(img[0].get_width(),img[0].get_height());
											iron_App.notifyOnInit((function(img) {
												return function() {
													if(arm_Layers.pipeMerge == null) {
														arm_Layers.makePipe();
													}
													target.get_g2().begin(false);
													target.get_g2().set_pipeline(arm_Layers.pipeCopy);
													target.get_g2().drawImage(img[0],0,0);
													target.get_g2().set_pipeline(null);
													target.get_g2().end();
													var f = arm_ui_UIFiles.filename;
													if(f == "") {
														f = arm_Translator.tr("untitled");
													}
													if(!StringTools.endsWith(f,".png")) {
														f += ".png";
													}
													var out = new haxe_io_BytesOutput();
													new arm_format_PngWriter(out).write(arm_format_PngTools.build32RGB1(target.get_width(),target.get_height(),target.getPixels()));
													Krom.fileSaveBytes(path + arm_sys_Path.sep + f,out.getBytes().b.bufferValue);
												};
											})(img));
										};
									})(img));
								}
								if(ui.button(arm_Translator.tr("Reimport"),0)) {
									iron_data_Data.deleteImage(asset[0].file);
									iron_data_Data.getImage(asset[0].file,(function(asset) {
										return function(image) {
											arm_Project.assetMap.h[asset[0].id] = image;
											if(StringTools.endsWith(asset[0].file.toLowerCase(),".hdr")) {
												arm_App.notifyOnNextFrame((function(asset) {
													return function() {
														arm_io_ImportEnvmap.run(asset[0].file,image);
													};
												})(asset));
											}
										};
									})(asset));
								}
								if(ui.button(arm_Translator.tr("To Mask"),0)) {
									arm_Layers.createImageMask(asset[0]);
								}
								if(ui.button(arm_Translator.tr("Delete"),0)) {
									arm_ui_UISidebar.inst.hwnd2.redraws = 2;
									iron_data_Data.deleteImage(asset[0].file);
									arm_Project.assetMap.remove(asset[0].id);
									arm_Project.assets.splice(i[0],1);
									arm_Project.assetNames.splice(i[0],1);
									iron_App.notifyOnInit((function() {
										return function() {
											arm_node_MakeMaterial.parsePaintMaterial();
											arm_util_RenderUtil.makeMaterialPreview();
											arm_ui_UISidebar.inst.hwnd1.redraws = 2;
										};
									})());
									var _g = 0;
									var _g1 = arm_Project.materials;
									while(_g < _g1.length) arm_ui_TabTextures.updateTexturePointers(_g1[_g++].canvas.nodes,i[0]);
									var _g = 0;
									var _g1 = arm_Project.brushes;
									while(_g < _g1.length) arm_ui_TabTextures.updateTexturePointers(_g1[_g++].canvas.nodes,i[0]);
								}
							};
						})(img,asset,i),5);
					}
				}
			}
		} else {
			var img1 = arm_Res.bundled.h["icons.k"];
			var r = arm_Res.tile50(img1,0,1);
			ui.image(img1,ui.t.BUTTON_COL,r.h,r.x,r.y,r.w,r.h);
			if(ui.isHovered) {
				ui.tooltip(arm_Translator.tr("Drag and drop files here"));
			}
		}
	}
};
arm_ui_TabTextures.updateTexturePointers = function(nodes,i) {
	var _g = 0;
	while(_g < nodes.length) {
		var n = nodes[_g];
		++_g;
		if(n.type == "TEX_IMAGE") {
			if(n.buttons[0].default_value == i) {
				n.buttons[0].default_value = 9999;
			} else if(n.buttons[0].default_value > i) {
				n.buttons[0].default_value--;
			}
		}
	}
};
var arm_ui_UIBox = function() { };
$hxClasses["arm.ui.UIBox"] = arm_ui_UIBox;
arm_ui_UIBox.__name__ = "arm.ui.UIBox";
arm_ui_UIBox.render = function(g) {
	g.end();
	var ui = arm_App.uiBox;
	var appw = kha_System.windowWidth();
	var apph = kha_System.windowHeight();
	var mw = arm_ui_UIBox.modalW * ui.ops.scaleFactor | 0;
	var mh = arm_ui_UIBox.modalH * ui.ops.scaleFactor | 0;
	var left = appw / 2 - mw / 2 | 0;
	var top = apph / 2 - mh / 2 | 0;
	if(arm_ui_UIBox.boxCommands == null) {
		ui.begin(g);
		if(ui.window(arm_ui_UIBox.hwnd,left,top,mw,mh,true)) {
			ui._y += 10;
			if(ui.tab(zui_Handle.global.nest(1,null),arm_ui_UIBox.boxTitle)) {
				if(arm_ui_UIBox.copyable) {
					zui_Ext.textArea(ui,zui_Handle.global.nest(2,{ text : arm_ui_UIBox.boxText}),null,false);
				} else {
					ui.text(arm_ui_UIBox.boxText);
				}
				ui.endElement();
				ui.row([0.66666666666666663,0.33333333333333331]);
				ui.endElement();
				if(ui.button(arm_Translator.tr("OK"))) {
					arm_ui_UIBox.show = false;
					arm_App.redrawUI();
				}
			}
		}
		ui.end();
	} else {
		ui.begin(g);
		if(ui.window(arm_ui_UIBox.hwnd,left,top,mw,mh,true)) {
			ui._y += 10;
			arm_ui_UIBox.boxCommands(ui);
		}
		ui.end();
	}
	g.begin(false);
	arm_ui_UIBox.draws++;
};
arm_ui_UIBox.update = function() {
	if(arm_ui_UIMenu.show) {
		return;
	}
	var mouse = iron_system_Input.getMouse();
	var kb = iron_system_Input.getKeyboard();
	var ui = arm_App.uiBox;
	var inUse = ui.comboSelectedHandle != null;
	var isEscape = kb.started("escape");
	if(arm_ui_UIBox.draws > 2 && (ui.inputReleased || isEscape) && !inUse && !ui.isTyping) {
		var appw = kha_System.windowWidth();
		var apph = kha_System.windowHeight();
		var mw = arm_ui_UIBox.modalW * ui.ops.scaleFactor | 0;
		var mh = arm_ui_UIBox.modalH * ui.ops.scaleFactor | 0;
		var mx = mouse.x;
		var my = mouse.y;
		if(arm_ui_UIBox.clickToHide && (mx < appw / 2 - mw / 2 + arm_ui_UIBox.hwnd.dragX || mx > appw / 2 + mw / 2 + arm_ui_UIBox.hwnd.dragX || my < apph / 2 - mh / 2 + arm_ui_UIBox.hwnd.dragY || my > apph / 2 + mh / 2 + arm_ui_UIBox.hwnd.dragY) || isEscape) {
			if(arm_ui_UIBox.modalOnHide != null) {
				arm_ui_UIBox.modalOnHide();
			}
			arm_ui_UIBox.show = false;
			arm_App.redrawUI();
		}
	}
};
arm_ui_UIBox.showMessage = function(title,text,copyable) {
	if(copyable == null) {
		copyable = false;
	}
	arm_ui_UIBox.init();
	arm_ui_UIBox.modalW = 400;
	arm_ui_UIBox.modalH = 210;
	arm_ui_UIBox.boxTitle = title;
	arm_ui_UIBox.boxText = text;
	arm_ui_UIBox.boxCommands = null;
	arm_ui_UIBox.copyable = copyable;
};
arm_ui_UIBox.showCustom = function(commands,mw,mh,onHide) {
	if(mh == null) {
		mh = 200;
	}
	if(mw == null) {
		mw = 400;
	}
	arm_ui_UIBox.init();
	arm_ui_UIBox.modalW = mw;
	arm_ui_UIBox.modalH = mh;
	arm_ui_UIBox.modalOnHide = onHide;
	arm_ui_UIBox.boxCommands = commands;
};
arm_ui_UIBox.init = function() {
	arm_ui_UIBox.hwnd.redraws = 2;
	arm_ui_UIBox.hwnd.dragX = 0;
	arm_ui_UIBox.hwnd.dragY = 0;
	arm_ui_UIBox.show = true;
	arm_ui_UIBox.draws = 0;
	arm_ui_UIBox.clickToHide = true;
};
var arm_ui_UIHeader = function() {
	this.worktab = zui_Handle.global.nest(8,null);
	this.headerh = 28;
	this.headerHandle = new zui_Handle({ layout : 1});
	arm_ui_UIHeader.inst = this;
};
$hxClasses["arm.ui.UIHeader"] = arm_ui_UIHeader;
arm_ui_UIHeader.__name__ = "arm.ui.UIHeader";
arm_ui_UIHeader.prototype = {
	renderUI: function(g) {
		var ui = arm_ui_UISidebar.inst.ui;
		var panelx = arm_App.x();
		if(ui.window(this.headerHandle,panelx,this.headerh,kha_System.windowWidth() - arm_ui_UIToolbar.inst.toolbarw - arm_Config.raw.layout[0],28 * ui.ops.scaleFactor | 0)) {
			ui._y += 2;
			if(arm_Context.tool == 8) {
				ui.text(arm_Translator.tr("Picked Color"));
				if(arm_Context.colorIdPicked) {
					ui.image(iron_RenderPath.active.renderTargets.h["texpaint_colorid"].image,-1,64);
				}
				if(ui.button(arm_Translator.tr("Clear"))) {
					arm_Context.colorIdPicked = false;
				}
				ui.text(arm_Translator.tr("Color ID Map"));
				var cid = ui.combo(arm_Context.colorIdHandle,arm_App.enumTexts("TEX_IMAGE"),arm_Translator.tr("Color ID"));
				if(arm_Context.colorIdHandle.changed) {
					arm_Context.ddirty = 2;
				}
				if(arm_Project.assets.length > 0) {
					ui.image(arm_Project.getImage(arm_Project.assets[cid]));
				}
			} else if(arm_Context.tool == 9) {
				arm_Context.baseRPicked = Math.round(arm_Context.baseRPicked * 10) / 10;
				arm_Context.baseGPicked = Math.round(arm_Context.baseGPicked * 10) / 10;
				arm_Context.baseBPicked = Math.round(arm_Context.baseBPicked * 10) / 10;
				arm_Context.normalRPicked = Math.round(arm_Context.normalRPicked * 10) / 10;
				arm_Context.normalGPicked = Math.round(arm_Context.normalGPicked * 10) / 10;
				arm_Context.normalBPicked = Math.round(arm_Context.normalBPicked * 10) / 10;
				arm_Context.occlusionPicked = Math.round(arm_Context.occlusionPicked * 100) / 100;
				arm_Context.roughnessPicked = Math.round(arm_Context.roughnessPicked * 100) / 100;
				arm_Context.metallicPicked = Math.round(arm_Context.metallicPicked * 100) / 100;
				var baseRPicked = arm_Context.baseRPicked;
				var baseGPicked = arm_Context.baseGPicked;
				var baseBPicked = arm_Context.baseBPicked;
				var normalRPicked = arm_Context.normalRPicked;
				var normalGPicked = arm_Context.normalGPicked;
				var normalBPicked = arm_Context.normalBPicked;
				var occlusionPicked = arm_Context.occlusionPicked;
				var roughnessPicked = arm_Context.roughnessPicked;
				var metallicPicked = arm_Context.metallicPicked;
				ui.text(arm_Translator.tr("Base") + (" " + baseRPicked + "," + baseGPicked + "," + baseBPicked));
				ui.text(arm_Translator.tr("Nor") + (" " + normalRPicked + "," + normalGPicked + "," + normalBPicked));
				ui.text(arm_Translator.tr("Occlusion") + (" " + occlusionPicked));
				ui.text(arm_Translator.tr("Roughness") + (" " + roughnessPicked));
				ui.text(arm_Translator.tr("Metallic") + (" " + metallicPicked));
				arm_Context.pickerSelectMaterial = ui.check(zui_Handle.global.nest(96,{ selected : arm_Context.pickerSelectMaterial}),arm_Translator.tr("Select Material"));
				ui.combo(arm_Context.pickerMaskHandle,[arm_Translator.tr("None"),arm_Translator.tr("Material")],arm_Translator.tr("Mask"),true);
				if(arm_Context.pickerMaskHandle.changed) {
					arm_node_MakeMaterial.parsePaintMaterial();
				}
			} else if(arm_Context.tool == 11) {
				ui.changed = false;
				arm_Context.bakeType = ui.combo(zui_Handle.global.nest(97,{ position : arm_Context.bakeType}),[arm_Translator.tr("AO"),arm_Translator.tr("Curvature"),arm_Translator.tr("Normal"),arm_Translator.tr("Object Normal"),arm_Translator.tr("Height"),arm_Translator.tr("Derivative"),arm_Translator.tr("Position"),arm_Translator.tr("TexCoord"),arm_Translator.tr("Material ID"),arm_Translator.tr("Object ID"),arm_Translator.tr("Vertex Color")],arm_Translator.tr("Bake"));
				if(arm_Context.bakeType == 3 || arm_Context.bakeType == 6 || arm_Context.bakeType == 12) {
					arm_Context.bakeUpAxis = ui.combo(zui_Handle.global.nest(98,{ position : arm_Context.bakeUpAxis}),["Z","Y"],arm_Translator.tr("Up Axis"),true);
				}
				if(arm_Context.bakeType == 0 || arm_Context.bakeType == 1) {
					arm_Context.bakeAxis = ui.combo(zui_Handle.global.nest(99,{ position : arm_Context.bakeAxis}),["XYZ","X","Y","Z","-X","-Y","-Z"],arm_Translator.tr("Axis"),true);
				}
				if(arm_Context.bakeType == 0) {
					arm_Context.bakeAoStrength = ui.slider(zui_Handle.global.nest(100,{ value : arm_Context.bakeAoStrength}),arm_Translator.tr("Strength"),0.0,2.0,true);
					arm_Context.bakeAoRadius = ui.slider(zui_Handle.global.nest(101,{ value : arm_Context.bakeAoRadius}),arm_Translator.tr("Radius"),0.0,2.0,true);
					arm_Context.bakeAoOffset = ui.slider(zui_Handle.global.nest(102,{ value : arm_Context.bakeAoOffset}),arm_Translator.tr("Offset"),0.0,2.0,true);
				}
				if(arm_Context.bakeType == 1) {
					arm_Context.bakeCurvStrength = ui.slider(zui_Handle.global.nest(103,{ value : arm_Context.bakeCurvStrength}),arm_Translator.tr("Strength"),0.0,2.0,true);
					arm_Context.bakeCurvRadius = ui.slider(zui_Handle.global.nest(104,{ value : arm_Context.bakeCurvRadius}),arm_Translator.tr("Radius"),0.0,2.0,true);
					arm_Context.bakeCurvOffset = ui.slider(zui_Handle.global.nest(105,{ value : arm_Context.bakeCurvOffset}),arm_Translator.tr("Offset"),-2.0,2.0,true);
					arm_Context.bakeCurvSmooth = ui.slider(zui_Handle.global.nest(106,{ value : arm_Context.bakeCurvSmooth}),arm_Translator.tr("Smooth"),0,5,false,1) | 0;
				}
				if(arm_Context.bakeType == 2 || arm_Context.bakeType == 4 || arm_Context.bakeType == 5) {
					var _g = [];
					var _g1 = 0;
					var _g2 = arm_Project.paintObjects;
					while(_g1 < _g2.length) _g.push(_g2[_g1++].name);
					arm_Context.bakeHighPoly = ui.combo(zui_Handle.global.nest(107,{ position : arm_Context.bakeHighPoly}),_g,arm_Translator.tr("High Poly"));
				}
				if(ui.changed) {
					arm_node_MakeMaterial.parsePaintMaterial();
				}
			} else if(arm_Context.tool == 0 || arm_Context.tool == 1 || arm_Context.tool == 2 || arm_Context.tool == 3 || arm_Context.tool == 4 || arm_Context.tool == 5 || arm_Context.tool == 6 || arm_Context.tool == 7) {
				if(arm_Context.tool != 2) {
					arm_Context.brushRadius = ui.slider(arm_Context.brushRadiusHandle,arm_Translator.tr("Radius"),0.01,2.0,true);
				}
				if(arm_Context.tool == 3 || arm_Context.tool == 4) {
					arm_Context.brushScaleX = ui.slider(arm_Context.brushScaleXHandle,arm_Translator.tr("Scale X"),0.01,2.0,true);
				}
				if(arm_Context.tool == 0 || arm_Context.tool == 2 || arm_Context.tool == 3 || arm_Context.tool == 4) {
					var brushScaleHandle = zui_Handle.global.nest(108,{ value : arm_Context.brushScale});
					arm_Context.brushScale = ui.slider(brushScaleHandle,arm_Translator.tr("UV Scale"),0.01,5.0,true);
					if(brushScaleHandle.changed) {
						if(arm_Context.tool == 3 || arm_Context.tool == 4) {
							ui.g.end();
							arm_util_RenderUtil.makeDecalPreview();
							ui.g.begin(false);
						}
					}
					arm_Context.brushAngle = ui.slider(arm_Context.brushAngleHandle,arm_Translator.tr("Angle"),0.0,360.0,true,1);
					if(arm_Context.brushAngleHandle.changed) {
						arm_node_MakeMaterial.parsePaintMaterial();
					}
				}
				arm_Context.brushOpacity = ui.slider(arm_Context.brushOpacityHandle,arm_Translator.tr("Opacity"),0.0,1.0,true);
				if(arm_Context.tool == 0 || arm_Context.tool == 1) {
					arm_Context.brushHardness = ui.slider(zui_Handle.global.nest(109,{ value : arm_Context.brushHardness}),arm_Translator.tr("Hardness"),0.0,1.0,true);
				}
				if(arm_Context.tool != 1) {
					var brushBlendingHandle = zui_Handle.global.nest(110,{ value : arm_Context.brushBlending});
					arm_Context.brushBlending = ui.combo(brushBlendingHandle,[arm_Translator.tr("Mix"),arm_Translator.tr("Darken"),arm_Translator.tr("Multiply"),arm_Translator.tr("Burn"),arm_Translator.tr("Lighten"),arm_Translator.tr("Screen"),arm_Translator.tr("Dodge"),arm_Translator.tr("Add"),arm_Translator.tr("Overlay"),arm_Translator.tr("Soft Light"),arm_Translator.tr("Linear Light"),arm_Translator.tr("Difference"),arm_Translator.tr("Subtract"),arm_Translator.tr("Divide"),arm_Translator.tr("Hue"),arm_Translator.tr("Saturation"),arm_Translator.tr("Color"),arm_Translator.tr("Value")],arm_Translator.tr("Blending"));
					if(brushBlendingHandle.changed) {
						arm_node_MakeMaterial.parsePaintMaterial();
					}
				}
				if(arm_Context.tool == 0 || arm_Context.tool == 2) {
					var paintHandle = zui_Handle.global.nest(111,null);
					arm_Context.brushPaint = ui.combo(paintHandle,[arm_Translator.tr("UV Map"),arm_Translator.tr("Triplanar"),arm_Translator.tr("Project")],arm_Translator.tr("TexCoord"));
					if(paintHandle.changed) {
						arm_node_MakeMaterial.parsePaintMaterial();
					}
				}
				if(arm_Context.tool == 4) {
					var h = zui_Handle.global.nest(112,null);
					h.text = arm_Context.textToolText;
					arm_Context.textToolText = ui.textInput(h,"");
					if(h.changed) {
						ui.g.end();
						arm_util_RenderUtil.makeTextPreview();
						arm_util_RenderUtil.makeDecalPreview();
						ui.g.begin(false);
					}
				}
				if(arm_Context.tool == 2) {
					ui.combo(arm_Context.fillTypeHandle,[arm_Translator.tr("Object"),arm_Translator.tr("Face"),arm_Translator.tr("Angle")],arm_Translator.tr("Fill Mode"));
					if(arm_Context.fillTypeHandle.changed) {
						if(arm_Context.fillTypeHandle.position == 1) {
							ui.g.end();
							arm_util_UVUtil.cacheTriangleMap();
							ui.g.begin(false);
						}
						arm_node_MakeMaterial.parsePaintMaterial();
						arm_node_MakeMaterial.parseMeshMaterial();
					}
				} else {
					var _w = ui._w;
					var sc = ui.ops.scaleFactor;
					ui._w = 60 * sc | 0;
					var xrayHandle = zui_Handle.global.nest(113,{ selected : arm_Context.xray});
					arm_Context.xray = ui.check(xrayHandle,arm_Translator.tr("X-Ray"));
					if(xrayHandle.changed) {
						arm_node_MakeMaterial.parsePaintMaterial();
					}
					var symXHandle = zui_Handle.global.nest(114,{ selected : false});
					var symYHandle = zui_Handle.global.nest(115,{ selected : false});
					var symZHandle = zui_Handle.global.nest(116,{ selected : false});
					ui._w = 55 * sc | 0;
					ui.text(arm_Translator.tr("Symmetry"));
					ui._w = 25 * sc | 0;
					arm_Context.symX = ui.check(symXHandle,"X");
					arm_Context.symY = ui.check(symYHandle,"Y");
					arm_Context.symZ = ui.check(symZHandle,"Z");
					if(symXHandle.changed || symYHandle.changed || symZHandle.changed) {
						arm_node_MakeMaterial.parsePaintMaterial();
					}
					ui._w = _w;
				}
			}
		}
	}
	,__class__: arm_ui_UIHeader
};
var arm_ui_UIMenubar = function() {
	this.menubarw = 330;
	this.menuHandle = new zui_Handle({ layout : 1});
	this.workspaceHandle = new zui_Handle({ layout : 1});
	arm_ui_UIMenubar.inst = this;
};
$hxClasses["arm.ui.UIMenubar"] = arm_ui_UIMenubar;
arm_ui_UIMenubar.__name__ = "arm.ui.UIMenubar";
arm_ui_UIMenubar.prototype = {
	renderUI: function(g) {
		var ui = arm_ui_UISidebar.inst.ui;
		var panelx = arm_App.x() - arm_ui_UIToolbar.inst.toolbarw;
		if(ui.window(this.menuHandle,panelx,0,this.menubarw,28 * ui.ops.scaleFactor | 0)) {
			ui._x += 1;
			zui_Ext.beginMenu(ui);
			var _g = 0;
			while(_g < 6) {
				var i = _g++;
				if(zui_Ext.menuButton(ui,[arm_Translator.tr("File"),arm_Translator.tr("Edit"),arm_Translator.tr("Viewport"),arm_Translator.tr("Mode"),arm_Translator.tr("Camera"),arm_Translator.tr("Help")][i]) || arm_ui_UIMenu.show && arm_ui_UIMenu.menuCommands == null && ui.isHovered) {
					arm_ui_UIMenu.show = true;
					arm_ui_UIMenu.menuCategory = i;
					arm_ui_UIMenu.menuX = ui._x - ui._w | 0;
					arm_ui_UIMenu.menuY = ui.t.BUTTON_H * ui.ops.scaleFactor * 1.1 + 2 + ui.buttonOffsetY | 0;
				}
			}
			if(this.menubarw < ui._x + 10) {
				this.menubarw = ui._x + 10 | 0;
				arm_ui_UIToolbar.inst.toolbarHandle.redraws = 2;
			}
			zui_Ext.endMenu(ui);
		}
		var panelx = arm_App.x() - arm_ui_UIToolbar.inst.toolbarw + this.menubarw;
		if(ui.window(this.workspaceHandle,panelx,0,kha_System.windowWidth() - arm_Config.raw.layout[0] - this.menubarw,28 * ui.ops.scaleFactor | 0)) {
			ui.tab(arm_ui_UIHeader.inst.worktab,arm_Translator.tr("Paint"));
			ui.tab(arm_ui_UIHeader.inst.worktab,arm_Translator.tr("Material"));
			ui.tab(arm_ui_UIHeader.inst.worktab,arm_Translator.tr("Bake"));
			if(arm_ui_UIHeader.inst.worktab.changed) {
				arm_Context.ddirty = 2;
				arm_ui_UIToolbar.inst.toolbarHandle.redraws = 2;
				arm_ui_UIHeader.inst.headerHandle.redraws = 2;
				arm_ui_UISidebar.inst.hwnd0.redraws = 2;
				arm_ui_UISidebar.inst.hwnd1.redraws = 2;
				arm_ui_UISidebar.inst.hwnd2.redraws = 2;
				if(arm_ui_UIHeader.inst.worktab.position == 0) {
					arm_Context.selectTool(0);
				} else if(arm_ui_UIHeader.inst.worktab.position == 2) {
					arm_Context.selectTool(11);
				} else {
					arm_Context.selectTool(10);
				}
				if(arm_ui_UIHeader.inst.worktab.position == 1) {
					arm_Layers.updateFillLayers(4);
				}
				arm_node_MakeMaterial.parsePaintMaterial();
				arm_node_MakeMaterial.parseMeshMaterial();
				arm_Context.mainObject().skip_context = null;
			}
		}
	}
	,__class__: arm_ui_UIMenubar
};
var arm_ui_UIStatus = function() {
	this.statustab = zui_Handle.global.nest(65,null);
	this.statusHandle = new zui_Handle();
	arm_ui_UIStatus.inst = this;
};
$hxClasses["arm.ui.UIStatus"] = arm_ui_UIStatus;
arm_ui_UIStatus.__name__ = "arm.ui.UIStatus";
arm_ui_UIStatus.prototype = {
	renderUI: function(g) {
		var ui = arm_ui_UISidebar.inst.ui;
		var statush = arm_Config.raw.layout[6];
		if(ui.window(this.statusHandle,arm_App.x(),kha_System.windowHeight() - statush,kha_System.windowWidth() - arm_ui_UIToolbar.inst.toolbarw - arm_Config.raw.layout[0],statush)) {
			ui._y += 2;
			arm_ui_TabBrowser.draw();
			arm_ui_TabScript.draw();
			arm_ui_TabConsole.draw();
			if(this.statustab.changed && (this.statustab.position == arm_Context.lastStatusPosition || statush <= 32 * arm_Config.raw.window_scale)) {
				arm_ui_UISidebar.inst.toggleBrowser();
			}
			arm_Context.lastStatusPosition = this.statustab.position;
		}
	}
	,__class__: arm_ui_UIStatus
};
var arm_ui_UIToolbar = function() {
	this.toolCount = [10,2,1,1];
	this.toolNames = [arm_Translator.tr("Brush"),arm_Translator.tr("Eraser"),arm_Translator.tr("Fill"),arm_Translator.tr("Decal"),arm_Translator.tr("Text"),arm_Translator.tr("Clone"),arm_Translator.tr("Blur"),arm_Translator.tr("Particle"),arm_Translator.tr("ColorID"),arm_Translator.tr("Picker"),arm_Translator.tr("Gizmo"),arm_Translator.tr("Bake")];
	this.toolbarw = 36;
	this.toolbarHandle = new zui_Handle();
	arm_ui_UIToolbar.inst = this;
};
$hxClasses["arm.ui.UIToolbar"] = arm_ui_UIToolbar;
arm_ui_UIToolbar.__name__ = "arm.ui.UIToolbar";
arm_ui_UIToolbar.prototype = {
	renderUI: function(g) {
		var ui = arm_ui_UISidebar.inst.ui;
		if(ui.window(this.toolbarHandle,0,arm_ui_UIHeader.inst.headerh,this.toolbarw,kha_System.windowHeight() - arm_ui_UIHeader.inst.headerh)) {
			ui._y -= 4 * ui.ops.scaleFactor;
			ui.imageScrollAlign = false;
			var img = arm_Res.bundled.h["icons.k"];
			var imgw = ui.ops.scaleFactor > 1 ? 100 : 50;
			var col = ui.t.WINDOW_BG_COL;
			if(col < 0) {
				col += 4294967296;
			}
			var light = col > 4284900966.;
			var iconAccent = light ? -10066330 : -1;
			var rect = arm_Res.tile50(img,7,1);
			ui.image(img,light ? -10066330 : ui.t.BUTTON_COL,null,rect.x,rect.y,rect.w,rect.h);
			ui._y -= 4 * ui.ops.scaleFactor;
			if(arm_ui_UIHeader.inst.worktab.position == 0) {
				var keys = "(" + Std.string(arm_Config.keymap.tool_brush) + ")";
				var keys1 = "(" + Std.string(arm_Config.keymap.tool_eraser) + ")";
				var keys2 = "(" + Std.string(arm_Config.keymap.tool_fill) + ")";
				var keys3 = "(" + Std.string(arm_Config.keymap.tool_decal) + ")";
				var keys4 = "(" + Std.string(arm_Config.keymap.tool_text) + ")";
				var keys5 = "(" + Std.string(arm_Config.keymap.tool_clone) + ") - ";
				var _g = new haxe_ds_StringMap();
				_g.h["key"] = arm_Config.keymap.set_clone_source;
				var keys6 = [keys,keys1,keys2,keys3,keys4,keys5 + arm_Translator.tr("Hold {key} to set source",_g),"(" + Std.string(arm_Config.keymap.tool_blur) + ")","(" + Std.string(arm_Config.keymap.tool_particle) + ")","(" + Std.string(arm_Config.keymap.tool_colorid) + ")","(" + Std.string(arm_Config.keymap.tool_picker) + ")"];
				var _g = 0;
				var _g1 = this.toolCount[0];
				while(_g < _g1) {
					var i = _g++;
					ui._x += 2;
					if(arm_Context.tool == i) {
						ui.fill(-1,2,34,34,ui.t.HIGHLIGHT_COL);
					}
					var rect = arm_Res.tile50(img,i,0);
					if(ui.image(img,iconAccent,null,rect.x,rect.y,rect.w,rect.h) == 1) {
						arm_Context.selectTool(i);
					}
					if(ui.isHovered) {
						ui.tooltip(arm_Translator.tr(this.toolNames[i]) + " " + keys6[i]);
					}
					ui._x -= 2;
					ui._y += 2;
				}
			} else if(arm_ui_UIHeader.inst.worktab.position == 1) {
				ui._x += 2;
				if(arm_Context.tool == 10) {
					ui.fill(-1,2,34,34,ui.t.HIGHLIGHT_COL);
				}
				if(ui.image(img,iconAccent,null,imgw * 10,0,imgw,imgw) == 1) {
					arm_Context.selectTool(10);
				}
				if(ui.isHovered) {
					ui.tooltip(arm_Translator.tr("Gizmo") + " (G)");
				}
				ui._x -= 2;
				ui._y += 2;
				ui._x += 2;
				if(arm_Context.tool == 9) {
					ui.fill(-1,2,34,34,ui.t.HIGHLIGHT_COL);
				}
				if(ui.image(img,iconAccent,null,imgw * 9,0,imgw,imgw) == 1) {
					arm_Context.selectTool(9);
				}
				if(ui.isHovered) {
					ui.tooltip(arm_Translator.tr("Picker") + " (V)");
				}
				ui._x -= 2;
				ui._y += 2;
			} else if(arm_ui_UIHeader.inst.worktab.position == 2) {
				ui._x += 2;
				if(arm_Context.tool == 11) {
					ui.fill(-1,2,34,34,ui.t.HIGHLIGHT_COL);
				}
				if(ui.image(img,iconAccent,null,imgw * 11,0,imgw,imgw) == 1) {
					arm_Context.selectTool(11);
				}
				if(ui.isHovered) {
					ui.tooltip(arm_Translator.tr("Bake") + " (K)");
				}
				ui._x -= 2;
				ui._y += 2;
			} else if(arm_ui_UIHeader.inst.worktab.position == 3) {
				ui._x += 2;
				if(arm_Context.tool == 10) {
					ui.fill(-1,2,34,34,ui.t.HIGHLIGHT_COL);
				}
				if(ui.image(img,iconAccent,null,imgw * 10,0,imgw,imgw) == 1) {
					arm_Context.selectTool(10);
				}
				if(ui.isHovered) {
					ui.tooltip(arm_Translator.tr("Gizmo") + " (G)");
				}
				ui._x -= 2;
				ui._y += 2;
			}
			ui.imageScrollAlign = true;
		}
	}
	,__class__: arm_ui_UIToolbar
};
var arm_ui_UIView2D = function() {
	this.tiledShow = false;
	this.uvmapShow = false;
	this.texType = 0;
	this.panScale = 1.0;
	this.panY = 0.0;
	this.panX = 0.0;
	this.hwnd = zui_Handle.global.nest(7,null);
	this.type = 0;
	this.show = false;
	arm_ui_UIView2D.inst = this;
	this.pipe = new kha_graphics4_PipelineState();
	this.pipe.vertexShader = Reflect.field(kha_Shaders,"layer_view_vert");
	this.pipe.fragmentShader = Reflect.field(kha_Shaders,"layer_view_frag");
	var vs = new kha_graphics4_VertexStructure();
	vs.add("pos",2);
	vs.add("tex",1);
	vs.add("col",3);
	this.pipe.inputLayout = [vs];
	this.pipe.blendSource = 1;
	this.pipe.blendDestination = 2;
	this.pipe.colorWriteMasksAlpha[0] = false;
	this.pipe.compile();
	this.channelLocation = this.pipe.getConstantLocation("channel");
	this.ui = new zui_Zui({ font : arm_App.font, theme : arm_App.theme, color_wheel : arm_App.colorWheel, scaleFactor : arm_Config.raw.window_scale});
	this.ui.scrollEnabled = false;
};
$hxClasses["arm.ui.UIView2D"] = arm_ui_UIView2D;
arm_ui_UIView2D.__name__ = "arm.ui.UIView2D";
arm_ui_UIView2D.prototype = {
	render: function(g) {
		this.ww = arm_Config.raw.layout[4];
		this.wx = (arm_App.w() | 0) + arm_ui_UIToolbar.inst.toolbarw;
		this.wy = arm_ui_UIHeader.inst.headerh * 2;
		if(!this.show) {
			return;
		}
		if(kha_System.windowWidth() == 0 || kha_System.windowHeight() == 0) {
			return;
		}
		if(arm_Context.pdirty >= 0) {
			this.hwnd.redraws = 2;
		}
		var tw = this.ww * 0.95 * this.panScale;
		var tx = this.ww / 2 - tw / 2 + this.panX;
		var ty = arm_App.h() / 2 - tw / 2 + this.panY;
		g.end();
		if(arm_ui_UINodes.inst.grid == null) {
			arm_ui_UINodes.inst.drawGrid();
		}
		if(this.uvmapShow) {
			arm_util_UVUtil.cacheUVMap();
		}
		if(arm_Context.font.image == null) {
			arm_util_RenderUtil.makeFontPreview();
		}
		this.ui.begin(g);
		this.wh = arm_App.h();
		if(arm_ui_UINodes.inst.show) {
			this.wh -= arm_Config.raw.layout[5];
		}
		if(this.ui.window(this.hwnd,this.wx,this.wy,this.ww,this.wh)) {
			this.ui.g.set_color(-1);
			this.ui.g.drawImage(arm_ui_UINodes.inst.grid,this.panX * this.panScale % 40 - 40,this.panY * this.panScale % 40 - 40);
			var l = arm_Context.layer;
			var tex = null;
			var channel = 0;
			if(this.type == 0) {
				var layer = l.getChildren() == null ? l : l.getChildren()[0];
				if(arm_Config.raw.brush_live && arm_render_RenderPathPaint.liveLayerDrawn > 0) {
					layer = arm_render_RenderPathPaint.liveLayer;
				}
				tex = arm_Context.layerIsMask ? layer.texpaint_mask : this.texType == 0 ? layer.texpaint : this.texType == 5 ? layer.texpaint : this.texType == 1 ? layer.texpaint_nor : layer.texpaint_pack;
				channel = arm_Context.layerIsMask ? 1 : this.texType == 2 ? 1 : this.texType == 3 ? 2 : this.texType == 4 ? 3 : this.texType == 5 ? 4 : this.texType == 1 ? 5 : 0;
			} else if(this.type == 1) {
				tex = arm_Project.getImage(arm_Context.texture);
			} else {
				tex = arm_Context.font.image;
				tw = tex.get_width();
			}
			var th = tw;
			if(tex != null) {
				th = tw * (tex.get_height() / tex.get_width());
				if(this.type == 0) {
					this.ui.g.set_pipeline(this.pipe);
					if(!arm_Context.textureFilter) {
						this.ui.g.set_imageScaleQuality(kha_graphics2_ImageScaleQuality.Low);
					}
					this.ui.currentWindow.texture.get_g4().setInt(this.channelLocation,channel);
				}
				this.ui.g.drawScaledImage(tex,tx,ty,tw,th);
				if(this.tiledShow) {
					this.ui.g.drawScaledImage(tex,tx - tw,ty,tw,th);
					this.ui.g.drawScaledImage(tex,tx - tw,ty - th,tw,th);
					this.ui.g.drawScaledImage(tex,tx - tw,ty + th,tw,th);
					this.ui.g.drawScaledImage(tex,tx + tw,ty,tw,th);
					this.ui.g.drawScaledImage(tex,tx + tw,ty - th,tw,th);
					this.ui.g.drawScaledImage(tex,tx + tw,ty + th,tw,th);
					this.ui.g.drawScaledImage(tex,tx,ty - th,tw,th);
					this.ui.g.drawScaledImage(tex,tx,ty + th,tw,th);
				}
				if(this.type == 0) {
					this.ui.g.set_pipeline(null);
					if(!arm_Context.textureFilter) {
						this.ui.g.set_imageScaleQuality(kha_graphics2_ImageScaleQuality.High);
					}
				}
			}
			if(this.type == 0 && this.uvmapShow) {
				this.ui.g.drawScaledImage(arm_util_UVUtil.uvmap,tx,ty,tw,th);
			}
			var ACCENT_COL = this.ui.t.ACCENT_COL;
			var BUTTON_H = this.ui.t.BUTTON_H;
			var ELEMENT_H = this.ui.t.ELEMENT_H;
			var FONT_SIZE = this.ui.fontSize;
			this.ui.t.ACCENT_COL = 0;
			this.ui.t.BUTTON_H = 30;
			this.ui.t.ELEMENT_H = 30;
			this.ui.fontSize = 22 * this.ui.ops.scaleFactor | 0;
			var _this = this.ui;
			this.ui._x = this.ww - _this.t.ELEMENT_W * _this.ops.scaleFactor * 1.4;
			var _this = this.ui;
			this.ui._y = this.wh - _this.t.ELEMENT_H * _this.ops.scaleFactor * 1.2;
			var _this = this.ui;
			this.ui._w = _this.t.ELEMENT_W * _this.ops.scaleFactor * 1.4 | 0;
			var h = zui_Handle.global.nest(90,null);
			if(this.type == 0) {
				h.text = l.name;
				l.name = this.ui.textInput(h,"",2);
			} else if(this.type == 1) {
				var asset = arm_Context.texture;
				if(asset != null) {
					var assetNames = arm_Project.assetNames;
					var i = assetNames.indexOf(asset.name);
					h.text = asset.name;
					asset.name = this.ui.textInput(h,"",2);
					assetNames[i] = asset.name;
				}
			} else {
				h.text = arm_Context.font.name;
				arm_Context.font.name = this.ui.textInput(h,"",2);
			}
			if(h.changed) {
				arm_ui_UISidebar.inst.hwnd0.redraws = 2;
			}
			this.ui.t.ACCENT_COL = ACCENT_COL;
			this.ui.t.BUTTON_H = BUTTON_H;
			this.ui.t.ELEMENT_H = ELEMENT_H;
			this.ui.fontSize = FONT_SIZE;
			var _this = this.ui;
			var ew = _this.t.ELEMENT_W * _this.ops.scaleFactor | 0;
			this.ui.g.set_color(this.ui.t.WINDOW_BG_COL);
			var _this = this.ui;
			var _this1 = this.ui;
			this.ui.g.fillRect(0,0,this.ww,_this.t.ELEMENT_H * _this.ops.scaleFactor + _this1.t.ELEMENT_OFFSET * _this1.ops.scaleFactor);
			this.ui.g.set_color(-1);
			this.ui._x = 2;
			this.ui._y = 2;
			this.ui._w = ew;
			if(this.type == 0) {
				if(!arm_Context.layerIsMask) {
					this.texType = this.ui.combo(zui_Handle.global.nest(91,{ position : this.texType}),[arm_Translator.tr("Base Color"),arm_Translator.tr("Normal Map"),arm_Translator.tr("Occlusion"),arm_Translator.tr("Roughness"),arm_Translator.tr("Metallic"),arm_Translator.tr("Opacity")],arm_Translator.tr("Texture"));
					this.ui._x += ew + 3;
					this.ui._y = 2;
				}
				this.uvmapShow = this.ui.check(zui_Handle.global.nest(92,{ selected : this.uvmapShow}),arm_Translator.tr("UV Map"));
				this.ui._x += ew + 3;
				this.ui._y = 2;
			}
			this.tiledShow = this.ui.check(zui_Handle.global.nest(93,{ selected : this.tiledShow}),arm_Translator.tr("Tiled"));
			if(arm_Context.tool == 9) {
				var hsize = 16 * this.ui.ops.scaleFactor;
				var size = hsize * 2;
				this.ui.g.drawScaledImage(arm_Res.bundled.h["cursor.k"],tx + tw * arm_Context.uvxPicked - hsize,ty + th * arm_Context.uvyPicked - hsize,size,size);
			}
		}
		this.ui.end();
		g.begin(false);
	}
	,update: function() {
		var mouse = iron_system_Input.getMouse();
		var kb = iron_system_Input.getKeyboard();
		var _this = this.ui;
		arm_Context.paint2d = false;
		if(!arm_App.uiEnabled || !this.show || mouse.x < this.wx || mouse.x > this.wx + this.ww || mouse.y < this.wy + _this.t.ELEMENT_H * _this.ops.scaleFactor * 1.4 || mouse.y > this.wy + this.wh) {
			return;
		}
		if(mouse.down("right") || mouse.down("middle") || mouse.down("left") && kb.down("ctrl")) {
			this.panX += mouse.movementX;
			this.panY += mouse.movementY;
		}
		if(mouse.wheelDelta != 0) {
			this.panScale -= mouse.wheelDelta / 10;
			if(this.panScale < 0.1) {
				this.panScale = 0.1;
			}
			if(this.panScale > 3.0) {
				this.panScale = 3.0;
			}
		}
		var decalMask = (arm_Context.tool == 3 || arm_Context.tool == 4) && arm_Operator.shortcut(Std.string(arm_Config.keymap.decal_mask) + "+" + Std.string(arm_Config.keymap.action_paint),2);
		var setCloneSource = arm_Context.tool == 5 && arm_Operator.shortcut(Std.string(arm_Config.keymap.set_clone_source) + "+" + Std.string(arm_Config.keymap.action_paint),2);
		if(this.type == 0 && (arm_Operator.shortcut(arm_Config.keymap.action_paint,2) || arm_Operator.shortcut(Std.string(arm_Config.keymap.brush_ruler) + "+" + Std.string(arm_Config.keymap.action_paint),2) || decalMask || setCloneSource || arm_Config.raw.brush_live)) {
			arm_Context.paint2d = true;
		}
		if(this.ui.isTyping) {
			return;
		}
		if(kb.started("left")) {
			this.panX -= 5;
		} else if(kb.started("right")) {
			this.panX += 5;
		}
		if(kb.started("up")) {
			this.panY -= 5;
		} else if(kb.started("down")) {
			this.panY += 5;
		}
	}
	,__class__: arm_ui_UIView2D
};
var arm_util_ParticleUtil = function() { };
$hxClasses["arm.util.ParticleUtil"] = arm_util_ParticleUtil;
arm_util_ParticleUtil.__name__ = "arm.util.ParticleUtil";
arm_util_ParticleUtil.f32 = function(ar) {
	var res = new Float32Array(ar.length);
	var _g = 0;
	var _g1 = ar.length;
	while(_g < _g1) {
		var i = _g++;
		res[i] = ar[i];
	}
	return res;
};
arm_util_ParticleUtil.initParticle = function() {
	if(arm_Context.particleMaterial != null) {
		return;
	}
	var raw = { name : "Particles", type : 0, loop : false, count : 1000, frame_start : 0, frame_end : 1000, lifetime : 400, lifetime_random : 0.5, emit_from : 1, object_align_factor : arm_util_ParticleUtil.f32([0,0,-40]), factor_random : 2.0, physics_type : 0, particle_size : 1.0, size_random : 0, mass : 1, instance_object : ".Particle", weight_gravity : 1};
	iron_Scene.active.raw.particle_datas = [raw];
	var particle_refs = [{ name : "Particles", particle : "Particles", seed : 0}];
	var t = new iron_RenderTargetRaw();
	t.name = "texparticle";
	t.width = 0;
	t.height = 0;
	t.format = "R8";
	t.scale = arm_render_Inc.superSample;
	iron_RenderPath.active.createRenderTarget(t);
	var _g = 0;
	var _g1 = iron_Scene.active.raw.material_datas;
	while(_g < _g1.length) {
		var mat = _g1[_g];
		++_g;
		if(mat.name == "Material2") {
			var m = JSON.parse(JSON.stringify(mat));
			m.name = "MaterialParticle";
			iron_Scene.active.raw.material_datas.push(m);
			break;
		}
	}
	iron_data_Data.getMaterial("Scene","MaterialParticle",function(md) {
		arm_Context.particleMaterial = md;
		var _g = 0;
		var _g1 = iron_Scene.active.raw.objects;
		while(_g < _g1.length) {
			var obj = _g1[_g];
			++_g;
			if(obj.name == ".Sphere") {
				var particle = JSON.parse(JSON.stringify(obj));
				particle.name = ".Particle";
				particle.is_particle = true;
				particle.material_refs = ["MaterialParticle"];
				iron_Scene.active.raw.objects.push(particle);
				particle.transform.values[0] *= 0.01;
				particle.transform.values[1] *= 0.01;
				particle.transform.values[2] *= 0.01;
				particle.transform.values[3] *= 0.01;
				particle.transform.values[4] *= 0.01;
				particle.transform.values[5] *= 0.01;
				particle.transform.values[6] *= 0.01;
				particle.transform.values[7] *= 0.01;
				particle.transform.values[8] *= 0.01;
				particle.transform.values[9] *= 0.01;
				particle.transform.values[10] *= 0.01;
				particle.transform.values[11] *= 0.01;
				particle.transform.values[12] *= 0.01;
				particle.transform.values[13] *= 0.01;
				particle.transform.values[14] *= 0.01;
				particle.transform.values[15] *= 0.01;
				break;
			}
		}
		iron_Scene.active.spawnObject(".Sphere",null,function(o) {
			var mo = o;
			mo.name = ".ParticleEmitter";
			mo.raw.particle_refs = particle_refs;
			mo.setupParticleSystem("Scene",particle_refs[0]);
		});
	});
};
var haxe_IMap = function() { };
$hxClasses["haxe.IMap"] = haxe_IMap;
haxe_IMap.__name__ = "haxe.IMap";
haxe_IMap.__isInterface__ = true;
var haxe_Exception = function(message,previous,native) {
	Error.call(this,message);
	this.message = message;
	this.__previousException = previous;
	this.__nativeException = native != null ? native : this;
};
$hxClasses["haxe.Exception"] = haxe_Exception;
haxe_Exception.__name__ = "haxe.Exception";
haxe_Exception.caught = function(value) {
	if(((value) instanceof haxe_Exception)) {
		return value;
	} else if(((value) instanceof Error)) {
		return new haxe_Exception(value.message,null,value);
	} else {
		return new haxe_ValueException(value,null,value);
	}
};
haxe_Exception.thrown = function(value) {
	if(((value) instanceof haxe_Exception)) {
		return value.get_native();
	} else if(((value) instanceof Error)) {
		return value;
	} else {
		var e = new haxe_ValueException(value);
		return e;
	}
};
haxe_Exception.__super__ = Error;
haxe_Exception.prototype = $extend(Error.prototype,{
	unwrap: function() {
		return this.__nativeException;
	}
	,get_native: function() {
		return this.__nativeException;
	}
	,__class__: haxe_Exception
	,__properties__: {get_native:"get_native"}
});
var haxe__$Int64__$_$_$Int64 = function(high,low) {
	this.high = high;
	this.low = low;
};
$hxClasses["haxe._Int64.___Int64"] = haxe__$Int64__$_$_$Int64;
haxe__$Int64__$_$_$Int64.__name__ = "haxe._Int64.___Int64";
haxe__$Int64__$_$_$Int64.prototype = {
	__class__: haxe__$Int64__$_$_$Int64
};
var haxe_Log = function() { };
$hxClasses["haxe.Log"] = haxe_Log;
haxe_Log.__name__ = "haxe.Log";
haxe_Log.formatOutput = function(v,infos) {
	var str = Std.string(v);
	if(infos == null) {
		return str;
	}
	var pstr = infos.fileName + ":" + infos.lineNumber;
	if(infos.customParams != null) {
		var _g = 0;
		var _g1 = infos.customParams;
		while(_g < _g1.length) str += ", " + Std.string(_g1[_g++]);
	}
	return pstr + ": " + str;
};
haxe_Log.trace = function(v,infos) {
	var str = haxe_Log.formatOutput(v,infos);
	if(typeof(console) != "undefined" && console.log != null) {
		console.log(str);
	}
};
var haxe__$Unserializer_DefaultResolver = function() {
};
$hxClasses["haxe._Unserializer.DefaultResolver"] = haxe__$Unserializer_DefaultResolver;
haxe__$Unserializer_DefaultResolver.__name__ = "haxe._Unserializer.DefaultResolver";
haxe__$Unserializer_DefaultResolver.prototype = {
	resolveClass: function(name) {
		return $hxClasses[name];
	}
	,resolveEnum: function(name) {
		return $hxEnums[name];
	}
	,__class__: haxe__$Unserializer_DefaultResolver
};
var haxe_Unserializer = function(buf) {
	this.buf = buf;
	this.length = buf.length;
	this.pos = 0;
	this.scache = [];
	this.cache = [];
	var r = haxe_Unserializer.DEFAULT_RESOLVER;
	if(r == null) {
		r = new haxe__$Unserializer_DefaultResolver();
		haxe_Unserializer.DEFAULT_RESOLVER = r;
	}
	this.resolver = r;
};
$hxClasses["haxe.Unserializer"] = haxe_Unserializer;
haxe_Unserializer.__name__ = "haxe.Unserializer";
haxe_Unserializer.initCodes = function() {
	var codes = [];
	var _g = 0;
	var _g1 = haxe_Unserializer.BASE64.length;
	while(_g < _g1) {
		var i = _g++;
		codes[haxe_Unserializer.BASE64.charCodeAt(i)] = i;
	}
	return codes;
};
haxe_Unserializer.run = function(v) {
	return new haxe_Unserializer(v).unserialize();
};
haxe_Unserializer.prototype = {
	readDigits: function() {
		var k = 0;
		var s = false;
		var fpos = this.pos;
		while(true) {
			var c = this.buf.charCodeAt(this.pos);
			if(c != c) {
				break;
			}
			if(c == 45) {
				if(this.pos != fpos) {
					break;
				}
				s = true;
				this.pos++;
				continue;
			}
			if(c < 48 || c > 57) {
				break;
			}
			k = k * 10 + (c - 48);
			this.pos++;
		}
		if(s) {
			k *= -1;
		}
		return k;
	}
	,readFloat: function() {
		var p1 = this.pos;
		while(true) {
			var c = this.buf.charCodeAt(this.pos);
			if(c != c) {
				break;
			}
			if(c >= 43 && c < 58 || c == 101 || c == 69) {
				this.pos++;
			} else {
				break;
			}
		}
		return parseFloat(HxOverrides.substr(this.buf,p1,this.pos - p1));
	}
	,unserializeObject: function(o) {
		while(true) {
			if(this.pos >= this.length) {
				throw haxe_Exception.thrown("Invalid object");
			}
			if(this.buf.charCodeAt(this.pos) == 103) {
				break;
			}
			var k = this.unserialize();
			if(typeof(k) != "string") {
				throw haxe_Exception.thrown("Invalid object key");
			}
			o[k] = this.unserialize();
		}
		this.pos++;
	}
	,unserializeEnum: function(edecl,tag) {
		if(this.buf.charCodeAt(this.pos++) != 58) {
			throw haxe_Exception.thrown("Invalid enum format");
		}
		var nargs = this.readDigits();
		if(nargs == 0) {
			return Type.createEnum(edecl,tag);
		}
		var args = [];
		while(nargs-- > 0) args.push(this.unserialize());
		return Type.createEnum(edecl,tag,args);
	}
	,unserialize: function() {
		switch(this.buf.charCodeAt(this.pos++)) {
		case 65:
			var name = this.unserialize();
			var cl = this.resolver.resolveClass(name);
			if(cl == null) {
				throw haxe_Exception.thrown("Class not found " + name);
			}
			return cl;
		case 66:
			var name = this.unserialize();
			var e = this.resolver.resolveEnum(name);
			if(e == null) {
				throw haxe_Exception.thrown("Enum not found " + name);
			}
			return e;
		case 67:
			var name = this.unserialize();
			var cl = this.resolver.resolveClass(name);
			if(cl == null) {
				throw haxe_Exception.thrown("Class not found " + name);
			}
			var o = Object.create(cl.prototype);
			this.cache.push(o);
			o.hxUnserialize(this);
			if(this.buf.charCodeAt(this.pos++) != 103) {
				throw haxe_Exception.thrown("Invalid custom data");
			}
			return o;
		case 77:
			var h = new haxe_ds_ObjectMap();
			this.cache.push(h);
			while(this.buf.charCodeAt(this.pos) != 104) h.set(this.unserialize(),this.unserialize());
			this.pos++;
			return h;
		case 82:
			var n = this.readDigits();
			if(n < 0 || n >= this.scache.length) {
				throw haxe_Exception.thrown("Invalid string reference");
			}
			return this.scache[n];
		case 97:
			var a = [];
			this.cache.push(a);
			while(true) {
				var c = this.buf.charCodeAt(this.pos);
				if(c == 104) {
					this.pos++;
					break;
				}
				if(c == 117) {
					this.pos++;
					var n = this.readDigits();
					a[a.length + n - 1] = null;
				} else {
					a.push(this.unserialize());
				}
			}
			return a;
		case 98:
			var h = new haxe_ds_StringMap();
			this.cache.push(h);
			while(this.buf.charCodeAt(this.pos) != 104) {
				var s = this.unserialize();
				var value = this.unserialize();
				h.h[s] = value;
			}
			this.pos++;
			return h;
		case 99:
			var name = this.unserialize();
			var cl = this.resolver.resolveClass(name);
			if(cl == null) {
				throw haxe_Exception.thrown("Class not found " + name);
			}
			var o = Object.create(cl.prototype);
			this.cache.push(o);
			this.unserializeObject(o);
			return o;
		case 100:
			return this.readFloat();
		case 102:
			return false;
		case 105:
			return this.readDigits();
		case 106:
			var name = this.unserialize();
			var edecl = this.resolver.resolveEnum(name);
			if(edecl == null) {
				throw haxe_Exception.thrown("Enum not found " + name);
			}
			this.pos++;
			var index = this.readDigits();
			var tag = edecl.__constructs__.slice()[index];
			if(tag == null) {
				throw haxe_Exception.thrown("Unknown enum index " + name + "@" + index);
			}
			var e = this.unserializeEnum(edecl,tag);
			this.cache.push(e);
			return e;
		case 107:
			return NaN;
		case 108:
			var l = new haxe_ds_List();
			this.cache.push(l);
			while(this.buf.charCodeAt(this.pos) != 104) l.add(this.unserialize());
			this.pos++;
			return l;
		case 109:
			return -Infinity;
		case 110:
			return null;
		case 111:
			var o = { };
			this.cache.push(o);
			this.unserializeObject(o);
			return o;
		case 112:
			return Infinity;
		case 113:
			var h = new haxe_ds_IntMap();
			this.cache.push(h);
			var c = this.buf.charCodeAt(this.pos++);
			while(c == 58) {
				var i = this.readDigits();
				var value = this.unserialize();
				h.h[i] = value;
				c = this.buf.charCodeAt(this.pos++);
			}
			if(c != 104) {
				throw haxe_Exception.thrown("Invalid IntMap format");
			}
			return h;
		case 114:
			var n = this.readDigits();
			if(n < 0 || n >= this.cache.length) {
				throw haxe_Exception.thrown("Invalid reference");
			}
			return this.cache[n];
		case 115:
			var len = this.readDigits();
			var buf = this.buf;
			if(this.buf.charCodeAt(this.pos++) != 58 || this.length - this.pos < len) {
				throw haxe_Exception.thrown("Invalid bytes length");
			}
			var codes = haxe_Unserializer.CODES;
			if(codes == null) {
				codes = haxe_Unserializer.initCodes();
				haxe_Unserializer.CODES = codes;
			}
			var i = this.pos;
			var rest = len & 3;
			var max = i + (len - rest);
			var bytes = new haxe_io_Bytes(new ArrayBuffer((len >> 2) * 3 + (rest >= 2 ? rest - 1 : 0)));
			var bpos = 0;
			while(i < max) {
				var c1 = codes[buf.charCodeAt(i++)];
				var c2 = codes[buf.charCodeAt(i++)];
				bytes.b[bpos++] = c1 << 2 | c2 >> 4;
				var c3 = codes[buf.charCodeAt(i++)];
				bytes.b[bpos++] = c2 << 4 | c3 >> 2;
				var c4 = codes[buf.charCodeAt(i++)];
				bytes.b[bpos++] = c3 << 6 | c4;
			}
			if(rest >= 2) {
				var c1 = codes[buf.charCodeAt(i++)];
				var c2 = codes[buf.charCodeAt(i++)];
				bytes.b[bpos++] = c1 << 2 | c2 >> 4;
				if(rest == 3) {
					var c3 = codes[buf.charCodeAt(i++)];
					bytes.b[bpos++] = c2 << 4 | c3 >> 2;
				}
			}
			this.pos += len;
			this.cache.push(bytes);
			return bytes;
		case 116:
			return true;
		case 118:
			var d;
			if(this.buf.charCodeAt(this.pos) >= 48 && this.buf.charCodeAt(this.pos) <= 57 && this.buf.charCodeAt(this.pos + 1) >= 48 && this.buf.charCodeAt(this.pos + 1) <= 57 && this.buf.charCodeAt(this.pos + 2) >= 48 && this.buf.charCodeAt(this.pos + 2) <= 57 && this.buf.charCodeAt(this.pos + 3) >= 48 && this.buf.charCodeAt(this.pos + 3) <= 57 && this.buf.charCodeAt(this.pos + 4) == 45) {
				d = HxOverrides.strDate(HxOverrides.substr(this.buf,this.pos,19));
				this.pos += 19;
			} else {
				d = new Date(this.readFloat());
			}
			this.cache.push(d);
			return d;
		case 119:
			var name = this.unserialize();
			var edecl = this.resolver.resolveEnum(name);
			if(edecl == null) {
				throw haxe_Exception.thrown("Enum not found " + name);
			}
			var e = this.unserializeEnum(edecl,this.unserialize());
			this.cache.push(e);
			return e;
		case 120:
			throw haxe_Exception.thrown(this.unserialize());
		case 121:
			var len = this.readDigits();
			if(this.buf.charCodeAt(this.pos++) != 58 || this.length - this.pos < len) {
				throw haxe_Exception.thrown("Invalid string length");
			}
			var s = HxOverrides.substr(this.buf,this.pos,len);
			this.pos += len;
			s = decodeURIComponent(s.split("+").join(" "));
			this.scache.push(s);
			return s;
		case 122:
			return 0;
		default:
		}
		this.pos--;
		throw haxe_Exception.thrown("Invalid char " + this.buf.charAt(this.pos) + " at position " + this.pos);
	}
	,__class__: haxe_Unserializer
};
var haxe_ValueException = function(value,previous,native) {
	haxe_Exception.call(this,String(value),previous,native);
	this.value = value;
};
$hxClasses["haxe.ValueException"] = haxe_ValueException;
haxe_ValueException.__name__ = "haxe.ValueException";
haxe_ValueException.__super__ = haxe_Exception;
haxe_ValueException.prototype = $extend(haxe_Exception.prototype,{
	unwrap: function() {
		return this.value;
	}
	,__class__: haxe_ValueException
});
var haxe_ds_IntMap = function() {
	this.h = { };
};
$hxClasses["haxe.ds.IntMap"] = haxe_ds_IntMap;
haxe_ds_IntMap.__name__ = "haxe.ds.IntMap";
haxe_ds_IntMap.__interfaces__ = [haxe_IMap];
haxe_ds_IntMap.prototype = {
	remove: function(key) {
		if(!this.h.hasOwnProperty(key)) {
			return false;
		}
		delete(this.h[key]);
		return true;
	}
	,__class__: haxe_ds_IntMap
};
var haxe_ds_List = function() {
	this.length = 0;
};
$hxClasses["haxe.ds.List"] = haxe_ds_List;
haxe_ds_List.__name__ = "haxe.ds.List";
haxe_ds_List.prototype = {
	add: function(item) {
		var x = new haxe_ds__$List_ListNode(item,null);
		if(this.h == null) {
			this.h = x;
		} else {
			this.q.next = x;
		}
		this.q = x;
		this.length++;
	}
	,__class__: haxe_ds_List
};
var haxe_ds__$List_ListNode = function(item,next) {
	this.item = item;
	this.next = next;
};
$hxClasses["haxe.ds._List.ListNode"] = haxe_ds__$List_ListNode;
haxe_ds__$List_ListNode.__name__ = "haxe.ds._List.ListNode";
haxe_ds__$List_ListNode.prototype = {
	__class__: haxe_ds__$List_ListNode
};
var haxe_ds_ObjectMap = function() {
	this.h = { __keys__ : { }};
};
$hxClasses["haxe.ds.ObjectMap"] = haxe_ds_ObjectMap;
haxe_ds_ObjectMap.__name__ = "haxe.ds.ObjectMap";
haxe_ds_ObjectMap.__interfaces__ = [haxe_IMap];
haxe_ds_ObjectMap.prototype = {
	set: function(key,value) {
		var id = key.__id__;
		if(id == null) {
			id = (key.__id__ = $global.$haxeUID++);
		}
		this.h[id] = value;
		this.h.__keys__[id] = key;
	}
	,keys: function() {
		var a = [];
		for( var key in this.h.__keys__ ) {
		if(this.h.hasOwnProperty(key)) {
			a.push(this.h.__keys__[key]);
		}
		}
		return new haxe_iterators_ArrayIterator(a);
	}
	,__class__: haxe_ds_ObjectMap
};
var haxe_ds_StringMap = function() {
	this.h = Object.create(null);
};
$hxClasses["haxe.ds.StringMap"] = haxe_ds_StringMap;
haxe_ds_StringMap.__name__ = "haxe.ds.StringMap";
haxe_ds_StringMap.__interfaces__ = [haxe_IMap];
haxe_ds_StringMap.keysIterator = function(h) {
	var keys = Object.keys(h);
	var len = keys.length;
	var idx = 0;
	return { hasNext : function() {
		return idx < len;
	}, next : function() {
		idx += 1;
		return keys[idx - 1];
	}};
};
haxe_ds_StringMap.valueIterator = function(h) {
	var keys = Object.keys(h);
	var len = keys.length;
	var idx = 0;
	return { hasNext : function() {
		return idx < len;
	}, next : function() {
		idx += 1;
		return h[keys[idx - 1]];
	}};
};
haxe_ds_StringMap.kvIterator = function(h) {
	var keys = Object.keys(h);
	var len = keys.length;
	var idx = 0;
	return { hasNext : function() {
		return idx < len;
	}, next : function() {
		idx += 1;
		var k = keys[idx - 1];
		return { key : k, value : h[k]};
	}};
};
haxe_ds_StringMap.prototype = {
	__class__: haxe_ds_StringMap
};
var haxe_io_BytesBuffer = function() {
	this.pos = 0;
	this.size = 0;
};
$hxClasses["haxe.io.BytesBuffer"] = haxe_io_BytesBuffer;
haxe_io_BytesBuffer.__name__ = "haxe.io.BytesBuffer";
haxe_io_BytesBuffer.prototype = {
	addByte: function(byte) {
		if(this.pos == this.size) {
			this.grow(1);
		}
		this.view.setUint8(this.pos++,byte);
	}
	,addBytes: function(src,pos,len) {
		if(pos < 0 || len < 0 || pos + len > src.length) {
			throw haxe_Exception.thrown(haxe_io_Error.OutsideBounds);
		}
		if(this.pos + len > this.size) {
			this.grow(len);
		}
		if(this.size == 0) {
			return;
		}
		this.u8.set(new Uint8Array(src.b.buffer,src.b.byteOffset + pos,len),this.pos);
		this.pos += len;
	}
	,grow: function(delta) {
		var req = this.pos + delta;
		var nsize = this.size == 0 ? 16 : this.size;
		while(nsize < req) nsize = nsize * 3 >> 1;
		var nbuf = new ArrayBuffer(nsize);
		var nu8 = new Uint8Array(nbuf);
		if(this.size > 0) {
			nu8.set(this.u8);
		}
		this.size = nsize;
		this.buffer = nbuf;
		this.u8 = nu8;
		this.view = new DataView(this.buffer);
	}
	,getBytes: function() {
		if(this.size == 0) {
			return new haxe_io_Bytes(new ArrayBuffer(0));
		}
		var b = new haxe_io_Bytes(this.buffer);
		b.length = this.pos;
		return b;
	}
	,__class__: haxe_io_BytesBuffer
};
var haxe_io_Output = function() { };
$hxClasses["haxe.io.Output"] = haxe_io_Output;
haxe_io_Output.__name__ = "haxe.io.Output";
haxe_io_Output.prototype = {
	writeByte: function(c) {
		throw haxe_Exception.thrown("Not implemented");
	}
	,writeBytes: function(s,pos,len) {
		if(pos < 0 || len < 0 || pos + len > s.length) {
			throw haxe_Exception.thrown(haxe_io_Error.OutsideBounds);
		}
		var b = s.b;
		var k = len;
		while(k > 0) {
			this.writeByte(b[pos]);
			++pos;
			--k;
		}
		return len;
	}
	,set_bigEndian: function(b) {
		this.bigEndian = b;
		return b;
	}
	,write: function(s) {
		var l = s.length;
		var p = 0;
		while(l > 0) {
			var k = this.writeBytes(s,p,l);
			if(k == 0) {
				throw haxe_Exception.thrown(haxe_io_Error.Blocked);
			}
			p += k;
			l -= k;
		}
	}
	,writeFullBytes: function(s,pos,len) {
		while(len > 0) {
			var k = this.writeBytes(s,pos,len);
			pos += k;
			len -= k;
		}
	}
	,writeFloat: function(x) {
		this.writeInt32(haxe_io_FPHelper.floatToI32(x));
	}
	,writeInt16: function(x) {
		if(x < -32768 || x >= 32768) {
			throw haxe_Exception.thrown(haxe_io_Error.Overflow);
		}
		this.writeUInt16(x & 65535);
	}
	,writeUInt16: function(x) {
		if(x < 0 || x >= 65536) {
			throw haxe_Exception.thrown(haxe_io_Error.Overflow);
		}
		if(this.bigEndian) {
			this.writeByte(x >> 8);
			this.writeByte(x & 255);
		} else {
			this.writeByte(x & 255);
			this.writeByte(x >> 8);
		}
	}
	,writeInt32: function(x) {
		if(this.bigEndian) {
			this.writeByte(x >>> 24);
			this.writeByte(x >> 16 & 255);
			this.writeByte(x >> 8 & 255);
			this.writeByte(x & 255);
		} else {
			this.writeByte(x & 255);
			this.writeByte(x >> 8 & 255);
			this.writeByte(x >> 16 & 255);
			this.writeByte(x >>> 24);
		}
	}
	,writeString: function(s,encoding) {
		var b = haxe_io_Bytes.ofString(s,encoding);
		this.writeFullBytes(b,0,b.length);
	}
	,__class__: haxe_io_Output
	,__properties__: {set_bigEndian:"set_bigEndian"}
};
var haxe_io_BytesOutput = function() {
	this.b = new haxe_io_BytesBuffer();
};
$hxClasses["haxe.io.BytesOutput"] = haxe_io_BytesOutput;
haxe_io_BytesOutput.__name__ = "haxe.io.BytesOutput";
haxe_io_BytesOutput.__super__ = haxe_io_Output;
haxe_io_BytesOutput.prototype = $extend(haxe_io_Output.prototype,{
	writeByte: function(c) {
		this.b.addByte(c);
	}
	,writeBytes: function(buf,pos,len) {
		this.b.addBytes(buf,pos,len);
		return len;
	}
	,getBytes: function() {
		return this.b.getBytes();
	}
	,__class__: haxe_io_BytesOutput
});
var haxe_io_Encoding = $hxEnums["haxe.io.Encoding"] = { __ename__ : true, __constructs__ : ["UTF8","RawNative"]
	,UTF8: {_hx_index:0,__enum__:"haxe.io.Encoding",toString:$estr}
	,RawNative: {_hx_index:1,__enum__:"haxe.io.Encoding",toString:$estr}
};
var haxe_io_Eof = function() {
};
$hxClasses["haxe.io.Eof"] = haxe_io_Eof;
haxe_io_Eof.__name__ = "haxe.io.Eof";
haxe_io_Eof.prototype = {
	toString: function() {
		return "Eof";
	}
	,__class__: haxe_io_Eof
};
var haxe_io_Error = $hxEnums["haxe.io.Error"] = { __ename__ : true, __constructs__ : ["Blocked","Overflow","OutsideBounds","Custom"]
	,Blocked: {_hx_index:0,__enum__:"haxe.io.Error",toString:$estr}
	,Overflow: {_hx_index:1,__enum__:"haxe.io.Error",toString:$estr}
	,OutsideBounds: {_hx_index:2,__enum__:"haxe.io.Error",toString:$estr}
	,Custom: ($_=function(e) { return {_hx_index:3,e:e,__enum__:"haxe.io.Error",toString:$estr}; },$_.__params__ = ["e"],$_)
};
var haxe_io_FPHelper = function() { };
$hxClasses["haxe.io.FPHelper"] = haxe_io_FPHelper;
haxe_io_FPHelper.__name__ = "haxe.io.FPHelper";
haxe_io_FPHelper.i32ToFloat = function(i) {
	haxe_io_FPHelper.helper.setInt32(0,i,true);
	return haxe_io_FPHelper.helper.getFloat32(0,true);
};
haxe_io_FPHelper.floatToI32 = function(f) {
	haxe_io_FPHelper.helper.setFloat32(0,f,true);
	return haxe_io_FPHelper.helper.getInt32(0,true);
};
haxe_io_FPHelper.i64ToDouble = function(low,high) {
	haxe_io_FPHelper.helper.setInt32(0,low,true);
	haxe_io_FPHelper.helper.setInt32(4,high,true);
	return haxe_io_FPHelper.helper.getFloat64(0,true);
};
var haxe_iterators_ArrayIterator = function(array) {
	this.current = 0;
	this.array = array;
};
$hxClasses["haxe.iterators.ArrayIterator"] = haxe_iterators_ArrayIterator;
haxe_iterators_ArrayIterator.__name__ = "haxe.iterators.ArrayIterator";
haxe_iterators_ArrayIterator.prototype = {
	hasNext: function() {
		return this.current < this.array.length;
	}
	,next: function() {
		return this.array[this.current++];
	}
	,__class__: haxe_iterators_ArrayIterator
};
var iron_RenderTargetRaw = function() {
	this.is_cubemap = null;
	this.is_image = null;
	this.depth = null;
	this.mipmaps = null;
	this.depth_buffer = null;
	this.displayp = null;
	this.scale = null;
	this.format = null;
};
$hxClasses["iron.RenderTargetRaw"] = iron_RenderTargetRaw;
iron_RenderTargetRaw.__name__ = "iron.RenderTargetRaw";
iron_RenderTargetRaw.prototype = {
	__class__: iron_RenderTargetRaw
};
var iron_RenderTarget = function(raw) {
	this.isCubeMap = false;
	this.is3D = false;
	this.hasDepth = false;
	this.cubeMap = null;
	this.image = null;
	this.depthStencilFrom = "";
	this.raw = raw;
};
$hxClasses["iron.RenderTarget"] = iron_RenderTarget;
iron_RenderTarget.__name__ = "iron.RenderTarget";
iron_RenderTarget.prototype = {
	unload: function() {
		if(this.image != null) {
			this.image.unload();
		}
		if(this.cubeMap != null) {
			this.cubeMap.unload();
		}
	}
	,__class__: iron_RenderTarget
};
var iron_CachedShaderContext = function() {
};
$hxClasses["iron.CachedShaderContext"] = iron_CachedShaderContext;
iron_CachedShaderContext.__name__ = "iron.CachedShaderContext";
iron_CachedShaderContext.prototype = {
	__class__: iron_CachedShaderContext
};
var iron_data_Armature = function(uid,name,actions) {
	this.actions = [];
	this.uid = uid;
	this.name = name;
	var _g = 0;
	while(_g < actions.length) {
		var a = actions[_g];
		++_g;
		var _g1 = 0;
		var _g2 = a.objects;
		while(_g1 < _g2.length) iron_data_Armature.setParents(_g2[_g1++]);
		var bones = [[]];
		iron_data_Armature.traverseBones(a.objects,(function(bones) {
			return function(object) {
				bones[0].push(object);
			};
		})(bones));
		this.actions.push({ name : a.name, bones : bones[0], mats : null});
	}
};
$hxClasses["iron.data.Armature"] = iron_data_Armature;
iron_data_Armature.__name__ = "iron.data.Armature";
iron_data_Armature.setParents = function(object) {
	if(object.children == null) {
		return;
	}
	var _g = 0;
	var _g1 = object.children;
	while(_g < _g1.length) {
		var o = _g1[_g];
		++_g;
		o.parent = object;
		iron_data_Armature.setParents(o);
	}
};
iron_data_Armature.traverseBones = function(objects,callback) {
	var _g = 0;
	var _g1 = objects.length;
	while(_g < _g1) iron_data_Armature.traverseBonesStep(objects[_g++],callback);
};
iron_data_Armature.traverseBonesStep = function(object,callback) {
	if(object.type == "bone_object") {
		callback(object);
	}
	if(object.children == null) {
		return;
	}
	var _g = 0;
	var _g1 = object.children.length;
	while(_g < _g1) iron_data_Armature.traverseBonesStep(object.children[_g++],callback);
};
iron_data_Armature.prototype = {
	__class__: iron_data_Armature
};
var iron_data_CameraData = function(raw,done) {
	this.raw = raw;
	this.name = raw.name;
	done(this);
};
$hxClasses["iron.data.CameraData"] = iron_data_CameraData;
iron_data_CameraData.__name__ = "iron.data.CameraData";
iron_data_CameraData.parse = function(name,id,done) {
	iron_data_Data.getSceneRaw(name,function(format) {
		var raw = iron_data_Data.getCameraRawByName(format.camera_datas,id);
		if(raw == null) {
			haxe_Log.trace("Camera data \"" + id + "\" not found!",{ fileName : "Sources/iron/data/CameraData.hx", lineNumber : 20, className : "iron.data.CameraData", methodName : "parse"});
			done(null);
		}
		new iron_data_CameraData(raw,done);
	});
};
iron_data_CameraData.prototype = {
	__class__: iron_data_CameraData
};
var iron_data_ConstData = function() { };
$hxClasses["iron.data.ConstData"] = iron_data_ConstData;
iron_data_ConstData.__name__ = "iron.data.ConstData";
iron_data_ConstData.createScreenAlignedData = function() {
	var data = [-1.0,-1.0,3.0,-1.0,-1.0,3.0];
	var indices = [0,1,2];
	var structure = new kha_graphics4_VertexStructure();
	structure.add("pos",1);
	iron_data_ConstData.screenAlignedVB = new kha_graphics4_VertexBuffer(data.length / (structure.byteSize() / 4 | 0) | 0,structure,0);
	var vertices = iron_data_ConstData.screenAlignedVB.lock();
	var _g = 0;
	var _g1 = vertices.length;
	while(_g < _g1) {
		var i = _g++;
		vertices[i] = data[i];
	}
	iron_data_ConstData.screenAlignedVB.unlock();
	iron_data_ConstData.screenAlignedIB = new kha_graphics4_IndexBuffer(indices.length,0);
	var id = iron_data_ConstData.screenAlignedIB.lock();
	var _g = 0;
	var _g1 = id.length;
	while(_g < _g1) {
		var i = _g++;
		id[i] = indices[i];
	}
	iron_data_ConstData.screenAlignedIB.unlock();
};
iron_data_ConstData.createSkydomeData = function() {
	var structure = new kha_graphics4_VertexStructure();
	structure.add("pos",2);
	structure.add("nor",2);
	var structLength = structure.byteSize() / 4 | 0;
	var pos = iron_data_ConstData.skydomePos;
	var nor = iron_data_ConstData.skydomeNor;
	iron_data_ConstData.skydomeVB = new kha_graphics4_VertexBuffer(pos.length / 3 | 0,structure,0);
	var vertices = iron_data_ConstData.skydomeVB.lock();
	var _g = 0;
	var _g1 = vertices.length / structLength | 0;
	while(_g < _g1) {
		var i = _g++;
		vertices[i * structLength] = pos[i * 3];
		vertices[i * structLength + 1] = pos[i * 3 + 1];
		vertices[i * structLength + 2] = pos[i * 3 + 2];
		vertices[i * structLength + 3] = -nor[i * 3];
		vertices[i * structLength + 4] = -nor[i * 3 + 1];
		vertices[i * structLength + 5] = -nor[i * 3 + 2];
	}
	iron_data_ConstData.skydomeVB.unlock();
	var indices = iron_data_ConstData.skydomeIndices;
	iron_data_ConstData.skydomeIB = new kha_graphics4_IndexBuffer(indices.length,0);
	var id = iron_data_ConstData.skydomeIB.lock();
	var _g = 0;
	var _g1 = id.length;
	while(_g < _g1) {
		var i = _g++;
		id[i] = indices[i];
	}
	iron_data_ConstData.skydomeIB.unlock();
};
var iron_data_Geometry = function(data,indices,materialIndices,usage) {
	this.mats = null;
	this.actions = null;
	this.skeletonBoneLens = null;
	this.skeletonBoneRefs = null;
	this.skeletonTransformsI = null;
	this.skinBoneWeights = null;
	this.skinBoneIndices = null;
	this.skinBoneCounts = null;
	this.aabbMax = null;
	this.aabbMin = null;
	this.aabb = null;
	this.instanceCount = 0;
	this.instanced = false;
	this.instancedVB = null;
	this.numTris = 0;
	this.ready = false;
	this.name = "";
	this.count = -1;
	this.start = 0;
	this.vertexBufferMap = new haxe_ds_StringMap();
	if(usage == null) {
		usage = 0;
	}
	this.indices = indices;
	this.materialIndices = materialIndices;
	this.usage = usage;
	this.vertexArrays = data.raw.vertex_arrays;
	this.positions = this.getVArray("pos");
	this.normals = this.getVArray("nor");
	this.uvs = this.getVArray("tex");
	this.cols = this.getVArray("col");
	this.data = data;
	this.struct = iron_data_Geometry.getVertexStructure(this.vertexArrays);
	this.structLength = this.struct.byteSize() / 2 | 0;
	this.structStr = "";
	var _g = 0;
	var _g1 = this.struct.elements;
	while(_g < _g1.length) this.structStr += _g1[_g++].name;
};
$hxClasses["iron.data.Geometry"] = iron_data_Geometry;
iron_data_Geometry.__name__ = "iron.data.Geometry";
iron_data_Geometry.getVertexStructure = function(vertexArrays) {
	var structure = new kha_graphics4_VertexStructure();
	var _g = 0;
	var _g1 = vertexArrays.length;
	while(_g < _g1) {
		var i = _g++;
		structure.add(vertexArrays[i].attrib,iron_data_Geometry.getVertexData(vertexArrays[i].data));
	}
	return structure;
};
iron_data_Geometry.getVertexData = function(data) {
	switch(data) {
	case "short2norm":
		return 5;
	case "short4norm":
		return 6;
	default:
		return 6;
	}
};
iron_data_Geometry.buildVertices = function(vertices,vertexArrays,offset,fakeUVs,uvsIndex) {
	if(uvsIndex == null) {
		uvsIndex = -1;
	}
	if(fakeUVs == null) {
		fakeUVs = false;
	}
	if(offset == null) {
		offset = 0;
	}
	var arr = vertexArrays[0];
	var numVertices = arr.values.length / arr.size | 0;
	var di = -1 + offset;
	var _g = 0;
	while(_g < numVertices) {
		var i = _g++;
		var _g1 = 0;
		var _g2 = vertexArrays.length;
		while(_g1 < _g2) {
			var va = _g1++;
			var l = vertexArrays[va].size;
			if(fakeUVs && va == uvsIndex) {
				var _g3 = 0;
				while(_g3 < l) {
					++_g3;
					vertices[++di] = 0;
				}
				continue;
			}
			var _g4 = 0;
			while(_g4 < l) vertices[++di] = vertexArrays[va].values[i * l + _g4++];
			if(vertexArrays[va].padding != null) {
				if(vertexArrays[va].padding == 1) {
					vertices[++di] = 0;
				}
			}
		}
	}
};
iron_data_Geometry.prototype = {
	'delete': function() {
		var buf = haxe_ds_StringMap.valueIterator(this.vertexBufferMap.h);
		while(buf.hasNext()) {
			var buf1 = buf.next();
			if(buf1 != null) {
				buf1.delete();
			}
		}
		var _g = 0;
		var _g1 = this.indexBuffers;
		while(_g < _g1.length) _g1[_g++].delete();
	}
	,applyScale: function(sx,sy,sz) {
		this.data.scalePos *= sx;
	}
	,getVArray: function(name) {
		var _g = 0;
		var _g1 = this.vertexArrays.length;
		while(_g < _g1) {
			var i = _g++;
			if(this.vertexArrays[i].attrib == name) {
				return this.vertexArrays[i];
			}
		}
		return null;
	}
	,setupInstanced: function(data,instancedType,usage) {
		var structure = new kha_graphics4_VertexStructure();
		structure.instanced = true;
		this.instanced = true;
		structure.add("ipos",2);
		if(instancedType == 2 || instancedType == 4) {
			structure.add("irot",2);
		}
		if(instancedType == 3 || instancedType == 4) {
			structure.add("iscl",2);
		}
		this.instanceCount = data.length / (structure.byteSize() / 4 | 0) | 0;
		this.instancedVB = new kha_graphics4_VertexBuffer(this.instanceCount,structure,usage,1);
		var vertices = this.instancedVB.lock();
		var _g = 0;
		var _g1 = vertices.length;
		while(_g < _g1) {
			var i = _g++;
			vertices[i] = data[i];
		}
		this.instancedVB.unlock();
	}
	,get: function(vs) {
		var key = "";
		var _g = 0;
		while(_g < vs.length) key += vs[_g++].name;
		var vb = this.vertexBufferMap.h[key];
		if(vb == null) {
			var nVertexArrays = [];
			var atex = false;
			var texOffset = -1;
			var acol = false;
			var _g = 0;
			var _g1 = vs.length;
			while(_g < _g1) {
				var e = _g++;
				if(vs[e].name == "tex") {
					atex = true;
					texOffset = e;
				}
				if(vs[e].name == "col") {
					acol = true;
				}
				var _g2 = 0;
				var _g3 = this.vertexArrays.length;
				while(_g2 < _g3) {
					var va = _g2++;
					if(vs[e].name == this.vertexArrays[va].attrib) {
						nVertexArrays.push(this.vertexArrays[va]);
					}
				}
			}
			var struct = iron_data_Geometry.getVertexStructure(nVertexArrays);
			vb = new kha_graphics4_VertexBuffer(this.positions.values.length / this.positions.size | 0,struct,this.usage);
			this.vertices = vb.lockInt16();
			iron_data_Geometry.buildVertices(this.vertices,nVertexArrays,0,atex && this.uvs == null,texOffset);
			vb.unlock();
			this.vertexBufferMap.h[key] = vb;
			if(atex && this.uvs == null) {
				haxe_Log.trace("Armory Warning: Geometry " + this.name + " is missing UV map",{ fileName : "Sources/iron/data/Geometry.hx", lineNumber : 224, className : "iron.data.Geometry", methodName : "get"});
			}
			if(acol && this.cols == null) {
				haxe_Log.trace("Armory Warning: Geometry " + this.name + " is missing vertex colors",{ fileName : "Sources/iron/data/Geometry.hx", lineNumber : 225, className : "iron.data.Geometry", methodName : "get"});
			}
		}
		return vb;
	}
	,build: function() {
		if(this.ready) {
			return;
		}
		this.vertexBuffer = new kha_graphics4_VertexBuffer(this.positions.values.length / this.positions.size | 0,this.struct,this.usage);
		this.vertices = this.vertexBuffer.lockInt16();
		iron_data_Geometry.buildVertices(this.vertices,this.vertexArrays);
		this.vertexBuffer.unlock();
		this.vertexBufferMap.h[this.structStr] = this.vertexBuffer;
		this.indexBuffers = [];
		var _g = 0;
		var _g1 = this.indices;
		while(_g < _g1.length) {
			var id = _g1[_g];
			++_g;
			if(id.length == 0) {
				continue;
			}
			var indexBuffer = new kha_graphics4_IndexBuffer(id.length,this.usage);
			this.numTris += id.length / 3 | 0;
			var indicesA = indexBuffer.lock();
			var _g2 = 0;
			var _g3 = indicesA.length;
			while(_g2 < _g3) {
				var i = _g2++;
				indicesA[i] = id[i];
			}
			indexBuffer.unlock();
			this.indexBuffers.push(indexBuffer);
		}
		if(this.data.raw.instanced_data != null) {
			this.setupInstanced(this.data.raw.instanced_data,this.data.raw.instanced_type,this.usage);
		}
		this.ready = true;
	}
	,addArmature: function(armature) {
		var _g = 0;
		var _g1 = armature.actions;
		while(_g < _g1.length) {
			var a = _g1[_g];
			++_g;
			this.addAction(a.bones,a.name);
		}
	}
	,addAction: function(bones,name) {
		if(bones == null) {
			return;
		}
		if(this.actions == null) {
			this.actions = new haxe_ds_StringMap();
			this.mats = new haxe_ds_StringMap();
		}
		if(this.actions.h[name] != null) {
			return;
		}
		var actionBones = [];
		var _g = 0;
		var _g1 = this.skeletonBoneRefs;
		while(_g < _g1.length) {
			var s = _g1[_g++];
			var _g2 = 0;
			while(_g2 < bones.length) {
				var b = bones[_g2];
				++_g2;
				if(b.name == s) {
					actionBones.push(b);
				}
			}
		}
		this.actions.h[name] = actionBones;
		var actionMats = [];
		var _g = 0;
		while(_g < actionBones.length) {
			var a = actionBones[_g++].transform.values;
			actionMats.push(new iron_math_Mat4(a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15]));
		}
		this.mats.h[name] = actionMats;
	}
	,initSkeletonTransforms: function(transformsI) {
		this.skeletonTransformsI = [];
		var _g = 0;
		while(_g < transformsI.length) {
			var t = transformsI[_g];
			++_g;
			this.skeletonTransformsI.push(new iron_math_Mat4(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]));
		}
	}
	,calculateAABB: function() {
		this.aabbMin = new iron_math_Vec4(-0.01,-0.01,-0.01);
		this.aabbMax = new iron_math_Vec4(0.01,0.01,0.01);
		this.aabb = new iron_math_Vec4();
		var i = 0;
		while(i < this.positions.values.length) {
			if(this.positions.values[i] > this.aabbMax.x) {
				this.aabbMax.x = this.positions.values[i];
			}
			if(this.positions.values[i + 1] > this.aabbMax.y) {
				this.aabbMax.y = this.positions.values[i + 1];
			}
			if(this.positions.values[i + 2] > this.aabbMax.z) {
				this.aabbMax.z = this.positions.values[i + 2];
			}
			if(this.positions.values[i] < this.aabbMin.x) {
				this.aabbMin.x = this.positions.values[i];
			}
			if(this.positions.values[i + 1] < this.aabbMin.y) {
				this.aabbMin.y = this.positions.values[i + 1];
			}
			if(this.positions.values[i + 2] < this.aabbMin.z) {
				this.aabbMin.z = this.positions.values[i + 2];
			}
			i += 4;
		}
		this.aabb.x = (Math.abs(this.aabbMin.x) + Math.abs(this.aabbMax.x)) / 32767 * this.data.scalePos;
		this.aabb.y = (Math.abs(this.aabbMin.y) + Math.abs(this.aabbMax.y)) / 32767 * this.data.scalePos;
		this.aabb.z = (Math.abs(this.aabbMin.z) + Math.abs(this.aabbMax.z)) / 32767 * this.data.scalePos;
	}
	,__class__: iron_data_Geometry
};
var iron_data_LightData = function(raw,done) {
	this.raw = raw;
	this.name = raw.name;
	done(this);
};
$hxClasses["iron.data.LightData"] = iron_data_LightData;
iron_data_LightData.__name__ = "iron.data.LightData";
iron_data_LightData.parse = function(name,id,done) {
	iron_data_Data.getSceneRaw(name,function(format) {
		var raw = iron_data_Data.getLightRawByName(format.light_datas,id);
		if(raw == null) {
			haxe_Log.trace("Light data \"" + id + "\" not found!",{ fileName : "Sources/iron/data/LightData.hx", lineNumber : 30, className : "iron.data.LightData", methodName : "parse"});
			done(null);
		}
		new iron_data_LightData(raw,done);
	});
};
iron_data_LightData.prototype = {
	__class__: iron_data_LightData
};
var iron_data_MaterialData = function(raw,done,file) {
	if(file == null) {
		file = "";
	}
	this.contexts = null;
	var _gthis = this;
	this.uid = ++iron_data_MaterialData.uidCounter;
	this.raw = raw;
	this.name = raw.name;
	var ref = raw.shader.split("/");
	var object_file = "";
	var data_ref = "";
	if(ref.length == 2) {
		object_file = ref[0];
		data_ref = ref[1];
	} else {
		object_file = file;
		data_ref = raw.shader;
	}
	iron_data_Data.getShader(object_file,data_ref,function(b) {
		_gthis.shader = b;
		_gthis.contexts = [];
		while(_gthis.contexts.length < raw.contexts.length) _gthis.contexts.push(null);
		var contextsLoaded = 0;
		var _g = 0;
		var _g1 = raw.contexts.length;
		while(_g < _g1) {
			var i = [_g++];
			new iron_data_MaterialContext(raw.contexts[i[0]],(function(i) {
				return function(self) {
					_gthis.contexts[i[0]] = self;
					contextsLoaded += 1;
					if(contextsLoaded == raw.contexts.length) {
						done(_gthis);
					}
				};
			})(i));
		}
	},raw.override_context);
};
$hxClasses["iron.data.MaterialData"] = iron_data_MaterialData;
iron_data_MaterialData.__name__ = "iron.data.MaterialData";
iron_data_MaterialData.parse = function(file,name,done) {
	iron_data_Data.getSceneRaw(file,function(format) {
		var raw = iron_data_Data.getMaterialRawByName(format.material_datas,name);
		if(raw == null) {
			haxe_Log.trace("Material data \"" + name + "\" not found!",{ fileName : "Sources/iron/data/MaterialData.hx", lineNumber : 58, className : "iron.data.MaterialData", methodName : "parse"});
			done(null);
		}
		new iron_data_MaterialData(raw,done,file);
	});
};
iron_data_MaterialData.prototype = {
	getContext: function(name) {
		var _g = 0;
		var _g1 = this.contexts;
		while(_g < _g1.length) {
			var c = _g1[_g];
			++_g;
			if(HxOverrides.substr(c.raw.name,0,name.length) == name) {
				return c;
			}
		}
		return null;
	}
	,__class__: iron_data_MaterialData
};
var iron_data_MaterialContext = function(raw,done) {
	this.id = 0;
	this.textures = null;
	var _gthis = this;
	this.raw = raw;
	this.id = iron_data_MaterialContext.num++;
	if(raw.bind_textures != null && raw.bind_textures.length > 0) {
		this.textures = new Array(raw.bind_textures.length);
		var texturesLoaded = 0;
		var _g = 0;
		var _g1 = raw.bind_textures.length;
		while(_g < _g1) {
			var i = [_g++];
			var tex = [raw.bind_textures[i[0]]];
			if(tex[0].file == "" || tex[0].source == "movie") {
				texturesLoaded += 1;
				if(texturesLoaded == raw.bind_textures.length) {
					done(this);
				}
				continue;
			}
			iron_data_Data.getImage(tex[0].file,(function(tex,i) {
				return function(image) {
					_gthis.textures[i[0]] = image;
					texturesLoaded += 1;
					if(tex[0].mipmaps != null) {
						var mipmaps = [];
						while(mipmaps.length < tex[0].mipmaps.length) mipmaps.push(null);
						var mipmapsLoaded = 0;
						var _g = 0;
						var _g1 = tex[0].mipmaps.length;
						while(_g < _g1) {
							var j = [_g++];
							iron_data_Data.getImage(tex[0].mipmaps[j[0]],(function(j,tex) {
								return function(mipimg) {
									mipmaps[j[0]] = mipimg;
									mipmapsLoaded += 1;
									if(mipmapsLoaded == tex[0].mipmaps.length) {
										image.setMipmaps(mipmaps);
										tex[0].mipmaps = null;
										tex[0].generate_mipmaps = false;
										if(texturesLoaded == raw.bind_textures.length) {
											done(_gthis);
										}
									}
								};
							})(j,tex));
						}
					} else if(tex[0].generate_mipmaps == true && image != null) {
						image.generateMipmaps(1000);
						tex[0].mipmaps = null;
						tex[0].generate_mipmaps = false;
						if(texturesLoaded == raw.bind_textures.length) {
							done(_gthis);
						}
					} else if(texturesLoaded == raw.bind_textures.length) {
						done(_gthis);
					}
				};
			})(tex,i),false,tex[0].format != null ? tex[0].format : "RGBA32");
		}
	} else {
		done(this);
	}
};
$hxClasses["iron.data.MaterialContext"] = iron_data_MaterialContext;
iron_data_MaterialContext.__name__ = "iron.data.MaterialContext";
iron_data_MaterialContext.prototype = {
	setTextureParameters: function(g,textureIndex,context,unitIndex) {
		context.setTextureParameters(g,unitIndex,this.raw.bind_textures[textureIndex]);
	}
	,__class__: iron_data_MaterialContext
};
var iron_data_MeshData = function(raw,done) {
	this.scaleTex = 1.0;
	this.scalePos = 1.0;
	this.refcount = 0;
	this.raw = raw;
	this.name = raw.name;
	if(raw.scale_pos != null) {
		this.scalePos = raw.scale_pos;
	}
	if(raw.scale_tex != null) {
		this.scaleTex = raw.scale_tex;
	}
	var indices = [];
	var materialIndices = [];
	var _g = 0;
	var _g1 = raw.index_arrays;
	while(_g < _g1.length) {
		var ind = _g1[_g];
		++_g;
		indices.push(ind.values);
		materialIndices.push(ind.material);
	}
	this.isSkinned = raw.skin != null;
	var vertexArrays = raw.vertex_arrays;
	if(this.isSkinned) {
		vertexArrays.push({ attrib : "bone", values : null, data : "short4norm"});
		vertexArrays.push({ attrib : "weight", values : null, data : "short4norm"});
	}
	var _g = 0;
	var _g1 = vertexArrays.length;
	while(_g < _g1) {
		var i = _g++;
		var padding = vertexArrays[i].padding;
		vertexArrays[i].size = this.getVertexSize(vertexArrays[i].data,padding != null ? padding : 0);
	}
	var parsedUsage = 0;
	if(raw.dynamic_usage != null && raw.dynamic_usage == true) {
		parsedUsage = 1;
	}
	var usage = parsedUsage;
	if(this.isSkinned) {
		var bonea = null;
		var weighta = null;
		var vertex_length = vertexArrays[0].values.length / vertexArrays[0].size | 0;
		var l = vertex_length * 4;
		bonea = new Int16Array(l);
		weighta = new Int16Array(l);
		var index = 0;
		var ai = 0;
		var _g = 0;
		while(_g < vertex_length) {
			var boneCount = raw.skin.bone_count_array[_g++];
			var _g1 = index;
			var _g2 = index + boneCount;
			while(_g1 < _g2) {
				var j = _g1++;
				bonea[ai] = raw.skin.bone_index_array[j];
				weighta[ai] = raw.skin.bone_weight_array[j];
				++ai;
			}
			var _g3 = boneCount;
			while(_g3 < 4) {
				++_g3;
				bonea[ai] = 0;
				weighta[ai] = 0;
				++ai;
			}
			index += boneCount;
		}
		vertexArrays[vertexArrays.length - 2].values = bonea;
		vertexArrays[vertexArrays.length - 1].values = weighta;
	}
	this.geom = new iron_data_Geometry(this,indices,materialIndices,usage);
	this.geom.name = this.name;
	done(this);
};
$hxClasses["iron.data.MeshData"] = iron_data_MeshData;
iron_data_MeshData.__name__ = "iron.data.MeshData";
iron_data_MeshData.parse = function(name,id,done) {
	iron_data_Data.getSceneRaw(name,function(format) {
		var raw = iron_data_Data.getMeshRawByName(format.mesh_datas,id);
		if(raw == null) {
			haxe_Log.trace("Mesh data \"" + id + "\" not found!",{ fileName : "Sources/iron/data/MeshData.hx", lineNumber : 101, className : "iron.data.MeshData", methodName : "parse"});
			done(null);
		}
		new iron_data_MeshData(raw,function(dat) {
			dat.format = format;
			if(raw.skin != null) {
				dat.geom.skinBoneCounts = raw.skin.bone_count_array;
				dat.geom.skinBoneIndices = raw.skin.bone_index_array;
				dat.geom.skinBoneWeights = raw.skin.bone_weight_array;
				dat.geom.skeletonBoneRefs = raw.skin.bone_ref_array;
				dat.geom.skeletonBoneLens = raw.skin.bone_len_array;
				dat.geom.initSkeletonTransforms(raw.skin.transformsI);
			}
			done(dat);
		});
	});
};
iron_data_MeshData.prototype = {
	'delete': function() {
		this.geom.delete();
	}
	,getVertexSize: function(vertex_data,padding) {
		if(padding == null) {
			padding = 0;
		}
		switch(vertex_data) {
		case "short2norm":
			return 2 - padding;
		case "short4norm":
			return 4 - padding;
		default:
			return 0;
		}
	}
	,__class__: iron_data_MeshData
};
var iron_data_ParticleData = function(raw,done) {
	this.raw = raw;
	this.name = raw.name;
	done(this);
};
$hxClasses["iron.data.ParticleData"] = iron_data_ParticleData;
iron_data_ParticleData.__name__ = "iron.data.ParticleData";
iron_data_ParticleData.parse = function(name,id,done) {
	iron_data_Data.getSceneRaw(name,function(format) {
		var raw = iron_data_Data.getParticleRawByName(format.particle_datas,id);
		if(raw == null) {
			haxe_Log.trace("Particle data \"" + id + "\" not found!",{ fileName : "Sources/iron/data/ParticleData.hx", lineNumber : 21, className : "iron.data.ParticleData", methodName : "parse"});
			done(null);
		}
		new iron_data_ParticleData(raw,done);
	});
};
iron_data_ParticleData.prototype = {
	__class__: iron_data_ParticleData
};
var iron_data_ShaderData = function(raw,done,overrideContext) {
	this.contexts = [];
	var _gthis = this;
	this.raw = raw;
	this.name = raw.name;
	var _g = 0;
	var _g1 = raw.contexts;
	while(_g < _g1.length) {
		++_g;
		this.contexts.push(null);
	}
	var contextsLoaded = 0;
	var _g = 0;
	var _g1 = raw.contexts.length;
	while(_g < _g1) {
		var i = [_g++];
		new iron_data_ShaderContext(raw.contexts[i[0]],(function(i) {
			return function(con) {
				_gthis.contexts[i[0]] = con;
				contextsLoaded += 1;
				if(contextsLoaded == raw.contexts.length) {
					done(_gthis);
				}
			};
		})(i),overrideContext);
	}
};
$hxClasses["iron.data.ShaderData"] = iron_data_ShaderData;
iron_data_ShaderData.__name__ = "iron.data.ShaderData";
iron_data_ShaderData.parse = function(file,name,done,overrideContext) {
	iron_data_Data.getSceneRaw(file,function(format) {
		var raw = iron_data_Data.getShaderRawByName(format.shader_datas,name);
		if(raw == null) {
			haxe_Log.trace("Shader data \"" + name + "\" not found!",{ fileName : "Sources/iron/data/ShaderData.hx", lineNumber : 50, className : "iron.data.ShaderData", methodName : "parse"});
			done(null);
		}
		new iron_data_ShaderData(raw,done,overrideContext);
	});
};
iron_data_ShaderData.prototype = {
	getContext: function(name) {
		var _g = 0;
		var _g1 = this.contexts;
		while(_g < _g1.length) {
			var c = _g1[_g];
			++_g;
			if(c.raw.name == name) {
				return c;
			}
		}
		return null;
	}
	,__class__: iron_data_ShaderData
};
var iron_data_ShaderContext = function(raw,done,overrideContext) {
	this.instancingType = 0;
	this.raw = raw;
	this.overrideContext = overrideContext;
	this.parseVertexStructure();
	this.compile(done);
};
$hxClasses["iron.data.ShaderContext"] = iron_data_ShaderContext;
iron_data_ShaderContext.__name__ = "iron.data.ShaderContext";
iron_data_ShaderContext.parseData = function(data) {
	if(data == "float1") {
		return 0;
	} else if(data == "float2") {
		return 1;
	} else if(data == "float3") {
		return 2;
	} else if(data == "float4") {
		return 3;
	} else if(data == "short2norm") {
		return 5;
	} else if(data == "short4norm") {
		return 6;
	}
	return 0;
};
iron_data_ShaderContext.prototype = {
	compile: function(done) {
		if(this.pipeState != null) {
			this.pipeState.delete();
		}
		this.pipeState = new kha_graphics4_PipelineState();
		this.constants = [];
		this.textureUnits = [];
		if(this.instancingType > 0) {
			var instStruct = new kha_graphics4_VertexStructure();
			instStruct.add("ipos",2);
			if(this.instancingType == 2 || this.instancingType == 4) {
				instStruct.add("irot",2);
			}
			if(this.instancingType == 3 || this.instancingType == 4) {
				instStruct.add("iscl",2);
			}
			instStruct.instanced = true;
			this.pipeState.inputLayout = [this.structure,instStruct];
		} else {
			this.pipeState.inputLayout = [this.structure];
		}
		this.pipeState.depthWrite = this.raw.depth_write;
		this.pipeState.depthMode = this.getCompareMode(this.raw.compare_mode);
		this.pipeState.cullMode = this.getCullMode(this.raw.cull_mode);
		if(this.raw.blend_source != null) {
			this.pipeState.blendSource = this.getBlendingFactor(this.raw.blend_source);
		}
		if(this.raw.blend_destination != null) {
			this.pipeState.blendDestination = this.getBlendingFactor(this.raw.blend_destination);
		}
		if(this.raw.blend_operation != null) {
			this.pipeState.blendOperation = this.getBlendingOperation(this.raw.blend_operation);
		}
		if(this.raw.alpha_blend_source != null) {
			this.pipeState.alphaBlendSource = this.getBlendingFactor(this.raw.alpha_blend_source);
		}
		if(this.raw.alpha_blend_destination != null) {
			this.pipeState.alphaBlendDestination = this.getBlendingFactor(this.raw.alpha_blend_destination);
		}
		if(this.raw.alpha_blend_operation != null) {
			this.pipeState.alphaBlendOperation = this.getBlendingOperation(this.raw.alpha_blend_operation);
		}
		if(this.raw.color_writes_red != null) {
			var _g = 0;
			var _g1 = this.raw.color_writes_red.length;
			while(_g < _g1) {
				var i = _g++;
				this.pipeState.colorWriteMasksRed[i] = this.raw.color_writes_red[i];
			}
		}
		if(this.raw.color_writes_green != null) {
			var _g = 0;
			var _g1 = this.raw.color_writes_green.length;
			while(_g < _g1) {
				var i = _g++;
				this.pipeState.colorWriteMasksGreen[i] = this.raw.color_writes_green[i];
			}
		}
		if(this.raw.color_writes_blue != null) {
			var _g = 0;
			var _g1 = this.raw.color_writes_blue.length;
			while(_g < _g1) {
				var i = _g++;
				this.pipeState.colorWriteMasksBlue[i] = this.raw.color_writes_blue[i];
			}
		}
		if(this.raw.color_writes_alpha != null) {
			var _g = 0;
			var _g1 = this.raw.color_writes_alpha.length;
			while(_g < _g1) {
				var i = _g++;
				this.pipeState.colorWriteMasksAlpha[i] = this.raw.color_writes_alpha[i];
			}
		}
		if(this.raw.color_attachments != null) {
			this.pipeState.colorAttachmentCount = this.raw.color_attachments.length;
			var _g = 0;
			var _g1 = this.raw.color_attachments.length;
			while(_g < _g1) {
				var i = _g++;
				this.pipeState.colorAttachments[i] = this.getTextureFormat(this.raw.color_attachments[i]);
			}
		}
		if(this.raw.depth_attachment != null) {
			this.pipeState.depthStencilAttachment = this.getDepthStencilFormat(this.raw.depth_attachment);
		}
		if(this.raw.conservative_raster != null) {
			this.pipeState.conservativeRasterization = this.raw.conservative_raster;
		}
		if(this.raw.shader_from_source) {
			this.pipeState.vertexShader = kha_graphics4_VertexShader.fromSource(this.raw.vertex_shader);
			this.pipeState.fragmentShader = kha_graphics4_FragmentShader.fromSource(this.raw.fragment_shader);
			if(this.pipeState.vertexShader.shader == null || this.pipeState.fragmentShader.shader == null) {
				done(null);
				return;
			}
			this.finishCompile(done);
		} else {
			var tmp = StringTools.replace(this.raw.fragment_shader,".","_");
			this.pipeState.fragmentShader = Reflect.field(kha_Shaders,tmp);
			var tmp = StringTools.replace(this.raw.vertex_shader,".","_");
			this.pipeState.vertexShader = Reflect.field(kha_Shaders,tmp);
			if(this.raw.geometry_shader != null) {
				var tmp = StringTools.replace(this.raw.geometry_shader,".","_");
				this.pipeState.geometryShader = Reflect.field(kha_Shaders,tmp);
			}
			if(this.raw.tesscontrol_shader != null) {
				var tmp = StringTools.replace(this.raw.tesscontrol_shader,".","_");
				this.pipeState.tessellationControlShader = Reflect.field(kha_Shaders,tmp);
			}
			if(this.raw.tesseval_shader != null) {
				var tmp = StringTools.replace(this.raw.tesseval_shader,".","_");
				this.pipeState.tessellationEvaluationShader = Reflect.field(kha_Shaders,tmp);
			}
			this.finishCompile(done);
		}
	}
	,finishCompile: function(done) {
		if(this.overrideContext != null) {
			if(this.overrideContext.cull_mode != null) {
				this.pipeState.cullMode = this.getCullMode(this.overrideContext.cull_mode);
			}
		}
		this.pipeState.compile();
		if(this.raw.constants != null) {
			var _g = 0;
			var _g1 = this.raw.constants;
			while(_g < _g1.length) this.addConstant(_g1[_g++]);
		}
		if(this.raw.texture_units != null) {
			var _g = 0;
			var _g1 = this.raw.texture_units;
			while(_g < _g1.length) this.addTexture(_g1[_g++]);
		}
		done(this);
	}
	,parseVertexStructure: function() {
		this.structure = new kha_graphics4_VertexStructure();
		var ipos = false;
		var irot = false;
		var iscl = false;
		var _g = 0;
		var _g1 = this.raw.vertex_elements;
		while(_g < _g1.length) {
			var elem = _g1[_g];
			++_g;
			if(elem.name == "ipos") {
				ipos = true;
				continue;
			}
			if(elem.name == "irot") {
				irot = true;
				continue;
			}
			if(elem.name == "iscl") {
				iscl = true;
				continue;
			}
			this.structure.add(elem.name,iron_data_ShaderContext.parseData(elem.data));
		}
		if(ipos && !irot && !iscl) {
			this.instancingType = 1;
		} else if(ipos && irot && !iscl) {
			this.instancingType = 2;
		} else if(ipos && !irot && iscl) {
			this.instancingType = 3;
		} else if(ipos && irot && iscl) {
			this.instancingType = 4;
		}
	}
	,'delete': function() {
		if(this.pipeState.fragmentShader != null) {
			this.pipeState.fragmentShader.delete();
		}
		if(this.pipeState.vertexShader != null) {
			this.pipeState.vertexShader.delete();
		}
		if(this.pipeState.geometryShader != null) {
			this.pipeState.geometryShader.delete();
		}
		if(this.pipeState.tessellationControlShader != null) {
			this.pipeState.tessellationControlShader.delete();
		}
		if(this.pipeState.tessellationEvaluationShader != null) {
			this.pipeState.tessellationEvaluationShader.delete();
		}
		this.pipeState.delete();
	}
	,getCompareMode: function(s) {
		switch(s) {
		case "always":
			return 0;
		case "equal":
			return 2;
		case "greater":
			return 6;
		case "greater_equal":
			return 7;
		case "less":
			return 4;
		case "less_equal":
			return 5;
		case "never":
			return 1;
		case "not_equal":
			return 3;
		default:
			return 4;
		}
	}
	,getCullMode: function(s) {
		switch(s) {
		case "clockwise":
			return 0;
		case "none":
			return 2;
		default:
			return 1;
		}
	}
	,getBlendingOperation: function(s) {
		switch(s) {
		case "add":
			return 0;
		case "max":
			return 4;
		case "min":
			return 3;
		case "reverse_subtract":
			return 2;
		case "subtract":
			return 1;
		default:
			return 0;
		}
	}
	,getBlendingFactor: function(s) {
		switch(s) {
		case "blend_one":
			return 1;
		case "blend_zero":
			return 2;
		case "destination_alpha":
			return 4;
		case "destination_color":
			return 8;
		case "inverse_destination_alpha":
			return 6;
		case "inverse_destination_color":
			return 10;
		case "inverse_source_alpha":
			return 5;
		case "inverse_source_color":
			return 9;
		case "source_alpha":
			return 3;
		case "source_color":
			return 7;
		default:
			return 0;
		}
	}
	,getTextureAddresing: function(s) {
		switch(s) {
		case "mirror":
			return 1;
		case "repeat":
			return 0;
		default:
			return 2;
		}
	}
	,getTextureFilter: function(s) {
		switch(s) {
		case "linear":
			return 1;
		case "point":
			return 0;
		default:
			return 2;
		}
	}
	,getMipmapFilter: function(s) {
		switch(s) {
		case "no":
			return 0;
		case "point":
			return 1;
		default:
			return 2;
		}
	}
	,getTextureFormat: function(s) {
		switch(s) {
		case "DEPTH16":
			return 3;
		case "R16":
			return 6;
		case "R32":
			return 5;
		case "R8":
			return 1;
		case "RGBA128":
			return 2;
		case "RGBA32":
			return 0;
		case "RGBA64":
			return 4;
		default:
			return 0;
		}
	}
	,getDepthStencilFormat: function(s) {
		switch(s) {
		case "DEPTH32":
			return 1;
		case "NONE":
			return 0;
		default:
			return 1;
		}
	}
	,addConstant: function(c) {
		this.constants.push(this.pipeState.getConstantLocation(c.name));
	}
	,addTexture: function(tu) {
		var unit = this.pipeState.getTextureUnit(tu.name);
		this.textureUnits.push(unit);
	}
	,setTextureParameters: function(g,unitIndex,tex) {
		g.setTextureParameters(this.textureUnits[unitIndex],tex.u_addressing == null ? 0 : this.getTextureAddresing(tex.u_addressing),tex.v_addressing == null ? 0 : this.getTextureAddresing(tex.v_addressing),tex.min_filter == null ? 1 : this.getTextureFilter(tex.min_filter),tex.mag_filter == null ? 1 : this.getTextureFilter(tex.mag_filter),tex.mipmap_filter == null ? 0 : this.getMipmapFilter(tex.mipmap_filter));
	}
	,__class__: iron_data_ShaderContext
};
var iron_data_WorldData = function(raw,done) {
	var _gthis = this;
	this.raw = raw;
	this.name = raw.name;
	if(raw.probe != null) {
		new iron_data_Probe(raw.probe,function(self) {
			_gthis.probe = self;
			done(_gthis);
		});
	} else {
		done(this);
	}
};
$hxClasses["iron.data.WorldData"] = iron_data_WorldData;
iron_data_WorldData.__name__ = "iron.data.WorldData";
iron_data_WorldData.parse = function(name,id,done) {
	iron_data_Data.getSceneRaw(name,function(format) {
		var raw = iron_data_Data.getWorldRawByName(format.world_datas,id);
		if(raw == null) {
			haxe_Log.trace("World data \"" + id + "\" not found!",{ fileName : "Sources/iron/data/WorldData.hx", lineNumber : 57, className : "iron.data.WorldData", methodName : "parse"});
			done(null);
		}
		new iron_data_WorldData(raw,done);
	});
};
iron_data_WorldData.getEmptyIrradiance = function() {
	if(iron_data_WorldData.emptyIrr == null) {
		iron_data_WorldData.emptyIrr = new Float32Array(28);
		var _g = 0;
		var _g1 = iron_data_WorldData.emptyIrr.length;
		while(_g < _g1) iron_data_WorldData.emptyIrr[_g++] = 0.0;
	}
	return iron_data_WorldData.emptyIrr;
};
iron_data_WorldData.prototype = {
	loadEnvmap: function(done) {
		var _gthis = this;
		if(this.raw.envmap != null) {
			iron_data_Data.getImage(this.raw.envmap,function(image) {
				_gthis.envmap = image;
				done(_gthis);
			});
		} else {
			done(this);
		}
	}
	,__class__: iron_data_WorldData
};
var iron_data_Probe = function(raw,done) {
	this.radianceMipmaps = [];
	var _gthis = this;
	this.raw = raw;
	this.setIrradiance(function(irr) {
		_gthis.irradiance = irr;
		if(raw.radiance != null) {
			iron_data_Data.getImage(raw.radiance,function(rad) {
				_gthis.radiance = rad;
				while(_gthis.radianceMipmaps.length < raw.radiance_mipmaps) _gthis.radianceMipmaps.push(null);
				var dot = raw.radiance.lastIndexOf(".");
				var ext = raw.radiance.substring(dot);
				var base = raw.radiance.substring(0,dot);
				var mipsLoaded = 0;
				var _g = 0;
				var _g1 = raw.radiance_mipmaps;
				while(_g < _g1) {
					var i = [_g++];
					iron_data_Data.getImage(base + "_" + i[0] + ext,(function(i) {
						return function(mipimg) {
							_gthis.radianceMipmaps[i[0]] = mipimg;
							mipsLoaded += 1;
							if(mipsLoaded == raw.radiance_mipmaps) {
								_gthis.radiance.setMipmaps(_gthis.radianceMipmaps);
								done(_gthis);
							}
						};
					})(i),true);
				}
			});
		} else {
			done(_gthis);
		}
	});
};
$hxClasses["iron.data.Probe"] = iron_data_Probe;
iron_data_Probe.__name__ = "iron.data.Probe";
iron_data_Probe.prototype = {
	setIrradiance: function(done) {
		if(this.raw.irradiance == null) {
			done(iron_data_WorldData.getEmptyIrradiance());
		} else {
			var ext = StringTools.endsWith(this.raw.irradiance,".json") ? "" : ".arm";
			iron_data_Data.getBlob(this.raw.irradiance + ext,function(b) {
				var irradianceParsed;
				if(ext == "") {
					irradianceParsed = JSON.parse(b.toString());
				} else {
					var i = new haxe_io_BytesInput(b.toBytes());
					i.set_bigEndian(false);
					irradianceParsed = iron_system_ArmPack.read(i);
				}
				var irr = new Float32Array(28);
				irr[0] = irradianceParsed.irradiance[0];
				irr[1] = irradianceParsed.irradiance[1];
				irr[2] = irradianceParsed.irradiance[2];
				irr[3] = irradianceParsed.irradiance[3];
				irr[4] = irradianceParsed.irradiance[4];
				irr[5] = irradianceParsed.irradiance[5];
				irr[6] = irradianceParsed.irradiance[6];
				irr[7] = irradianceParsed.irradiance[7];
				irr[8] = irradianceParsed.irradiance[8];
				irr[9] = irradianceParsed.irradiance[9];
				irr[10] = irradianceParsed.irradiance[10];
				irr[11] = irradianceParsed.irradiance[11];
				irr[12] = irradianceParsed.irradiance[12];
				irr[13] = irradianceParsed.irradiance[13];
				irr[14] = irradianceParsed.irradiance[14];
				irr[15] = irradianceParsed.irradiance[15];
				irr[16] = irradianceParsed.irradiance[16];
				irr[17] = irradianceParsed.irradiance[17];
				irr[18] = irradianceParsed.irradiance[18];
				irr[19] = irradianceParsed.irradiance[19];
				irr[20] = irradianceParsed.irradiance[20];
				irr[21] = irradianceParsed.irradiance[21];
				irr[22] = irradianceParsed.irradiance[22];
				irr[23] = irradianceParsed.irradiance[23];
				irr[24] = irradianceParsed.irradiance[24];
				irr[25] = irradianceParsed.irradiance[25];
				irr[26] = irradianceParsed.irradiance[26];
				done(irr);
			});
		}
	}
	,__class__: iron_data_Probe
};
var iron_math_Mat3 = function(_00,_10,_20,_01,_11,_21,_02,_12,_22) {
	this.self = new kha_math_FastMatrix3(_00,_10,_20,_01,_11,_21,_02,_12,_22);
};
$hxClasses["iron.math.Mat3"] = iron_math_Mat3;
iron_math_Mat3.__name__ = "iron.math.Mat3";
iron_math_Mat3.prototype = {
	__class__: iron_math_Mat3
};
var iron_math_Quat = function(x,y,z,w) {
	if(w == null) {
		w = 1.0;
	}
	if(z == null) {
		z = 0.0;
	}
	if(y == null) {
		y = 0.0;
	}
	if(x == null) {
		x = 0.0;
	}
	this.x = x;
	this.y = y;
	this.z = z;
	this.w = w;
};
$hxClasses["iron.math.Quat"] = iron_math_Quat;
iron_math_Quat.__name__ = "iron.math.Quat";
iron_math_Quat.prototype = {
	__class__: iron_math_Quat
};
var iron_math_Ray = function(origin,direction) {
	this.origin = origin == null ? new iron_math_Vec4() : origin;
	this.direction = direction == null ? new iron_math_Vec4() : direction;
};
$hxClasses["iron.math.Ray"] = iron_math_Ray;
iron_math_Ray.__name__ = "iron.math.Ray";
iron_math_Ray.prototype = {
	at: function(t) {
		var result = new iron_math_Vec4();
		var v = this.direction;
		result.x = v.x;
		result.y = v.y;
		result.z = v.z;
		result.w = v.w;
		result.x *= t;
		result.y *= t;
		result.z *= t;
		var v = this.origin;
		result.x += v.x;
		result.y += v.y;
		result.z += v.z;
		return result;
	}
	,distanceToPlane: function(plane) {
		var _this = plane.normal;
		var v = this.direction;
		var denominator = _this.x * v.x + _this.y * v.y + _this.z * v.z;
		if(denominator == 0) {
			if(plane.distanceToPoint(this.origin) == 0) {
				return 0;
			}
			return -1;
		}
		var _this = this.origin;
		var v = plane.normal;
		var t = -(_this.x * v.x + _this.y * v.y + _this.z * v.z + plane.constant) / denominator;
		if(t >= 0) {
			return t;
		} else {
			return -1;
		}
	}
	,intersectPlane: function(plane) {
		var t = this.distanceToPlane(plane);
		if(t == -1) {
			return null;
		}
		return this.at(t);
	}
	,intersectBox: function(center,dim) {
		var tmin;
		var tmax;
		var tymin;
		var tymax;
		var tzmin;
		var tzmax;
		var halfX = dim.x / 2;
		var halfY = dim.y / 2;
		var halfZ = dim.z / 2;
		var boxMinX = center.x - halfX;
		var boxMinY = center.y - halfY;
		var boxMinZ = center.z - halfZ;
		var boxMaxX = center.x + halfX;
		var boxMaxY = center.y + halfY;
		var boxMaxZ = center.z + halfZ;
		var invdirx = 1 / this.direction.x;
		var invdiry = 1 / this.direction.y;
		var invdirz = 1 / this.direction.z;
		var origin = this.origin;
		if(invdirx >= 0) {
			tmin = (boxMinX - origin.x) * invdirx;
			tmax = (boxMaxX - origin.x) * invdirx;
		} else {
			tmin = (boxMaxX - origin.x) * invdirx;
			tmax = (boxMinX - origin.x) * invdirx;
		}
		if(invdiry >= 0) {
			tymin = (boxMinY - origin.y) * invdiry;
			tymax = (boxMaxY - origin.y) * invdiry;
		} else {
			tymin = (boxMaxY - origin.y) * invdiry;
			tymax = (boxMinY - origin.y) * invdiry;
		}
		if(tmin > tymax || tymin > tmax) {
			return null;
		}
		if(tymin > tmin || tmin != tmin) {
			tmin = tymin;
		}
		if(tymax < tmax || tmax != tmax) {
			tmax = tymax;
		}
		if(invdirz >= 0) {
			tzmin = (boxMinZ - origin.z) * invdirz;
			tzmax = (boxMaxZ - origin.z) * invdirz;
		} else {
			tzmin = (boxMaxZ - origin.z) * invdirz;
			tzmax = (boxMinZ - origin.z) * invdirz;
		}
		if(tmin > tzmax || tzmin > tmax) {
			return null;
		}
		if(tzmin > tmin || tmin != tmin) {
			tmin = tzmin;
		}
		if(tzmax < tmax || tmax != tmax) {
			tmax = tzmax;
		}
		if(tmax < 0) {
			return null;
		}
		return this.at(tmin >= 0 ? tmin : tmax);
	}
	,__class__: iron_math_Ray
};
var iron_math_Plane = function() {
	this.constant = 0.0;
	this.normal = new iron_math_Vec4(1.0,0.0,0.0);
};
$hxClasses["iron.math.Plane"] = iron_math_Plane;
iron_math_Plane.__name__ = "iron.math.Plane";
iron_math_Plane.prototype = {
	distanceToPoint: function(point) {
		var _this = this.normal;
		return _this.x * point.x + _this.y * point.y + _this.z * point.z + this.constant;
	}
	,set: function(normal,point) {
		var _this = this.normal;
		_this.x = normal.x;
		_this.y = normal.y;
		_this.z = normal.z;
		_this.w = normal.w;
		var v = this.normal;
		this.constant = -(point.x * v.x + point.y * v.y + point.z * v.z);
		return this;
	}
	,__class__: iron_math_Plane
};
var iron_math_RayCaster = function() { };
$hxClasses["iron.math.RayCaster"] = iron_math_RayCaster;
iron_math_RayCaster.__name__ = "iron.math.RayCaster";
iron_math_RayCaster.getRay = function(inputX,inputY,camera) {
	var start = new iron_math_Vec4();
	var end = new iron_math_Vec4();
	iron_math_RayCaster.getDirection(start,end,inputX,inputY,camera);
	end.x -= start.x;
	end.y -= start.y;
	end.z -= start.z;
	var n = Math.sqrt(end.x * end.x + end.y * end.y + end.z * end.z);
	if(n > 0.0) {
		var invN = 1.0 / n;
		end.x *= invN;
		end.y *= invN;
		end.z *= invN;
	}
	end.x *= camera.data.raw.far_plane;
	end.y *= camera.data.raw.far_plane;
	end.z *= camera.data.raw.far_plane;
	return new iron_math_Ray(start,end);
};
iron_math_RayCaster.getDirection = function(start,end,inputX,inputY,camera) {
	start.x = inputX / arm_App.w() * 2.0 - 1.0;
	start.y = -(inputY / arm_App.h() * 2.0 - 1.0);
	start.z = -1.0;
	end.x = start.x;
	end.y = start.y;
	end.z = 1.0;
	var _this = iron_math_RayCaster.PInv;
	var m = camera.P;
	var a00 = m.self._00;
	var a01 = m.self._01;
	var a02 = m.self._02;
	var a03 = m.self._03;
	var a10 = m.self._10;
	var a11 = m.self._11;
	var a12 = m.self._12;
	var a13 = m.self._13;
	var a20 = m.self._20;
	var a21 = m.self._21;
	var a22 = m.self._22;
	var a23 = m.self._23;
	var a30 = m.self._30;
	var a31 = m.self._31;
	var a32 = m.self._32;
	var a33 = m.self._33;
	var b00 = a00 * a11 - a01 * a10;
	var b01 = a00 * a12 - a02 * a10;
	var b02 = a00 * a13 - a03 * a10;
	var b03 = a01 * a12 - a02 * a11;
	var b04 = a01 * a13 - a03 * a11;
	var b05 = a02 * a13 - a03 * a12;
	var b06 = a20 * a31 - a21 * a30;
	var b07 = a20 * a32 - a22 * a30;
	var b08 = a20 * a33 - a23 * a30;
	var b09 = a21 * a32 - a22 * a31;
	var b10 = a21 * a33 - a23 * a31;
	var b11 = a22 * a33 - a23 * a32;
	var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;
	if(det == 0.0) {
		_this.self._00 = 1.0;
		_this.self._01 = 0.0;
		_this.self._02 = 0.0;
		_this.self._03 = 0.0;
		_this.self._10 = 0.0;
		_this.self._11 = 1.0;
		_this.self._12 = 0.0;
		_this.self._13 = 0.0;
		_this.self._20 = 0.0;
		_this.self._21 = 0.0;
		_this.self._22 = 1.0;
		_this.self._23 = 0.0;
		_this.self._30 = 0.0;
		_this.self._31 = 0.0;
		_this.self._32 = 0.0;
		_this.self._33 = 1.0;
	} else {
		det = 1.0 / det;
		_this.self._00 = (a11 * b11 - a12 * b10 + a13 * b09) * det;
		_this.self._01 = (a02 * b10 - a01 * b11 - a03 * b09) * det;
		_this.self._02 = (a31 * b05 - a32 * b04 + a33 * b03) * det;
		_this.self._03 = (a22 * b04 - a21 * b05 - a23 * b03) * det;
		_this.self._10 = (a12 * b08 - a10 * b11 - a13 * b07) * det;
		_this.self._11 = (a00 * b11 - a02 * b08 + a03 * b07) * det;
		_this.self._12 = (a32 * b02 - a30 * b05 - a33 * b01) * det;
		_this.self._13 = (a20 * b05 - a22 * b02 + a23 * b01) * det;
		_this.self._20 = (a10 * b10 - a11 * b08 + a13 * b06) * det;
		_this.self._21 = (a01 * b08 - a00 * b10 - a03 * b06) * det;
		_this.self._22 = (a30 * b04 - a31 * b02 + a33 * b00) * det;
		_this.self._23 = (a21 * b02 - a20 * b04 - a23 * b00) * det;
		_this.self._30 = (a11 * b07 - a10 * b09 - a12 * b06) * det;
		_this.self._31 = (a00 * b09 - a01 * b07 + a02 * b06) * det;
		_this.self._32 = (a31 * b01 - a30 * b03 - a32 * b00) * det;
		_this.self._33 = (a20 * b03 - a21 * b01 + a22 * b00) * det;
	}
	var _this = iron_math_RayCaster.VInv;
	var m = camera.V;
	var a00 = m.self._00;
	var a01 = m.self._01;
	var a02 = m.self._02;
	var a03 = m.self._03;
	var a10 = m.self._10;
	var a11 = m.self._11;
	var a12 = m.self._12;
	var a13 = m.self._13;
	var a20 = m.self._20;
	var a21 = m.self._21;
	var a22 = m.self._22;
	var a23 = m.self._23;
	var a30 = m.self._30;
	var a31 = m.self._31;
	var a32 = m.self._32;
	var a33 = m.self._33;
	var b00 = a00 * a11 - a01 * a10;
	var b01 = a00 * a12 - a02 * a10;
	var b02 = a00 * a13 - a03 * a10;
	var b03 = a01 * a12 - a02 * a11;
	var b04 = a01 * a13 - a03 * a11;
	var b05 = a02 * a13 - a03 * a12;
	var b06 = a20 * a31 - a21 * a30;
	var b07 = a20 * a32 - a22 * a30;
	var b08 = a20 * a33 - a23 * a30;
	var b09 = a21 * a32 - a22 * a31;
	var b10 = a21 * a33 - a23 * a31;
	var b11 = a22 * a33 - a23 * a32;
	var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;
	if(det == 0.0) {
		_this.self._00 = 1.0;
		_this.self._01 = 0.0;
		_this.self._02 = 0.0;
		_this.self._03 = 0.0;
		_this.self._10 = 0.0;
		_this.self._11 = 1.0;
		_this.self._12 = 0.0;
		_this.self._13 = 0.0;
		_this.self._20 = 0.0;
		_this.self._21 = 0.0;
		_this.self._22 = 1.0;
		_this.self._23 = 0.0;
		_this.self._30 = 0.0;
		_this.self._31 = 0.0;
		_this.self._32 = 0.0;
		_this.self._33 = 1.0;
	} else {
		det = 1.0 / det;
		_this.self._00 = (a11 * b11 - a12 * b10 + a13 * b09) * det;
		_this.self._01 = (a02 * b10 - a01 * b11 - a03 * b09) * det;
		_this.self._02 = (a31 * b05 - a32 * b04 + a33 * b03) * det;
		_this.self._03 = (a22 * b04 - a21 * b05 - a23 * b03) * det;
		_this.self._10 = (a12 * b08 - a10 * b11 - a13 * b07) * det;
		_this.self._11 = (a00 * b11 - a02 * b08 + a03 * b07) * det;
		_this.self._12 = (a32 * b02 - a30 * b05 - a33 * b01) * det;
		_this.self._13 = (a20 * b05 - a22 * b02 + a23 * b01) * det;
		_this.self._20 = (a10 * b10 - a11 * b08 + a13 * b06) * det;
		_this.self._21 = (a01 * b08 - a00 * b10 - a03 * b06) * det;
		_this.self._22 = (a30 * b04 - a31 * b02 + a33 * b00) * det;
		_this.self._23 = (a21 * b02 - a20 * b04 - a23 * b00) * det;
		_this.self._30 = (a11 * b07 - a10 * b09 - a12 * b06) * det;
		_this.self._31 = (a00 * b09 - a01 * b07 + a02 * b06) * det;
		_this.self._32 = (a31 * b01 - a30 * b03 - a32 * b00) * det;
		_this.self._33 = (a20 * b03 - a21 * b01 + a22 * b00) * det;
	}
	var _this = iron_math_RayCaster.VPInv;
	var b = iron_math_RayCaster.VInv;
	var a = iron_math_RayCaster.PInv;
	var a00 = a.self._00;
	var a01 = a.self._01;
	var a02 = a.self._02;
	var a03 = a.self._03;
	var a10 = a.self._10;
	var a11 = a.self._11;
	var a12 = a.self._12;
	var a13 = a.self._13;
	var a20 = a.self._20;
	var a21 = a.self._21;
	var a22 = a.self._22;
	var a23 = a.self._23;
	var a30 = a.self._30;
	var a31 = a.self._31;
	var a32 = a.self._32;
	var a33 = a.self._33;
	var b0 = b.self._00;
	var b1 = b.self._10;
	var b2 = b.self._20;
	var b3 = b.self._30;
	_this.self._00 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
	_this.self._10 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
	_this.self._20 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
	_this.self._30 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
	b0 = b.self._01;
	b1 = b.self._11;
	b2 = b.self._21;
	b3 = b.self._31;
	_this.self._01 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
	_this.self._11 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
	_this.self._21 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
	_this.self._31 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
	b0 = b.self._02;
	b1 = b.self._12;
	b2 = b.self._22;
	b3 = b.self._32;
	_this.self._02 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
	_this.self._12 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
	_this.self._22 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
	_this.self._32 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
	b0 = b.self._03;
	b1 = b.self._13;
	b2 = b.self._23;
	b3 = b.self._33;
	_this.self._03 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
	_this.self._13 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
	_this.self._23 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
	_this.self._33 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
	var m = iron_math_RayCaster.VPInv;
	var x = start.x;
	var y = start.y;
	var z = start.z;
	var d = 1.0 / (m.self._03 * x + m.self._13 * y + m.self._23 * z + m.self._33);
	start.x = (m.self._00 * x + m.self._10 * y + m.self._20 * z + m.self._30) * d;
	start.y = (m.self._01 * x + m.self._11 * y + m.self._21 * z + m.self._31) * d;
	start.z = (m.self._02 * x + m.self._12 * y + m.self._22 * z + m.self._32) * d;
	var m = iron_math_RayCaster.VPInv;
	var x = end.x;
	var y = end.y;
	var z = end.z;
	var d = 1.0 / (m.self._03 * x + m.self._13 * y + m.self._23 * z + m.self._33);
	end.x = (m.self._00 * x + m.self._10 * y + m.self._20 * z + m.self._30) * d;
	end.y = (m.self._01 * x + m.self._11 * y + m.self._21 * z + m.self._31) * d;
	end.z = (m.self._02 * x + m.self._12 * y + m.self._22 * z + m.self._32) * d;
};
iron_math_RayCaster.boxIntersect = function(transform,inputX,inputY,camera) {
	return iron_math_RayCaster.getRay(inputX,inputY,camera).intersectBox(new iron_math_Vec4(transform.world.self._30,transform.world.self._31,transform.world.self._32),new iron_math_Vec4(transform.dim.x,transform.dim.y,transform.dim.z));
};
iron_math_RayCaster.closestBoxIntersect = function(transforms,inputX,inputY,camera) {
	var intersects = [];
	var _g = 0;
	while(_g < transforms.length) {
		var t = transforms[_g];
		++_g;
		if(iron_math_RayCaster.boxIntersect(t,inputX,inputY,camera) != null) {
			intersects.push(t);
		}
	}
	if(intersects.length == 0) {
		return null;
	}
	var closest = null;
	var minDist = Infinity;
	var _g = 0;
	while(_g < intersects.length) {
		var t = intersects[_g];
		++_g;
		var v1 = t.loc;
		var v2 = camera.transform.loc;
		var vx = v1.x - v2.x;
		var vy = v1.y - v2.y;
		var vz = v1.z - v2.z;
		var dist = Math.sqrt(vx * vx + vy * vy + vz * vz);
		if(dist < minDist) {
			minDist = dist;
			closest = t;
		}
	}
	return closest;
};
iron_math_RayCaster.planeIntersect = function(normal,a,inputX,inputY,camera) {
	var ray = iron_math_RayCaster.getRay(inputX,inputY,camera);
	var plane = new iron_math_Plane();
	plane.set(normal,a);
	return ray.intersectPlane(plane);
};
var iron_math_Vec2 = function(x,y) {
	if(y == null) {
		y = 0.0;
	}
	if(x == null) {
		x = 0.0;
	}
	this.x = x;
	this.y = y;
};
$hxClasses["iron.math.Vec2"] = iron_math_Vec2;
iron_math_Vec2.__name__ = "iron.math.Vec2";
iron_math_Vec2.prototype = {
	__class__: iron_math_Vec2
};
var iron_math_Vec3 = function(x,y,z) {
	if(z == null) {
		z = 0.0;
	}
	if(y == null) {
		y = 0.0;
	}
	if(x == null) {
		x = 0.0;
	}
	this.x = x;
	this.y = y;
	this.z = z;
};
$hxClasses["iron.math.Vec3"] = iron_math_Vec3;
iron_math_Vec3.__name__ = "iron.math.Vec3";
iron_math_Vec3.prototype = {
	__class__: iron_math_Vec3
};
var iron_object_Animation = function() {
	this.blendFactor = 0.0;
	this.blendAction = "";
	this.blendCurrent = 0.0;
	this.blendTime = 0.0;
	this.frameTime = 0.016666666666666666;
	this.paused = false;
	this.onComplete = null;
	this.frameIndex = 0;
	this.loop = true;
	this.speed = 1.0;
	this.time = 0.0;
	this.action = "";
	iron_Scene.active.animations.push(this);
	if(iron_Scene.active.raw.frame_time != null) {
		this.frameTime = iron_Scene.active.raw.frame_time;
	}
	this.play();
};
$hxClasses["iron.object.Animation"] = iron_object_Animation;
iron_object_Animation.__name__ = "iron.object.Animation";
iron_object_Animation.prototype = {
	play: function(action,onComplete,blendTime,speed,loop) {
		if(loop == null) {
			loop = true;
		}
		if(speed == null) {
			speed = 1.0;
		}
		if(blendTime == null) {
			blendTime = 0.0;
		}
		if(action == null) {
			action = "";
		}
		if(blendTime > 0) {
			this.blendTime = blendTime;
			this.blendCurrent = 0.0;
			this.blendAction = this.action;
			this.frameIndex = 0;
			this.time = 0.0;
		} else {
			this.frameIndex = -1;
		}
		this.action = action;
		this.onComplete = onComplete;
		this.speed = speed;
		this.loop = loop;
		this.paused = false;
	}
	,remove: function() {
		HxOverrides.remove(iron_Scene.active.animations,this);
	}
	,update: function(delta) {
		if(this.paused || this.speed == 0.0) {
			return;
		}
		this.time += delta * this.speed;
		if(this.blendTime > 0 && this.blendFactor == 0) {
			this.blendCurrent += delta;
			if(this.blendCurrent >= this.blendTime) {
				this.blendTime = 0.0;
			}
		}
	}
	,rewind: function(track) {
		this.frameIndex = this.speed > 0 ? 0 : track.frames.length - 1;
		this.time = track.frames[this.frameIndex] * this.frameTime;
	}
	,__class__: iron_object_Animation
};
var iron_object_CameraObject = function(data) {
	this.currentFace = 0;
	this.renderTargetCube = null;
	this.renderTarget = null;
	this.frustumPlanes = null;
	this.prevV = null;
	this.frame = 0;
	this.noJitterP = new iron_math_Mat4(1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0);
	iron_object_Object.call(this);
	this.data = data;
	this.buildProjection();
	this.V = new iron_math_Mat4(1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0);
	this.VP = new iron_math_Mat4(1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0);
	if(data.raw.frustum_culling) {
		this.frustumPlanes = [];
		this.frustumPlanes.push(new iron_object_FrustumPlane());
		this.frustumPlanes.push(new iron_object_FrustumPlane());
		this.frustumPlanes.push(new iron_object_FrustumPlane());
		this.frustumPlanes.push(new iron_object_FrustumPlane());
		this.frustumPlanes.push(new iron_object_FrustumPlane());
		this.frustumPlanes.push(new iron_object_FrustumPlane());
	}
	iron_Scene.active.cameras.push(this);
};
$hxClasses["iron.object.CameraObject"] = iron_object_CameraObject;
iron_object_CameraObject.__name__ = "iron.object.CameraObject";
iron_object_CameraObject.buildViewFrustum = function(VP,frustumPlanes) {
	var _this = frustumPlanes[0];
	var _this1 = _this.normal;
	_this1.x = VP.self._03 + VP.self._00;
	_this1.y = VP.self._13 + VP.self._10;
	_this1.z = VP.self._23 + VP.self._20;
	_this1.w = 1.0;
	_this.constant = VP.self._33 + VP.self._30;
	var _this = frustumPlanes[1];
	var _this1 = _this.normal;
	_this1.x = VP.self._03 - VP.self._00;
	_this1.y = VP.self._13 - VP.self._10;
	_this1.z = VP.self._23 - VP.self._20;
	_this1.w = 1.0;
	_this.constant = VP.self._33 - VP.self._30;
	var _this = frustumPlanes[2];
	var _this1 = _this.normal;
	_this1.x = VP.self._03 - VP.self._01;
	_this1.y = VP.self._13 - VP.self._11;
	_this1.z = VP.self._23 - VP.self._21;
	_this1.w = 1.0;
	_this.constant = VP.self._33 - VP.self._31;
	var _this = frustumPlanes[3];
	var _this1 = _this.normal;
	_this1.x = VP.self._03 + VP.self._01;
	_this1.y = VP.self._13 + VP.self._11;
	_this1.z = VP.self._23 + VP.self._21;
	_this1.w = 1.0;
	_this.constant = VP.self._33 + VP.self._31;
	var _this = frustumPlanes[4];
	var _this1 = _this.normal;
	_this1.x = VP.self._02;
	_this1.y = VP.self._12;
	_this1.z = VP.self._22;
	_this1.w = 1.0;
	_this.constant = VP.self._32;
	var _this = frustumPlanes[5];
	var _this1 = _this.normal;
	_this1.x = VP.self._03 - VP.self._02;
	_this1.y = VP.self._13 - VP.self._12;
	_this1.z = VP.self._23 - VP.self._22;
	_this1.w = 1.0;
	_this.constant = VP.self._33 - VP.self._32;
	var _g = 0;
	while(_g < frustumPlanes.length) frustumPlanes[_g++].normalize();
};
iron_object_CameraObject.sphereInFrustum = function(frustumPlanes,t,radiusScale,offsetX,offsetY,offsetZ) {
	if(offsetZ == null) {
		offsetZ = 0.0;
	}
	if(offsetY == null) {
		offsetY = 0.0;
	}
	if(offsetX == null) {
		offsetX = 0.0;
	}
	if(radiusScale == null) {
		radiusScale = 1.0;
	}
	var radius = t.radius * radiusScale;
	var _g = 0;
	while(_g < frustumPlanes.length) {
		var plane = frustumPlanes[_g++];
		var _this = iron_object_CameraObject.sphereCenter;
		_this.x = t.world.self._30 + offsetX;
		_this.y = t.world.self._31 + offsetY;
		_this.z = t.world.self._32 + offsetZ;
		_this.w = 1.0;
		if(plane.distanceToSphere(iron_object_CameraObject.sphereCenter,radius) + radius * 2 < 0) {
			return false;
		}
	}
	return true;
};
iron_object_CameraObject.setCubeFace = function(m,eye,face,flip) {
	if(flip == null) {
		flip = false;
	}
	var _this = iron_object_CameraObject.vcenter;
	_this.x = eye.x;
	_this.y = eye.y;
	_this.z = eye.z;
	_this.w = eye.w;
	var f = flip ? -1.0 : 1.0;
	switch(face) {
	case 0:
		var _this = iron_object_CameraObject.vcenter;
		_this.x += f;
		_this.y += 0.0;
		_this.z += 0.0;
		var _this = iron_object_CameraObject.vup;
		_this.x = 0.0;
		_this.y = -1.0 * f;
		_this.z = 0.0;
		_this.w = 1.0;
		break;
	case 1:
		var _this = iron_object_CameraObject.vcenter;
		_this.x += -1.0 * f;
		_this.y += 0.0;
		_this.z += 0.0;
		var _this = iron_object_CameraObject.vup;
		_this.x = 0.0;
		_this.y = -1.0 * f;
		_this.z = 0.0;
		_this.w = 1.0;
		break;
	case 2:
		var _this = iron_object_CameraObject.vcenter;
		_this.x += 0.0;
		_this.y += f;
		_this.z += 0.0;
		var _this = iron_object_CameraObject.vup;
		_this.x = 0.0;
		_this.y = 0.0;
		_this.z = f;
		_this.w = 1.0;
		break;
	case 3:
		var _this = iron_object_CameraObject.vcenter;
		_this.x += 0.0;
		_this.y += -1.0 * f;
		_this.z += 0.0;
		var _this = iron_object_CameraObject.vup;
		_this.x = 0.0;
		_this.y = 0.0;
		_this.z = -1.0 * f;
		_this.w = 1.0;
		break;
	case 4:
		var _this = iron_object_CameraObject.vcenter;
		_this.x += 0.0;
		_this.y += 0.0;
		_this.z += f;
		var _this = iron_object_CameraObject.vup;
		_this.x = 0.0;
		_this.y = -1.0 * f;
		_this.z = 0.0;
		_this.w = 1.0;
		break;
	case 5:
		var _this = iron_object_CameraObject.vcenter;
		_this.x += 0.0;
		_this.y += 0.0;
		_this.z += -1.0 * f;
		var _this = iron_object_CameraObject.vup;
		_this.x = 0.0;
		_this.y = -1.0 * f;
		_this.z = 0.0;
		_this.w = 1.0;
		break;
	}
	var center = iron_object_CameraObject.vcenter;
	var up = iron_object_CameraObject.vup;
	var f0 = center.x - eye.x;
	var f1 = center.y - eye.y;
	var f2 = center.z - eye.z;
	var n = 1.0 / Math.sqrt(f0 * f0 + f1 * f1 + f2 * f2);
	f0 *= n;
	f1 *= n;
	f2 *= n;
	var s0 = f1 * up.z - f2 * up.y;
	var s1 = f2 * up.x - f0 * up.z;
	var s2 = f0 * up.y - f1 * up.x;
	n = 1.0 / Math.sqrt(s0 * s0 + s1 * s1 + s2 * s2);
	s0 *= n;
	s1 *= n;
	s2 *= n;
	var u0 = s1 * f2 - s2 * f1;
	var u1 = s2 * f0 - s0 * f2;
	var u2 = s0 * f1 - s1 * f0;
	m.self._00 = s0;
	m.self._10 = s1;
	m.self._20 = s2;
	m.self._30 = -eye.x * s0 - eye.y * s1 - eye.z * s2;
	m.self._01 = u0;
	m.self._11 = u1;
	m.self._21 = u2;
	m.self._31 = -eye.x * u0 - eye.y * u1 - eye.z * u2;
	m.self._02 = -f0;
	m.self._12 = -f1;
	m.self._22 = -f2;
	m.self._32 = eye.x * f0 + eye.y * f1 + eye.z * f2;
	m.self._03 = 0.0;
	m.self._13 = 0.0;
	m.self._23 = 0.0;
	m.self._33 = 1.0;
};
iron_object_CameraObject.__super__ = iron_object_Object;
iron_object_CameraObject.prototype = $extend(iron_object_Object.prototype,{
	buildProjection: function(screenAspect) {
		if(this.data.raw.ortho != null) {
			var left = this.data.raw.ortho[0];
			var right = this.data.raw.ortho[1];
			var bottom = this.data.raw.ortho[2];
			var top = this.data.raw.ortho[3];
			var near = this.data.raw.near_plane;
			var far = this.data.raw.far_plane;
			var rl = right - left;
			var tb = top - bottom;
			var fn = far - near;
			this.P = new iron_math_Mat4(2 / rl,0,0,-(right + left) / rl,0,2 / tb,0,-(top + bottom) / tb,0,0,-2 / fn,-(far + near) / fn,0,0,0,1);
		} else {
			if(screenAspect == null) {
				screenAspect = arm_App.w() / arm_App.h();
			}
			var zn = this.data.raw.near_plane;
			var zf = this.data.raw.far_plane;
			var uh = 1.0 / Math.tan(this.data.raw.fov / 2);
			this.P = new iron_math_Mat4(uh / (this.data.raw.aspect != null ? this.data.raw.aspect : screenAspect),0,0,0,0,uh,0,0,0,0,(zf + zn) / (zn - zf),2 * zf * zn / (zn - zf),0,0,-1,0);
		}
		var _this = this.noJitterP;
		var m = this.P;
		_this.self._00 = m.self._00;
		_this.self._01 = m.self._01;
		_this.self._02 = m.self._02;
		_this.self._03 = m.self._03;
		_this.self._10 = m.self._10;
		_this.self._11 = m.self._11;
		_this.self._12 = m.self._12;
		_this.self._13 = m.self._13;
		_this.self._20 = m.self._20;
		_this.self._21 = m.self._21;
		_this.self._22 = m.self._22;
		_this.self._23 = m.self._23;
		_this.self._30 = m.self._30;
		_this.self._31 = m.self._31;
		_this.self._32 = m.self._32;
		_this.self._33 = m.self._33;
	}
	,remove: function() {
		HxOverrides.remove(iron_Scene.active.cameras,this);
		iron_object_Object.prototype.remove.call(this);
	}
	,renderFrame: function(g) {
		this.projectionJitter();
		this.buildMatrix();
		iron_RenderPath.active.renderFrame(g);
		var _this = this.prevV;
		var m = this.V;
		_this.self._00 = m.self._00;
		_this.self._01 = m.self._01;
		_this.self._02 = m.self._02;
		_this.self._03 = m.self._03;
		_this.self._10 = m.self._10;
		_this.self._11 = m.self._11;
		_this.self._12 = m.self._12;
		_this.self._13 = m.self._13;
		_this.self._20 = m.self._20;
		_this.self._21 = m.self._21;
		_this.self._22 = m.self._22;
		_this.self._23 = m.self._23;
		_this.self._30 = m.self._30;
		_this.self._31 = m.self._31;
		_this.self._32 = m.self._32;
		_this.self._33 = m.self._33;
	}
	,projectionJitter: function() {
		var _this = this.P;
		var m = this.noJitterP;
		_this.self._00 = m.self._00;
		_this.self._01 = m.self._01;
		_this.self._02 = m.self._02;
		_this.self._03 = m.self._03;
		_this.self._10 = m.self._10;
		_this.self._11 = m.self._11;
		_this.self._12 = m.self._12;
		_this.self._13 = m.self._13;
		_this.self._20 = m.self._20;
		_this.self._21 = m.self._21;
		_this.self._22 = m.self._22;
		_this.self._23 = m.self._23;
		_this.self._30 = m.self._30;
		_this.self._31 = m.self._31;
		_this.self._32 = m.self._32;
		_this.self._33 = m.self._33;
		var x = 0.0;
		var y = 0.0;
		if(this.frame % 2 == 0) {
			x = 0.25;
			y = 0.25;
		} else {
			x = -0.25;
			y = -0.25;
		}
		this.P.self._20 += x / iron_RenderPath.active.currentW;
		this.P.self._21 += y / iron_RenderPath.active.currentH;
		this.frame++;
	}
	,buildMatrix: function() {
		this.transform.buildMatrix();
		var _this = this.transform.world;
		var x = Math.sqrt(_this.self._00 * _this.self._00 + _this.self._10 * _this.self._10 + _this.self._20 * _this.self._20);
		var y = Math.sqrt(_this.self._01 * _this.self._01 + _this.self._11 * _this.self._11 + _this.self._21 * _this.self._21);
		var z = Math.sqrt(_this.self._02 * _this.self._02 + _this.self._12 * _this.self._12 + _this.self._22 * _this.self._22);
		if(z == null) {
			z = 0.0;
		}
		if(y == null) {
			y = 0.0;
		}
		if(x == null) {
			x = 0.0;
		}
		var sc_x = x;
		var sc_y = y;
		var sc_z = z;
		if(sc_x != 1.0 || sc_y != 1.0 || sc_z != 1.0) {
			var _this = iron_object_CameraObject.temp;
			_this.x = 1.0 / sc_x;
			_this.y = 1.0 / sc_y;
			_this.z = 1.0 / sc_z;
			_this.w = 1.0;
			var _this = this.transform.world;
			var v = iron_object_CameraObject.temp;
			var x = v.x;
			var y = v.y;
			var z = v.z;
			_this.self._00 *= x;
			_this.self._01 *= x;
			_this.self._02 *= x;
			_this.self._03 *= x;
			_this.self._10 *= y;
			_this.self._11 *= y;
			_this.self._12 *= y;
			_this.self._13 *= y;
			_this.self._20 *= z;
			_this.self._21 *= z;
			_this.self._22 *= z;
			_this.self._23 *= z;
		}
		var _this = this.V;
		var m = this.transform.world;
		var a00 = m.self._00;
		var a01 = m.self._01;
		var a02 = m.self._02;
		var a03 = m.self._03;
		var a10 = m.self._10;
		var a11 = m.self._11;
		var a12 = m.self._12;
		var a13 = m.self._13;
		var a20 = m.self._20;
		var a21 = m.self._21;
		var a22 = m.self._22;
		var a23 = m.self._23;
		var a30 = m.self._30;
		var a31 = m.self._31;
		var a32 = m.self._32;
		var a33 = m.self._33;
		var b00 = a00 * a11 - a01 * a10;
		var b01 = a00 * a12 - a02 * a10;
		var b02 = a00 * a13 - a03 * a10;
		var b03 = a01 * a12 - a02 * a11;
		var b04 = a01 * a13 - a03 * a11;
		var b05 = a02 * a13 - a03 * a12;
		var b06 = a20 * a31 - a21 * a30;
		var b07 = a20 * a32 - a22 * a30;
		var b08 = a20 * a33 - a23 * a30;
		var b09 = a21 * a32 - a22 * a31;
		var b10 = a21 * a33 - a23 * a31;
		var b11 = a22 * a33 - a23 * a32;
		var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;
		if(det == 0.0) {
			_this.self._00 = 1.0;
			_this.self._01 = 0.0;
			_this.self._02 = 0.0;
			_this.self._03 = 0.0;
			_this.self._10 = 0.0;
			_this.self._11 = 1.0;
			_this.self._12 = 0.0;
			_this.self._13 = 0.0;
			_this.self._20 = 0.0;
			_this.self._21 = 0.0;
			_this.self._22 = 1.0;
			_this.self._23 = 0.0;
			_this.self._30 = 0.0;
			_this.self._31 = 0.0;
			_this.self._32 = 0.0;
			_this.self._33 = 1.0;
		} else {
			det = 1.0 / det;
			_this.self._00 = (a11 * b11 - a12 * b10 + a13 * b09) * det;
			_this.self._01 = (a02 * b10 - a01 * b11 - a03 * b09) * det;
			_this.self._02 = (a31 * b05 - a32 * b04 + a33 * b03) * det;
			_this.self._03 = (a22 * b04 - a21 * b05 - a23 * b03) * det;
			_this.self._10 = (a12 * b08 - a10 * b11 - a13 * b07) * det;
			_this.self._11 = (a00 * b11 - a02 * b08 + a03 * b07) * det;
			_this.self._12 = (a32 * b02 - a30 * b05 - a33 * b01) * det;
			_this.self._13 = (a20 * b05 - a22 * b02 + a23 * b01) * det;
			_this.self._20 = (a10 * b10 - a11 * b08 + a13 * b06) * det;
			_this.self._21 = (a01 * b08 - a00 * b10 - a03 * b06) * det;
			_this.self._22 = (a30 * b04 - a31 * b02 + a33 * b00) * det;
			_this.self._23 = (a21 * b02 - a20 * b04 - a23 * b00) * det;
			_this.self._30 = (a11 * b07 - a10 * b09 - a12 * b06) * det;
			_this.self._31 = (a00 * b09 - a01 * b07 + a02 * b06) * det;
			_this.self._32 = (a31 * b01 - a30 * b03 - a32 * b00) * det;
			_this.self._33 = (a20 * b03 - a21 * b01 + a22 * b00) * det;
		}
		var _this = this.VP;
		var b = this.P;
		var a = this.V;
		var a00 = a.self._00;
		var a01 = a.self._01;
		var a02 = a.self._02;
		var a03 = a.self._03;
		var a10 = a.self._10;
		var a11 = a.self._11;
		var a12 = a.self._12;
		var a13 = a.self._13;
		var a20 = a.self._20;
		var a21 = a.self._21;
		var a22 = a.self._22;
		var a23 = a.self._23;
		var a30 = a.self._30;
		var a31 = a.self._31;
		var a32 = a.self._32;
		var a33 = a.self._33;
		var b0 = b.self._00;
		var b1 = b.self._10;
		var b2 = b.self._20;
		var b3 = b.self._30;
		_this.self._00 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
		_this.self._10 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
		_this.self._20 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
		_this.self._30 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
		b0 = b.self._01;
		b1 = b.self._11;
		b2 = b.self._21;
		b3 = b.self._31;
		_this.self._01 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
		_this.self._11 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
		_this.self._21 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
		_this.self._31 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
		b0 = b.self._02;
		b1 = b.self._12;
		b2 = b.self._22;
		b3 = b.self._32;
		_this.self._02 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
		_this.self._12 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
		_this.self._22 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
		_this.self._32 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
		b0 = b.self._03;
		b1 = b.self._13;
		b2 = b.self._23;
		b3 = b.self._33;
		_this.self._03 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
		_this.self._13 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
		_this.self._23 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
		_this.self._33 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
		if(this.data.raw.frustum_culling) {
			iron_object_CameraObject.buildViewFrustum(this.VP,this.frustumPlanes);
		}
		if(this.prevV == null) {
			this.prevV = new iron_math_Mat4(1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0);
			var _this = this.prevV;
			var m = this.V;
			_this.self._00 = m.self._00;
			_this.self._01 = m.self._01;
			_this.self._02 = m.self._02;
			_this.self._03 = m.self._03;
			_this.self._10 = m.self._10;
			_this.self._11 = m.self._11;
			_this.self._12 = m.self._12;
			_this.self._13 = m.self._13;
			_this.self._20 = m.self._20;
			_this.self._21 = m.self._21;
			_this.self._22 = m.self._22;
			_this.self._23 = m.self._23;
			_this.self._30 = m.self._30;
			_this.self._31 = m.self._31;
			_this.self._32 = m.self._32;
			_this.self._33 = m.self._33;
		}
	}
	,__class__: iron_object_CameraObject
});
var iron_object_FrustumPlane = function() {
	this.constant = 0.0;
	this.normal = new iron_math_Vec4(1.0,0.0,0.0);
};
$hxClasses["iron.object.FrustumPlane"] = iron_object_FrustumPlane;
iron_object_FrustumPlane.__name__ = "iron.object.FrustumPlane";
iron_object_FrustumPlane.prototype = {
	normalize: function() {
		var _this = this.normal;
		var inverseNormalLength = 1.0 / Math.sqrt(_this.x * _this.x + _this.y * _this.y + _this.z * _this.z);
		var _this = this.normal;
		_this.x *= inverseNormalLength;
		_this.y *= inverseNormalLength;
		_this.z *= inverseNormalLength;
		this.constant *= inverseNormalLength;
	}
	,distanceToSphere: function(sphereCenter,sphereRadius) {
		var _this = this.normal;
		return _this.x * sphereCenter.x + _this.y * sphereCenter.y + _this.z * sphereCenter.z + this.constant - sphereRadius;
	}
	,__class__: iron_object_FrustumPlane
};
var iron_object_Constraint = function(constr) {
	this.target = null;
	this.raw = constr;
};
$hxClasses["iron.object.Constraint"] = iron_object_Constraint;
iron_object_Constraint.__name__ = "iron.object.Constraint";
iron_object_Constraint.prototype = {
	apply: function(transform) {
		if(this.target == null && this.raw.target != null) {
			this.target = iron_Scene.active.getChild(this.raw.target).transform;
		}
		if(this.raw.type == "COPY_LOCATION") {
			if(this.raw.use_x) {
				transform.world.self._30 = this.target.loc.x;
				if(this.raw.use_offset) {
					transform.world.self._30 += transform.loc.x;
				}
			}
			if(this.raw.use_y) {
				transform.world.self._31 = this.target.loc.y;
				if(this.raw.use_offset) {
					transform.world.self._31 += transform.loc.y;
				}
			}
			if(this.raw.use_z) {
				transform.world.self._32 = this.target.loc.z;
				if(this.raw.use_offset) {
					transform.world.self._32 += transform.loc.z;
				}
			}
		}
	}
	,__class__: iron_object_Constraint
};
var iron_object_LightObject = function(data) {
	this.frustumPlanes = null;
	this.VP = new iron_math_Mat4(1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0);
	this.P = null;
	this.V = new iron_math_Mat4(1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0);
	this.camSlicedP = null;
	iron_object_Object.call(this);
	this.data = data;
	var type = data.raw.type;
	var fov = data.raw.fov;
	if(type == "sun") {
		if(iron_object_LightObject.corners == null) {
			iron_object_LightObject.corners = [];
			iron_object_LightObject.corners.push(new iron_math_Vec4());
			iron_object_LightObject.corners.push(new iron_math_Vec4());
			iron_object_LightObject.corners.push(new iron_math_Vec4());
			iron_object_LightObject.corners.push(new iron_math_Vec4());
			iron_object_LightObject.corners.push(new iron_math_Vec4());
			iron_object_LightObject.corners.push(new iron_math_Vec4());
			iron_object_LightObject.corners.push(new iron_math_Vec4());
			iron_object_LightObject.corners.push(new iron_math_Vec4());
		}
		this.P = new iron_math_Mat4(1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0);
	} else if(type == "point" || type == "area") {
		var zn = data.raw.near_plane;
		var zf = data.raw.far_plane;
		var uh = 1.0 / Math.tan(fov / 2);
		this.P = new iron_math_Mat4(uh / 1,0,0,0,0,uh,0,0,0,0,(zf + zn) / (zn - zf),2 * zf * zn / (zn - zf),0,0,-1,0);
	} else if(type == "spot") {
		var zn = data.raw.near_plane;
		var zf = data.raw.far_plane;
		var uh = 1.0 / Math.tan(fov / 2);
		this.P = new iron_math_Mat4(uh / 1,0,0,0,0,uh,0,0,0,0,(zf + zn) / (zn - zf),2 * zf * zn / (zn - zf),0,0,-1,0);
	}
	iron_Scene.active.lights.push(this);
};
$hxClasses["iron.object.LightObject"] = iron_object_LightObject;
iron_object_LightObject.__name__ = "iron.object.LightObject";
iron_object_LightObject.setCorners = function() {
	var _this = iron_object_LightObject.corners[0];
	_this.x = -1.0;
	_this.y = -1.0;
	_this.z = 1.0;
	_this.w = 1.0;
	var _this = iron_object_LightObject.corners[1];
	_this.x = -1.0;
	_this.y = -1.0;
	_this.z = -1.0;
	_this.w = 1.0;
	var _this = iron_object_LightObject.corners[2];
	_this.x = -1.0;
	_this.y = 1.0;
	_this.z = 1.0;
	_this.w = 1.0;
	var _this = iron_object_LightObject.corners[3];
	_this.x = -1.0;
	_this.y = 1.0;
	_this.z = -1.0;
	_this.w = 1.0;
	var _this = iron_object_LightObject.corners[4];
	_this.x = 1.0;
	_this.y = -1.0;
	_this.z = 1.0;
	_this.w = 1.0;
	var _this = iron_object_LightObject.corners[5];
	_this.x = 1.0;
	_this.y = -1.0;
	_this.z = -1.0;
	_this.w = 1.0;
	var _this = iron_object_LightObject.corners[6];
	_this.x = 1.0;
	_this.y = 1.0;
	_this.z = 1.0;
	_this.w = 1.0;
	var _this = iron_object_LightObject.corners[7];
	_this.x = 1.0;
	_this.y = 1.0;
	_this.z = -1.0;
	_this.w = 1.0;
};
iron_object_LightObject.__super__ = iron_object_Object;
iron_object_LightObject.prototype = $extend(iron_object_Object.prototype,{
	remove: function() {
		if(iron_Scene.active != null) {
			HxOverrides.remove(iron_Scene.active.lights,this);
		}
		iron_object_Object.prototype.remove.call(this);
	}
	,buildMatrix: function(camera) {
		this.transform.buildMatrix();
		if(this.data.raw.type == "sun") {
			this.setCascade(camera,0);
		} else {
			var _this = this.V;
			var m = this.transform.world;
			var a00 = m.self._00;
			var a01 = m.self._01;
			var a02 = m.self._02;
			var a03 = m.self._03;
			var a10 = m.self._10;
			var a11 = m.self._11;
			var a12 = m.self._12;
			var a13 = m.self._13;
			var a20 = m.self._20;
			var a21 = m.self._21;
			var a22 = m.self._22;
			var a23 = m.self._23;
			var a30 = m.self._30;
			var a31 = m.self._31;
			var a32 = m.self._32;
			var a33 = m.self._33;
			var b00 = a00 * a11 - a01 * a10;
			var b01 = a00 * a12 - a02 * a10;
			var b02 = a00 * a13 - a03 * a10;
			var b03 = a01 * a12 - a02 * a11;
			var b04 = a01 * a13 - a03 * a11;
			var b05 = a02 * a13 - a03 * a12;
			var b06 = a20 * a31 - a21 * a30;
			var b07 = a20 * a32 - a22 * a30;
			var b08 = a20 * a33 - a23 * a30;
			var b09 = a21 * a32 - a22 * a31;
			var b10 = a21 * a33 - a23 * a31;
			var b11 = a22 * a33 - a23 * a32;
			var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;
			if(det == 0.0) {
				_this.self._00 = 1.0;
				_this.self._01 = 0.0;
				_this.self._02 = 0.0;
				_this.self._03 = 0.0;
				_this.self._10 = 0.0;
				_this.self._11 = 1.0;
				_this.self._12 = 0.0;
				_this.self._13 = 0.0;
				_this.self._20 = 0.0;
				_this.self._21 = 0.0;
				_this.self._22 = 1.0;
				_this.self._23 = 0.0;
				_this.self._30 = 0.0;
				_this.self._31 = 0.0;
				_this.self._32 = 0.0;
				_this.self._33 = 1.0;
			} else {
				det = 1.0 / det;
				_this.self._00 = (a11 * b11 - a12 * b10 + a13 * b09) * det;
				_this.self._01 = (a02 * b10 - a01 * b11 - a03 * b09) * det;
				_this.self._02 = (a31 * b05 - a32 * b04 + a33 * b03) * det;
				_this.self._03 = (a22 * b04 - a21 * b05 - a23 * b03) * det;
				_this.self._10 = (a12 * b08 - a10 * b11 - a13 * b07) * det;
				_this.self._11 = (a00 * b11 - a02 * b08 + a03 * b07) * det;
				_this.self._12 = (a32 * b02 - a30 * b05 - a33 * b01) * det;
				_this.self._13 = (a20 * b05 - a22 * b02 + a23 * b01) * det;
				_this.self._20 = (a10 * b10 - a11 * b08 + a13 * b06) * det;
				_this.self._21 = (a01 * b08 - a00 * b10 - a03 * b06) * det;
				_this.self._22 = (a30 * b04 - a31 * b02 + a33 * b00) * det;
				_this.self._23 = (a21 * b02 - a20 * b04 - a23 * b00) * det;
				_this.self._30 = (a11 * b07 - a10 * b09 - a12 * b06) * det;
				_this.self._31 = (a00 * b09 - a01 * b07 + a02 * b06) * det;
				_this.self._32 = (a31 * b01 - a30 * b03 - a32 * b00) * det;
				_this.self._33 = (a20 * b03 - a21 * b01 + a22 * b00) * det;
			}
			this.updateViewFrustum(camera);
		}
	}
	,setCascade: function(camera,cascade) {
		var _this = iron_object_LightObject.m;
		var m = camera.V;
		_this.self._00 = m.self._00;
		_this.self._01 = m.self._01;
		_this.self._02 = m.self._02;
		_this.self._03 = m.self._03;
		_this.self._10 = m.self._10;
		_this.self._11 = m.self._11;
		_this.self._12 = m.self._12;
		_this.self._13 = m.self._13;
		_this.self._20 = m.self._20;
		_this.self._21 = m.self._21;
		_this.self._22 = m.self._22;
		_this.self._23 = m.self._23;
		_this.self._30 = m.self._30;
		_this.self._31 = m.self._31;
		_this.self._32 = m.self._32;
		_this.self._33 = m.self._33;
		if(this.camSlicedP == null) {
			var ortho = camera.data.raw.ortho;
			if(ortho == null) {
				var fov = camera.data.raw.fov;
				var near = this.data.raw.near_plane;
				var far = this.data.raw.far_plane;
				var aspect = camera.data.raw.aspect != null ? camera.data.raw.aspect : arm_App.w() / arm_App.h();
				var uh = 1.0 / Math.tan(fov / 2);
				this.camSlicedP = new iron_math_Mat4(uh / aspect,0,0,0,0,uh,0,0,0,0,(far + near) / (near - far),2 * far * near / (near - far),0,0,-1,0);
			} else {
				var left = ortho[0];
				var right = ortho[1];
				var bottom = ortho[2];
				var top = ortho[3];
				var near = this.data.raw.near_plane;
				var far = this.data.raw.far_plane;
				var rl = right - left;
				var tb = top - bottom;
				var fn = far - near;
				this.camSlicedP = new iron_math_Mat4(2 / rl,0,0,-(right + left) / rl,0,2 / tb,0,-(top + bottom) / tb,0,0,-2 / fn,-(far + near) / fn,0,0,0,1);
			}
		}
		var _this = iron_object_LightObject.m;
		var m = this.camSlicedP;
		var a00 = _this.self._00;
		var a01 = _this.self._01;
		var a02 = _this.self._02;
		var a03 = _this.self._03;
		var a10 = _this.self._10;
		var a11 = _this.self._11;
		var a12 = _this.self._12;
		var a13 = _this.self._13;
		var a20 = _this.self._20;
		var a21 = _this.self._21;
		var a22 = _this.self._22;
		var a23 = _this.self._23;
		var a30 = _this.self._30;
		var a31 = _this.self._31;
		var a32 = _this.self._32;
		var a33 = _this.self._33;
		var b0 = m.self._00;
		var b1 = m.self._10;
		var b2 = m.self._20;
		var b3 = m.self._30;
		_this.self._00 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
		_this.self._10 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
		_this.self._20 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
		_this.self._30 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
		b0 = m.self._01;
		b1 = m.self._11;
		b2 = m.self._21;
		b3 = m.self._31;
		_this.self._01 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
		_this.self._11 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
		_this.self._21 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
		_this.self._31 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
		b0 = m.self._02;
		b1 = m.self._12;
		b2 = m.self._22;
		b3 = m.self._32;
		_this.self._02 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
		_this.self._12 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
		_this.self._22 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
		_this.self._32 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
		b0 = m.self._03;
		b1 = m.self._13;
		b2 = m.self._23;
		b3 = m.self._33;
		_this.self._03 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
		_this.self._13 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
		_this.self._23 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
		_this.self._33 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
		var _this = iron_object_LightObject.m;
		var m = iron_object_LightObject.m;
		var a00 = m.self._00;
		var a01 = m.self._01;
		var a02 = m.self._02;
		var a03 = m.self._03;
		var a10 = m.self._10;
		var a11 = m.self._11;
		var a12 = m.self._12;
		var a13 = m.self._13;
		var a20 = m.self._20;
		var a21 = m.self._21;
		var a22 = m.self._22;
		var a23 = m.self._23;
		var a30 = m.self._30;
		var a31 = m.self._31;
		var a32 = m.self._32;
		var a33 = m.self._33;
		var b00 = a00 * a11 - a01 * a10;
		var b01 = a00 * a12 - a02 * a10;
		var b02 = a00 * a13 - a03 * a10;
		var b03 = a01 * a12 - a02 * a11;
		var b04 = a01 * a13 - a03 * a11;
		var b05 = a02 * a13 - a03 * a12;
		var b06 = a20 * a31 - a21 * a30;
		var b07 = a20 * a32 - a22 * a30;
		var b08 = a20 * a33 - a23 * a30;
		var b09 = a21 * a32 - a22 * a31;
		var b10 = a21 * a33 - a23 * a31;
		var b11 = a22 * a33 - a23 * a32;
		var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;
		if(det == 0.0) {
			_this.self._00 = 1.0;
			_this.self._01 = 0.0;
			_this.self._02 = 0.0;
			_this.self._03 = 0.0;
			_this.self._10 = 0.0;
			_this.self._11 = 1.0;
			_this.self._12 = 0.0;
			_this.self._13 = 0.0;
			_this.self._20 = 0.0;
			_this.self._21 = 0.0;
			_this.self._22 = 1.0;
			_this.self._23 = 0.0;
			_this.self._30 = 0.0;
			_this.self._31 = 0.0;
			_this.self._32 = 0.0;
			_this.self._33 = 1.0;
		} else {
			det = 1.0 / det;
			_this.self._00 = (a11 * b11 - a12 * b10 + a13 * b09) * det;
			_this.self._01 = (a02 * b10 - a01 * b11 - a03 * b09) * det;
			_this.self._02 = (a31 * b05 - a32 * b04 + a33 * b03) * det;
			_this.self._03 = (a22 * b04 - a21 * b05 - a23 * b03) * det;
			_this.self._10 = (a12 * b08 - a10 * b11 - a13 * b07) * det;
			_this.self._11 = (a00 * b11 - a02 * b08 + a03 * b07) * det;
			_this.self._12 = (a32 * b02 - a30 * b05 - a33 * b01) * det;
			_this.self._13 = (a20 * b05 - a22 * b02 + a23 * b01) * det;
			_this.self._20 = (a10 * b10 - a11 * b08 + a13 * b06) * det;
			_this.self._21 = (a01 * b08 - a00 * b10 - a03 * b06) * det;
			_this.self._22 = (a30 * b04 - a31 * b02 + a33 * b00) * det;
			_this.self._23 = (a21 * b02 - a20 * b04 - a23 * b00) * det;
			_this.self._30 = (a11 * b07 - a10 * b09 - a12 * b06) * det;
			_this.self._31 = (a00 * b09 - a01 * b07 + a02 * b06) * det;
			_this.self._32 = (a31 * b01 - a30 * b03 - a32 * b00) * det;
			_this.self._33 = (a20 * b03 - a21 * b01 + a22 * b00) * det;
		}
		var _this = this.V;
		var m = this.transform.world;
		var a00 = m.self._00;
		var a01 = m.self._01;
		var a02 = m.self._02;
		var a03 = m.self._03;
		var a10 = m.self._10;
		var a11 = m.self._11;
		var a12 = m.self._12;
		var a13 = m.self._13;
		var a20 = m.self._20;
		var a21 = m.self._21;
		var a22 = m.self._22;
		var a23 = m.self._23;
		var a30 = m.self._30;
		var a31 = m.self._31;
		var a32 = m.self._32;
		var a33 = m.self._33;
		var b00 = a00 * a11 - a01 * a10;
		var b01 = a00 * a12 - a02 * a10;
		var b02 = a00 * a13 - a03 * a10;
		var b03 = a01 * a12 - a02 * a11;
		var b04 = a01 * a13 - a03 * a11;
		var b05 = a02 * a13 - a03 * a12;
		var b06 = a20 * a31 - a21 * a30;
		var b07 = a20 * a32 - a22 * a30;
		var b08 = a20 * a33 - a23 * a30;
		var b09 = a21 * a32 - a22 * a31;
		var b10 = a21 * a33 - a23 * a31;
		var b11 = a22 * a33 - a23 * a32;
		var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;
		if(det == 0.0) {
			_this.self._00 = 1.0;
			_this.self._01 = 0.0;
			_this.self._02 = 0.0;
			_this.self._03 = 0.0;
			_this.self._10 = 0.0;
			_this.self._11 = 1.0;
			_this.self._12 = 0.0;
			_this.self._13 = 0.0;
			_this.self._20 = 0.0;
			_this.self._21 = 0.0;
			_this.self._22 = 1.0;
			_this.self._23 = 0.0;
			_this.self._30 = 0.0;
			_this.self._31 = 0.0;
			_this.self._32 = 0.0;
			_this.self._33 = 1.0;
		} else {
			det = 1.0 / det;
			_this.self._00 = (a11 * b11 - a12 * b10 + a13 * b09) * det;
			_this.self._01 = (a02 * b10 - a01 * b11 - a03 * b09) * det;
			_this.self._02 = (a31 * b05 - a32 * b04 + a33 * b03) * det;
			_this.self._03 = (a22 * b04 - a21 * b05 - a23 * b03) * det;
			_this.self._10 = (a12 * b08 - a10 * b11 - a13 * b07) * det;
			_this.self._11 = (a00 * b11 - a02 * b08 + a03 * b07) * det;
			_this.self._12 = (a32 * b02 - a30 * b05 - a33 * b01) * det;
			_this.self._13 = (a20 * b05 - a22 * b02 + a23 * b01) * det;
			_this.self._20 = (a10 * b10 - a11 * b08 + a13 * b06) * det;
			_this.self._21 = (a01 * b08 - a00 * b10 - a03 * b06) * det;
			_this.self._22 = (a30 * b04 - a31 * b02 + a33 * b00) * det;
			_this.self._23 = (a21 * b02 - a20 * b04 - a23 * b00) * det;
			_this.self._30 = (a11 * b07 - a10 * b09 - a12 * b06) * det;
			_this.self._31 = (a00 * b09 - a01 * b07 + a02 * b06) * det;
			_this.self._32 = (a31 * b01 - a30 * b03 - a32 * b00) * det;
			_this.self._33 = (a20 * b03 - a21 * b01 + a22 * b00) * det;
		}
		var _this = this.V;
		var _this1 = iron_math_Mat4.helpVec;
		_this1.x = _this.self._00;
		_this1.y = _this.self._01;
		_this1.z = _this.self._02;
		_this1.w = 1.0;
		var scale = 1.0 / Math.sqrt(_this1.x * _this1.x + _this1.y * _this1.y + _this1.z * _this1.z);
		_this.self._00 *= scale;
		_this.self._01 *= scale;
		_this.self._02 *= scale;
		var _this1 = iron_math_Mat4.helpVec;
		_this1.x = _this.self._10;
		_this1.y = _this.self._11;
		_this1.z = _this.self._12;
		_this1.w = 1.0;
		scale = 1.0 / Math.sqrt(_this1.x * _this1.x + _this1.y * _this1.y + _this1.z * _this1.z);
		_this.self._10 *= scale;
		_this.self._11 *= scale;
		_this.self._12 *= scale;
		var _this1 = iron_math_Mat4.helpVec;
		_this1.x = _this.self._20;
		_this1.y = _this.self._21;
		_this1.z = _this.self._22;
		_this1.w = 1.0;
		scale = 1.0 / Math.sqrt(_this1.x * _this1.x + _this1.y * _this1.y + _this1.z * _this1.z);
		_this.self._20 *= scale;
		_this.self._21 *= scale;
		_this.self._22 *= scale;
		_this.self._03 = 0.0;
		_this.self._13 = 0.0;
		_this.self._23 = 0.0;
		_this.self._30 = 0.0;
		_this.self._31 = 0.0;
		_this.self._32 = 0.0;
		_this.self._33 = 1.0;
		var _this = iron_object_LightObject.m;
		var m = this.V;
		var a00 = _this.self._00;
		var a01 = _this.self._01;
		var a02 = _this.self._02;
		var a03 = _this.self._03;
		var a10 = _this.self._10;
		var a11 = _this.self._11;
		var a12 = _this.self._12;
		var a13 = _this.self._13;
		var a20 = _this.self._20;
		var a21 = _this.self._21;
		var a22 = _this.self._22;
		var a23 = _this.self._23;
		var a30 = _this.self._30;
		var a31 = _this.self._31;
		var a32 = _this.self._32;
		var a33 = _this.self._33;
		var b0 = m.self._00;
		var b1 = m.self._10;
		var b2 = m.self._20;
		var b3 = m.self._30;
		_this.self._00 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
		_this.self._10 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
		_this.self._20 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
		_this.self._30 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
		b0 = m.self._01;
		b1 = m.self._11;
		b2 = m.self._21;
		b3 = m.self._31;
		_this.self._01 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
		_this.self._11 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
		_this.self._21 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
		_this.self._31 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
		b0 = m.self._02;
		b1 = m.self._12;
		b2 = m.self._22;
		b3 = m.self._32;
		_this.self._02 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
		_this.self._12 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
		_this.self._22 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
		_this.self._32 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
		b0 = m.self._03;
		b1 = m.self._13;
		b2 = m.self._23;
		b3 = m.self._33;
		_this.self._03 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
		_this.self._13 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
		_this.self._23 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
		_this.self._33 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
		iron_object_LightObject.setCorners();
		var _g = 0;
		var _g1 = iron_object_LightObject.corners;
		while(_g < _g1.length) {
			var v = _g1[_g];
			++_g;
			var m = iron_object_LightObject.m;
			var x = v.x;
			var y = v.y;
			var z = v.z;
			var w = v.w;
			v.x = m.self._00 * x + m.self._10 * y + m.self._20 * z + m.self._30 * w;
			v.y = m.self._01 * x + m.self._11 * y + m.self._21 * z + m.self._31 * w;
			v.z = m.self._02 * x + m.self._12 * y + m.self._22 * z + m.self._32 * w;
			v.w = m.self._03 * x + m.self._13 * y + m.self._23 * z + m.self._33 * w;
			v.x /= v.w;
			v.y /= v.w;
			v.z /= v.w;
			v.w = 1.0;
		}
		var minx = iron_object_LightObject.corners[0].x;
		var miny = iron_object_LightObject.corners[0].y;
		var minz = iron_object_LightObject.corners[0].z;
		var maxx = iron_object_LightObject.corners[0].x;
		var maxy = iron_object_LightObject.corners[0].y;
		var maxz = iron_object_LightObject.corners[0].z;
		var _g = 0;
		var _g1 = iron_object_LightObject.corners;
		while(_g < _g1.length) {
			var v = _g1[_g];
			++_g;
			if(v.x < minx) {
				minx = v.x;
			}
			if(v.x > maxx) {
				maxx = v.x;
			}
			if(v.y < miny) {
				miny = v.y;
			}
			if(v.y > maxy) {
				maxy = v.y;
			}
			if(v.z < minz) {
				minz = v.z;
			}
			if(v.z > maxz) {
				maxz = v.z;
			}
		}
		var v1 = iron_object_LightObject.corners[0];
		var v2 = iron_object_LightObject.corners[7];
		var vx = v1.x - v2.x;
		var vy = v1.y - v2.y;
		var vz = v1.z - v2.z;
		var diag0 = Math.sqrt(vx * vx + vy * vy + vz * vz);
		var offx = (diag0 - (maxx - minx)) * 0.5;
		var offy = (diag0 - (maxy - miny)) * 0.5;
		minx -= offx;
		maxx += offx;
		miny -= offy;
		maxy += offy;
		var smsize = this.data.raw.shadowmap_size;
		var worldPerTexelX = (maxx - minx) / smsize;
		var worldPerTexelY = (maxy - miny) / smsize;
		var worldPerTexelZ = (maxz - minz) / smsize;
		minx = Math.floor(minx / worldPerTexelX) * worldPerTexelX;
		miny = Math.floor(miny / worldPerTexelY) * worldPerTexelY;
		minz = Math.floor(minz / worldPerTexelZ) * worldPerTexelZ;
		maxx = Math.floor(maxx / worldPerTexelX) * worldPerTexelX;
		maxy = Math.floor(maxy / worldPerTexelY) * worldPerTexelY;
		maxz = Math.floor(maxz / worldPerTexelZ) * worldPerTexelZ;
		var hx = (maxx - minx) / 2;
		var hy = (maxy - miny) / 2;
		var hz = (maxz - minz) / 2;
		this.V.self._30 = -(minx + hx);
		this.V.self._31 = -(miny + hy);
		this.V.self._32 = -(minz + hz);
		var left = -hx;
		var bottom = -hy;
		var near = -hz * 4 * iron_object_LightObject.cascadeBounds;
		var rl = hx - left;
		var tb = hy - bottom;
		var fn = hz - near;
		iron_object_LightObject.m = new iron_math_Mat4(2 / rl,0,0,-(hx + left) / rl,0,2 / tb,0,-(hy + bottom) / tb,0,0,-2 / fn,-(hz + near) / fn,0,0,0,1);
		var _this = this.P;
		var m = iron_object_LightObject.m;
		_this.self._00 = m.self._00;
		_this.self._01 = m.self._01;
		_this.self._02 = m.self._02;
		_this.self._03 = m.self._03;
		_this.self._10 = m.self._10;
		_this.self._11 = m.self._11;
		_this.self._12 = m.self._12;
		_this.self._13 = m.self._13;
		_this.self._20 = m.self._20;
		_this.self._21 = m.self._21;
		_this.self._22 = m.self._22;
		_this.self._23 = m.self._23;
		_this.self._30 = m.self._30;
		_this.self._31 = m.self._31;
		_this.self._32 = m.self._32;
		_this.self._33 = m.self._33;
		this.updateViewFrustum(camera);
	}
	,updateViewFrustum: function(camera) {
		var _this = this.VP;
		var b = this.P;
		var a = this.V;
		var a00 = a.self._00;
		var a01 = a.self._01;
		var a02 = a.self._02;
		var a03 = a.self._03;
		var a10 = a.self._10;
		var a11 = a.self._11;
		var a12 = a.self._12;
		var a13 = a.self._13;
		var a20 = a.self._20;
		var a21 = a.self._21;
		var a22 = a.self._22;
		var a23 = a.self._23;
		var a30 = a.self._30;
		var a31 = a.self._31;
		var a32 = a.self._32;
		var a33 = a.self._33;
		var b0 = b.self._00;
		var b1 = b.self._10;
		var b2 = b.self._20;
		var b3 = b.self._30;
		_this.self._00 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
		_this.self._10 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
		_this.self._20 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
		_this.self._30 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
		b0 = b.self._01;
		b1 = b.self._11;
		b2 = b.self._21;
		b3 = b.self._31;
		_this.self._01 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
		_this.self._11 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
		_this.self._21 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
		_this.self._31 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
		b0 = b.self._02;
		b1 = b.self._12;
		b2 = b.self._22;
		b3 = b.self._32;
		_this.self._02 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
		_this.self._12 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
		_this.self._22 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
		_this.self._32 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
		b0 = b.self._03;
		b1 = b.self._13;
		b2 = b.self._23;
		b3 = b.self._33;
		_this.self._03 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
		_this.self._13 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
		_this.self._23 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
		_this.self._33 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
		if(camera.data.raw.frustum_culling) {
			if(this.frustumPlanes == null) {
				this.frustumPlanes = [];
				this.frustumPlanes.push(new iron_object_FrustumPlane());
				this.frustumPlanes.push(new iron_object_FrustumPlane());
				this.frustumPlanes.push(new iron_object_FrustumPlane());
				this.frustumPlanes.push(new iron_object_FrustumPlane());
				this.frustumPlanes.push(new iron_object_FrustumPlane());
				this.frustumPlanes.push(new iron_object_FrustumPlane());
			}
			iron_object_CameraObject.buildViewFrustum(this.VP,this.frustumPlanes);
		}
	}
	,setCubeFace: function(face,camera) {
		var _this = iron_object_LightObject.eye;
		_this.x = this.transform.world.self._30;
		_this.y = this.transform.world.self._31;
		_this.z = this.transform.world.self._32;
		_this.w = 1.0;
		iron_object_CameraObject.setCubeFace(this.V,iron_object_LightObject.eye,face,face == 2 || face == 3);
		this.updateViewFrustum(camera);
	}
	,__class__: iron_object_LightObject
});
var iron_object_MeshObject = function(data,materials) {
	this.prevMatrix = new iron_math_Mat4(1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0);
	this.force_context = null;
	this.skip_context = null;
	this.tilesheet = null;
	this.frustumCulling = true;
	this.screenSize = 0.0;
	this.particleIndex = -1;
	this.particleOwner = null;
	this.particleChildren = null;
	this.particleSystems = null;
	this.materialIndex = 0;
	this.data = null;
	iron_object_Object.call(this);
	this.materials = materials;
	this.setData(data);
	iron_Scene.active.meshes.push(this);
};
$hxClasses["iron.object.MeshObject"] = iron_object_MeshObject;
iron_object_MeshObject.__name__ = "iron.object.MeshObject";
iron_object_MeshObject.__super__ = iron_object_Object;
iron_object_MeshObject.prototype = $extend(iron_object_Object.prototype,{
	setData: function(data) {
		this.data = data;
		data.refcount++;
		data.geom.build();
		this.transform.scaleWorld = data.scalePos;
	}
	,remove: function() {
		if(this.particleChildren != null) {
			var _g = 0;
			var _g1 = this.particleChildren;
			while(_g < _g1.length) _g1[_g++].remove();
			this.particleChildren = null;
		}
		if(this.particleSystems != null) {
			var _g = 0;
			var _g1 = this.particleSystems;
			while(_g < _g1.length) _g1[_g++].remove();
			this.particleSystems = null;
		}
		if(this.tilesheet != null) {
			this.tilesheet.remove();
		}
		if(iron_Scene.active != null) {
			HxOverrides.remove(iron_Scene.active.meshes,this);
		}
		this.data.refcount--;
		iron_object_Object.prototype.remove.call(this);
	}
	,setupAnimation: function(oactions) {
		iron_object_Object.prototype.setupAnimation.call(this,oactions);
	}
	,setupParticleSystem: function(sceneName,pref) {
		if(this.particleSystems == null) {
			this.particleSystems = [];
		}
		var psys = new iron_object_ParticleSystem(sceneName,pref);
		this.particleSystems.push(psys);
	}
	,setupTilesheet: function(sceneName,tilesheet_ref,tilesheet_action_ref) {
		this.tilesheet = new iron_object_Tilesheet(sceneName,tilesheet_ref,tilesheet_action_ref);
	}
	,setCulled: function(isShadow,b) {
		if(isShadow) {
			this.culledShadow = b;
		} else {
			this.culledMesh = b;
		}
		this.culled = this.culledMesh && this.culledShadow;
		return b;
	}
	,cullMaterial: function(context) {
		if(!(this.raw != null && this.raw.lod_material != null && this.raw.lod_material == true) && !this.validContext(this.materials,context)) {
			return true;
		}
		var isShadow = context == "shadowmap";
		if(!this.visibleMesh && !isShadow) {
			return this.setCulled(isShadow,true);
		}
		if(!this.visibleShadow && isShadow) {
			return this.setCulled(isShadow,true);
		}
		if(this.skip_context == context) {
			return this.setCulled(isShadow,true);
		}
		if(this.force_context != null && this.force_context != context) {
			return this.setCulled(isShadow,true);
		}
		return this.setCulled(isShadow,false);
	}
	,cullMesh: function(context,camera,light) {
		if(camera == null) {
			return false;
		}
		if(camera.data.raw.frustum_culling && this.frustumCulling) {
			var radiusScale = this.data.isSkinned ? 2.0 : 1.0;
			if(this.particleSystems != null || this.particleOwner != null) {
				radiusScale *= 1000;
			}
			if(context == "voxel") {
				radiusScale *= 100;
			}
			if(this.data.geom.instanced) {
				radiusScale *= 100;
			}
			var isShadow = context == "shadowmap";
			var frustumPlanes = isShadow ? light.frustumPlanes : camera.frustumPlanes;
			if(isShadow && light.data.raw.type != "sun") {
				light.transform.radius = light.data.raw.far_plane;
				if(!iron_object_CameraObject.sphereInFrustum(camera.frustumPlanes,light.transform)) {
					return this.setCulled(isShadow,true);
				}
			}
			if(!iron_object_CameraObject.sphereInFrustum(frustumPlanes,this.transform,radiusScale)) {
				return this.setCulled(isShadow,true);
			}
		}
		this.culled = false;
		return this.culled;
	}
	,skipContext: function(context,mat) {
		if(mat.raw.skip_context != null && mat.raw.skip_context == context) {
			return true;
		}
		return false;
	}
	,getContexts: function(context,materials,materialContexts,shaderContexts) {
		var _g = 0;
		while(_g < materials.length) {
			var mat = materials[_g];
			++_g;
			var found = false;
			var _g1 = 0;
			var _g2 = mat.raw.contexts.length;
			while(_g1 < _g2) {
				var i = _g1++;
				if(HxOverrides.substr(mat.raw.contexts[i].name,0,context.length) == context) {
					materialContexts.push(mat.contexts[i]);
					shaderContexts.push(mat.shader.getContext(context));
					found = true;
					break;
				}
			}
			if(!found) {
				materialContexts.push(null);
				shaderContexts.push(null);
			}
		}
	}
	,render: function(g,context,bindParams) {
		var _gthis = this;
		if(this.data == null || !this.data.geom.ready) {
			return;
		}
		if(!this.visible) {
			return;
		}
		if(this.cullMesh(context,iron_Scene.active.camera,iron_RenderPath.active.light)) {
			return;
		}
		if(this.raw != null && this.raw.is_particle && this.particleOwner == null) {
			return;
		}
		if(this.particleSystems != null && (this.raw != null && context == "mesh")) {
			if(this.particleChildren == null) {
				this.particleChildren = [];
				var _g = 0;
				var _g1 = this.particleSystems;
				while(_g < _g1.length) iron_Scene.active.spawnObject(_g1[_g++].data.raw.instance_object,null,function(o) {
					if(o != null) {
						var c = o;
						_gthis.particleChildren.push(c);
						c.particleOwner = _gthis;
						c.particleIndex = _gthis.particleChildren.length - 1;
					}
				});
			}
			var _g = 0;
			var _g1 = this.particleSystems.length;
			while(_g < _g1) {
				var i = _g++;
				this.particleSystems[i].update(this.particleChildren[i],this);
			}
		}
		if(this.particleSystems != null && this.particleSystems.length > 0 && !this.raw.render_emitter) {
			return;
		}
		if(this.tilesheet != null) {
			this.tilesheet.update();
		}
		if(this.cullMaterial(context)) {
			return;
		}
		var mats = this.materials;
		var lod = this;
		if(this.raw != null && this.raw.lods != null && this.raw.lods.length > 0) {
			var tr = this.transform;
			this.screenSize = tr.dim.x * tr.dim.y * tr.dim.z * (1.0 / this.cameraDistance);
			this.screenSize = this.screenSize > 1.0 ? 1.0 : this.screenSize;
			if(this.lods == null) {
				this.lods = [];
				var _g = 0;
				var _g1 = this.raw.lods;
				while(_g < _g1.length) {
					var l = _g1[_g];
					++_g;
					if(l.object_ref == "") {
						this.lods.push(null);
					} else {
						this.lods.push(iron_Scene.active.getChild(l.object_ref));
					}
				}
			}
			if(context == "voxel") {
				lod = this.lods[this.lods.length - 1];
			} else {
				var _g = 0;
				var _g1 = this.raw.lods.length;
				while(_g < _g1) {
					var i = _g++;
					if(this.screenSize > this.raw.lods[i].screen_size) {
						break;
					}
					lod = this.lods[i];
					if(this.raw != null && this.raw.lod_material != null && this.raw.lod_material == true) {
						mats = lod.materials;
					}
				}
			}
			if(lod == null) {
				return;
			}
		}
		if(this.raw != null && this.raw.lod_material != null && this.raw.lod_material == true && !this.validContext(mats,context)) {
			return;
		}
		var materialContexts = [];
		var shaderContexts = [];
		this.getContexts(context,mats,materialContexts,shaderContexts);
		iron_object_Uniforms.posUnpack = this.data.scalePos;
		iron_object_Uniforms.texUnpack = this.data.scaleTex;
		this.transform.update();
		var ldata = lod.data;
		var _g = 0;
		var _g1 = ldata.geom.indexBuffers.length;
		while(_g < _g1) {
			var i = _g++;
			var mi = ldata.geom.materialIndices[i];
			if(shaderContexts.length <= mi || shaderContexts[mi] == null) {
				continue;
			}
			this.materialIndex = mi;
			if(this.materials.length > mi && this.skipContext(context,this.materials[mi])) {
				continue;
			}
			var scontext = shaderContexts[mi];
			if(scontext == null) {
				continue;
			}
			var elems = scontext.raw.vertex_elements;
			if(scontext.pipeState != iron_object_MeshObject.lastPipeline) {
				g.setPipeline(scontext.pipeState);
				iron_object_MeshObject.lastPipeline = scontext.pipeState;
			}
			iron_object_Uniforms.setContextConstants(g,scontext,bindParams);
			iron_object_Uniforms.setObjectConstants(g,scontext,this);
			if(materialContexts.length > mi) {
				iron_object_Uniforms.setMaterialConstants(g,scontext,materialContexts[mi]);
			}
			if(ldata.geom.instancedVB != null) {
				g.setVertexBuffers([ldata.geom.get(elems),ldata.geom.instancedVB]);
			} else {
				g.setVertexBuffer(ldata.geom.get(elems));
			}
			g.setIndexBuffer(ldata.geom.indexBuffers[i]);
			if(ldata.geom.instanced) {
				g.drawIndexedVerticesInstanced(ldata.geom.instanceCount,ldata.geom.start,ldata.geom.count);
			} else {
				g.drawIndexedVertices(ldata.geom.start,ldata.geom.count);
			}
		}
		var _this = this.prevMatrix;
		var m = this.transform.worldUnpack;
		_this.self._00 = m.self._00;
		_this.self._01 = m.self._01;
		_this.self._02 = m.self._02;
		_this.self._03 = m.self._03;
		_this.self._10 = m.self._10;
		_this.self._11 = m.self._11;
		_this.self._12 = m.self._12;
		_this.self._13 = m.self._13;
		_this.self._20 = m.self._20;
		_this.self._21 = m.self._21;
		_this.self._22 = m.self._22;
		_this.self._23 = m.self._23;
		_this.self._30 = m.self._30;
		_this.self._31 = m.self._31;
		_this.self._32 = m.self._32;
		_this.self._33 = m.self._33;
	}
	,validContext: function(mats,context) {
		var _g = 0;
		while(_g < mats.length) if(mats[_g++].getContext(context) != null) {
			return true;
		}
		return false;
	}
	,__class__: iron_object_MeshObject
});
var iron_object_ObjectAnimation = function(object,oactions) {
	this.object = object;
	this.oactions = oactions;
	this.isSkinned = false;
	iron_object_Animation.call(this);
};
$hxClasses["iron.object.ObjectAnimation"] = iron_object_ObjectAnimation;
iron_object_ObjectAnimation.__name__ = "iron.object.ObjectAnimation";
iron_object_ObjectAnimation.__super__ = iron_object_Animation;
iron_object_ObjectAnimation.prototype = $extend(iron_object_Animation.prototype,{
	getAction: function(action) {
		var _g = 0;
		var _g1 = this.oactions;
		while(_g < _g1.length) {
			var a = _g1[_g];
			++_g;
			if(a != null && a.objects[0].name == action) {
				return a.objects[0];
			}
		}
		return null;
	}
	,play: function(action,onComplete,blendTime,speed,loop) {
		if(loop == null) {
			loop = true;
		}
		if(speed == null) {
			speed = 1.0;
		}
		if(blendTime == null) {
			blendTime = 0.0;
		}
		if(action == null) {
			action = "";
		}
		iron_object_Animation.prototype.play.call(this,action,onComplete,blendTime,speed,loop);
		if(this.action == "" && this.oactions[0] != null) {
			this.action = this.oactions[0].objects[0].name;
		}
		this.oaction = this.getAction(this.action);
		if(this.oaction != null) {
			this.isSampled = this.oaction.sampled != null && this.oaction.sampled;
		}
	}
	,update: function(delta) {
		if(!this.object.visible || this.object.culled || this.oaction == null) {
			return;
		}
		iron_object_Animation.prototype.update.call(this,delta);
		if(this.paused) {
			return;
		}
		if(!this.isSkinned) {
			this.updateObjectAnim();
		}
	}
	,updateObjectAnim: function() {
		this.updateTransformAnim(this.oaction.anim,this.object.transform);
		this.object.transform.buildMatrix();
	}
	,updateTransformAnim: function(anim,transform) {
		if(anim == null) {
			return;
		}
		var total = anim.end * this.frameTime - anim.begin * this.frameTime;
		if(anim.has_delta) {
			if(transform.dloc == null) {
				transform.dloc = new iron_math_Vec4();
				transform.drot = new iron_math_Quat();
				transform.dscale = new iron_math_Vec4();
			}
			var _this = transform.dloc;
			_this.x = 0;
			_this.y = 0;
			_this.z = 0;
			_this.w = 1.0;
			var _this = transform.dscale;
			_this.x = 0;
			_this.y = 0;
			_this.z = 0;
			_this.w = 1.0;
			transform._deulerX = transform._deulerY = transform._deulerZ = 0.0;
		}
		var _g = 0;
		var _g1 = anim.tracks;
		while(_g < _g1.length) {
			var track = _g1[_g];
			++_g;
			if(this.frameIndex == -1) {
				this.rewind(track);
			}
			var sign = this.speed > 0 ? 1 : -1;
			var t = this.time + anim.begin * this.frameTime;
			while(true) {
				var frameValues = track.frames;
				if(!(this.speed > 0 ? this.frameIndex < frameValues.length - 2 && t > frameValues[this.frameIndex + 1] * this.frameTime : this.frameIndex > 1 && t > frameValues[this.frameIndex - 1] * this.frameTime)) {
					break;
				}
				this.frameIndex += sign;
			}
			if(this.frameIndex >= track.frames.length) {
				continue;
			}
			if(this.time > total) {
				if(this.onComplete != null) {
					this.onComplete();
				}
				if(this.loop) {
					this.rewind(track);
				} else {
					this.frameIndex -= sign;
					this.paused = true;
				}
				return;
			}
			var ti = this.frameIndex;
			var t1 = track.frames[ti] * this.frameTime;
			var s = (t - t1) / (track.frames[ti + sign] * this.frameTime - t1);
			var value = (1.0 - s) * track.values[ti] + s * track.values[ti + sign];
			switch(track.target) {
			case "dqwrot":
				transform.drot.w = value;
				break;
			case "dqxrot":
				transform.drot.x = value;
				break;
			case "dqyrot":
				transform.drot.y = value;
				break;
			case "dqzrot":
				transform.drot.z = value;
				break;
			case "dxloc":
				transform.dloc.x = value;
				break;
			case "dxrot":
				transform._deulerX = value;
				break;
			case "dxscl":
				transform.dscale.x = value;
				break;
			case "dyloc":
				transform.dloc.y = value;
				break;
			case "dyrot":
				transform._deulerY = value;
				break;
			case "dyscl":
				transform.dscale.y = value;
				break;
			case "dzloc":
				transform.dloc.z = value;
				break;
			case "dzrot":
				transform._deulerZ = value;
				break;
			case "dzscl":
				transform.dscale.z = value;
				break;
			case "qwrot":
				transform.rot.w = value;
				break;
			case "qxrot":
				transform.rot.x = value;
				break;
			case "qyrot":
				transform.rot.y = value;
				break;
			case "qzrot":
				transform.rot.z = value;
				break;
			case "xloc":
				transform.loc.x = value;
				break;
			case "xrot":
				transform.setRotation(value,transform._eulerY,transform._eulerZ);
				break;
			case "xscl":
				transform.scale.x = value;
				break;
			case "yloc":
				transform.loc.y = value;
				break;
			case "yrot":
				transform.setRotation(transform._eulerX,value,transform._eulerZ);
				break;
			case "yscl":
				transform.scale.y = value;
				break;
			case "zloc":
				transform.loc.z = value;
				break;
			case "zrot":
				transform.setRotation(transform._eulerX,transform._eulerY,value);
				break;
			case "zscl":
				transform.scale.z = value;
				break;
			}
		}
	}
	,__class__: iron_object_ObjectAnimation
});
var iron_object_ParticleSystem = function(sceneName,pref) {
	this.m = new iron_math_Mat4(1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0);
	this.lapTime = 0.0;
	this.lap = 0;
	this.count = 0;
	this.seed = 0;
	this.spawnRate = 0.0;
	this.time = 0.0;
	this.animtime = 0.0;
	this.lifetime = 0.0;
	this.frameRate = 24;
	this.speed = 1.0;
	var _gthis = this;
	this.seed = pref.seed;
	this.particles = [];
	this.ready = false;
	iron_data_Data.getParticle(sceneName,pref.particle,function(b) {
		_gthis.data = b;
		_gthis.r = _gthis.data.raw;
		if(iron_Scene.active.raw.gravity != null) {
			_gthis.gx = iron_Scene.active.raw.gravity[0] * _gthis.r.weight_gravity;
			_gthis.gy = iron_Scene.active.raw.gravity[1] * _gthis.r.weight_gravity;
			_gthis.gz = iron_Scene.active.raw.gravity[2] * _gthis.r.weight_gravity;
		} else {
			_gthis.gx = 0;
			_gthis.gy = 0;
			_gthis.gz = -9.81 * _gthis.r.weight_gravity;
		}
		_gthis.alignx = _gthis.r.object_align_factor[0] / 2;
		_gthis.aligny = _gthis.r.object_align_factor[1] / 2;
		_gthis.alignz = _gthis.r.object_align_factor[2] / 2;
		_gthis.lifetime = _gthis.r.lifetime / _gthis.frameRate;
		_gthis.animtime = (_gthis.r.frame_end - _gthis.r.frame_start) / _gthis.frameRate;
		_gthis.spawnRate = (_gthis.r.frame_end - _gthis.r.frame_start) / _gthis.r.count / _gthis.frameRate;
		var _g = 0;
		var _g1 = _gthis.r.count;
		while(_g < _g1) _gthis.particles.push(new iron_object_Particle(_g++));
		_gthis.ready = true;
	});
};
$hxClasses["iron.object.ParticleSystem"] = iron_object_ParticleSystem;
iron_object_ParticleSystem.__name__ = "iron.object.ParticleSystem";
iron_object_ParticleSystem.prototype = {
	update: function(object,owner) {
		if(!this.ready || object == null || this.speed == 0.0) {
			return;
		}
		object.transform.loc = owner.transform.loc;
		object.transform.rot = owner.transform.rot;
		object.transform.buildMatrix();
		owner.transform.buildMatrix();
		var _this = object.transform.dim;
		var v = owner.transform.dim;
		_this.x = v.x;
		_this.y = v.y;
		_this.z = v.z;
		_this.w = v.w;
		this.dimx = object.transform.dim.x;
		this.dimy = object.transform.dim.y;
		if(object.tilesheet != null) {
			this.tilesx = object.tilesheet.raw.tilesx;
			this.tilesy = object.tilesheet.raw.tilesy;
			this.tilesFramerate = object.tilesheet.raw.framerate;
		}
		this.time += iron_system_Time.realDelta * this.speed;
		this.lap = this.time / this.animtime | 0;
		this.lapTime = this.time - this.lap * this.animtime;
		this.count = this.lapTime / this.spawnRate | 0;
		this.updateGpu(object,owner);
	}
	,getData: function() {
		var hair = this.r.type == 1;
		this.m.self._00 = this.r.loop ? this.animtime : -this.animtime;
		this.m.self._01 = hair ? 1 / this.particles.length : this.spawnRate;
		this.m.self._02 = hair ? 1 : this.lifetime;
		this.m.self._03 = this.particles.length;
		this.m.self._10 = hair ? 0 : this.alignx;
		this.m.self._11 = hair ? 0 : this.aligny;
		this.m.self._12 = hair ? 0 : this.alignz;
		this.m.self._13 = hair ? 0 : this.r.factor_random;
		this.m.self._20 = hair ? 0 : this.gx * this.r.mass;
		this.m.self._21 = hair ? 0 : this.gy * this.r.mass;
		this.m.self._22 = hair ? 0 : this.gz * this.r.mass;
		this.m.self._23 = hair ? 0 : this.r.lifetime_random;
		this.m.self._30 = this.tilesx;
		this.m.self._31 = this.tilesy;
		this.m.self._32 = 1 / this.tilesFramerate;
		this.m.self._33 = hair ? 1 : this.lapTime;
		return this.m;
	}
	,updateGpu: function(object,owner) {
		if(!object.data.geom.instanced) {
			this.setupGeomGpu(object,owner);
		}
	}
	,setupGeomGpu: function(object,owner) {
		var instancedData = new Float32Array(this.particles.length * 3);
		var i = 0;
		if(this.r.emit_from == 0) {
			var pa = owner.data.geom.positions;
			var sc = owner.data.scalePos;
			var _g = 0;
			var _g1 = this.particles;
			while(_g < _g1.length) {
				++_g;
				var j = this.fhash(i) * (pa.values.length / pa.size) | 0;
				instancedData[i] = pa.values[j * pa.size] / 32767 * sc;
				++i;
				instancedData[i] = pa.values[j * pa.size + 1] / 32767 * sc;
				++i;
				instancedData[i] = pa.values[j * pa.size + 2] / 32767 * sc;
				++i;
			}
		} else {
			var _g = 0;
			var _g1 = this.particles;
			while(_g < _g1.length) {
				++_g;
				instancedData[i] = (Math.random() * 2.0 - 1.0) * (object.transform.dim.x / 2.0);
				++i;
				instancedData[i] = (Math.random() * 2.0 - 1.0) * (object.transform.dim.y / 2.0);
				++i;
				instancedData[i] = (Math.random() * 2.0 - 1.0) * (object.transform.dim.z / 2.0);
				++i;
			}
		}
		if(this.r.particle_size != 1.0) {
			object.data.geom.applyScale(this.r.particle_size,this.r.particle_size,this.r.particle_size);
		}
		object.data.geom.setupInstanced(instancedData,1,0);
	}
	,fhash: function(n) {
		var s = n + 1.0;
		s *= 9301.0 % s;
		s = (s * 9301.0 + 49297.0) % 233280.0;
		return s / 233280.0;
	}
	,remove: function() {
	}
	,__class__: iron_object_ParticleSystem
};
var iron_object_Particle = function(i) {
	this.i = i;
};
$hxClasses["iron.object.Particle"] = iron_object_Particle;
iron_object_Particle.__name__ = "iron.object.Particle";
iron_object_Particle.prototype = {
	__class__: iron_object_Particle
};
var iron_object_Tilesheet = function(sceneName,tilesheet_ref,tilesheet_action_ref) {
	this.onActionComplete = null;
	this.time = 0.0;
	this.frame = 0;
	this.paused = false;
	this.action = null;
	this.tileY = 0.0;
	this.tileX = 0.0;
	var _gthis = this;
	this.ready = false;
	iron_data_Data.getSceneRaw(sceneName,function(format) {
		var _g = 0;
		var _g1 = format.tilesheet_datas;
		while(_g < _g1.length) {
			var ts = _g1[_g];
			++_g;
			if(ts.name == tilesheet_ref) {
				_gthis.raw = ts;
				_gthis.play(tilesheet_action_ref);
				_gthis.ready = true;
				break;
			}
		}
	});
};
$hxClasses["iron.object.Tilesheet"] = iron_object_Tilesheet;
iron_object_Tilesheet.__name__ = "iron.object.Tilesheet";
iron_object_Tilesheet.prototype = {
	play: function(action_ref,onActionComplete) {
		this.onActionComplete = onActionComplete;
		var _g = 0;
		var _g1 = this.raw.actions;
		while(_g < _g1.length) {
			var a = _g1[_g];
			++_g;
			if(a.name == action_ref) {
				this.action = a;
				break;
			}
		}
		this.setFrame(this.action.start);
		this.paused = false;
	}
	,remove: function() {
	}
	,update: function() {
		if(!this.ready || this.paused || this.action.start >= this.action.end) {
			return;
		}
		this.time += 1 / iron_system_Time.frequency * iron_system_Time.scale;
		if(this.time >= 1 / this.raw.framerate) {
			this.setFrame(this.frame + 1);
		}
	}
	,setFrame: function(f) {
		this.frame = f;
		this.time = 0;
		this.tileX = this.frame % this.raw.tilesx * (1 / this.raw.tilesx);
		this.tileY = (this.frame / this.raw.tilesx | 0) * (1 / this.raw.tilesy);
		if(this.frame >= this.action.end && this.action.start < this.action.end) {
			if(this.onActionComplete != null) {
				this.onActionComplete();
			}
			if(this.action.loop) {
				this.setFrame(this.action.start);
			} else {
				this.paused = true;
			}
		}
	}
	,__class__: iron_object_Tilesheet
};
var iron_object_Transform = function(object) {
	this.dscale = null;
	this.drot = null;
	this.dloc = null;
	this.boneParent = null;
	this.scaleWorld = 1.0;
	this.localOnly = false;
	this.object = object;
	this.reset();
};
$hxClasses["iron.object.Transform"] = iron_object_Transform;
iron_object_Transform.__name__ = "iron.object.Transform";
iron_object_Transform.prototype = {
	reset: function() {
		this.world = new iron_math_Mat4(1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0);
		this.worldUnpack = new iron_math_Mat4(1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0);
		this.local = new iron_math_Mat4(1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0);
		this.loc = new iron_math_Vec4();
		this.rot = new iron_math_Quat();
		this.scale = new iron_math_Vec4(1.0,1.0,1.0);
		this.dim = new iron_math_Vec4(2.0,2.0,2.0);
		this.radius = 1.0;
		this.dirty = true;
	}
	,update: function() {
		if(this.dirty) {
			this.buildMatrix();
		}
	}
	,composeDelta: function() {
		var _this = this.dloc;
		var a = this.loc;
		var b = this.dloc;
		_this.x = a.x + b.x;
		_this.y = a.y + b.y;
		_this.z = a.z + b.z;
		var _this = this.dscale;
		var a = this.dscale;
		var b = this.scale;
		_this.x = a.x + b.x;
		_this.y = a.y + b.y;
		_this.z = a.z + b.z;
		var _this = this.drot;
		var f = this._deulerX / 2;
		var c1 = Math.cos(f);
		var s1 = Math.sin(f);
		f = this._deulerY / 2;
		var c2 = Math.cos(f);
		var s2 = Math.sin(f);
		f = this._deulerZ / 2;
		var c3 = Math.cos(f);
		var s3 = Math.sin(f);
		_this.x = s1 * c2 * c3 + c1 * s2 * s3;
		_this.y = c1 * s2 * c3 + s1 * c2 * s3;
		_this.z = c1 * c2 * s3 - s1 * s2 * c3;
		_this.w = c1 * c2 * c3 - s1 * s2 * s3;
		var _this = this.drot;
		var q1 = this.rot;
		var q2 = this.drot;
		var q1x = q1.x;
		var q1y = q1.y;
		var q1z = q1.z;
		var q1w = q1.w;
		var q2x = q2.x;
		var q2y = q2.y;
		var q2z = q2.z;
		var q2w = q2.w;
		_this.x = q1x * q2w + q1w * q2x + q1y * q2z - q1z * q2y;
		_this.y = q1w * q2y - q1x * q2z + q1y * q2w + q1z * q2x;
		_this.z = q1w * q2z + q1x * q2y - q1y * q2x + q1z * q2w;
		_this.w = q1w * q2w - q1x * q2x - q1y * q2y - q1z * q2z;
		var _this = this.local;
		var loc = this.dloc;
		var quat = this.drot;
		var sc = this.dscale;
		var x = quat.x;
		var y = quat.y;
		var z = quat.z;
		var w = quat.w;
		var x2 = x + x;
		var y2 = y + y;
		var z2 = z + z;
		var xx = x * x2;
		var xy = x * y2;
		var xz = x * z2;
		var yy = y * y2;
		var yz = y * z2;
		var zz = z * z2;
		var wx = w * x2;
		var wy = w * y2;
		var wz = w * z2;
		_this.self._00 = 1.0 - (yy + zz);
		_this.self._10 = xy - wz;
		_this.self._20 = xz + wy;
		_this.self._01 = xy + wz;
		_this.self._11 = 1.0 - (xx + zz);
		_this.self._21 = yz - wx;
		_this.self._02 = xz - wy;
		_this.self._12 = yz + wx;
		_this.self._22 = 1.0 - (xx + yy);
		_this.self._03 = 0.0;
		_this.self._13 = 0.0;
		_this.self._23 = 0.0;
		_this.self._30 = 0.0;
		_this.self._31 = 0.0;
		_this.self._32 = 0.0;
		_this.self._33 = 1.0;
		var x = sc.x;
		var y = sc.y;
		var z = sc.z;
		_this.self._00 *= x;
		_this.self._01 *= x;
		_this.self._02 *= x;
		_this.self._03 *= x;
		_this.self._10 *= y;
		_this.self._11 *= y;
		_this.self._12 *= y;
		_this.self._13 *= y;
		_this.self._20 *= z;
		_this.self._21 *= z;
		_this.self._22 *= z;
		_this.self._23 *= z;
		_this.self._30 = loc.x;
		_this.self._31 = loc.y;
		_this.self._32 = loc.z;
	}
	,buildMatrix: function() {
		if(this.dloc == null) {
			var _this = this.local;
			var loc = this.loc;
			var quat = this.rot;
			var sc = this.scale;
			var x = quat.x;
			var y = quat.y;
			var z = quat.z;
			var w = quat.w;
			var x2 = x + x;
			var y2 = y + y;
			var z2 = z + z;
			var xx = x * x2;
			var xy = x * y2;
			var xz = x * z2;
			var yy = y * y2;
			var yz = y * z2;
			var zz = z * z2;
			var wx = w * x2;
			var wy = w * y2;
			var wz = w * z2;
			_this.self._00 = 1.0 - (yy + zz);
			_this.self._10 = xy - wz;
			_this.self._20 = xz + wy;
			_this.self._01 = xy + wz;
			_this.self._11 = 1.0 - (xx + zz);
			_this.self._21 = yz - wx;
			_this.self._02 = xz - wy;
			_this.self._12 = yz + wx;
			_this.self._22 = 1.0 - (xx + yy);
			_this.self._03 = 0.0;
			_this.self._13 = 0.0;
			_this.self._23 = 0.0;
			_this.self._30 = 0.0;
			_this.self._31 = 0.0;
			_this.self._32 = 0.0;
			_this.self._33 = 1.0;
			var x = sc.x;
			var y = sc.y;
			var z = sc.z;
			_this.self._00 *= x;
			_this.self._01 *= x;
			_this.self._02 *= x;
			_this.self._03 *= x;
			_this.self._10 *= y;
			_this.self._11 *= y;
			_this.self._12 *= y;
			_this.self._13 *= y;
			_this.self._20 *= z;
			_this.self._21 *= z;
			_this.self._22 *= z;
			_this.self._23 *= z;
			_this.self._30 = loc.x;
			_this.self._31 = loc.y;
			_this.self._32 = loc.z;
		} else {
			this.composeDelta();
		}
		if(this.boneParent != null) {
			var _this = this.local;
			var b = this.boneParent;
			var a = this.local;
			var a00 = a.self._00;
			var a01 = a.self._01;
			var a02 = a.self._02;
			var a03 = a.self._03;
			var a10 = a.self._10;
			var a11 = a.self._11;
			var a12 = a.self._12;
			var a13 = a.self._13;
			var a20 = a.self._20;
			var a21 = a.self._21;
			var a22 = a.self._22;
			var a23 = a.self._23;
			var a30 = a.self._30;
			var a31 = a.self._31;
			var a32 = a.self._32;
			var a33 = a.self._33;
			var b0 = b.self._00;
			var b1 = b.self._10;
			var b2 = b.self._20;
			var b3 = b.self._30;
			_this.self._00 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
			_this.self._10 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
			_this.self._20 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
			_this.self._30 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
			b0 = b.self._01;
			b1 = b.self._11;
			b2 = b.self._21;
			b3 = b.self._31;
			_this.self._01 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
			_this.self._11 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
			_this.self._21 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
			_this.self._31 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
			b0 = b.self._02;
			b1 = b.self._12;
			b2 = b.self._22;
			b3 = b.self._32;
			_this.self._02 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
			_this.self._12 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
			_this.self._22 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
			_this.self._32 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
			b0 = b.self._03;
			b1 = b.self._13;
			b2 = b.self._23;
			b3 = b.self._33;
			_this.self._03 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
			_this.self._13 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
			_this.self._23 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
			_this.self._33 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
		}
		if(this.object.parent != null && !this.localOnly) {
			var _this = this.world;
			var a = this.local;
			var b = this.object.parent.transform.world;
			var a00 = a.self._00;
			var a01 = a.self._01;
			var a02 = a.self._02;
			var a03 = a.self._03;
			var a10 = a.self._10;
			var a11 = a.self._11;
			var a12 = a.self._12;
			var a13 = a.self._13;
			var a20 = a.self._20;
			var a21 = a.self._21;
			var a22 = a.self._22;
			var a23 = a.self._23;
			var a30 = a.self._30;
			var a31 = a.self._31;
			var a32 = a.self._32;
			var a33 = a.self._33;
			var b0 = b.self._00;
			var b1 = b.self._10;
			var b2 = b.self._20;
			var b3 = b.self._30;
			_this.self._00 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
			_this.self._10 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
			_this.self._20 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
			_this.self._30 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
			b0 = b.self._01;
			b1 = b.self._11;
			b2 = b.self._21;
			b3 = b.self._31;
			_this.self._01 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
			_this.self._11 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
			_this.self._21 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
			_this.self._31 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
			b0 = b.self._02;
			b1 = b.self._12;
			b2 = b.self._22;
			b3 = b.self._32;
			_this.self._02 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
			_this.self._12 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
			_this.self._22 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
			_this.self._32 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
			_this.self._03 = 0;
			_this.self._13 = 0;
			_this.self._23 = 0;
			_this.self._33 = 1;
		} else {
			var _this = this.world;
			var m = this.local;
			_this.self._00 = m.self._00;
			_this.self._01 = m.self._01;
			_this.self._02 = m.self._02;
			_this.self._03 = m.self._03;
			_this.self._10 = m.self._10;
			_this.self._11 = m.self._11;
			_this.self._12 = m.self._12;
			_this.self._13 = m.self._13;
			_this.self._20 = m.self._20;
			_this.self._21 = m.self._21;
			_this.self._22 = m.self._22;
			_this.self._23 = m.self._23;
			_this.self._30 = m.self._30;
			_this.self._31 = m.self._31;
			_this.self._32 = m.self._32;
			_this.self._33 = m.self._33;
		}
		var _this = this.worldUnpack;
		var m = this.world;
		_this.self._00 = m.self._00;
		_this.self._01 = m.self._01;
		_this.self._02 = m.self._02;
		_this.self._03 = m.self._03;
		_this.self._10 = m.self._10;
		_this.self._11 = m.self._11;
		_this.self._12 = m.self._12;
		_this.self._13 = m.self._13;
		_this.self._20 = m.self._20;
		_this.self._21 = m.self._21;
		_this.self._22 = m.self._22;
		_this.self._23 = m.self._23;
		_this.self._30 = m.self._30;
		_this.self._31 = m.self._31;
		_this.self._32 = m.self._32;
		_this.self._33 = m.self._33;
		if(this.scaleWorld != 1.0) {
			this.worldUnpack.self._00 *= this.scaleWorld;
			this.worldUnpack.self._01 *= this.scaleWorld;
			this.worldUnpack.self._02 *= this.scaleWorld;
			this.worldUnpack.self._03 *= this.scaleWorld;
			this.worldUnpack.self._10 *= this.scaleWorld;
			this.worldUnpack.self._11 *= this.scaleWorld;
			this.worldUnpack.self._12 *= this.scaleWorld;
			this.worldUnpack.self._13 *= this.scaleWorld;
			this.worldUnpack.self._20 *= this.scaleWorld;
			this.worldUnpack.self._21 *= this.scaleWorld;
			this.worldUnpack.self._22 *= this.scaleWorld;
			this.worldUnpack.self._23 *= this.scaleWorld;
		}
		if(this.object.constraints != null) {
			var _g = 0;
			var _g1 = this.object.constraints;
			while(_g < _g1.length) _g1[_g++].apply(this);
		}
		this.computeDim();
		var _g = 0;
		var _g1 = this.object.children;
		while(_g < _g1.length) _g1[_g++].transform.buildMatrix();
		this.dirty = false;
	}
	,translate: function(x,y,z) {
		this.loc.x += x;
		this.loc.y += y;
		this.loc.z += z;
		this.buildMatrix();
	}
	,setMatrix: function(mat) {
		var _this = this.local;
		_this.self._00 = mat.self._00;
		_this.self._01 = mat.self._01;
		_this.self._02 = mat.self._02;
		_this.self._03 = mat.self._03;
		_this.self._10 = mat.self._10;
		_this.self._11 = mat.self._11;
		_this.self._12 = mat.self._12;
		_this.self._13 = mat.self._13;
		_this.self._20 = mat.self._20;
		_this.self._21 = mat.self._21;
		_this.self._22 = mat.self._22;
		_this.self._23 = mat.self._23;
		_this.self._30 = mat.self._30;
		_this.self._31 = mat.self._31;
		_this.self._32 = mat.self._32;
		_this.self._33 = mat.self._33;
		this.decompose();
		this.buildMatrix();
	}
	,decompose: function() {
		var _this = this.local;
		var loc = this.loc;
		var quat = this.rot;
		var scale = this.scale;
		loc.x = _this.self._30;
		loc.y = _this.self._31;
		loc.z = _this.self._32;
		var _this1 = iron_math_Mat4.helpVec;
		_this1.x = _this.self._00;
		_this1.y = _this.self._01;
		_this1.z = _this.self._02;
		_this1.w = 1.0;
		scale.x = Math.sqrt(_this1.x * _this1.x + _this1.y * _this1.y + _this1.z * _this1.z);
		var _this1 = iron_math_Mat4.helpVec;
		_this1.x = _this.self._10;
		_this1.y = _this.self._11;
		_this1.z = _this.self._12;
		_this1.w = 1.0;
		scale.y = Math.sqrt(_this1.x * _this1.x + _this1.y * _this1.y + _this1.z * _this1.z);
		var _this1 = iron_math_Mat4.helpVec;
		_this1.x = _this.self._20;
		_this1.y = _this.self._21;
		_this1.z = _this.self._22;
		_this1.w = 1.0;
		scale.z = Math.sqrt(_this1.x * _this1.x + _this1.y * _this1.y + _this1.z * _this1.z);
		var _this1 = _this.self;
		var m3 = _this1._12;
		var m4 = _this1._22;
		var m5 = _this1._32;
		var m6 = _this1._13;
		var m7 = _this1._23;
		var m8 = _this1._33;
		var m31 = _this1._12;
		var m41 = _this1._22;
		var m51 = _this1._32;
		var m61 = _this1._13;
		var m71 = _this1._23;
		var m81 = _this1._33;
		var m32 = _this1._11;
		var m42 = _this1._21;
		var m52 = _this1._31;
		var m62 = _this1._13;
		var m72 = _this1._23;
		var m82 = _this1._33;
		var m33 = _this1._11;
		var m43 = _this1._21;
		var m53 = _this1._31;
		var m63 = _this1._12;
		var m73 = _this1._22;
		var m83 = _this1._32;
		if(_this1._00 * (_this1._11 * (m4 * m8 - m5 * m7) - _this1._21 * (m3 * m8 - m5 * m6) + _this1._31 * (m3 * m7 - m4 * m6)) - _this1._01 * (_this1._10 * (m41 * m81 - m51 * m71) - _this1._20 * (m31 * m81 - m51 * m61) + _this1._30 * (m31 * m71 - m41 * m61)) + _this1._02 * (_this1._10 * (m42 * m82 - m52 * m72) - _this1._20 * (m32 * m82 - m52 * m62) + _this1._30 * (m32 * m72 - m42 * m62)) - _this1._03 * (_this1._10 * (m43 * m83 - m53 * m73) - _this1._20 * (m33 * m83 - m53 * m63) + _this1._30 * (m33 * m73 - m43 * m63)) < 0.0) {
			scale.x = -scale.x;
		}
		var invs = 1.0 / scale.x;
		iron_math_Mat4.helpMat.self._00 = _this.self._00 * invs;
		iron_math_Mat4.helpMat.self._01 = _this.self._01 * invs;
		iron_math_Mat4.helpMat.self._02 = _this.self._02 * invs;
		invs = 1.0 / scale.y;
		iron_math_Mat4.helpMat.self._10 = _this.self._10 * invs;
		iron_math_Mat4.helpMat.self._11 = _this.self._11 * invs;
		iron_math_Mat4.helpMat.self._12 = _this.self._12 * invs;
		invs = 1.0 / scale.z;
		iron_math_Mat4.helpMat.self._20 = _this.self._20 * invs;
		iron_math_Mat4.helpMat.self._21 = _this.self._21 * invs;
		iron_math_Mat4.helpMat.self._22 = _this.self._22 * invs;
		var m = iron_math_Mat4.helpMat;
		var m11 = m.self._00;
		var m12 = m.self._10;
		var m13 = m.self._20;
		var m21 = m.self._01;
		var m22 = m.self._11;
		var m23 = m.self._21;
		var m31 = m.self._02;
		var m32 = m.self._12;
		var m33 = m.self._22;
		var tr = m11 + m22 + m33;
		var s = 0.0;
		if(tr > 0) {
			s = 0.5 / Math.sqrt(tr + 1.0);
			quat.w = 0.25 / s;
			quat.x = (m32 - m23) * s;
			quat.y = (m13 - m31) * s;
			quat.z = (m21 - m12) * s;
		} else if(m11 > m22 && m11 > m33) {
			s = 2.0 * Math.sqrt(1.0 + m11 - m22 - m33);
			quat.w = (m32 - m23) / s;
			quat.x = 0.25 * s;
			quat.y = (m12 + m21) / s;
			quat.z = (m13 + m31) / s;
		} else if(m22 > m33) {
			s = 2.0 * Math.sqrt(1.0 + m22 - m11 - m33);
			quat.w = (m13 - m31) / s;
			quat.x = (m12 + m21) / s;
			quat.y = 0.25 * s;
			quat.z = (m23 + m32) / s;
		} else {
			s = 2.0 * Math.sqrt(1.0 + m33 - m11 - m22);
			quat.w = (m21 - m12) / s;
			quat.x = (m13 + m31) / s;
			quat.y = (m23 + m32) / s;
			quat.z = 0.25 * s;
		}
	}
	,rotate: function(axis,f) {
		var _this = iron_object_Transform.q;
		var s = Math.sin(f * 0.5);
		_this.x = axis.x * s;
		_this.y = axis.y * s;
		_this.z = axis.z * s;
		_this.w = Math.cos(f * 0.5);
		var l = Math.sqrt(_this.x * _this.x + _this.y * _this.y + _this.z * _this.z + _this.w * _this.w);
		if(l == 0.0) {
			_this.x = 0;
			_this.y = 0;
			_this.z = 0;
			_this.w = 0;
		} else {
			l = 1.0 / l;
			_this.x *= l;
			_this.y *= l;
			_this.z *= l;
			_this.w *= l;
		}
		var _this = this.rot;
		var q1 = iron_object_Transform.q;
		var q2 = this.rot;
		var q1x = q1.x;
		var q1y = q1.y;
		var q1z = q1.z;
		var q1w = q1.w;
		var q2x = q2.x;
		var q2y = q2.y;
		var q2z = q2.z;
		var q2w = q2.w;
		_this.x = q1x * q2w + q1w * q2x + q1y * q2z - q1z * q2y;
		_this.y = q1w * q2y - q1x * q2z + q1y * q2w + q1z * q2x;
		_this.z = q1w * q2z + q1x * q2y - q1y * q2x + q1z * q2w;
		_this.w = q1w * q2w - q1x * q2x - q1y * q2y - q1z * q2z;
		this.buildMatrix();
	}
	,move: function(axis,f) {
		if(f == null) {
			f = 1.0;
		}
		var _this = this.loc;
		_this.x += axis.x * f;
		_this.y += axis.y * f;
		_this.z += axis.z * f;
		this.buildMatrix();
	}
	,setRotation: function(x,y,z) {
		var _this = this.rot;
		var f = x / 2;
		var c1 = Math.cos(f);
		var s1 = Math.sin(f);
		f = y / 2;
		var c2 = Math.cos(f);
		var s2 = Math.sin(f);
		f = z / 2;
		var c3 = Math.cos(f);
		var s3 = Math.sin(f);
		_this.x = s1 * c2 * c3 + c1 * s2 * s3;
		_this.y = c1 * s2 * c3 + s1 * c2 * s3;
		_this.z = c1 * c2 * s3 - s1 * s2 * c3;
		_this.w = c1 * c2 * c3 - s1 * s2 * s3;
		this._eulerX = x;
		this._eulerY = y;
		this._eulerZ = z;
		this.dirty = true;
	}
	,computeRadius: function() {
		this.radius = Math.sqrt(this.dim.x * this.dim.x + this.dim.y * this.dim.y + this.dim.z * this.dim.z);
	}
	,computeDim: function() {
		if(this.object.raw == null) {
			this.computeRadius();
			return;
		}
		var d = this.object.raw.dimensions;
		if(d == null) {
			var _this = this.dim;
			_this.x = 2 * this.scale.x;
			_this.y = 2 * this.scale.y;
			_this.z = 2 * this.scale.z;
			_this.w = 1.0;
		} else {
			var _this = this.dim;
			var y = d[1] * this.scale.y;
			var z = d[2] * this.scale.z;
			_this.x = d[0] * this.scale.x;
			_this.y = y;
			_this.z = z;
			_this.w = 1.0;
		}
		this.computeRadius();
	}
	,applyParentInverse: function() {
		var pt = this.object.parent.transform;
		pt.buildMatrix();
		var _this = iron_object_Transform.temp;
		var m = pt.world;
		var a00 = m.self._00;
		var a01 = m.self._01;
		var a02 = m.self._02;
		var a03 = m.self._03;
		var a10 = m.self._10;
		var a11 = m.self._11;
		var a12 = m.self._12;
		var a13 = m.self._13;
		var a20 = m.self._20;
		var a21 = m.self._21;
		var a22 = m.self._22;
		var a23 = m.self._23;
		var a30 = m.self._30;
		var a31 = m.self._31;
		var a32 = m.self._32;
		var a33 = m.self._33;
		var b00 = a00 * a11 - a01 * a10;
		var b01 = a00 * a12 - a02 * a10;
		var b02 = a00 * a13 - a03 * a10;
		var b03 = a01 * a12 - a02 * a11;
		var b04 = a01 * a13 - a03 * a11;
		var b05 = a02 * a13 - a03 * a12;
		var b06 = a20 * a31 - a21 * a30;
		var b07 = a20 * a32 - a22 * a30;
		var b08 = a20 * a33 - a23 * a30;
		var b09 = a21 * a32 - a22 * a31;
		var b10 = a21 * a33 - a23 * a31;
		var b11 = a22 * a33 - a23 * a32;
		var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;
		if(det == 0.0) {
			_this.self._00 = 1.0;
			_this.self._01 = 0.0;
			_this.self._02 = 0.0;
			_this.self._03 = 0.0;
			_this.self._10 = 0.0;
			_this.self._11 = 1.0;
			_this.self._12 = 0.0;
			_this.self._13 = 0.0;
			_this.self._20 = 0.0;
			_this.self._21 = 0.0;
			_this.self._22 = 1.0;
			_this.self._23 = 0.0;
			_this.self._30 = 0.0;
			_this.self._31 = 0.0;
			_this.self._32 = 0.0;
			_this.self._33 = 1.0;
		} else {
			det = 1.0 / det;
			_this.self._00 = (a11 * b11 - a12 * b10 + a13 * b09) * det;
			_this.self._01 = (a02 * b10 - a01 * b11 - a03 * b09) * det;
			_this.self._02 = (a31 * b05 - a32 * b04 + a33 * b03) * det;
			_this.self._03 = (a22 * b04 - a21 * b05 - a23 * b03) * det;
			_this.self._10 = (a12 * b08 - a10 * b11 - a13 * b07) * det;
			_this.self._11 = (a00 * b11 - a02 * b08 + a03 * b07) * det;
			_this.self._12 = (a32 * b02 - a30 * b05 - a33 * b01) * det;
			_this.self._13 = (a20 * b05 - a22 * b02 + a23 * b01) * det;
			_this.self._20 = (a10 * b10 - a11 * b08 + a13 * b06) * det;
			_this.self._21 = (a01 * b08 - a00 * b10 - a03 * b06) * det;
			_this.self._22 = (a30 * b04 - a31 * b02 + a33 * b00) * det;
			_this.self._23 = (a21 * b02 - a20 * b04 - a23 * b00) * det;
			_this.self._30 = (a11 * b07 - a10 * b09 - a12 * b06) * det;
			_this.self._31 = (a00 * b09 - a01 * b07 + a02 * b06) * det;
			_this.self._32 = (a31 * b01 - a30 * b03 - a32 * b00) * det;
			_this.self._33 = (a20 * b03 - a21 * b01 + a22 * b00) * det;
		}
		var _this = this.local;
		var m = iron_object_Transform.temp;
		var a00 = _this.self._00;
		var a01 = _this.self._01;
		var a02 = _this.self._02;
		var a03 = _this.self._03;
		var a10 = _this.self._10;
		var a11 = _this.self._11;
		var a12 = _this.self._12;
		var a13 = _this.self._13;
		var a20 = _this.self._20;
		var a21 = _this.self._21;
		var a22 = _this.self._22;
		var a23 = _this.self._23;
		var a30 = _this.self._30;
		var a31 = _this.self._31;
		var a32 = _this.self._32;
		var a33 = _this.self._33;
		var b0 = m.self._00;
		var b1 = m.self._10;
		var b2 = m.self._20;
		var b3 = m.self._30;
		_this.self._00 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
		_this.self._10 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
		_this.self._20 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
		_this.self._30 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
		b0 = m.self._01;
		b1 = m.self._11;
		b2 = m.self._21;
		b3 = m.self._31;
		_this.self._01 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
		_this.self._11 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
		_this.self._21 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
		_this.self._31 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
		b0 = m.self._02;
		b1 = m.self._12;
		b2 = m.self._22;
		b3 = m.self._32;
		_this.self._02 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
		_this.self._12 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
		_this.self._22 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
		_this.self._32 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
		b0 = m.self._03;
		b1 = m.self._13;
		b2 = m.self._23;
		b3 = m.self._33;
		_this.self._03 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
		_this.self._13 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
		_this.self._23 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
		_this.self._33 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
		this.decompose();
		this.buildMatrix();
	}
	,__class__: iron_object_Transform
};
var kha_math_FastMatrix3 = function(_00,_10,_20,_01,_11,_21,_02,_12,_22) {
	this._00 = _00;
	this._10 = _10;
	this._20 = _20;
	this._01 = _01;
	this._11 = _11;
	this._21 = _21;
	this._02 = _02;
	this._12 = _12;
	this._22 = _22;
};
$hxClasses["kha.math.FastMatrix3"] = kha_math_FastMatrix3;
kha_math_FastMatrix3.__name__ = "kha.math.FastMatrix3";
kha_math_FastMatrix3.prototype = {
	__class__: kha_math_FastMatrix3
};
var iron_object_Uniforms = function() { };
$hxClasses["iron.object.Uniforms"] = iron_object_Uniforms;
iron_object_Uniforms.__name__ = "iron.object.Uniforms";
iron_object_Uniforms.setContextConstants = function(g,context,bindParams) {
	if(context.raw.constants != null) {
		var _g = 0;
		var _g1 = context.raw.constants.length;
		while(_g < _g1) {
			var i = _g++;
			iron_object_Uniforms.setContextConstant(g,context.constants[i],context.raw.constants[i]);
		}
	}
	if(bindParams != null) {
		var _g = 0;
		var _g1 = bindParams.length / 2 | 0;
		while(_g < _g1) {
			var pos = _g++ * 2;
			var rtID = bindParams[pos];
			var attachDepth = false;
			if(rtID.charAt(0) == "_") {
				attachDepth = true;
				rtID = HxOverrides.substr(rtID,1,null);
			}
			iron_object_Uniforms.bindRenderTarget(g,attachDepth ? iron_RenderPath.active.depthToRenderTarget.h[rtID] : iron_RenderPath.active.renderTargets.h[rtID],context,bindParams[pos + 1],attachDepth);
		}
	}
	if(context.raw.texture_units != null) {
		var _g = 0;
		var _g1 = context.raw.texture_units.length;
		while(_g < _g1) {
			var j = _g++;
			var tulink = context.raw.texture_units[j].link;
			if(tulink == null) {
				continue;
			}
			if(tulink.charAt(0) == "$") {
				g.setTexture(context.textureUnits[j],iron_Scene.active.embedded.h[HxOverrides.substr(tulink,1,null)]);
				if(StringTools.endsWith(tulink,".raw")) {
					g.setTexture3DParameters(context.textureUnits[j],0,0,0,1,1,0);
				} else {
					g.setTextureParameters(context.textureUnits[j],0,0,1,1,0);
				}
			} else {
				switch(tulink) {
				case "_envmap":
					var w = iron_Scene.active.world;
					if(w != null) {
						g.setTexture(context.textureUnits[j],w.envmap);
						g.setTextureParameters(context.textureUnits[j],0,0,1,1,0);
					}
					break;
				case "_envmapRadiance":
					var w1 = iron_Scene.active.world;
					if(w1 != null) {
						g.setTexture(context.textureUnits[j],w1.probe.radiance);
						g.setTextureParameters(context.textureUnits[j],0,0,1,1,2);
					}
					break;
				}
			}
		}
	}
};
iron_object_Uniforms.setObjectConstants = function(g,context,object) {
	if(context.raw.constants != null) {
		var _g = 0;
		var _g1 = context.raw.constants.length;
		while(_g < _g1) {
			var i = _g++;
			iron_object_Uniforms.setObjectConstant(g,object,context.constants[i],context.raw.constants[i]);
		}
	}
	if(iron_object_Uniforms.externalTextureLinks != null) {
		if(context.raw.texture_units != null) {
			var _g = 0;
			var _g1 = context.raw.texture_units.length;
			while(_g < _g1) {
				var j = _g++;
				var tulink = context.raw.texture_units[j].link;
				if(tulink == null) {
					continue;
				}
				var _g2 = 0;
				var _g3 = iron_object_Uniforms.externalTextureLinks;
				while(_g2 < _g3.length) {
					var image = _g3[_g2++](object,iron_object_Uniforms.currentMat(object),tulink);
					if(image != null) {
						if(StringTools.endsWith(tulink,"_depth")) {
							g.setTextureDepth(context.textureUnits[j],image);
						} else {
							g.setTexture(context.textureUnits[j],image);
						}
						g.setTextureParameters(context.textureUnits[j],0,0,1,1,0);
						break;
					}
				}
			}
		}
	}
};
iron_object_Uniforms.bindRenderTarget = function(g,rt,context,samplerID,attachDepth) {
	if(rt != null) {
		var tus = context.raw.texture_units;
		var _g = 0;
		var _g1 = tus.length;
		while(_g < _g1) {
			var j = _g++;
			if(samplerID == tus[j].name) {
				var isImage = tus[j].is_image != null && tus[j].is_image;
				var paramsSet = false;
				if(rt.raw.depth > 1) {
					g.setTexture3DParameters(context.textureUnits[j],2,2,2,1,2,2);
					paramsSet = true;
				}
				if(isImage) {
					g.setImageTexture(context.textureUnits[j],rt.image);
					g.setTexture3DParameters(context.textureUnits[j],2,2,2,1,0,2);
					paramsSet = true;
				} else if(rt.isCubeMap) {
					if(attachDepth) {
						g.setCubeMapDepth(context.textureUnits[j],rt.cubeMap);
					} else {
						g.setCubeMap(context.textureUnits[j],rt.cubeMap);
					}
				} else if(attachDepth) {
					g.setTextureDepth(context.textureUnits[j],rt.image);
				} else {
					g.setTexture(context.textureUnits[j],rt.image);
				}
				if(!paramsSet && rt.raw.mipmaps != null && rt.raw.mipmaps == true && !isImage) {
					g.setTextureParameters(context.textureUnits[j],2,2,1,1,2);
					paramsSet = true;
				}
				if(!paramsSet) {
					if(StringTools.startsWith(samplerID,"shadowMap")) {
						if(rt.isCubeMap) {
							g.setCubeMapCompareMode(context.textureUnits[j],true);
						} else {
							g.setTextureParameters(context.textureUnits[j],2,2,1,1,0);
							g.setTextureCompareMode(context.textureUnits[j],true);
						}
						paramsSet = true;
					} else if(attachDepth) {
						g.setTextureParameters(context.textureUnits[j],2,2,0,0,0);
						paramsSet = true;
					}
				}
				if(!paramsSet) {
					var oc = context.overrideContext;
					if(oc == null || oc.shared_sampler == null || oc.shared_sampler == samplerID) {
						var addressing = oc != null && oc.addressing == "repeat" ? 0 : 2;
						var filter = oc != null && oc.filter == "point" ? 0 : iron_object_Uniforms.defaultFilter;
						g.setTextureParameters(context.textureUnits[j],addressing,addressing,filter,filter,0);
					}
					paramsSet = true;
				}
			}
		}
	}
};
iron_object_Uniforms.setContextConstant = function(g,location,c) {
	if(c.link == null) {
		return true;
	}
	var camera = iron_Scene.active.camera;
	var light = iron_RenderPath.active.light;
	if(c.type == "mat4") {
		var m = null;
		switch(c.link) {
		case "_biasLightViewProjectionMatrix":
			if(light != null) {
				var _this = iron_object_Uniforms.helpMat;
				var m1 = light.VP;
				_this.self._00 = m1.self._00;
				_this.self._01 = m1.self._01;
				_this.self._02 = m1.self._02;
				_this.self._03 = m1.self._03;
				_this.self._10 = m1.self._10;
				_this.self._11 = m1.self._11;
				_this.self._12 = m1.self._12;
				_this.self._13 = m1.self._13;
				_this.self._20 = m1.self._20;
				_this.self._21 = m1.self._21;
				_this.self._22 = m1.self._22;
				_this.self._23 = m1.self._23;
				_this.self._30 = m1.self._30;
				_this.self._31 = m1.self._31;
				_this.self._32 = m1.self._32;
				_this.self._33 = m1.self._33;
				var _this = iron_object_Uniforms.helpMat;
				var m1 = iron_object_Uniforms.biasMat;
				var a00 = _this.self._00;
				var a01 = _this.self._01;
				var a02 = _this.self._02;
				var a03 = _this.self._03;
				var a10 = _this.self._10;
				var a11 = _this.self._11;
				var a12 = _this.self._12;
				var a13 = _this.self._13;
				var a20 = _this.self._20;
				var a21 = _this.self._21;
				var a22 = _this.self._22;
				var a23 = _this.self._23;
				var a30 = _this.self._30;
				var a31 = _this.self._31;
				var a32 = _this.self._32;
				var a33 = _this.self._33;
				var b0 = m1.self._00;
				var b1 = m1.self._10;
				var b2 = m1.self._20;
				var b3 = m1.self._30;
				_this.self._00 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
				_this.self._10 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
				_this.self._20 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
				_this.self._30 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
				b0 = m1.self._01;
				b1 = m1.self._11;
				b2 = m1.self._21;
				b3 = m1.self._31;
				_this.self._01 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
				_this.self._11 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
				_this.self._21 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
				_this.self._31 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
				b0 = m1.self._02;
				b1 = m1.self._12;
				b2 = m1.self._22;
				b3 = m1.self._32;
				_this.self._02 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
				_this.self._12 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
				_this.self._22 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
				_this.self._32 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
				b0 = m1.self._03;
				b1 = m1.self._13;
				b2 = m1.self._23;
				b3 = m1.self._33;
				_this.self._03 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
				_this.self._13 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
				_this.self._23 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
				_this.self._33 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
				m = iron_object_Uniforms.helpMat;
			}
			break;
		case "_inverseProjectionMatrix":
			var _this = iron_object_Uniforms.helpMat;
			var m1 = camera.P;
			var a00 = m1.self._00;
			var a01 = m1.self._01;
			var a02 = m1.self._02;
			var a03 = m1.self._03;
			var a10 = m1.self._10;
			var a11 = m1.self._11;
			var a12 = m1.self._12;
			var a13 = m1.self._13;
			var a20 = m1.self._20;
			var a21 = m1.self._21;
			var a22 = m1.self._22;
			var a23 = m1.self._23;
			var a30 = m1.self._30;
			var a31 = m1.self._31;
			var a32 = m1.self._32;
			var a33 = m1.self._33;
			var b00 = a00 * a11 - a01 * a10;
			var b01 = a00 * a12 - a02 * a10;
			var b02 = a00 * a13 - a03 * a10;
			var b03 = a01 * a12 - a02 * a11;
			var b04 = a01 * a13 - a03 * a11;
			var b05 = a02 * a13 - a03 * a12;
			var b06 = a20 * a31 - a21 * a30;
			var b07 = a20 * a32 - a22 * a30;
			var b08 = a20 * a33 - a23 * a30;
			var b09 = a21 * a32 - a22 * a31;
			var b10 = a21 * a33 - a23 * a31;
			var b11 = a22 * a33 - a23 * a32;
			var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;
			if(det == 0.0) {
				_this.self._00 = 1.0;
				_this.self._01 = 0.0;
				_this.self._02 = 0.0;
				_this.self._03 = 0.0;
				_this.self._10 = 0.0;
				_this.self._11 = 1.0;
				_this.self._12 = 0.0;
				_this.self._13 = 0.0;
				_this.self._20 = 0.0;
				_this.self._21 = 0.0;
				_this.self._22 = 1.0;
				_this.self._23 = 0.0;
				_this.self._30 = 0.0;
				_this.self._31 = 0.0;
				_this.self._32 = 0.0;
				_this.self._33 = 1.0;
			} else {
				det = 1.0 / det;
				_this.self._00 = (a11 * b11 - a12 * b10 + a13 * b09) * det;
				_this.self._01 = (a02 * b10 - a01 * b11 - a03 * b09) * det;
				_this.self._02 = (a31 * b05 - a32 * b04 + a33 * b03) * det;
				_this.self._03 = (a22 * b04 - a21 * b05 - a23 * b03) * det;
				_this.self._10 = (a12 * b08 - a10 * b11 - a13 * b07) * det;
				_this.self._11 = (a00 * b11 - a02 * b08 + a03 * b07) * det;
				_this.self._12 = (a32 * b02 - a30 * b05 - a33 * b01) * det;
				_this.self._13 = (a20 * b05 - a22 * b02 + a23 * b01) * det;
				_this.self._20 = (a10 * b10 - a11 * b08 + a13 * b06) * det;
				_this.self._21 = (a01 * b08 - a00 * b10 - a03 * b06) * det;
				_this.self._22 = (a30 * b04 - a31 * b02 + a33 * b00) * det;
				_this.self._23 = (a21 * b02 - a20 * b04 - a23 * b00) * det;
				_this.self._30 = (a11 * b07 - a10 * b09 - a12 * b06) * det;
				_this.self._31 = (a00 * b09 - a01 * b07 + a02 * b06) * det;
				_this.self._32 = (a31 * b01 - a30 * b03 - a32 * b00) * det;
				_this.self._33 = (a20 * b03 - a21 * b01 + a22 * b00) * det;
			}
			m = iron_object_Uniforms.helpMat;
			break;
		case "_inverseViewProjectionMatrix":
			var _this = iron_object_Uniforms.helpMat;
			var m1 = camera.V;
			_this.self._00 = m1.self._00;
			_this.self._01 = m1.self._01;
			_this.self._02 = m1.self._02;
			_this.self._03 = m1.self._03;
			_this.self._10 = m1.self._10;
			_this.self._11 = m1.self._11;
			_this.self._12 = m1.self._12;
			_this.self._13 = m1.self._13;
			_this.self._20 = m1.self._20;
			_this.self._21 = m1.self._21;
			_this.self._22 = m1.self._22;
			_this.self._23 = m1.self._23;
			_this.self._30 = m1.self._30;
			_this.self._31 = m1.self._31;
			_this.self._32 = m1.self._32;
			_this.self._33 = m1.self._33;
			var _this = iron_object_Uniforms.helpMat;
			var m1 = camera.P;
			var a00 = _this.self._00;
			var a01 = _this.self._01;
			var a02 = _this.self._02;
			var a03 = _this.self._03;
			var a10 = _this.self._10;
			var a11 = _this.self._11;
			var a12 = _this.self._12;
			var a13 = _this.self._13;
			var a20 = _this.self._20;
			var a21 = _this.self._21;
			var a22 = _this.self._22;
			var a23 = _this.self._23;
			var a30 = _this.self._30;
			var a31 = _this.self._31;
			var a32 = _this.self._32;
			var a33 = _this.self._33;
			var b0 = m1.self._00;
			var b1 = m1.self._10;
			var b2 = m1.self._20;
			var b3 = m1.self._30;
			_this.self._00 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
			_this.self._10 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
			_this.self._20 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
			_this.self._30 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
			b0 = m1.self._01;
			b1 = m1.self._11;
			b2 = m1.self._21;
			b3 = m1.self._31;
			_this.self._01 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
			_this.self._11 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
			_this.self._21 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
			_this.self._31 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
			b0 = m1.self._02;
			b1 = m1.self._12;
			b2 = m1.self._22;
			b3 = m1.self._32;
			_this.self._02 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
			_this.self._12 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
			_this.self._22 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
			_this.self._32 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
			b0 = m1.self._03;
			b1 = m1.self._13;
			b2 = m1.self._23;
			b3 = m1.self._33;
			_this.self._03 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
			_this.self._13 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
			_this.self._23 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
			_this.self._33 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
			var _this = iron_object_Uniforms.helpMat;
			var m1 = iron_object_Uniforms.helpMat;
			var a00 = m1.self._00;
			var a01 = m1.self._01;
			var a02 = m1.self._02;
			var a03 = m1.self._03;
			var a10 = m1.self._10;
			var a11 = m1.self._11;
			var a12 = m1.self._12;
			var a13 = m1.self._13;
			var a20 = m1.self._20;
			var a21 = m1.self._21;
			var a22 = m1.self._22;
			var a23 = m1.self._23;
			var a30 = m1.self._30;
			var a31 = m1.self._31;
			var a32 = m1.self._32;
			var a33 = m1.self._33;
			var b00 = a00 * a11 - a01 * a10;
			var b01 = a00 * a12 - a02 * a10;
			var b02 = a00 * a13 - a03 * a10;
			var b03 = a01 * a12 - a02 * a11;
			var b04 = a01 * a13 - a03 * a11;
			var b05 = a02 * a13 - a03 * a12;
			var b06 = a20 * a31 - a21 * a30;
			var b07 = a20 * a32 - a22 * a30;
			var b08 = a20 * a33 - a23 * a30;
			var b09 = a21 * a32 - a22 * a31;
			var b10 = a21 * a33 - a23 * a31;
			var b11 = a22 * a33 - a23 * a32;
			var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;
			if(det == 0.0) {
				_this.self._00 = 1.0;
				_this.self._01 = 0.0;
				_this.self._02 = 0.0;
				_this.self._03 = 0.0;
				_this.self._10 = 0.0;
				_this.self._11 = 1.0;
				_this.self._12 = 0.0;
				_this.self._13 = 0.0;
				_this.self._20 = 0.0;
				_this.self._21 = 0.0;
				_this.self._22 = 1.0;
				_this.self._23 = 0.0;
				_this.self._30 = 0.0;
				_this.self._31 = 0.0;
				_this.self._32 = 0.0;
				_this.self._33 = 1.0;
			} else {
				det = 1.0 / det;
				_this.self._00 = (a11 * b11 - a12 * b10 + a13 * b09) * det;
				_this.self._01 = (a02 * b10 - a01 * b11 - a03 * b09) * det;
				_this.self._02 = (a31 * b05 - a32 * b04 + a33 * b03) * det;
				_this.self._03 = (a22 * b04 - a21 * b05 - a23 * b03) * det;
				_this.self._10 = (a12 * b08 - a10 * b11 - a13 * b07) * det;
				_this.self._11 = (a00 * b11 - a02 * b08 + a03 * b07) * det;
				_this.self._12 = (a32 * b02 - a30 * b05 - a33 * b01) * det;
				_this.self._13 = (a20 * b05 - a22 * b02 + a23 * b01) * det;
				_this.self._20 = (a10 * b10 - a11 * b08 + a13 * b06) * det;
				_this.self._21 = (a01 * b08 - a00 * b10 - a03 * b06) * det;
				_this.self._22 = (a30 * b04 - a31 * b02 + a33 * b00) * det;
				_this.self._23 = (a21 * b02 - a20 * b04 - a23 * b00) * det;
				_this.self._30 = (a11 * b07 - a10 * b09 - a12 * b06) * det;
				_this.self._31 = (a00 * b09 - a01 * b07 + a02 * b06) * det;
				_this.self._32 = (a31 * b01 - a30 * b03 - a32 * b00) * det;
				_this.self._33 = (a20 * b03 - a21 * b01 + a22 * b00) * det;
			}
			m = iron_object_Uniforms.helpMat;
			break;
		case "_lightViewProjectionMatrix":
			if(light != null) {
				m = light.VP;
			}
			break;
		case "_prevViewProjectionMatrix":
			var _this = iron_object_Uniforms.helpMat;
			var m1 = camera.prevV;
			_this.self._00 = m1.self._00;
			_this.self._01 = m1.self._01;
			_this.self._02 = m1.self._02;
			_this.self._03 = m1.self._03;
			_this.self._10 = m1.self._10;
			_this.self._11 = m1.self._11;
			_this.self._12 = m1.self._12;
			_this.self._13 = m1.self._13;
			_this.self._20 = m1.self._20;
			_this.self._21 = m1.self._21;
			_this.self._22 = m1.self._22;
			_this.self._23 = m1.self._23;
			_this.self._30 = m1.self._30;
			_this.self._31 = m1.self._31;
			_this.self._32 = m1.self._32;
			_this.self._33 = m1.self._33;
			var _this = iron_object_Uniforms.helpMat;
			var m1 = camera.P;
			var a00 = _this.self._00;
			var a01 = _this.self._01;
			var a02 = _this.self._02;
			var a03 = _this.self._03;
			var a10 = _this.self._10;
			var a11 = _this.self._11;
			var a12 = _this.self._12;
			var a13 = _this.self._13;
			var a20 = _this.self._20;
			var a21 = _this.self._21;
			var a22 = _this.self._22;
			var a23 = _this.self._23;
			var a30 = _this.self._30;
			var a31 = _this.self._31;
			var a32 = _this.self._32;
			var a33 = _this.self._33;
			var b0 = m1.self._00;
			var b1 = m1.self._10;
			var b2 = m1.self._20;
			var b3 = m1.self._30;
			_this.self._00 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
			_this.self._10 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
			_this.self._20 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
			_this.self._30 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
			b0 = m1.self._01;
			b1 = m1.self._11;
			b2 = m1.self._21;
			b3 = m1.self._31;
			_this.self._01 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
			_this.self._11 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
			_this.self._21 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
			_this.self._31 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
			b0 = m1.self._02;
			b1 = m1.self._12;
			b2 = m1.self._22;
			b3 = m1.self._32;
			_this.self._02 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
			_this.self._12 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
			_this.self._22 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
			_this.self._32 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
			b0 = m1.self._03;
			b1 = m1.self._13;
			b2 = m1.self._23;
			b3 = m1.self._33;
			_this.self._03 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
			_this.self._13 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
			_this.self._23 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
			_this.self._33 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
			m = iron_object_Uniforms.helpMat;
			break;
		case "_projectionMatrix":
			m = camera.P;
			break;
		case "_skydomeMatrix":
			var tr = camera.transform;
			var _this = iron_object_Uniforms.helpVec;
			_this.x = tr.world.self._30;
			_this.y = tr.world.self._31;
			_this.z = tr.world.self._32 - 3.5;
			_this.w = 1.0;
			var bounds = camera.data.raw.far_plane * 0.95;
			var _this = iron_object_Uniforms.helpVec2;
			_this.x = bounds;
			_this.y = bounds;
			_this.z = bounds;
			_this.w = 1.0;
			var _this = iron_object_Uniforms.helpMat;
			var loc = iron_object_Uniforms.helpVec;
			var quat = iron_object_Uniforms.helpQuat;
			var sc = iron_object_Uniforms.helpVec2;
			var x = quat.x;
			var y = quat.y;
			var z = quat.z;
			var w = quat.w;
			var x2 = x + x;
			var y2 = y + y;
			var z2 = z + z;
			var xx = x * x2;
			var xy = x * y2;
			var xz = x * z2;
			var yy = y * y2;
			var yz = y * z2;
			var zz = z * z2;
			var wx = w * x2;
			var wy = w * y2;
			var wz = w * z2;
			_this.self._00 = 1.0 - (yy + zz);
			_this.self._10 = xy - wz;
			_this.self._20 = xz + wy;
			_this.self._01 = xy + wz;
			_this.self._11 = 1.0 - (xx + zz);
			_this.self._21 = yz - wx;
			_this.self._02 = xz - wy;
			_this.self._12 = yz + wx;
			_this.self._22 = 1.0 - (xx + yy);
			_this.self._03 = 0.0;
			_this.self._13 = 0.0;
			_this.self._23 = 0.0;
			_this.self._30 = 0.0;
			_this.self._31 = 0.0;
			_this.self._32 = 0.0;
			_this.self._33 = 1.0;
			var x = sc.x;
			var y = sc.y;
			var z = sc.z;
			_this.self._00 *= x;
			_this.self._01 *= x;
			_this.self._02 *= x;
			_this.self._03 *= x;
			_this.self._10 *= y;
			_this.self._11 *= y;
			_this.self._12 *= y;
			_this.self._13 *= y;
			_this.self._20 *= z;
			_this.self._21 *= z;
			_this.self._22 *= z;
			_this.self._23 *= z;
			_this.self._30 = loc.x;
			_this.self._31 = loc.y;
			_this.self._32 = loc.z;
			var _this = iron_object_Uniforms.helpMat;
			var m1 = camera.V;
			var a00 = _this.self._00;
			var a01 = _this.self._01;
			var a02 = _this.self._02;
			var a03 = _this.self._03;
			var a10 = _this.self._10;
			var a11 = _this.self._11;
			var a12 = _this.self._12;
			var a13 = _this.self._13;
			var a20 = _this.self._20;
			var a21 = _this.self._21;
			var a22 = _this.self._22;
			var a23 = _this.self._23;
			var a30 = _this.self._30;
			var a31 = _this.self._31;
			var a32 = _this.self._32;
			var a33 = _this.self._33;
			var b0 = m1.self._00;
			var b1 = m1.self._10;
			var b2 = m1.self._20;
			var b3 = m1.self._30;
			_this.self._00 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
			_this.self._10 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
			_this.self._20 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
			_this.self._30 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
			b0 = m1.self._01;
			b1 = m1.self._11;
			b2 = m1.self._21;
			b3 = m1.self._31;
			_this.self._01 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
			_this.self._11 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
			_this.self._21 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
			_this.self._31 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
			b0 = m1.self._02;
			b1 = m1.self._12;
			b2 = m1.self._22;
			b3 = m1.self._32;
			_this.self._02 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
			_this.self._12 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
			_this.self._22 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
			_this.self._32 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
			b0 = m1.self._03;
			b1 = m1.self._13;
			b2 = m1.self._23;
			b3 = m1.self._33;
			_this.self._03 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
			_this.self._13 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
			_this.self._23 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
			_this.self._33 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
			var _this = iron_object_Uniforms.helpMat;
			var m1 = camera.P;
			var a00 = _this.self._00;
			var a01 = _this.self._01;
			var a02 = _this.self._02;
			var a03 = _this.self._03;
			var a10 = _this.self._10;
			var a11 = _this.self._11;
			var a12 = _this.self._12;
			var a13 = _this.self._13;
			var a20 = _this.self._20;
			var a21 = _this.self._21;
			var a22 = _this.self._22;
			var a23 = _this.self._23;
			var a30 = _this.self._30;
			var a31 = _this.self._31;
			var a32 = _this.self._32;
			var a33 = _this.self._33;
			var b0 = m1.self._00;
			var b1 = m1.self._10;
			var b2 = m1.self._20;
			var b3 = m1.self._30;
			_this.self._00 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
			_this.self._10 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
			_this.self._20 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
			_this.self._30 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
			b0 = m1.self._01;
			b1 = m1.self._11;
			b2 = m1.self._21;
			b3 = m1.self._31;
			_this.self._01 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
			_this.self._11 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
			_this.self._21 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
			_this.self._31 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
			b0 = m1.self._02;
			b1 = m1.self._12;
			b2 = m1.self._22;
			b3 = m1.self._32;
			_this.self._02 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
			_this.self._12 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
			_this.self._22 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
			_this.self._32 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
			b0 = m1.self._03;
			b1 = m1.self._13;
			b2 = m1.self._23;
			b3 = m1.self._33;
			_this.self._03 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
			_this.self._13 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
			_this.self._23 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
			_this.self._33 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
			m = iron_object_Uniforms.helpMat;
			break;
		case "_transposeViewMatrix":
			var _this = iron_object_Uniforms.helpMat;
			var m1 = camera.V;
			_this.self._00 = m1.self._00;
			_this.self._01 = m1.self._01;
			_this.self._02 = m1.self._02;
			_this.self._03 = m1.self._03;
			_this.self._10 = m1.self._10;
			_this.self._11 = m1.self._11;
			_this.self._12 = m1.self._12;
			_this.self._13 = m1.self._13;
			_this.self._20 = m1.self._20;
			_this.self._21 = m1.self._21;
			_this.self._22 = m1.self._22;
			_this.self._23 = m1.self._23;
			_this.self._30 = m1.self._30;
			_this.self._31 = m1.self._31;
			_this.self._32 = m1.self._32;
			_this.self._33 = m1.self._33;
			var _this = iron_object_Uniforms.helpMat;
			var f = _this.self._01;
			_this.self._01 = _this.self._10;
			_this.self._10 = f;
			f = _this.self._02;
			_this.self._02 = _this.self._20;
			_this.self._20 = f;
			f = _this.self._12;
			_this.self._12 = _this.self._21;
			_this.self._21 = f;
			m = iron_object_Uniforms.helpMat;
			break;
		case "_viewMatrix":
			m = camera.V;
			break;
		case "_viewProjectionMatrix":
			m = camera.VP;
			break;
		}
		if(m != null) {
			var matrix = m.self;
			kha_graphics4_Graphics.mat[0] = matrix._00;
			kha_graphics4_Graphics.mat[1] = matrix._01;
			kha_graphics4_Graphics.mat[2] = matrix._02;
			kha_graphics4_Graphics.mat[3] = matrix._03;
			kha_graphics4_Graphics.mat[4] = matrix._10;
			kha_graphics4_Graphics.mat[5] = matrix._11;
			kha_graphics4_Graphics.mat[6] = matrix._12;
			kha_graphics4_Graphics.mat[7] = matrix._13;
			kha_graphics4_Graphics.mat[8] = matrix._20;
			kha_graphics4_Graphics.mat[9] = matrix._21;
			kha_graphics4_Graphics.mat[10] = matrix._22;
			kha_graphics4_Graphics.mat[11] = matrix._23;
			kha_graphics4_Graphics.mat[12] = matrix._30;
			kha_graphics4_Graphics.mat[13] = matrix._31;
			kha_graphics4_Graphics.mat[14] = matrix._32;
			kha_graphics4_Graphics.mat[15] = matrix._33;
			Krom.setMatrix(location,kha_graphics4_Graphics.mat.buffer);
			return true;
		}
	} else if(c.type == "vec4") {
		var _this = iron_object_Uniforms.helpVec;
		_this.x = 0;
		_this.y = 0;
		_this.z = 0;
		_this.w = 1.0;
	} else if(c.type == "vec3") {
		var v = null;
		var _this = iron_object_Uniforms.helpVec;
		_this.x = 0;
		_this.y = 0;
		_this.z = 0;
		_this.w = 1.0;
		switch(c.link) {
		case "_backgroundCol":
			if(camera.data.raw.clear_color != null) {
				var _this = iron_object_Uniforms.helpVec;
				var y = camera.data.raw.clear_color[1];
				var z = camera.data.raw.clear_color[2];
				_this.x = camera.data.raw.clear_color[0];
				_this.y = y;
				_this.z = z;
				_this.w = 1.0;
			}
			v = iron_object_Uniforms.helpVec;
			break;
		case "_cameraLook":
			var _this = new iron_math_Vec4(-camera.transform.world.self._20,-camera.transform.world.self._21,-camera.transform.world.self._22);
			var n = Math.sqrt(_this.x * _this.x + _this.y * _this.y + _this.z * _this.z);
			if(n > 0.0) {
				var invN = 1.0 / n;
				_this.x *= invN;
				_this.y *= invN;
				_this.z *= invN;
			}
			iron_object_Uniforms.helpVec = _this;
			v = iron_object_Uniforms.helpVec;
			break;
		case "_cameraPosition":
			var _this = iron_object_Uniforms.helpVec;
			_this.x = camera.transform.world.self._30;
			_this.y = camera.transform.world.self._31;
			_this.z = camera.transform.world.self._32;
			_this.w = 1.0;
			v = iron_object_Uniforms.helpVec;
			break;
		case "_cameraRight":
			var _this = new iron_math_Vec4(camera.transform.world.self._00,camera.transform.world.self._01,camera.transform.world.self._02);
			var n = Math.sqrt(_this.x * _this.x + _this.y * _this.y + _this.z * _this.z);
			if(n > 0.0) {
				var invN = 1.0 / n;
				_this.x *= invN;
				_this.y *= invN;
				_this.z *= invN;
			}
			iron_object_Uniforms.helpVec = _this;
			v = iron_object_Uniforms.helpVec;
			break;
		case "_cameraUp":
			var _this = new iron_math_Vec4(camera.transform.world.self._10,camera.transform.world.self._11,camera.transform.world.self._12);
			var n = Math.sqrt(_this.x * _this.x + _this.y * _this.y + _this.z * _this.z);
			if(n > 0.0) {
				var invN = 1.0 / n;
				_this.x *= invN;
				_this.y *= invN;
				_this.z *= invN;
			}
			iron_object_Uniforms.helpVec = _this;
			v = iron_object_Uniforms.helpVec;
			break;
		case "_hosekSunDirection":
			var w = iron_Scene.active.world;
			if(w != null) {
				var _this = iron_object_Uniforms.helpVec;
				var y = w.raw.sun_direction[1];
				var z = w.raw.sun_direction[2] > 0 ? w.raw.sun_direction[2] : 0;
				_this.x = w.raw.sun_direction[0];
				_this.y = y;
				_this.z = z;
				_this.w = 1.0;
				v = iron_object_Uniforms.helpVec;
			}
			break;
		case "_lightArea0":
			if(light != null && light.data.raw.size != null) {
				var _this = iron_object_Uniforms.helpVec;
				_this.x = -(light.data.raw.size * 0.5);
				_this.y = light.data.raw.size_y * 0.5;
				_this.z = 0.0;
				_this.w = 1.0;
				var _this = iron_object_Uniforms.helpVec;
				var m = light.transform.world;
				var x = _this.x;
				var y = _this.y;
				var z = _this.z;
				_this.x = m.self._00 * x + m.self._10 * y + m.self._20 * z + m.self._30;
				_this.y = m.self._01 * x + m.self._11 * y + m.self._21 * z + m.self._31;
				_this.z = m.self._02 * x + m.self._12 * y + m.self._22 * z + m.self._32;
				v = iron_object_Uniforms.helpVec;
			}
			break;
		case "_lightArea1":
			if(light != null && light.data.raw.size != null) {
				var _this = iron_object_Uniforms.helpVec;
				_this.x = light.data.raw.size * 0.5;
				_this.y = light.data.raw.size_y * 0.5;
				_this.z = 0.0;
				_this.w = 1.0;
				var _this = iron_object_Uniforms.helpVec;
				var m = light.transform.world;
				var x = _this.x;
				var y = _this.y;
				var z = _this.z;
				_this.x = m.self._00 * x + m.self._10 * y + m.self._20 * z + m.self._30;
				_this.y = m.self._01 * x + m.self._11 * y + m.self._21 * z + m.self._31;
				_this.z = m.self._02 * x + m.self._12 * y + m.self._22 * z + m.self._32;
				v = iron_object_Uniforms.helpVec;
			}
			break;
		case "_lightArea2":
			if(light != null && light.data.raw.size != null) {
				var _this = iron_object_Uniforms.helpVec;
				_this.x = light.data.raw.size * 0.5;
				_this.y = -(light.data.raw.size_y * 0.5);
				_this.z = 0.0;
				_this.w = 1.0;
				var _this = iron_object_Uniforms.helpVec;
				var m = light.transform.world;
				var x = _this.x;
				var y = _this.y;
				var z = _this.z;
				_this.x = m.self._00 * x + m.self._10 * y + m.self._20 * z + m.self._30;
				_this.y = m.self._01 * x + m.self._11 * y + m.self._21 * z + m.self._31;
				_this.z = m.self._02 * x + m.self._12 * y + m.self._22 * z + m.self._32;
				v = iron_object_Uniforms.helpVec;
			}
			break;
		case "_lightArea3":
			if(light != null && light.data.raw.size != null) {
				var _this = iron_object_Uniforms.helpVec;
				_this.x = -(light.data.raw.size * 0.5);
				_this.y = -(light.data.raw.size_y * 0.5);
				_this.z = 0.0;
				_this.w = 1.0;
				var _this = iron_object_Uniforms.helpVec;
				var m = light.transform.world;
				var x = _this.x;
				var y = _this.y;
				var z = _this.z;
				_this.x = m.self._00 * x + m.self._10 * y + m.self._20 * z + m.self._30;
				_this.y = m.self._01 * x + m.self._11 * y + m.self._21 * z + m.self._31;
				_this.z = m.self._02 * x + m.self._12 * y + m.self._22 * z + m.self._32;
				v = iron_object_Uniforms.helpVec;
			}
			break;
		case "_lightDirection":
			if(light != null) {
				var _this = new iron_math_Vec4(light.V.self._02,light.V.self._12,light.V.self._22);
				var n = Math.sqrt(_this.x * _this.x + _this.y * _this.y + _this.z * _this.z);
				if(n > 0.0) {
					var invN = 1.0 / n;
					_this.x *= invN;
					_this.y *= invN;
					_this.z *= invN;
				}
				iron_object_Uniforms.helpVec = _this;
				v = iron_object_Uniforms.helpVec;
			}
			break;
		case "_lightPosition":
			if(light != null) {
				var _this = iron_object_Uniforms.helpVec;
				_this.x = light.transform.world.self._30;
				_this.y = light.transform.world.self._31;
				_this.z = light.transform.world.self._32;
				_this.w = 1.0;
				v = iron_object_Uniforms.helpVec;
			}
			break;
		case "_pointColor":
			var point = iron_RenderPath.active.point;
			if(point != null) {
				var str = point.visible ? point.data.raw.strength : 0.0;
				var _this = iron_object_Uniforms.helpVec;
				var y = point.data.raw.color[1] * str;
				var z = point.data.raw.color[2] * str;
				_this.x = point.data.raw.color[0] * str;
				_this.y = y;
				_this.z = z;
				_this.w = 1.0;
				v = iron_object_Uniforms.helpVec;
			}
			break;
		case "_pointPosition":
			var point = iron_RenderPath.active.point;
			if(point != null) {
				var _this = iron_object_Uniforms.helpVec;
				_this.x = point.transform.world.self._30;
				_this.y = point.transform.world.self._31;
				_this.z = point.transform.world.self._32;
				_this.w = 1.0;
				v = iron_object_Uniforms.helpVec;
			}
			break;
		case "_spotDirection":
			var point = iron_RenderPath.active.point;
			if(point != null) {
				var _this = new iron_math_Vec4(point.V.self._02,point.V.self._12,point.V.self._22);
				var n = Math.sqrt(_this.x * _this.x + _this.y * _this.y + _this.z * _this.z);
				if(n > 0.0) {
					var invN = 1.0 / n;
					_this.x *= invN;
					_this.y *= invN;
					_this.z *= invN;
				}
				iron_object_Uniforms.helpVec = _this;
				v = iron_object_Uniforms.helpVec;
			}
			break;
		case "_sunColor":
			var sun = iron_RenderPath.active.sun;
			if(sun != null) {
				var str = sun.visible ? sun.data.raw.strength : 0.0;
				var _this = iron_object_Uniforms.helpVec;
				var y = sun.data.raw.color[1] * str;
				var z = sun.data.raw.color[2] * str;
				_this.x = sun.data.raw.color[0] * str;
				_this.y = y;
				_this.z = z;
				_this.w = 1.0;
				v = iron_object_Uniforms.helpVec;
			}
			break;
		case "_sunDirection":
			var sun = iron_RenderPath.active.sun;
			if(sun != null) {
				var _this = new iron_math_Vec4(sun.V.self._02,sun.V.self._12,sun.V.self._22);
				var n = Math.sqrt(_this.x * _this.x + _this.y * _this.y + _this.z * _this.z);
				if(n > 0.0) {
					var invN = 1.0 / n;
					_this.x *= invN;
					_this.y *= invN;
					_this.z *= invN;
				}
				iron_object_Uniforms.helpVec = _this;
				v = iron_object_Uniforms.helpVec;
			}
			break;
		}
		if(v != null) {
			g.setFloat3(location,v.x,v.y,v.z);
			return true;
		}
	} else if(c.type == "vec2") {
		var v = null;
		var _this = iron_object_Uniforms.helpVec;
		_this.x = 0;
		_this.y = 0;
		_this.z = 0;
		_this.w = 1.0;
		switch(c.link) {
		case "_aspectRatio":
			v = iron_object_Uniforms.helpVec;
			v.x = iron_RenderPath.active.currentH / iron_RenderPath.active.currentW;
			v.y = iron_RenderPath.active.currentW / iron_RenderPath.active.currentH;
			v.x = v.x > 1.0 ? 1.0 : v.x;
			v.y = v.y > 1.0 ? 1.0 : v.y;
			break;
		case "_cameraPlane":
			v = iron_object_Uniforms.helpVec;
			v.x = camera.data.raw.near_plane;
			v.y = camera.data.raw.far_plane;
			break;
		case "_cameraPlaneProj":
			var near = camera.data.raw.near_plane;
			var far = camera.data.raw.far_plane;
			v = iron_object_Uniforms.helpVec;
			v.x = far / (far - near);
			v.y = -far * near / (far - near);
			break;
		case "_lightPlane":
			if(light != null) {
				v = iron_object_Uniforms.helpVec;
				v.x = light.data.raw.near_plane;
				v.y = light.data.raw.far_plane;
			}
			break;
		case "_lightPlaneProj":
			if(light != null) {
				var near = light.data.raw.near_plane;
				var far = light.data.raw.far_plane;
				var b = far - near;
				v = iron_object_Uniforms.helpVec;
				v.x = (far + near) / b;
				v.y = 2.0 * far * near / b;
			}
			break;
		case "_screenSize":
			v = iron_object_Uniforms.helpVec;
			v.x = iron_RenderPath.active.currentW;
			v.y = iron_RenderPath.active.currentH;
			break;
		case "_screenSizeInv":
			v = iron_object_Uniforms.helpVec;
			v.x = 1.0 / iron_RenderPath.active.currentW;
			v.y = 1.0 / iron_RenderPath.active.currentH;
			break;
		case "_shadowMapSize":
			if(light != null && light.data.raw.cast_shadow) {
				v = iron_object_Uniforms.helpVec;
				v.x = v.y = light.data.raw.shadowmap_size;
			}
			break;
		case "_spotData":
			var point = iron_RenderPath.active.point;
			if(point != null) {
				v = iron_object_Uniforms.helpVec;
				v.x = point.data.raw.spot_size;
				v.y = v.x - point.data.raw.spot_blend;
			}
			break;
		case "_vec2x":
			v = iron_object_Uniforms.helpVec;
			v.x = 1.0;
			v.y = 0.0;
			break;
		case "_vec2x2":
			v = iron_object_Uniforms.helpVec;
			v.x = 2.0;
			v.y = 0.0;
			break;
		case "_vec2x2Inv":
			v = iron_object_Uniforms.helpVec;
			v.x = 2.0 / iron_RenderPath.active.currentW;
			v.y = 0.0;
			break;
		case "_vec2xInv":
			v = iron_object_Uniforms.helpVec;
			v.x = 1.0 / iron_RenderPath.active.currentW;
			v.y = 0.0;
			break;
		case "_vec2y":
			v = iron_object_Uniforms.helpVec;
			v.x = 0.0;
			v.y = 1.0;
			break;
		case "_vec2y2":
			v = iron_object_Uniforms.helpVec;
			v.x = 0.0;
			v.y = 2.0;
			break;
		case "_vec2y2Inv":
			v = iron_object_Uniforms.helpVec;
			v.x = 0.0;
			v.y = 2.0 / iron_RenderPath.active.currentH;
			break;
		case "_vec2y3":
			v = iron_object_Uniforms.helpVec;
			v.x = 0.0;
			v.y = 3.0;
			break;
		case "_vec2y3Inv":
			v = iron_object_Uniforms.helpVec;
			v.x = 0.0;
			v.y = 3.0 / iron_RenderPath.active.currentH;
			break;
		case "_vec2yInv":
			v = iron_object_Uniforms.helpVec;
			v.x = 0.0;
			v.y = 1.0 / iron_RenderPath.active.currentH;
			break;
		case "_windowSize":
			v = iron_object_Uniforms.helpVec;
			v.x = arm_App.w();
			v.y = arm_App.h();
			break;
		}
		if(v != null) {
			g.setFloat2(location,v.x,v.y);
			return true;
		}
	} else if(c.type == "float") {
		var f = null;
		switch(c.link) {
		case "_aspectRatioF":
			f = iron_RenderPath.active.currentW / iron_RenderPath.active.currentH;
			break;
		case "_aspectRatioWindowF":
			f = arm_App.w() / arm_App.h();
			break;
		case "_envmapStrength":
			f = iron_Scene.active.world == null ? 0.0 : iron_Scene.active.world.probe.raw.strength;
			break;
		case "_fieldOfView":
			f = camera.data.raw.fov;
			break;
		case "_frameScale":
			f = iron_RenderPath.active.frameTime / (1 / iron_system_Time.frequency * iron_system_Time.scale);
			break;
		case "_pointShadowsBias":
			var point = iron_RenderPath.active.point;
			f = point == null ? 0.0 : point.data.raw.shadows_bias;
			break;
		case "_sunShadowsBias":
			var sun = iron_RenderPath.active.sun;
			f = sun == null ? 0.0 : sun.data.raw.shadows_bias;
			break;
		case "_time":
			f = kha_Scheduler.time();
			break;
		}
		if(f != null) {
			g.setFloat(location,f);
			return true;
		}
	} else if(c.type == "floats") {
		var fa = null;
		if(c.link == "_envmapIrradiance") {
			fa = iron_Scene.active.world == null ? iron_data_WorldData.getEmptyIrradiance() : iron_Scene.active.world.probe.irradiance;
		}
		if(fa != null) {
			g.setFloats(location,fa);
			return true;
		}
	} else if(c.type == "int") {
		var i = null;
		if(c.link == "_envmapNumMipmaps") {
			var w = iron_Scene.active.world;
			i = w != null ? w.probe.raw.radiance_mipmaps + 1 - 2 : 1;
		}
		if(i != null) {
			g.setInt(location,i);
			return true;
		}
	}
	return false;
};
iron_object_Uniforms.setObjectConstant = function(g,object,location,c) {
	if(c.link == null) {
		return;
	}
	var camera = iron_Scene.active.camera;
	var light = iron_RenderPath.active.light;
	if(c.type == "mat4") {
		var m = null;
		switch(c.link) {
		case "_biasLightWorldViewProjectionMatrix":
			if(light != null) {
				if(object == null) {
					var _this = iron_object_Uniforms.helpMat;
					_this.self._00 = 1.0;
					_this.self._01 = 0.0;
					_this.self._02 = 0.0;
					_this.self._03 = 0.0;
					_this.self._10 = 0.0;
					_this.self._11 = 1.0;
					_this.self._12 = 0.0;
					_this.self._13 = 0.0;
					_this.self._20 = 0.0;
					_this.self._21 = 0.0;
					_this.self._22 = 1.0;
					_this.self._23 = 0.0;
					_this.self._30 = 0.0;
					_this.self._31 = 0.0;
					_this.self._32 = 0.0;
					_this.self._33 = 1.0;
				} else {
					var _this = iron_object_Uniforms.helpMat;
					var m1 = object.transform.worldUnpack;
					_this.self._00 = m1.self._00;
					_this.self._01 = m1.self._01;
					_this.self._02 = m1.self._02;
					_this.self._03 = m1.self._03;
					_this.self._10 = m1.self._10;
					_this.self._11 = m1.self._11;
					_this.self._12 = m1.self._12;
					_this.self._13 = m1.self._13;
					_this.self._20 = m1.self._20;
					_this.self._21 = m1.self._21;
					_this.self._22 = m1.self._22;
					_this.self._23 = m1.self._23;
					_this.self._30 = m1.self._30;
					_this.self._31 = m1.self._31;
					_this.self._32 = m1.self._32;
					_this.self._33 = m1.self._33;
				}
				var _this = iron_object_Uniforms.helpMat;
				var m1 = light.VP;
				var a00 = _this.self._00;
				var a01 = _this.self._01;
				var a02 = _this.self._02;
				var a03 = _this.self._03;
				var a10 = _this.self._10;
				var a11 = _this.self._11;
				var a12 = _this.self._12;
				var a13 = _this.self._13;
				var a20 = _this.self._20;
				var a21 = _this.self._21;
				var a22 = _this.self._22;
				var a23 = _this.self._23;
				var a30 = _this.self._30;
				var a31 = _this.self._31;
				var a32 = _this.self._32;
				var a33 = _this.self._33;
				var b0 = m1.self._00;
				var b1 = m1.self._10;
				var b2 = m1.self._20;
				var b3 = m1.self._30;
				_this.self._00 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
				_this.self._10 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
				_this.self._20 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
				_this.self._30 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
				b0 = m1.self._01;
				b1 = m1.self._11;
				b2 = m1.self._21;
				b3 = m1.self._31;
				_this.self._01 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
				_this.self._11 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
				_this.self._21 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
				_this.self._31 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
				b0 = m1.self._02;
				b1 = m1.self._12;
				b2 = m1.self._22;
				b3 = m1.self._32;
				_this.self._02 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
				_this.self._12 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
				_this.self._22 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
				_this.self._32 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
				b0 = m1.self._03;
				b1 = m1.self._13;
				b2 = m1.self._23;
				b3 = m1.self._33;
				_this.self._03 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
				_this.self._13 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
				_this.self._23 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
				_this.self._33 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
				var _this = iron_object_Uniforms.helpMat;
				var m1 = iron_object_Uniforms.biasMat;
				var a00 = _this.self._00;
				var a01 = _this.self._01;
				var a02 = _this.self._02;
				var a03 = _this.self._03;
				var a10 = _this.self._10;
				var a11 = _this.self._11;
				var a12 = _this.self._12;
				var a13 = _this.self._13;
				var a20 = _this.self._20;
				var a21 = _this.self._21;
				var a22 = _this.self._22;
				var a23 = _this.self._23;
				var a30 = _this.self._30;
				var a31 = _this.self._31;
				var a32 = _this.self._32;
				var a33 = _this.self._33;
				var b0 = m1.self._00;
				var b1 = m1.self._10;
				var b2 = m1.self._20;
				var b3 = m1.self._30;
				_this.self._00 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
				_this.self._10 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
				_this.self._20 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
				_this.self._30 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
				b0 = m1.self._01;
				b1 = m1.self._11;
				b2 = m1.self._21;
				b3 = m1.self._31;
				_this.self._01 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
				_this.self._11 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
				_this.self._21 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
				_this.self._31 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
				b0 = m1.self._02;
				b1 = m1.self._12;
				b2 = m1.self._22;
				b3 = m1.self._32;
				_this.self._02 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
				_this.self._12 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
				_this.self._22 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
				_this.self._32 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
				b0 = m1.self._03;
				b1 = m1.self._13;
				b2 = m1.self._23;
				b3 = m1.self._33;
				_this.self._03 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
				_this.self._13 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
				_this.self._23 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
				_this.self._33 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
				m = iron_object_Uniforms.helpMat;
			}
			break;
		case "_inverseWorldMatrix":
			var _this = iron_object_Uniforms.helpMat;
			var m1 = object.transform.worldUnpack;
			var a00 = m1.self._00;
			var a01 = m1.self._01;
			var a02 = m1.self._02;
			var a03 = m1.self._03;
			var a10 = m1.self._10;
			var a11 = m1.self._11;
			var a12 = m1.self._12;
			var a13 = m1.self._13;
			var a20 = m1.self._20;
			var a21 = m1.self._21;
			var a22 = m1.self._22;
			var a23 = m1.self._23;
			var a30 = m1.self._30;
			var a31 = m1.self._31;
			var a32 = m1.self._32;
			var a33 = m1.self._33;
			var b00 = a00 * a11 - a01 * a10;
			var b01 = a00 * a12 - a02 * a10;
			var b02 = a00 * a13 - a03 * a10;
			var b03 = a01 * a12 - a02 * a11;
			var b04 = a01 * a13 - a03 * a11;
			var b05 = a02 * a13 - a03 * a12;
			var b06 = a20 * a31 - a21 * a30;
			var b07 = a20 * a32 - a22 * a30;
			var b08 = a20 * a33 - a23 * a30;
			var b09 = a21 * a32 - a22 * a31;
			var b10 = a21 * a33 - a23 * a31;
			var b11 = a22 * a33 - a23 * a32;
			var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;
			if(det == 0.0) {
				_this.self._00 = 1.0;
				_this.self._01 = 0.0;
				_this.self._02 = 0.0;
				_this.self._03 = 0.0;
				_this.self._10 = 0.0;
				_this.self._11 = 1.0;
				_this.self._12 = 0.0;
				_this.self._13 = 0.0;
				_this.self._20 = 0.0;
				_this.self._21 = 0.0;
				_this.self._22 = 1.0;
				_this.self._23 = 0.0;
				_this.self._30 = 0.0;
				_this.self._31 = 0.0;
				_this.self._32 = 0.0;
				_this.self._33 = 1.0;
			} else {
				det = 1.0 / det;
				_this.self._00 = (a11 * b11 - a12 * b10 + a13 * b09) * det;
				_this.self._01 = (a02 * b10 - a01 * b11 - a03 * b09) * det;
				_this.self._02 = (a31 * b05 - a32 * b04 + a33 * b03) * det;
				_this.self._03 = (a22 * b04 - a21 * b05 - a23 * b03) * det;
				_this.self._10 = (a12 * b08 - a10 * b11 - a13 * b07) * det;
				_this.self._11 = (a00 * b11 - a02 * b08 + a03 * b07) * det;
				_this.self._12 = (a32 * b02 - a30 * b05 - a33 * b01) * det;
				_this.self._13 = (a20 * b05 - a22 * b02 + a23 * b01) * det;
				_this.self._20 = (a10 * b10 - a11 * b08 + a13 * b06) * det;
				_this.self._21 = (a01 * b08 - a00 * b10 - a03 * b06) * det;
				_this.self._22 = (a30 * b04 - a31 * b02 + a33 * b00) * det;
				_this.self._23 = (a21 * b02 - a20 * b04 - a23 * b00) * det;
				_this.self._30 = (a11 * b07 - a10 * b09 - a12 * b06) * det;
				_this.self._31 = (a00 * b09 - a01 * b07 + a02 * b06) * det;
				_this.self._32 = (a31 * b01 - a30 * b03 - a32 * b00) * det;
				_this.self._33 = (a20 * b03 - a21 * b01 + a22 * b00) * det;
			}
			m = iron_object_Uniforms.helpMat;
			break;
		case "_lightWorldViewProjectionMatrix":
			if(light != null) {
				if(object == null) {
					var _this = iron_object_Uniforms.helpMat;
					_this.self._00 = 1.0;
					_this.self._01 = 0.0;
					_this.self._02 = 0.0;
					_this.self._03 = 0.0;
					_this.self._10 = 0.0;
					_this.self._11 = 1.0;
					_this.self._12 = 0.0;
					_this.self._13 = 0.0;
					_this.self._20 = 0.0;
					_this.self._21 = 0.0;
					_this.self._22 = 1.0;
					_this.self._23 = 0.0;
					_this.self._30 = 0.0;
					_this.self._31 = 0.0;
					_this.self._32 = 0.0;
					_this.self._33 = 1.0;
				} else {
					var _this = iron_object_Uniforms.helpMat;
					var m1 = object.transform.worldUnpack;
					_this.self._00 = m1.self._00;
					_this.self._01 = m1.self._01;
					_this.self._02 = m1.self._02;
					_this.self._03 = m1.self._03;
					_this.self._10 = m1.self._10;
					_this.self._11 = m1.self._11;
					_this.self._12 = m1.self._12;
					_this.self._13 = m1.self._13;
					_this.self._20 = m1.self._20;
					_this.self._21 = m1.self._21;
					_this.self._22 = m1.self._22;
					_this.self._23 = m1.self._23;
					_this.self._30 = m1.self._30;
					_this.self._31 = m1.self._31;
					_this.self._32 = m1.self._32;
					_this.self._33 = m1.self._33;
				}
				var _this = iron_object_Uniforms.helpMat;
				var m1 = light.VP;
				var a00 = _this.self._00;
				var a01 = _this.self._01;
				var a02 = _this.self._02;
				var a03 = _this.self._03;
				var a10 = _this.self._10;
				var a11 = _this.self._11;
				var a12 = _this.self._12;
				var a13 = _this.self._13;
				var a20 = _this.self._20;
				var a21 = _this.self._21;
				var a22 = _this.self._22;
				var a23 = _this.self._23;
				var a30 = _this.self._30;
				var a31 = _this.self._31;
				var a32 = _this.self._32;
				var a33 = _this.self._33;
				var b0 = m1.self._00;
				var b1 = m1.self._10;
				var b2 = m1.self._20;
				var b3 = m1.self._30;
				_this.self._00 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
				_this.self._10 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
				_this.self._20 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
				_this.self._30 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
				b0 = m1.self._01;
				b1 = m1.self._11;
				b2 = m1.self._21;
				b3 = m1.self._31;
				_this.self._01 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
				_this.self._11 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
				_this.self._21 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
				_this.self._31 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
				b0 = m1.self._02;
				b1 = m1.self._12;
				b2 = m1.self._22;
				b3 = m1.self._32;
				_this.self._02 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
				_this.self._12 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
				_this.self._22 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
				_this.self._32 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
				b0 = m1.self._03;
				b1 = m1.self._13;
				b2 = m1.self._23;
				b3 = m1.self._33;
				_this.self._03 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
				_this.self._13 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
				_this.self._23 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
				_this.self._33 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
				m = iron_object_Uniforms.helpMat;
			}
			break;
		case "_lightWorldViewProjectionMatrixCylinder":
			if(light != null) {
				var _this = iron_object_Uniforms.helpMat;
				var m1 = object.transform.worldUnpack;
				_this.self._00 = m1.self._00;
				_this.self._01 = m1.self._01;
				_this.self._02 = m1.self._02;
				_this.self._03 = m1.self._03;
				_this.self._10 = m1.self._10;
				_this.self._11 = m1.self._11;
				_this.self._12 = m1.self._12;
				_this.self._13 = m1.self._13;
				_this.self._20 = m1.self._20;
				_this.self._21 = m1.self._21;
				_this.self._22 = m1.self._22;
				_this.self._23 = m1.self._23;
				_this.self._30 = m1.self._30;
				_this.self._31 = m1.self._31;
				_this.self._32 = m1.self._32;
				_this.self._33 = m1.self._33;
				var _this = iron_object_Uniforms.helpMat;
				var m1 = camera.V;
				var a00 = _this.self._00;
				var a01 = _this.self._01;
				var a02 = _this.self._02;
				var a03 = _this.self._03;
				var a10 = _this.self._10;
				var a11 = _this.self._11;
				var a12 = _this.self._12;
				var a13 = _this.self._13;
				var a20 = _this.self._20;
				var a21 = _this.self._21;
				var a22 = _this.self._22;
				var a23 = _this.self._23;
				var a30 = _this.self._30;
				var a31 = _this.self._31;
				var a32 = _this.self._32;
				var a33 = _this.self._33;
				var b0 = m1.self._00;
				var b1 = m1.self._10;
				var b2 = m1.self._20;
				var b3 = m1.self._30;
				_this.self._00 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
				_this.self._10 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
				_this.self._20 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
				_this.self._30 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
				b0 = m1.self._01;
				b1 = m1.self._11;
				b2 = m1.self._21;
				b3 = m1.self._31;
				_this.self._01 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
				_this.self._11 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
				_this.self._21 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
				_this.self._31 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
				b0 = m1.self._02;
				b1 = m1.self._12;
				b2 = m1.self._22;
				b3 = m1.self._32;
				_this.self._02 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
				_this.self._12 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
				_this.self._22 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
				_this.self._32 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
				b0 = m1.self._03;
				b1 = m1.self._13;
				b2 = m1.self._23;
				b3 = m1.self._33;
				_this.self._03 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
				_this.self._13 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
				_this.self._23 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
				_this.self._33 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
				iron_object_Uniforms.helpMat.self._00 = 1.0;
				iron_object_Uniforms.helpMat.self._20 = 0.0;
				iron_object_Uniforms.helpMat.self._01 = 0.0;
				iron_object_Uniforms.helpMat.self._21 = 0.0;
				iron_object_Uniforms.helpMat.self._02 = 0.0;
				iron_object_Uniforms.helpMat.self._22 = 1.0;
				var _this = iron_object_Uniforms.helpMat2;
				var m1 = camera.V;
				var a00 = m1.self._00;
				var a01 = m1.self._01;
				var a02 = m1.self._02;
				var a03 = m1.self._03;
				var a10 = m1.self._10;
				var a11 = m1.self._11;
				var a12 = m1.self._12;
				var a13 = m1.self._13;
				var a20 = m1.self._20;
				var a21 = m1.self._21;
				var a22 = m1.self._22;
				var a23 = m1.self._23;
				var a30 = m1.self._30;
				var a31 = m1.self._31;
				var a32 = m1.self._32;
				var a33 = m1.self._33;
				var b00 = a00 * a11 - a01 * a10;
				var b01 = a00 * a12 - a02 * a10;
				var b02 = a00 * a13 - a03 * a10;
				var b03 = a01 * a12 - a02 * a11;
				var b04 = a01 * a13 - a03 * a11;
				var b05 = a02 * a13 - a03 * a12;
				var b06 = a20 * a31 - a21 * a30;
				var b07 = a20 * a32 - a22 * a30;
				var b08 = a20 * a33 - a23 * a30;
				var b09 = a21 * a32 - a22 * a31;
				var b10 = a21 * a33 - a23 * a31;
				var b11 = a22 * a33 - a23 * a32;
				var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;
				if(det == 0.0) {
					_this.self._00 = 1.0;
					_this.self._01 = 0.0;
					_this.self._02 = 0.0;
					_this.self._03 = 0.0;
					_this.self._10 = 0.0;
					_this.self._11 = 1.0;
					_this.self._12 = 0.0;
					_this.self._13 = 0.0;
					_this.self._20 = 0.0;
					_this.self._21 = 0.0;
					_this.self._22 = 1.0;
					_this.self._23 = 0.0;
					_this.self._30 = 0.0;
					_this.self._31 = 0.0;
					_this.self._32 = 0.0;
					_this.self._33 = 1.0;
				} else {
					det = 1.0 / det;
					_this.self._00 = (a11 * b11 - a12 * b10 + a13 * b09) * det;
					_this.self._01 = (a02 * b10 - a01 * b11 - a03 * b09) * det;
					_this.self._02 = (a31 * b05 - a32 * b04 + a33 * b03) * det;
					_this.self._03 = (a22 * b04 - a21 * b05 - a23 * b03) * det;
					_this.self._10 = (a12 * b08 - a10 * b11 - a13 * b07) * det;
					_this.self._11 = (a00 * b11 - a02 * b08 + a03 * b07) * det;
					_this.self._12 = (a32 * b02 - a30 * b05 - a33 * b01) * det;
					_this.self._13 = (a20 * b05 - a22 * b02 + a23 * b01) * det;
					_this.self._20 = (a10 * b10 - a11 * b08 + a13 * b06) * det;
					_this.self._21 = (a01 * b08 - a00 * b10 - a03 * b06) * det;
					_this.self._22 = (a30 * b04 - a31 * b02 + a33 * b00) * det;
					_this.self._23 = (a21 * b02 - a20 * b04 - a23 * b00) * det;
					_this.self._30 = (a11 * b07 - a10 * b09 - a12 * b06) * det;
					_this.self._31 = (a00 * b09 - a01 * b07 + a02 * b06) * det;
					_this.self._32 = (a31 * b01 - a30 * b03 - a32 * b00) * det;
					_this.self._33 = (a20 * b03 - a21 * b01 + a22 * b00) * det;
				}
				var _this = iron_object_Uniforms.helpMat;
				var m1 = iron_object_Uniforms.helpMat2;
				var a00 = _this.self._00;
				var a01 = _this.self._01;
				var a02 = _this.self._02;
				var a03 = _this.self._03;
				var a10 = _this.self._10;
				var a11 = _this.self._11;
				var a12 = _this.self._12;
				var a13 = _this.self._13;
				var a20 = _this.self._20;
				var a21 = _this.self._21;
				var a22 = _this.self._22;
				var a23 = _this.self._23;
				var a30 = _this.self._30;
				var a31 = _this.self._31;
				var a32 = _this.self._32;
				var a33 = _this.self._33;
				var b0 = m1.self._00;
				var b1 = m1.self._10;
				var b2 = m1.self._20;
				var b3 = m1.self._30;
				_this.self._00 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
				_this.self._10 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
				_this.self._20 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
				_this.self._30 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
				b0 = m1.self._01;
				b1 = m1.self._11;
				b2 = m1.self._21;
				b3 = m1.self._31;
				_this.self._01 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
				_this.self._11 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
				_this.self._21 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
				_this.self._31 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
				b0 = m1.self._02;
				b1 = m1.self._12;
				b2 = m1.self._22;
				b3 = m1.self._32;
				_this.self._02 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
				_this.self._12 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
				_this.self._22 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
				_this.self._32 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
				b0 = m1.self._03;
				b1 = m1.self._13;
				b2 = m1.self._23;
				b3 = m1.self._33;
				_this.self._03 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
				_this.self._13 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
				_this.self._23 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
				_this.self._33 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
				var _this = iron_object_Uniforms.helpMat;
				var m1 = light.VP;
				var a00 = _this.self._00;
				var a01 = _this.self._01;
				var a02 = _this.self._02;
				var a03 = _this.self._03;
				var a10 = _this.self._10;
				var a11 = _this.self._11;
				var a12 = _this.self._12;
				var a13 = _this.self._13;
				var a20 = _this.self._20;
				var a21 = _this.self._21;
				var a22 = _this.self._22;
				var a23 = _this.self._23;
				var a30 = _this.self._30;
				var a31 = _this.self._31;
				var a32 = _this.self._32;
				var a33 = _this.self._33;
				var b0 = m1.self._00;
				var b1 = m1.self._10;
				var b2 = m1.self._20;
				var b3 = m1.self._30;
				_this.self._00 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
				_this.self._10 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
				_this.self._20 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
				_this.self._30 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
				b0 = m1.self._01;
				b1 = m1.self._11;
				b2 = m1.self._21;
				b3 = m1.self._31;
				_this.self._01 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
				_this.self._11 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
				_this.self._21 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
				_this.self._31 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
				b0 = m1.self._02;
				b1 = m1.self._12;
				b2 = m1.self._22;
				b3 = m1.self._32;
				_this.self._02 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
				_this.self._12 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
				_this.self._22 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
				_this.self._32 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
				b0 = m1.self._03;
				b1 = m1.self._13;
				b2 = m1.self._23;
				b3 = m1.self._33;
				_this.self._03 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
				_this.self._13 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
				_this.self._23 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
				_this.self._33 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
				m = iron_object_Uniforms.helpMat;
			}
			break;
		case "_lightWorldViewProjectionMatrixSphere":
			if(light != null) {
				var _this = iron_object_Uniforms.helpMat;
				var m1 = object.transform.worldUnpack;
				_this.self._00 = m1.self._00;
				_this.self._01 = m1.self._01;
				_this.self._02 = m1.self._02;
				_this.self._03 = m1.self._03;
				_this.self._10 = m1.self._10;
				_this.self._11 = m1.self._11;
				_this.self._12 = m1.self._12;
				_this.self._13 = m1.self._13;
				_this.self._20 = m1.self._20;
				_this.self._21 = m1.self._21;
				_this.self._22 = m1.self._22;
				_this.self._23 = m1.self._23;
				_this.self._30 = m1.self._30;
				_this.self._31 = m1.self._31;
				_this.self._32 = m1.self._32;
				_this.self._33 = m1.self._33;
				var _this = iron_object_Uniforms.helpMat;
				var m1 = camera.V;
				var a00 = _this.self._00;
				var a01 = _this.self._01;
				var a02 = _this.self._02;
				var a03 = _this.self._03;
				var a10 = _this.self._10;
				var a11 = _this.self._11;
				var a12 = _this.self._12;
				var a13 = _this.self._13;
				var a20 = _this.self._20;
				var a21 = _this.self._21;
				var a22 = _this.self._22;
				var a23 = _this.self._23;
				var a30 = _this.self._30;
				var a31 = _this.self._31;
				var a32 = _this.self._32;
				var a33 = _this.self._33;
				var b0 = m1.self._00;
				var b1 = m1.self._10;
				var b2 = m1.self._20;
				var b3 = m1.self._30;
				_this.self._00 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
				_this.self._10 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
				_this.self._20 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
				_this.self._30 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
				b0 = m1.self._01;
				b1 = m1.self._11;
				b2 = m1.self._21;
				b3 = m1.self._31;
				_this.self._01 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
				_this.self._11 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
				_this.self._21 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
				_this.self._31 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
				b0 = m1.self._02;
				b1 = m1.self._12;
				b2 = m1.self._22;
				b3 = m1.self._32;
				_this.self._02 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
				_this.self._12 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
				_this.self._22 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
				_this.self._32 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
				b0 = m1.self._03;
				b1 = m1.self._13;
				b2 = m1.self._23;
				b3 = m1.self._33;
				_this.self._03 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
				_this.self._13 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
				_this.self._23 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
				_this.self._33 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
				iron_object_Uniforms.helpMat.self._00 = 1.0;
				iron_object_Uniforms.helpMat.self._10 = 0.0;
				iron_object_Uniforms.helpMat.self._20 = 0.0;
				iron_object_Uniforms.helpMat.self._01 = 0.0;
				iron_object_Uniforms.helpMat.self._11 = 1.0;
				iron_object_Uniforms.helpMat.self._21 = 0.0;
				iron_object_Uniforms.helpMat.self._02 = 0.0;
				iron_object_Uniforms.helpMat.self._12 = 0.0;
				iron_object_Uniforms.helpMat.self._22 = 1.0;
				var _this = iron_object_Uniforms.helpMat2;
				var m1 = camera.V;
				var a00 = m1.self._00;
				var a01 = m1.self._01;
				var a02 = m1.self._02;
				var a03 = m1.self._03;
				var a10 = m1.self._10;
				var a11 = m1.self._11;
				var a12 = m1.self._12;
				var a13 = m1.self._13;
				var a20 = m1.self._20;
				var a21 = m1.self._21;
				var a22 = m1.self._22;
				var a23 = m1.self._23;
				var a30 = m1.self._30;
				var a31 = m1.self._31;
				var a32 = m1.self._32;
				var a33 = m1.self._33;
				var b00 = a00 * a11 - a01 * a10;
				var b01 = a00 * a12 - a02 * a10;
				var b02 = a00 * a13 - a03 * a10;
				var b03 = a01 * a12 - a02 * a11;
				var b04 = a01 * a13 - a03 * a11;
				var b05 = a02 * a13 - a03 * a12;
				var b06 = a20 * a31 - a21 * a30;
				var b07 = a20 * a32 - a22 * a30;
				var b08 = a20 * a33 - a23 * a30;
				var b09 = a21 * a32 - a22 * a31;
				var b10 = a21 * a33 - a23 * a31;
				var b11 = a22 * a33 - a23 * a32;
				var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;
				if(det == 0.0) {
					_this.self._00 = 1.0;
					_this.self._01 = 0.0;
					_this.self._02 = 0.0;
					_this.self._03 = 0.0;
					_this.self._10 = 0.0;
					_this.self._11 = 1.0;
					_this.self._12 = 0.0;
					_this.self._13 = 0.0;
					_this.self._20 = 0.0;
					_this.self._21 = 0.0;
					_this.self._22 = 1.0;
					_this.self._23 = 0.0;
					_this.self._30 = 0.0;
					_this.self._31 = 0.0;
					_this.self._32 = 0.0;
					_this.self._33 = 1.0;
				} else {
					det = 1.0 / det;
					_this.self._00 = (a11 * b11 - a12 * b10 + a13 * b09) * det;
					_this.self._01 = (a02 * b10 - a01 * b11 - a03 * b09) * det;
					_this.self._02 = (a31 * b05 - a32 * b04 + a33 * b03) * det;
					_this.self._03 = (a22 * b04 - a21 * b05 - a23 * b03) * det;
					_this.self._10 = (a12 * b08 - a10 * b11 - a13 * b07) * det;
					_this.self._11 = (a00 * b11 - a02 * b08 + a03 * b07) * det;
					_this.self._12 = (a32 * b02 - a30 * b05 - a33 * b01) * det;
					_this.self._13 = (a20 * b05 - a22 * b02 + a23 * b01) * det;
					_this.self._20 = (a10 * b10 - a11 * b08 + a13 * b06) * det;
					_this.self._21 = (a01 * b08 - a00 * b10 - a03 * b06) * det;
					_this.self._22 = (a30 * b04 - a31 * b02 + a33 * b00) * det;
					_this.self._23 = (a21 * b02 - a20 * b04 - a23 * b00) * det;
					_this.self._30 = (a11 * b07 - a10 * b09 - a12 * b06) * det;
					_this.self._31 = (a00 * b09 - a01 * b07 + a02 * b06) * det;
					_this.self._32 = (a31 * b01 - a30 * b03 - a32 * b00) * det;
					_this.self._33 = (a20 * b03 - a21 * b01 + a22 * b00) * det;
				}
				var _this = iron_object_Uniforms.helpMat;
				var m1 = iron_object_Uniforms.helpMat2;
				var a00 = _this.self._00;
				var a01 = _this.self._01;
				var a02 = _this.self._02;
				var a03 = _this.self._03;
				var a10 = _this.self._10;
				var a11 = _this.self._11;
				var a12 = _this.self._12;
				var a13 = _this.self._13;
				var a20 = _this.self._20;
				var a21 = _this.self._21;
				var a22 = _this.self._22;
				var a23 = _this.self._23;
				var a30 = _this.self._30;
				var a31 = _this.self._31;
				var a32 = _this.self._32;
				var a33 = _this.self._33;
				var b0 = m1.self._00;
				var b1 = m1.self._10;
				var b2 = m1.self._20;
				var b3 = m1.self._30;
				_this.self._00 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
				_this.self._10 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
				_this.self._20 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
				_this.self._30 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
				b0 = m1.self._01;
				b1 = m1.self._11;
				b2 = m1.self._21;
				b3 = m1.self._31;
				_this.self._01 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
				_this.self._11 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
				_this.self._21 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
				_this.self._31 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
				b0 = m1.self._02;
				b1 = m1.self._12;
				b2 = m1.self._22;
				b3 = m1.self._32;
				_this.self._02 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
				_this.self._12 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
				_this.self._22 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
				_this.self._32 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
				b0 = m1.self._03;
				b1 = m1.self._13;
				b2 = m1.self._23;
				b3 = m1.self._33;
				_this.self._03 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
				_this.self._13 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
				_this.self._23 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
				_this.self._33 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
				var _this = iron_object_Uniforms.helpMat;
				var m1 = light.VP;
				var a00 = _this.self._00;
				var a01 = _this.self._01;
				var a02 = _this.self._02;
				var a03 = _this.self._03;
				var a10 = _this.self._10;
				var a11 = _this.self._11;
				var a12 = _this.self._12;
				var a13 = _this.self._13;
				var a20 = _this.self._20;
				var a21 = _this.self._21;
				var a22 = _this.self._22;
				var a23 = _this.self._23;
				var a30 = _this.self._30;
				var a31 = _this.self._31;
				var a32 = _this.self._32;
				var a33 = _this.self._33;
				var b0 = m1.self._00;
				var b1 = m1.self._10;
				var b2 = m1.self._20;
				var b3 = m1.self._30;
				_this.self._00 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
				_this.self._10 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
				_this.self._20 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
				_this.self._30 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
				b0 = m1.self._01;
				b1 = m1.self._11;
				b2 = m1.self._21;
				b3 = m1.self._31;
				_this.self._01 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
				_this.self._11 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
				_this.self._21 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
				_this.self._31 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
				b0 = m1.self._02;
				b1 = m1.self._12;
				b2 = m1.self._22;
				b3 = m1.self._32;
				_this.self._02 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
				_this.self._12 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
				_this.self._22 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
				_this.self._32 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
				b0 = m1.self._03;
				b1 = m1.self._13;
				b2 = m1.self._23;
				b3 = m1.self._33;
				_this.self._03 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
				_this.self._13 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
				_this.self._23 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
				_this.self._33 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
				m = iron_object_Uniforms.helpMat;
			}
			break;
		case "_particleData":
			var mo = js_Boot.__cast(object , iron_object_MeshObject);
			if(mo.particleOwner != null && mo.particleOwner.particleSystems != null) {
				m = mo.particleOwner.particleSystems[mo.particleIndex].getData();
			}
			break;
		case "_prevWorldMatrix":
			m = (js_Boot.__cast(object , iron_object_MeshObject)).prevMatrix;
			break;
		case "_prevWorldViewProjectionMatrix":
			var _this = iron_object_Uniforms.helpMat;
			var m1 = (js_Boot.__cast(object , iron_object_MeshObject)).prevMatrix;
			_this.self._00 = m1.self._00;
			_this.self._01 = m1.self._01;
			_this.self._02 = m1.self._02;
			_this.self._03 = m1.self._03;
			_this.self._10 = m1.self._10;
			_this.self._11 = m1.self._11;
			_this.self._12 = m1.self._12;
			_this.self._13 = m1.self._13;
			_this.self._20 = m1.self._20;
			_this.self._21 = m1.self._21;
			_this.self._22 = m1.self._22;
			_this.self._23 = m1.self._23;
			_this.self._30 = m1.self._30;
			_this.self._31 = m1.self._31;
			_this.self._32 = m1.self._32;
			_this.self._33 = m1.self._33;
			var _this = iron_object_Uniforms.helpMat;
			var m1 = camera.prevV;
			var a00 = _this.self._00;
			var a01 = _this.self._01;
			var a02 = _this.self._02;
			var a03 = _this.self._03;
			var a10 = _this.self._10;
			var a11 = _this.self._11;
			var a12 = _this.self._12;
			var a13 = _this.self._13;
			var a20 = _this.self._20;
			var a21 = _this.self._21;
			var a22 = _this.self._22;
			var a23 = _this.self._23;
			var a30 = _this.self._30;
			var a31 = _this.self._31;
			var a32 = _this.self._32;
			var a33 = _this.self._33;
			var b0 = m1.self._00;
			var b1 = m1.self._10;
			var b2 = m1.self._20;
			var b3 = m1.self._30;
			_this.self._00 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
			_this.self._10 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
			_this.self._20 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
			_this.self._30 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
			b0 = m1.self._01;
			b1 = m1.self._11;
			b2 = m1.self._21;
			b3 = m1.self._31;
			_this.self._01 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
			_this.self._11 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
			_this.self._21 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
			_this.self._31 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
			b0 = m1.self._02;
			b1 = m1.self._12;
			b2 = m1.self._22;
			b3 = m1.self._32;
			_this.self._02 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
			_this.self._12 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
			_this.self._22 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
			_this.self._32 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
			b0 = m1.self._03;
			b1 = m1.self._13;
			b2 = m1.self._23;
			b3 = m1.self._33;
			_this.self._03 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
			_this.self._13 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
			_this.self._23 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
			_this.self._33 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
			var _this = iron_object_Uniforms.helpMat;
			var m1 = camera.P;
			var a00 = _this.self._00;
			var a01 = _this.self._01;
			var a02 = _this.self._02;
			var a03 = _this.self._03;
			var a10 = _this.self._10;
			var a11 = _this.self._11;
			var a12 = _this.self._12;
			var a13 = _this.self._13;
			var a20 = _this.self._20;
			var a21 = _this.self._21;
			var a22 = _this.self._22;
			var a23 = _this.self._23;
			var a30 = _this.self._30;
			var a31 = _this.self._31;
			var a32 = _this.self._32;
			var a33 = _this.self._33;
			var b0 = m1.self._00;
			var b1 = m1.self._10;
			var b2 = m1.self._20;
			var b3 = m1.self._30;
			_this.self._00 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
			_this.self._10 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
			_this.self._20 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
			_this.self._30 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
			b0 = m1.self._01;
			b1 = m1.self._11;
			b2 = m1.self._21;
			b3 = m1.self._31;
			_this.self._01 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
			_this.self._11 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
			_this.self._21 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
			_this.self._31 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
			b0 = m1.self._02;
			b1 = m1.self._12;
			b2 = m1.self._22;
			b3 = m1.self._32;
			_this.self._02 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
			_this.self._12 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
			_this.self._22 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
			_this.self._32 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
			b0 = m1.self._03;
			b1 = m1.self._13;
			b2 = m1.self._23;
			b3 = m1.self._33;
			_this.self._03 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
			_this.self._13 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
			_this.self._23 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
			_this.self._33 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
			m = iron_object_Uniforms.helpMat;
			break;
		case "_worldMatrix":
			m = object.transform.worldUnpack;
			break;
		case "_worldViewMatrix":
			var _this = iron_object_Uniforms.helpMat;
			var m1 = object.transform.worldUnpack;
			_this.self._00 = m1.self._00;
			_this.self._01 = m1.self._01;
			_this.self._02 = m1.self._02;
			_this.self._03 = m1.self._03;
			_this.self._10 = m1.self._10;
			_this.self._11 = m1.self._11;
			_this.self._12 = m1.self._12;
			_this.self._13 = m1.self._13;
			_this.self._20 = m1.self._20;
			_this.self._21 = m1.self._21;
			_this.self._22 = m1.self._22;
			_this.self._23 = m1.self._23;
			_this.self._30 = m1.self._30;
			_this.self._31 = m1.self._31;
			_this.self._32 = m1.self._32;
			_this.self._33 = m1.self._33;
			var _this = iron_object_Uniforms.helpMat;
			var m1 = camera.V;
			var a00 = _this.self._00;
			var a01 = _this.self._01;
			var a02 = _this.self._02;
			var a03 = _this.self._03;
			var a10 = _this.self._10;
			var a11 = _this.self._11;
			var a12 = _this.self._12;
			var a13 = _this.self._13;
			var a20 = _this.self._20;
			var a21 = _this.self._21;
			var a22 = _this.self._22;
			var a23 = _this.self._23;
			var a30 = _this.self._30;
			var a31 = _this.self._31;
			var a32 = _this.self._32;
			var a33 = _this.self._33;
			var b0 = m1.self._00;
			var b1 = m1.self._10;
			var b2 = m1.self._20;
			var b3 = m1.self._30;
			_this.self._00 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
			_this.self._10 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
			_this.self._20 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
			_this.self._30 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
			b0 = m1.self._01;
			b1 = m1.self._11;
			b2 = m1.self._21;
			b3 = m1.self._31;
			_this.self._01 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
			_this.self._11 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
			_this.self._21 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
			_this.self._31 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
			b0 = m1.self._02;
			b1 = m1.self._12;
			b2 = m1.self._22;
			b3 = m1.self._32;
			_this.self._02 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
			_this.self._12 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
			_this.self._22 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
			_this.self._32 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
			b0 = m1.self._03;
			b1 = m1.self._13;
			b2 = m1.self._23;
			b3 = m1.self._33;
			_this.self._03 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
			_this.self._13 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
			_this.self._23 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
			_this.self._33 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
			m = iron_object_Uniforms.helpMat;
			break;
		case "_worldViewProjectionMatrix":
			var _this = iron_object_Uniforms.helpMat;
			var m1 = object.transform.worldUnpack;
			_this.self._00 = m1.self._00;
			_this.self._01 = m1.self._01;
			_this.self._02 = m1.self._02;
			_this.self._03 = m1.self._03;
			_this.self._10 = m1.self._10;
			_this.self._11 = m1.self._11;
			_this.self._12 = m1.self._12;
			_this.self._13 = m1.self._13;
			_this.self._20 = m1.self._20;
			_this.self._21 = m1.self._21;
			_this.self._22 = m1.self._22;
			_this.self._23 = m1.self._23;
			_this.self._30 = m1.self._30;
			_this.self._31 = m1.self._31;
			_this.self._32 = m1.self._32;
			_this.self._33 = m1.self._33;
			var _this = iron_object_Uniforms.helpMat;
			var m1 = camera.V;
			var a00 = _this.self._00;
			var a01 = _this.self._01;
			var a02 = _this.self._02;
			var a03 = _this.self._03;
			var a10 = _this.self._10;
			var a11 = _this.self._11;
			var a12 = _this.self._12;
			var a13 = _this.self._13;
			var a20 = _this.self._20;
			var a21 = _this.self._21;
			var a22 = _this.self._22;
			var a23 = _this.self._23;
			var a30 = _this.self._30;
			var a31 = _this.self._31;
			var a32 = _this.self._32;
			var a33 = _this.self._33;
			var b0 = m1.self._00;
			var b1 = m1.self._10;
			var b2 = m1.self._20;
			var b3 = m1.self._30;
			_this.self._00 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
			_this.self._10 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
			_this.self._20 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
			_this.self._30 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
			b0 = m1.self._01;
			b1 = m1.self._11;
			b2 = m1.self._21;
			b3 = m1.self._31;
			_this.self._01 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
			_this.self._11 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
			_this.self._21 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
			_this.self._31 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
			b0 = m1.self._02;
			b1 = m1.self._12;
			b2 = m1.self._22;
			b3 = m1.self._32;
			_this.self._02 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
			_this.self._12 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
			_this.self._22 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
			_this.self._32 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
			b0 = m1.self._03;
			b1 = m1.self._13;
			b2 = m1.self._23;
			b3 = m1.self._33;
			_this.self._03 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
			_this.self._13 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
			_this.self._23 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
			_this.self._33 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
			var _this = iron_object_Uniforms.helpMat;
			var m1 = camera.P;
			var a00 = _this.self._00;
			var a01 = _this.self._01;
			var a02 = _this.self._02;
			var a03 = _this.self._03;
			var a10 = _this.self._10;
			var a11 = _this.self._11;
			var a12 = _this.self._12;
			var a13 = _this.self._13;
			var a20 = _this.self._20;
			var a21 = _this.self._21;
			var a22 = _this.self._22;
			var a23 = _this.self._23;
			var a30 = _this.self._30;
			var a31 = _this.self._31;
			var a32 = _this.self._32;
			var a33 = _this.self._33;
			var b0 = m1.self._00;
			var b1 = m1.self._10;
			var b2 = m1.self._20;
			var b3 = m1.self._30;
			_this.self._00 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
			_this.self._10 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
			_this.self._20 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
			_this.self._30 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
			b0 = m1.self._01;
			b1 = m1.self._11;
			b2 = m1.self._21;
			b3 = m1.self._31;
			_this.self._01 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
			_this.self._11 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
			_this.self._21 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
			_this.self._31 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
			b0 = m1.self._02;
			b1 = m1.self._12;
			b2 = m1.self._22;
			b3 = m1.self._32;
			_this.self._02 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
			_this.self._12 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
			_this.self._22 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
			_this.self._32 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
			b0 = m1.self._03;
			b1 = m1.self._13;
			b2 = m1.self._23;
			b3 = m1.self._33;
			_this.self._03 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
			_this.self._13 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
			_this.self._23 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
			_this.self._33 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
			m = iron_object_Uniforms.helpMat;
			break;
		case "_worldViewProjectionMatrixCylinder":
			var t = object.transform;
			var _this = iron_object_Uniforms.helpMat;
			var m1 = t.worldUnpack;
			_this.self._00 = m1.self._00;
			_this.self._01 = m1.self._01;
			_this.self._02 = m1.self._02;
			_this.self._03 = m1.self._03;
			_this.self._10 = m1.self._10;
			_this.self._11 = m1.self._11;
			_this.self._12 = m1.self._12;
			_this.self._13 = m1.self._13;
			_this.self._20 = m1.self._20;
			_this.self._21 = m1.self._21;
			_this.self._22 = m1.self._22;
			_this.self._23 = m1.self._23;
			_this.self._30 = m1.self._30;
			_this.self._31 = m1.self._31;
			_this.self._32 = m1.self._32;
			_this.self._33 = m1.self._33;
			var _this = iron_object_Uniforms.helpMat;
			var m1 = camera.V;
			var a00 = _this.self._00;
			var a01 = _this.self._01;
			var a02 = _this.self._02;
			var a03 = _this.self._03;
			var a10 = _this.self._10;
			var a11 = _this.self._11;
			var a12 = _this.self._12;
			var a13 = _this.self._13;
			var a20 = _this.self._20;
			var a21 = _this.self._21;
			var a22 = _this.self._22;
			var a23 = _this.self._23;
			var a30 = _this.self._30;
			var a31 = _this.self._31;
			var a32 = _this.self._32;
			var a33 = _this.self._33;
			var b0 = m1.self._00;
			var b1 = m1.self._10;
			var b2 = m1.self._20;
			var b3 = m1.self._30;
			_this.self._00 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
			_this.self._10 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
			_this.self._20 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
			_this.self._30 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
			b0 = m1.self._01;
			b1 = m1.self._11;
			b2 = m1.self._21;
			b3 = m1.self._31;
			_this.self._01 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
			_this.self._11 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
			_this.self._21 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
			_this.self._31 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
			b0 = m1.self._02;
			b1 = m1.self._12;
			b2 = m1.self._22;
			b3 = m1.self._32;
			_this.self._02 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
			_this.self._12 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
			_this.self._22 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
			_this.self._32 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
			b0 = m1.self._03;
			b1 = m1.self._13;
			b2 = m1.self._23;
			b3 = m1.self._33;
			_this.self._03 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
			_this.self._13 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
			_this.self._23 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
			_this.self._33 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
			iron_object_Uniforms.helpMat.self._00 = t.scale.x;
			iron_object_Uniforms.helpMat.self._20 = 0.0;
			iron_object_Uniforms.helpMat.self._01 = 0.0;
			iron_object_Uniforms.helpMat.self._21 = 0.0;
			iron_object_Uniforms.helpMat.self._02 = 0.0;
			iron_object_Uniforms.helpMat.self._22 = t.scale.z;
			var _this = iron_object_Uniforms.helpMat;
			var m1 = camera.P;
			var a00 = _this.self._00;
			var a01 = _this.self._01;
			var a02 = _this.self._02;
			var a03 = _this.self._03;
			var a10 = _this.self._10;
			var a11 = _this.self._11;
			var a12 = _this.self._12;
			var a13 = _this.self._13;
			var a20 = _this.self._20;
			var a21 = _this.self._21;
			var a22 = _this.self._22;
			var a23 = _this.self._23;
			var a30 = _this.self._30;
			var a31 = _this.self._31;
			var a32 = _this.self._32;
			var a33 = _this.self._33;
			var b0 = m1.self._00;
			var b1 = m1.self._10;
			var b2 = m1.self._20;
			var b3 = m1.self._30;
			_this.self._00 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
			_this.self._10 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
			_this.self._20 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
			_this.self._30 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
			b0 = m1.self._01;
			b1 = m1.self._11;
			b2 = m1.self._21;
			b3 = m1.self._31;
			_this.self._01 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
			_this.self._11 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
			_this.self._21 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
			_this.self._31 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
			b0 = m1.self._02;
			b1 = m1.self._12;
			b2 = m1.self._22;
			b3 = m1.self._32;
			_this.self._02 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
			_this.self._12 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
			_this.self._22 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
			_this.self._32 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
			b0 = m1.self._03;
			b1 = m1.self._13;
			b2 = m1.self._23;
			b3 = m1.self._33;
			_this.self._03 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
			_this.self._13 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
			_this.self._23 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
			_this.self._33 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
			m = iron_object_Uniforms.helpMat;
			break;
		case "_worldViewProjectionMatrixSphere":
			var t = object.transform;
			var _this = iron_object_Uniforms.helpMat;
			var m1 = t.worldUnpack;
			_this.self._00 = m1.self._00;
			_this.self._01 = m1.self._01;
			_this.self._02 = m1.self._02;
			_this.self._03 = m1.self._03;
			_this.self._10 = m1.self._10;
			_this.self._11 = m1.self._11;
			_this.self._12 = m1.self._12;
			_this.self._13 = m1.self._13;
			_this.self._20 = m1.self._20;
			_this.self._21 = m1.self._21;
			_this.self._22 = m1.self._22;
			_this.self._23 = m1.self._23;
			_this.self._30 = m1.self._30;
			_this.self._31 = m1.self._31;
			_this.self._32 = m1.self._32;
			_this.self._33 = m1.self._33;
			var _this = iron_object_Uniforms.helpMat;
			var m1 = camera.V;
			var a00 = _this.self._00;
			var a01 = _this.self._01;
			var a02 = _this.self._02;
			var a03 = _this.self._03;
			var a10 = _this.self._10;
			var a11 = _this.self._11;
			var a12 = _this.self._12;
			var a13 = _this.self._13;
			var a20 = _this.self._20;
			var a21 = _this.self._21;
			var a22 = _this.self._22;
			var a23 = _this.self._23;
			var a30 = _this.self._30;
			var a31 = _this.self._31;
			var a32 = _this.self._32;
			var a33 = _this.self._33;
			var b0 = m1.self._00;
			var b1 = m1.self._10;
			var b2 = m1.self._20;
			var b3 = m1.self._30;
			_this.self._00 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
			_this.self._10 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
			_this.self._20 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
			_this.self._30 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
			b0 = m1.self._01;
			b1 = m1.self._11;
			b2 = m1.self._21;
			b3 = m1.self._31;
			_this.self._01 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
			_this.self._11 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
			_this.self._21 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
			_this.self._31 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
			b0 = m1.self._02;
			b1 = m1.self._12;
			b2 = m1.self._22;
			b3 = m1.self._32;
			_this.self._02 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
			_this.self._12 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
			_this.self._22 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
			_this.self._32 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
			b0 = m1.self._03;
			b1 = m1.self._13;
			b2 = m1.self._23;
			b3 = m1.self._33;
			_this.self._03 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
			_this.self._13 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
			_this.self._23 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
			_this.self._33 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
			iron_object_Uniforms.helpMat.self._00 = t.scale.x;
			iron_object_Uniforms.helpMat.self._10 = 0.0;
			iron_object_Uniforms.helpMat.self._20 = 0.0;
			iron_object_Uniforms.helpMat.self._01 = 0.0;
			iron_object_Uniforms.helpMat.self._11 = t.scale.y;
			iron_object_Uniforms.helpMat.self._21 = 0.0;
			iron_object_Uniforms.helpMat.self._02 = 0.0;
			iron_object_Uniforms.helpMat.self._12 = 0.0;
			iron_object_Uniforms.helpMat.self._22 = t.scale.z;
			var _this = iron_object_Uniforms.helpMat;
			var m1 = camera.P;
			var a00 = _this.self._00;
			var a01 = _this.self._01;
			var a02 = _this.self._02;
			var a03 = _this.self._03;
			var a10 = _this.self._10;
			var a11 = _this.self._11;
			var a12 = _this.self._12;
			var a13 = _this.self._13;
			var a20 = _this.self._20;
			var a21 = _this.self._21;
			var a22 = _this.self._22;
			var a23 = _this.self._23;
			var a30 = _this.self._30;
			var a31 = _this.self._31;
			var a32 = _this.self._32;
			var a33 = _this.self._33;
			var b0 = m1.self._00;
			var b1 = m1.self._10;
			var b2 = m1.self._20;
			var b3 = m1.self._30;
			_this.self._00 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
			_this.self._10 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
			_this.self._20 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
			_this.self._30 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
			b0 = m1.self._01;
			b1 = m1.self._11;
			b2 = m1.self._21;
			b3 = m1.self._31;
			_this.self._01 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
			_this.self._11 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
			_this.self._21 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
			_this.self._31 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
			b0 = m1.self._02;
			b1 = m1.self._12;
			b2 = m1.self._22;
			b3 = m1.self._32;
			_this.self._02 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
			_this.self._12 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
			_this.self._22 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
			_this.self._32 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
			b0 = m1.self._03;
			b1 = m1.self._13;
			b2 = m1.self._23;
			b3 = m1.self._33;
			_this.self._03 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
			_this.self._13 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
			_this.self._23 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
			_this.self._33 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
			m = iron_object_Uniforms.helpMat;
			break;
		}
		if(m == null) {
			if(StringTools.startsWith(c.link,"_biasLightWorldViewProjectionMatrixSpot")) {
				var light = iron_object_Uniforms.getSpot(HxOverrides.cca(c.link,c.link.length - 1) - 48);
				if(light != null) {
					if(object == null) {
						var _this = iron_object_Uniforms.helpMat;
						_this.self._00 = 1.0;
						_this.self._01 = 0.0;
						_this.self._02 = 0.0;
						_this.self._03 = 0.0;
						_this.self._10 = 0.0;
						_this.self._11 = 1.0;
						_this.self._12 = 0.0;
						_this.self._13 = 0.0;
						_this.self._20 = 0.0;
						_this.self._21 = 0.0;
						_this.self._22 = 1.0;
						_this.self._23 = 0.0;
						_this.self._30 = 0.0;
						_this.self._31 = 0.0;
						_this.self._32 = 0.0;
						_this.self._33 = 1.0;
					} else {
						var _this = iron_object_Uniforms.helpMat;
						var m1 = object.transform.worldUnpack;
						_this.self._00 = m1.self._00;
						_this.self._01 = m1.self._01;
						_this.self._02 = m1.self._02;
						_this.self._03 = m1.self._03;
						_this.self._10 = m1.self._10;
						_this.self._11 = m1.self._11;
						_this.self._12 = m1.self._12;
						_this.self._13 = m1.self._13;
						_this.self._20 = m1.self._20;
						_this.self._21 = m1.self._21;
						_this.self._22 = m1.self._22;
						_this.self._23 = m1.self._23;
						_this.self._30 = m1.self._30;
						_this.self._31 = m1.self._31;
						_this.self._32 = m1.self._32;
						_this.self._33 = m1.self._33;
					}
					var _this = iron_object_Uniforms.helpMat;
					var m1 = light.VP;
					var a00 = _this.self._00;
					var a01 = _this.self._01;
					var a02 = _this.self._02;
					var a03 = _this.self._03;
					var a10 = _this.self._10;
					var a11 = _this.self._11;
					var a12 = _this.self._12;
					var a13 = _this.self._13;
					var a20 = _this.self._20;
					var a21 = _this.self._21;
					var a22 = _this.self._22;
					var a23 = _this.self._23;
					var a30 = _this.self._30;
					var a31 = _this.self._31;
					var a32 = _this.self._32;
					var a33 = _this.self._33;
					var b0 = m1.self._00;
					var b1 = m1.self._10;
					var b2 = m1.self._20;
					var b3 = m1.self._30;
					_this.self._00 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
					_this.self._10 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
					_this.self._20 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
					_this.self._30 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
					b0 = m1.self._01;
					b1 = m1.self._11;
					b2 = m1.self._21;
					b3 = m1.self._31;
					_this.self._01 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
					_this.self._11 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
					_this.self._21 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
					_this.self._31 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
					b0 = m1.self._02;
					b1 = m1.self._12;
					b2 = m1.self._22;
					b3 = m1.self._32;
					_this.self._02 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
					_this.self._12 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
					_this.self._22 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
					_this.self._32 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
					b0 = m1.self._03;
					b1 = m1.self._13;
					b2 = m1.self._23;
					b3 = m1.self._33;
					_this.self._03 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
					_this.self._13 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
					_this.self._23 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
					_this.self._33 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
					var _this = iron_object_Uniforms.helpMat;
					var m1 = iron_object_Uniforms.biasMat;
					var a00 = _this.self._00;
					var a01 = _this.self._01;
					var a02 = _this.self._02;
					var a03 = _this.self._03;
					var a10 = _this.self._10;
					var a11 = _this.self._11;
					var a12 = _this.self._12;
					var a13 = _this.self._13;
					var a20 = _this.self._20;
					var a21 = _this.self._21;
					var a22 = _this.self._22;
					var a23 = _this.self._23;
					var a30 = _this.self._30;
					var a31 = _this.self._31;
					var a32 = _this.self._32;
					var a33 = _this.self._33;
					var b0 = m1.self._00;
					var b1 = m1.self._10;
					var b2 = m1.self._20;
					var b3 = m1.self._30;
					_this.self._00 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
					_this.self._10 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
					_this.self._20 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
					_this.self._30 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
					b0 = m1.self._01;
					b1 = m1.self._11;
					b2 = m1.self._21;
					b3 = m1.self._31;
					_this.self._01 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
					_this.self._11 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
					_this.self._21 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
					_this.self._31 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
					b0 = m1.self._02;
					b1 = m1.self._12;
					b2 = m1.self._22;
					b3 = m1.self._32;
					_this.self._02 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
					_this.self._12 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
					_this.self._22 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
					_this.self._32 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
					b0 = m1.self._03;
					b1 = m1.self._13;
					b2 = m1.self._23;
					b3 = m1.self._33;
					_this.self._03 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
					_this.self._13 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
					_this.self._23 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
					_this.self._33 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
					m = iron_object_Uniforms.helpMat;
				}
			}
			if(StringTools.startsWith(c.link,"_biasLightViewProjectionMatrixSpot")) {
				var light = iron_object_Uniforms.getSpot(HxOverrides.cca(c.link,c.link.length - 1) - 48);
				if(light != null) {
					var _this = iron_object_Uniforms.helpMat;
					var m1 = light.VP;
					_this.self._00 = m1.self._00;
					_this.self._01 = m1.self._01;
					_this.self._02 = m1.self._02;
					_this.self._03 = m1.self._03;
					_this.self._10 = m1.self._10;
					_this.self._11 = m1.self._11;
					_this.self._12 = m1.self._12;
					_this.self._13 = m1.self._13;
					_this.self._20 = m1.self._20;
					_this.self._21 = m1.self._21;
					_this.self._22 = m1.self._22;
					_this.self._23 = m1.self._23;
					_this.self._30 = m1.self._30;
					_this.self._31 = m1.self._31;
					_this.self._32 = m1.self._32;
					_this.self._33 = m1.self._33;
					var _this = iron_object_Uniforms.helpMat;
					var m1 = iron_object_Uniforms.biasMat;
					var a00 = _this.self._00;
					var a01 = _this.self._01;
					var a02 = _this.self._02;
					var a03 = _this.self._03;
					var a10 = _this.self._10;
					var a11 = _this.self._11;
					var a12 = _this.self._12;
					var a13 = _this.self._13;
					var a20 = _this.self._20;
					var a21 = _this.self._21;
					var a22 = _this.self._22;
					var a23 = _this.self._23;
					var a30 = _this.self._30;
					var a31 = _this.self._31;
					var a32 = _this.self._32;
					var a33 = _this.self._33;
					var b0 = m1.self._00;
					var b1 = m1.self._10;
					var b2 = m1.self._20;
					var b3 = m1.self._30;
					_this.self._00 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
					_this.self._10 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
					_this.self._20 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
					_this.self._30 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
					b0 = m1.self._01;
					b1 = m1.self._11;
					b2 = m1.self._21;
					b3 = m1.self._31;
					_this.self._01 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
					_this.self._11 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
					_this.self._21 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
					_this.self._31 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
					b0 = m1.self._02;
					b1 = m1.self._12;
					b2 = m1.self._22;
					b3 = m1.self._32;
					_this.self._02 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
					_this.self._12 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
					_this.self._22 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
					_this.self._32 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
					b0 = m1.self._03;
					b1 = m1.self._13;
					b2 = m1.self._23;
					b3 = m1.self._33;
					_this.self._03 = a00 * b0 + a01 * b1 + a02 * b2 + a03 * b3;
					_this.self._13 = a10 * b0 + a11 * b1 + a12 * b2 + a13 * b3;
					_this.self._23 = a20 * b0 + a21 * b1 + a22 * b2 + a23 * b3;
					_this.self._33 = a30 * b0 + a31 * b1 + a32 * b2 + a33 * b3;
					m = iron_object_Uniforms.helpMat;
				}
			}
		}
		if(m == null && iron_object_Uniforms.externalMat4Links != null) {
			var _g = 0;
			var _g1 = iron_object_Uniforms.externalMat4Links;
			while(_g < _g1.length) {
				m = _g1[_g++](object,iron_object_Uniforms.currentMat(object),c.link);
				if(m != null) {
					break;
				}
			}
		}
		if(m == null) {
			return;
		}
		var matrix = m.self;
		kha_graphics4_Graphics.mat[0] = matrix._00;
		kha_graphics4_Graphics.mat[1] = matrix._01;
		kha_graphics4_Graphics.mat[2] = matrix._02;
		kha_graphics4_Graphics.mat[3] = matrix._03;
		kha_graphics4_Graphics.mat[4] = matrix._10;
		kha_graphics4_Graphics.mat[5] = matrix._11;
		kha_graphics4_Graphics.mat[6] = matrix._12;
		kha_graphics4_Graphics.mat[7] = matrix._13;
		kha_graphics4_Graphics.mat[8] = matrix._20;
		kha_graphics4_Graphics.mat[9] = matrix._21;
		kha_graphics4_Graphics.mat[10] = matrix._22;
		kha_graphics4_Graphics.mat[11] = matrix._23;
		kha_graphics4_Graphics.mat[12] = matrix._30;
		kha_graphics4_Graphics.mat[13] = matrix._31;
		kha_graphics4_Graphics.mat[14] = matrix._32;
		kha_graphics4_Graphics.mat[15] = matrix._33;
		Krom.setMatrix(location,kha_graphics4_Graphics.mat.buffer);
	} else if(c.type == "mat3") {
		var m = null;
		switch(c.link) {
		case "_normalMatrix":
			var _this = iron_object_Uniforms.helpMat;
			var m1 = object.transform.world;
			var a00 = m1.self._00;
			var a01 = m1.self._01;
			var a02 = m1.self._02;
			var a03 = m1.self._03;
			var a10 = m1.self._10;
			var a11 = m1.self._11;
			var a12 = m1.self._12;
			var a13 = m1.self._13;
			var a20 = m1.self._20;
			var a21 = m1.self._21;
			var a22 = m1.self._22;
			var a23 = m1.self._23;
			var a30 = m1.self._30;
			var a31 = m1.self._31;
			var a32 = m1.self._32;
			var a33 = m1.self._33;
			var b00 = a00 * a11 - a01 * a10;
			var b01 = a00 * a12 - a02 * a10;
			var b02 = a00 * a13 - a03 * a10;
			var b03 = a01 * a12 - a02 * a11;
			var b04 = a01 * a13 - a03 * a11;
			var b05 = a02 * a13 - a03 * a12;
			var b06 = a20 * a31 - a21 * a30;
			var b07 = a20 * a32 - a22 * a30;
			var b08 = a20 * a33 - a23 * a30;
			var b09 = a21 * a32 - a22 * a31;
			var b10 = a21 * a33 - a23 * a31;
			var b11 = a22 * a33 - a23 * a32;
			var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;
			if(det == 0.0) {
				_this.self._00 = 1.0;
				_this.self._01 = 0.0;
				_this.self._02 = 0.0;
				_this.self._03 = 0.0;
				_this.self._10 = 0.0;
				_this.self._11 = 1.0;
				_this.self._12 = 0.0;
				_this.self._13 = 0.0;
				_this.self._20 = 0.0;
				_this.self._21 = 0.0;
				_this.self._22 = 1.0;
				_this.self._23 = 0.0;
				_this.self._30 = 0.0;
				_this.self._31 = 0.0;
				_this.self._32 = 0.0;
				_this.self._33 = 1.0;
			} else {
				det = 1.0 / det;
				_this.self._00 = (a11 * b11 - a12 * b10 + a13 * b09) * det;
				_this.self._01 = (a02 * b10 - a01 * b11 - a03 * b09) * det;
				_this.self._02 = (a31 * b05 - a32 * b04 + a33 * b03) * det;
				_this.self._03 = (a22 * b04 - a21 * b05 - a23 * b03) * det;
				_this.self._10 = (a12 * b08 - a10 * b11 - a13 * b07) * det;
				_this.self._11 = (a00 * b11 - a02 * b08 + a03 * b07) * det;
				_this.self._12 = (a32 * b02 - a30 * b05 - a33 * b01) * det;
				_this.self._13 = (a20 * b05 - a22 * b02 + a23 * b01) * det;
				_this.self._20 = (a10 * b10 - a11 * b08 + a13 * b06) * det;
				_this.self._21 = (a01 * b08 - a00 * b10 - a03 * b06) * det;
				_this.self._22 = (a30 * b04 - a31 * b02 + a33 * b00) * det;
				_this.self._23 = (a21 * b02 - a20 * b04 - a23 * b00) * det;
				_this.self._30 = (a11 * b07 - a10 * b09 - a12 * b06) * det;
				_this.self._31 = (a00 * b09 - a01 * b07 + a02 * b06) * det;
				_this.self._32 = (a31 * b01 - a30 * b03 - a32 * b00) * det;
				_this.self._33 = (a20 * b03 - a21 * b01 + a22 * b00) * det;
			}
			var _this = iron_object_Uniforms.helpMat;
			var f = _this.self._01;
			_this.self._01 = _this.self._10;
			_this.self._10 = f;
			f = _this.self._02;
			_this.self._02 = _this.self._20;
			_this.self._20 = f;
			f = _this.self._12;
			_this.self._12 = _this.self._21;
			_this.self._21 = f;
			var _this = iron_object_Uniforms.helpMat3;
			var m1 = iron_object_Uniforms.helpMat;
			_this.self._00 = m1.self._00;
			_this.self._01 = m1.self._01;
			_this.self._02 = m1.self._02;
			_this.self._10 = m1.self._10;
			_this.self._11 = m1.self._11;
			_this.self._12 = m1.self._12;
			_this.self._20 = m1.self._20;
			_this.self._21 = m1.self._21;
			_this.self._22 = m1.self._22;
			m = iron_object_Uniforms.helpMat3;
			break;
		case "_viewMatrix3":
			var _this = iron_object_Uniforms.helpMat3;
			var m1 = camera.V;
			_this.self._00 = m1.self._00;
			_this.self._01 = m1.self._01;
			_this.self._02 = m1.self._02;
			_this.self._10 = m1.self._10;
			_this.self._11 = m1.self._11;
			_this.self._12 = m1.self._12;
			_this.self._20 = m1.self._20;
			_this.self._21 = m1.self._21;
			_this.self._22 = m1.self._22;
			m = iron_object_Uniforms.helpMat3;
			break;
		}
		if(m == null) {
			return;
		}
		var matrix = m.self;
		kha_graphics4_Graphics.mat[0] = matrix._00;
		kha_graphics4_Graphics.mat[1] = matrix._01;
		kha_graphics4_Graphics.mat[2] = matrix._02;
		kha_graphics4_Graphics.mat[3] = matrix._10;
		kha_graphics4_Graphics.mat[4] = matrix._11;
		kha_graphics4_Graphics.mat[5] = matrix._12;
		kha_graphics4_Graphics.mat[6] = matrix._20;
		kha_graphics4_Graphics.mat[7] = matrix._21;
		kha_graphics4_Graphics.mat[8] = matrix._22;
		Krom.setMatrix3(location,kha_graphics4_Graphics.mat.buffer);
	} else if(c.type == "vec4") {
		var v = null;
		var _this = iron_object_Uniforms.helpVec;
		_this.x = 0;
		_this.y = 0;
		_this.z = 0;
		_this.w = 1.0;
		if(iron_object_Uniforms.externalVec4Links != null) {
			var _g = 0;
			var _g1 = iron_object_Uniforms.externalVec4Links;
			while(_g < _g1.length) {
				v = _g1[_g++](object,iron_object_Uniforms.currentMat(object),c.link);
				if(v != null) {
					break;
				}
			}
		}
		if(v == null) {
			return;
		}
		g.setFloat4(location,v.x,v.y,v.z,v.w);
	} else if(c.type == "vec3") {
		var v = null;
		var _this = iron_object_Uniforms.helpVec;
		_this.x = 0;
		_this.y = 0;
		_this.z = 0;
		_this.w = 1.0;
		switch(c.link) {
		case "_dim":
			var d = object.transform.dim;
			var s = object.transform.scale;
			var _this = iron_object_Uniforms.helpVec;
			_this.x = d.x / s.x;
			_this.y = d.y / s.y;
			_this.z = d.z / s.z;
			_this.w = 1.0;
			v = iron_object_Uniforms.helpVec;
			break;
		case "_halfDim":
			var d = object.transform.dim;
			var s = object.transform.scale;
			var _this = iron_object_Uniforms.helpVec;
			_this.x = d.x / s.x / 2;
			_this.y = d.y / s.y / 2;
			_this.z = d.z / s.z / 2;
			_this.w = 1.0;
			v = iron_object_Uniforms.helpVec;
			break;
		}
		if(v == null && iron_object_Uniforms.externalVec3Links != null) {
			var _g = 0;
			var _g1 = iron_object_Uniforms.externalVec3Links;
			while(_g < _g1.length) {
				v = _g1[_g++](object,iron_object_Uniforms.currentMat(object),c.link);
				if(v != null) {
					break;
				}
			}
		}
		if(v == null) {
			return;
		}
		g.setFloat3(location,v.x,v.y,v.z);
	} else if(c.type == "vec2") {
		var vx = null;
		var vy = null;
		if(c.link == "_tilesheetOffset") {
			var ts = (js_Boot.__cast(object , iron_object_MeshObject)).tilesheet;
			vx = ts.tileX;
			vy = ts.tileY;
		}
		if(vx == null && iron_object_Uniforms.externalVec2Links != null) {
			var _g = 0;
			var _g1 = iron_object_Uniforms.externalVec2Links;
			while(_g < _g1.length) {
				var v = _g1[_g++](object,iron_object_Uniforms.currentMat(object),c.link);
				if(v != null) {
					vx = v.x;
					vy = v.y;
					break;
				}
			}
		}
		if(vx == null) {
			return;
		}
		g.setFloat2(location,vx,vy);
	} else if(c.type == "float") {
		var f = null;
		switch(c.link) {
		case "_objectInfoIndex":
			f = object.uid;
			break;
		case "_objectInfoMaterialIndex":
			f = iron_object_Uniforms.currentMat(object).uid;
			break;
		case "_objectInfoRandom":
			f = object.urandom;
			break;
		case "_posUnpack":
			f = iron_object_Uniforms.posUnpack != null ? iron_object_Uniforms.posUnpack : 1.0;
			break;
		case "_texUnpack":
			f = iron_object_Uniforms.texUnpack != null ? iron_object_Uniforms.texUnpack : 1.0;
			break;
		}
		if(f == null && iron_object_Uniforms.externalFloatLinks != null) {
			var _g = 0;
			var _g1 = iron_object_Uniforms.externalFloatLinks;
			while(_g < _g1.length) {
				var res = _g1[_g++](object,iron_object_Uniforms.currentMat(object),c.link);
				if(res != null) {
					f = res;
					break;
				}
			}
		}
		if(f == null) {
			return;
		}
		g.setFloat(location,f);
	} else if(c.type == "floats") {
		var fa = null;
		if(iron_object_Uniforms.externalFloatsLinks != null) {
			var _g = 0;
			var _g1 = iron_object_Uniforms.externalFloatsLinks;
			while(_g < _g1.length) {
				fa = _g1[_g++](object,iron_object_Uniforms.currentMat(object),c.link);
				if(fa != null) {
					break;
				}
			}
		}
		if(fa == null) {
			return;
		}
		g.setFloats(location,fa);
	} else if(c.type == "int") {
		var i = null;
		if(c.link == "_uid") {
			i = object.uid;
		}
		if(i == null && iron_object_Uniforms.externalIntLinks != null) {
			var _g = 0;
			var _g1 = iron_object_Uniforms.externalIntLinks;
			while(_g < _g1.length) {
				var res = _g1[_g++](object,iron_object_Uniforms.currentMat(object),c.link);
				if(res != null) {
					i = res;
					break;
				}
			}
		}
		if(i == null) {
			return;
		}
		g.setInt(location,i);
	}
};
iron_object_Uniforms.setMaterialConstants = function(g,context,materialContext) {
	if(materialContext.raw.bind_constants != null) {
		var _g = 0;
		var _g1 = materialContext.raw.bind_constants.length;
		while(_g < _g1) {
			var matc = materialContext.raw.bind_constants[_g++];
			var pos = -1;
			var _g2 = 0;
			var _g3 = context.raw.constants.length;
			while(_g2 < _g3) {
				var i = _g2++;
				if(context.raw.constants[i].name == matc.name) {
					pos = i;
					break;
				}
			}
			if(pos == -1) {
				continue;
			}
			iron_object_Uniforms.setMaterialConstant(g,context.constants[pos],context.raw.constants[pos],matc);
		}
	}
	if(materialContext.textures != null) {
		var _g = 0;
		var _g1 = materialContext.textures.length;
		while(_g < _g1) {
			var i = _g++;
			var mname = materialContext.raw.bind_textures[i].name;
			var _g2 = 0;
			var _g3 = context.textureUnits.length;
			while(_g2 < _g3) {
				var j = _g2++;
				if(mname == context.raw.texture_units[j].name) {
					g.setTexture(context.textureUnits[j],materialContext.textures[i]);
					materialContext.setTextureParameters(g,i,context,j);
					break;
				}
			}
		}
	}
};
iron_object_Uniforms.getSpot = function(index) {
	var i = 0;
	var _g = 0;
	var _g1 = iron_Scene.active.lights;
	while(_g < _g1.length) {
		var l = _g1[_g];
		++_g;
		if(l.data.raw.type != "spot" && l.data.raw.type != "area") {
			continue;
		}
		if(i == index) {
			return l;
		}
		++i;
	}
	return null;
};
iron_object_Uniforms.currentMat = function(object) {
	if(object != null && ((object) instanceof iron_object_MeshObject)) {
		var mo = js_Boot.__cast(object , iron_object_MeshObject);
		return mo.materials[mo.materialIndex];
	}
	return null;
};
iron_object_Uniforms.setMaterialConstant = function(g,location,c,matc) {
	switch(c.type) {
	case "bool":
		g.setBool(location,matc.bool);
		break;
	case "float":
		g.setFloat(location,matc.float);
		break;
	case "int":
		g.setInt(location,matc.int);
		break;
	case "vec2":
		g.setFloat2(location,matc.vec2[0],matc.vec2[1]);
		break;
	case "vec3":
		g.setFloat3(location,matc.vec3[0],matc.vec3[1],matc.vec3[2]);
		break;
	case "vec4":
		g.setFloat4(location,matc.vec4[0],matc.vec4[1],matc.vec4[2],matc.vec4[3]);
		break;
	}
};
var iron_system_VirtualButton = function() {
	this.down = false;
	this.released = false;
	this.started = false;
};
$hxClasses["iron.system.VirtualButton"] = iron_system_VirtualButton;
iron_system_VirtualButton.__name__ = "iron.system.VirtualButton";
iron_system_VirtualButton.prototype = {
	__class__: iron_system_VirtualButton
};
var iron_system_VirtualInput = function() {
	this.virtualButtons = null;
};
$hxClasses["iron.system.VirtualInput"] = iron_system_VirtualInput;
iron_system_VirtualInput.__name__ = "iron.system.VirtualInput";
iron_system_VirtualInput.prototype = {
	downVirtual: function(button) {
		if(this.virtualButtons != null) {
			var vb = this.virtualButtons.h[button];
			if(vb != null) {
				vb.down = true;
				vb.started = true;
			}
		}
	}
	,upVirtual: function(button) {
		if(this.virtualButtons != null) {
			var vb = this.virtualButtons.h[button];
			if(vb != null) {
				vb.down = false;
				vb.released = true;
			}
		}
	}
	,__class__: iron_system_VirtualInput
};
var iron_system_Mouse = function() {
	this.lastY = -1.0;
	this.lastX = -1.0;
	this.hidden = false;
	this.locked = false;
	this.wheelDelta = 0;
	this.movementY = 0.0;
	this.movementX = 0.0;
	this.moved = false;
	this.y = 0.0;
	this.x = 0.0;
	this.buttonsReleased = [false,false,false];
	this.buttonsStarted = [false,false,false];
	this.buttonsDown = [false,false,false];
	iron_system_VirtualInput.call(this);
	kha_input_Mouse.get().notify($bind(this,this.downListener),$bind(this,this.upListener),$bind(this,this.moveListener),$bind(this,this.wheelListener));
};
$hxClasses["iron.system.Mouse"] = iron_system_Mouse;
iron_system_Mouse.__name__ = "iron.system.Mouse";
iron_system_Mouse.__super__ = iron_system_VirtualInput;
iron_system_Mouse.prototype = $extend(iron_system_VirtualInput.prototype,{
	endFrame: function() {
		this.buttonsStarted[1] = this.buttonsStarted[2] = false;
		this.buttonsStarted[0] = false;
		this.buttonsReleased[1] = this.buttonsReleased[2] = false;
		this.buttonsReleased[0] = false;
		this.moved = false;
		this.movementX = 0;
		this.movementY = 0;
		this.wheelDelta = 0;
	}
	,reset: function() {
		this.buttonsDown[1] = this.buttonsDown[2] = false;
		this.buttonsDown[0] = false;
		this.endFrame();
	}
	,buttonIndex: function(button) {
		if(button == "left") {
			return 0;
		} else if(button == "right") {
			return 1;
		} else {
			return 2;
		}
	}
	,down: function(button) {
		if(button == null) {
			button = "left";
		}
		return this.buttonsDown[this.buttonIndex(button)];
	}
	,started: function(button) {
		if(button == null) {
			button = "left";
		}
		return this.buttonsStarted[this.buttonIndex(button)];
	}
	,released: function(button) {
		if(button == null) {
			button = "left";
		}
		return this.buttonsReleased[this.buttonIndex(button)];
	}
	,lock: function() {
		if(kha_input_Mouse.get().canLock()) {
			kha_input_Mouse.get().lock();
			this.locked = true;
			this.hidden = true;
		}
	}
	,unlock: function() {
		if(kha_input_Mouse.get().canLock()) {
			kha_input_Mouse.get().unlock();
			this.locked = false;
			this.hidden = false;
		}
	}
	,downListener: function(index,x,y) {
		this.buttonsDown[index] = true;
		this.buttonsStarted[index] = true;
		this.x = x;
		this.y = y;
		this.downVirtual(iron_system_Mouse.buttons[index]);
	}
	,upListener: function(index,x,y) {
		this.buttonsDown[index] = false;
		this.buttonsReleased[index] = true;
		this.x = x;
		this.y = y;
		this.upVirtual(iron_system_Mouse.buttons[index]);
	}
	,moveListener: function(x,y,movementX,movementY) {
		if(this.lastX == -1.0 && this.lastY == -1.0) {
			this.lastX = x;
			this.lastY = y;
		}
		if(this.locked) {
			this.movementX += movementX;
			this.movementY += movementY;
		} else {
			this.movementX += x - this.lastX;
			this.movementY += y - this.lastY;
		}
		this.lastX = x;
		this.lastY = y;
		this.x = x;
		this.y = y;
		this.moved = true;
	}
	,wheelListener: function(delta) {
		this.wheelDelta = delta;
	}
	,__class__: iron_system_Mouse
});
var iron_system_Pen = function() {
	this.lastY = -1.0;
	this.lastX = -1.0;
	this.connected = false;
	this.pressure = 0.0;
	this.movementY = 0.0;
	this.movementX = 0.0;
	this.moved = false;
	this.y = 0.0;
	this.x = 0.0;
	this.buttonsReleased = [false];
	this.buttonsStarted = [false];
	this.buttonsDown = [false];
	iron_system_VirtualInput.call(this);
	kha_input_Pen.get().notify($bind(this,this.downListener),$bind(this,this.upListener),$bind(this,this.moveListener));
};
$hxClasses["iron.system.Pen"] = iron_system_Pen;
iron_system_Pen.__name__ = "iron.system.Pen";
iron_system_Pen.__super__ = iron_system_VirtualInput;
iron_system_Pen.prototype = $extend(iron_system_VirtualInput.prototype,{
	endFrame: function() {
		this.buttonsStarted[0] = false;
		this.buttonsReleased[0] = false;
		this.moved = false;
		this.movementX = 0;
		this.movementY = 0;
	}
	,reset: function() {
		this.buttonsDown[0] = false;
		this.endFrame();
	}
	,buttonIndex: function(button) {
		return 0;
	}
	,down: function(button) {
		if(button == null) {
			button = "tip";
		}
		return this.buttonsDown[this.buttonIndex(button)];
	}
	,started: function(button) {
		if(button == null) {
			button = "tip";
		}
		return this.buttonsStarted[this.buttonIndex(button)];
	}
	,downListener: function(x,y,pressure) {
		this.buttonsDown[0] = true;
		this.buttonsStarted[0] = true;
		this.x = x;
		this.y = y;
		this.pressure = pressure;
	}
	,upListener: function(x,y,pressure) {
		this.buttonsDown[0] = false;
		this.buttonsReleased[0] = true;
		this.x = x;
		this.y = y;
		this.pressure = pressure;
	}
	,moveListener: function(x,y,pressure) {
		if(this.lastX == -1.0 && this.lastY == -1.0) {
			this.lastX = x;
			this.lastY = y;
		}
		this.movementX = x - this.lastX;
		this.movementY = y - this.lastY;
		this.lastX = x;
		this.lastY = y;
		this.x = x;
		this.y = y;
		this.moved = true;
		this.pressure = pressure;
		this.connected = true;
	}
	,__class__: iron_system_Pen
});
var iron_system_Keyboard = function() {
	this.repeatTime = 0.0;
	this.repeatKey = false;
	this.keysFrame = [];
	this.keysReleased = new haxe_ds_StringMap();
	this.keysStarted = new haxe_ds_StringMap();
	this.keysDown = new haxe_ds_StringMap();
	iron_system_VirtualInput.call(this);
	this.reset();
	kha_input_Keyboard.get().notify($bind(this,this.downListener),$bind(this,this.upListener),$bind(this,this.pressListener));
};
$hxClasses["iron.system.Keyboard"] = iron_system_Keyboard;
iron_system_Keyboard.__name__ = "iron.system.Keyboard";
iron_system_Keyboard.keyCode = function(key) {
	if(key == 32) {
		return "space";
	} else if(key == 8) {
		return "backspace";
	} else if(key == 9) {
		return "tab";
	} else if(key == 13) {
		return "enter";
	} else if(key == 16) {
		return "shift";
	} else if(key == 17) {
		return "control";
	} else if(key == 18) {
		return "alt";
	} else if(key == 91) {
		return "win";
	} else if(key == 27) {
		return "escape";
	} else if(key == 46) {
		return "delete";
	} else if(key == 38) {
		return "up";
	} else if(key == 40) {
		return "down";
	} else if(key == 37) {
		return "left";
	} else if(key == 39) {
		return "right";
	} else if(key == 1) {
		return "back";
	} else if(key == 188) {
		return ",";
	} else if(key == 190) {
		return ".";
	} else if(key == 58) {
		return ":";
	} else if(key == 59) {
		return ";";
	} else if(key == 60) {
		return "<";
	} else if(key == 61) {
		return "=";
	} else if(key == 62) {
		return ">";
	} else if(key == 63) {
		return "?";
	} else if(key == 161) {
		return "!";
	} else if(key == 162) {
		return "\"";
	} else if(key == 163) {
		return "#";
	} else if(key == 164) {
		return "$";
	} else if(key == 165) {
		return "%";
	} else if(key == 166) {
		return "&";
	} else if(key == 167) {
		return "_";
	} else if(key == 168) {
		return "(";
	} else if(key == 169) {
		return ")";
	} else if(key == 170) {
		return "*";
	} else if(key == 172) {
		return "|";
	} else if(key == 174) {
		return "{";
	} else if(key == 175) {
		return "}";
	} else if(key == 219) {
		return "[";
	} else if(key == 221) {
		return "]";
	} else if(key == 176) {
		return "~";
	} else if(key == 192) {
		return "`";
	} else if(key == 191) {
		return "/";
	} else if(key == 220) {
		return "\\";
	} else if(key == 64) {
		return "@";
	} else if(key == 107) {
		return "+";
	} else if(key == 171) {
		return "+";
	} else if(key == 109) {
		return "-";
	} else if(key == 173) {
		return "-";
	} else if(key == 106) {
		return "*";
	} else if(key == 111) {
		return "/";
	} else if(key == 110) {
		return ".";
	} else if(key == 48) {
		return "0";
	} else if(key == 96) {
		return "0";
	} else if(key == 49) {
		return "1";
	} else if(key == 97) {
		return "1";
	} else if(key == 50) {
		return "2";
	} else if(key == 98) {
		return "2";
	} else if(key == 51) {
		return "3";
	} else if(key == 99) {
		return "3";
	} else if(key == 52) {
		return "4";
	} else if(key == 100) {
		return "4";
	} else if(key == 53) {
		return "5";
	} else if(key == 101) {
		return "5";
	} else if(key == 54) {
		return "6";
	} else if(key == 102) {
		return "6";
	} else if(key == 55) {
		return "7";
	} else if(key == 103) {
		return "7";
	} else if(key == 56) {
		return "8";
	} else if(key == 104) {
		return "8";
	} else if(key == 57) {
		return "9";
	} else if(key == 105) {
		return "9";
	} else if(key == 112) {
		return "f1";
	} else if(key == 113) {
		return "f2";
	} else if(key == 114) {
		return "f3";
	} else if(key == 115) {
		return "f4";
	} else if(key == 116) {
		return "f5";
	} else if(key == 117) {
		return "f6";
	} else if(key == 118) {
		return "f7";
	} else if(key == 119) {
		return "f8";
	} else if(key == 120) {
		return "f9";
	} else if(key == 121) {
		return "f10";
	} else if(key == 122) {
		return "f11";
	} else if(key == 123) {
		return "f12";
	} else {
		return String.fromCodePoint(key).toLowerCase();
	}
};
iron_system_Keyboard.__super__ = iron_system_VirtualInput;
iron_system_Keyboard.prototype = $extend(iron_system_VirtualInput.prototype,{
	endFrame: function() {
		if(this.keysFrame.length > 0) {
			var _g = 0;
			var _g1 = this.keysFrame;
			while(_g < _g1.length) {
				var s = _g1[_g];
				++_g;
				this.keysStarted.h[s] = false;
				this.keysReleased.h[s] = false;
			}
			this.keysFrame.splice(0,this.keysFrame.length);
		}
		if(kha_Scheduler.time() - this.repeatTime > 0.05) {
			this.repeatTime = kha_Scheduler.time();
			this.repeatKey = true;
		} else {
			this.repeatKey = false;
		}
	}
	,reset: function() {
		var _g = 0;
		var _g1 = iron_system_Keyboard.keys;
		while(_g < _g1.length) {
			var s = _g1[_g];
			++_g;
			this.keysDown.h[s] = false;
			this.keysStarted.h[s] = false;
			this.keysReleased.h[s] = false;
		}
		this.endFrame();
	}
	,down: function(key) {
		return this.keysDown.h[key];
	}
	,started: function(key) {
		return this.keysStarted.h[key];
	}
	,released: function(key) {
		return this.keysReleased.h[key];
	}
	,repeat: function(key) {
		if(!this.keysStarted.h[key]) {
			if(this.repeatKey) {
				return this.keysDown.h[key];
			} else {
				return false;
			}
		} else {
			return true;
		}
	}
	,downListener: function(code) {
		var s = iron_system_Keyboard.keyCode(code);
		this.keysFrame.push(s);
		this.keysStarted.h[s] = true;
		this.keysDown.h[s] = true;
		this.repeatTime = kha_Scheduler.time() + 0.4;
		this.downVirtual(s);
	}
	,upListener: function(code) {
		var s = iron_system_Keyboard.keyCode(code);
		this.keysFrame.push(s);
		this.keysReleased.h[s] = true;
		this.keysDown.h[s] = false;
		this.upVirtual(s);
	}
	,pressListener: function(char) {
	}
	,__class__: iron_system_Keyboard
});
var iron_system_GamepadStick = function() {
	this.movementY = 0.0;
	this.movementX = 0.0;
	this.moved = false;
	this.lastY = 0.0;
	this.lastX = 0.0;
	this.y = 0.0;
	this.x = 0.0;
};
$hxClasses["iron.system.GamepadStick"] = iron_system_GamepadStick;
iron_system_GamepadStick.__name__ = "iron.system.GamepadStick";
iron_system_GamepadStick.prototype = {
	__class__: iron_system_GamepadStick
};
var iron_system_Gamepad = function(i,virtual) {
	if(virtual == null) {
		virtual = false;
	}
	this.num = 0;
	this.connected = false;
	this.rightStick = new iron_system_GamepadStick();
	this.leftStick = new iron_system_GamepadStick();
	this.buttonsFrame = [];
	this.buttonsReleased = [];
	this.buttonsStarted = [];
	this.buttonsDown = [];
	iron_system_VirtualInput.call(this);
	var _g = 0;
	var _g1 = iron_system_Gamepad.buttons;
	while(_g < _g1.length) {
		++_g;
		this.buttonsDown.push(0.0);
		this.buttonsStarted.push(false);
		this.buttonsReleased.push(false);
	}
	this.num = i;
	this.reset();
	if(virtual) {
		this.connected = true;
	} else {
		this.connect();
	}
};
$hxClasses["iron.system.Gamepad"] = iron_system_Gamepad;
iron_system_Gamepad.__name__ = "iron.system.Gamepad";
iron_system_Gamepad.__super__ = iron_system_VirtualInput;
iron_system_Gamepad.prototype = $extend(iron_system_VirtualInput.prototype,{
	connect: function() {
		var gamepad = kha_input_Gamepad.get(this.num);
		if(gamepad == null) {
			return;
		}
		this.connected = true;
		gamepad.notify($bind(this,this.axisListener),$bind(this,this.buttonListener));
	}
	,endFrame: function() {
		if(this.buttonsFrame.length > 0) {
			var _g = 0;
			var _g1 = this.buttonsFrame;
			while(_g < _g1.length) {
				var i = _g1[_g];
				++_g;
				this.buttonsStarted[i] = false;
				this.buttonsReleased[i] = false;
			}
			this.buttonsFrame.splice(0,this.buttonsFrame.length);
		}
		this.leftStick.moved = false;
		this.leftStick.movementX = 0;
		this.leftStick.movementY = 0;
		this.rightStick.moved = false;
		this.rightStick.movementX = 0;
		this.rightStick.movementY = 0;
	}
	,reset: function() {
		var _g = 0;
		var _g1 = this.buttonsDown.length;
		while(_g < _g1) {
			var i = _g++;
			this.buttonsDown[i] = 0.0;
			this.buttonsStarted[i] = false;
			this.buttonsReleased[i] = false;
		}
		this.endFrame();
	}
	,axisListener: function(axis,value) {
		var stick = axis <= 1 ? this.leftStick : this.rightStick;
		if(axis == 0 || axis == 2) {
			stick.lastX = stick.x;
			stick.x = value;
			stick.movementX = stick.x - stick.lastX;
		} else if(axis == 1 || axis == 3) {
			stick.lastY = stick.y;
			stick.y = value;
			stick.movementY = stick.y - stick.lastY;
		}
		stick.moved = true;
	}
	,buttonListener: function(button,value) {
		this.buttonsFrame.push(button);
		this.buttonsDown[button] = value;
		if(value > 0) {
			this.buttonsStarted[button] = true;
		} else {
			this.buttonsReleased[button] = true;
		}
		if(value == 0.0) {
			this.upVirtual(iron_system_Gamepad.buttons[button]);
		} else if(value == 1.0) {
			this.downVirtual(iron_system_Gamepad.buttons[button]);
		}
	}
	,__class__: iron_system_Gamepad
});
var iron_system_Lz4 = function() { };
$hxClasses["iron.system.Lz4"] = iron_system_Lz4;
iron_system_Lz4.__name__ = "iron.system.Lz4";
iron_system_Lz4.encode = function(b) {
	var this1 = new Uint8Array(b.b.bufferValue);
	var iBuf = this1;
	var iLen = iBuf.length;
	if(iLen >= 2113929216) {
		haxe_Log.trace("LZ4 range error",{ fileName : "Sources/iron/system/Lz4.hx", lineNumber : 46, className : "iron.system.Lz4", methodName : "encode"});
		return null;
	}
	var lastMatchPos = iLen - 12;
	var lastLiteralPos = iLen - 5;
	if(iron_system_Lz4.hashTable == null) {
		var this1 = new Int32Array(65536);
		iron_system_Lz4.hashTable = this1;
	}
	var _g = 0;
	var _g1 = iron_system_Lz4.hashTable.length;
	while(_g < _g1) {
		var i = _g++;
		iron_system_Lz4.hashTable[i] = -65536;
	}
	var oLen = iLen > 2113929216 ? 0 : iLen + (iLen / 255 | 0) + 16;
	var this1 = new Uint8Array(oLen);
	var oBuf = this1;
	var iPos = 0;
	var oPos = 0;
	var anchorPos = 0;
	while(true) {
		var refPos = 0;
		var mOffset = 0;
		var sequence = iBuf[iPos] << 8 | iBuf[iPos + 1] << 16 | iBuf[iPos + 2] << 24;
		while(iPos <= lastMatchPos) {
			sequence = sequence >>> 8 | iBuf[iPos + 3] << 24;
			var hash = (sequence * 40503 & 65535) + (sequence * 31153 >>> 16) & 65535;
			refPos = iron_system_Lz4.hashTable[hash];
			iron_system_Lz4.hashTable[hash] = iPos;
			mOffset = iPos - refPos;
			if(mOffset < 65536 && iBuf[refPos] == (sequence & 255) && iBuf[refPos + 1] == (sequence >>> 8 & 255) && iBuf[refPos + 2] == (sequence >>> 16 & 255) && iBuf[refPos + 3] == (sequence >>> 24 & 255)) {
				break;
			}
			++iPos;
		}
		if(iPos > lastMatchPos) {
			break;
		}
		var lLen = iPos - anchorPos;
		var mLen = iPos;
		iPos += 4;
		refPos += 4;
		while(iPos < lastLiteralPos && iBuf[iPos] == iBuf[refPos]) {
			++iPos;
			++refPos;
		}
		mLen = iPos - mLen;
		var token = mLen < 19 ? mLen - 4 : 15;
		if(lLen >= 15) {
			oBuf[oPos++] = 240 | token;
			var l = lLen - 15;
			while(l >= 255) {
				oBuf[oPos++] = 255;
				l -= 255;
			}
			oBuf[oPos++] = l;
		} else {
			oBuf[oPos++] = lLen << 4 | token;
		}
		while(lLen-- > 0) oBuf[oPos++] = iBuf[anchorPos++];
		if(mLen == 0) {
			break;
		}
		oBuf[oPos] = mOffset;
		oBuf[oPos + 1] = mOffset >>> 8;
		oPos += 2;
		if(mLen >= 19) {
			var l1 = mLen - 19;
			while(l1 >= 255) {
				oBuf[oPos++] = 255;
				l1 -= 255;
			}
			oBuf[oPos++] = l1;
		}
		anchorPos = iPos;
	}
	var lLen = iLen - anchorPos;
	if(lLen >= 15) {
		oBuf[oPos++] = 240;
		var l = lLen - 15;
		while(l >= 255) {
			oBuf[oPos++] = 255;
			l -= 255;
		}
		oBuf[oPos++] = l;
	} else {
		oBuf[oPos++] = lLen << 4;
	}
	while(lLen-- > 0) oBuf[oPos++] = iBuf[anchorPos++];
	return haxe_io_Bytes.ofData(oBuf.buffer.slice(0,oPos));
};
iron_system_Lz4.decode = function(b,oLen) {
	var this1 = new Uint8Array(b.b.bufferValue);
	var iBuf = this1;
	var iLen = iBuf.length;
	var this1 = new Uint8Array(oLen);
	var oBuf = this1;
	var iPos = 0;
	var oPos = 0;
	while(iPos < iLen) {
		var token = iBuf[iPos++];
		var clen = token >>> 4;
		if(clen != 0) {
			if(clen == 15) {
				var l = 0;
				while(true) {
					l = iBuf[iPos++];
					if(l != 255) {
						break;
					}
					clen += 255;
				}
				clen += l;
			}
			var end = iPos + clen;
			while(iPos < end) oBuf[oPos++] = iBuf[iPos++];
			if(iPos == iLen) {
				break;
			}
		}
		var mOffset = iBuf[iPos] | iBuf[iPos + 1] << 8;
		if(mOffset == 0 || mOffset > oPos) {
			return null;
		}
		iPos += 2;
		clen = (token & 15) + 4;
		if(clen == 19) {
			var l1 = 0;
			while(true) {
				l1 = iBuf[iPos++];
				if(l1 != 255) {
					break;
				}
				clen += 255;
			}
			clen += l1;
		}
		var mPos = oPos - mOffset;
		var end1 = oPos + clen;
		while(oPos < end1) oBuf[oPos++] = oBuf[mPos++];
	}
	return haxe_io_Bytes.ofData(oBuf.buffer);
};
var js_lib__$ArrayBuffer_ArrayBufferCompat = function() { };
$hxClasses["js.lib._ArrayBuffer.ArrayBufferCompat"] = js_lib__$ArrayBuffer_ArrayBufferCompat;
js_lib__$ArrayBuffer_ArrayBufferCompat.__name__ = "js.lib._ArrayBuffer.ArrayBufferCompat";
js_lib__$ArrayBuffer_ArrayBufferCompat.sliceImpl = function(begin,end) {
	var u = new Uint8Array(this,begin,end == null ? null : end - begin);
	var resultArray = new Uint8Array(u.byteLength);
	resultArray.set(u);
	return resultArray.buffer;
};
var kha_Assets = function() { };
$hxClasses["kha.Assets"] = kha_Assets;
kha_Assets.__name__ = "kha.Assets";
kha_Assets.loadImageFromPath = function(path,readable,done) {
	kha_LoaderImpl.loadImageFromDescription({ files : [path], readable : readable},done);
};
kha_Assets.loadBlobFromPath = function(path,done) {
	kha_LoaderImpl.loadBlobFromDescription({ files : [path]},done);
};
kha_Assets.loadFontFromPath = function(path,done) {
	kha_LoaderImpl.loadFontFromDescription({ files : [path]},done);
};
var kha_Display = function(num,isPrimary) {
	this.num = num;
	this.isPrimary = isPrimary;
};
$hxClasses["kha.Display"] = kha_Display;
kha_Display.__name__ = "kha.Display";
kha_Display.__properties__ = {get_primary:"get_primary"};
kha_Display.init = function() {
	if(kha_Display.displays.length > 0) {
		return;
	}
	var _g = 0;
	var _g1 = Krom.displayCount();
	while(_g < _g1) {
		var i = _g++;
		kha_Display.displays.push(new kha_Display(i,Krom.displayIsPrimary(i)));
	}
};
kha_Display.get_primary = function() {
	kha_Display.init();
	var _g = 0;
	var _g1 = kha_Display.displays;
	while(_g < _g1.length) {
		var display = _g1[_g];
		++_g;
		if(display.isPrimary) {
			return display;
		}
	}
	return null;
};
kha_Display.prototype = {
	get_width: function() {
		return Krom.displayWidth(this.num);
	}
	,get_height: function() {
		return Krom.displayHeight(this.num);
	}
	,get_frequency: function() {
		return Krom.displayFrequency(this.num);
	}
	,__class__: kha_Display
	,__properties__: {get_frequency:"get_frequency",get_height:"get_height",get_width:"get_width"}
};
var kha_Framebuffer = function($window,g2,g4) {
	this.window = $window;
	this.graphics2 = g2;
	this.graphics4 = g4;
};
$hxClasses["kha.Framebuffer"] = kha_Framebuffer;
kha_Framebuffer.__name__ = "kha.Framebuffer";
kha_Framebuffer.__interfaces__ = [kha_Canvas];
kha_Framebuffer.prototype = {
	init: function(g2,g4) {
		this.graphics2 = g2;
		this.graphics4 = g4;
	}
	,get_g2: function() {
		return this.graphics2;
	}
	,get_g4: function() {
		return this.graphics4;
	}
	,get_width: function() {
		return kha_System.windowWidth(this.window);
	}
	,get_height: function() {
		return kha_System.windowHeight(this.window);
	}
	,__class__: kha_Framebuffer
	,__properties__: {get_height:"get_height",get_width:"get_width",get_g4:"get_g4",get_g2:"get_g2"}
};
var kha_FramebufferOptions = function(frequency,verticalSync,colorBufferBits,depthBufferBits,stencilBufferBits,samplesPerPixel) {
	if(samplesPerPixel == null) {
		samplesPerPixel = 1;
	}
	if(stencilBufferBits == null) {
		stencilBufferBits = 8;
	}
	if(depthBufferBits == null) {
		depthBufferBits = 16;
	}
	if(colorBufferBits == null) {
		colorBufferBits = 32;
	}
	if(verticalSync == null) {
		verticalSync = true;
	}
	if(frequency == null) {
		frequency = 60;
	}
	this.samplesPerPixel = 1;
	this.colorBufferBits = 32;
	this.verticalSync = true;
	this.frequency = 60;
	this.frequency = frequency;
	this.verticalSync = verticalSync;
	this.colorBufferBits = colorBufferBits;
	this.samplesPerPixel = samplesPerPixel;
};
$hxClasses["kha.FramebufferOptions"] = kha_FramebufferOptions;
kha_FramebufferOptions.__name__ = "kha.FramebufferOptions";
kha_FramebufferOptions.prototype = {
	__class__: kha_FramebufferOptions
};
var kha_AlignedQuad = function() {
};
$hxClasses["kha.AlignedQuad"] = kha_AlignedQuad;
kha_AlignedQuad.__name__ = "kha.AlignedQuad";
kha_AlignedQuad.prototype = {
	__class__: kha_AlignedQuad
};
var kha_KravurImage = function(size,ascent,descent,lineGap,width,height,chars,pixels) {
	this.mySize = size;
	this.width = width;
	this.height = height;
	this.chars = chars;
	this.baseline = ascent;
	var _g = 0;
	while(_g < chars.length) chars[_g++].yoff += this.baseline;
	this.texture = kha_Image.fromBytes(pixels.toBytes(),width,height,1);
};
$hxClasses["kha.KravurImage"] = kha_KravurImage;
kha_KravurImage.__name__ = "kha.KravurImage";
kha_KravurImage.prototype = {
	getTexture: function() {
		return this.texture;
	}
	,getBakedQuad: function(q,char_index,xpos,ypos) {
		if(char_index >= this.chars.length) {
			return null;
		}
		var ipw = 1.0 / this.width;
		var iph = 1.0 / this.height;
		var b = this.chars[char_index];
		if(b == null) {
			return null;
		}
		var round_x = Math.round(xpos + b.xoff);
		var round_y = Math.round(ypos + b.yoff);
		q.x0 = round_x;
		q.y0 = round_y;
		q.x1 = round_x + b.x1 - b.x0;
		q.y1 = round_y + b.y1 - b.y0;
		q.s0 = b.x0 * ipw;
		q.t0 = b.y0 * iph;
		q.s1 = b.x1 * ipw;
		q.t1 = b.y1 * iph;
		q.xadvance = b.xadvance;
		return q;
	}
	,getCharWidth: function(charIndex) {
		if(this.chars.length == 0) {
			return 0;
		}
		var offset = kha_KravurImage.charBlocks[0];
		if(charIndex < offset) {
			return this.chars[0].xadvance;
		}
		var _g = 1;
		var _g1 = kha_KravurImage.charBlocks.length / 2 | 0;
		while(_g < _g1) {
			var i = _g++;
			var start = kha_KravurImage.charBlocks[i * 2];
			if(charIndex > start - 1) {
				offset += start - 1 - kha_KravurImage.charBlocks[i * 2 - 1];
			}
		}
		if(charIndex - offset >= this.chars.length) {
			return this.chars[0].xadvance;
		}
		return this.chars[charIndex - offset].xadvance;
	}
	,getHeight: function() {
		return this.mySize;
	}
	,stringWidth: function(str) {
		var width = 0;
		var _g = 0;
		var _g1 = str.length;
		while(_g < _g1) width += this.getCharWidth(HxOverrides.cca(str,_g++));
		return width;
	}
	,__class__: kha_KravurImage
};
var kha_Kravur = function(blob,fontIndex) {
	if(fontIndex == null) {
		fontIndex = 0;
	}
	this.images = new haxe_ds_IntMap();
	this.blob = blob;
	this.fontIndex = fontIndex;
};
$hxClasses["kha.Kravur"] = kha_Kravur;
kha_Kravur.__name__ = "kha.Kravur";
kha_Kravur.prototype = {
	_get: function(fontSize) {
		var glyphs = kha_graphics2_Graphics.fontGlyphs;
		if(glyphs != this.oldGlyphs) {
			this.oldGlyphs = glyphs;
			kha_KravurImage.charBlocks = [glyphs[0]];
			var nextChar = kha_KravurImage.charBlocks[0] + 1;
			var _g = 1;
			var _g1 = glyphs.length;
			while(_g < _g1) {
				var i = _g++;
				if(glyphs[i] != nextChar) {
					kha_KravurImage.charBlocks.push(glyphs[i - 1]);
					kha_KravurImage.charBlocks.push(glyphs[i]);
					nextChar = glyphs[i] + 1;
				} else {
					++nextChar;
				}
			}
			kha_KravurImage.charBlocks.push(glyphs[glyphs.length - 1]);
		}
		var imageIndex = this.fontIndex * 10000000 + fontSize * 10000 + glyphs.length;
		if(!this.images.h.hasOwnProperty(imageIndex)) {
			var width = 64;
			var height = 32;
			var baked = new Array(glyphs.length);
			var _g = 0;
			var _g1 = baked.length;
			while(_g < _g1) baked[_g++] = new kha_graphics2_truetype_Stbtt_$bakedchar();
			var pixels = null;
			var offset = kha_graphics2_truetype_StbTruetype.stbtt_GetFontOffsetForIndex(this.blob,this.fontIndex);
			if(offset == -1) {
				offset = kha_graphics2_truetype_StbTruetype.stbtt_GetFontOffsetForIndex(this.blob,0);
			}
			var status = -1;
			while(status <= 0) {
				if(height < width) {
					height *= 2;
				} else {
					width *= 2;
				}
				pixels = kha_Blob.alloc(width * height);
				status = kha_graphics2_truetype_StbTruetype.stbtt_BakeFontBitmap(this.blob,offset,fontSize,pixels,width,height,glyphs,baked);
			}
			var info = new kha_graphics2_truetype_Stbtt_$fontinfo();
			kha_graphics2_truetype_StbTruetype.stbtt_InitFont(info,this.blob,offset);
			var metrics = kha_graphics2_truetype_StbTruetype.stbtt_GetFontVMetrics(info);
			var scale = kha_graphics2_truetype_StbTruetype.stbtt_ScaleForPixelHeight(info,fontSize);
			var image = new kha_KravurImage(fontSize | 0,Math.round(metrics.ascent * scale),Math.round(metrics.descent * scale),Math.round(metrics.lineGap * scale),width,height,baked,pixels);
			this.images.h[imageIndex] = image;
			return image;
		}
		return this.images.h[imageIndex];
	}
	,height: function(fontSize) {
		return this._get(fontSize).getHeight();
	}
	,width: function(fontSize,str) {
		return this._get(fontSize).stringWidth(str);
	}
	,setFontIndex: function(fontIndex) {
		this.fontIndex = fontIndex;
	}
	,getFontNames: function() {
		var info = new kha_graphics2_truetype_Stbtt_$fontinfo();
		info.data = this.blob;
		var count = kha_graphics2_truetype_StbTruetype.stbtt_GetNumberOfFonts(this.blob);
		var fontNames = new Array(count);
		var _g = 0;
		while(_g < count) {
			var i = _g++;
			info.fontstart = kha_graphics2_truetype_StbTruetype.stbtt_GetFontOffsetForIndex(this.blob,i);
			var fontName = kha_graphics2_truetype_StbTruetype.stbtt_GetFontNameString(info,1,0,0,4);
			if(fontName == null) {
				fontName = kha_graphics2_truetype_StbTruetype.stbtt_GetFontNameString(info,3,1,1033,4);
			}
			fontNames[i] = fontName;
		}
		return fontNames;
	}
	,clone: function() {
		return new kha_Kravur(this.blob,this.fontIndex);
	}
	,unload: function() {
		this.blob = null;
		this.images = null;
	}
	,__class__: kha_Kravur
};
var kha_LoaderImpl = function() { };
$hxClasses["kha.LoaderImpl"] = kha_LoaderImpl;
kha_LoaderImpl.__name__ = "kha.LoaderImpl";
kha_LoaderImpl.loadImageFromDescription = function(desc,done) {
	var readable = Object.prototype.hasOwnProperty.call(desc,"readable") && desc.readable;
	done(kha_Image._fromTexture(Krom.loadImage(desc.files[0],readable)));
};
kha_LoaderImpl.loadBlobFromDescription = function(desc,done) {
	done(new kha_Blob(haxe_io_Bytes.ofData(Krom.loadBlob(desc.files[0]))));
};
kha_LoaderImpl.loadFontFromDescription = function(desc,done) {
	kha_LoaderImpl.loadBlobFromDescription(desc,function(blob) {
		done(new kha_Kravur(blob));
	});
};
var kha_TimeTask = function() {
};
$hxClasses["kha.TimeTask"] = kha_TimeTask;
kha_TimeTask.__name__ = "kha.TimeTask";
kha_TimeTask.prototype = {
	__class__: kha_TimeTask
};
var kha_FrameTask = function(task,priority,id) {
	this.task = task;
	this.priority = priority;
	this.id = id;
	this.active = true;
	this.paused = false;
};
$hxClasses["kha.FrameTask"] = kha_FrameTask;
kha_FrameTask.__name__ = "kha.FrameTask";
kha_FrameTask.prototype = {
	__class__: kha_FrameTask
};
var kha_Shaders = function() { };
$hxClasses["kha.Shaders"] = kha_Shaders;
kha_Shaders.__name__ = "kha.Shaders";
kha_Shaders.init = function() {
	var blobs = [];
	blobs.push(kha_Blob.fromBytes(haxe_Unserializer.run(Reflect.field(kha_Shaders,"Gizmo_overlay_fragData" + 0))));
	kha_Shaders.Gizmo_overlay_frag = new kha_graphics4_FragmentShader(blobs,["Gizmo_overlay.frag.d3d11"]);
	var blobs = [];
	blobs.push(kha_Blob.fromBytes(haxe_Unserializer.run(Reflect.field(kha_Shaders,"Gizmo_overlay_vertData" + 0))));
	kha_Shaders.Gizmo_overlay_vert = new kha_graphics4_VertexShader(blobs,["Gizmo_overlay.vert.d3d11"]);
	var blobs = [];
	blobs.push(kha_Blob.fromBytes(haxe_Unserializer.run(Reflect.field(kha_Shaders,"Material2_mesh_fragData" + 0))));
	kha_Shaders.Material2_mesh_frag = new kha_graphics4_FragmentShader(blobs,["Material2_mesh.frag.d3d11"]);
	var blobs = [];
	blobs.push(kha_Blob.fromBytes(haxe_Unserializer.run(Reflect.field(kha_Shaders,"Material_mesh_fragData" + 0))));
	kha_Shaders.Material_mesh_frag = new kha_graphics4_FragmentShader(blobs,["Material_mesh.frag.d3d11"]);
	var blobs = [];
	blobs.push(kha_Blob.fromBytes(haxe_Unserializer.run(Reflect.field(kha_Shaders,"Material_mesh_vertData" + 0))));
	kha_Shaders.Material_mesh_vert = new kha_graphics4_VertexShader(blobs,["Material_mesh.vert.d3d11"]);
	var blobs = [];
	blobs.push(kha_Blob.fromBytes(haxe_Unserializer.run(Reflect.field(kha_Shaders,"armdefault_mesh_fragData" + 0))));
	kha_Shaders.armdefault_mesh_frag = new kha_graphics4_FragmentShader(blobs,["armdefault_mesh.frag.d3d11"]);
	var blobs = [];
	blobs.push(kha_Blob.fromBytes(haxe_Unserializer.run(Reflect.field(kha_Shaders,"armdefault_mesh_vertData" + 0))));
	kha_Shaders.armdefault_mesh_vert = new kha_graphics4_VertexShader(blobs,["armdefault_mesh.vert.d3d11"]);
	var blobs = [];
	blobs.push(kha_Blob.fromBytes(haxe_Unserializer.run(Reflect.field(kha_Shaders,"armdefault_voxel_fragData" + 0))));
	kha_Shaders.armdefault_voxel_frag = new kha_graphics4_FragmentShader(blobs,["armdefault_voxel.frag.d3d11"]);
	var blobs = [];
	blobs.push(kha_Blob.fromBytes(haxe_Unserializer.run(Reflect.field(kha_Shaders,"armdefault_voxel_geomData" + 0))));
	kha_Shaders.armdefault_voxel_geom = new kha_graphics4_GeometryShader(blobs,["armdefault_voxel.geom.d3d11"]);
	var blobs = [];
	blobs.push(kha_Blob.fromBytes(haxe_Unserializer.run(Reflect.field(kha_Shaders,"armdefault_voxel_vertData" + 0))));
	kha_Shaders.armdefault_voxel_vert = new kha_graphics4_VertexShader(blobs,["armdefault_voxel.vert.d3d11"]);
	var blobs = [];
	blobs.push(kha_Blob.fromBytes(haxe_Unserializer.run(Reflect.field(kha_Shaders,"bloom_pass_fragData" + 0))));
	kha_Shaders.bloom_pass_frag = new kha_graphics4_FragmentShader(blobs,["bloom_pass.frag.d3d11"]);
	var blobs = [];
	blobs.push(kha_Blob.fromBytes(haxe_Unserializer.run(Reflect.field(kha_Shaders,"blur_adaptive_pass_fragData" + 0))));
	kha_Shaders.blur_adaptive_pass_frag = new kha_graphics4_FragmentShader(blobs,["blur_adaptive_pass.frag.d3d11"]);
	var blobs = [];
	blobs.push(kha_Blob.fromBytes(haxe_Unserializer.run(Reflect.field(kha_Shaders,"blur_edge_pass_fragData" + 0))));
	kha_Shaders.blur_edge_pass_frag = new kha_graphics4_FragmentShader(blobs,["blur_edge_pass.frag.d3d11"]);
	var blobs = [];
	blobs.push(kha_Blob.fromBytes(haxe_Unserializer.run(Reflect.field(kha_Shaders,"blur_gaus_pass_fragData" + 0))));
	kha_Shaders.blur_gaus_pass_frag = new kha_graphics4_FragmentShader(blobs,["blur_gaus_pass.frag.d3d11"]);
	var blobs = [];
	blobs.push(kha_Blob.fromBytes(haxe_Unserializer.run(Reflect.field(kha_Shaders,"compositor_pass_fragData" + 0))));
	kha_Shaders.compositor_pass_frag = new kha_graphics4_FragmentShader(blobs,["compositor_pass.frag.d3d11"]);
	var blobs = [];
	blobs.push(kha_Blob.fromBytes(haxe_Unserializer.run(Reflect.field(kha_Shaders,"compositor_pass_vertData" + 0))));
	kha_Shaders.compositor_pass_vert = new kha_graphics4_VertexShader(blobs,["compositor_pass.vert.d3d11"]);
	var blobs = [];
	blobs.push(kha_Blob.fromBytes(haxe_Unserializer.run(Reflect.field(kha_Shaders,"copy_mrt3_pass_fragData" + 0))));
	kha_Shaders.copy_mrt3_pass_frag = new kha_graphics4_FragmentShader(blobs,["copy_mrt3_pass.frag.d3d11"]);
	var blobs = [];
	blobs.push(kha_Blob.fromBytes(haxe_Unserializer.run(Reflect.field(kha_Shaders,"cursor_fragData" + 0))));
	kha_Shaders.cursor_frag = new kha_graphics4_FragmentShader(blobs,["cursor.frag.d3d11"]);
	var blobs = [];
	blobs.push(kha_Blob.fromBytes(haxe_Unserializer.run(Reflect.field(kha_Shaders,"cursor_vertData" + 0))));
	kha_Shaders.cursor_vert = new kha_graphics4_VertexShader(blobs,["cursor.vert.d3d11"]);
	var blobs = [];
	blobs.push(kha_Blob.fromBytes(haxe_Unserializer.run(Reflect.field(kha_Shaders,"deferred_light_fragData" + 0))));
	kha_Shaders.deferred_light_frag = new kha_graphics4_FragmentShader(blobs,["deferred_light.frag.d3d11"]);
	var blobs = [];
	blobs.push(kha_Blob.fromBytes(haxe_Unserializer.run(Reflect.field(kha_Shaders,"deferred_light_voxel_fragData" + 0))));
	kha_Shaders.deferred_light_voxel_frag = new kha_graphics4_FragmentShader(blobs,["deferred_light_voxel.frag.d3d11"]);
	var blobs = [];
	blobs.push(kha_Blob.fromBytes(haxe_Unserializer.run(Reflect.field(kha_Shaders,"deferred_light_voxel_vertData" + 0))));
	kha_Shaders.deferred_light_voxel_vert = new kha_graphics4_VertexShader(blobs,["deferred_light_voxel.vert.d3d11"]);
	var blobs = [];
	blobs.push(kha_Blob.fromBytes(haxe_Unserializer.run(Reflect.field(kha_Shaders,"dilate_pass_fragData" + 0))));
	kha_Shaders.dilate_pass_frag = new kha_graphics4_FragmentShader(blobs,["dilate_pass.frag.d3d11"]);
	var blobs = [];
	blobs.push(kha_Blob.fromBytes(haxe_Unserializer.run(Reflect.field(kha_Shaders,"histogram_pass_fragData" + 0))));
	kha_Shaders.histogram_pass_frag = new kha_graphics4_FragmentShader(blobs,["histogram_pass.frag.d3d11"]);
	var blobs = [];
	blobs.push(kha_Blob.fromBytes(haxe_Unserializer.run(Reflect.field(kha_Shaders,"layer_copy_bgra_fragData" + 0))));
	kha_Shaders.layer_copy_bgra_frag = new kha_graphics4_FragmentShader(blobs,["layer_copy_bgra.frag.d3d11"]);
	var blobs = [];
	blobs.push(kha_Blob.fromBytes(haxe_Unserializer.run(Reflect.field(kha_Shaders,"layer_copy_fragData" + 0))));
	kha_Shaders.layer_copy_frag = new kha_graphics4_FragmentShader(blobs,["layer_copy.frag.d3d11"]);
	var blobs = [];
	blobs.push(kha_Blob.fromBytes(haxe_Unserializer.run(Reflect.field(kha_Shaders,"layer_invert_fragData" + 0))));
	kha_Shaders.layer_invert_frag = new kha_graphics4_FragmentShader(blobs,["layer_invert.frag.d3d11"]);
	var blobs = [];
	blobs.push(kha_Blob.fromBytes(haxe_Unserializer.run(Reflect.field(kha_Shaders,"layer_merge_fragData" + 0))));
	kha_Shaders.layer_merge_frag = new kha_graphics4_FragmentShader(blobs,["layer_merge.frag.d3d11"]);
	var blobs = [];
	blobs.push(kha_Blob.fromBytes(haxe_Unserializer.run(Reflect.field(kha_Shaders,"layer_merge_vertData" + 0))));
	kha_Shaders.layer_merge_vert = new kha_graphics4_VertexShader(blobs,["layer_merge.vert.d3d11"]);
	var blobs = [];
	blobs.push(kha_Blob.fromBytes(haxe_Unserializer.run(Reflect.field(kha_Shaders,"layer_view_fragData" + 0))));
	kha_Shaders.layer_view_frag = new kha_graphics4_FragmentShader(blobs,["layer_view.frag.d3d11"]);
	var blobs = [];
	blobs.push(kha_Blob.fromBytes(haxe_Unserializer.run(Reflect.field(kha_Shaders,"layer_view_vertData" + 0))));
	kha_Shaders.layer_view_vert = new kha_graphics4_VertexShader(blobs,["layer_view.vert.d3d11"]);
	var blobs = [];
	blobs.push(kha_Blob.fromBytes(haxe_Unserializer.run(Reflect.field(kha_Shaders,"line_fragData" + 0))));
	kha_Shaders.line_frag = new kha_graphics4_FragmentShader(blobs,["line.frag.d3d11"]);
	var blobs = [];
	blobs.push(kha_Blob.fromBytes(haxe_Unserializer.run(Reflect.field(kha_Shaders,"line_vertData" + 0))));
	kha_Shaders.line_vert = new kha_graphics4_VertexShader(blobs,["line.vert.d3d11"]);
	var blobs = [];
	blobs.push(kha_Blob.fromBytes(haxe_Unserializer.run(Reflect.field(kha_Shaders,"mask_merge_fragData" + 0))));
	kha_Shaders.mask_merge_frag = new kha_graphics4_FragmentShader(blobs,["mask_merge.frag.d3d11"]);
	var blobs = [];
	blobs.push(kha_Blob.fromBytes(haxe_Unserializer.run(Reflect.field(kha_Shaders,"painter_colored_fragData" + 0))));
	kha_Shaders.painter_colored_frag = new kha_graphics4_FragmentShader(blobs,["painter-colored.frag.d3d11"]);
	var blobs = [];
	blobs.push(kha_Blob.fromBytes(haxe_Unserializer.run(Reflect.field(kha_Shaders,"painter_colored_vertData" + 0))));
	kha_Shaders.painter_colored_vert = new kha_graphics4_VertexShader(blobs,["painter-colored.vert.d3d11"]);
	var blobs = [];
	blobs.push(kha_Blob.fromBytes(haxe_Unserializer.run(Reflect.field(kha_Shaders,"painter_image_fragData" + 0))));
	kha_Shaders.painter_image_frag = new kha_graphics4_FragmentShader(blobs,["painter-image.frag.d3d11"]);
	var blobs = [];
	blobs.push(kha_Blob.fromBytes(haxe_Unserializer.run(Reflect.field(kha_Shaders,"painter_image_vertData" + 0))));
	kha_Shaders.painter_image_vert = new kha_graphics4_VertexShader(blobs,["painter-image.vert.d3d11"]);
	var blobs = [];
	blobs.push(kha_Blob.fromBytes(haxe_Unserializer.run(Reflect.field(kha_Shaders,"painter_text_fragData" + 0))));
	kha_Shaders.painter_text_frag = new kha_graphics4_FragmentShader(blobs,["painter-text.frag.d3d11"]);
	var blobs = [];
	blobs.push(kha_Blob.fromBytes(haxe_Unserializer.run(Reflect.field(kha_Shaders,"painter_text_vertData" + 0))));
	kha_Shaders.painter_text_vert = new kha_graphics4_VertexShader(blobs,["painter-text.vert.d3d11"]);
	var blobs = [];
	blobs.push(kha_Blob.fromBytes(haxe_Unserializer.run(Reflect.field(kha_Shaders,"painter_video_fragData" + 0))));
	kha_Shaders.painter_video_frag = new kha_graphics4_FragmentShader(blobs,["painter-video.frag.d3d11"]);
	var blobs = [];
	blobs.push(kha_Blob.fromBytes(haxe_Unserializer.run(Reflect.field(kha_Shaders,"painter_video_vertData" + 0))));
	kha_Shaders.painter_video_vert = new kha_graphics4_VertexShader(blobs,["painter-video.vert.d3d11"]);
	var blobs = [];
	blobs.push(kha_Blob.fromBytes(haxe_Unserializer.run(Reflect.field(kha_Shaders,"pass_copy_fragData" + 0))));
	kha_Shaders.pass_copy_frag = new kha_graphics4_FragmentShader(blobs,["pass_copy.frag.d3d11"]);
	var blobs = [];
	blobs.push(kha_Blob.fromBytes(haxe_Unserializer.run(Reflect.field(kha_Shaders,"pass_vertData" + 0))));
	kha_Shaders.pass_vert = new kha_graphics4_VertexShader(blobs,["pass.vert.d3d11"]);
	var blobs = [];
	blobs.push(kha_Blob.fromBytes(haxe_Unserializer.run(Reflect.field(kha_Shaders,"pass_viewray2_vertData" + 0))));
	kha_Shaders.pass_viewray2_vert = new kha_graphics4_VertexShader(blobs,["pass_viewray2.vert.d3d11"]);
	var blobs = [];
	blobs.push(kha_Blob.fromBytes(haxe_Unserializer.run(Reflect.field(kha_Shaders,"pass_viewray_vertData" + 0))));
	kha_Shaders.pass_viewray_vert = new kha_graphics4_VertexShader(blobs,["pass_viewray.vert.d3d11"]);
	var blobs = [];
	blobs.push(kha_Blob.fromBytes(haxe_Unserializer.run(Reflect.field(kha_Shaders,"prefilter_envmap_fragData" + 0))));
	kha_Shaders.prefilter_envmap_frag = new kha_graphics4_FragmentShader(blobs,["prefilter_envmap.frag.d3d11"]);
	var blobs = [];
	blobs.push(kha_Blob.fromBytes(haxe_Unserializer.run(Reflect.field(kha_Shaders,"smaa_blend_weight_fragData" + 0))));
	kha_Shaders.smaa_blend_weight_frag = new kha_graphics4_FragmentShader(blobs,["smaa_blend_weight.frag.d3d11"]);
	var blobs = [];
	blobs.push(kha_Blob.fromBytes(haxe_Unserializer.run(Reflect.field(kha_Shaders,"smaa_blend_weight_vertData" + 0))));
	kha_Shaders.smaa_blend_weight_vert = new kha_graphics4_VertexShader(blobs,["smaa_blend_weight.vert.d3d11"]);
	var blobs = [];
	blobs.push(kha_Blob.fromBytes(haxe_Unserializer.run(Reflect.field(kha_Shaders,"smaa_edge_detect_fragData" + 0))));
	kha_Shaders.smaa_edge_detect_frag = new kha_graphics4_FragmentShader(blobs,["smaa_edge_detect.frag.d3d11"]);
	var blobs = [];
	blobs.push(kha_Blob.fromBytes(haxe_Unserializer.run(Reflect.field(kha_Shaders,"smaa_edge_detect_vertData" + 0))));
	kha_Shaders.smaa_edge_detect_vert = new kha_graphics4_VertexShader(blobs,["smaa_edge_detect.vert.d3d11"]);
	var blobs = [];
	blobs.push(kha_Blob.fromBytes(haxe_Unserializer.run(Reflect.field(kha_Shaders,"smaa_neighborhood_blend_fragData" + 0))));
	kha_Shaders.smaa_neighborhood_blend_frag = new kha_graphics4_FragmentShader(blobs,["smaa_neighborhood_blend.frag.d3d11"]);
	var blobs = [];
	blobs.push(kha_Blob.fromBytes(haxe_Unserializer.run(Reflect.field(kha_Shaders,"smaa_neighborhood_blend_vertData" + 0))));
	kha_Shaders.smaa_neighborhood_blend_vert = new kha_graphics4_VertexShader(blobs,["smaa_neighborhood_blend.vert.d3d11"]);
	var blobs = [];
	blobs.push(kha_Blob.fromBytes(haxe_Unserializer.run(Reflect.field(kha_Shaders,"ssgi_pass_fragData" + 0))));
	kha_Shaders.ssgi_pass_frag = new kha_graphics4_FragmentShader(blobs,["ssgi_pass.frag.d3d11"]);
	var blobs = [];
	blobs.push(kha_Blob.fromBytes(haxe_Unserializer.run(Reflect.field(kha_Shaders,"ssr_pass_fragData" + 0))));
	kha_Shaders.ssr_pass_frag = new kha_graphics4_FragmentShader(blobs,["ssr_pass.frag.d3d11"]);
	var blobs = [];
	blobs.push(kha_Blob.fromBytes(haxe_Unserializer.run(Reflect.field(kha_Shaders,"supersample_resolve_fragData" + 0))));
	kha_Shaders.supersample_resolve_frag = new kha_graphics4_FragmentShader(blobs,["supersample_resolve.frag.d3d11"]);
	var blobs = [];
	blobs.push(kha_Blob.fromBytes(haxe_Unserializer.run(Reflect.field(kha_Shaders,"taa_pass_fragData" + 0))));
	kha_Shaders.taa_pass_frag = new kha_graphics4_FragmentShader(blobs,["taa_pass.frag.d3d11"]);
	var blobs = [];
	blobs.push(kha_Blob.fromBytes(haxe_Unserializer.run(Reflect.field(kha_Shaders,"world_pass_fragData" + 0))));
	kha_Shaders.world_pass_frag = new kha_graphics4_FragmentShader(blobs,["world_pass.frag.d3d11"]);
	var blobs = [];
	blobs.push(kha_Blob.fromBytes(haxe_Unserializer.run(Reflect.field(kha_Shaders,"world_pass_vertData" + 0))));
	kha_Shaders.world_pass_vert = new kha_graphics4_VertexShader(blobs,["world_pass.vert.d3d11"]);
};
var kha_SystemOptions = function(title,width,height,$window,framebuffer) {
	if(height == null) {
		height = -1;
	}
	if(width == null) {
		width = -1;
	}
	if(title == null) {
		title = "Kha";
	}
	this.framebuffer = null;
	this.window = null;
	this.height = -1;
	this.width = -1;
	this.title = "Kha";
	this.title = title;
	this.window = $window == null ? new kha_WindowOptions(null,-1,-1,800,600,-1,true,null,0) : $window;
	if(width > 0) {
		this.window.width = width;
		this.width = width;
	} else {
		this.width = this.window.width;
	}
	if(height > 0) {
		this.window.height = height;
		this.height = height;
	} else {
		this.height = this.window.height;
	}
	if(this.window.title == null) {
		this.window.title = title;
	}
	this.framebuffer = framebuffer == null ? new kha_FramebufferOptions(60,true,32,16,8,1) : framebuffer;
};
$hxClasses["kha.SystemOptions"] = kha_SystemOptions;
kha_SystemOptions.__name__ = "kha.SystemOptions";
kha_SystemOptions.prototype = {
	__class__: kha_SystemOptions
};
var kha_System = function() { };
$hxClasses["kha.System"] = kha_System;
kha_System.__name__ = "kha.System";
kha_System.__properties__ = {get_systemId:"get_systemId",get_time:"get_time"};
kha_System.start = function(options,callback) {
	kha_SystemImpl.init(options,callback);
};
kha_System.notifyOnFrames = function(listener) {
	kha_System.renderListeners.push(listener);
};
kha_System.notifyOnApplicationState = function(foregroundListener,resumeListener,pauseListener,backgroundListener,shutdownListener) {
	if(foregroundListener != null) {
		kha_System.foregroundListeners.push(foregroundListener);
	}
	if(resumeListener != null) {
		kha_System.resumeListeners.push(resumeListener);
	}
	if(pauseListener != null) {
		kha_System.pauseListeners.push(pauseListener);
	}
	if(backgroundListener != null) {
		kha_System.backgroundListeners.push(backgroundListener);
	}
	if(shutdownListener != null) {
		kha_System.shutdownListeners.push(shutdownListener);
	}
};
kha_System.notifyOnDropFiles = function(dropFilesListener) {
	kha_System.dropFilesListeners.push(dropFilesListener);
};
kha_System.notifyOnCutCopyPaste = function(cutListener,copyListener,pasteListener) {
	kha_System.cutListener = cutListener;
	kha_System.copyListener = copyListener;
	kha_System.pasteListener = pasteListener;
};
kha_System.render = function(framebuffers) {
	var _g = 0;
	var _g1 = kha_System.renderListeners;
	while(_g < _g1.length) _g1[_g++](framebuffers);
};
kha_System.foreground = function() {
	var _g = 0;
	var _g1 = kha_System.foregroundListeners;
	while(_g < _g1.length) _g1[_g++]();
};
kha_System.resume = function() {
	var _g = 0;
	var _g1 = kha_System.resumeListeners;
	while(_g < _g1.length) _g1[_g++]();
};
kha_System.pause = function() {
	var _g = 0;
	var _g1 = kha_System.pauseListeners;
	while(_g < _g1.length) _g1[_g++]();
};
kha_System.background = function() {
	var _g = 0;
	var _g1 = kha_System.backgroundListeners;
	while(_g < _g1.length) _g1[_g++]();
};
kha_System.shutdown = function() {
	var _g = 0;
	var _g1 = kha_System.shutdownListeners;
	while(_g < _g1.length) _g1[_g++]();
};
kha_System.dropFiles = function(filePath) {
	var _g = 0;
	var _g1 = kha_System.dropFilesListeners;
	while(_g < _g1.length) _g1[_g++](filePath);
};
kha_System.get_time = function() {
	return kha_SystemImpl.getTime();
};
kha_System.windowWidth = function($window) {
	if($window == null) {
		$window = 0;
	}
	return kha_Window.get($window).get_width();
};
kha_System.windowHeight = function($window) {
	if($window == null) {
		$window = 0;
	}
	return kha_Window.get_all()[$window].get_height();
};
kha_System.get_systemId = function() {
	return kha_SystemImpl.getSystemId();
};
kha_System.stop = function() {
	return kha_SystemImpl.requestShutdown();
};
var kha_SystemImpl = function() { };
$hxClasses["kha.SystemImpl"] = kha_SystemImpl;
kha_SystemImpl.__name__ = "kha.SystemImpl";
kha_SystemImpl.renderCallback = function() {
	kha_Scheduler.executeFrame();
	kha_System.render([kha_SystemImpl.framebuffer]);
};
kha_SystemImpl.dropFilesCallback = function(filePath) {
	kha_System.dropFiles(filePath);
};
kha_SystemImpl.copyCallback = function() {
	if(kha_System.copyListener != null) {
		return kha_System.copyListener();
	} else {
		return null;
	}
};
kha_SystemImpl.cutCallback = function() {
	if(kha_System.cutListener != null) {
		return kha_System.cutListener();
	} else {
		return null;
	}
};
kha_SystemImpl.pasteCallback = function(data) {
	if(kha_System.pasteListener != null) {
		kha_System.pasteListener(data);
	}
};
kha_SystemImpl.foregroundCallback = function() {
	kha_System.foreground();
};
kha_SystemImpl.resumeCallback = function() {
	kha_System.resume();
};
kha_SystemImpl.pauseCallback = function() {
	kha_System.pause();
};
kha_SystemImpl.backgroundCallback = function() {
	kha_System.background();
};
kha_SystemImpl.shutdownCallback = function() {
	kha_System.shutdown();
};
kha_SystemImpl.keyboardDownCallback = function(code) {
	kha_SystemImpl.keyboard.sendDownEvent(code);
};
kha_SystemImpl.keyboardUpCallback = function(code) {
	kha_SystemImpl.keyboard.sendUpEvent(code);
};
kha_SystemImpl.keyboardPressCallback = function(charCode) {
	kha_SystemImpl.keyboard.sendPressEvent(String.fromCodePoint(charCode));
};
kha_SystemImpl.mouseDownCallback = function(button,x,y) {
	kha_SystemImpl.mouse.sendDownEvent(0,button,x,y);
};
kha_SystemImpl.mouseUpCallback = function(button,x,y) {
	kha_SystemImpl.mouse.sendUpEvent(0,button,x,y);
};
kha_SystemImpl.mouseMoveCallback = function(x,y,mx,my) {
	kha_SystemImpl.mouse.sendMoveEvent(0,x,y,mx,my);
};
kha_SystemImpl.mouseWheelCallback = function(delta) {
	kha_SystemImpl.mouse.sendWheelEvent(0,delta);
};
kha_SystemImpl.touchDownCallback = function(index,x,y) {
	kha_SystemImpl.surface.sendTouchStartEvent(index,x,y);
};
kha_SystemImpl.touchUpCallback = function(index,x,y) {
	kha_SystemImpl.surface.sendTouchEndEvent(index,x,y);
};
kha_SystemImpl.touchMoveCallback = function(index,x,y) {
	kha_SystemImpl.surface.sendMoveEvent(index,x,y);
};
kha_SystemImpl.penDownCallback = function(x,y,pressure) {
	kha_SystemImpl.pen.sendDownEvent(0,x,y,pressure);
};
kha_SystemImpl.penUpCallback = function(x,y,pressure) {
	kha_SystemImpl.pen.sendUpEvent(0,x,y,pressure);
};
kha_SystemImpl.penMoveCallback = function(x,y,pressure) {
	kha_SystemImpl.pen.sendMoveEvent(0,x,y,pressure);
};
kha_SystemImpl.gamepadAxisCallback = function(gamepad,axis,value) {
	kha_SystemImpl.gamepads[gamepad].sendAxisEvent(axis,value);
};
kha_SystemImpl.gamepadButtonCallback = function(gamepad,button,value) {
	kha_SystemImpl.gamepads[gamepad].sendButtonEvent(button,value);
};
kha_SystemImpl.init = function(options,callback) {
	Krom.init(options.title,options.width,options.height,options.framebuffer.samplesPerPixel,options.framebuffer.verticalSync,options.window.mode,options.window.windowFeatures,5,options.window.x,options.window.y,options.framebuffer.frequency);
	kha_SystemImpl.start = Krom.getTime();
	haxe_Log.trace = function(v,infos) {
		Krom.log(haxe_Log.formatOutput(v,infos));
	};
	new kha_Window(0);
	kha_Scheduler.init();
	kha_Shaders.init();
	var g4 = new kha_graphics4_Graphics();
	kha_SystemImpl.framebuffer = new kha_Framebuffer(0,null,g4);
	kha_SystemImpl.framebuffer.init(new kha_graphics4_Graphics2(kha_SystemImpl.framebuffer),g4);
	Krom.setCallback(kha_SystemImpl.renderCallback);
	Krom.setDropFilesCallback(kha_SystemImpl.dropFilesCallback);
	Krom.setCutCopyPasteCallback(kha_SystemImpl.cutCallback,kha_SystemImpl.copyCallback,kha_SystemImpl.pasteCallback);
	Krom.setApplicationStateCallback(kha_SystemImpl.foregroundCallback,kha_SystemImpl.resumeCallback,kha_SystemImpl.pauseCallback,kha_SystemImpl.backgroundCallback,kha_SystemImpl.shutdownCallback);
	kha_SystemImpl.keyboard = new kha_input_Keyboard();
	kha_SystemImpl.mouse = new kha_input_Mouse();
	kha_SystemImpl.surface = new kha_input_Surface();
	kha_SystemImpl.pen = new kha_input_Pen();
	kha_SystemImpl.gamepads = [];
	var _g = 0;
	var _g1 = kha_SystemImpl.maxGamepads;
	while(_g < _g1) {
		var i = _g++;
		kha_SystemImpl.gamepads[i] = new kha_input_Gamepad(i);
	}
	Krom.setKeyboardDownCallback(kha_SystemImpl.keyboardDownCallback);
	Krom.setKeyboardUpCallback(kha_SystemImpl.keyboardUpCallback);
	Krom.setKeyboardPressCallback(kha_SystemImpl.keyboardPressCallback);
	Krom.setMouseDownCallback(kha_SystemImpl.mouseDownCallback);
	Krom.setMouseUpCallback(kha_SystemImpl.mouseUpCallback);
	Krom.setMouseMoveCallback(kha_SystemImpl.mouseMoveCallback);
	Krom.setMouseWheelCallback(kha_SystemImpl.mouseWheelCallback);
	Krom.setTouchDownCallback(kha_SystemImpl.touchDownCallback);
	Krom.setTouchUpCallback(kha_SystemImpl.touchUpCallback);
	Krom.setTouchMoveCallback(kha_SystemImpl.touchMoveCallback);
	Krom.setPenDownCallback(kha_SystemImpl.penDownCallback);
	Krom.setPenUpCallback(kha_SystemImpl.penUpCallback);
	Krom.setPenMoveCallback(kha_SystemImpl.penMoveCallback);
	Krom.setGamepadAxisCallback(kha_SystemImpl.gamepadAxisCallback);
	Krom.setGamepadButtonCallback(kha_SystemImpl.gamepadButtonCallback);
	kha_Scheduler.start();
	callback(kha_Window.get(0));
};
kha_SystemImpl.getTime = function() {
	return Krom.getTime() - kha_SystemImpl.start;
};
kha_SystemImpl.getSystemId = function() {
	return Krom.systemId();
};
kha_SystemImpl.requestShutdown = function() {
	Krom.requestShutdown();
	return true;
};
kha_SystemImpl.getMouse = function(num) {
	return kha_SystemImpl.mouse;
};
kha_SystemImpl.getPen = function(num) {
	return kha_SystemImpl.pen;
};
kha_SystemImpl.getKeyboard = function(num) {
	return kha_SystemImpl.keyboard;
};
kha_SystemImpl.showKeyboard = function() {
	Krom.showKeyboard(true);
};
kha_SystemImpl.hideKeyboard = function() {
	Krom.showKeyboard(false);
};
kha_SystemImpl.lockMouse = function() {
	if(!kha_SystemImpl.isMouseLocked()) {
		Krom.lockMouse();
		var _g = 0;
		var _g1 = kha_SystemImpl.mouseLockListeners;
		while(_g < _g1.length) _g1[_g++]();
	}
};
kha_SystemImpl.unlockMouse = function() {
	if(kha_SystemImpl.isMouseLocked()) {
		Krom.unlockMouse();
		var _g = 0;
		var _g1 = kha_SystemImpl.mouseLockListeners;
		while(_g < _g1.length) _g1[_g++]();
	}
};
kha_SystemImpl.canLockMouse = function() {
	return Krom.canLockMouse();
};
kha_SystemImpl.isMouseLocked = function() {
	return Krom.isMouseLocked();
};
kha_SystemImpl.notifyOfMouseLockChange = function(func,error) {
	if(kha_SystemImpl.canLockMouse() && func != null) {
		kha_SystemImpl.mouseLockListeners.push(func);
	}
};
kha_SystemImpl.removeFromMouseLockChange = function(func,error) {
	if(kha_SystemImpl.canLockMouse() && func != null) {
		HxOverrides.remove(kha_SystemImpl.mouseLockListeners,func);
	}
};
kha_SystemImpl.hideSystemCursor = function() {
	Krom.showMouse(false);
};
kha_SystemImpl.showSystemCursor = function() {
	Krom.showMouse(true);
};
kha_SystemImpl.getGamepadId = function(index) {
	return "unkown";
};
var kha_Window = function(num) {
	this.num = num;
	kha_Window.windows.push(this);
};
$hxClasses["kha.Window"] = kha_Window;
kha_Window.__name__ = "kha.Window";
kha_Window.__properties__ = {get_all:"get_all"};
kha_Window.get = function(index) {
	return kha_Window.windows[index];
};
kha_Window.get_all = function() {
	return kha_Window.windows;
};
kha_Window.prototype = {
	get_x: function() {
		return Krom.windowX(this.num);
	}
	,get_y: function() {
		return Krom.windowY(this.num);
	}
	,get_width: function() {
		return Krom.windowWidth(this.num);
	}
	,get_height: function() {
		return Krom.windowHeight(this.num);
	}
	,set_title: function(value) {
		Krom.setWindowTitle(this.num,value);
		this.windowTitle = value;
		return this.windowTitle;
	}
	,get_vSynced: function() {
		return true;
	}
	,__class__: kha_Window
	,__properties__: {get_vSynced:"get_vSynced",set_title:"set_title",get_height:"get_height",get_width:"get_width",get_y:"get_y",get_x:"get_x"}
};
var kha_WindowOptions = function(title,x,y,width,height,display,visible,windowFeatures,mode) {
	if(mode == null) {
		mode = 0;
	}
	if(visible == null) {
		visible = true;
	}
	if(display == null) {
		display = -1;
	}
	if(height == null) {
		height = 600;
	}
	if(width == null) {
		width = 800;
	}
	if(y == null) {
		y = -1;
	}
	if(x == null) {
		x = -1;
	}
	this.mode = 0;
	this.windowFeatures = 1 | 4 | 2;
	this.visible = true;
	this.display = -1;
	this.height = 600;
	this.width = 800;
	this.y = -1;
	this.x = -1;
	this.title = null;
	this.title = title;
	this.x = x;
	this.y = y;
	this.width = width;
	this.height = height;
	this.display = display;
	this.visible = visible;
	this.windowFeatures = windowFeatures == null ? 1 | 4 | 2 : windowFeatures;
	this.mode = mode;
};
$hxClasses["kha.WindowOptions"] = kha_WindowOptions;
kha_WindowOptions.__name__ = "kha.WindowOptions";
kha_WindowOptions.prototype = {
	__class__: kha_WindowOptions
};
var kha_graphics2_Graphics = function() {
	this.transformations = [new kha_math_FastMatrix3(1,0,0,0,1,0,0,0,1)];
	this.transformationIndex = 0;
	this.opacities = [1];
	this.myFontSize = 12;
	this.pipe = null;
};
$hxClasses["kha.graphics2.Graphics"] = kha_graphics2_Graphics;
kha_graphics2_Graphics.__name__ = "kha.graphics2.Graphics";
kha_graphics2_Graphics.prototype = {
	begin: function(clear,clearColor) {
		if(clear == null) {
			clear = true;
		}
	}
	,end: function() {
	}
	,clear: function(color) {
	}
	,drawImage: function(img,x,y) {
		this.drawSubImage(img,x,y,0,0,img.get_width(),img.get_height());
	}
	,drawSubImage: function(img,x,y,sx,sy,sw,sh) {
		this.drawScaledSubImage(img,sx,sy,sw,sh,x,y,sw,sh);
	}
	,drawScaledImage: function(img,dx,dy,dw,dh) {
		this.drawScaledSubImage(img,0,0,img.get_width(),img.get_height(),dx,dy,dw,dh);
	}
	,drawScaledSubImage: function(image,sx,sy,sw,sh,dx,dy,dw,dh) {
	}
	,drawRect: function(x,y,width,height,strength) {
		if(strength == null) {
			strength = 1.0;
		}
	}
	,fillRect: function(x,y,width,height) {
	}
	,drawString: function(text,x,y) {
	}
	,drawLine: function(x1,y1,x2,y2,strength) {
		if(strength == null) {
			strength = 1.0;
		}
	}
	,fillTriangle: function(x1,y1,x2,y2,x3,y3) {
	}
	,set_imageScaleQuality: function(value) {
		return kha_graphics2_ImageScaleQuality.High;
	}
	,get_color: function() {
		return -16777216;
	}
	,set_color: function(color) {
		return -16777216;
	}
	,get_font: function() {
		return null;
	}
	,set_font: function(font) {
		return null;
	}
	,get_fontSize: function() {
		return this.myFontSize;
	}
	,set_fontSize: function(value) {
		return this.myFontSize = value;
	}
	,popTransformation: function() {
		this.transformationIndex--;
		this.setTransformation(this.transformations[this.transformationIndex]);
		return this.transformations[this.transformationIndex + 1];
	}
	,pushRotation: function(angle,centerx,centery) {
		var _this__00 = 1;
		var _this__10 = 0;
		var _this__01 = 0;
		var _this__11 = 1;
		var _this__02 = 0;
		var _this__12 = 0;
		var _this__22 = 1;
		var _00 = Math.cos(angle);
		var _10 = -Math.sin(angle);
		var _01 = Math.sin(angle);
		var _11 = Math.cos(angle);
		var m__20 = 0;
		var m__21 = 0;
		var m__02 = 0;
		var m__12 = 0;
		var m__22 = 1;
		var _001 = _this__00 * _00 + _this__10 * _01 + centerx * m__02;
		var _101 = _this__00 * _10 + _this__10 * _11 + centerx * m__12;
		var _20 = _this__00 * m__20 + _this__10 * m__21 + centerx * m__22;
		var _011 = _this__01 * _00 + _this__11 * _01 + centery * m__02;
		var _111 = _this__01 * _10 + _this__11 * _11 + centery * m__12;
		var _21 = _this__01 * m__20 + _this__11 * m__21 + centery * m__22;
		var _02 = _this__02 * _00 + _this__12 * _01 + _this__22 * m__02;
		var _12 = _this__02 * _10 + _this__12 * _11 + _this__22 * m__12;
		var _22 = _this__02 * m__20 + _this__12 * m__21 + _this__22 * m__22;
		var m__00 = 1;
		var m__10 = 0;
		var m__20 = -centerx;
		var m__01 = 0;
		var m__11 = 1;
		var m__21 = -centery;
		var m__02 = 0;
		var m__12 = 0;
		var m__22 = 1;
		var _00 = _001 * m__00 + _101 * m__01 + _20 * m__02;
		var _10 = _001 * m__10 + _101 * m__11 + _20 * m__12;
		var _201 = _001 * m__20 + _101 * m__21 + _20 * m__22;
		var _01 = _011 * m__00 + _111 * m__01 + _21 * m__02;
		var _11 = _011 * m__10 + _111 * m__11 + _21 * m__12;
		var _211 = _011 * m__20 + _111 * m__21 + _21 * m__22;
		var _021 = _02 * m__00 + _12 * m__01 + _22 * m__02;
		var _121 = _02 * m__10 + _12 * m__11 + _22 * m__12;
		var _221 = _02 * m__20 + _12 * m__21 + _22 * m__22;
		var m = this.transformations[this.transformationIndex];
		var _001 = _00 * m._00 + _10 * m._01 + _201 * m._02;
		var _101 = _00 * m._10 + _10 * m._11 + _201 * m._12;
		var _20 = _00 * m._20 + _10 * m._21 + _201 * m._22;
		var _011 = _01 * m._00 + _11 * m._01 + _211 * m._02;
		var _111 = _01 * m._10 + _11 * m._11 + _211 * m._12;
		var _21 = _01 * m._20 + _11 * m._21 + _211 * m._22;
		var _02 = _021 * m._00 + _121 * m._01 + _221 * m._02;
		var _12 = _021 * m._10 + _121 * m._11 + _221 * m._12;
		var _22 = _021 * m._20 + _121 * m._21 + _221 * m._22;
		this.transformationIndex++;
		if(this.transformationIndex == this.transformations.length) {
			this.transformations.push(new kha_math_FastMatrix3(1,0,0,0,1,0,0,0,1));
		}
		var _this = this.transformations[this.transformationIndex];
		_this._00 = _001;
		_this._10 = _101;
		_this._20 = _20;
		_this._01 = _011;
		_this._11 = _111;
		_this._21 = _21;
		_this._02 = _02;
		_this._12 = _12;
		_this._22 = _22;
		this.setTransformation(this.transformations[this.transformationIndex]);
	}
	,get_opacity: function() {
		return this.opacities[this.opacities.length - 1];
	}
	,set_opacity: function(opacity) {
		this.setOpacity(opacity);
		return this.opacities[this.opacities.length - 1] = opacity;
	}
	,scissor: function(x,y,width,height) {
	}
	,disableScissor: function() {
	}
	,set_pipeline: function(pipeline) {
		this.setPipeline(pipeline);
		return this.pipe = pipeline;
	}
	,setTransformation: function(transformation) {
	}
	,setOpacity: function(opacity) {
	}
	,setPipeline: function(pipeline) {
	}
	,__class__: kha_graphics2_Graphics
	,__properties__: {set_pipeline:"set_pipeline",set_opacity:"set_opacity",get_opacity:"get_opacity",set_fontSize:"set_fontSize",get_fontSize:"get_fontSize",set_font:"set_font",get_font:"get_font",set_color:"set_color",get_color:"get_color",set_imageScaleQuality:"set_imageScaleQuality"}
};
var kha_graphics2_GraphicsExtension = function() { };
$hxClasses["kha.graphics2.GraphicsExtension"] = kha_graphics2_GraphicsExtension;
kha_graphics2_GraphicsExtension.__name__ = "kha.graphics2.GraphicsExtension";
kha_graphics2_GraphicsExtension.fillCircle = function(g2,cx,cy,radius,segments) {
	if(segments == null) {
		segments = 0;
	}
	if(segments <= 0) {
		segments = Math.floor(10 * Math.sqrt(radius));
	}
	var theta = 2 * Math.PI / segments;
	var c = Math.cos(theta);
	var s = Math.sin(theta);
	var x = radius;
	var y = 0.0;
	var _g = 0;
	var _g1 = segments;
	while(_g < _g1) {
		++_g;
		var px = x + cx;
		var py = y + cy;
		var t = x;
		x = c * x - s * y;
		y = c * y + s * t;
		g2.fillTriangle(px,py,x + cx,y + cy,cx,cy);
	}
};
kha_graphics2_GraphicsExtension.drawCubicBezier = function(g2,x,y,segments,strength) {
	if(strength == null) {
		strength = 1.0;
	}
	if(segments == null) {
		segments = 20;
	}
	var t;
	var q0 = kha_graphics2_GraphicsExtension.calculateCubicBezierPoint(0,x,y);
	var q1;
	var _g = 1;
	var _g1 = segments + 1;
	while(_g < _g1) {
		t = _g++ / segments;
		q1 = kha_graphics2_GraphicsExtension.calculateCubicBezierPoint(t,x,y);
		g2.drawLine(q0[0],q0[1],q1[0],q1[1],strength);
		q0 = q1;
	}
};
kha_graphics2_GraphicsExtension.calculateCubicBezierPoint = function(t,x,y) {
	var u = 1 - t;
	var tt = t * t;
	var uu = u * u;
	var uuu = uu * u;
	var ttt = tt * t;
	var p = [uuu * x[0],uuu * y[0]];
	p[0] += 3 * uu * t * x[1];
	p[1] += 3 * uu * t * y[1];
	p[0] += 3 * u * tt * x[2];
	p[1] += 3 * u * tt * y[2];
	p[0] += ttt * x[3];
	p[1] += ttt * y[3];
	return p;
};
var kha_graphics2_ImageScaleQuality = $hxEnums["kha.graphics2.ImageScaleQuality"] = { __ename__ : true, __constructs__ : ["Low","High"]
	,Low: {_hx_index:0,__enum__:"kha.graphics2.ImageScaleQuality",toString:$estr}
	,High: {_hx_index:1,__enum__:"kha.graphics2.ImageScaleQuality",toString:$estr}
};
var kha_graphics2_truetype_VectorOfIntPointer = function() {
};
$hxClasses["kha.graphics2.truetype.VectorOfIntPointer"] = kha_graphics2_truetype_VectorOfIntPointer;
kha_graphics2_truetype_VectorOfIntPointer.__name__ = "kha.graphics2.truetype.VectorOfIntPointer";
kha_graphics2_truetype_VectorOfIntPointer.prototype = {
	__class__: kha_graphics2_truetype_VectorOfIntPointer
};
var kha_graphics2_truetype_Stbtt_$temp_$rect = function() {
};
$hxClasses["kha.graphics2.truetype.Stbtt_temp_rect"] = kha_graphics2_truetype_Stbtt_$temp_$rect;
kha_graphics2_truetype_Stbtt_$temp_$rect.__name__ = "kha.graphics2.truetype.Stbtt_temp_rect";
kha_graphics2_truetype_Stbtt_$temp_$rect.prototype = {
	__class__: kha_graphics2_truetype_Stbtt_$temp_$rect
};
var kha_graphics2_truetype_Stbtt_$temp_$glyph_$h_$metrics = function() {
};
$hxClasses["kha.graphics2.truetype.Stbtt_temp_glyph_h_metrics"] = kha_graphics2_truetype_Stbtt_$temp_$glyph_$h_$metrics;
kha_graphics2_truetype_Stbtt_$temp_$glyph_$h_$metrics.__name__ = "kha.graphics2.truetype.Stbtt_temp_glyph_h_metrics";
kha_graphics2_truetype_Stbtt_$temp_$glyph_$h_$metrics.prototype = {
	__class__: kha_graphics2_truetype_Stbtt_$temp_$glyph_$h_$metrics
};
var kha_graphics2_truetype_Stbtt_$temp_$font_$v_$metrics = function() {
};
$hxClasses["kha.graphics2.truetype.Stbtt_temp_font_v_metrics"] = kha_graphics2_truetype_Stbtt_$temp_$font_$v_$metrics;
kha_graphics2_truetype_Stbtt_$temp_$font_$v_$metrics.__name__ = "kha.graphics2.truetype.Stbtt_temp_font_v_metrics";
kha_graphics2_truetype_Stbtt_$temp_$font_$v_$metrics.prototype = {
	__class__: kha_graphics2_truetype_Stbtt_$temp_$font_$v_$metrics
};
var kha_graphics2_truetype_Stbtt_$_$buf = function() {
};
$hxClasses["kha.graphics2.truetype.Stbtt__buf"] = kha_graphics2_truetype_Stbtt_$_$buf;
kha_graphics2_truetype_Stbtt_$_$buf.__name__ = "kha.graphics2.truetype.Stbtt__buf";
kha_graphics2_truetype_Stbtt_$_$buf.prototype = {
	__class__: kha_graphics2_truetype_Stbtt_$_$buf
};
var kha_graphics2_truetype_Stbtt_$bakedchar = function() {
};
$hxClasses["kha.graphics2.truetype.Stbtt_bakedchar"] = kha_graphics2_truetype_Stbtt_$bakedchar;
kha_graphics2_truetype_Stbtt_$bakedchar.__name__ = "kha.graphics2.truetype.Stbtt_bakedchar";
kha_graphics2_truetype_Stbtt_$bakedchar.prototype = {
	__class__: kha_graphics2_truetype_Stbtt_$bakedchar
};
var kha_graphics2_truetype_Stbtt_$fontinfo = function() {
};
$hxClasses["kha.graphics2.truetype.Stbtt_fontinfo"] = kha_graphics2_truetype_Stbtt_$fontinfo;
kha_graphics2_truetype_Stbtt_$fontinfo.__name__ = "kha.graphics2.truetype.Stbtt_fontinfo";
kha_graphics2_truetype_Stbtt_$fontinfo.prototype = {
	__class__: kha_graphics2_truetype_Stbtt_$fontinfo
};
var kha_graphics2_truetype_Stbtt_$vertex = function() {
};
$hxClasses["kha.graphics2.truetype.Stbtt_vertex"] = kha_graphics2_truetype_Stbtt_$vertex;
kha_graphics2_truetype_Stbtt_$vertex.__name__ = "kha.graphics2.truetype.Stbtt_vertex";
kha_graphics2_truetype_Stbtt_$vertex.prototype = {
	__class__: kha_graphics2_truetype_Stbtt_$vertex
};
var kha_graphics2_truetype_Stbtt_$_$bitmap = function() {
};
$hxClasses["kha.graphics2.truetype.Stbtt__bitmap"] = kha_graphics2_truetype_Stbtt_$_$bitmap;
kha_graphics2_truetype_Stbtt_$_$bitmap.__name__ = "kha.graphics2.truetype.Stbtt__bitmap";
kha_graphics2_truetype_Stbtt_$_$bitmap.prototype = {
	__class__: kha_graphics2_truetype_Stbtt_$_$bitmap
};
var kha_graphics2_truetype_Stbtt_$_$edge = function() {
};
$hxClasses["kha.graphics2.truetype.Stbtt__edge"] = kha_graphics2_truetype_Stbtt_$_$edge;
kha_graphics2_truetype_Stbtt_$_$edge.__name__ = "kha.graphics2.truetype.Stbtt__edge";
kha_graphics2_truetype_Stbtt_$_$edge.prototype = {
	__class__: kha_graphics2_truetype_Stbtt_$_$edge
};
var kha_graphics2_truetype_Stbtt_$_$active_$edge = function() {
};
$hxClasses["kha.graphics2.truetype.Stbtt__active_edge"] = kha_graphics2_truetype_Stbtt_$_$active_$edge;
kha_graphics2_truetype_Stbtt_$_$active_$edge.__name__ = "kha.graphics2.truetype.Stbtt__active_edge";
kha_graphics2_truetype_Stbtt_$_$active_$edge.prototype = {
	__class__: kha_graphics2_truetype_Stbtt_$_$active_$edge
};
var kha_graphics2_truetype_Stbtt_$_$point = function() {
};
$hxClasses["kha.graphics2.truetype.Stbtt__point"] = kha_graphics2_truetype_Stbtt_$_$point;
kha_graphics2_truetype_Stbtt_$_$point.__name__ = "kha.graphics2.truetype.Stbtt__point";
kha_graphics2_truetype_Stbtt_$_$point.prototype = {
	__class__: kha_graphics2_truetype_Stbtt_$_$point
};
var kha_graphics2_truetype_Stbtt_$_$csctx = function() {
};
$hxClasses["kha.graphics2.truetype.Stbtt__csctx"] = kha_graphics2_truetype_Stbtt_$_$csctx;
kha_graphics2_truetype_Stbtt_$_$csctx.__name__ = "kha.graphics2.truetype.Stbtt__csctx";
kha_graphics2_truetype_Stbtt_$_$csctx.prototype = {
	__class__: kha_graphics2_truetype_Stbtt_$_$csctx
};
var kha_graphics2_truetype_StbTruetype = function() { };
$hxClasses["kha.graphics2.truetype.StbTruetype"] = kha_graphics2_truetype_StbTruetype;
kha_graphics2_truetype_StbTruetype.__name__ = "kha.graphics2.truetype.StbTruetype";
kha_graphics2_truetype_StbTruetype.stbtt__buf_get = function(b,n) {
	var v = 0;
	if(!(n >= 1 && n <= 4)) {
		throw haxe_Exception.thrown("Error");
	}
	var _g = 0;
	while(_g < n) {
		++_g;
		var v1;
		if(b.cursor >= b.data.get_length()) {
			v1 = 0;
		} else {
			var pos = b.cursor++;
			if(pos == null) {
				pos = 0;
			}
			v1 = b.data.readU8(pos);
		}
		v = v << 8 | v1;
	}
	return v;
};
kha_graphics2_truetype_StbTruetype.stbtt__new_buf = function(p,size) {
	var r = new kha_graphics2_truetype_Stbtt_$_$buf();
	if(size >= 1073741824) {
		throw haxe_Exception.thrown("Error");
	}
	r.data = p;
	r.cursor = 0;
	return r;
};
kha_graphics2_truetype_StbTruetype.stbtt__buf_range = function(b,o,s) {
	var r = kha_graphics2_truetype_StbTruetype.stbtt__new_buf(null,0);
	if(o < 0 || s < 0 || o > b.data.get_length() || s > b.data.get_length() - o) {
		return r;
	}
	r.data = b.data.sub(o,s);
	return r;
};
kha_graphics2_truetype_StbTruetype.stbtt__cff_get_index = function(b) {
	var start = b.cursor;
	var count = kha_graphics2_truetype_StbTruetype.stbtt__buf_get(b,2);
	if(count > 0) {
		var offsize;
		if(b.cursor >= b.data.get_length()) {
			offsize = 0;
		} else {
			var pos = b.cursor++;
			if(pos == null) {
				pos = 0;
			}
			offsize = b.data.readU8(pos);
		}
		if(!(offsize >= 1 && offsize <= 4)) {
			throw haxe_Exception.thrown("Error");
		}
		var o = b.cursor + offsize * count;
		if(o > b.data.get_length() || o < 0) {
			throw haxe_Exception.thrown("Error");
		}
		b.cursor = o > b.data.get_length() || o < 0 ? b.data.get_length() : o;
		var o = kha_graphics2_truetype_StbTruetype.stbtt__buf_get(b,offsize) - 1;
		var o1 = b.cursor + o;
		if(o1 > b.data.get_length() || o1 < 0) {
			throw haxe_Exception.thrown("Error");
		}
		b.cursor = o1 > b.data.get_length() || o1 < 0 ? b.data.get_length() : o1;
		return kha_graphics2_truetype_StbTruetype.stbtt__buf_range(b,start,b.cursor - start);
	}
	return b;
};
kha_graphics2_truetype_StbTruetype.stbtt__cff_int = function(b) {
	var b0;
	if(b.cursor >= b.data.get_length()) {
		b0 = 0;
	} else {
		var pos = b.cursor++;
		if(pos == null) {
			pos = 0;
		}
		b0 = b.data.readU8(pos);
	}
	if(b0 >= 32 && b0 <= 246) {
		return b0 - 139;
	} else if(b0 >= 247 && b0 <= 250) {
		var tmp;
		if(b.cursor >= b.data.get_length()) {
			tmp = 0;
		} else {
			var pos = b.cursor++;
			if(pos == null) {
				pos = 0;
			}
			tmp = b.data.readU8(pos);
		}
		return (b0 - 247) * 256 + tmp + 108;
	} else if(b0 >= 251 && b0 <= 254) {
		var tmp;
		if(b.cursor >= b.data.get_length()) {
			tmp = 0;
		} else {
			var pos = b.cursor++;
			if(pos == null) {
				pos = 0;
			}
			tmp = b.data.readU8(pos);
		}
		return -(b0 - 251) * 256 - tmp - 108;
	} else if(b0 == 28) {
		return kha_graphics2_truetype_StbTruetype.stbtt__buf_get(b,2);
	} else if(b0 == 29) {
		return kha_graphics2_truetype_StbTruetype.stbtt__buf_get(b,4);
	} else {
		throw haxe_Exception.thrown("Error");
	}
};
kha_graphics2_truetype_StbTruetype.stbtt__dict_get_ints = function(b,key,outcount,out) {
	var i = 0;
	if(0 > b.data.get_length()) {
		throw haxe_Exception.thrown("Error");
	}
	b.cursor = 0 > b.data.get_length() ? b.data.get_length() : 0;
	var ret = null;
	while(b.cursor < b.data.get_length()) {
		var start = b.cursor;
		var op;
		while(true) {
			var tmp;
			if(b.cursor >= b.data.get_length()) {
				tmp = 0;
			} else {
				var pos = b.cursor;
				if(pos == null) {
					pos = 0;
				}
				tmp = b.data.readU8(pos);
			}
			if(!(tmp >= 28)) {
				break;
			}
			var v;
			var b0;
			if(b.cursor >= b.data.get_length()) {
				b0 = 0;
			} else {
				var pos1 = b.cursor;
				if(pos1 == null) {
					pos1 = 0;
				}
				b0 = b.data.readU8(pos1);
			}
			if(b0 < 28) {
				throw haxe_Exception.thrown("Error");
			}
			if(b0 == 30) {
				var o = b.cursor + 1;
				if(o > b.data.get_length() || o < 0) {
					throw haxe_Exception.thrown("Error");
				}
				b.cursor = o > b.data.get_length() || o < 0 ? b.data.get_length() : o;
				while(b.cursor < b.data.get_length()) {
					if(b.cursor >= b.data.get_length()) {
						v = 0;
					} else {
						var pos2 = b.cursor++;
						if(pos2 == null) {
							pos2 = 0;
						}
						v = b.data.readU8(pos2);
					}
					if((v & 15) == 15 || v >> 4 == 15) {
						break;
					}
				}
			} else {
				kha_graphics2_truetype_StbTruetype.stbtt__cff_int(b);
			}
		}
		var end = b.cursor;
		if(b.cursor >= b.data.get_length()) {
			op = 0;
		} else {
			var pos3 = b.cursor++;
			if(pos3 == null) {
				pos3 = 0;
			}
			op = b.data.readU8(pos3);
		}
		if(op == 12) {
			var op1;
			if(b.cursor >= b.data.get_length()) {
				op1 = 0;
			} else {
				var pos4 = b.cursor++;
				if(pos4 == null) {
					pos4 = 0;
				}
				op1 = b.data.readU8(pos4);
			}
			op = op1 | 256;
		}
		if(op == key) {
			ret = kha_graphics2_truetype_StbTruetype.stbtt__buf_range(b,start,end - start);
			break;
		}
	}
	var operands = ret != null ? ret : kha_graphics2_truetype_StbTruetype.stbtt__buf_range(b,0,0);
	while(i < outcount && operands.cursor < operands.data.get_length()) {
		out[i] = kha_graphics2_truetype_StbTruetype.stbtt__cff_int(operands);
		++i;
	}
};
kha_graphics2_truetype_StbTruetype.stbtt__cff_index_get = function(b,i) {
	if(0 > b.data.get_length()) {
		throw haxe_Exception.thrown("Error");
	}
	b.cursor = 0 > b.data.get_length() ? b.data.get_length() : 0;
	var count = kha_graphics2_truetype_StbTruetype.stbtt__buf_get(b,2);
	var offsize;
	if(b.cursor >= b.data.get_length()) {
		offsize = 0;
	} else {
		var pos = b.cursor++;
		if(pos == null) {
			pos = 0;
		}
		offsize = b.data.readU8(pos);
	}
	if(!(i >= 0 && i < count)) {
		throw haxe_Exception.thrown("Error");
	}
	if(!(offsize >= 1 && offsize <= 4)) {
		throw haxe_Exception.thrown("Error");
	}
	var o = b.cursor + i * offsize;
	if(o > b.data.get_length() || o < 0) {
		throw haxe_Exception.thrown("Error");
	}
	b.cursor = o > b.data.get_length() || o < 0 ? b.data.get_length() : o;
	var start = kha_graphics2_truetype_StbTruetype.stbtt__buf_get(b,offsize);
	return kha_graphics2_truetype_StbTruetype.stbtt__buf_range(b,2 + (count + 1) * offsize + start,kha_graphics2_truetype_StbTruetype.stbtt__buf_get(b,offsize) - start);
};
kha_graphics2_truetype_StbTruetype.ttCHAR = function(p,pos) {
	if(pos == null) {
		pos = 0;
	}
	var n = p.readU8(pos);
	if(n >= 128) {
		return n - 256;
	}
	return n;
};
kha_graphics2_truetype_StbTruetype.ttUSHORT = function(p,pos) {
	if(pos == null) {
		pos = 0;
	}
	var ch1 = p.readU8(pos);
	return p.readU8(pos + 1) | ch1 << 8;
};
kha_graphics2_truetype_StbTruetype.ttSHORT = function(p,pos) {
	if(pos == null) {
		pos = 0;
	}
	var ch1 = p.readU8(pos);
	var n = p.readU8(pos + 1) | ch1 << 8;
	if((n & 32768) != 0) {
		return n - 65536;
	}
	return n;
};
kha_graphics2_truetype_StbTruetype.ttLONG = function(p,pos) {
	if(pos == null) {
		pos = 0;
	}
	var ch1 = p.readU8(pos);
	var ch2 = p.readU8(pos + 1);
	var ch3 = p.readU8(pos + 2);
	return p.readU8(pos + 3) | ch3 << 8 | ch2 << 16 | ch1 << 24;
};
kha_graphics2_truetype_StbTruetype.stbtt__isfont = function(font) {
	var c0 = HxOverrides.cca("1",0);
	if(font.readU8(0) == c0 && font.readU8(1) == 0 && font.readU8(2) == 0 && font.readU8(3) == 0) {
		return true;
	}
	var c0 = HxOverrides.cca("typ1",0);
	var c1 = HxOverrides.cca("typ1",1);
	var c2 = HxOverrides.cca("typ1",2);
	var c3 = HxOverrides.cca("typ1",3);
	if(font.readU8(0) == c0 && font.readU8(1) == c1 && font.readU8(2) == c2 && font.readU8(3) == c3) {
		return true;
	}
	var c0 = HxOverrides.cca("OTTO",0);
	var c1 = HxOverrides.cca("OTTO",1);
	var c2 = HxOverrides.cca("OTTO",2);
	var c3 = HxOverrides.cca("OTTO",3);
	if(font.readU8(0) == c0 && font.readU8(1) == c1 && font.readU8(2) == c2 && font.readU8(3) == c3) {
		return true;
	}
	if(font.readU8(0) == 0 && font.readU8(1) == 1 && font.readU8(2) == 0 && font.readU8(3) == 0) {
		return true;
	}
	var c0 = HxOverrides.cca("true",0);
	var c1 = HxOverrides.cca("true",1);
	var c2 = HxOverrides.cca("true",2);
	var c3 = HxOverrides.cca("true",3);
	if(font.readU8(0) == c0 && font.readU8(1) == c1 && font.readU8(2) == c2 && font.readU8(3) == c3) {
		return true;
	}
	return false;
};
kha_graphics2_truetype_StbTruetype.stbtt__find_table = function(data,fontstart,tag) {
	var num_tables = kha_graphics2_truetype_StbTruetype.ttUSHORT(data,fontstart + 4);
	var tabledir = fontstart + 12;
	var _g = 0;
	while(_g < num_tables) {
		var loc = tabledir + 16 * _g++;
		var c0 = HxOverrides.cca(tag,0);
		var c1 = HxOverrides.cca(tag,1);
		var c2 = HxOverrides.cca(tag,2);
		var c3 = HxOverrides.cca(tag,3);
		if(data.readU8(loc) == c0 && data.readU8(loc + 1) == c1 && data.readU8(loc + 2) == c2 && data.readU8(loc + 3) == c3) {
			var pos = loc + 8;
			if(pos == null) {
				pos = 0;
			}
			return kha_graphics2_truetype_StbTruetype.ttLONG(data,pos);
		}
	}
	return 0;
};
kha_graphics2_truetype_StbTruetype.stbtt_GetFontOffsetForIndex = function(font_collection,index) {
	if(kha_graphics2_truetype_StbTruetype.stbtt__isfont(font_collection)) {
		if(index == 0) {
			return 0;
		} else {
			return -1;
		}
	}
	var c0 = HxOverrides.cca("ttcf",0);
	var c1 = HxOverrides.cca("ttcf",1);
	var c2 = HxOverrides.cca("ttcf",2);
	var c3 = HxOverrides.cca("ttcf",3);
	if(font_collection.readU8(0) == c0 && font_collection.readU8(1) == c1 && font_collection.readU8(2) == c2 && font_collection.readU8(3) == c3) {
		if(kha_graphics2_truetype_StbTruetype.ttLONG(font_collection,4) == 65536 || kha_graphics2_truetype_StbTruetype.ttLONG(font_collection,4) == 131072) {
			if(index >= kha_graphics2_truetype_StbTruetype.ttLONG(font_collection,8)) {
				return -1;
			}
			var pos = 12 + index * 4;
			if(pos == null) {
				pos = 0;
			}
			return kha_graphics2_truetype_StbTruetype.ttLONG(font_collection,pos);
		}
	}
	return -1;
};
kha_graphics2_truetype_StbTruetype.stbtt_GetNumberOfFonts = function(font_collection) {
	if(kha_graphics2_truetype_StbTruetype.stbtt__isfont(font_collection)) {
		return 1;
	}
	var c0 = HxOverrides.cca("ttcf",0);
	var c1 = HxOverrides.cca("ttcf",1);
	var c2 = HxOverrides.cca("ttcf",2);
	var c3 = HxOverrides.cca("ttcf",3);
	if(font_collection.readU8(0) == c0 && font_collection.readU8(1) == c1 && font_collection.readU8(2) == c2 && font_collection.readU8(3) == c3) {
		if(kha_graphics2_truetype_StbTruetype.ttLONG(font_collection,4) == 65536 || kha_graphics2_truetype_StbTruetype.ttLONG(font_collection,4) == 131072) {
			return kha_graphics2_truetype_StbTruetype.ttLONG(font_collection,8);
		}
	}
	return 0;
};
kha_graphics2_truetype_StbTruetype.stbtt__get_subrs = function(cff,fontdict) {
	var subrsoff = [0];
	var private_loc = [0,0];
	kha_graphics2_truetype_StbTruetype.stbtt__dict_get_ints(fontdict,18,2,private_loc);
	if(private_loc[1] == 0 || private_loc[0] == 0) {
		return kha_graphics2_truetype_StbTruetype.stbtt__new_buf(null,0);
	}
	kha_graphics2_truetype_StbTruetype.stbtt__dict_get_ints(kha_graphics2_truetype_StbTruetype.stbtt__buf_range(cff,private_loc[1],private_loc[0]),19,1,subrsoff);
	if(subrsoff[0] == 0) {
		return kha_graphics2_truetype_StbTruetype.stbtt__new_buf(null,0);
	}
	var o = private_loc[1] + subrsoff[0];
	if(o > cff.data.get_length() || o < 0) {
		throw haxe_Exception.thrown("Error");
	}
	cff.cursor = o > cff.data.get_length() || o < 0 ? cff.data.get_length() : o;
	return kha_graphics2_truetype_StbTruetype.stbtt__cff_get_index(cff);
};
kha_graphics2_truetype_StbTruetype.stbtt_InitFont = function(info,data,fontstart) {
	info.data = data;
	info.fontstart = fontstart;
	info.cff = kha_graphics2_truetype_StbTruetype.stbtt__new_buf(null,0);
	var cmap = kha_graphics2_truetype_StbTruetype.stbtt__find_table(data,fontstart,"cmap");
	info.loca = kha_graphics2_truetype_StbTruetype.stbtt__find_table(data,fontstart,"loca");
	info.head = kha_graphics2_truetype_StbTruetype.stbtt__find_table(data,fontstart,"head");
	info.glyf = kha_graphics2_truetype_StbTruetype.stbtt__find_table(data,fontstart,"glyf");
	info.hhea = kha_graphics2_truetype_StbTruetype.stbtt__find_table(data,fontstart,"hhea");
	info.hmtx = kha_graphics2_truetype_StbTruetype.stbtt__find_table(data,fontstart,"hmtx");
	info.kern = kha_graphics2_truetype_StbTruetype.stbtt__find_table(data,fontstart,"kern");
	info.gpos = kha_graphics2_truetype_StbTruetype.stbtt__find_table(data,fontstart,"GPOS");
	if(cmap == 0 || info.head == 0 || info.hhea == 0 || info.hmtx == 0) {
		return false;
	}
	if(info.glyf != 0) {
		if(info.loca == 0) {
			return false;
		}
	} else {
		var cstype = [2];
		var charstrings = [0];
		var fdarrayoff = [0];
		var fdselectoff = [0];
		var cff = kha_graphics2_truetype_StbTruetype.stbtt__find_table(data,fontstart,"CFF ");
		if(cff == 0) {
			return false;
		}
		info.fontdicts = kha_graphics2_truetype_StbTruetype.stbtt__new_buf(null,0);
		info.fdselect = kha_graphics2_truetype_StbTruetype.stbtt__new_buf(null,0);
		var cff_data = data.sub(cff,data.get_length() - cff);
		info.cff = kha_graphics2_truetype_StbTruetype.stbtt__new_buf(cff_data,cff_data.get_length());
		var b = info.cff;
		var o = b.cursor + 2;
		if(o > b.data.get_length() || o < 0) {
			throw haxe_Exception.thrown("Error");
		}
		b.cursor = o > b.data.get_length() || o < 0 ? b.data.get_length() : o;
		var o;
		if(b.cursor >= b.data.get_length()) {
			o = 0;
		} else {
			var pos = b.cursor++;
			if(pos == null) {
				pos = 0;
			}
			o = b.data.readU8(pos);
		}
		if(o > b.data.get_length() || o < 0) {
			throw haxe_Exception.thrown("Error");
		}
		b.cursor = o > b.data.get_length() || o < 0 ? b.data.get_length() : o;
		kha_graphics2_truetype_StbTruetype.stbtt__cff_get_index(b);
		var topdict = kha_graphics2_truetype_StbTruetype.stbtt__cff_index_get(kha_graphics2_truetype_StbTruetype.stbtt__cff_get_index(b),0);
		kha_graphics2_truetype_StbTruetype.stbtt__cff_get_index(b);
		info.gsubrs = kha_graphics2_truetype_StbTruetype.stbtt__cff_get_index(b);
		kha_graphics2_truetype_StbTruetype.stbtt__dict_get_ints(topdict,17,1,charstrings);
		kha_graphics2_truetype_StbTruetype.stbtt__dict_get_ints(topdict,262,1,cstype);
		kha_graphics2_truetype_StbTruetype.stbtt__dict_get_ints(topdict,292,1,fdarrayoff);
		kha_graphics2_truetype_StbTruetype.stbtt__dict_get_ints(topdict,293,1,fdselectoff);
		info.subrs = kha_graphics2_truetype_StbTruetype.stbtt__get_subrs(b,topdict);
		if(cstype[0] != 2) {
			return false;
		}
		if(charstrings[0] == 0) {
			return false;
		}
		if(fdarrayoff[0] != 0) {
			if(fdselectoff[0] == 0) {
				return false;
			}
			var o = fdarrayoff[0];
			if(o > b.data.get_length() || o < 0) {
				throw haxe_Exception.thrown("Error");
			}
			b.cursor = o > b.data.get_length() || o < 0 ? b.data.get_length() : o;
			info.fontdicts = kha_graphics2_truetype_StbTruetype.stbtt__cff_get_index(b);
			info.fdselect = kha_graphics2_truetype_StbTruetype.stbtt__buf_range(b,fdselectoff[0],b.data.get_length() - fdselectoff[0]);
		}
		var o = charstrings[0];
		if(o > b.data.get_length() || o < 0) {
			throw haxe_Exception.thrown("Error");
		}
		b.cursor = o > b.data.get_length() || o < 0 ? b.data.get_length() : o;
		info.charstrings = kha_graphics2_truetype_StbTruetype.stbtt__cff_get_index(b);
	}
	var t = kha_graphics2_truetype_StbTruetype.stbtt__find_table(data,fontstart,"maxp");
	if(t != 0) {
		info.numGlyphs = kha_graphics2_truetype_StbTruetype.ttUSHORT(data,t + 4);
	} else {
		info.numGlyphs = 65535;
	}
	var numTables = kha_graphics2_truetype_StbTruetype.ttUSHORT(data,cmap + 2);
	info.index_map = 0;
	var _g = 0;
	while(_g < numTables) {
		var encoding_record = cmap + 4 + 8 * _g++;
		switch(kha_graphics2_truetype_StbTruetype.ttUSHORT(data,encoding_record)) {
		case 0:
			var pos = encoding_record + 4;
			if(pos == null) {
				pos = 0;
			}
			info.index_map = cmap + kha_graphics2_truetype_StbTruetype.ttLONG(data,pos);
			break;
		case 3:
			switch(kha_graphics2_truetype_StbTruetype.ttUSHORT(data,encoding_record + 2)) {
			case 1:case 10:
				var pos1 = encoding_record + 4;
				if(pos1 == null) {
					pos1 = 0;
				}
				info.index_map = cmap + kha_graphics2_truetype_StbTruetype.ttLONG(data,pos1);
				break;
			}
			break;
		}
	}
	if(info.index_map == 0) {
		return false;
	}
	info.indexToLocFormat = kha_graphics2_truetype_StbTruetype.ttUSHORT(data,info.head + 50);
	return true;
};
kha_graphics2_truetype_StbTruetype.stbtt_FindGlyphIndex = function(info,unicode_codepoint) {
	var data = info.data;
	var index_map = info.index_map;
	var format = kha_graphics2_truetype_StbTruetype.ttUSHORT(data,index_map);
	if(format == 0) {
		if(unicode_codepoint < kha_graphics2_truetype_StbTruetype.ttUSHORT(data,index_map + 2) - 6) {
			var pos = index_map + 6 + unicode_codepoint;
			if(pos == null) {
				pos = 0;
			}
			return data.readU8(pos);
		}
		return 0;
	} else if(format == 6) {
		var first = kha_graphics2_truetype_StbTruetype.ttUSHORT(data,index_map + 6);
		var count = kha_graphics2_truetype_StbTruetype.ttUSHORT(data,index_map + 8);
		if(unicode_codepoint >= first && unicode_codepoint < first + count) {
			return kha_graphics2_truetype_StbTruetype.ttUSHORT(data,index_map + 10 + (unicode_codepoint - first) * 2);
		}
		return 0;
	} else if(format == 2) {
		throw haxe_Exception.thrown("Error");
	} else if(format == 4) {
		var segcount = kha_graphics2_truetype_StbTruetype.ttUSHORT(data,index_map + 6) >> 1;
		var searchRange = kha_graphics2_truetype_StbTruetype.ttUSHORT(data,index_map + 8) >> 1;
		var entrySelector = kha_graphics2_truetype_StbTruetype.ttUSHORT(data,index_map + 10);
		var rangeShift = kha_graphics2_truetype_StbTruetype.ttUSHORT(data,index_map + 12) >> 1;
		var endCount = index_map + 14;
		var search = endCount;
		if(unicode_codepoint > 65535) {
			return 0;
		}
		if(unicode_codepoint >= kha_graphics2_truetype_StbTruetype.ttUSHORT(data,endCount + rangeShift * 2)) {
			search = endCount + rangeShift * 2;
		}
		search -= 2;
		while(entrySelector != 0) {
			searchRange >>= 1;
			if(unicode_codepoint > kha_graphics2_truetype_StbTruetype.ttUSHORT(data,search + searchRange * 2)) {
				search += searchRange * 2;
			}
			--entrySelector;
		}
		search += 2;
		var item = search - endCount >> 1 & 65535;
		if(unicode_codepoint > kha_graphics2_truetype_StbTruetype.ttUSHORT(data,endCount + 2 * item)) {
			throw haxe_Exception.thrown("Error");
		}
		var start = kha_graphics2_truetype_StbTruetype.ttUSHORT(data,index_map + 14 + segcount * 2 + 2 + 2 * item);
		if(unicode_codepoint < start) {
			return 0;
		}
		var offset = kha_graphics2_truetype_StbTruetype.ttUSHORT(data,index_map + 14 + segcount * 6 + 2 + 2 * item);
		if(offset == 0) {
			return unicode_codepoint + kha_graphics2_truetype_StbTruetype.ttSHORT(data,index_map + 14 + segcount * 4 + 2 + 2 * item) & 65535;
		}
		return kha_graphics2_truetype_StbTruetype.ttUSHORT(data,offset + (unicode_codepoint - start) * 2 + index_map + 14 + segcount * 6 + 2 + 2 * item);
	} else if(format == 12 || format == 13) {
		var pos = index_map + 12;
		if(pos == null) {
			pos = 0;
		}
		var low = 0;
		var high = kha_graphics2_truetype_StbTruetype.ttLONG(data,pos);
		while(low < high) {
			var mid = low + (high - low >> 1);
			var pos = index_map + 16 + mid * 12;
			if(pos == null) {
				pos = 0;
			}
			var start_char = kha_graphics2_truetype_StbTruetype.ttLONG(data,pos);
			var pos1 = index_map + 16 + mid * 12 + 4;
			if(pos1 == null) {
				pos1 = 0;
			}
			var end_char = kha_graphics2_truetype_StbTruetype.ttLONG(data,pos1);
			if(unicode_codepoint < start_char) {
				high = mid;
			} else if(unicode_codepoint > end_char) {
				low = mid + 1;
			} else {
				var pos2 = index_map + 16 + mid * 12 + 8;
				if(pos2 == null) {
					pos2 = 0;
				}
				var start_glyph = kha_graphics2_truetype_StbTruetype.ttLONG(data,pos2);
				if(format == 12) {
					return start_glyph + unicode_codepoint - start_char;
				} else {
					return start_glyph;
				}
			}
		}
		return 0;
	}
	throw haxe_Exception.thrown("Error");
};
kha_graphics2_truetype_StbTruetype.stbtt_setvertex = function(v,type,x,y,cx,cy) {
	v.type = type;
	v.x = x;
	v.y = y;
	v.cx = cx;
	v.cy = cy;
};
kha_graphics2_truetype_StbTruetype.stbtt__GetGlyfOffset = function(info,glyph_index) {
	var g1;
	var g2;
	if(!(info.cff.data == null || info.cff.data.get_length() == 0)) {
		throw haxe_Exception.thrown("Error");
	}
	if(glyph_index >= info.numGlyphs) {
		return -1;
	}
	if(info.indexToLocFormat >= 2) {
		return -1;
	}
	if(info.indexToLocFormat == 0) {
		g1 = info.glyf + kha_graphics2_truetype_StbTruetype.ttUSHORT(info.data,info.loca + glyph_index * 2) * 2;
		g2 = info.glyf + kha_graphics2_truetype_StbTruetype.ttUSHORT(info.data,info.loca + glyph_index * 2 + 2) * 2;
	} else {
		var pos = info.loca + glyph_index * 4;
		if(pos == null) {
			pos = 0;
		}
		g1 = info.glyf + kha_graphics2_truetype_StbTruetype.ttLONG(info.data,pos);
		var pos = info.loca + glyph_index * 4 + 4;
		if(pos == null) {
			pos = 0;
		}
		g2 = info.glyf + kha_graphics2_truetype_StbTruetype.ttLONG(info.data,pos);
	}
	if(g1 == g2) {
		return -1;
	} else {
		return g1;
	}
};
kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphBox = function(info,glyph_index,rect) {
	if(info.cff.data != null && info.cff.data.get_length() > 0) {
		kha_graphics2_truetype_StbTruetype.stbtt__GetGlyphInfoT2(info,glyph_index,rect);
	} else {
		var g = kha_graphics2_truetype_StbTruetype.stbtt__GetGlyfOffset(info,glyph_index);
		if(g < 0) {
			return false;
		}
		rect.x0 = kha_graphics2_truetype_StbTruetype.ttSHORT(info.data,g + 2);
		rect.y0 = kha_graphics2_truetype_StbTruetype.ttSHORT(info.data,g + 4);
		rect.x1 = kha_graphics2_truetype_StbTruetype.ttSHORT(info.data,g + 6);
		rect.y1 = kha_graphics2_truetype_StbTruetype.ttSHORT(info.data,g + 8);
	}
	return true;
};
kha_graphics2_truetype_StbTruetype.stbtt__close_shape = function(vertices,num_vertices,was_off,start_off,sx,sy,scx,scy,cx,cy) {
	if(start_off) {
		if(was_off) {
			kha_graphics2_truetype_StbTruetype.stbtt_setvertex(vertices[num_vertices++],3,cx + scx >> 1,cy + scy >> 1,cx,cy);
		}
		kha_graphics2_truetype_StbTruetype.stbtt_setvertex(vertices[num_vertices++],3,sx,sy,scx,scy);
	} else if(was_off) {
		kha_graphics2_truetype_StbTruetype.stbtt_setvertex(vertices[num_vertices++],3,sx,sy,cx,cy);
	} else {
		kha_graphics2_truetype_StbTruetype.stbtt_setvertex(vertices[num_vertices++],2,sx,sy,0,0);
	}
	return num_vertices;
};
kha_graphics2_truetype_StbTruetype.copyVertices = function(from,to,offset,count) {
	var _g = 0;
	while(_g < count) {
		var i = _g++;
		to[offset + i] = from[i];
	}
};
kha_graphics2_truetype_StbTruetype.stbtt__GetGlyphShapeTT = function(info,glyph_index) {
	var data = info.data;
	var vertices = null;
	var num_vertices = 0;
	var g = kha_graphics2_truetype_StbTruetype.stbtt__GetGlyfOffset(info,glyph_index);
	if(g < 0) {
		return null;
	}
	var numberOfContours = kha_graphics2_truetype_StbTruetype.ttSHORT(data,g);
	if(numberOfContours > 0) {
		var flags = 0;
		var j = 0;
		var next_move = 0;
		var off = 0;
		var was_off = false;
		var start_off = false;
		var endPtsOfContoursOffset = g + 10;
		var pointsIndex = endPtsOfContoursOffset + numberOfContours * 2 + 2 + kha_graphics2_truetype_StbTruetype.ttUSHORT(data,endPtsOfContoursOffset + numberOfContours * 2);
		var n = 1 + kha_graphics2_truetype_StbTruetype.ttUSHORT(data,endPtsOfContoursOffset + numberOfContours * 2 - 2);
		var m = n + 2 * numberOfContours;
		vertices = new Array(m);
		if(vertices == null) {
			return null;
		} else {
			var _g = 0;
			var _g1 = vertices.length;
			while(_g < _g1) vertices[_g++] = new kha_graphics2_truetype_Stbtt_$vertex();
		}
		next_move = 0;
		var flagcount = 0;
		off = m - n;
		var _g = 0;
		while(_g < n) {
			var i = _g++;
			if(flagcount == 0) {
				flags = data.readU8(pointsIndex++);
				if((flags & 8) != 0) {
					flagcount = data.readU8(pointsIndex++);
				}
			} else {
				--flagcount;
			}
			vertices[off + i].type = flags;
		}
		var x = 0;
		var _g = 0;
		while(_g < n) {
			var i = _g++;
			flags = vertices[off + i].type;
			if((flags & 2) != 0) {
				var dx = data.readU8(pointsIndex++);
				x += (flags & 16) != 0 ? dx : -dx;
			} else if((flags & 16) == 0) {
				var value;
				var ch1 = data.readU8(pointsIndex);
				var n1 = data.readU8(pointsIndex + 1) | ch1 << 8;
				if((n1 & 32768) != 0) {
					value = n1 - 65536;
				} else {
					value = n1;
				}
				x += value;
				pointsIndex += 2;
			}
			vertices[off + i].x = x;
		}
		var y = 0;
		var _g = 0;
		while(_g < n) {
			var i = _g++;
			flags = vertices[off + i].type;
			if((flags & 4) != 0) {
				var dy = data.readU8(pointsIndex++);
				y += (flags & 32) != 0 ? dy : -dy;
			} else if((flags & 32) == 0) {
				var value;
				var ch1 = data.readU8(pointsIndex);
				var n1 = data.readU8(pointsIndex + 1) | ch1 << 8;
				if((n1 & 32768) != 0) {
					value = n1 - 65536;
				} else {
					value = n1;
				}
				y += value;
				pointsIndex += 2;
			}
			vertices[off + i].y = y;
		}
		num_vertices = 0;
		var scy = 0;
		var scx = 0;
		var cy = 0;
		var cx = 0;
		var sy = 0;
		var sx = 0;
		var i = 0;
		while(i < n) {
			flags = vertices[off + i].type;
			x = vertices[off + i].x;
			y = vertices[off + i].y;
			if(next_move == i) {
				if(i != 0) {
					num_vertices = kha_graphics2_truetype_StbTruetype.stbtt__close_shape(vertices,num_vertices,was_off,start_off,sx,sy,scx,scy,cx,cy);
				}
				start_off = (flags & 1) == 0;
				if(start_off) {
					scx = x;
					scy = y;
					if((vertices[off + i + 1].type & 1) == 0) {
						sx = x + vertices[off + i + 1].x >> 1;
						sy = y + vertices[off + i + 1].y >> 1;
					} else {
						sx = vertices[off + i + 1].x;
						sy = vertices[off + i + 1].y;
						++i;
					}
				} else {
					sx = x;
					sy = y;
				}
				kha_graphics2_truetype_StbTruetype.stbtt_setvertex(vertices[num_vertices++],1,sx,sy,0,0);
				was_off = false;
				next_move = 1 + kha_graphics2_truetype_StbTruetype.ttUSHORT(data,endPtsOfContoursOffset + j * 2);
				++j;
			} else if((flags & 1) == 0) {
				if(was_off) {
					kha_graphics2_truetype_StbTruetype.stbtt_setvertex(vertices[num_vertices++],3,cx + x >> 1,cy + y >> 1,cx,cy);
				}
				cx = x;
				cy = y;
				was_off = true;
			} else {
				if(was_off) {
					kha_graphics2_truetype_StbTruetype.stbtt_setvertex(vertices[num_vertices++],3,x,y,cx,cy);
				} else {
					kha_graphics2_truetype_StbTruetype.stbtt_setvertex(vertices[num_vertices++],2,x,y,0,0);
				}
				was_off = false;
			}
			++i;
		}
		num_vertices = kha_graphics2_truetype_StbTruetype.stbtt__close_shape(vertices,num_vertices,was_off,start_off,sx,sy,scx,scy,cx,cy);
	} else if(numberOfContours < 0) {
		var more = 1;
		var compIndex = g + 10;
		num_vertices = 0;
		vertices = null;
		while(more != 0) {
			var comp_num_verts = 0;
			var comp_verts = null;
			var tmp = null;
			var mtx0 = 1;
			var mtx1 = 0;
			var mtx2 = 0;
			var mtx3 = 1;
			var mtx4 = 0;
			var mtx5 = 0;
			var flags = kha_graphics2_truetype_StbTruetype.ttSHORT(data,compIndex);
			compIndex += 2;
			var gidx = kha_graphics2_truetype_StbTruetype.ttSHORT(data,compIndex);
			compIndex += 2;
			if((flags & 2) != 0) {
				if((flags & 1) != 0) {
					mtx4 = kha_graphics2_truetype_StbTruetype.ttSHORT(data,compIndex);
					compIndex += 2;
					mtx5 = kha_graphics2_truetype_StbTruetype.ttSHORT(data,compIndex);
					compIndex += 2;
				} else {
					mtx4 = kha_graphics2_truetype_StbTruetype.ttCHAR(data,compIndex);
					++compIndex;
					mtx5 = kha_graphics2_truetype_StbTruetype.ttCHAR(data,compIndex);
					++compIndex;
				}
			} else {
				throw haxe_Exception.thrown("Error");
			}
			if((flags & 8) != 0) {
				mtx3 = kha_graphics2_truetype_StbTruetype.ttSHORT(data,compIndex) / 16384.0;
				mtx0 = mtx3;
				compIndex += 2;
				mtx2 = 0;
				mtx1 = mtx2;
			} else if((flags & 64) != 0) {
				mtx0 = kha_graphics2_truetype_StbTruetype.ttSHORT(data,compIndex) / 16384.0;
				compIndex += 2;
				mtx2 = 0;
				mtx1 = mtx2;
				mtx3 = kha_graphics2_truetype_StbTruetype.ttSHORT(data,compIndex) / 16384.0;
				compIndex += 2;
			} else if((flags & 128) != 0) {
				mtx0 = kha_graphics2_truetype_StbTruetype.ttSHORT(data,compIndex) / 16384.0;
				compIndex += 2;
				mtx1 = kha_graphics2_truetype_StbTruetype.ttSHORT(data,compIndex) / 16384.0;
				compIndex += 2;
				mtx2 = kha_graphics2_truetype_StbTruetype.ttSHORT(data,compIndex) / 16384.0;
				compIndex += 2;
				mtx3 = kha_graphics2_truetype_StbTruetype.ttSHORT(data,compIndex) / 16384.0;
				compIndex += 2;
			}
			var m = Math.sqrt(mtx0 * mtx0 + mtx1 * mtx1);
			var n = Math.sqrt(mtx2 * mtx2 + mtx3 * mtx3);
			comp_verts = kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphShape(info,gidx);
			comp_num_verts = comp_verts == null ? 0 : comp_verts.length;
			if(comp_num_verts > 0) {
				var _g = 0;
				var _g1 = comp_num_verts;
				while(_g < _g1) {
					var v = comp_verts[_g++];
					var x = v.x;
					var y = v.y;
					v.x = m * (mtx0 * x + mtx2 * y + mtx4) | 0;
					v.y = n * (mtx1 * x + mtx3 * y + mtx5) | 0;
					x = v.cx;
					y = v.cy;
					v.cx = m * (mtx0 * x + mtx2 * y + mtx4) | 0;
					v.cy = n * (mtx1 * x + mtx3 * y + mtx5) | 0;
				}
				tmp = new Array(num_vertices + comp_num_verts);
				if(tmp == null) {
					return null;
				}
				if(num_vertices > 0) {
					kha_graphics2_truetype_StbTruetype.copyVertices(vertices,tmp,0,num_vertices);
				}
				kha_graphics2_truetype_StbTruetype.copyVertices(comp_verts,tmp,num_vertices,comp_num_verts);
				vertices = tmp;
				num_vertices += comp_num_verts;
			}
			more = flags & 32;
		}
	}
	if(vertices == null) {
		return null;
	}
	if(vertices.length < num_vertices) {
		throw haxe_Exception.thrown("Error");
	}
	if(num_vertices < vertices.length) {
		var tmp = new Array(num_vertices);
		kha_graphics2_truetype_StbTruetype.copyVertices(vertices,tmp,0,num_vertices);
		return tmp;
	} else {
		return vertices;
	}
};
kha_graphics2_truetype_StbTruetype.STBTT__CSCTX_INIT = function(bounds) {
	var tmp = new kha_graphics2_truetype_Stbtt_$_$csctx();
	tmp.bounds = bounds;
	tmp.started = false;
	tmp.first_x = 0;
	tmp.first_y = 0;
	tmp.x = 0;
	tmp.y = 0;
	tmp.min_x = 0;
	tmp.min_y = 0;
	tmp.max_x = 0;
	tmp.max_y = 0;
	tmp.pvertices = null;
	tmp.num_vertices = 0;
	return tmp;
};
kha_graphics2_truetype_StbTruetype.stbtt__track_vertex = function(c,x,y) {
	if(x > c.max_x || !c.started) {
		c.max_x = x;
	}
	if(y > c.max_y || !c.started) {
		c.max_y = y;
	}
	if(x < c.min_x || !c.started) {
		c.min_x = x;
	}
	if(y < c.min_y || !c.started) {
		c.min_y = y;
	}
	c.started = true;
};
kha_graphics2_truetype_StbTruetype.stbtt__csctx_v = function(c,type,x,y,cx,cy,cx1,cy1) {
	if(c.bounds) {
		kha_graphics2_truetype_StbTruetype.stbtt__track_vertex(c,x,y);
		if(type == 4) {
			kha_graphics2_truetype_StbTruetype.stbtt__track_vertex(c,cx,cy);
			kha_graphics2_truetype_StbTruetype.stbtt__track_vertex(c,cx1,cy1);
		}
	} else {
		kha_graphics2_truetype_StbTruetype.stbtt_setvertex(c.pvertices[c.num_vertices],type,x,y,cx,cy);
		c.pvertices[c.num_vertices].cx1 = js_Boot.__cast(cx1 , Int);
		c.pvertices[c.num_vertices].cy1 = js_Boot.__cast(cy1 , Int);
	}
	c.num_vertices++;
};
kha_graphics2_truetype_StbTruetype.stbtt__csctx_close_shape = function(ctx) {
	if(ctx.first_x != ctx.x || ctx.first_y != ctx.y) {
		kha_graphics2_truetype_StbTruetype.stbtt__csctx_v(ctx,2,ctx.first_x | 0,ctx.first_y | 0,0,0,0,0);
	}
};
kha_graphics2_truetype_StbTruetype.stbtt__csctx_rmove_to = function(ctx,dx,dy) {
	kha_graphics2_truetype_StbTruetype.stbtt__csctx_close_shape(ctx);
	ctx.first_x = ctx.x = ctx.x + dx;
	ctx.first_y = ctx.y = ctx.y + dy;
	kha_graphics2_truetype_StbTruetype.stbtt__csctx_v(ctx,1,ctx.x | 0,ctx.y | 0,0,0,0,0);
};
kha_graphics2_truetype_StbTruetype.stbtt__csctx_rline_to = function(ctx,dx,dy) {
	ctx.x += dx;
	ctx.y += dy;
	kha_graphics2_truetype_StbTruetype.stbtt__csctx_v(ctx,2,ctx.x | 0,ctx.y | 0,0,0,0,0);
};
kha_graphics2_truetype_StbTruetype.stbtt__csctx_rccurve_to = function(ctx,dx1,dy1,dx2,dy2,dx3,dy3) {
	var cx1 = ctx.x + dx1;
	var cy1 = ctx.y + dy1;
	var cx2 = cx1 + dx2;
	var cy2 = cy1 + dy2;
	ctx.x = cx2 + dx3;
	ctx.y = cy2 + dy3;
	kha_graphics2_truetype_StbTruetype.stbtt__csctx_v(ctx,4,ctx.x | 0,ctx.y | 0,cx1 | 0,cy1 | 0,cx2 | 0,cy2 | 0);
};
kha_graphics2_truetype_StbTruetype.stbtt__get_subr = function(idx,n) {
	if(0 > idx.data.get_length()) {
		throw haxe_Exception.thrown("Error");
	}
	idx.cursor = 0 > idx.data.get_length() ? idx.data.get_length() : 0;
	var count = kha_graphics2_truetype_StbTruetype.stbtt__buf_get(idx,2);
	var bias = 107;
	if(count >= 33900) {
		bias = 32768;
	} else if(count >= 1240) {
		bias = 1131;
	}
	n += bias;
	if(n < 0 || n >= count) {
		return kha_graphics2_truetype_StbTruetype.stbtt__new_buf(null,0);
	}
	return kha_graphics2_truetype_StbTruetype.stbtt__cff_index_get(idx,n);
};
kha_graphics2_truetype_StbTruetype.stbtt__run_charstring = function(info,glyph_index,c) {
	var in_header = true;
	var maskbits = 0;
	var subr_stack_height = 0;
	var sp = 0;
	var v;
	var i;
	var b0;
	var has_subrs = false;
	var clear_stack;
	var _g = [];
	_g.push(0);
	_g.push(0);
	_g.push(0);
	_g.push(0);
	_g.push(0);
	_g.push(0);
	_g.push(0);
	_g.push(0);
	_g.push(0);
	_g.push(0);
	_g.push(0);
	_g.push(0);
	_g.push(0);
	_g.push(0);
	_g.push(0);
	_g.push(0);
	_g.push(0);
	_g.push(0);
	_g.push(0);
	_g.push(0);
	_g.push(0);
	_g.push(0);
	_g.push(0);
	_g.push(0);
	_g.push(0);
	_g.push(0);
	_g.push(0);
	_g.push(0);
	_g.push(0);
	_g.push(0);
	_g.push(0);
	_g.push(0);
	_g.push(0);
	_g.push(0);
	_g.push(0);
	_g.push(0);
	_g.push(0);
	_g.push(0);
	_g.push(0);
	_g.push(0);
	_g.push(0);
	_g.push(0);
	_g.push(0);
	_g.push(0);
	_g.push(0);
	_g.push(0);
	_g.push(0);
	_g.push(0);
	var _g1 = [];
	_g1.push(new kha_graphics2_truetype_Stbtt_$_$buf());
	_g1.push(new kha_graphics2_truetype_Stbtt_$_$buf());
	_g1.push(new kha_graphics2_truetype_Stbtt_$_$buf());
	_g1.push(new kha_graphics2_truetype_Stbtt_$_$buf());
	_g1.push(new kha_graphics2_truetype_Stbtt_$_$buf());
	_g1.push(new kha_graphics2_truetype_Stbtt_$_$buf());
	_g1.push(new kha_graphics2_truetype_Stbtt_$_$buf());
	_g1.push(new kha_graphics2_truetype_Stbtt_$_$buf());
	_g1.push(new kha_graphics2_truetype_Stbtt_$_$buf());
	_g1.push(new kha_graphics2_truetype_Stbtt_$_$buf());
	var subrs = info.subrs;
	var f;
	var b = kha_graphics2_truetype_StbTruetype.stbtt__cff_index_get(info.charstrings,glyph_index);
	while(b.cursor < b.data.get_length()) {
		i = 0;
		clear_stack = true;
		if(b.cursor >= b.data.get_length()) {
			b0 = 0;
		} else {
			var pos = b.cursor++;
			if(pos == null) {
				pos = 0;
			}
			b0 = b.data.readU8(pos);
		}
		switch(b0) {
		case 1:case 3:case 18:case 23:
			maskbits += sp / 2 | 0;
			break;
		case 4:
			in_header = false;
			if(sp < 1) {
				return false;
			}
			kha_graphics2_truetype_StbTruetype.stbtt__csctx_rmove_to(c,0,_g[sp - 1]);
			break;
		case 5:
			if(sp < 2) {
				return false;
			}
			while(i + 1 < sp) {
				kha_graphics2_truetype_StbTruetype.stbtt__csctx_rline_to(c,_g[i],_g[i + 1]);
				i += 2;
			}
			break;
		case 6:
			if(sp < 1) {
				return false;
			}
			while(i < sp) {
				kha_graphics2_truetype_StbTruetype.stbtt__csctx_rline_to(c,_g[i],0);
				++i;
				if(i >= sp) {
					break;
				}
				kha_graphics2_truetype_StbTruetype.stbtt__csctx_rline_to(c,0,_g[i]);
				++i;
			}
			break;
		case 7:
			if(sp < 1) {
				return false;
			}
			while(i < sp) {
				kha_graphics2_truetype_StbTruetype.stbtt__csctx_rline_to(c,0,_g[i]);
				++i;
				if(i >= sp) {
					break;
				}
				kha_graphics2_truetype_StbTruetype.stbtt__csctx_rline_to(c,_g[i],0);
				++i;
			}
			break;
		case 8:
			if(sp < 6) {
				return false;
			}
			while(i + 5 < sp) {
				kha_graphics2_truetype_StbTruetype.stbtt__csctx_rccurve_to(c,_g[i],_g[i + 1],_g[i + 2],_g[i + 3],_g[i + 4],_g[i + 5]);
				i += 6;
			}
			break;
		case 11:
			if(subr_stack_height <= 0) {
				return false;
			}
			b = _g1[--subr_stack_height];
			clear_stack = false;
			break;
		case 12:
			var dx1;
			var dx2;
			var dx3;
			var dx4;
			var dx5;
			var dx6;
			var dy1;
			var dy2;
			var dy3;
			var dy4;
			var dy5;
			var dy6;
			var dx;
			var dy;
			var b1;
			if(b.cursor >= b.data.get_length()) {
				b1 = 0;
			} else {
				var pos1 = b.cursor++;
				if(pos1 == null) {
					pos1 = 0;
				}
				b1 = b.data.readU8(pos1);
			}
			switch(b1) {
			case 34:
				if(sp < 7) {
					return false;
				}
				dx1 = _g[0];
				dx2 = _g[1];
				dy2 = _g[2];
				dx3 = _g[3];
				dx4 = _g[4];
				dx5 = _g[5];
				dx6 = _g[6];
				kha_graphics2_truetype_StbTruetype.stbtt__csctx_rccurve_to(c,dx1,0,dx2,dy2,dx3,0);
				kha_graphics2_truetype_StbTruetype.stbtt__csctx_rccurve_to(c,dx4,0,dx5,-dy2,dx6,0);
				break;
			case 35:
				if(sp < 13) {
					return false;
				}
				dx1 = _g[0];
				dy1 = _g[1];
				dx2 = _g[2];
				dy2 = _g[3];
				dx3 = _g[4];
				dy3 = _g[5];
				dx4 = _g[6];
				dy4 = _g[7];
				dx5 = _g[8];
				dy5 = _g[9];
				dx6 = _g[10];
				dy6 = _g[11];
				kha_graphics2_truetype_StbTruetype.stbtt__csctx_rccurve_to(c,dx1,dy1,dx2,dy2,dx3,dy3);
				kha_graphics2_truetype_StbTruetype.stbtt__csctx_rccurve_to(c,dx4,dy4,dx5,dy5,dx6,dy6);
				break;
			case 36:
				if(sp < 9) {
					return false;
				}
				dx1 = _g[0];
				dy1 = _g[1];
				dx2 = _g[2];
				dy2 = _g[3];
				dx3 = _g[4];
				dx4 = _g[5];
				dx5 = _g[6];
				dy5 = _g[7];
				dx6 = _g[8];
				kha_graphics2_truetype_StbTruetype.stbtt__csctx_rccurve_to(c,dx1,dy1,dx2,dy2,dx3,0);
				kha_graphics2_truetype_StbTruetype.stbtt__csctx_rccurve_to(c,dx4,0,dx5,dy5,dx6,-(dy1 + dy2 + dy5));
				break;
			case 37:
				if(sp < 11) {
					return false;
				}
				dx1 = _g[0];
				dy1 = _g[1];
				dx2 = _g[2];
				dy2 = _g[3];
				dx3 = _g[4];
				dy3 = _g[5];
				dx4 = _g[6];
				dy4 = _g[7];
				dx5 = _g[8];
				dy5 = _g[9];
				dy6 = _g[10];
				dx6 = dy6;
				dx = dx1 + dx2 + dx3 + dx4 + dx5;
				dy = dy1 + dy2 + dy3 + dy4 + dy5;
				if(Math.abs(dx) > Math.abs(dy)) {
					dy6 = -dy;
				} else {
					dx6 = -dx;
				}
				kha_graphics2_truetype_StbTruetype.stbtt__csctx_rccurve_to(c,dx1,dy1,dx2,dy2,dx3,dy3);
				kha_graphics2_truetype_StbTruetype.stbtt__csctx_rccurve_to(c,dx4,dy4,dx5,dy5,dx6,dy6);
				break;
			default:
				return false;
			}
			break;
		case 14:
			kha_graphics2_truetype_StbTruetype.stbtt__csctx_close_shape(c);
			return true;
		case 19:case 20:
			if(in_header) {
				maskbits += sp / 2 | 0;
			}
			in_header = false;
			var o = b.cursor + ((maskbits + 7) / 8 | 0);
			if(o > b.data.get_length() || o < 0) {
				throw haxe_Exception.thrown("Error");
			}
			b.cursor = o > b.data.get_length() || o < 0 ? b.data.get_length() : o;
			break;
		case 21:
			in_header = false;
			if(sp < 2) {
				return false;
			}
			kha_graphics2_truetype_StbTruetype.stbtt__csctx_rmove_to(c,_g[sp - 2],_g[sp - 1]);
			break;
		case 22:
			in_header = false;
			if(sp < 1) {
				return false;
			}
			kha_graphics2_truetype_StbTruetype.stbtt__csctx_rmove_to(c,_g[sp - 1],0);
			break;
		case 24:
			if(sp < 8) {
				return false;
			}
			while(i + 5 < sp - 2) {
				kha_graphics2_truetype_StbTruetype.stbtt__csctx_rccurve_to(c,_g[i],_g[i + 1],_g[i + 2],_g[i + 3],_g[i + 4],_g[i + 5]);
				i += 6;
			}
			if(i + 1 >= sp) {
				return false;
			}
			kha_graphics2_truetype_StbTruetype.stbtt__csctx_rline_to(c,_g[i],_g[i + 1]);
			break;
		case 25:
			if(sp < 8) {
				return false;
			}
			while(i + 1 < sp - 6) {
				kha_graphics2_truetype_StbTruetype.stbtt__csctx_rline_to(c,_g[i],_g[i + 1]);
				i += 2;
			}
			if(i + 5 >= sp) {
				return false;
			}
			kha_graphics2_truetype_StbTruetype.stbtt__csctx_rccurve_to(c,_g[i],_g[i + 1],_g[i + 2],_g[i + 3],_g[i + 4],_g[i + 5]);
			break;
		case 26:case 27:
			if(sp < 4) {
				return false;
			}
			f = 0.0;
			if((sp & 1) != 0) {
				f = _g[0];
				i = 1;
			}
			while(i + 3 < sp) {
				if(b0 == 27) {
					kha_graphics2_truetype_StbTruetype.stbtt__csctx_rccurve_to(c,_g[i],f,_g[i + 1],_g[i + 2],_g[i + 3],0.0);
				} else {
					kha_graphics2_truetype_StbTruetype.stbtt__csctx_rccurve_to(c,f,_g[i],_g[i + 1],_g[i + 2],0.0,_g[i + 3]);
				}
				f = 0.0;
				i += 4;
			}
			break;
		case 10:case 29:
			if(b0 == 10) {
				if(!has_subrs) {
					if(info.fdselect.data.get_length() != 0) {
						var fdselect = info.fdselect;
						var nranges;
						var start;
						var end;
						var v1;
						var fmt;
						var fdselector = -1;
						if(0 > fdselect.data.get_length()) {
							throw haxe_Exception.thrown("Error");
						}
						fdselect.cursor = 0 > fdselect.data.get_length() ? fdselect.data.get_length() : 0;
						if(fdselect.cursor >= fdselect.data.get_length()) {
							fmt = 0;
						} else {
							var pos2 = fdselect.cursor++;
							if(pos2 == null) {
								pos2 = 0;
							}
							fmt = fdselect.data.readU8(pos2);
						}
						if(fmt == 0) {
							var o1 = fdselect.cursor + glyph_index;
							if(o1 > fdselect.data.get_length() || o1 < 0) {
								throw haxe_Exception.thrown("Error");
							}
							fdselect.cursor = o1 > fdselect.data.get_length() || o1 < 0 ? fdselect.data.get_length() : o1;
							if(fdselect.cursor >= fdselect.data.get_length()) {
								fdselector = 0;
							} else {
								var pos3 = fdselect.cursor++;
								if(pos3 == null) {
									pos3 = 0;
								}
								fdselector = fdselect.data.readU8(pos3);
							}
						} else if(fmt == 3) {
							nranges = kha_graphics2_truetype_StbTruetype.stbtt__buf_get(fdselect,2);
							start = kha_graphics2_truetype_StbTruetype.stbtt__buf_get(fdselect,2);
							var _g2 = 0;
							while(_g2 < nranges) {
								++_g2;
								if(fdselect.cursor >= fdselect.data.get_length()) {
									v1 = 0;
								} else {
									var pos4 = fdselect.cursor++;
									if(pos4 == null) {
										pos4 = 0;
									}
									v1 = fdselect.data.readU8(pos4);
								}
								end = kha_graphics2_truetype_StbTruetype.stbtt__buf_get(fdselect,2);
								if(glyph_index >= start && glyph_index < end) {
									fdselector = v1;
									break;
								}
								start = end;
							}
						}
						if(fdselector == -1) {
							kha_graphics2_truetype_StbTruetype.stbtt__new_buf(null,0);
						}
						subrs = kha_graphics2_truetype_StbTruetype.stbtt__get_subrs(info.cff,kha_graphics2_truetype_StbTruetype.stbtt__cff_index_get(info.fontdicts,fdselector));
					}
					has_subrs = true;
				}
			}
			if(sp < 1) {
				return false;
			}
			v = _g[--sp] | 0;
			if(subr_stack_height >= 10) {
				return false;
			}
			_g1[subr_stack_height++] = b;
			b = kha_graphics2_truetype_StbTruetype.stbtt__get_subr(b0 == 10 ? subrs : info.gsubrs,v);
			if(b.data.get_length() == 0) {
				return false;
			}
			b.cursor = 0;
			clear_stack = false;
			break;
		case 30:
			if(sp < 4) {
				return false;
			}
			while(i + 3 < sp) {
				kha_graphics2_truetype_StbTruetype.stbtt__csctx_rccurve_to(c,0,_g[i],_g[i + 1],_g[i + 2],_g[i + 3],sp - i == 5 ? _g[i + 4] : 0);
				i += 4;
				if(i + 3 >= sp) {
					break;
				}
				kha_graphics2_truetype_StbTruetype.stbtt__csctx_rccurve_to(c,_g[i],0,_g[i + 1],_g[i + 2],sp - i == 5 ? _g[i + 4] : 0,_g[i + 3]);
				i += 4;
			}
			break;
		case 31:
			if(sp < 4) {
				return false;
			}
			while(i + 3 < sp) {
				kha_graphics2_truetype_StbTruetype.stbtt__csctx_rccurve_to(c,_g[i],0,_g[i + 1],_g[i + 2],sp - i == 5 ? _g[i + 4] : 0,_g[i + 3]);
				i += 4;
				if(i + 3 >= sp) {
					break;
				}
				kha_graphics2_truetype_StbTruetype.stbtt__csctx_rccurve_to(c,0,_g[i],_g[i + 1],_g[i + 2],_g[i + 3],sp - i == 5 ? _g[i + 4] : 0);
				i += 4;
			}
			break;
		default:
			if(b0 != 255 && b0 != 28 && (b0 < 32 || b0 > 254)) {
				return false;
			}
			if(b0 == 255) {
				f = kha_graphics2_truetype_StbTruetype.stbtt__buf_get(b,4) / 65536;
			} else {
				var o2 = b.cursor + (-1);
				if(o2 > b.data.get_length() || o2 < 0) {
					throw haxe_Exception.thrown("Error");
				}
				b.cursor = o2 > b.data.get_length() || o2 < 0 ? b.data.get_length() : o2;
				f = kha_graphics2_truetype_StbTruetype.stbtt__cff_int(b);
			}
			if(sp >= 48) {
				return false;
			}
			_g[sp++] = f;
			clear_stack = false;
		}
		if(clear_stack) {
			sp = 0;
		}
	}
	return false;
};
kha_graphics2_truetype_StbTruetype.stbtt__GetGlyphShapeT2 = function(info,glyph_index) {
	var count_ctx = kha_graphics2_truetype_StbTruetype.STBTT__CSCTX_INIT(true);
	var output_ctx = kha_graphics2_truetype_StbTruetype.STBTT__CSCTX_INIT(false);
	if(kha_graphics2_truetype_StbTruetype.stbtt__run_charstring(info,glyph_index,count_ctx)) {
		output_ctx.pvertices = new Array(count_ctx.num_vertices);
		var _g = 0;
		var _g1 = count_ctx.num_vertices;
		while(_g < _g1) output_ctx.pvertices[_g++] = new kha_graphics2_truetype_Stbtt_$vertex();
		if(kha_graphics2_truetype_StbTruetype.stbtt__run_charstring(info,glyph_index,output_ctx)) {
			if(output_ctx.num_vertices != count_ctx.num_vertices) {
				throw haxe_Exception.thrown("Error");
			}
			return output_ctx.pvertices;
		}
	}
	return null;
};
kha_graphics2_truetype_StbTruetype.stbtt__GetGlyphInfoT2 = function(info,glyph_index,rect) {
	var c = kha_graphics2_truetype_StbTruetype.STBTT__CSCTX_INIT(true);
	var r = kha_graphics2_truetype_StbTruetype.stbtt__run_charstring(info,glyph_index,c);
	if(rect != null) {
		rect.x0 = r ? c.min_x : 0;
		rect.y0 = r ? c.min_y : 0;
		rect.x1 = r ? c.max_x : 0;
		rect.y1 = r ? c.max_y : 0;
	}
	if(r) {
		return c.num_vertices;
	} else {
		return 0;
	}
};
kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphShape = function(info,glyph_index) {
	if(info.cff.data == null || info.cff.data.get_length() == 0) {
		return kha_graphics2_truetype_StbTruetype.stbtt__GetGlyphShapeTT(info,glyph_index);
	} else {
		return kha_graphics2_truetype_StbTruetype.stbtt__GetGlyphShapeT2(info,glyph_index);
	}
};
kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphHMetrics = function(info,glyph_index) {
	var numOfLongHorMetrics = kha_graphics2_truetype_StbTruetype.ttUSHORT(info.data,info.hhea + 34);
	var metrics = new kha_graphics2_truetype_Stbtt_$temp_$glyph_$h_$metrics();
	if(glyph_index < numOfLongHorMetrics) {
		metrics.advanceWidth = kha_graphics2_truetype_StbTruetype.ttSHORT(info.data,info.hmtx + 4 * glyph_index);
		metrics.leftSideBearing = kha_graphics2_truetype_StbTruetype.ttSHORT(info.data,info.hmtx + 4 * glyph_index + 2);
	} else {
		metrics.advanceWidth = kha_graphics2_truetype_StbTruetype.ttSHORT(info.data,info.hmtx + 4 * (numOfLongHorMetrics - 1));
		metrics.leftSideBearing = kha_graphics2_truetype_StbTruetype.ttSHORT(info.data,info.hmtx + 4 * numOfLongHorMetrics + 2 * (glyph_index - numOfLongHorMetrics));
	}
	return metrics;
};
kha_graphics2_truetype_StbTruetype.stbtt_GetFontVMetrics = function(info) {
	var metrics = new kha_graphics2_truetype_Stbtt_$temp_$font_$v_$metrics();
	metrics.ascent = kha_graphics2_truetype_StbTruetype.ttSHORT(info.data,info.hhea + 4);
	metrics.descent = kha_graphics2_truetype_StbTruetype.ttSHORT(info.data,info.hhea + 6);
	metrics.lineGap = kha_graphics2_truetype_StbTruetype.ttSHORT(info.data,info.hhea + 8);
	return metrics;
};
kha_graphics2_truetype_StbTruetype.stbtt_ScaleForPixelHeight = function(info,height) {
	return height / (kha_graphics2_truetype_StbTruetype.ttSHORT(info.data,info.hhea + 4) - kha_graphics2_truetype_StbTruetype.ttSHORT(info.data,info.hhea + 6));
};
kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphBitmapBoxSubpixel = function(font,glyph,scale_x,scale_y,shift_x,shift_y) {
	var rect = new kha_graphics2_truetype_Stbtt_$temp_$rect();
	if(!kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphBox(font,glyph,rect)) {
		rect.x0 = 0;
		rect.y0 = 0;
		rect.x1 = 0;
		rect.y1 = 0;
	} else {
		var y0 = rect.y0;
		rect.x0 = Math.floor(rect.x0 * scale_x + shift_x);
		rect.y0 = Math.floor(-rect.y1 * scale_y + shift_y);
		rect.x1 = Math.ceil(rect.x1 * scale_x + shift_x);
		rect.y1 = Math.ceil(-y0 * scale_y + shift_y);
	}
	return rect;
};
kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphBitmapBox = function(font,glyph,scale_x,scale_y) {
	return kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphBitmapBoxSubpixel(font,glyph,scale_x,scale_y,0.0,0.0);
};
kha_graphics2_truetype_StbTruetype.stbtt__new_active = function(e,eIndex,off_x,start_point) {
	var z = new kha_graphics2_truetype_Stbtt_$_$active_$edge();
	var dxdy = (e[eIndex].x1 - e[eIndex].x0) / (e[eIndex].y1 - e[eIndex].y0);
	if(z == null) {
		throw haxe_Exception.thrown("Error");
	}
	if(z == null) {
		return z;
	}
	z.fdx = dxdy;
	z.fdy = dxdy != 0.0 ? 1.0 / dxdy : 0.0;
	z.fx = e[eIndex].x0 + dxdy * (start_point - e[eIndex].y0);
	z.fx -= off_x;
	z.direction = e[eIndex].invert ? 1.0 : -1.0;
	z.sy = e[eIndex].y0;
	z.ey = e[eIndex].y1;
	z.next = null;
	return z;
};
kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge = function(scanline,scanlineIndex,x,e,x0,y0,x1,y1) {
	if(y0 == y1) {
		return;
	}
	if(!(y0 < y1)) {
		throw haxe_Exception.thrown("Error");
	}
	if(!(e.sy <= e.ey)) {
		throw haxe_Exception.thrown("Error");
	}
	if(y0 > e.ey) {
		return;
	}
	if(y1 < e.sy) {
		return;
	}
	if(y0 < e.sy) {
		x0 += (x1 - x0) * (e.sy - y0) / (y1 - y0);
		y0 = e.sy;
	}
	if(y1 > e.ey) {
		x1 += (x1 - x0) * (e.ey - y1) / (y1 - y0);
		y1 = e.ey;
	}
	if(x0 == x) {
		if(!(x1 <= x + 1)) {
			throw haxe_Exception.thrown("Error");
		}
	} else if(x0 == x + 1) {
		if(!(x1 >= x)) {
			throw haxe_Exception.thrown("Error");
		}
	} else if(x0 <= x) {
		if(!(x1 <= x)) {
			throw haxe_Exception.thrown("Error");
		}
	} else if(x0 >= x + 1) {
		if(!(x1 >= x + 1)) {
			throw haxe_Exception.thrown("Error");
		}
	} else if(!(x1 >= x && x1 <= x + 1)) {
		throw haxe_Exception.thrown("Error");
	}
	if(x0 <= x && x1 <= x) {
		scanline[scanlineIndex + x] += e.direction * (y1 - y0);
	} else if(!(x0 >= x + 1 && x1 >= x + 1)) {
		if(!(x0 >= x && x0 <= x + 1 && x1 >= x && x1 <= x + 1)) {
			throw haxe_Exception.thrown("Error");
		}
		scanline[scanlineIndex + x] += e.direction * (y1 - y0) * (1 - (x0 - x + (x1 - x)) / 2);
	}
};
kha_graphics2_truetype_StbTruetype.stbtt__fill_active_edges_new = function(scanline,scanline_fill,scanline_fillIndex,len,e,y_top) {
	var y_bottom = y_top + 1;
	while(e != null) {
		if(!(e.ey >= y_top)) {
			throw haxe_Exception.thrown("Error");
		}
		if(e.fdx == 0) {
			var x0 = e.fx;
			if(x0 < len) {
				if(x0 >= 0) {
					kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(scanline,0,x0 | 0,e,x0,y_top,x0,y_bottom);
					kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(scanline_fill,scanline_fillIndex - 1,x0 + 1 | 0,e,x0,y_top,x0,y_bottom);
				} else {
					kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(scanline_fill,scanline_fillIndex - 1,0,e,x0,y_top,x0,y_bottom);
				}
			}
		} else {
			var x01 = e.fx;
			var dx = e.fdx;
			var xb = x01 + dx;
			var x_top;
			var x_bottom;
			var sy0;
			var sy1;
			var dy = e.fdy;
			if(!(e.sy <= y_bottom && e.ey >= y_top)) {
				throw haxe_Exception.thrown("Error");
			}
			if(e.sy > y_top) {
				x_top = x01 + dx * (e.sy - y_top);
				sy0 = e.sy;
			} else {
				x_top = x01;
				sy0 = y_top;
			}
			if(e.ey < y_bottom) {
				x_bottom = x01 + dx * (e.ey - y_top);
				sy1 = e.ey;
			} else {
				x_bottom = xb;
				sy1 = y_bottom;
			}
			if(x_top >= 0 && x_bottom >= 0 && x_top < len && x_bottom < len) {
				if((x_top | 0) == (x_bottom | 0)) {
					var x = x_top | 0;
					var height = sy1 - sy0;
					if(!(x >= 0 && x < len)) {
						throw haxe_Exception.thrown("Error");
					}
					scanline[x] += e.direction * (1 - (x_top - x + (x_bottom - x)) / 2) * height;
					scanline_fill[scanline_fillIndex + x] += e.direction * height;
				} else {
					if(x_top > x_bottom) {
						sy0 = y_bottom - (sy0 - y_top);
						sy1 = y_bottom - (sy1 - y_top);
						var t = sy0;
						sy0 = sy1;
						sy1 = t;
						t = x_bottom;
						x_bottom = x_top;
						x_top = t;
						dx = -dx;
						dy = -dy;
						t = x01;
						x01 = xb;
						xb = t;
					}
					var x1 = x_top | 0;
					var x2 = x_bottom | 0;
					var y_crossing = (x1 + 1 - x01) * dy + y_top;
					var sign = e.direction;
					var area = sign * (y_crossing - sy0);
					scanline[x1] += area * (1 - (x_top - x1 + (x1 + 1 - x1)) / 2);
					var step = sign * dy;
					var _g = x1 + 1;
					while(_g < x2) {
						scanline[_g++] += area + step / 2;
						area += step;
					}
					y_crossing += dy * (x2 - (x1 + 1));
					if(!(Math.abs(area) <= 1.01)) {
						throw haxe_Exception.thrown("Error");
					}
					scanline[x2] += area + sign * (1 - (x2 - x2 + (x_bottom - x2)) / 2) * (sy1 - y_crossing);
					scanline_fill[scanline_fillIndex + x2] += sign * (sy1 - sy0);
				}
			} else {
				var _g1 = 0;
				while(_g1 < len) {
					var x3 = _g1++;
					var x11 = x3;
					var x21 = x3 + 1;
					var x31 = xb;
					var y1 = (x3 - x01) / dx + y_top;
					var y2 = (x3 + 1 - x01) / dx + y_top;
					if(x01 < x11 && x31 > x21) {
						kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(scanline,0,x3,e,x01,y_top,x11,y1);
						kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(scanline,0,x3,e,x11,y1,x21,y2);
						kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(scanline,0,x3,e,x21,y2,x31,y_bottom);
					} else if(x31 < x11 && x01 > x21) {
						kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(scanline,0,x3,e,x01,y_top,x21,y2);
						kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(scanline,0,x3,e,x21,y2,x11,y1);
						kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(scanline,0,x3,e,x11,y1,x31,y_bottom);
					} else if(x01 < x11 && x31 > x11) {
						kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(scanline,0,x3,e,x01,y_top,x11,y1);
						kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(scanline,0,x3,e,x11,y1,x31,y_bottom);
					} else if(x31 < x11 && x01 > x11) {
						kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(scanline,0,x3,e,x01,y_top,x11,y1);
						kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(scanline,0,x3,e,x11,y1,x31,y_bottom);
					} else if(x01 < x21 && x31 > x21) {
						kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(scanline,0,x3,e,x01,y_top,x21,y2);
						kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(scanline,0,x3,e,x21,y2,x31,y_bottom);
					} else if(x31 < x21 && x01 > x21) {
						kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(scanline,0,x3,e,x01,y_top,x21,y2);
						kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(scanline,0,x3,e,x21,y2,x31,y_bottom);
					} else {
						kha_graphics2_truetype_StbTruetype.stbtt__handle_clipped_edge(scanline,0,x3,e,x01,y_top,x31,y_bottom);
					}
				}
			}
		}
		e = e.next;
	}
};
kha_graphics2_truetype_StbTruetype.stbtt__rasterize_sorted_edges = function(result,e,n,vsubsample,off_x,off_y) {
	var active = null;
	var j = 0;
	var scanline;
	var scanline2Index = 0;
	var eIndex = 0;
	if(result.w > 64) {
		scanline = new Array(result.w * 2 + 1);
	} else {
		scanline = new Array(129);
	}
	var scanline2 = scanline;
	scanline2Index = result.w;
	var y = off_y;
	e[n].y0 = off_y + result.h + 1;
	while(j < result.h) {
		var scan_y_top = y + 0.0;
		var scan_y_bottom = y + 1.0;
		var step_value = active;
		var step_parent = null;
		var _g = 0;
		var _g1 = result.w;
		while(_g < _g1) scanline[_g++] = 0;
		var _g2 = 0;
		var _g3 = result.w + 1;
		while(_g2 < _g3) scanline2[scanline2Index + _g2++] = 0;
		while(step_value != null) {
			var z = step_value;
			if(z.ey <= scan_y_top) {
				if(step_parent == null) {
					active = z.next;
					step_value = z.next;
				} else {
					step_parent.next = z.next;
					step_value = z.next;
				}
				if(z.direction == 0) {
					throw haxe_Exception.thrown("Error");
				}
				z.direction = 0;
			} else {
				step_parent = step_value;
				step_value = step_value.next;
			}
		}
		while(e[eIndex].y0 <= scan_y_bottom) {
			if(e[eIndex].y0 != e[eIndex].y1) {
				var z1 = kha_graphics2_truetype_StbTruetype.stbtt__new_active(e,eIndex,off_x,scan_y_top);
				if(!(z1.ey >= scan_y_top)) {
					throw haxe_Exception.thrown("Error");
				}
				if(z1 != null) {
					if(j == 0 && off_y != 0) {
						if(z1.ey < scan_y_top) {
							z1.ey = scan_y_top;
						}
					}
					if(!(z1.ey >= scan_y_top)) {
						throw haxe_Exception.thrown("Error");
					}
				}
				z1.next = active;
				active = z1;
			}
			++eIndex;
		}
		if(active != null) {
			kha_graphics2_truetype_StbTruetype.stbtt__fill_active_edges_new(scanline,scanline2,scanline2Index + 1,result.w,active,scan_y_top);
		}
		var sum = 0;
		var _g4 = 0;
		var _g5 = result.w;
		while(_g4 < _g5) {
			var i = _g4++;
			sum += scanline2[scanline2Index + i];
			var k = scanline[i] + sum;
			k = Math.abs(k) * 255.0 + 0.5;
			var m = k | 0;
			if(m > 255) {
				m = 255;
			}
			result.pixels.writeU8(result.pixels_offset + j * result.stride + i,m);
		}
		step_parent = null;
		step_value = active;
		while(step_value != null) {
			var z2 = step_value;
			z2.fx += z2.fdx;
			step_parent = step_value;
			step_value = step_value.next;
		}
		++y;
		++j;
	}
};
kha_graphics2_truetype_StbTruetype.STBTT__COMPARE = function(a,b) {
	return a.y0 < b.y0;
};
kha_graphics2_truetype_StbTruetype.stbtt__sort_edges_ins_sort = function(p,n) {
	var j;
	var _g = 1;
	while(_g < n) {
		var i = _g++;
		var t = p[i];
		j = i;
		while(j > 0) {
			if(!kha_graphics2_truetype_StbTruetype.STBTT__COMPARE(t,p[j - 1])) {
				break;
			}
			p[j] = p[j - 1];
			--j;
		}
		if(i != j) {
			p[j] = t;
		}
	}
};
kha_graphics2_truetype_StbTruetype.stbtt__sort_edges_quicksort = function(p,pIndex,n) {
	while(n > 12) {
		var t;
		var c;
		var m = n >> 1;
		var c12 = kha_graphics2_truetype_StbTruetype.STBTT__COMPARE(p[pIndex + m],p[pIndex + n - 1]);
		if(kha_graphics2_truetype_StbTruetype.STBTT__COMPARE(p[pIndex],p[pIndex + m]) != c12) {
			c = kha_graphics2_truetype_StbTruetype.STBTT__COMPARE(p[pIndex],p[pIndex + n - 1]);
			var z = c == c12 ? 0 : n - 1;
			t = p[pIndex + z];
			p[pIndex + z] = p[pIndex + m];
			p[pIndex + m] = t;
		}
		t = p[pIndex];
		p[pIndex] = p[pIndex + m];
		p[pIndex + m] = t;
		var i = 1;
		var j = n - 1;
		while(true) {
			while(kha_graphics2_truetype_StbTruetype.STBTT__COMPARE(p[pIndex + i],p[pIndex])) ++i;
			while(kha_graphics2_truetype_StbTruetype.STBTT__COMPARE(p[pIndex],p[pIndex + j])) --j;
			if(i >= j) {
				break;
			}
			t = p[pIndex + i];
			p[pIndex + i] = p[pIndex + j];
			p[pIndex + j] = t;
			++i;
			--j;
		}
		if(j < n - i) {
			kha_graphics2_truetype_StbTruetype.stbtt__sort_edges_quicksort(p,pIndex,j);
			pIndex += i;
			n -= i;
		} else {
			kha_graphics2_truetype_StbTruetype.stbtt__sort_edges_quicksort(p,pIndex + i,n - i);
			n = j;
		}
	}
};
kha_graphics2_truetype_StbTruetype.stbtt__sort_edges = function(p,n) {
	kha_graphics2_truetype_StbTruetype.stbtt__sort_edges_quicksort(p,0,n);
	kha_graphics2_truetype_StbTruetype.stbtt__sort_edges_ins_sort(p,n);
};
kha_graphics2_truetype_StbTruetype.stbtt__rasterize = function(result,pts,wcount,windings,scale_x,scale_y,shift_x,shift_y,off_x,off_y,invert) {
	var y_scale_inv = invert ? -scale_y : scale_y;
	var j;
	var n = 0;
	var _g = 0;
	while(_g < windings) n += wcount[_g++];
	var e = new Array(n + 1);
	if(e == null) {
		return;
	} else {
		var _g = 0;
		var _g1 = e.length;
		while(_g < _g1) e[_g++] = new kha_graphics2_truetype_Stbtt_$_$edge();
	}
	n = 0;
	var m = 0;
	var _g = 0;
	while(_g < windings) {
		var i = _g++;
		var pIndex = m;
		m += wcount[i];
		j = wcount[i] - 1;
		var _g1 = 0;
		var _g2 = wcount[i];
		while(_g1 < _g2) {
			var k = _g1++;
			var a = k;
			var b = j;
			if(pts[pIndex + j].y == pts[pIndex + k].y) {
				j = k;
				continue;
			}
			e[n].invert = false;
			if(invert ? pts[pIndex + j].y > pts[pIndex + k].y : pts[pIndex + j].y < pts[pIndex + k].y) {
				e[n].invert = true;
				a = j;
				b = k;
			}
			e[n].x0 = pts[pIndex + a].x * scale_x + shift_x;
			e[n].y0 = pts[pIndex + a].y * y_scale_inv + shift_y;
			e[n].x1 = pts[pIndex + b].x * scale_x + shift_x;
			e[n].y1 = pts[pIndex + b].y * y_scale_inv + shift_y;
			++n;
			j = k;
		}
	}
	kha_graphics2_truetype_StbTruetype.stbtt__sort_edges(e,n);
	kha_graphics2_truetype_StbTruetype.stbtt__rasterize_sorted_edges(result,e,n,1,off_x,off_y);
};
kha_graphics2_truetype_StbTruetype.stbtt__add_point = function(points,n,x,y) {
	if(points == null) {
		return;
	}
	points[n].x = x;
	points[n].y = y;
};
kha_graphics2_truetype_StbTruetype.stbtt__tesselate_curve = function(points,num_points,x0,y0,x1,y1,x2,y2,objspace_flatness_squared,n) {
	var mx = (x0 + 2 * x1 + x2) / 4;
	var my = (y0 + 2 * y1 + y2) / 4;
	var dx = (x0 + x2) / 2 - mx;
	var dy = (y0 + y2) / 2 - my;
	if(n > 16) {
		return 1;
	}
	if(dx * dx + dy * dy > objspace_flatness_squared) {
		kha_graphics2_truetype_StbTruetype.stbtt__tesselate_curve(points,num_points,x0,y0,(x0 + x1) / 2.0,(y0 + y1) / 2.0,mx,my,objspace_flatness_squared,n + 1);
		kha_graphics2_truetype_StbTruetype.stbtt__tesselate_curve(points,num_points,mx,my,(x1 + x2) / 2.0,(y1 + y2) / 2.0,x2,y2,objspace_flatness_squared,n + 1);
	} else {
		kha_graphics2_truetype_StbTruetype.stbtt__add_point(points,num_points.value,x2,y2);
		num_points.value += 1;
	}
	return 1;
};
kha_graphics2_truetype_StbTruetype.stbtt__tesselate_cubic = function(points,num_points,x0,y0,x1,y1,x2,y2,x3,y3,objspace_flatness_squared,n) {
	while(true) {
		var dx0 = x1 - x0;
		var dy0 = y1 - y0;
		var dx1 = x2 - x1;
		var dy1 = y2 - y1;
		var dx2 = x3 - x2;
		var dy2 = y3 - y2;
		var dx = x3 - x0;
		var dy = y3 - y0;
		var longlen = Math.sqrt(dx0 * dx0 + dy0 * dy0) + Math.sqrt(dx1 * dx1 + dy1 * dy1) + Math.sqrt(dx2 * dx2 + dy2 * dy2);
		var shortlen = Math.sqrt(dx * dx + dy * dy);
		if(n > 16) {
			return;
		}
		if(longlen * longlen - shortlen * shortlen > objspace_flatness_squared) {
			var x01 = (x0 + x1) / 2;
			var y01 = (y0 + y1) / 2;
			var x12 = (x1 + x2) / 2;
			var y12 = (y1 + y2) / 2;
			var x23 = (x2 + x3) / 2;
			var y23 = (y2 + y3) / 2;
			var xa = (x01 + x12) / 2;
			var ya = (y01 + y12) / 2;
			var xb = (x12 + x23) / 2;
			var yb = (y12 + y23) / 2;
			var mx = (xa + xb) / 2;
			var my = (ya + yb) / 2;
			kha_graphics2_truetype_StbTruetype.stbtt__tesselate_cubic(points,num_points,x0,y0,x01,y01,xa,ya,mx,my,objspace_flatness_squared,n + 1);
			x0 = mx;
			y0 = my;
			x1 = xb;
			y1 = yb;
			x2 = x23;
			y2 = y23;
			n += 1;
			continue;
		} else {
			kha_graphics2_truetype_StbTruetype.stbtt__add_point(points,num_points.value,x3,y3);
			num_points.value += 1;
		}
		return;
	}
};
kha_graphics2_truetype_StbTruetype.stbtt_FlattenCurves = function(vertices,num_verts,objspace_flatness,contour_lengths,num_contours) {
	var points = null;
	var num_points = 0;
	var objspace_flatness_squared = objspace_flatness * objspace_flatness;
	var n = 0;
	var start = 0;
	var _g = 0;
	while(_g < num_verts) if(vertices[_g++].type == 1) {
		++n;
	}
	num_contours.value = n;
	if(n == 0) {
		return null;
	}
	contour_lengths.value = new Array(n);
	if(contour_lengths.value == null) {
		num_contours.value = 0;
		return null;
	}
	var _g = 0;
	while(_g < 2) {
		var x = 0;
		var y = 0;
		if(_g++ == 1) {
			points = new Array(num_points);
			if(points == null) {
				contour_lengths.value = null;
				num_contours.value = 0;
				return null;
			} else {
				var _g1 = 0;
				var _g2 = points.length;
				while(_g1 < _g2) points[_g1++] = new kha_graphics2_truetype_Stbtt_$_$point();
			}
		}
		num_points = 0;
		n = -1;
		var _g3 = 0;
		while(_g3 < num_verts) {
			var i = _g3++;
			switch(vertices[i].type) {
			case 1:
				if(n >= 0) {
					contour_lengths.value[n] = num_points - start;
				}
				++n;
				start = num_points;
				x = vertices[i].x;
				y = vertices[i].y;
				kha_graphics2_truetype_StbTruetype.stbtt__add_point(points,num_points++,x,y);
				break;
			case 2:
				x = vertices[i].x;
				y = vertices[i].y;
				kha_graphics2_truetype_StbTruetype.stbtt__add_point(points,num_points++,x,y);
				break;
			case 3:
				var num_points_reference = { value : num_points};
				kha_graphics2_truetype_StbTruetype.stbtt__tesselate_curve(points,num_points_reference,x,y,vertices[i].cx,vertices[i].cy,vertices[i].x,vertices[i].y,objspace_flatness_squared,0);
				num_points = num_points_reference.value;
				x = vertices[i].x;
				y = vertices[i].y;
				break;
			case 4:
				var num_points_reference1 = { value : num_points};
				kha_graphics2_truetype_StbTruetype.stbtt__tesselate_cubic(points,num_points_reference1,x,y,vertices[i].cx,vertices[i].cy,vertices[i].cx1,vertices[i].cy1,vertices[i].x,vertices[i].y,objspace_flatness_squared,0);
				num_points = num_points_reference1.value;
				x = vertices[i].x;
				y = vertices[i].y;
				break;
			}
		}
		contour_lengths.value[n] = num_points - start;
	}
	return points;
};
kha_graphics2_truetype_StbTruetype.stbtt_Rasterize = function(result,flatness_in_pixels,vertices,num_verts,scale_x,scale_y,shift_x,shift_y,x_off,y_off,invert) {
	var winding_count = 0;
	var winding_lengths = null;
	var winding_count_reference = { value : 0};
	var winding_lengths_reference = new kha_graphics2_truetype_VectorOfIntPointer();
	var windings = kha_graphics2_truetype_StbTruetype.stbtt_FlattenCurves(vertices,num_verts,flatness_in_pixels / (scale_x > scale_y ? scale_y : scale_x),winding_lengths_reference,winding_count_reference);
	winding_count = winding_count_reference.value;
	winding_lengths = winding_lengths_reference.value;
	if(windings != null) {
		kha_graphics2_truetype_StbTruetype.stbtt__rasterize(result,windings,winding_lengths,winding_count,scale_x,scale_y,shift_x,shift_y,x_off,y_off,invert);
	}
};
kha_graphics2_truetype_StbTruetype.stbtt_MakeGlyphBitmapSubpixel = function(info,output,output_offset,out_w,out_h,out_stride,scale_x,scale_y,shift_x,shift_y,glyph) {
	var ix0 = 0;
	var iy0 = 0;
	var vertices = kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphShape(info,glyph);
	var num_verts = vertices == null ? 0 : vertices.length;
	var gbm = new kha_graphics2_truetype_Stbtt_$_$bitmap();
	var rect = kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphBitmapBoxSubpixel(info,glyph,scale_x,scale_y,shift_x,shift_y);
	ix0 = rect.x0;
	iy0 = rect.y0;
	gbm.pixels = output;
	gbm.pixels_offset = output_offset;
	gbm.w = out_w;
	gbm.h = out_h;
	gbm.stride = out_stride;
	if(gbm.w != 0 && gbm.h != 0) {
		kha_graphics2_truetype_StbTruetype.stbtt_Rasterize(gbm,0.35,vertices,num_verts,scale_x,scale_y,shift_x,shift_y,ix0,iy0,true);
	}
};
kha_graphics2_truetype_StbTruetype.stbtt_MakeGlyphBitmap = function(info,output,output_offset,out_w,out_h,out_stride,scale_x,scale_y,glyph) {
	kha_graphics2_truetype_StbTruetype.stbtt_MakeGlyphBitmapSubpixel(info,output,output_offset,out_w,out_h,out_stride,scale_x,scale_y,0.0,0.0,glyph);
};
kha_graphics2_truetype_StbTruetype.stbtt_BakeFontBitmap = function(data,offset,pixel_height,pixels,pw,ph,chars,chardata) {
	var f = new kha_graphics2_truetype_Stbtt_$fontinfo();
	if(!kha_graphics2_truetype_StbTruetype.stbtt_InitFont(f,data,offset)) {
		return -1;
	}
	var y = 1;
	var x = 1;
	var bottom_y = 1;
	var scale = kha_graphics2_truetype_StbTruetype.stbtt_ScaleForPixelHeight(f,pixel_height);
	var i = 0;
	var _g = 0;
	while(_g < chars.length) {
		var g = kha_graphics2_truetype_StbTruetype.stbtt_FindGlyphIndex(f,chars[_g++]);
		var advance = kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphHMetrics(f,g).advanceWidth;
		var rect = kha_graphics2_truetype_StbTruetype.stbtt_GetGlyphBitmapBox(f,g,scale,scale);
		var x0 = rect.x0;
		var y0 = rect.y0;
		var gw = rect.x1 - x0;
		var gh = rect.y1 - y0;
		if(x + gw + 1 >= pw) {
			y = bottom_y;
			x = 1;
		}
		if(y + gh + 1 >= ph) {
			return -i;
		}
		if(x + gw >= pw) {
			throw haxe_Exception.thrown("Error");
		}
		if(y + gh >= ph) {
			throw haxe_Exception.thrown("Error");
		}
		chardata[i].x0 = x;
		chardata[i].y0 = y;
		chardata[i].x1 = x + gw;
		chardata[i].y1 = y + gh;
		chardata[i].xadvance = scale * advance;
		chardata[i].xoff = x0;
		chardata[i].yoff = y0;
		x = x + gw + 1;
		if(y + gh + 1 > bottom_y) {
			bottom_y = y + gh + 1;
		}
		++i;
	}
	var _g = 0;
	var _g1 = pw * ph;
	while(_g < _g1) pixels.writeU8(_g++,0);
	i = 0;
	var ch;
	var _g = 0;
	while(_g < chars.length) {
		var g = kha_graphics2_truetype_StbTruetype.stbtt_FindGlyphIndex(f,chars[_g++]);
		ch = chardata[i];
		kha_graphics2_truetype_StbTruetype.stbtt_MakeGlyphBitmap(f,pixels,ch.x0 + ch.y0 * pw,ch.x1 - ch.x0,ch.y1 - ch.y0,pw,scale,scale,g);
		++i;
	}
	return bottom_y;
};
kha_graphics2_truetype_StbTruetype.UTF16BEtoString = function(data,length) {
	var name = "";
	var pos = 0;
	while(pos < length) {
		var ch = data.readU16BE(pos);
		if(ch < 128) {
			name += String.fromCodePoint(ch);
		} else if(ch < 2048) {
			name += String.fromCodePoint((192 + (ch >> 6)));
			name += String.fromCodePoint((128 + (ch & 63)));
		} else if(ch >= 55296 && ch < 56320) {
			var c = data.readU32BE(pos);
			name += String.fromCodePoint((240 + (c >> 18)));
			name += String.fromCodePoint((128 + (c >> 12)));
			name += String.fromCodePoint((128 + (c >> 6)));
			name += String.fromCodePoint((128 + c));
			pos += 2;
		} else if(ch >= 57344) {
			name += String.fromCodePoint((224 + (ch >> 12)));
			name += String.fromCodePoint((128 + (ch >> 6)));
			name += String.fromCodePoint((128 + ch));
		}
		pos += 2;
	}
	return name;
};
kha_graphics2_truetype_StbTruetype.stbtt_GetFontNameString = function(font,platformID,encodingID,languageID,nameID) {
	var fc = font.data;
	var nm = kha_graphics2_truetype_StbTruetype.stbtt__find_table(fc,font.fontstart,"name");
	if(nm == 0) {
		return null;
	}
	var count = kha_graphics2_truetype_StbTruetype.ttUSHORT(fc,nm + 2);
	var stringOffset = nm + kha_graphics2_truetype_StbTruetype.ttUSHORT(fc,nm + 4);
	var _g = 0;
	while(_g < count) {
		var loc = nm + 6 + 12 * _g++;
		if(platformID == kha_graphics2_truetype_StbTruetype.ttUSHORT(fc,loc) && encodingID == kha_graphics2_truetype_StbTruetype.ttUSHORT(fc,loc + 2) && languageID == kha_graphics2_truetype_StbTruetype.ttUSHORT(fc,loc + 4) && nameID == kha_graphics2_truetype_StbTruetype.ttUSHORT(fc,loc + 6)) {
			var length = kha_graphics2_truetype_StbTruetype.ttUSHORT(fc,loc + 8);
			var nameBytes = fc.sub(stringOffset + kha_graphics2_truetype_StbTruetype.ttUSHORT(fc,loc + 10),length);
			if(platformID == 3 && (encodingID == 1 || encodingID == 10) || platformID == 0) {
				return kha_graphics2_truetype_StbTruetype.UTF16BEtoString(nameBytes,length);
			} else {
				return nameBytes.toString();
			}
		}
	}
	return null;
};
var kha_graphics4_ConstantLocation = function() { };
$hxClasses["kha.graphics4.ConstantLocation"] = kha_graphics4_ConstantLocation;
kha_graphics4_ConstantLocation.__name__ = "kha.graphics4.ConstantLocation";
kha_graphics4_ConstantLocation.__isInterface__ = true;
var kha_graphics4_CubeMap = function(texture) {
	this.texture_ = texture;
};
$hxClasses["kha.graphics4.CubeMap"] = kha_graphics4_CubeMap;
kha_graphics4_CubeMap.__name__ = "kha.graphics4.CubeMap";
kha_graphics4_CubeMap.__interfaces__ = [kha_Canvas];
kha_graphics4_CubeMap.getRenderTargetFormat = function(format) {
	switch(format) {
	case 0:
		return 0;
	case 2:
		return 3;
	case 3:
		return 4;
	case 4:
		return 1;
	default:
		return 0;
	}
};
kha_graphics4_CubeMap.getDepthBufferBits = function(depthAndStencil) {
	switch(depthAndStencil) {
	case 0:
		return -1;
	case 1:
		return 24;
	case 2:
		return 24;
	case 3:
		return 24;
	case 4:
		return 32;
	case 5:
		return 16;
	}
};
kha_graphics4_CubeMap.getStencilBufferBits = function(depthAndStencil) {
	switch(depthAndStencil) {
	case 0:
		return -1;
	case 1:
		return -1;
	case 2:
		return 8;
	case 3:
		return 8;
	case 4:
		return 8;
	case 5:
		return 0;
	}
};
kha_graphics4_CubeMap.createRenderTarget = function(size,format,depthStencil,contextId) {
	if(contextId == null) {
		contextId = 0;
	}
	if(depthStencil == null) {
		depthStencil = 0;
	}
	if(format == null) {
		format = 0;
	}
	var cubeMap = new kha_graphics4_CubeMap(null);
	cubeMap.format = format;
	cubeMap.renderTarget_ = Krom.createRenderTargetCubeMap(size,kha_graphics4_CubeMap.getDepthBufferBits(depthStencil),kha_graphics4_CubeMap.getRenderTargetFormat(format),kha_graphics4_CubeMap.getStencilBufferBits(depthStencil),contextId);
	return cubeMap;
};
kha_graphics4_CubeMap.prototype = {
	unload: function() {
	}
	,get_width: function() {
		if(this.texture_ == null) {
			return this.renderTarget_.width;
		} else {
			return this.texture_.width;
		}
	}
	,get_height: function() {
		if(this.texture_ == null) {
			return this.renderTarget_.height;
		} else {
			return this.texture_.height;
		}
	}
	,get_g4: function() {
		if(this.graphics4 == null) {
			this.graphics4 = new kha_graphics4_Graphics(this);
		}
		return this.graphics4;
	}
	,__class__: kha_graphics4_CubeMap
	,__properties__: {get_g4:"get_g4",get_height:"get_height",get_width:"get_width"}
};
var kha_graphics4_FragmentShader = function(sources,names) {
	if(sources != null) {
		this.shader = Krom.createFragmentShader(sources[0].bytes.b.bufferValue,names[0]);
	}
};
$hxClasses["kha.graphics4.FragmentShader"] = kha_graphics4_FragmentShader;
kha_graphics4_FragmentShader.__name__ = "kha.graphics4.FragmentShader";
kha_graphics4_FragmentShader.fromSource = function(source) {
	var shader = new kha_graphics4_FragmentShader(null,null);
	shader.shader = Krom.createFragmentShaderFromSource(source);
	return shader;
};
kha_graphics4_FragmentShader.prototype = {
	'delete': function() {
		Krom.deleteShader(this.shader);
		this.shader = null;
	}
	,__class__: kha_graphics4_FragmentShader
};
var kha_graphics4_GeometryShader = function(sources,names) {
	this.shader = Krom.createGeometryShader(sources[0].bytes.b.bufferValue,names[0]);
};
$hxClasses["kha.graphics4.GeometryShader"] = kha_graphics4_GeometryShader;
kha_graphics4_GeometryShader.__name__ = "kha.graphics4.GeometryShader";
kha_graphics4_GeometryShader.prototype = {
	'delete': function() {
		Krom.deleteShader(this.shader);
		this.shader = null;
	}
	,__class__: kha_graphics4_GeometryShader
};
var kha_graphics4_Graphics = function(renderTarget) {
	this.renderTarget = renderTarget;
};
$hxClasses["kha.graphics4.Graphics"] = kha_graphics4_Graphics;
kha_graphics4_Graphics.__name__ = "kha.graphics4.Graphics";
kha_graphics4_Graphics.prototype = {
	begin: function(additionalRenderTargets) {
		Krom.begin(this.renderTarget,additionalRenderTargets);
	}
	,beginFace: function(face) {
		Krom.beginFace(this.renderTarget,face);
	}
	,end: function() {
		Krom.end();
	}
	,clear: function(color,depth,stencil) {
		var flags = 0;
		if(color != null) {
			flags = 1;
		}
		if(depth != null) {
			flags |= 2;
		}
		if(stencil != null) {
			flags |= 4;
		}
		Krom.clear(flags,color == null ? 0 : color,depth,stencil);
	}
	,viewport: function(x,y,width,height) {
		Krom.viewport(x,y,width,height);
	}
	,setVertexBuffer: function(vertexBuffer) {
		vertexBuffer.set(0);
	}
	,setVertexBuffers: function(vertexBuffers) {
		Krom.setVertexBuffers(vertexBuffers);
	}
	,setIndexBuffer: function(indexBuffer) {
		indexBuffer.set();
	}
	,setCubeMap: function(unit,cubeMap) {
		if(cubeMap == null) {
			return;
		}
		if(cubeMap.texture_ != null) {
			Krom.setTexture(unit,cubeMap.texture_);
		} else {
			Krom.setRenderTarget(unit,cubeMap.renderTarget_);
		}
	}
	,setCubeMapDepth: function(unit,cubeMap) {
		if(cubeMap == null) {
			return;
		}
		Krom.setTextureDepth(unit,cubeMap.renderTarget_);
	}
	,setTexture: function(unit,texture) {
		if(texture == null) {
			return;
		}
		if(texture.texture_ != null) {
			Krom.setTexture(unit,texture.texture_);
		} else {
			Krom.setRenderTarget(unit,texture.renderTarget_);
		}
	}
	,setTextureDepth: function(unit,texture) {
		if(texture == null) {
			return;
		}
		Krom.setTextureDepth(unit,texture.renderTarget_);
	}
	,setImageTexture: function(unit,texture) {
		if(texture == null) {
			return;
		}
		Krom.setImageTexture(unit,texture.texture_);
	}
	,setTextureParameters: function(texunit,uAddressing,vAddressing,minificationFilter,magnificationFilter,mipmapFilter) {
		Krom.setTextureParameters(texunit,uAddressing,vAddressing,minificationFilter,magnificationFilter,mipmapFilter);
	}
	,setTexture3DParameters: function(texunit,uAddressing,vAddressing,wAddressing,minificationFilter,magnificationFilter,mipmapFilter) {
		Krom.setTexture3DParameters(texunit,uAddressing,vAddressing,wAddressing,minificationFilter,magnificationFilter,mipmapFilter);
	}
	,setTextureCompareMode: function(texunit,enabled) {
		Krom.setTextureCompareMode(texunit,enabled);
	}
	,setCubeMapCompareMode: function(texunit,enabled) {
		Krom.setCubeMapCompareMode(texunit,enabled);
	}
	,setPipeline: function(pipeline) {
		pipeline.set();
	}
	,setBool: function(location,value) {
		Krom.setBool(location,value);
	}
	,setInt: function(location,value) {
		Krom.setInt(location,value);
	}
	,setFloat: function(location,value) {
		Krom.setFloat(location,value);
	}
	,setFloat2: function(location,value1,value2) {
		Krom.setFloat2(location,value1,value2);
	}
	,setFloat3: function(location,value1,value2,value3) {
		Krom.setFloat3(location,value1,value2,value3);
	}
	,setFloat4: function(location,value1,value2,value3,value4) {
		Krom.setFloat4(location,value1,value2,value3,value4);
	}
	,setFloats: function(location,values) {
		Krom.setFloats(location,values.buffer);
	}
	,drawIndexedVertices: function(start,count) {
		if(count == null) {
			count = -1;
		}
		if(start == null) {
			start = 0;
		}
		Krom.drawIndexedVertices(start,count);
	}
	,drawIndexedVerticesInstanced: function(instanceCount,start,count) {
		if(count == null) {
			count = -1;
		}
		if(start == null) {
			start = 0;
		}
		Krom.drawIndexedVerticesInstanced(instanceCount,start,count);
	}
	,scissor: function(x,y,width,height) {
		Krom.scissor(x,y,width,height);
	}
	,disableScissor: function() {
		Krom.disableScissor();
	}
	,__class__: kha_graphics4_Graphics
};
var kha_graphics4_PipelineCache = function(pipeline,texture) {
	this.pipeline = pipeline;
	this.projectionLocation = pipeline.getConstantLocation("projectionMatrix");
	if(texture) {
		this.textureLocation = pipeline.getTextureUnit("tex");
	}
};
$hxClasses["kha.graphics4.PipelineCache"] = kha_graphics4_PipelineCache;
kha_graphics4_PipelineCache.__name__ = "kha.graphics4.PipelineCache";
kha_graphics4_PipelineCache.prototype = {
	__class__: kha_graphics4_PipelineCache
};
var kha_graphics4_ImageShaderPainter = function(g4) {
	this.myPipeline = null;
	this.bilinearMipmaps = false;
	this.bilinear = false;
	this.g = g4;
	kha_graphics4_ImageShaderPainter.bufferStart = 0;
	kha_graphics4_ImageShaderPainter.bufferIndex = 0;
	kha_graphics4_ImageShaderPainter.initShaders();
	this.myPipeline = kha_graphics4_ImageShaderPainter.standardImagePipeline;
	this.initBuffers();
};
$hxClasses["kha.graphics4.ImageShaderPainter"] = kha_graphics4_ImageShaderPainter;
kha_graphics4_ImageShaderPainter.__name__ = "kha.graphics4.ImageShaderPainter";
kha_graphics4_ImageShaderPainter.initShaders = function() {
	if(kha_graphics4_ImageShaderPainter.structure == null) {
		kha_graphics4_ImageShaderPainter.structure = kha_graphics4_Graphics2.createImageVertexStructure();
	}
	if(kha_graphics4_ImageShaderPainter.standardImagePipeline == null) {
		var pipeline = kha_graphics4_Graphics2.createImagePipeline(kha_graphics4_ImageShaderPainter.structure);
		pipeline.compile();
		kha_graphics4_ImageShaderPainter.standardImagePipeline = new kha_graphics4_PipelineCache(pipeline,true);
	}
};
kha_graphics4_ImageShaderPainter.prototype = {
	set_pipeline: function(pipe) {
		this.myPipeline = pipe != null ? pipe : kha_graphics4_ImageShaderPainter.standardImagePipeline;
		return this.myPipeline;
	}
	,setProjection: function(projectionMatrix) {
		this.projectionMatrix = projectionMatrix;
	}
	,initBuffers: function() {
		if(kha_graphics4_ImageShaderPainter.rectVertexBuffer == null) {
			kha_graphics4_ImageShaderPainter.rectVertexBuffer = new kha_graphics4_VertexBuffer(6000,kha_graphics4_ImageShaderPainter.structure,1);
			kha_graphics4_ImageShaderPainter.rectVertices = kha_graphics4_ImageShaderPainter.rectVertexBuffer.lock();
			kha_graphics4_ImageShaderPainter.indexBuffer = new kha_graphics4_IndexBuffer(9000,0);
			var indices = kha_graphics4_ImageShaderPainter.indexBuffer.lock();
			var _g = 0;
			while(_g < 1500) {
				var i = _g++;
				indices[i * 3 * 2] = i * 4;
				indices[i * 3 * 2 + 1] = i * 4 + 1;
				indices[i * 3 * 2 + 2] = i * 4 + 2;
				indices[i * 3 * 2 + 3] = i * 4;
				indices[i * 3 * 2 + 4] = i * 4 + 2;
				indices[i * 3 * 2 + 5] = i * 4 + 3;
			}
			kha_graphics4_ImageShaderPainter.indexBuffer.unlock();
		}
	}
	,drawBuffer: function(end) {
		if(kha_graphics4_ImageShaderPainter.bufferIndex - kha_graphics4_ImageShaderPainter.bufferStart == 0) {
			return;
		}
		kha_graphics4_ImageShaderPainter.rectVertexBuffer.unlock((kha_graphics4_ImageShaderPainter.bufferIndex - kha_graphics4_ImageShaderPainter.bufferStart) * 4);
		this.g.setPipeline(this.myPipeline.pipeline);
		this.g.setVertexBuffer(kha_graphics4_ImageShaderPainter.rectVertexBuffer);
		this.g.setIndexBuffer(kha_graphics4_ImageShaderPainter.indexBuffer);
		this.g.setTexture(this.myPipeline.textureLocation,kha_graphics4_ImageShaderPainter.lastTexture);
		this.g.setTextureParameters(this.myPipeline.textureLocation,2,2,this.bilinear ? 1 : 0,this.bilinear ? 1 : 0,this.bilinearMipmaps ? 2 : 0);
		var matrix = this.projectionMatrix;
		kha_graphics4_Graphics.mat[0] = matrix._00;
		kha_graphics4_Graphics.mat[1] = matrix._01;
		kha_graphics4_Graphics.mat[2] = matrix._02;
		kha_graphics4_Graphics.mat[3] = matrix._03;
		kha_graphics4_Graphics.mat[4] = matrix._10;
		kha_graphics4_Graphics.mat[5] = matrix._11;
		kha_graphics4_Graphics.mat[6] = matrix._12;
		kha_graphics4_Graphics.mat[7] = matrix._13;
		kha_graphics4_Graphics.mat[8] = matrix._20;
		kha_graphics4_Graphics.mat[9] = matrix._21;
		kha_graphics4_Graphics.mat[10] = matrix._22;
		kha_graphics4_Graphics.mat[11] = matrix._23;
		kha_graphics4_Graphics.mat[12] = matrix._30;
		kha_graphics4_Graphics.mat[13] = matrix._31;
		kha_graphics4_Graphics.mat[14] = matrix._32;
		kha_graphics4_Graphics.mat[15] = matrix._33;
		Krom.setMatrix(this.myPipeline.projectionLocation,kha_graphics4_Graphics.mat.buffer);
		this.g.drawIndexedVertices(kha_graphics4_ImageShaderPainter.bufferStart * 2 * 3,(kha_graphics4_ImageShaderPainter.bufferIndex - kha_graphics4_ImageShaderPainter.bufferStart) * 2 * 3);
		this.g.setTexture(this.myPipeline.textureLocation,null);
		kha_graphics4_ImageShaderPainter.bufferStart = 0;
		kha_graphics4_ImageShaderPainter.bufferIndex = 0;
		kha_graphics4_ImageShaderPainter.rectVertices = kha_graphics4_ImageShaderPainter.rectVertexBuffer.lock(0);
	}
	,setBilinearFilter: function(bilinear) {
		this.drawBuffer(false);
		kha_graphics4_ImageShaderPainter.lastTexture = null;
		this.bilinear = bilinear;
	}
	,end: function() {
		if(kha_graphics4_ImageShaderPainter.bufferIndex > 0) {
			this.drawBuffer(true);
		}
		kha_graphics4_ImageShaderPainter.lastTexture = null;
	}
	,__class__: kha_graphics4_ImageShaderPainter
	,__properties__: {set_pipeline:"set_pipeline"}
};
var kha_graphics4_ColoredShaderPainter = function(g4) {
	this.myPipeline = null;
	this.g = g4;
	kha_graphics4_ColoredShaderPainter.bufferIndex = 0;
	kha_graphics4_ColoredShaderPainter.triangleBufferIndex = 0;
	kha_graphics4_ColoredShaderPainter.initShaders();
	this.myPipeline = kha_graphics4_ColoredShaderPainter.standardColorPipeline;
	this.initBuffers();
};
$hxClasses["kha.graphics4.ColoredShaderPainter"] = kha_graphics4_ColoredShaderPainter;
kha_graphics4_ColoredShaderPainter.__name__ = "kha.graphics4.ColoredShaderPainter";
kha_graphics4_ColoredShaderPainter.initShaders = function() {
	if(kha_graphics4_ColoredShaderPainter.structure == null) {
		kha_graphics4_ColoredShaderPainter.structure = kha_graphics4_Graphics2.createColoredVertexStructure();
	}
	if(kha_graphics4_ColoredShaderPainter.standardColorPipeline == null) {
		var pipeline = kha_graphics4_Graphics2.createColoredPipeline(kha_graphics4_ColoredShaderPainter.structure);
		pipeline.compile();
		kha_graphics4_ColoredShaderPainter.standardColorPipeline = new kha_graphics4_PipelineCache(pipeline,false);
	}
};
kha_graphics4_ColoredShaderPainter.prototype = {
	set_pipeline: function(pipe) {
		this.myPipeline = pipe != null ? pipe : kha_graphics4_ColoredShaderPainter.standardColorPipeline;
		return this.myPipeline;
	}
	,setProjection: function(projectionMatrix) {
		this.projectionMatrix = projectionMatrix;
	}
	,initBuffers: function() {
		if(kha_graphics4_ColoredShaderPainter.rectVertexBuffer == null) {
			kha_graphics4_ColoredShaderPainter.rectVertexBuffer = new kha_graphics4_VertexBuffer(4000,kha_graphics4_ColoredShaderPainter.structure,1);
			kha_graphics4_ColoredShaderPainter.rectVertices = kha_graphics4_ColoredShaderPainter.rectVertexBuffer.lock();
			kha_graphics4_ColoredShaderPainter.indexBuffer = new kha_graphics4_IndexBuffer(6000,0);
			var indices = kha_graphics4_ColoredShaderPainter.indexBuffer.lock();
			var _g = 0;
			while(_g < 1000) {
				var i = _g++;
				indices[i * 3 * 2] = i * 4;
				indices[i * 3 * 2 + 1] = i * 4 + 1;
				indices[i * 3 * 2 + 2] = i * 4 + 2;
				indices[i * 3 * 2 + 3] = i * 4;
				indices[i * 3 * 2 + 4] = i * 4 + 2;
				indices[i * 3 * 2 + 5] = i * 4 + 3;
			}
			kha_graphics4_ColoredShaderPainter.indexBuffer.unlock();
			kha_graphics4_ColoredShaderPainter.triangleVertexBuffer = new kha_graphics4_VertexBuffer(3000,kha_graphics4_ColoredShaderPainter.structure,1);
			kha_graphics4_ColoredShaderPainter.triangleVertices = kha_graphics4_ColoredShaderPainter.triangleVertexBuffer.lock();
			kha_graphics4_ColoredShaderPainter.triangleIndexBuffer = new kha_graphics4_IndexBuffer(3000,0);
			var triIndices = kha_graphics4_ColoredShaderPainter.triangleIndexBuffer.lock();
			var _g = 0;
			while(_g < 1000) {
				var i = _g++;
				triIndices[i * 3] = i * 3;
				triIndices[i * 3 + 1] = i * 3 + 1;
				triIndices[i * 3 + 2] = i * 3 + 2;
			}
			kha_graphics4_ColoredShaderPainter.triangleIndexBuffer.unlock();
		}
	}
	,setRectVertices: function(bottomleftx,bottomlefty,topleftx,toplefty,toprightx,toprighty,bottomrightx,bottomrighty) {
		var baseIndex = kha_graphics4_ColoredShaderPainter.bufferIndex * 7 * 4;
		kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex] = bottomleftx;
		kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex + 1] = bottomlefty;
		kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex + 2] = -5.0;
		kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex + 7] = topleftx;
		kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex + 8] = toplefty;
		kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex + 9] = -5.0;
		kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex + 14] = toprightx;
		kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex + 15] = toprighty;
		kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex + 16] = -5.0;
		kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex + 21] = bottomrightx;
		kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex + 22] = bottomrighty;
		kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex + 23] = -5.0;
	}
	,setRectColors: function(opacity,color) {
		var baseIndex = kha_graphics4_ColoredShaderPainter.bufferIndex * 7 * 4;
		var a = opacity * ((color >>> 24) * 0.00392156862745098);
		var r = a * (((color & 16711680) >>> 16) * 0.00392156862745098);
		var g = a * (((color & 65280) >>> 8) * 0.00392156862745098);
		var b = a * ((color & 255) * 0.00392156862745098);
		kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex + 3] = r;
		kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex + 4] = g;
		kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex + 5] = b;
		kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex + 6] = a;
		kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex + 10] = r;
		kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex + 11] = g;
		kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex + 12] = b;
		kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex + 13] = a;
		kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex + 17] = r;
		kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex + 18] = g;
		kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex + 19] = b;
		kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex + 20] = a;
		kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex + 24] = r;
		kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex + 25] = g;
		kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex + 26] = b;
		kha_graphics4_ColoredShaderPainter.rectVertices[baseIndex + 27] = a;
	}
	,setTriVertices: function(x1,y1,x2,y2,x3,y3) {
		var baseIndex = kha_graphics4_ColoredShaderPainter.triangleBufferIndex * 7 * 3;
		kha_graphics4_ColoredShaderPainter.triangleVertices[baseIndex] = x1;
		kha_graphics4_ColoredShaderPainter.triangleVertices[baseIndex + 1] = y1;
		kha_graphics4_ColoredShaderPainter.triangleVertices[baseIndex + 2] = -5.0;
		kha_graphics4_ColoredShaderPainter.triangleVertices[baseIndex + 7] = x2;
		kha_graphics4_ColoredShaderPainter.triangleVertices[baseIndex + 8] = y2;
		kha_graphics4_ColoredShaderPainter.triangleVertices[baseIndex + 9] = -5.0;
		kha_graphics4_ColoredShaderPainter.triangleVertices[baseIndex + 14] = x3;
		kha_graphics4_ColoredShaderPainter.triangleVertices[baseIndex + 15] = y3;
		kha_graphics4_ColoredShaderPainter.triangleVertices[baseIndex + 16] = -5.0;
	}
	,setTriColors: function(opacity,color) {
		var baseIndex = kha_graphics4_ColoredShaderPainter.triangleBufferIndex * 7 * 3;
		var a = opacity * ((color >>> 24) * 0.00392156862745098);
		var r = a * (((color & 16711680) >>> 16) * 0.00392156862745098);
		var g = a * (((color & 65280) >>> 8) * 0.00392156862745098);
		var b = a * ((color & 255) * 0.00392156862745098);
		kha_graphics4_ColoredShaderPainter.triangleVertices[baseIndex + 3] = r;
		kha_graphics4_ColoredShaderPainter.triangleVertices[baseIndex + 4] = g;
		kha_graphics4_ColoredShaderPainter.triangleVertices[baseIndex + 5] = b;
		kha_graphics4_ColoredShaderPainter.triangleVertices[baseIndex + 6] = a;
		kha_graphics4_ColoredShaderPainter.triangleVertices[baseIndex + 10] = r;
		kha_graphics4_ColoredShaderPainter.triangleVertices[baseIndex + 11] = g;
		kha_graphics4_ColoredShaderPainter.triangleVertices[baseIndex + 12] = b;
		kha_graphics4_ColoredShaderPainter.triangleVertices[baseIndex + 13] = a;
		kha_graphics4_ColoredShaderPainter.triangleVertices[baseIndex + 17] = r;
		kha_graphics4_ColoredShaderPainter.triangleVertices[baseIndex + 18] = g;
		kha_graphics4_ColoredShaderPainter.triangleVertices[baseIndex + 19] = b;
		kha_graphics4_ColoredShaderPainter.triangleVertices[baseIndex + 20] = a;
	}
	,drawBuffer: function(trisDone) {
		if(kha_graphics4_ColoredShaderPainter.bufferIndex == 0) {
			return;
		}
		if(!trisDone) {
			if(kha_graphics4_ColoredShaderPainter.triangleBufferIndex > 0) {
				this.drawTriBuffer(true);
			}
		}
		kha_graphics4_ColoredShaderPainter.rectVertexBuffer.unlock(kha_graphics4_ColoredShaderPainter.bufferIndex * 4);
		this.g.setPipeline(this.myPipeline.pipeline);
		this.g.setVertexBuffer(kha_graphics4_ColoredShaderPainter.rectVertexBuffer);
		this.g.setIndexBuffer(kha_graphics4_ColoredShaderPainter.indexBuffer);
		var matrix = this.projectionMatrix;
		kha_graphics4_Graphics.mat[0] = matrix._00;
		kha_graphics4_Graphics.mat[1] = matrix._01;
		kha_graphics4_Graphics.mat[2] = matrix._02;
		kha_graphics4_Graphics.mat[3] = matrix._03;
		kha_graphics4_Graphics.mat[4] = matrix._10;
		kha_graphics4_Graphics.mat[5] = matrix._11;
		kha_graphics4_Graphics.mat[6] = matrix._12;
		kha_graphics4_Graphics.mat[7] = matrix._13;
		kha_graphics4_Graphics.mat[8] = matrix._20;
		kha_graphics4_Graphics.mat[9] = matrix._21;
		kha_graphics4_Graphics.mat[10] = matrix._22;
		kha_graphics4_Graphics.mat[11] = matrix._23;
		kha_graphics4_Graphics.mat[12] = matrix._30;
		kha_graphics4_Graphics.mat[13] = matrix._31;
		kha_graphics4_Graphics.mat[14] = matrix._32;
		kha_graphics4_Graphics.mat[15] = matrix._33;
		Krom.setMatrix(this.myPipeline.projectionLocation,kha_graphics4_Graphics.mat.buffer);
		this.g.drawIndexedVertices(0,kha_graphics4_ColoredShaderPainter.bufferIndex * 2 * 3);
		kha_graphics4_ColoredShaderPainter.bufferIndex = 0;
		kha_graphics4_ColoredShaderPainter.rectVertices = kha_graphics4_ColoredShaderPainter.rectVertexBuffer.lock();
	}
	,drawTriBuffer: function(rectsDone) {
		if(!rectsDone) {
			if(kha_graphics4_ColoredShaderPainter.bufferIndex > 0) {
				this.drawBuffer(true);
			}
		}
		kha_graphics4_ColoredShaderPainter.triangleVertexBuffer.unlock(kha_graphics4_ColoredShaderPainter.triangleBufferIndex * 3);
		this.g.setPipeline(this.myPipeline.pipeline);
		this.g.setVertexBuffer(kha_graphics4_ColoredShaderPainter.triangleVertexBuffer);
		this.g.setIndexBuffer(kha_graphics4_ColoredShaderPainter.triangleIndexBuffer);
		var matrix = this.projectionMatrix;
		kha_graphics4_Graphics.mat[0] = matrix._00;
		kha_graphics4_Graphics.mat[1] = matrix._01;
		kha_graphics4_Graphics.mat[2] = matrix._02;
		kha_graphics4_Graphics.mat[3] = matrix._03;
		kha_graphics4_Graphics.mat[4] = matrix._10;
		kha_graphics4_Graphics.mat[5] = matrix._11;
		kha_graphics4_Graphics.mat[6] = matrix._12;
		kha_graphics4_Graphics.mat[7] = matrix._13;
		kha_graphics4_Graphics.mat[8] = matrix._20;
		kha_graphics4_Graphics.mat[9] = matrix._21;
		kha_graphics4_Graphics.mat[10] = matrix._22;
		kha_graphics4_Graphics.mat[11] = matrix._23;
		kha_graphics4_Graphics.mat[12] = matrix._30;
		kha_graphics4_Graphics.mat[13] = matrix._31;
		kha_graphics4_Graphics.mat[14] = matrix._32;
		kha_graphics4_Graphics.mat[15] = matrix._33;
		Krom.setMatrix(this.myPipeline.projectionLocation,kha_graphics4_Graphics.mat.buffer);
		this.g.drawIndexedVertices(0,kha_graphics4_ColoredShaderPainter.triangleBufferIndex * 3);
		kha_graphics4_ColoredShaderPainter.triangleBufferIndex = 0;
		kha_graphics4_ColoredShaderPainter.triangleVertices = kha_graphics4_ColoredShaderPainter.triangleVertexBuffer.lock();
	}
	,fillRect: function(opacity,color,bottomleftx,bottomlefty,topleftx,toplefty,toprightx,toprighty,bottomrightx,bottomrighty) {
		if(kha_graphics4_ColoredShaderPainter.triangleBufferIndex > 0) {
			this.drawTriBuffer(true);
		}
		if(kha_graphics4_ColoredShaderPainter.bufferIndex + 1 >= 1000) {
			this.drawBuffer(false);
		}
		this.setRectColors(opacity,color);
		this.setRectVertices(bottomleftx,bottomlefty,topleftx,toplefty,toprightx,toprighty,bottomrightx,bottomrighty);
		++kha_graphics4_ColoredShaderPainter.bufferIndex;
	}
	,fillTriangle: function(opacity,color,x1,y1,x2,y2,x3,y3) {
		if(kha_graphics4_ColoredShaderPainter.bufferIndex > 0) {
			this.drawBuffer(true);
		}
		if(kha_graphics4_ColoredShaderPainter.triangleBufferIndex + 1 >= 1000) {
			this.drawTriBuffer(false);
		}
		this.setTriColors(opacity,color);
		this.setTriVertices(x1,y1,x2,y2,x3,y3);
		++kha_graphics4_ColoredShaderPainter.triangleBufferIndex;
	}
	,__class__: kha_graphics4_ColoredShaderPainter
	,__properties__: {set_pipeline:"set_pipeline"}
};
var kha_graphics4_TextShaderPainter = function(g4) {
	this.bakedQuadCache = new kha_AlignedQuad();
	this.bilinear = false;
	this.myPipeline = null;
	this.g = g4;
	kha_graphics4_TextShaderPainter.bufferIndex = 0;
	kha_graphics4_TextShaderPainter.initShaders();
	this.myPipeline = kha_graphics4_TextShaderPainter.standardTextPipeline;
	this.initBuffers();
};
$hxClasses["kha.graphics4.TextShaderPainter"] = kha_graphics4_TextShaderPainter;
kha_graphics4_TextShaderPainter.__name__ = "kha.graphics4.TextShaderPainter";
kha_graphics4_TextShaderPainter.initShaders = function() {
	if(kha_graphics4_TextShaderPainter.structure == null) {
		kha_graphics4_TextShaderPainter.structure = kha_graphics4_Graphics2.createTextVertexStructure();
	}
	if(kha_graphics4_TextShaderPainter.standardTextPipeline == null) {
		var pipeline = kha_graphics4_Graphics2.createTextPipeline(kha_graphics4_TextShaderPainter.structure);
		pipeline.compile();
		kha_graphics4_TextShaderPainter.standardTextPipeline = new kha_graphics4_PipelineCache(pipeline,true);
	}
};
kha_graphics4_TextShaderPainter.findIndex = function(charCode) {
	var blocks = kha_KravurImage.charBlocks;
	var offset = 0;
	var _g = 0;
	var _g1 = blocks.length / 2 | 0;
	while(_g < _g1) {
		var i = _g++;
		var start = blocks[i * 2];
		var end = blocks[i * 2 + 1];
		if(charCode >= start && charCode <= end) {
			return offset + charCode - start;
		}
		offset += end - start + 1;
	}
	return 0;
};
kha_graphics4_TextShaderPainter.prototype = {
	set_pipeline: function(pipe) {
		this.myPipeline = pipe != null ? pipe : kha_graphics4_TextShaderPainter.standardTextPipeline;
		return this.myPipeline;
	}
	,setProjection: function(projectionMatrix) {
		this.projectionMatrix = projectionMatrix;
	}
	,initBuffers: function() {
		if(kha_graphics4_TextShaderPainter.rectVertexBuffer == null) {
			kha_graphics4_TextShaderPainter.rectVertexBuffer = new kha_graphics4_VertexBuffer(4000,kha_graphics4_TextShaderPainter.structure,1);
			kha_graphics4_TextShaderPainter.rectVertices = kha_graphics4_TextShaderPainter.rectVertexBuffer.lock();
			kha_graphics4_TextShaderPainter.indexBuffer = new kha_graphics4_IndexBuffer(6000,0);
			var indices = kha_graphics4_TextShaderPainter.indexBuffer.lock();
			var _g = 0;
			while(_g < 1000) {
				var i = _g++;
				indices[i * 3 * 2] = i * 4;
				indices[i * 3 * 2 + 1] = i * 4 + 1;
				indices[i * 3 * 2 + 2] = i * 4 + 2;
				indices[i * 3 * 2 + 3] = i * 4;
				indices[i * 3 * 2 + 4] = i * 4 + 2;
				indices[i * 3 * 2 + 5] = i * 4 + 3;
			}
			kha_graphics4_TextShaderPainter.indexBuffer.unlock();
		}
	}
	,setRectVertices: function(bottomleftx,bottomlefty,topleftx,toplefty,toprightx,toprighty,bottomrightx,bottomrighty) {
		var baseIndex = kha_graphics4_TextShaderPainter.bufferIndex * 9 * 4;
		kha_graphics4_TextShaderPainter.rectVertices[baseIndex] = bottomleftx;
		kha_graphics4_TextShaderPainter.rectVertices[baseIndex + 1] = bottomlefty;
		kha_graphics4_TextShaderPainter.rectVertices[baseIndex + 2] = -5.0;
		kha_graphics4_TextShaderPainter.rectVertices[baseIndex + 9] = topleftx;
		kha_graphics4_TextShaderPainter.rectVertices[baseIndex + 10] = toplefty;
		kha_graphics4_TextShaderPainter.rectVertices[baseIndex + 11] = -5.0;
		kha_graphics4_TextShaderPainter.rectVertices[baseIndex + 18] = toprightx;
		kha_graphics4_TextShaderPainter.rectVertices[baseIndex + 19] = toprighty;
		kha_graphics4_TextShaderPainter.rectVertices[baseIndex + 20] = -5.0;
		kha_graphics4_TextShaderPainter.rectVertices[baseIndex + 27] = bottomrightx;
		kha_graphics4_TextShaderPainter.rectVertices[baseIndex + 28] = bottomrighty;
		kha_graphics4_TextShaderPainter.rectVertices[baseIndex + 29] = -5.0;
	}
	,setRectTexCoords: function(left,top,right,bottom) {
		var baseIndex = kha_graphics4_TextShaderPainter.bufferIndex * 9 * 4;
		kha_graphics4_TextShaderPainter.rectVertices[baseIndex + 3] = left;
		kha_graphics4_TextShaderPainter.rectVertices[baseIndex + 4] = bottom;
		kha_graphics4_TextShaderPainter.rectVertices[baseIndex + 12] = left;
		kha_graphics4_TextShaderPainter.rectVertices[baseIndex + 13] = top;
		kha_graphics4_TextShaderPainter.rectVertices[baseIndex + 21] = right;
		kha_graphics4_TextShaderPainter.rectVertices[baseIndex + 22] = top;
		kha_graphics4_TextShaderPainter.rectVertices[baseIndex + 30] = right;
		kha_graphics4_TextShaderPainter.rectVertices[baseIndex + 31] = bottom;
	}
	,setRectColors: function(opacity,color) {
		var baseIndex = kha_graphics4_TextShaderPainter.bufferIndex * 9 * 4;
		var a = opacity * ((color >>> 24) * 0.00392156862745098);
		kha_graphics4_TextShaderPainter.rectVertices[baseIndex + 5] = ((color & 16711680) >>> 16) * 0.00392156862745098;
		kha_graphics4_TextShaderPainter.rectVertices[baseIndex + 6] = ((color & 65280) >>> 8) * 0.00392156862745098;
		kha_graphics4_TextShaderPainter.rectVertices[baseIndex + 7] = (color & 255) * 0.00392156862745098;
		kha_graphics4_TextShaderPainter.rectVertices[baseIndex + 8] = a;
		kha_graphics4_TextShaderPainter.rectVertices[baseIndex + 14] = ((color & 16711680) >>> 16) * 0.00392156862745098;
		kha_graphics4_TextShaderPainter.rectVertices[baseIndex + 15] = ((color & 65280) >>> 8) * 0.00392156862745098;
		kha_graphics4_TextShaderPainter.rectVertices[baseIndex + 16] = (color & 255) * 0.00392156862745098;
		kha_graphics4_TextShaderPainter.rectVertices[baseIndex + 17] = a;
		kha_graphics4_TextShaderPainter.rectVertices[baseIndex + 23] = ((color & 16711680) >>> 16) * 0.00392156862745098;
		kha_graphics4_TextShaderPainter.rectVertices[baseIndex + 24] = ((color & 65280) >>> 8) * 0.00392156862745098;
		kha_graphics4_TextShaderPainter.rectVertices[baseIndex + 25] = (color & 255) * 0.00392156862745098;
		kha_graphics4_TextShaderPainter.rectVertices[baseIndex + 26] = a;
		kha_graphics4_TextShaderPainter.rectVertices[baseIndex + 32] = ((color & 16711680) >>> 16) * 0.00392156862745098;
		kha_graphics4_TextShaderPainter.rectVertices[baseIndex + 33] = ((color & 65280) >>> 8) * 0.00392156862745098;
		kha_graphics4_TextShaderPainter.rectVertices[baseIndex + 34] = (color & 255) * 0.00392156862745098;
		kha_graphics4_TextShaderPainter.rectVertices[baseIndex + 35] = a;
	}
	,drawBuffer: function() {
		if(kha_graphics4_TextShaderPainter.bufferIndex == 0) {
			return;
		}
		kha_graphics4_TextShaderPainter.rectVertexBuffer.unlock(kha_graphics4_TextShaderPainter.bufferIndex * 4);
		this.g.setPipeline(this.myPipeline.pipeline);
		this.g.setVertexBuffer(kha_graphics4_TextShaderPainter.rectVertexBuffer);
		this.g.setIndexBuffer(kha_graphics4_TextShaderPainter.indexBuffer);
		var matrix = this.projectionMatrix;
		kha_graphics4_Graphics.mat[0] = matrix._00;
		kha_graphics4_Graphics.mat[1] = matrix._01;
		kha_graphics4_Graphics.mat[2] = matrix._02;
		kha_graphics4_Graphics.mat[3] = matrix._03;
		kha_graphics4_Graphics.mat[4] = matrix._10;
		kha_graphics4_Graphics.mat[5] = matrix._11;
		kha_graphics4_Graphics.mat[6] = matrix._12;
		kha_graphics4_Graphics.mat[7] = matrix._13;
		kha_graphics4_Graphics.mat[8] = matrix._20;
		kha_graphics4_Graphics.mat[9] = matrix._21;
		kha_graphics4_Graphics.mat[10] = matrix._22;
		kha_graphics4_Graphics.mat[11] = matrix._23;
		kha_graphics4_Graphics.mat[12] = matrix._30;
		kha_graphics4_Graphics.mat[13] = matrix._31;
		kha_graphics4_Graphics.mat[14] = matrix._32;
		kha_graphics4_Graphics.mat[15] = matrix._33;
		Krom.setMatrix(this.myPipeline.projectionLocation,kha_graphics4_Graphics.mat.buffer);
		this.g.setTexture(this.myPipeline.textureLocation,kha_graphics4_TextShaderPainter.lastTexture);
		this.g.setTextureParameters(this.myPipeline.textureLocation,2,2,this.bilinear ? 1 : 0,this.bilinear ? 1 : 0,0);
		this.g.drawIndexedVertices(0,kha_graphics4_TextShaderPainter.bufferIndex * 2 * 3);
		this.g.setTexture(this.myPipeline.textureLocation,null);
		kha_graphics4_TextShaderPainter.bufferIndex = 0;
		kha_graphics4_TextShaderPainter.rectVertices = kha_graphics4_TextShaderPainter.rectVertexBuffer.lock();
	}
	,setBilinearFilter: function(bilinear) {
		this.end();
		this.bilinear = bilinear;
	}
	,setFont: function(font) {
		this.font = js_Boot.__cast(font , kha_Kravur);
	}
	,drawString: function(text,opacity,color,x,y,transformation) {
		var font = this.font._get(this.fontSize);
		var tex = font.getTexture();
		if(kha_graphics4_TextShaderPainter.lastTexture != null && tex != kha_graphics4_TextShaderPainter.lastTexture) {
			this.drawBuffer();
		}
		kha_graphics4_TextShaderPainter.lastTexture = tex;
		var xpos = x;
		var _g = 0;
		var _g1 = text.length;
		while(_g < _g1) {
			var charCode = text.charCodeAt(_g++);
			var q = font.getBakedQuad(this.bakedQuadCache,kha_graphics4_TextShaderPainter.findIndex(charCode),xpos,y);
			if(q != null) {
				if(kha_graphics4_TextShaderPainter.bufferIndex + 1 >= 1000) {
					this.drawBuffer();
				}
				this.setRectColors(opacity,color);
				this.setRectTexCoords(q.s0 * tex.get_width() / tex.get_realWidth(),q.t0 * tex.get_height() / tex.get_realHeight(),q.s1 * tex.get_width() / tex.get_realWidth(),q.t1 * tex.get_height() / tex.get_realHeight());
				var x = q.x0;
				var y1 = q.y1;
				if(y1 == null) {
					y1 = 0;
				}
				if(x == null) {
					x = 0;
				}
				var value_x = x;
				var value_y = y1;
				var w = transformation._02 * value_x + transformation._12 * value_y + transformation._22;
				var x1 = (transformation._00 * value_x + transformation._10 * value_y + transformation._20) / w;
				var y2 = (transformation._01 * value_x + transformation._11 * value_y + transformation._21) / w;
				var x2 = x1;
				var y3 = y2;
				if(y2 == null) {
					y3 = 0;
				}
				if(x1 == null) {
					x2 = 0;
				}
				var x3 = q.x0;
				var y4 = q.y0;
				if(y4 == null) {
					y4 = 0;
				}
				if(x3 == null) {
					x3 = 0;
				}
				var value_x1 = x3;
				var value_y1 = y4;
				var w1 = transformation._02 * value_x1 + transformation._12 * value_y1 + transformation._22;
				var x4 = (transformation._00 * value_x1 + transformation._10 * value_y1 + transformation._20) / w1;
				var y5 = (transformation._01 * value_x1 + transformation._11 * value_y1 + transformation._21) / w1;
				var x5 = x4;
				var y6 = y5;
				if(y5 == null) {
					y6 = 0;
				}
				if(x4 == null) {
					x5 = 0;
				}
				var x6 = q.x1;
				var y7 = q.y0;
				if(y7 == null) {
					y7 = 0;
				}
				if(x6 == null) {
					x6 = 0;
				}
				var value_x2 = x6;
				var value_y2 = y7;
				var w2 = transformation._02 * value_x2 + transformation._12 * value_y2 + transformation._22;
				var x7 = (transformation._00 * value_x2 + transformation._10 * value_y2 + transformation._20) / w2;
				var y8 = (transformation._01 * value_x2 + transformation._11 * value_y2 + transformation._21) / w2;
				var x8 = x7;
				var y9 = y8;
				if(y8 == null) {
					y9 = 0;
				}
				if(x7 == null) {
					x8 = 0;
				}
				var x9 = q.x1;
				var y10 = q.y1;
				if(y10 == null) {
					y10 = 0;
				}
				if(x9 == null) {
					x9 = 0;
				}
				var value_x3 = x9;
				var value_y3 = y10;
				var w3 = transformation._02 * value_x3 + transformation._12 * value_y3 + transformation._22;
				var x10 = (transformation._00 * value_x3 + transformation._10 * value_y3 + transformation._20) / w3;
				var y11 = (transformation._01 * value_x3 + transformation._11 * value_y3 + transformation._21) / w3;
				var x11 = x10;
				var y12 = y11;
				if(y11 == null) {
					y12 = 0;
				}
				if(x10 == null) {
					x11 = 0;
				}
				this.setRectVertices(x2,y3,x5,y6,x8,y9,x11,y12);
				xpos += q.xadvance;
				++kha_graphics4_TextShaderPainter.bufferIndex;
			}
		}
	}
	,end: function() {
		if(kha_graphics4_TextShaderPainter.bufferIndex > 0) {
			this.drawBuffer();
		}
		kha_graphics4_TextShaderPainter.lastTexture = null;
	}
	,__class__: kha_graphics4_TextShaderPainter
	,__properties__: {set_pipeline:"set_pipeline"}
};
var kha_graphics4_Graphics2 = function(canvas) {
	this.scissorH = -1;
	this.scissorW = -1;
	this.scissorY = -1;
	this.scissorX = -1;
	this.scissorEnabled = false;
	this.lastPipeline = null;
	this.pipelineCache = new haxe_ds_ObjectMap();
	this.myImageScaleQuality = kha_graphics2_ImageScaleQuality.Low;
	kha_graphics2_Graphics.call(this);
	this.set_color(-1);
	this.canvas = canvas;
	this.g = canvas.get_g4();
	this.imagePainter = new kha_graphics4_ImageShaderPainter(this.g);
	this.coloredPainter = new kha_graphics4_ColoredShaderPainter(this.g);
	this.textPainter = new kha_graphics4_TextShaderPainter(this.g);
	this.textPainter.fontSize = this.get_fontSize();
	this.projectionMatrix = new kha_math_FastMatrix4(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);
	this.setProjection();
	if(kha_graphics4_Graphics2.videoPipeline == null) {
		kha_graphics4_Graphics2.videoPipeline = kha_graphics4_Graphics2.createImagePipeline(kha_graphics4_Graphics2.createImageVertexStructure());
		kha_graphics4_Graphics2.videoPipeline.fragmentShader = kha_Shaders.painter_video_frag;
		kha_graphics4_Graphics2.videoPipeline.vertexShader = kha_Shaders.painter_video_vert;
		kha_graphics4_Graphics2.videoPipeline.compile();
	}
};
$hxClasses["kha.graphics4.Graphics2"] = kha_graphics4_Graphics2;
kha_graphics4_Graphics2.__name__ = "kha.graphics4.Graphics2";
kha_graphics4_Graphics2.upperPowerOfTwo = function(v) {
	--v;
	v |= v >>> 1;
	v |= v >>> 2;
	v |= v >>> 4;
	v |= v >>> 8;
	v |= v >>> 16;
	return ++v;
};
kha_graphics4_Graphics2.createImageVertexStructure = function() {
	var structure = new kha_graphics4_VertexStructure();
	structure.add("vertexPosition",2);
	structure.add("texPosition",1);
	structure.add("vertexColor",3);
	return structure;
};
kha_graphics4_Graphics2.createImagePipeline = function(structure) {
	var shaderPipeline = new kha_graphics4_PipelineState();
	shaderPipeline.fragmentShader = kha_Shaders.painter_image_frag;
	shaderPipeline.vertexShader = kha_Shaders.painter_image_vert;
	shaderPipeline.inputLayout = [structure];
	shaderPipeline.blendSource = 1;
	shaderPipeline.blendDestination = 5;
	shaderPipeline.alphaBlendSource = 1;
	shaderPipeline.alphaBlendDestination = 5;
	return shaderPipeline;
};
kha_graphics4_Graphics2.createColoredVertexStructure = function() {
	var structure = new kha_graphics4_VertexStructure();
	structure.add("vertexPosition",2);
	structure.add("vertexColor",3);
	return structure;
};
kha_graphics4_Graphics2.createColoredPipeline = function(structure) {
	var shaderPipeline = new kha_graphics4_PipelineState();
	shaderPipeline.fragmentShader = kha_Shaders.painter_colored_frag;
	shaderPipeline.vertexShader = kha_Shaders.painter_colored_vert;
	shaderPipeline.inputLayout = [structure];
	shaderPipeline.blendSource = 1;
	shaderPipeline.blendDestination = 5;
	shaderPipeline.alphaBlendSource = 1;
	shaderPipeline.alphaBlendDestination = 5;
	return shaderPipeline;
};
kha_graphics4_Graphics2.createTextVertexStructure = function() {
	var structure = new kha_graphics4_VertexStructure();
	structure.add("vertexPosition",2);
	structure.add("texPosition",1);
	structure.add("vertexColor",3);
	return structure;
};
kha_graphics4_Graphics2.createTextPipeline = function(structure) {
	var shaderPipeline = new kha_graphics4_PipelineState();
	shaderPipeline.fragmentShader = kha_Shaders.painter_text_frag;
	shaderPipeline.vertexShader = kha_Shaders.painter_text_vert;
	shaderPipeline.inputLayout = [structure];
	shaderPipeline.blendSource = 3;
	shaderPipeline.blendDestination = 5;
	shaderPipeline.alphaBlendSource = 3;
	shaderPipeline.alphaBlendDestination = 5;
	return shaderPipeline;
};
kha_graphics4_Graphics2.__super__ = kha_graphics2_Graphics;
kha_graphics4_Graphics2.prototype = $extend(kha_graphics2_Graphics.prototype,{
	setProjection: function() {
		var width = this.canvas.get_width();
		var height = this.canvas.get_height();
		if(((this.canvas) instanceof kha_Framebuffer)) {
			var _this = this.projectionMatrix;
			_this._00 = 2 / width;
			_this._10 = 0;
			_this._20 = 0;
			_this._30 = -width / width;
			_this._01 = 0;
			_this._11 = 2.0 / (0 - height);
			_this._21 = 0;
			_this._31 = -height / (0 - height);
			_this._02 = 0;
			_this._12 = 0;
			_this._22 = -0.002000200020002;
			_this._32 = -1.0002000200020003;
			_this._03 = 0;
			_this._13 = 0;
			_this._23 = 0;
			_this._33 = 1;
		} else {
			if(!kha_Image.get_nonPow2Supported()) {
				width = kha_graphics4_Graphics2.upperPowerOfTwo(width);
				height = kha_graphics4_Graphics2.upperPowerOfTwo(height);
			}
			if(kha_Image.renderTargetsInvertedY()) {
				var _this = this.projectionMatrix;
				_this._00 = 2 / width;
				_this._10 = 0;
				_this._20 = 0;
				_this._30 = -width / width;
				_this._01 = 0;
				_this._11 = 2.0 / height;
				_this._21 = 0;
				_this._31 = -height / height;
				_this._02 = 0;
				_this._12 = 0;
				_this._22 = -0.002000200020002;
				_this._32 = -1.0002000200020003;
				_this._03 = 0;
				_this._13 = 0;
				_this._23 = 0;
				_this._33 = 1;
			} else {
				var _this = this.projectionMatrix;
				_this._00 = 2 / width;
				_this._10 = 0;
				_this._20 = 0;
				_this._30 = -width / width;
				_this._01 = 0;
				_this._11 = 2.0 / (0 - height);
				_this._21 = 0;
				_this._31 = -height / (0 - height);
				_this._02 = 0;
				_this._12 = 0;
				_this._22 = -0.002000200020002;
				_this._32 = -1.0002000200020003;
				_this._03 = 0;
				_this._13 = 0;
				_this._23 = 0;
				_this._33 = 1;
			}
		}
		this.imagePainter.setProjection(this.projectionMatrix);
		this.coloredPainter.setProjection(this.projectionMatrix);
		this.textPainter.setProjection(this.projectionMatrix);
	}
	,drawImage: function(img,x,y) {
		var _this = this.coloredPainter;
		if(kha_graphics4_ColoredShaderPainter.triangleBufferIndex > 0) {
			_this.drawTriBuffer(false);
		}
		if(kha_graphics4_ColoredShaderPainter.bufferIndex > 0) {
			_this.drawBuffer(false);
		}
		this.textPainter.end();
		var xw = x + img.get_width();
		var yh = y + img.get_height();
		var _this = this.transformations[this.transformationIndex];
		var x1 = x;
		var y1 = yh;
		if(yh == null) {
			y1 = 0;
		}
		if(x == null) {
			x1 = 0;
		}
		var value_x = x1;
		var value_y = y1;
		var w = _this._02 * value_x + _this._12 * value_y + _this._22;
		var x1 = (_this._00 * value_x + _this._10 * value_y + _this._20) / w;
		var y1 = (_this._01 * value_x + _this._11 * value_y + _this._21) / w;
		var x2 = x1;
		var y2 = y1;
		if(y1 == null) {
			y2 = 0;
		}
		if(x1 == null) {
			x2 = 0;
		}
		var _this = this.transformations[this.transformationIndex];
		var x1 = x;
		var y1 = y;
		if(y == null) {
			y1 = 0;
		}
		if(x == null) {
			x1 = 0;
		}
		var value_x = x1;
		var value_y = y1;
		var w = _this._02 * value_x + _this._12 * value_y + _this._22;
		var x = (_this._00 * value_x + _this._10 * value_y + _this._20) / w;
		var y1 = (_this._01 * value_x + _this._11 * value_y + _this._21) / w;
		var x1 = x;
		var y3 = y1;
		if(y1 == null) {
			y3 = 0;
		}
		if(x == null) {
			x1 = 0;
		}
		var _this = this.transformations[this.transformationIndex];
		var x = xw;
		var y1 = y;
		if(y == null) {
			y1 = 0;
		}
		if(xw == null) {
			x = 0;
		}
		var value_x = x;
		var value_y = y1;
		var w = _this._02 * value_x + _this._12 * value_y + _this._22;
		var x = (_this._00 * value_x + _this._10 * value_y + _this._20) / w;
		var y = (_this._01 * value_x + _this._11 * value_y + _this._21) / w;
		var x3 = x;
		var y1 = y;
		if(y == null) {
			y1 = 0;
		}
		if(x == null) {
			x3 = 0;
		}
		var _this = this.transformations[this.transformationIndex];
		var x = xw;
		var y = yh;
		if(yh == null) {
			y = 0;
		}
		if(xw == null) {
			x = 0;
		}
		var value_x = x;
		var value_y = y;
		var w = _this._02 * value_x + _this._12 * value_y + _this._22;
		var x = (_this._00 * value_x + _this._10 * value_y + _this._20) / w;
		var y = (_this._01 * value_x + _this._11 * value_y + _this._21) / w;
		var x4 = x;
		var y4 = y;
		if(y == null) {
			y4 = 0;
		}
		if(x == null) {
			x4 = 0;
		}
		var _this = this.imagePainter;
		var opacity = this.get_opacity();
		var color = this.get_color();
		if(kha_graphics4_ImageShaderPainter.bufferStart + kha_graphics4_ImageShaderPainter.bufferIndex + 1 >= 1500 || kha_graphics4_ImageShaderPainter.lastTexture != null && img != kha_graphics4_ImageShaderPainter.lastTexture) {
			_this.drawBuffer(false);
		}
		var r = ((color & 16711680) >>> 16) * 0.00392156862745098;
		var g = ((color & 65280) >>> 8) * 0.00392156862745098;
		var b = (color & 255) * 0.00392156862745098;
		var a = (color >>> 24) * 0.00392156862745098 * opacity;
		var baseIndex = (kha_graphics4_ImageShaderPainter.bufferIndex - kha_graphics4_ImageShaderPainter.bufferStart) * 9 * 4;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 5] = r;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 6] = g;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 7] = b;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 8] = a;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 14] = r;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 15] = g;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 16] = b;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 17] = a;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 23] = r;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 24] = g;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 25] = b;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 26] = a;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 32] = r;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 33] = g;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 34] = b;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 35] = a;
		var right = img.get_width() / img.get_realWidth();
		var bottom = img.get_height() / img.get_realHeight();
		var baseIndex = (kha_graphics4_ImageShaderPainter.bufferIndex - kha_graphics4_ImageShaderPainter.bufferStart) * 9 * 4;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 3] = 0;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 4] = bottom;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 12] = 0;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 13] = 0;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 21] = right;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 22] = 0;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 30] = right;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 31] = bottom;
		var baseIndex = (kha_graphics4_ImageShaderPainter.bufferIndex - kha_graphics4_ImageShaderPainter.bufferStart) * 9 * 4;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex] = x2;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 1] = y2;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 2] = -5.0;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 9] = x1;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 10] = y3;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 11] = -5.0;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 18] = x3;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 19] = y1;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 20] = -5.0;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 27] = x4;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 28] = y4;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 29] = -5.0;
		++kha_graphics4_ImageShaderPainter.bufferIndex;
		kha_graphics4_ImageShaderPainter.lastTexture = img;
	}
	,drawScaledSubImage: function(img,sx,sy,sw,sh,dx,dy,dw,dh) {
		var _this = this.coloredPainter;
		if(kha_graphics4_ColoredShaderPainter.triangleBufferIndex > 0) {
			_this.drawTriBuffer(false);
		}
		if(kha_graphics4_ColoredShaderPainter.bufferIndex > 0) {
			_this.drawBuffer(false);
		}
		this.textPainter.end();
		var _this = this.transformations[this.transformationIndex];
		var x = dx;
		var y = dy + dh;
		if(y == null) {
			y = 0;
		}
		if(dx == null) {
			x = 0;
		}
		var value_x = x;
		var value_y = y;
		var w = _this._02 * value_x + _this._12 * value_y + _this._22;
		var x = (_this._00 * value_x + _this._10 * value_y + _this._20) / w;
		var y = (_this._01 * value_x + _this._11 * value_y + _this._21) / w;
		var x1 = x;
		var y1 = y;
		if(y == null) {
			y1 = 0;
		}
		if(x == null) {
			x1 = 0;
		}
		var _this = this.transformations[this.transformationIndex];
		var x = dx;
		var y = dy;
		if(dy == null) {
			y = 0;
		}
		if(dx == null) {
			x = 0;
		}
		var value_x = x;
		var value_y = y;
		var w = _this._02 * value_x + _this._12 * value_y + _this._22;
		var x = (_this._00 * value_x + _this._10 * value_y + _this._20) / w;
		var y = (_this._01 * value_x + _this._11 * value_y + _this._21) / w;
		var x2 = x;
		var y2 = y;
		if(y == null) {
			y2 = 0;
		}
		if(x == null) {
			x2 = 0;
		}
		var _this = this.transformations[this.transformationIndex];
		var x = dx + dw;
		var y = dy;
		if(dy == null) {
			y = 0;
		}
		if(x == null) {
			x = 0;
		}
		var value_x = x;
		var value_y = y;
		var w = _this._02 * value_x + _this._12 * value_y + _this._22;
		var x = (_this._00 * value_x + _this._10 * value_y + _this._20) / w;
		var y = (_this._01 * value_x + _this._11 * value_y + _this._21) / w;
		var x3 = x;
		var y3 = y;
		if(y == null) {
			y3 = 0;
		}
		if(x == null) {
			x3 = 0;
		}
		var _this = this.transformations[this.transformationIndex];
		var x = dx + dw;
		var y = dy + dh;
		if(y == null) {
			y = 0;
		}
		if(x == null) {
			x = 0;
		}
		var value_x = x;
		var value_y = y;
		var w = _this._02 * value_x + _this._12 * value_y + _this._22;
		var x = (_this._00 * value_x + _this._10 * value_y + _this._20) / w;
		var y = (_this._01 * value_x + _this._11 * value_y + _this._21) / w;
		var x4 = x;
		var y4 = y;
		if(y == null) {
			y4 = 0;
		}
		if(x == null) {
			x4 = 0;
		}
		var _this = this.imagePainter;
		var opacity = this.get_opacity();
		var color = this.get_color();
		if(kha_graphics4_ImageShaderPainter.bufferStart + kha_graphics4_ImageShaderPainter.bufferIndex + 1 >= 1500 || kha_graphics4_ImageShaderPainter.lastTexture != null && img != kha_graphics4_ImageShaderPainter.lastTexture) {
			_this.drawBuffer(false);
		}
		var left = sx / img.get_realWidth();
		var top = sy / img.get_realHeight();
		var right = (sx + sw) / img.get_realWidth();
		var bottom = (sy + sh) / img.get_realHeight();
		var baseIndex = (kha_graphics4_ImageShaderPainter.bufferIndex - kha_graphics4_ImageShaderPainter.bufferStart) * 9 * 4;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 3] = left;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 4] = bottom;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 12] = left;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 13] = top;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 21] = right;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 22] = top;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 30] = right;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 31] = bottom;
		var r = ((color & 16711680) >>> 16) * 0.00392156862745098;
		var g = ((color & 65280) >>> 8) * 0.00392156862745098;
		var b = (color & 255) * 0.00392156862745098;
		var a = (color >>> 24) * 0.00392156862745098 * opacity;
		var baseIndex = (kha_graphics4_ImageShaderPainter.bufferIndex - kha_graphics4_ImageShaderPainter.bufferStart) * 9 * 4;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 5] = r;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 6] = g;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 7] = b;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 8] = a;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 14] = r;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 15] = g;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 16] = b;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 17] = a;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 23] = r;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 24] = g;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 25] = b;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 26] = a;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 32] = r;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 33] = g;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 34] = b;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 35] = a;
		var baseIndex = (kha_graphics4_ImageShaderPainter.bufferIndex - kha_graphics4_ImageShaderPainter.bufferStart) * 9 * 4;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex] = x1;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 1] = y1;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 2] = -5.0;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 9] = x2;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 10] = y2;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 11] = -5.0;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 18] = x3;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 19] = y3;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 20] = -5.0;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 27] = x4;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 28] = y4;
		kha_graphics4_ImageShaderPainter.rectVertices[baseIndex + 29] = -5.0;
		++kha_graphics4_ImageShaderPainter.bufferIndex;
		kha_graphics4_ImageShaderPainter.lastTexture = img;
	}
	,get_color: function() {
		return this.myColor;
	}
	,set_color: function(color) {
		return this.myColor = color;
	}
	,drawRect: function(x,y,width,height,strength) {
		if(strength == null) {
			strength = 1.0;
		}
		this.imagePainter.end();
		this.textPainter.end();
		var _this = this.transformations[this.transformationIndex];
		var x1 = x - strength / 2;
		var y1 = y + strength / 2;
		if(y1 == null) {
			y1 = 0;
		}
		if(x1 == null) {
			x1 = 0;
		}
		var value_x = x1;
		var value_y = y1;
		var w = _this._02 * value_x + _this._12 * value_y + _this._22;
		var x1 = (_this._00 * value_x + _this._10 * value_y + _this._20) / w;
		var y1 = (_this._01 * value_x + _this._11 * value_y + _this._21) / w;
		var x2 = x1;
		var y2 = y1;
		if(y1 == null) {
			y2 = 0;
		}
		if(x1 == null) {
			x2 = 0;
		}
		var p1_x = x2;
		var p1_y = y2;
		var _this = this.transformations[this.transformationIndex];
		var x1 = x - strength / 2;
		var y1 = y - strength / 2;
		if(y1 == null) {
			y1 = 0;
		}
		if(x1 == null) {
			x1 = 0;
		}
		var value_x = x1;
		var value_y = y1;
		var w = _this._02 * value_x + _this._12 * value_y + _this._22;
		var x1 = (_this._00 * value_x + _this._10 * value_y + _this._20) / w;
		var y1 = (_this._01 * value_x + _this._11 * value_y + _this._21) / w;
		var x2 = x1;
		var y2 = y1;
		if(y1 == null) {
			y2 = 0;
		}
		if(x1 == null) {
			x2 = 0;
		}
		var p2_x = x2;
		var p2_y = y2;
		var _this = this.transformations[this.transformationIndex];
		var x1 = x + width + strength / 2;
		var y1 = y - strength / 2;
		if(y1 == null) {
			y1 = 0;
		}
		if(x1 == null) {
			x1 = 0;
		}
		var value_x = x1;
		var value_y = y1;
		var w = _this._02 * value_x + _this._12 * value_y + _this._22;
		var x1 = (_this._00 * value_x + _this._10 * value_y + _this._20) / w;
		var y1 = (_this._01 * value_x + _this._11 * value_y + _this._21) / w;
		var x2 = x1;
		var y2 = y1;
		if(y1 == null) {
			y2 = 0;
		}
		if(x1 == null) {
			x2 = 0;
		}
		var p3_x = x2;
		var p3_y = y2;
		var _this = this.transformations[this.transformationIndex];
		var x1 = x + width + strength / 2;
		var y1 = y + strength / 2;
		if(y1 == null) {
			y1 = 0;
		}
		if(x1 == null) {
			x1 = 0;
		}
		var value_x = x1;
		var value_y = y1;
		var w = _this._02 * value_x + _this._12 * value_y + _this._22;
		var x1 = (_this._00 * value_x + _this._10 * value_y + _this._20) / w;
		var y1 = (_this._01 * value_x + _this._11 * value_y + _this._21) / w;
		var x2 = x1;
		var y2 = y1;
		if(y1 == null) {
			y2 = 0;
		}
		if(x1 == null) {
			x2 = 0;
		}
		var p4_x = x2;
		var p4_y = y2;
		this.coloredPainter.fillRect(this.get_opacity(),this.get_color(),p1_x,p1_y,p2_x,p2_y,p3_x,p3_y,p4_x,p4_y);
		var _this = this.transformations[this.transformationIndex];
		var x1 = x - strength / 2;
		var y1 = y + height - strength / 2;
		if(y1 == null) {
			y1 = 0;
		}
		if(x1 == null) {
			x1 = 0;
		}
		var value_x = x1;
		var value_y = y1;
		var w = _this._02 * value_x + _this._12 * value_y + _this._22;
		var x1 = (_this._00 * value_x + _this._10 * value_y + _this._20) / w;
		var y1 = (_this._01 * value_x + _this._11 * value_y + _this._21) / w;
		var x2 = x1;
		var y2 = y1;
		if(y1 == null) {
			y2 = 0;
		}
		if(x1 == null) {
			x2 = 0;
		}
		p1_x = x2;
		p1_y = y2;
		var _this = this.transformations[this.transformationIndex];
		var x1 = x - strength / 2;
		var y1 = y + strength / 2;
		if(y1 == null) {
			y1 = 0;
		}
		if(x1 == null) {
			x1 = 0;
		}
		var value_x = x1;
		var value_y = y1;
		var w = _this._02 * value_x + _this._12 * value_y + _this._22;
		var x1 = (_this._00 * value_x + _this._10 * value_y + _this._20) / w;
		var y1 = (_this._01 * value_x + _this._11 * value_y + _this._21) / w;
		var x2 = x1;
		var y2 = y1;
		if(y1 == null) {
			y2 = 0;
		}
		if(x1 == null) {
			x2 = 0;
		}
		p2_x = x2;
		p2_y = y2;
		var _this = this.transformations[this.transformationIndex];
		var x1 = x + strength / 2;
		var y1 = y + strength / 2;
		if(y1 == null) {
			y1 = 0;
		}
		if(x1 == null) {
			x1 = 0;
		}
		var value_x = x1;
		var value_y = y1;
		var w = _this._02 * value_x + _this._12 * value_y + _this._22;
		var x1 = (_this._00 * value_x + _this._10 * value_y + _this._20) / w;
		var y1 = (_this._01 * value_x + _this._11 * value_y + _this._21) / w;
		var x2 = x1;
		var y2 = y1;
		if(y1 == null) {
			y2 = 0;
		}
		if(x1 == null) {
			x2 = 0;
		}
		p3_x = x2;
		p3_y = y2;
		var _this = this.transformations[this.transformationIndex];
		var x1 = x + strength / 2;
		var y1 = y + height - strength / 2;
		if(y1 == null) {
			y1 = 0;
		}
		if(x1 == null) {
			x1 = 0;
		}
		var value_x = x1;
		var value_y = y1;
		var w = _this._02 * value_x + _this._12 * value_y + _this._22;
		var x1 = (_this._00 * value_x + _this._10 * value_y + _this._20) / w;
		var y1 = (_this._01 * value_x + _this._11 * value_y + _this._21) / w;
		var x2 = x1;
		var y2 = y1;
		if(y1 == null) {
			y2 = 0;
		}
		if(x1 == null) {
			x2 = 0;
		}
		p4_x = x2;
		p4_y = y2;
		this.coloredPainter.fillRect(this.get_opacity(),this.get_color(),p1_x,p1_y,p2_x,p2_y,p3_x,p3_y,p4_x,p4_y);
		var _this = this.transformations[this.transformationIndex];
		var x1 = x - strength / 2;
		var y1 = y + height + strength / 2;
		if(y1 == null) {
			y1 = 0;
		}
		if(x1 == null) {
			x1 = 0;
		}
		var value_x = x1;
		var value_y = y1;
		var w = _this._02 * value_x + _this._12 * value_y + _this._22;
		var x1 = (_this._00 * value_x + _this._10 * value_y + _this._20) / w;
		var y1 = (_this._01 * value_x + _this._11 * value_y + _this._21) / w;
		var x2 = x1;
		var y2 = y1;
		if(y1 == null) {
			y2 = 0;
		}
		if(x1 == null) {
			x2 = 0;
		}
		p1_x = x2;
		p1_y = y2;
		var _this = this.transformations[this.transformationIndex];
		var x1 = x - strength / 2;
		var y1 = y + height - strength / 2;
		if(y1 == null) {
			y1 = 0;
		}
		if(x1 == null) {
			x1 = 0;
		}
		var value_x = x1;
		var value_y = y1;
		var w = _this._02 * value_x + _this._12 * value_y + _this._22;
		var x1 = (_this._00 * value_x + _this._10 * value_y + _this._20) / w;
		var y1 = (_this._01 * value_x + _this._11 * value_y + _this._21) / w;
		var x2 = x1;
		var y2 = y1;
		if(y1 == null) {
			y2 = 0;
		}
		if(x1 == null) {
			x2 = 0;
		}
		p2_x = x2;
		p2_y = y2;
		var _this = this.transformations[this.transformationIndex];
		var x1 = x + width + strength / 2;
		var y1 = y + height - strength / 2;
		if(y1 == null) {
			y1 = 0;
		}
		if(x1 == null) {
			x1 = 0;
		}
		var value_x = x1;
		var value_y = y1;
		var w = _this._02 * value_x + _this._12 * value_y + _this._22;
		var x1 = (_this._00 * value_x + _this._10 * value_y + _this._20) / w;
		var y1 = (_this._01 * value_x + _this._11 * value_y + _this._21) / w;
		var x2 = x1;
		var y2 = y1;
		if(y1 == null) {
			y2 = 0;
		}
		if(x1 == null) {
			x2 = 0;
		}
		p3_x = x2;
		p3_y = y2;
		var _this = this.transformations[this.transformationIndex];
		var x1 = x + width + strength / 2;
		var y1 = y + height + strength / 2;
		if(y1 == null) {
			y1 = 0;
		}
		if(x1 == null) {
			x1 = 0;
		}
		var value_x = x1;
		var value_y = y1;
		var w = _this._02 * value_x + _this._12 * value_y + _this._22;
		var x1 = (_this._00 * value_x + _this._10 * value_y + _this._20) / w;
		var y1 = (_this._01 * value_x + _this._11 * value_y + _this._21) / w;
		var x2 = x1;
		var y2 = y1;
		if(y1 == null) {
			y2 = 0;
		}
		if(x1 == null) {
			x2 = 0;
		}
		p4_x = x2;
		p4_y = y2;
		this.coloredPainter.fillRect(this.get_opacity(),this.get_color(),p1_x,p1_y,p2_x,p2_y,p3_x,p3_y,p4_x,p4_y);
		var _this = this.transformations[this.transformationIndex];
		var x1 = x + width - strength / 2;
		var y1 = y + height - strength / 2;
		if(y1 == null) {
			y1 = 0;
		}
		if(x1 == null) {
			x1 = 0;
		}
		var value_x = x1;
		var value_y = y1;
		var w = _this._02 * value_x + _this._12 * value_y + _this._22;
		var x1 = (_this._00 * value_x + _this._10 * value_y + _this._20) / w;
		var y1 = (_this._01 * value_x + _this._11 * value_y + _this._21) / w;
		var x2 = x1;
		var y2 = y1;
		if(y1 == null) {
			y2 = 0;
		}
		if(x1 == null) {
			x2 = 0;
		}
		p1_x = x2;
		p1_y = y2;
		var _this = this.transformations[this.transformationIndex];
		var x1 = x + width - strength / 2;
		var y1 = y + strength / 2;
		if(y1 == null) {
			y1 = 0;
		}
		if(x1 == null) {
			x1 = 0;
		}
		var value_x = x1;
		var value_y = y1;
		var w = _this._02 * value_x + _this._12 * value_y + _this._22;
		var x1 = (_this._00 * value_x + _this._10 * value_y + _this._20) / w;
		var y1 = (_this._01 * value_x + _this._11 * value_y + _this._21) / w;
		var x2 = x1;
		var y2 = y1;
		if(y1 == null) {
			y2 = 0;
		}
		if(x1 == null) {
			x2 = 0;
		}
		p2_x = x2;
		p2_y = y2;
		var _this = this.transformations[this.transformationIndex];
		var x1 = x + width + strength / 2;
		var y1 = y + strength / 2;
		if(y1 == null) {
			y1 = 0;
		}
		if(x1 == null) {
			x1 = 0;
		}
		var value_x = x1;
		var value_y = y1;
		var w = _this._02 * value_x + _this._12 * value_y + _this._22;
		var x1 = (_this._00 * value_x + _this._10 * value_y + _this._20) / w;
		var y1 = (_this._01 * value_x + _this._11 * value_y + _this._21) / w;
		var x2 = x1;
		var y2 = y1;
		if(y1 == null) {
			y2 = 0;
		}
		if(x1 == null) {
			x2 = 0;
		}
		p3_x = x2;
		p3_y = y2;
		var _this = this.transformations[this.transformationIndex];
		var x1 = x + width + strength / 2;
		var y1 = y + height - strength / 2;
		if(y1 == null) {
			y1 = 0;
		}
		if(x1 == null) {
			x1 = 0;
		}
		var value_x = x1;
		var value_y = y1;
		var w = _this._02 * value_x + _this._12 * value_y + _this._22;
		var x = (_this._00 * value_x + _this._10 * value_y + _this._20) / w;
		var y = (_this._01 * value_x + _this._11 * value_y + _this._21) / w;
		var x1 = x;
		var y1 = y;
		if(y == null) {
			y1 = 0;
		}
		if(x == null) {
			x1 = 0;
		}
		p4_x = x1;
		p4_y = y1;
		this.coloredPainter.fillRect(this.get_opacity(),this.get_color(),p1_x,p1_y,p2_x,p2_y,p3_x,p3_y,p4_x,p4_y);
	}
	,fillRect: function(x,y,width,height) {
		this.imagePainter.end();
		this.textPainter.end();
		var _this = this.transformations[this.transformationIndex];
		var x1 = x;
		var y1 = y + height;
		if(y1 == null) {
			y1 = 0;
		}
		if(x == null) {
			x1 = 0;
		}
		var value_x = x1;
		var value_y = y1;
		var w = _this._02 * value_x + _this._12 * value_y + _this._22;
		var x1 = (_this._00 * value_x + _this._10 * value_y + _this._20) / w;
		var y1 = (_this._01 * value_x + _this._11 * value_y + _this._21) / w;
		var x2 = x1;
		var y2 = y1;
		if(y1 == null) {
			y2 = 0;
		}
		if(x1 == null) {
			x2 = 0;
		}
		var _this = this.transformations[this.transformationIndex];
		var x1 = x;
		var y1 = y;
		if(y == null) {
			y1 = 0;
		}
		if(x == null) {
			x1 = 0;
		}
		var value_x = x1;
		var value_y = y1;
		var w = _this._02 * value_x + _this._12 * value_y + _this._22;
		var x1 = (_this._00 * value_x + _this._10 * value_y + _this._20) / w;
		var y1 = (_this._01 * value_x + _this._11 * value_y + _this._21) / w;
		var x3 = x1;
		var y3 = y1;
		if(y1 == null) {
			y3 = 0;
		}
		if(x1 == null) {
			x3 = 0;
		}
		var _this = this.transformations[this.transformationIndex];
		var x1 = x + width;
		var y1 = y;
		if(y == null) {
			y1 = 0;
		}
		if(x1 == null) {
			x1 = 0;
		}
		var value_x = x1;
		var value_y = y1;
		var w = _this._02 * value_x + _this._12 * value_y + _this._22;
		var x1 = (_this._00 * value_x + _this._10 * value_y + _this._20) / w;
		var y1 = (_this._01 * value_x + _this._11 * value_y + _this._21) / w;
		var x4 = x1;
		var y4 = y1;
		if(y1 == null) {
			y4 = 0;
		}
		if(x1 == null) {
			x4 = 0;
		}
		var _this = this.transformations[this.transformationIndex];
		var x1 = x + width;
		var y1 = y + height;
		if(y1 == null) {
			y1 = 0;
		}
		if(x1 == null) {
			x1 = 0;
		}
		var value_x = x1;
		var value_y = y1;
		var w = _this._02 * value_x + _this._12 * value_y + _this._22;
		var x = (_this._00 * value_x + _this._10 * value_y + _this._20) / w;
		var y = (_this._01 * value_x + _this._11 * value_y + _this._21) / w;
		var x1 = x;
		var y1 = y;
		if(y == null) {
			y1 = 0;
		}
		if(x == null) {
			x1 = 0;
		}
		this.coloredPainter.fillRect(this.get_opacity(),this.get_color(),x2,y2,x3,y3,x4,y4,x1,y1);
	}
	,drawString: function(text,x,y) {
		this.imagePainter.end();
		var _this = this.coloredPainter;
		if(kha_graphics4_ColoredShaderPainter.triangleBufferIndex > 0) {
			_this.drawTriBuffer(false);
		}
		if(kha_graphics4_ColoredShaderPainter.bufferIndex > 0) {
			_this.drawBuffer(false);
		}
		this.textPainter.drawString(text,this.get_opacity(),this.get_color(),x,y,this.transformations[this.transformationIndex]);
	}
	,get_font: function() {
		return this.myFont;
	}
	,set_font: function(font) {
		this.textPainter.setFont(font);
		return this.myFont = font;
	}
	,set_fontSize: function(value) {
		return kha_graphics2_Graphics.prototype.set_fontSize.call(this,this.textPainter.fontSize = value);
	}
	,drawLine: function(x1,y1,x2,y2,strength) {
		if(strength == null) {
			strength = 1.0;
		}
		this.imagePainter.end();
		this.textPainter.end();
		var vec_x = 0;
		var vec_y = 0;
		if(y2 == y1) {
			vec_x = 0;
			vec_y = -1;
		} else {
			var y = -(x2 - x1) / (y2 - y1);
			if(y == null) {
				y = 0;
			}
			vec_x = 1;
			vec_y = y;
		}
		var currentLength = Math.sqrt(vec_x * vec_x + vec_y * vec_y);
		if(currentLength != 0) {
			var mul = strength / currentLength;
			vec_x *= mul;
			vec_y *= mul;
		}
		var x = x1 + 0.5 * vec_x;
		var y = y1 + 0.5 * vec_y;
		if(y == null) {
			y = 0;
		}
		if(x == null) {
			x = 0;
		}
		var p1_x = x;
		var p1_y = y;
		var x = x2 + 0.5 * vec_x;
		var y = y2 + 0.5 * vec_y;
		if(y == null) {
			y = 0;
		}
		if(x == null) {
			x = 0;
		}
		var p2_x = x;
		var p2_y = y;
		var x = p1_x - vec_x;
		var y = p1_y - vec_y;
		if(y == null) {
			y = 0;
		}
		if(x == null) {
			x = 0;
		}
		var p3_x = x;
		var p3_y = y;
		var x = p2_x - vec_x;
		var y = p2_y - vec_y;
		if(y == null) {
			y = 0;
		}
		if(x == null) {
			x = 0;
		}
		var p4_x = x;
		var p4_y = y;
		var _this = this.transformations[this.transformationIndex];
		var w = _this._02 * p1_x + _this._12 * p1_y + _this._22;
		var x = (_this._00 * p1_x + _this._10 * p1_y + _this._20) / w;
		var y = (_this._01 * p1_x + _this._11 * p1_y + _this._21) / w;
		var x1 = x;
		var y1 = y;
		if(y == null) {
			y1 = 0;
		}
		if(x == null) {
			x1 = 0;
		}
		p1_x = x1;
		p1_y = y1;
		var _this = this.transformations[this.transformationIndex];
		var w = _this._02 * p2_x + _this._12 * p2_y + _this._22;
		var x = (_this._00 * p2_x + _this._10 * p2_y + _this._20) / w;
		var y = (_this._01 * p2_x + _this._11 * p2_y + _this._21) / w;
		var x1 = x;
		var y1 = y;
		if(y == null) {
			y1 = 0;
		}
		if(x == null) {
			x1 = 0;
		}
		p2_x = x1;
		p2_y = y1;
		var _this = this.transformations[this.transformationIndex];
		var w = _this._02 * p3_x + _this._12 * p3_y + _this._22;
		var x = (_this._00 * p3_x + _this._10 * p3_y + _this._20) / w;
		var y = (_this._01 * p3_x + _this._11 * p3_y + _this._21) / w;
		var x1 = x;
		var y1 = y;
		if(y == null) {
			y1 = 0;
		}
		if(x == null) {
			x1 = 0;
		}
		p3_x = x1;
		p3_y = y1;
		var _this = this.transformations[this.transformationIndex];
		var w = _this._02 * p4_x + _this._12 * p4_y + _this._22;
		var x = (_this._00 * p4_x + _this._10 * p4_y + _this._20) / w;
		var y = (_this._01 * p4_x + _this._11 * p4_y + _this._21) / w;
		var x1 = x;
		var y1 = y;
		if(y == null) {
			y1 = 0;
		}
		if(x == null) {
			x1 = 0;
		}
		p4_x = x1;
		p4_y = y1;
		this.coloredPainter.fillTriangle(this.get_opacity(),this.get_color(),p1_x,p1_y,p2_x,p2_y,p3_x,p3_y);
		this.coloredPainter.fillTriangle(this.get_opacity(),this.get_color(),p3_x,p3_y,p2_x,p2_y,p4_x,p4_y);
	}
	,fillTriangle: function(x1,y1,x2,y2,x3,y3) {
		this.imagePainter.end();
		this.textPainter.end();
		var _this = this.transformations[this.transformationIndex];
		var x = x1;
		var y = y1;
		if(y1 == null) {
			y = 0;
		}
		if(x1 == null) {
			x = 0;
		}
		var value_x = x;
		var value_y = y;
		var w = _this._02 * value_x + _this._12 * value_y + _this._22;
		var x = (_this._00 * value_x + _this._10 * value_y + _this._20) / w;
		var y = (_this._01 * value_x + _this._11 * value_y + _this._21) / w;
		var x1 = x;
		var y1 = y;
		if(y == null) {
			y1 = 0;
		}
		if(x == null) {
			x1 = 0;
		}
		var _this = this.transformations[this.transformationIndex];
		var x = x2;
		var y = y2;
		if(y2 == null) {
			y = 0;
		}
		if(x2 == null) {
			x = 0;
		}
		var value_x = x;
		var value_y = y;
		var w = _this._02 * value_x + _this._12 * value_y + _this._22;
		var x = (_this._00 * value_x + _this._10 * value_y + _this._20) / w;
		var y = (_this._01 * value_x + _this._11 * value_y + _this._21) / w;
		var x2 = x;
		var y2 = y;
		if(y == null) {
			y2 = 0;
		}
		if(x == null) {
			x2 = 0;
		}
		var _this = this.transformations[this.transformationIndex];
		var x = x3;
		var y = y3;
		if(y3 == null) {
			y = 0;
		}
		if(x3 == null) {
			x = 0;
		}
		var value_x = x;
		var value_y = y;
		var w = _this._02 * value_x + _this._12 * value_y + _this._22;
		var x = (_this._00 * value_x + _this._10 * value_y + _this._20) / w;
		var y = (_this._01 * value_x + _this._11 * value_y + _this._21) / w;
		var x3 = x;
		var y3 = y;
		if(y == null) {
			y3 = 0;
		}
		if(x == null) {
			x3 = 0;
		}
		this.coloredPainter.fillTriangle(this.get_opacity(),this.get_color(),x1,y1,x2,y2,x3,y3);
	}
	,set_imageScaleQuality: function(value) {
		if(value == this.myImageScaleQuality) {
			return value;
		}
		this.imagePainter.setBilinearFilter(value == kha_graphics2_ImageScaleQuality.High);
		this.textPainter.setBilinearFilter(value == kha_graphics2_ImageScaleQuality.High);
		return this.myImageScaleQuality = value;
	}
	,setPipeline: function(pipeline) {
		if(pipeline == this.lastPipeline) {
			return;
		}
		this.lastPipeline = pipeline;
		this.flush();
		if(pipeline == null) {
			this.imagePainter.set_pipeline(null);
			this.coloredPainter.set_pipeline(null);
			this.textPainter.set_pipeline(null);
		} else {
			var cache = this.pipelineCache.h[pipeline.__id__];
			if(cache == null) {
				cache = new kha_graphics4_PipelineCache(pipeline,true);
				this.pipelineCache.set(pipeline,cache);
			}
			this.imagePainter.set_pipeline(cache);
			this.coloredPainter.set_pipeline(cache);
			this.textPainter.set_pipeline(cache);
		}
	}
	,scissor: function(x,y,width,height) {
		this.scissorEnabled = true;
		this.scissorX = x;
		this.scissorY = y;
		this.scissorW = width;
		this.scissorH = height;
		this.flush();
		this.g.scissor(x,y,width,height);
	}
	,disableScissor: function() {
		this.scissorEnabled = false;
		this.flush();
		this.g.disableScissor();
	}
	,begin: function(clear,clearColor) {
		if(clear == null) {
			clear = true;
		}
		if(kha_graphics4_Graphics2.current == null) {
			kha_graphics4_Graphics2.current = this;
		} else if(!kha_graphics4_Graphics2.thrown) {
			kha_graphics4_Graphics2.thrown = true;
			throw haxe_Exception.thrown("End before you begin");
		}
		this.g.begin();
		if(clear) {
			this.clear(clearColor);
		}
		this.setProjection();
	}
	,clear: function(color) {
		this.flush();
		this.g.clear(color == null ? -16777216 : color);
	}
	,flush: function() {
		this.imagePainter.end();
		this.textPainter.end();
		var _this = this.coloredPainter;
		if(kha_graphics4_ColoredShaderPainter.triangleBufferIndex > 0) {
			_this.drawTriBuffer(false);
		}
		if(kha_graphics4_ColoredShaderPainter.bufferIndex > 0) {
			_this.drawBuffer(false);
		}
	}
	,end: function() {
		this.flush();
		this.g.end();
		if(kha_graphics4_Graphics2.current == this) {
			kha_graphics4_Graphics2.current = null;
		} else if(!kha_graphics4_Graphics2.thrown) {
			kha_graphics4_Graphics2.thrown = true;
			throw haxe_Exception.thrown("Begin before you end");
		}
	}
	,__class__: kha_graphics4_Graphics2
});
var kha_graphics4_IndexBuffer = function(indexCount,usage,canRead) {
	if(canRead == null) {
		canRead = false;
	}
	this.indexCount = indexCount;
	this.buffer = Krom.createIndexBuffer(indexCount);
};
$hxClasses["kha.graphics4.IndexBuffer"] = kha_graphics4_IndexBuffer;
kha_graphics4_IndexBuffer.__name__ = "kha.graphics4.IndexBuffer";
kha_graphics4_IndexBuffer.prototype = {
	'delete': function() {
		Krom.deleteIndexBuffer(this.buffer);
		this.buffer = null;
	}
	,lock: function(start,count) {
		this._data = Krom.lockIndexBuffer(this.buffer);
		if(start == null) {
			start = 0;
		}
		if(count == null) {
			count = this.indexCount;
		}
		return this._data.subarray(start,start + count);
	}
	,unlock: function() {
		Krom.unlockIndexBuffer(this.buffer);
	}
	,set: function() {
		Krom.setIndexBuffer(this.buffer);
	}
	,__class__: kha_graphics4_IndexBuffer
};
var kha_graphics4_PipelineState = function() {
	this.inputLayout = null;
	this.vertexShader = null;
	this.fragmentShader = null;
	this.geometryShader = null;
	this.tessellationControlShader = null;
	this.tessellationEvaluationShader = null;
	this.cullMode = 2;
	this.depthWrite = false;
	this.depthMode = 0;
	this.blendSource = 1;
	this.blendDestination = 2;
	this.blendOperation = 0;
	this.alphaBlendSource = 1;
	this.alphaBlendDestination = 2;
	this.alphaBlendOperation = 0;
	this.colorWriteMasksRed = [];
	this.colorWriteMasksGreen = [];
	this.colorWriteMasksBlue = [];
	this.colorWriteMasksAlpha = [];
	this.colorWriteMasksRed.push(true);
	this.colorWriteMasksRed.push(true);
	this.colorWriteMasksRed.push(true);
	this.colorWriteMasksRed.push(true);
	this.colorWriteMasksRed.push(true);
	this.colorWriteMasksRed.push(true);
	this.colorWriteMasksRed.push(true);
	this.colorWriteMasksRed.push(true);
	this.colorWriteMasksGreen.push(true);
	this.colorWriteMasksGreen.push(true);
	this.colorWriteMasksGreen.push(true);
	this.colorWriteMasksGreen.push(true);
	this.colorWriteMasksGreen.push(true);
	this.colorWriteMasksGreen.push(true);
	this.colorWriteMasksGreen.push(true);
	this.colorWriteMasksGreen.push(true);
	this.colorWriteMasksBlue.push(true);
	this.colorWriteMasksBlue.push(true);
	this.colorWriteMasksBlue.push(true);
	this.colorWriteMasksBlue.push(true);
	this.colorWriteMasksBlue.push(true);
	this.colorWriteMasksBlue.push(true);
	this.colorWriteMasksBlue.push(true);
	this.colorWriteMasksBlue.push(true);
	this.colorWriteMasksAlpha.push(true);
	this.colorWriteMasksAlpha.push(true);
	this.colorWriteMasksAlpha.push(true);
	this.colorWriteMasksAlpha.push(true);
	this.colorWriteMasksAlpha.push(true);
	this.colorWriteMasksAlpha.push(true);
	this.colorWriteMasksAlpha.push(true);
	this.colorWriteMasksAlpha.push(true);
	this.colorAttachmentCount = 1;
	this.colorAttachments = [];
	this.colorAttachments.push(0);
	this.colorAttachments.push(0);
	this.colorAttachments.push(0);
	this.colorAttachments.push(0);
	this.colorAttachments.push(0);
	this.colorAttachments.push(0);
	this.colorAttachments.push(0);
	this.colorAttachments.push(0);
	this.depthStencilAttachment = 0;
	this.conservativeRasterization = false;
	this.pipeline = Krom.createPipeline();
};
$hxClasses["kha.graphics4.PipelineState"] = kha_graphics4_PipelineState;
kha_graphics4_PipelineState.__name__ = "kha.graphics4.PipelineState";
kha_graphics4_PipelineState.getRenderTargetFormat = function(format) {
	switch(format) {
	case 0:
		return 0;
	case 1:
		return 5;
	case 2:
		return 3;
	case 3:
		return 4;
	case 4:
		return 1;
	case 5:
		return 2;
	case 6:
		return 6;
	default:
		return 0;
	}
};
kha_graphics4_PipelineState.getDepthBufferBits = function(depthAndStencil) {
	switch(depthAndStencil) {
	case 0:
		return 0;
	case 1:
		return 24;
	case 2:
		return 24;
	case 3:
		return 24;
	case 4:
		return 32;
	case 5:
		return 16;
	}
};
kha_graphics4_PipelineState.getStencilBufferBits = function(depthAndStencil) {
	switch(depthAndStencil) {
	case 0:
		return 0;
	case 1:
		return 0;
	case 2:
		return 8;
	case 3:
		return 8;
	case 4:
		return 8;
	case 5:
		return 0;
	}
};
kha_graphics4_PipelineState.convertCullMode = function(mode) {
	switch(mode) {
	case 0:
		return 0;
	case 1:
		return 1;
	case 2:
		return 2;
	}
};
kha_graphics4_PipelineState.convertCompareMode = function(mode) {
	switch(mode) {
	case 0:
		return 0;
	case 1:
		return 1;
	case 2:
		return 2;
	case 3:
		return 3;
	case 4:
		return 4;
	case 5:
		return 5;
	case 6:
		return 6;
	case 7:
		return 7;
	}
};
kha_graphics4_PipelineState.convertBlendingFactor = function(factor) {
	switch(factor) {
	case 0:case 1:
		return 0;
	case 2:
		return 1;
	case 3:
		return 2;
	case 4:
		return 3;
	case 5:
		return 4;
	case 6:
		return 5;
	case 7:
		return 6;
	case 8:
		return 7;
	case 9:
		return 8;
	case 10:
		return 9;
	}
};
kha_graphics4_PipelineState.prototype = {
	'delete': function() {
		Krom.deletePipeline(this.pipeline);
		this.pipeline = null;
	}
	,compile: function() {
		var structure0 = this.inputLayout.length > 0 ? this.inputLayout[0] : null;
		var structure1 = this.inputLayout.length > 1 ? this.inputLayout[1] : null;
		var structure2 = this.inputLayout.length > 2 ? this.inputLayout[2] : null;
		var structure3 = this.inputLayout.length > 3 ? this.inputLayout[3] : null;
		var gs = this.geometryShader != null ? this.geometryShader.shader : null;
		var tcs = this.tessellationControlShader != null ? this.tessellationControlShader.shader : null;
		var tes = this.tessellationEvaluationShader != null ? this.tessellationEvaluationShader.shader : null;
		var colorAttachments = [];
		colorAttachments.push(kha_graphics4_PipelineState.getRenderTargetFormat(this.colorAttachments[0]));
		colorAttachments.push(kha_graphics4_PipelineState.getRenderTargetFormat(this.colorAttachments[1]));
		colorAttachments.push(kha_graphics4_PipelineState.getRenderTargetFormat(this.colorAttachments[2]));
		colorAttachments.push(kha_graphics4_PipelineState.getRenderTargetFormat(this.colorAttachments[3]));
		colorAttachments.push(kha_graphics4_PipelineState.getRenderTargetFormat(this.colorAttachments[4]));
		colorAttachments.push(kha_graphics4_PipelineState.getRenderTargetFormat(this.colorAttachments[5]));
		colorAttachments.push(kha_graphics4_PipelineState.getRenderTargetFormat(this.colorAttachments[6]));
		colorAttachments.push(kha_graphics4_PipelineState.getRenderTargetFormat(this.colorAttachments[7]));
		Krom.compilePipeline(this.pipeline,structure0,structure1,structure2,structure3,this.inputLayout.length,this.vertexShader.shader,this.fragmentShader.shader,gs,tcs,tes,{ cullMode : kha_graphics4_PipelineState.convertCullMode(this.cullMode), depthWrite : this.depthWrite, depthMode : kha_graphics4_PipelineState.convertCompareMode(this.depthMode), blendSource : kha_graphics4_PipelineState.convertBlendingFactor(this.blendSource), blendDestination : kha_graphics4_PipelineState.convertBlendingFactor(this.blendDestination), alphaBlendSource : kha_graphics4_PipelineState.convertBlendingFactor(this.alphaBlendSource), alphaBlendDestination : kha_graphics4_PipelineState.convertBlendingFactor(this.alphaBlendDestination), colorWriteMaskRed : this.colorWriteMasksRed, colorWriteMaskGreen : this.colorWriteMasksGreen, colorWriteMaskBlue : this.colorWriteMasksBlue, colorWriteMaskAlpha : this.colorWriteMasksAlpha, colorAttachmentCount : this.colorAttachmentCount, colorAttachments : colorAttachments, depthAttachmentBits : kha_graphics4_PipelineState.getDepthBufferBits(this.depthStencilAttachment), stencilAttachmentBits : kha_graphics4_PipelineState.getStencilBufferBits(this.depthStencilAttachment), conservativeRasterization : this.conservativeRasterization});
	}
	,set: function() {
		Krom.setPipeline(this.pipeline);
	}
	,getConstantLocation: function(name) {
		return Krom.getConstantLocation(this.pipeline,name);
	}
	,getTextureUnit: function(name) {
		return Krom.getTextureUnit(this.pipeline,name);
	}
	,__class__: kha_graphics4_PipelineState
};
var kha_graphics4_TessellationControlShader = function(sources,names) {
	this.shader = Krom.createTessellationControlShader(sources[0].bytes.b.bufferValue,names[0]);
};
$hxClasses["kha.graphics4.TessellationControlShader"] = kha_graphics4_TessellationControlShader;
kha_graphics4_TessellationControlShader.__name__ = "kha.graphics4.TessellationControlShader";
kha_graphics4_TessellationControlShader.prototype = {
	'delete': function() {
		Krom.deleteShader(this.shader);
		this.shader = null;
	}
	,__class__: kha_graphics4_TessellationControlShader
};
var kha_graphics4_TessellationEvaluationShader = function(sources,names) {
	this.shader = Krom.createTessellationEvaluationShader(sources[0].bytes.b.bufferValue,names[0]);
};
$hxClasses["kha.graphics4.TessellationEvaluationShader"] = kha_graphics4_TessellationEvaluationShader;
kha_graphics4_TessellationEvaluationShader.__name__ = "kha.graphics4.TessellationEvaluationShader";
kha_graphics4_TessellationEvaluationShader.prototype = {
	'delete': function() {
		Krom.deleteShader(this.shader);
		this.shader = null;
	}
	,__class__: kha_graphics4_TessellationEvaluationShader
};
var kha_graphics4_TextureUnit = function() { };
$hxClasses["kha.graphics4.TextureUnit"] = kha_graphics4_TextureUnit;
kha_graphics4_TextureUnit.__name__ = "kha.graphics4.TextureUnit";
kha_graphics4_TextureUnit.__isInterface__ = true;
var kha_graphics4_VertexBuffer = function(vertexCount,structure,usage,instanceDataStepRate,canRead) {
	if(canRead == null) {
		canRead = false;
	}
	if(instanceDataStepRate == null) {
		instanceDataStepRate = 0;
	}
	this.lastLockCount = 0;
	this.vertexCount = vertexCount;
	this.structure = structure;
	this.buffer = Krom.createVertexBuffer(vertexCount,structure.elements,usage,instanceDataStepRate);
};
$hxClasses["kha.graphics4.VertexBuffer"] = kha_graphics4_VertexBuffer;
kha_graphics4_VertexBuffer.__name__ = "kha.graphics4.VertexBuffer";
kha_graphics4_VertexBuffer.prototype = {
	'delete': function() {
		Krom.deleteVertexBuffer(this.buffer);
		this.buffer = null;
	}
	,lock: function(start,count) {
		if(start == null) {
			start = 0;
		}
		if(count == null) {
			count = this.count();
		}
		this.lastLockCount = count;
		this._data = Krom.lockVertexBuffer(this.buffer,start,count);
		return this._data;
	}
	,lockInt16: function(start,count) {
		var this1 = new Int16Array(this.lock(start,count).buffer);
		return this1;
	}
	,unlock: function(count) {
		Krom.unlockVertexBuffer(this.buffer,count == null ? this.lastLockCount : count);
	}
	,count: function() {
		return this.vertexCount;
	}
	,set: function(offset) {
		Krom.setVertexBuffer(this.buffer);
		return 0;
	}
	,__class__: kha_graphics4_VertexBuffer
};
var kha_graphics4_VertexElement = function(name,data) {
	this.name = name;
	this.data = data;
};
$hxClasses["kha.graphics4.VertexElement"] = kha_graphics4_VertexElement;
kha_graphics4_VertexElement.__name__ = "kha.graphics4.VertexElement";
kha_graphics4_VertexElement.prototype = {
	__class__: kha_graphics4_VertexElement
};
var kha_graphics4_VertexShader = function(sources,names) {
	if(sources != null) {
		this.shader = Krom.createVertexShader(sources[0].bytes.b.bufferValue,names[0]);
	}
};
$hxClasses["kha.graphics4.VertexShader"] = kha_graphics4_VertexShader;
kha_graphics4_VertexShader.__name__ = "kha.graphics4.VertexShader";
kha_graphics4_VertexShader.fromSource = function(source) {
	var shader = new kha_graphics4_VertexShader(null,null);
	shader.shader = Krom.createVertexShaderFromSource(source);
	return shader;
};
kha_graphics4_VertexShader.prototype = {
	'delete': function() {
		Krom.deleteShader(this.shader);
		this.shader = null;
	}
	,__class__: kha_graphics4_VertexShader
};
var kha_graphics4_VertexStructure = function() {
	this.elements = [];
	this.instanced = false;
};
$hxClasses["kha.graphics4.VertexStructure"] = kha_graphics4_VertexStructure;
kha_graphics4_VertexStructure.__name__ = "kha.graphics4.VertexStructure";
kha_graphics4_VertexStructure.prototype = {
	add: function(name,data) {
		this.elements.push(new kha_graphics4_VertexElement(name,data));
	}
	,size: function() {
		return this.elements.length;
	}
	,byteSize: function() {
		var byteSize = 0;
		var _g = 0;
		var _g1 = this.elements.length;
		while(_g < _g1) byteSize += this.dataByteSize(this.elements[_g++].data);
		return byteSize;
	}
	,dataByteSize: function(data) {
		switch(data) {
		case 0:
			return 4;
		case 1:
			return 8;
		case 2:
			return 12;
		case 3:
			return 16;
		case 4:
			return 64;
		case 5:
			return 4;
		case 6:
			return 8;
		}
	}
	,get: function(index) {
		return this.elements[index];
	}
	,__class__: kha_graphics4_VertexStructure
};
var kha_input_Gamepad = $hx_exports["kha"]["input"]["Gamepad"] = function(index,id) {
	if(id == null) {
		id = "unknown";
	}
	if(index == null) {
		index = 0;
	}
	this.index = index;
	this.axisListeners = [];
	this.buttonListeners = [];
	kha_input_Gamepad.instances[index] = this;
};
$hxClasses["kha.input.Gamepad"] = kha_input_Gamepad;
kha_input_Gamepad.__name__ = "kha.input.Gamepad";
kha_input_Gamepad.get = function(index) {
	if(index == null) {
		index = 0;
	}
	if(index >= kha_input_Gamepad.instances.length) {
		return null;
	}
	return kha_input_Gamepad.instances[index];
};
kha_input_Gamepad.notifyOnConnect = function(connectListener,disconnectListener) {
	if(connectListener != null) {
		kha_input_Gamepad.connectListeners.push(connectListener);
	}
	if(disconnectListener != null) {
		kha_input_Gamepad.disconnectListeners.push(disconnectListener);
	}
};
kha_input_Gamepad.removeConnect = function(connectListener,disconnectListener) {
	if(connectListener != null) {
		HxOverrides.remove(kha_input_Gamepad.connectListeners,connectListener);
	}
	if(disconnectListener != null) {
		HxOverrides.remove(kha_input_Gamepad.disconnectListeners,disconnectListener);
	}
};
kha_input_Gamepad.sendConnectEvent = function(index) {
	kha_input_Gamepad.instances[index].connected = true;
	var _g = 0;
	var _g1 = kha_input_Gamepad.connectListeners;
	while(_g < _g1.length) _g1[_g++](index);
};
kha_input_Gamepad.sendDisconnectEvent = function(index) {
	kha_input_Gamepad.instances[index].connected = false;
	var _g = 0;
	var _g1 = kha_input_Gamepad.disconnectListeners;
	while(_g < _g1.length) _g1[_g++](index);
};
kha_input_Gamepad.prototype = {
	notify: function(axisListener,buttonListener) {
		if(axisListener != null) {
			this.axisListeners.push(axisListener);
		}
		if(buttonListener != null) {
			this.buttonListeners.push(buttonListener);
		}
	}
	,remove: function(axisListener,buttonListener) {
		if(axisListener != null) {
			HxOverrides.remove(this.axisListeners,axisListener);
		}
		if(buttonListener != null) {
			HxOverrides.remove(this.buttonListeners,buttonListener);
		}
	}
	,get_id: function() {
		return kha_SystemImpl.getGamepadId(this.index);
	}
	,sendAxisEvent: function(axis,value) {
		var _g = 0;
		var _g1 = this.axisListeners;
		while(_g < _g1.length) _g1[_g++](axis,value);
	}
	,sendButtonEvent: function(button,value) {
		var _g = 0;
		var _g1 = this.buttonListeners;
		while(_g < _g1.length) _g1[_g++](button,value);
	}
	,__class__: kha_input_Gamepad
	,__properties__: {get_id:"get_id"}
};
var kha_input_Keyboard = $hx_exports["kha"]["input"]["Keyboard"] = function() {
	this.downListeners = [];
	this.upListeners = [];
	this.pressListeners = [];
	kha_input_Keyboard.instance = this;
};
$hxClasses["kha.input.Keyboard"] = kha_input_Keyboard;
kha_input_Keyboard.__name__ = "kha.input.Keyboard";
kha_input_Keyboard.get = function(num) {
	if(num == null) {
		num = 0;
	}
	return kha_SystemImpl.getKeyboard(num);
};
kha_input_Keyboard.prototype = {
	notify: function(downListener,upListener,pressListener) {
		if(downListener != null) {
			this.downListeners.push(downListener);
		}
		if(upListener != null) {
			this.upListeners.push(upListener);
		}
		if(pressListener != null) {
			this.pressListeners.push(pressListener);
		}
	}
	,remove: function(downListener,upListener,pressListener) {
		if(downListener != null) {
			HxOverrides.remove(this.downListeners,downListener);
		}
		if(upListener != null) {
			HxOverrides.remove(this.upListeners,upListener);
		}
		if(pressListener != null) {
			HxOverrides.remove(this.pressListeners,pressListener);
		}
	}
	,show: function() {
		kha_SystemImpl.showKeyboard();
	}
	,hide: function() {
		kha_SystemImpl.hideKeyboard();
	}
	,sendDownEvent: function(code) {
		var _g = 0;
		var _g1 = this.downListeners;
		while(_g < _g1.length) _g1[_g++](code);
	}
	,sendUpEvent: function(code) {
		var _g = 0;
		var _g1 = this.upListeners;
		while(_g < _g1.length) _g1[_g++](code);
	}
	,sendPressEvent: function(char) {
		var _g = 0;
		var _g1 = this.pressListeners;
		while(_g < _g1.length) _g1[_g++](char);
	}
	,__class__: kha_input_Keyboard
};
var kha_input_Mouse = $hx_exports["kha"]["input"]["Mouse"] = function() {
	kha_input_Mouse.instance = this;
};
$hxClasses["kha.input.Mouse"] = kha_input_Mouse;
kha_input_Mouse.__name__ = "kha.input.Mouse";
kha_input_Mouse.get = function(num) {
	if(num == null) {
		num = 0;
	}
	return kha_SystemImpl.getMouse(num);
};
kha_input_Mouse.prototype = {
	notify: function(downListener,upListener,moveListener,wheelListener,leaveListener) {
		this.notifyWindowed(0,downListener,upListener,moveListener,wheelListener,leaveListener);
	}
	,remove: function(downListener,upListener,moveListener,wheelListener,leaveListener) {
		this.removeWindowed(0,downListener,upListener,moveListener,wheelListener,leaveListener);
	}
	,notifyWindowed: function(windowId,downListener,upListener,moveListener,wheelListener,leaveListener) {
		if(downListener != null) {
			if(this.windowDownListeners == null) {
				this.windowDownListeners = [];
			}
			while(this.windowDownListeners.length <= windowId) this.windowDownListeners.push([]);
			this.windowDownListeners[windowId].push(downListener);
		}
		if(upListener != null) {
			if(this.windowUpListeners == null) {
				this.windowUpListeners = [];
			}
			while(this.windowUpListeners.length <= windowId) this.windowUpListeners.push([]);
			this.windowUpListeners[windowId].push(upListener);
		}
		if(moveListener != null) {
			if(this.windowMoveListeners == null) {
				this.windowMoveListeners = [];
			}
			while(this.windowMoveListeners.length <= windowId) this.windowMoveListeners.push([]);
			this.windowMoveListeners[windowId].push(moveListener);
		}
		if(wheelListener != null) {
			if(this.windowWheelListeners == null) {
				this.windowWheelListeners = [];
			}
			while(this.windowWheelListeners.length <= windowId) this.windowWheelListeners.push([]);
			this.windowWheelListeners[windowId].push(wheelListener);
		}
		if(leaveListener != null) {
			if(this.windowLeaveListeners == null) {
				this.windowLeaveListeners = [];
			}
			while(this.windowLeaveListeners.length <= windowId) this.windowLeaveListeners.push([]);
			this.windowLeaveListeners[windowId].push(leaveListener);
		}
	}
	,removeWindowed: function(windowId,downListener,upListener,moveListener,wheelListener,leaveListener) {
		if(downListener != null) {
			if(this.windowDownListeners != null) {
				if(windowId < this.windowDownListeners.length) {
					HxOverrides.remove(this.windowDownListeners[windowId],downListener);
				} else {
					haxe_Log.trace("no downListeners for window \"" + windowId + "\" are registered",{ fileName : "kha/input/Mouse.hx", lineNumber : 108, className : "kha.input.Mouse", methodName : "removeWindowed"});
				}
			} else {
				haxe_Log.trace("no downListeners were ever registered",{ fileName : "kha/input/Mouse.hx", lineNumber : 112, className : "kha.input.Mouse", methodName : "removeWindowed"});
			}
		}
		if(upListener != null) {
			if(this.windowUpListeners != null) {
				if(windowId < this.windowUpListeners.length) {
					HxOverrides.remove(this.windowUpListeners[windowId],upListener);
				} else {
					haxe_Log.trace("no upListeners for window \"" + windowId + "\" are registered",{ fileName : "kha/input/Mouse.hx", lineNumber : 122, className : "kha.input.Mouse", methodName : "removeWindowed"});
				}
			} else {
				haxe_Log.trace("no upListeners were ever registered",{ fileName : "kha/input/Mouse.hx", lineNumber : 126, className : "kha.input.Mouse", methodName : "removeWindowed"});
			}
		}
		if(moveListener != null) {
			if(this.windowMoveListeners != null) {
				if(windowId < this.windowMoveListeners.length) {
					HxOverrides.remove(this.windowMoveListeners[windowId],moveListener);
				} else {
					haxe_Log.trace("no moveListeners for window \"" + windowId + "\" are registered",{ fileName : "kha/input/Mouse.hx", lineNumber : 136, className : "kha.input.Mouse", methodName : "removeWindowed"});
				}
			} else {
				haxe_Log.trace("no moveListeners were ever registered",{ fileName : "kha/input/Mouse.hx", lineNumber : 140, className : "kha.input.Mouse", methodName : "removeWindowed"});
			}
		}
		if(wheelListener != null) {
			if(this.windowWheelListeners != null) {
				if(windowId < this.windowWheelListeners.length) {
					HxOverrides.remove(this.windowWheelListeners[windowId],wheelListener);
				} else {
					haxe_Log.trace("no wheelListeners for window \"" + windowId + "\" are registered",{ fileName : "kha/input/Mouse.hx", lineNumber : 150, className : "kha.input.Mouse", methodName : "removeWindowed"});
				}
			} else {
				haxe_Log.trace("no wheelListeners were ever registered",{ fileName : "kha/input/Mouse.hx", lineNumber : 154, className : "kha.input.Mouse", methodName : "removeWindowed"});
			}
		}
		if(leaveListener != null) {
			if(this.windowLeaveListeners != null) {
				if(windowId < this.windowLeaveListeners.length) {
					HxOverrides.remove(this.windowLeaveListeners[windowId],leaveListener);
				} else {
					haxe_Log.trace("no leaveListeners for window \"" + windowId + "\" are registered",{ fileName : "kha/input/Mouse.hx", lineNumber : 164, className : "kha.input.Mouse", methodName : "removeWindowed"});
				}
			} else {
				haxe_Log.trace("no leaveListeners were ever registered",{ fileName : "kha/input/Mouse.hx", lineNumber : 168, className : "kha.input.Mouse", methodName : "removeWindowed"});
			}
		}
	}
	,lock: function() {
		kha_SystemImpl.lockMouse();
	}
	,unlock: function() {
		kha_SystemImpl.unlockMouse();
	}
	,canLock: function() {
		return kha_SystemImpl.canLockMouse();
	}
	,isLocked: function() {
		return kha_SystemImpl.isMouseLocked();
	}
	,notifyOnLockChange: function(change,error) {
		kha_SystemImpl.notifyOfMouseLockChange(change,error);
	}
	,removeFromLockChange: function(change,error) {
		kha_SystemImpl.removeFromMouseLockChange(change,error);
	}
	,hideSystemCursor: function() {
		kha_SystemImpl.hideSystemCursor();
	}
	,showSystemCursor: function() {
		kha_SystemImpl.showSystemCursor();
	}
	,sendLeaveEvent: function(windowId) {
		if(this.windowLeaveListeners != null) {
			var _g = 0;
			var _g1 = this.windowLeaveListeners[windowId];
			while(_g < _g1.length) _g1[_g++]();
		}
	}
	,sendDownEvent: function(windowId,button,x,y) {
		if(this.windowDownListeners != null) {
			var _g = 0;
			var _g1 = this.windowDownListeners[windowId];
			while(_g < _g1.length) _g1[_g++](button,x,y);
		}
	}
	,sendUpEvent: function(windowId,button,x,y) {
		if(this.windowUpListeners != null) {
			var _g = 0;
			var _g1 = this.windowUpListeners[windowId];
			while(_g < _g1.length) _g1[_g++](button,x,y);
		}
	}
	,sendMoveEvent: function(windowId,x,y,movementX,movementY) {
		if(this.windowMoveListeners != null) {
			var _g = 0;
			var _g1 = this.windowMoveListeners[windowId];
			while(_g < _g1.length) _g1[_g++](x,y,movementX,movementY);
		}
	}
	,sendWheelEvent: function(windowId,delta) {
		if(this.windowWheelListeners != null) {
			var _g = 0;
			var _g1 = this.windowWheelListeners[windowId];
			while(_g < _g1.length) _g1[_g++](delta);
		}
	}
	,__class__: kha_input_Mouse
};
var kha_input_Pen = function() {
	kha_input_Pen.instance = this;
};
$hxClasses["kha.input.Pen"] = kha_input_Pen;
kha_input_Pen.__name__ = "kha.input.Pen";
kha_input_Pen.get = function(num) {
	if(num == null) {
		num = 0;
	}
	return kha_SystemImpl.getPen(num);
};
kha_input_Pen.prototype = {
	notify: function(downListener,upListener,moveListener) {
		this.notifyWindowed(0,downListener,upListener,moveListener);
	}
	,notifyWindowed: function(windowId,downListener,upListener,moveListener) {
		if(downListener != null) {
			if(this.windowDownListeners == null) {
				this.windowDownListeners = [];
			}
			while(this.windowDownListeners.length <= windowId) this.windowDownListeners.push([]);
			this.windowDownListeners[windowId].push(downListener);
		}
		if(upListener != null) {
			if(this.windowUpListeners == null) {
				this.windowUpListeners = [];
			}
			while(this.windowUpListeners.length <= windowId) this.windowUpListeners.push([]);
			this.windowUpListeners[windowId].push(upListener);
		}
		if(moveListener != null) {
			if(this.windowMoveListeners == null) {
				this.windowMoveListeners = [];
			}
			while(this.windowMoveListeners.length <= windowId) this.windowMoveListeners.push([]);
			this.windowMoveListeners[windowId].push(moveListener);
		}
	}
	,sendDownEvent: function(windowId,x,y,pressure) {
		if(this.windowDownListeners != null) {
			var _g = 0;
			var _g1 = this.windowDownListeners[windowId];
			while(_g < _g1.length) _g1[_g++](x,y,pressure);
		}
	}
	,sendUpEvent: function(windowId,x,y,pressure) {
		if(this.windowUpListeners != null) {
			var _g = 0;
			var _g1 = this.windowUpListeners[windowId];
			while(_g < _g1.length) _g1[_g++](x,y,pressure);
		}
	}
	,sendMoveEvent: function(windowId,x,y,pressure) {
		if(this.windowMoveListeners != null) {
			var _g = 0;
			var _g1 = this.windowMoveListeners[windowId];
			while(_g < _g1.length) _g1[_g++](x,y,pressure);
		}
	}
	,__class__: kha_input_Pen
};
var kha_input_Surface = $hx_exports["kha"]["input"]["Surface"] = function() {
	this.touchStartListeners = [];
	this.touchEndListeners = [];
	this.moveListeners = [];
	kha_input_Surface.instance = this;
};
$hxClasses["kha.input.Surface"] = kha_input_Surface;
kha_input_Surface.__name__ = "kha.input.Surface";
kha_input_Surface.get = function(num) {
	if(num == null) {
		num = 0;
	}
	if(num != 0) {
		return null;
	}
	return kha_input_Surface.instance;
};
kha_input_Surface.prototype = {
	notify: function(touchStartListener,touchEndListener,moveListener) {
		if(touchStartListener != null) {
			this.touchStartListeners.push(touchStartListener);
		}
		if(touchEndListener != null) {
			this.touchEndListeners.push(touchEndListener);
		}
		if(moveListener != null) {
			this.moveListeners.push(moveListener);
		}
	}
	,remove: function(touchStartListener,touchEndListener,moveListener) {
		if(touchStartListener != null) {
			HxOverrides.remove(this.touchStartListeners,touchStartListener);
		}
		if(touchEndListener != null) {
			HxOverrides.remove(this.touchEndListeners,touchEndListener);
		}
		if(moveListener != null) {
			HxOverrides.remove(this.moveListeners,moveListener);
		}
	}
	,sendTouchStartEvent: function(index,x,y) {
		var _g = 0;
		var _g1 = this.touchStartListeners;
		while(_g < _g1.length) _g1[_g++](index,x,y);
	}
	,sendTouchEndEvent: function(index,x,y) {
		var _g = 0;
		var _g1 = this.touchEndListeners;
		while(_g < _g1.length) _g1[_g++](index,x,y);
	}
	,sendMoveEvent: function(index,x,y) {
		var _g = 0;
		var _g1 = this.moveListeners;
		while(_g < _g1.length) _g1[_g++](index,x,y);
	}
	,__class__: kha_input_Surface
};
var zui_Nodes = function() {
	this.popupCommands = null;
	this.popupH = 0;
	this.popupW = 0;
	this.popupY = 0;
	this.popupX = 0;
	this.nodeId = -1;
	this.lastNodesCount = 0;
	this.handle = new zui_Handle();
	this.snapY = 0.0;
	this.snapX = 0.0;
	this.snapSocket = 0;
	this.snapToId = -1;
	this.snapFromId = -1;
	this.isNewLink = false;
	this.linkDrag = null;
	this.moveOnTop = null;
	this.dragged = false;
	this.ELEMENT_H = 25;
	this.scaleFactor = 1.0;
	this.uih = 0;
	this.uiw = 0;
	this.zoom = 1.0;
	this.panY = 0.0;
	this.panX = 0.0;
	this.nodesSelected = [];
	this.nodesDrag = false;
};
$hxClasses["zui.Nodes"] = zui_Nodes;
zui_Nodes.__name__ = "zui.Nodes";
zui_Nodes.tr = function(id,vars) {
	return id;
};
zui_Nodes.prototype = {
	BUTTONS_H: function(node) {
		var buttonsH = 0.0;
		var _g = 0;
		var _g1 = node.buttons;
		while(_g < _g1.length) {
			var but = _g1[_g];
			++_g;
			if(but.type == "RGBA") {
				buttonsH += 235 * (this.scaleFactor * this.zoom);
			} else if(but.type == "VECTOR") {
				buttonsH += (this.ELEMENT_H * (this.scaleFactor * this.zoom) | 0) * 4;
			} else if(but.type == "RAMP") {
				buttonsH += (this.ELEMENT_H * (this.scaleFactor * this.zoom) | 0) * 4.5;
			} else if(but.type == "CURVES") {
				buttonsH += (this.ELEMENT_H * (this.scaleFactor * this.zoom) | 0) * 8;
			} else {
				buttonsH += this.ELEMENT_H * (this.scaleFactor * this.zoom) | 0;
			}
		}
		return buttonsH | 0;
	}
	,getNode: function(nodes,id) {
		var _g = 0;
		while(_g < nodes.length) {
			var node = nodes[_g];
			++_g;
			if(node.id == id) {
				return node;
			}
		}
		return null;
	}
	,getNodeId: function(nodes) {
		if(this.nodeId == -1) {
			var _g = 0;
			while(_g < nodes.length) {
				var n = nodes[_g];
				++_g;
				if(this.nodeId < n.id) {
					this.nodeId = n.id;
				}
			}
		}
		return ++this.nodeId;
	}
	,getLinkId: function(links) {
		var id = 0;
		var _g = 0;
		while(_g < links.length) {
			var l = links[_g];
			++_g;
			if(l.id >= id) {
				id = l.id + 1;
			}
		}
		return id;
	}
	,getSocketId: function(nodes) {
		var id = 0;
		var _g = 0;
		while(_g < nodes.length) {
			var n = nodes[_g];
			++_g;
			var _g1 = 0;
			var _g2 = n.inputs;
			while(_g1 < _g2.length) {
				var s = _g2[_g1];
				++_g1;
				if(s.id >= id) {
					id = s.id + 1;
				}
			}
			var _g3 = 0;
			var _g4 = n.outputs;
			while(_g3 < _g4.length) {
				var s1 = _g4[_g3];
				++_g3;
				if(s1.id >= id) {
					id = s1.id + 1;
				}
			}
		}
		return id;
	}
	,bakeElements: function(ui) {
		ui.g.end();
		zui_Nodes.elementsBaked = true;
		zui_Nodes.socketImage = kha_Image.createRenderTarget(24,24);
		var g = zui_Nodes.socketImage.get_g2();
		g.begin(true,0);
		g.set_color(-16777216);
		kha_graphics2_GraphicsExtension.fillCircle(g,12,12,12);
		g.set_color(-1);
		kha_graphics2_GraphicsExtension.fillCircle(g,12,12,9);
		g.end();
		ui.g.begin(false);
	}
	,nodeCanvas: function(ui,canvas) {
		if(!zui_Nodes.elementsBaked) {
			this.bakeElements(ui);
		}
		if(this.lastNodesCount > canvas.nodes.length) {
			ui.changed = true;
		}
		this.lastNodesCount = canvas.nodes.length;
		var wx = ui._windowX;
		var wy = ui._windowY;
		ui.inputEnabled = this.popupCommands == null;
		if(ui.inputEnabled && (ui.inputDownR || ui.inputDown && ui.isCtrlDown)) {
			this.panX += ui.inputDX / (this.scaleFactor * this.zoom);
			this.panY += ui.inputDY / (this.scaleFactor * this.zoom);
		}
		if(ui.inputEnabled && ui.inputWheelDelta != 0) {
			this.zoom += -ui.inputWheelDelta / 10;
			if(this.zoom < 0.1) {
				this.zoom = 0.1;
			} else if(this.zoom > 1.0) {
				this.zoom = 1.0;
			}
			this.zoom = Math.round(this.zoom * 10) / 10;
			this.uiw = ui._w;
			this.uih = ui._h;
		}
		this.scaleFactor = ui.ops.scaleFactor;
		this.ELEMENT_H = ui.t.ELEMENT_H + 2;
		ui.setScale(this.scaleFactor * this.zoom);
		ui.elementsBaked = true;
		ui.g.set_font(ui.ops.font);
		ui.g.set_fontSize(ui.fontSize);
		var _g = 0;
		var _g1 = canvas.links;
		while(_g < _g1.length) {
			var link = _g1[_g];
			++_g;
			var from = this.getNode(canvas.nodes,link.from_id);
			var to = this.getNode(canvas.nodes,link.to_id);
			var fromX = from == null ? ui.inputX : wx + (from.x * (this.scaleFactor * this.zoom) + (this.panX * (this.scaleFactor * this.zoom) + (1.0 - this.zoom) * this.uiw / 2.5)) + (140 * (this.scaleFactor * this.zoom) | 0);
			var fromY = from == null ? ui.inputY : wy + (from.y * (this.scaleFactor * this.zoom) + (this.panY * (this.scaleFactor * this.zoom) + (1.0 - this.zoom) * this.uih / 2.5)) + (((this.ELEMENT_H * (this.scaleFactor * this.zoom) | 0) * 1.62 | 0) + link.from_socket * (this.ELEMENT_H * (this.scaleFactor * this.zoom) | 0));
			var toX = to == null ? ui.inputX : wx + (to.x * (this.scaleFactor * this.zoom) + (this.panX * (this.scaleFactor * this.zoom) + (1.0 - this.zoom) * this.uiw / 2.5));
			var toY = to == null ? ui.inputY : wy + (to.y * (this.scaleFactor * this.zoom) + (this.panY * (this.scaleFactor * this.zoom) + (1.0 - this.zoom) * this.uih / 2.5)) + (((this.ELEMENT_H * (this.scaleFactor * this.zoom) | 0) * 1.62 | 0) + (link.to_socket + to.outputs.length) * (this.ELEMENT_H * (this.scaleFactor * this.zoom) | 0)) + this.BUTTONS_H(to);
			if((toX > fromX ? toX : fromX) < 0 || (toX > fromX ? fromX : toX) > wx + ui._windowW || (toY > fromY ? toY : fromY) < 0 || (toY > fromY ? fromY : toY) > wy + ui._windowH) {
				continue;
			}
			if(this.linkDrag == link) {
				if(this.snapFromId != -1) {
					fromX = this.snapX;
					fromY = this.snapY;
				}
				if(this.snapToId != -1) {
					toX = this.snapX;
					toY = this.snapY;
				}
				this.snapFromId = this.snapToId = -1;
				var _g2 = 0;
				var _g3 = canvas.nodes;
				while(_g2 < _g3.length) {
					var node = _g3[_g2];
					++_g2;
					var inps = node.inputs;
					var outs = node.outputs;
					var nodeh = (this.ELEMENT_H * (this.scaleFactor * this.zoom) | 0) * 1.2 + node.inputs.length * (this.ELEMENT_H * (this.scaleFactor * this.zoom) | 0) + node.outputs.length * (this.ELEMENT_H * (this.scaleFactor * this.zoom) | 0) + this.BUTTONS_H(node) | 0;
					if(ui.getInputInRect(wx + (node.x * (this.scaleFactor * this.zoom) + (this.panX * (this.scaleFactor * this.zoom) + (1.0 - this.zoom) * this.uiw / 2.5)) - (this.ELEMENT_H * (this.scaleFactor * this.zoom) | 0) / 2,wy + (node.y * (this.scaleFactor * this.zoom) + (this.panY * (this.scaleFactor * this.zoom) + (1.0 - this.zoom) * this.uih / 2.5)) - (this.ELEMENT_H * (this.scaleFactor * this.zoom) | 0) / 2,(140 * (this.scaleFactor * this.zoom) | 0) + (this.ELEMENT_H * (this.scaleFactor * this.zoom) | 0),nodeh + (this.ELEMENT_H * (this.scaleFactor * this.zoom) | 0))) {
						if(from == null && node.id != to.id) {
							var _g4 = 0;
							var _g5 = outs.length;
							while(_g4 < _g5) {
								var i = _g4++;
								var sx = wx + (node.x * (this.scaleFactor * this.zoom) + (this.panX * (this.scaleFactor * this.zoom) + (1.0 - this.zoom) * this.uiw / 2.5)) + (140 * (this.scaleFactor * this.zoom) | 0);
								var sy = wy + (node.y * (this.scaleFactor * this.zoom) + (this.panY * (this.scaleFactor * this.zoom) + (1.0 - this.zoom) * this.uih / 2.5)) + (((this.ELEMENT_H * (this.scaleFactor * this.zoom) | 0) * 1.62 | 0) + i * (this.ELEMENT_H * (this.scaleFactor * this.zoom) | 0));
								if(ui.getInputInRect(sx - (this.ELEMENT_H * (this.scaleFactor * this.zoom) | 0) / 2,sy - (this.ELEMENT_H * (this.scaleFactor * this.zoom) | 0) / 2,this.ELEMENT_H * (this.scaleFactor * this.zoom) | 0,this.ELEMENT_H * (this.scaleFactor * this.zoom) | 0)) {
									this.snapX = sx;
									this.snapY = sy;
									this.snapFromId = node.id;
									this.snapSocket = i;
									break;
								}
							}
						} else if(to == null && node.id != from.id) {
							var _g6 = 0;
							var _g7 = inps.length;
							while(_g6 < _g7) {
								var i1 = _g6++;
								var sx1 = wx + (node.x * (this.scaleFactor * this.zoom) + (this.panX * (this.scaleFactor * this.zoom) + (1.0 - this.zoom) * this.uiw / 2.5));
								var sy1 = wy + (node.y * (this.scaleFactor * this.zoom) + (this.panY * (this.scaleFactor * this.zoom) + (1.0 - this.zoom) * this.uih / 2.5)) + (((this.ELEMENT_H * (this.scaleFactor * this.zoom) | 0) * 1.62 | 0) + (i1 + outs.length) * (this.ELEMENT_H * (this.scaleFactor * this.zoom) | 0)) + this.BUTTONS_H(node);
								if(ui.getInputInRect(sx1 - (this.ELEMENT_H * (this.scaleFactor * this.zoom) | 0) / 2,sy1 - (this.ELEMENT_H * (this.scaleFactor * this.zoom) | 0) / 2,this.ELEMENT_H * (this.scaleFactor * this.zoom) | 0,this.ELEMENT_H * (this.scaleFactor * this.zoom) | 0)) {
									this.snapX = sx1;
									this.snapY = sy1;
									this.snapToId = node.id;
									this.snapSocket = i1;
									break;
								}
							}
						}
					}
				}
			}
			var selected = false;
			var _g8 = 0;
			var _g9 = this.nodesSelected;
			while(_g8 < _g9.length) {
				var n = _g9[_g8];
				++_g8;
				if(link.from_id == n.id || link.to_id == n.id) {
					selected = true;
					break;
				}
			}
			this.drawLink(ui,fromX - wx,fromY - wy,toX - wx,toY - wy,selected);
		}
		var _g = 0;
		var _g1 = canvas.nodes;
		while(_g < _g1.length) {
			var node = _g1[_g];
			++_g;
			if(node.x * (this.scaleFactor * this.zoom) + (this.panX * (this.scaleFactor * this.zoom) + (1.0 - this.zoom) * this.uiw / 2.5) > ui._windowW || node.x * (this.scaleFactor * this.zoom) + (this.panX * (this.scaleFactor * this.zoom) + (1.0 - this.zoom) * this.uiw / 2.5) + (140 * (this.scaleFactor * this.zoom) | 0) < 0 || node.y * (this.scaleFactor * this.zoom) + (this.panY * (this.scaleFactor * this.zoom) + (1.0 - this.zoom) * this.uih / 2.5) > ui._windowH || node.y * (this.scaleFactor * this.zoom) + (this.panY * (this.scaleFactor * this.zoom) + (1.0 - this.zoom) * this.uih / 2.5) + ((this.ELEMENT_H * (this.scaleFactor * this.zoom) | 0) * 1.2 + node.inputs.length * (this.ELEMENT_H * (this.scaleFactor * this.zoom) | 0) + node.outputs.length * (this.ELEMENT_H * (this.scaleFactor * this.zoom) | 0) + this.BUTTONS_H(node) | 0) < 0) {
				if(this.nodesSelected.indexOf(node) < 0) {
					continue;
				}
			}
			var inps = node.inputs;
			var outs = node.outputs;
			var nodeh = (this.ELEMENT_H * (this.scaleFactor * this.zoom) | 0) * 1.2 + node.inputs.length * (this.ELEMENT_H * (this.scaleFactor * this.zoom) | 0) + node.outputs.length * (this.ELEMENT_H * (this.scaleFactor * this.zoom) | 0) + this.BUTTONS_H(node) | 0;
			if(ui.inputEnabled && ui.getInputInRect(wx + (node.x * (this.scaleFactor * this.zoom) + (this.panX * (this.scaleFactor * this.zoom) + (1.0 - this.zoom) * this.uiw / 2.5)) - (this.ELEMENT_H * (this.scaleFactor * this.zoom) | 0) / 2,wy + (node.y * (this.scaleFactor * this.zoom) + (this.panY * (this.scaleFactor * this.zoom) + (1.0 - this.zoom) * this.uih / 2.5)),(140 * (this.scaleFactor * this.zoom) | 0) + (this.ELEMENT_H * (this.scaleFactor * this.zoom) | 0),this.ELEMENT_H * (this.scaleFactor * this.zoom) | 0)) {
				if(ui.inputStarted) {
					if(ui.isShiftDown) {
						if(this.nodesSelected.indexOf(node) >= 0) {
							HxOverrides.remove(this.nodesSelected,node);
						} else {
							this.nodesSelected.push(node);
						}
					} else if(this.nodesSelected.length <= 1) {
						this.nodesSelected = [node];
					}
					this.moveOnTop = node;
					this.nodesDrag = true;
					this.dragged = false;
				} else if(ui.inputReleased && !ui.isShiftDown && !this.dragged) {
					this.nodesSelected = [node];
				}
			}
			if(ui.inputStarted && ui.getInputInRect(wx + (node.x * (this.scaleFactor * this.zoom) + (this.panX * (this.scaleFactor * this.zoom) + (1.0 - this.zoom) * this.uiw / 2.5)) - (this.ELEMENT_H * (this.scaleFactor * this.zoom) | 0) / 2,wy + (node.y * (this.scaleFactor * this.zoom) + (this.panY * (this.scaleFactor * this.zoom) + (1.0 - this.zoom) * this.uih / 2.5)) - (this.ELEMENT_H * (this.scaleFactor * this.zoom) | 0) / 2,(140 * (this.scaleFactor * this.zoom) | 0) + (this.ELEMENT_H * (this.scaleFactor * this.zoom) | 0),nodeh + (this.ELEMENT_H * (this.scaleFactor * this.zoom) | 0))) {
				var _g2 = 0;
				var _g3 = outs.length;
				while(_g2 < _g3) {
					var i = _g2++;
					if(ui.getInputInRect(wx + (node.x * (this.scaleFactor * this.zoom) + (this.panX * (this.scaleFactor * this.zoom) + (1.0 - this.zoom) * this.uiw / 2.5)) + (140 * (this.scaleFactor * this.zoom) | 0) - (this.ELEMENT_H * (this.scaleFactor * this.zoom) | 0) / 2,wy + (node.y * (this.scaleFactor * this.zoom) + (this.panY * (this.scaleFactor * this.zoom) + (1.0 - this.zoom) * this.uih / 2.5)) + (((this.ELEMENT_H * (this.scaleFactor * this.zoom) | 0) * 1.62 | 0) + i * (this.ELEMENT_H * (this.scaleFactor * this.zoom) | 0)) - (this.ELEMENT_H * (this.scaleFactor * this.zoom) | 0) / 2,this.ELEMENT_H * (this.scaleFactor * this.zoom) | 0,this.ELEMENT_H * (this.scaleFactor * this.zoom) | 0)) {
						var l = { id : this.getLinkId(canvas.links), from_id : node.id, from_socket : i, to_id : -1, to_socket : -1};
						canvas.links.push(l);
						this.linkDrag = l;
						this.isNewLink = true;
						break;
					}
				}
				if(this.linkDrag == null) {
					var _g4 = 0;
					var _g5 = inps.length;
					while(_g4 < _g5) {
						var i1 = _g4++;
						var sx = wx + (node.x * (this.scaleFactor * this.zoom) + (this.panX * (this.scaleFactor * this.zoom) + (1.0 - this.zoom) * this.uiw / 2.5));
						var sy = wy + (node.y * (this.scaleFactor * this.zoom) + (this.panY * (this.scaleFactor * this.zoom) + (1.0 - this.zoom) * this.uih / 2.5)) + (((this.ELEMENT_H * (this.scaleFactor * this.zoom) | 0) * 1.62 | 0) + (i1 + outs.length) * (this.ELEMENT_H * (this.scaleFactor * this.zoom) | 0)) + this.BUTTONS_H(node);
						if(ui.getInputInRect(sx - (this.ELEMENT_H * (this.scaleFactor * this.zoom) | 0) / 2,sy - (this.ELEMENT_H * (this.scaleFactor * this.zoom) | 0) / 2,this.ELEMENT_H * (this.scaleFactor * this.zoom) | 0,this.ELEMENT_H * (this.scaleFactor * this.zoom) | 0)) {
							var _g6 = 0;
							var _g7 = canvas.links;
							while(_g6 < _g7.length) {
								var l1 = _g7[_g6];
								++_g6;
								if(l1.to_id == node.id && l1.to_socket == i1) {
									l1.to_id = l1.to_socket = -1;
									this.linkDrag = l1;
									this.isNewLink = false;
									break;
								}
							}
							if(this.linkDrag != null) {
								break;
							}
							var l2 = { id : this.getLinkId(canvas.links), from_id : -1, from_socket : -1, to_id : node.id, to_socket : i1};
							canvas.links.push(l2);
							this.linkDrag = l2;
							this.isNewLink = true;
							break;
						}
					}
				}
			} else if(ui.inputReleased) {
				if(this.snapToId != -1) {
					var _g8 = 0;
					var _g9 = canvas.links;
					while(_g8 < _g9.length) {
						var l3 = _g9[_g8];
						++_g8;
						if(l3.to_id == this.snapToId && l3.to_socket == this.snapSocket) {
							HxOverrides.remove(canvas.links,l3);
							break;
						}
					}
					this.linkDrag.to_id = this.snapToId;
					this.linkDrag.to_socket = this.snapSocket;
					ui.changed = true;
				} else if(this.snapFromId != -1) {
					this.linkDrag.from_id = this.snapFromId;
					this.linkDrag.from_socket = this.snapSocket;
					ui.changed = true;
				} else if(this.linkDrag != null) {
					HxOverrides.remove(canvas.links,this.linkDrag);
					ui.changed = true;
					if(zui_Nodes.onLinkDrag != null) {
						zui_Nodes.onLinkDrag(this.linkDrag,this.isNewLink);
					}
				}
				this.snapToId = this.snapFromId = -1;
				this.linkDrag = null;
				this.nodesDrag = false;
			}
			if(this.nodesDrag && this.nodesSelected.indexOf(node) >= 0 && !ui.inputDownR) {
				if(ui.inputDX != 0 || ui.inputDY != 0) {
					this.dragged = true;
					node.x += ui.inputDX / (this.scaleFactor * this.zoom) | 0;
					node.y += ui.inputDY / (this.scaleFactor * this.zoom) | 0;
				}
			}
			this.drawNode(ui,node,canvas);
		}
		if(zui_Nodes.boxSelect) {
			ui.g.set_color(573780957);
			ui.g.fillRect(zui_Nodes.boxSelectX,zui_Nodes.boxSelectY,ui.inputX - zui_Nodes.boxSelectX - ui._windowX,ui.inputY - zui_Nodes.boxSelectY - ui._windowY);
			ui.g.set_color(1999844317);
			ui.g.drawRect(zui_Nodes.boxSelectX,zui_Nodes.boxSelectY,ui.inputX - zui_Nodes.boxSelectX - ui._windowX,ui.inputY - zui_Nodes.boxSelectY - ui._windowY);
			ui.g.set_color(-1);
		}
		if(ui.inputEnabled && ui.inputStarted && !ui.isAltDown && !ui.isCtrlDown && this.linkDrag == null && !this.nodesDrag && !ui.changed) {
			zui_Nodes.boxSelect = true;
			zui_Nodes.boxSelectX = ui.inputX - ui._windowX | 0;
			zui_Nodes.boxSelectY = ui.inputY - ui._windowY | 0;
		} else if(zui_Nodes.boxSelect && !ui.inputDown) {
			zui_Nodes.boxSelect = false;
			var nodes = [];
			var left = zui_Nodes.boxSelectX;
			var top = zui_Nodes.boxSelectY;
			var right = ui.inputX - ui._windowX | 0;
			var bottom = ui.inputY - ui._windowY | 0;
			if(left > right) {
				var t = left;
				left = right;
				right = t;
			}
			if(top > bottom) {
				var t = top;
				top = bottom;
				bottom = t;
			}
			var _g = 0;
			var _g1 = canvas.nodes;
			while(_g < _g1.length) {
				var n = _g1[_g];
				++_g;
				if(n.x * (this.scaleFactor * this.zoom) + (this.panX * (this.scaleFactor * this.zoom) + (1.0 - this.zoom) * this.uiw / 2.5) + (140 * (this.scaleFactor * this.zoom) | 0) > left && n.x * (this.scaleFactor * this.zoom) + (this.panX * (this.scaleFactor * this.zoom) + (1.0 - this.zoom) * this.uiw / 2.5) < right && n.y * (this.scaleFactor * this.zoom) + (this.panY * (this.scaleFactor * this.zoom) + (1.0 - this.zoom) * this.uih / 2.5) + ((this.ELEMENT_H * (this.scaleFactor * this.zoom) | 0) * 1.2 + n.inputs.length * (this.ELEMENT_H * (this.scaleFactor * this.zoom) | 0) + n.outputs.length * (this.ELEMENT_H * (this.scaleFactor * this.zoom) | 0) + this.BUTTONS_H(n) | 0) > top && n.y * (this.scaleFactor * this.zoom) + (this.panY * (this.scaleFactor * this.zoom) + (1.0 - this.zoom) * this.uih / 2.5) < bottom) {
					nodes.push(n);
				}
			}
			if(ui.isShiftDown) {
				var _g = 0;
				while(_g < nodes.length) this.nodesSelected.push(nodes[_g++]);
			} else {
				this.nodesSelected = nodes;
			}
		}
		if(this.moveOnTop != null) {
			HxOverrides.remove(canvas.nodes,this.moveOnTop);
			canvas.nodes.push(this.moveOnTop);
			this.moveOnTop = null;
		}
		var cutSelected = false;
		if(zui_Zui.isCopy) {
			var copyNodes = [];
			var _g = 0;
			var _g1 = this.nodesSelected;
			while(_g < _g1.length) {
				var n = _g1[_g];
				++_g;
				if(zui_Nodes.excludeRemove.indexOf(n.type) >= 0) {
					continue;
				}
				copyNodes.push(n);
			}
			var copyLinks = [];
			var _g = 0;
			var _g1 = canvas.links;
			while(_g < _g1.length) {
				var l = _g1[_g];
				++_g;
				if(this.getNode(this.nodesSelected,l.from_id) != null && this.getNode(this.nodesSelected,l.to_id) != null) {
					copyLinks.push(l);
				}
			}
			zui_Nodes.clipboard = JSON.stringify({ name : canvas.name, nodes : copyNodes, links : copyLinks});
			cutSelected = zui_Zui.isCut;
		}
		if(zui_Zui.isPaste && !ui.isTyping) {
			var pasteCanvas = null;
			try {
				pasteCanvas = JSON.parse(zui_Nodes.clipboard);
			} catch( _g ) {
			}
			if(pasteCanvas != null) {
				var _g = 0;
				var _g1 = pasteCanvas.links;
				while(_g < _g1.length) {
					var l = _g1[_g];
					++_g;
					l.id = this.getLinkId(canvas.links);
					canvas.links.push(l);
				}
				var _g = 0;
				var _g1 = pasteCanvas.nodes;
				while(_g < _g1.length) {
					var n = _g1[_g];
					++_g;
					var old_id = n.id;
					n.id = this.getNodeId(canvas.nodes);
					var _g2 = 0;
					var _g3 = n.inputs;
					while(_g2 < _g3.length) {
						var soc = _g3[_g2];
						++_g2;
						soc.id = this.getSocketId(canvas.nodes);
						soc.node_id = n.id;
					}
					var _g4 = 0;
					var _g5 = n.outputs;
					while(_g4 < _g5.length) {
						var soc1 = _g5[_g4];
						++_g4;
						soc1.id = this.getSocketId(canvas.nodes);
						soc1.node_id = n.id;
					}
					var _g6 = 0;
					var _g7 = pasteCanvas.links;
					while(_g6 < _g7.length) {
						var l = _g7[_g6];
						++_g6;
						if(l.from_id == old_id) {
							l.from_id = n.id;
						} else if(l.to_id == old_id) {
							l.to_id = n.id;
						}
					}
					n.x += 10;
					n.y += 10;
					canvas.nodes.push(n);
				}
				this.nodesSelected = pasteCanvas.nodes;
			}
		}
		if(ui.isCtrlDown && ui.key == 65) {
			this.nodesSelected = [];
			var _g = 0;
			var _g1 = canvas.nodes;
			while(_g < _g1.length) this.nodesSelected.push(_g1[_g++]);
		}
		if(ui.inputEnabled && (ui.isBackspaceDown || ui.isDeleteDown || cutSelected) && !ui.isTyping) {
			var i = this.nodesSelected.length - 1;
			while(i >= 0) {
				var n = this.nodesSelected[i--];
				if(zui_Nodes.excludeRemove.indexOf(n.type) >= 0) {
					continue;
				}
				this.removeNode(n,canvas);
				ui.changed = true;
			}
		}
		ui.setScale(this.scaleFactor);
		ui.elementsBaked = true;
		ui.inputEnabled = true;
		if(this.popupCommands != null) {
			ui._x = this.popupX;
			ui._y = this.popupY;
			ui._w = this.popupW;
			ui.fill(-6,-6,ui._w / ui.ops.scaleFactor + 12,this.popupH + 12,ui.t.ACCENT_SELECT_COL);
			ui.fill(-5,-5,ui._w / ui.ops.scaleFactor + 10,this.popupH + 10,ui.t.SEPARATOR_COL);
			this.popupCommands(ui);
			if((ui.inputStarted || ui.inputStartedR) && (ui.inputX - wx < this.popupX - 6 || ui.inputX - wx > this.popupX + this.popupW + 6 || ui.inputY - wy < this.popupY - 6 || ui.inputY - wy > this.popupY + this.popupH * ui.ops.scaleFactor + 6) || ui.isEscapeDown) {
				this.popupCommands = null;
			}
		}
	}
	,drawNode: function(ui,node,canvas) {
		var wx = ui._windowX;
		var wy = ui._windowY;
		var uiX = ui._x;
		var uiY = ui._y;
		var uiW = ui._w;
		var w = 140 * (this.scaleFactor * this.zoom) | 0;
		var g = ui.g;
		var h = (this.ELEMENT_H * (this.scaleFactor * this.zoom) | 0) * 1.2 + node.inputs.length * (this.ELEMENT_H * (this.scaleFactor * this.zoom) | 0) + node.outputs.length * (this.ELEMENT_H * (this.scaleFactor * this.zoom) | 0) + this.BUTTONS_H(node) | 0;
		var nx = node.x * (this.scaleFactor * this.zoom) + (this.panX * (this.scaleFactor * this.zoom) + (1.0 - this.zoom) * this.uiw / 2.5);
		var ny = node.y * (this.scaleFactor * this.zoom) + (this.panY * (this.scaleFactor * this.zoom) + (1.0 - this.zoom) * this.uih / 2.5);
		var text = zui_Nodes.tr(node.name);
		var lineh = this.ELEMENT_H * (this.scaleFactor * this.zoom) | 0;
		var _inputStarted = ui.inputStarted;
		if(ui.inputStarted) {
			var _g = canvas.nodes.indexOf(node) + 1;
			var _g1 = canvas.nodes.length;
			while(_g < _g1) {
				var n = canvas.nodes[_g++];
				if(n.x * (this.scaleFactor * this.zoom) + (this.panX * (this.scaleFactor * this.zoom) + (1.0 - this.zoom) * this.uiw / 2.5) < ui.inputX - ui._windowX && n.x * (this.scaleFactor * this.zoom) + (this.panX * (this.scaleFactor * this.zoom) + (1.0 - this.zoom) * this.uiw / 2.5) + (140 * (this.scaleFactor * this.zoom) | 0) > ui.inputX - ui._windowX && n.y * (this.scaleFactor * this.zoom) + (this.panY * (this.scaleFactor * this.zoom) + (1.0 - this.zoom) * this.uih / 2.5) < ui.inputY - ui._windowY && n.y * (this.scaleFactor * this.zoom) + (this.panY * (this.scaleFactor * this.zoom) + (1.0 - this.zoom) * this.uih / 2.5) + ((this.ELEMENT_H * (this.scaleFactor * this.zoom) | 0) * 1.2 + n.inputs.length * (this.ELEMENT_H * (this.scaleFactor * this.zoom) | 0) + n.outputs.length * (this.ELEMENT_H * (this.scaleFactor * this.zoom) | 0) + this.BUTTONS_H(n) | 0) > ui.inputY - ui._windowY) {
					ui.inputStarted = false;
					break;
				}
			}
		}
		g.set_color(this.nodesSelected.indexOf(node) >= 0 ? ui.t.LABEL_COL : ui.t.CONTEXT_COL);
		g.fillRect(nx - 1,ny - 1,w + 2,h + 2);
		g.set_color(ui.t.WINDOW_BG_COL - 394758);
		g.fillRect(nx,ny,w,lineh);
		g.set_color(node.color);
		g.fillRect(nx,ny + lineh - 3 * (this.scaleFactor * this.zoom),w,3 * (this.scaleFactor * this.zoom));
		g.set_color(ui.t.WINDOW_BG_COL);
		g.fillRect(nx,ny + lineh,w,h - lineh);
		g.set_color(ui.t.LABEL_COL);
		g.get_font().width(ui.fontSize,text);
		g.drawString(text,nx + 10 * (this.scaleFactor * this.zoom),ny + 6 * (this.scaleFactor * this.zoom));
		ny += lineh * 0.5;
		var _g = 0;
		var _g1 = node.outputs;
		while(_g < _g1.length) {
			ny += lineh;
			g.set_color(_g1[_g++].color);
			g.drawScaledImage(zui_Nodes.socketImage,nx + w - 6 * (this.scaleFactor * this.zoom),ny - 3 * (this.scaleFactor * this.zoom),12 * (this.scaleFactor * this.zoom),12 * (this.scaleFactor * this.zoom));
		}
		ny -= lineh * node.outputs.length;
		g.set_color(ui.t.LABEL_COL);
		var _g = 0;
		var _g1 = node.outputs;
		while(_g < _g1.length) {
			var out = _g1[_g];
			++_g;
			ny += lineh;
			var strw = ui.ops.font.width(ui.fontSize,zui_Nodes.tr(out.name));
			g.drawString(zui_Nodes.tr(out.name),nx + w - strw - 12 * (this.scaleFactor * this.zoom),ny - 3 * (this.scaleFactor * this.zoom));
		}
		var nhandle = this.handle.nest(node.id);
		ny -= lineh / 3;
		var _g = 0;
		var _g1 = node.buttons.length;
		while(_g < _g1) {
			var buti = _g++;
			var but = node.buttons[buti];
			if(but.type == "RGBA") {
				ny += lineh;
				ui._x = nx;
				ui._y = ny;
				ui._w = w;
				var val = node.outputs[but.output].default_value;
				nhandle.color = kha_Color.fromFloats(val[0],val[1],val[2]);
				zui_Ext.colorWheel(ui,nhandle);
				val[0] = ((nhandle.color & 16711680) >>> 16) * 0.00392156862745098;
				val[1] = ((nhandle.color & 65280) >>> 8) * 0.00392156862745098;
				val[2] = (nhandle.color & 255) * 0.00392156862745098;
			} else if(but.type == "VECTOR") {
				ny += lineh;
				ui._x = nx;
				ui._y = ny;
				ui._w = w;
				var min = but.min != null ? but.min : 0.0;
				var max = but.max != null ? but.max : 1.0;
				var textOff = ui.t.TEXT_OFFSET;
				ui.t.TEXT_OFFSET = 6;
				ui.text(zui_Nodes.tr(but.name));
				var but1 = but.default_value[0];
				but.default_value[0] = ui.slider(nhandle.nest(buti).nest(0,{ value : but1}),"X",min,max,true,100,true,0);
				var but2 = but.default_value[1];
				but.default_value[1] = ui.slider(nhandle.nest(buti).nest(1,{ value : but2}),"Y",min,max,true,100,true,0);
				var but3 = but.default_value[2];
				but.default_value[2] = ui.slider(nhandle.nest(buti).nest(2,{ value : but3}),"Z",min,max,true,100,true,0);
				ui.t.TEXT_OFFSET = textOff;
				if(but.output != null) {
					node.outputs[but.output].default_value = but.default_value;
				}
				ny += lineh * 3;
			} else if(but.type == "VALUE") {
				ny += lineh;
				ui._x = nx;
				ui._y = ny;
				ui._w = w;
				var soc = node.outputs[but.output];
				var min1 = but.min != null ? but.min : 0.0;
				var max1 = but.max != null ? but.max : 1.0;
				var prec = but.precision != null ? but.precision : 100.0;
				var textOff1 = ui.t.TEXT_OFFSET;
				ui.t.TEXT_OFFSET = 6;
				soc.default_value = ui.slider(nhandle.nest(buti,{ value : soc.default_value}),"Value",min1,max1,true,prec,true,0);
				ui.t.TEXT_OFFSET = textOff1;
			} else if(but.type == "STRING") {
				ny += lineh;
				ui._x = nx;
				ui._y = ny;
				ui._w = w;
				var soc1 = but.output != null ? node.outputs[but.output] : null;
				but.default_value = ui.textInput(nhandle.nest(buti,{ text : soc1 != null ? soc1.default_value : ""}),zui_Nodes.tr(but.name));
				if(soc1 != null) {
					soc1.default_value = but.default_value;
				}
			} else if(but.type == "ENUM") {
				ny += lineh;
				ui._x = nx;
				ui._y = ny;
				ui._w = w;
				var texts = ((but.data) instanceof Array) ? but.data : zui_Nodes.enumTexts(node.type);
				var buthandle = nhandle.nest(buti);
				buthandle.position = but.default_value;
				but.default_value = ui.combo(buthandle,texts,zui_Nodes.tr(but.name));
			} else if(but.type == "BOOL") {
				ny += lineh;
				ui._x = nx;
				ui._y = ny;
				ui._w = w;
				but.default_value = ui.check(nhandle.nest(buti,{ selected : but.default_value}),zui_Nodes.tr(but.name));
			} else if(but.type == "RAMP") {
				ny += lineh;
				ui._x = nx;
				ui._y = ny;
				ui._w = w;
				var vals = but.default_value;
				var sw = w / (this.scaleFactor * this.zoom);
				var _g2 = 0;
				while(_g2 < vals.length) {
					var val1 = vals[_g2];
					++_g2;
					var pos = val1[4];
					ui.fill(pos * sw,0,(1.0 - pos) * sw,lineh - 2 * (this.scaleFactor * this.zoom),kha_Color.fromFloats(val1[0],val1[1],val1[2]));
				}
				ui._y += lineh;
				var ihandle = nhandle.nest(buti).nest(2);
				ui.row([0.25,0.25,0.5]);
				if(ui.button("+")) {
					var last = vals[vals.length - 1];
					var f32 = new Float32Array(5);
					f32[0] = last[0];
					f32[1] = last[1];
					f32[2] = last[2];
					f32[3] = last[3];
					f32[4] = 1.0;
					vals.push(f32);
					ihandle.value += 1;
				}
				if(ui.button("-") && vals.length > 1) {
					vals.pop();
					ihandle.value -= 1;
				}
				but.data = ui.combo(nhandle.nest(buti).nest(1,{ position : but.data}),["Linear","Constant"],"Interpolate");
				ui.row([0.5,0.5]);
				var val2 = vals[ui.slider(ihandle,"Index",0,vals.length - 1,false,1,true,0) | 0];
				nhandle.nest(buti).nest(3).value = val2[4];
				val2[4] = ui.slider(nhandle.nest(buti).nest(3),"Pos",0,1,true,100,true,0);
				var chandle = nhandle.nest(buti).nest(4);
				chandle.color = kha_Color.fromFloats(val2[0],val2[1],val2[2]);
				if(ui.text("",2,chandle.color) == 1) {
					_inputStarted = ui.inputStarted = false;
					this.rgbaPopup(ui,chandle,val2,nx + w - 37 * (this.scaleFactor * this.zoom) | 0,ny - 5 * (this.scaleFactor * this.zoom) + ui.t.ELEMENT_H * ui.ops.scaleFactor | 0);
				}
				val2[0] = ((chandle.color & 16711680) >>> 16) * 0.00392156862745098;
				val2[1] = ((chandle.color & 65280) >>> 8) * 0.00392156862745098;
				val2[2] = (chandle.color & 255) * 0.00392156862745098;
				ny += lineh * 3.5;
			} else if(but.type == "CURVES") {
				ny += lineh;
				ui._x = nx;
				ui._y = ny;
				ui._w = w;
				ui.row([0.33333333333333331,0.33333333333333331,0.33333333333333331]);
				ui.radio(nhandle.nest(buti).nest(1),0,"X");
				ui.radio(nhandle.nest(buti).nest(1),1,"Y");
				ui.radio(nhandle.nest(buti).nest(1),2,"Z");
				var axis = nhandle.nest(buti).nest(1).position;
				var val3 = but.default_value[axis];
				var num = val3.length;
				ui._y += lineh * 5;
				ui.row([0.2,0.2,0.6]);
				if(ui.button("+")) {
					var f321 = new Float32Array(2);
					f321[0] = 0;
					f321[1] = 0;
					val3.push(f321);
				}
				if(ui.button("-")) {
					if(val3.length > 2) {
						val3.pop();
					}
				}
				var i = ui.slider(nhandle.nest(buti).nest(2).nest(axis,{ position : 0}),"Index",0,num - 1,false,1,true,0) | 0;
				ui.row([0.5,0.5]);
				nhandle.nest(buti).nest(3).value = val3[i][0];
				nhandle.nest(buti).nest(4).value = val3[i][1];
				var value = ui.slider(nhandle.nest(buti).nest(3,{ value : 0}),"X",-1,1,true,100,true,0);
				val3[i][0] = value;
				var value1 = ui.slider(nhandle.nest(buti).nest(4,{ value : 0}),"Y",-1,1,true,100,true,0);
				val3[i][1] = value1;
				ny += lineh * 7;
			}
		}
		ny += lineh / 3;
		var _g = 0;
		var _g1 = node.inputs.length;
		while(_g < _g1) {
			var i = _g++;
			var inp = node.inputs[i];
			ny += lineh;
			g.set_color(inp.color);
			g.drawScaledImage(zui_Nodes.socketImage,nx - 6 * (this.scaleFactor * this.zoom),ny - 3 * (this.scaleFactor * this.zoom),12 * (this.scaleFactor * this.zoom),12 * (this.scaleFactor * this.zoom));
			var isLinked = false;
			var _g2 = 0;
			var _g3 = canvas.links;
			while(_g2 < _g3.length) {
				var l = _g3[_g2];
				++_g2;
				if(l.to_id == node.id && l.to_socket == i) {
					isLinked = true;
					break;
				}
			}
			if(!isLinked && inp.type == "VALUE") {
				ui._x = nx + 6 * (this.scaleFactor * this.zoom);
				ui._y = ny - 9 * (this.scaleFactor * this.zoom);
				ui._w = w - 6 * (this.scaleFactor * this.zoom) | 0;
				var min = inp.min != null ? inp.min : 0.0;
				var max = inp.max != null ? inp.max : 1.0;
				var prec = inp.precision != null ? inp.precision : 100.0;
				var textOff = ui.t.TEXT_OFFSET;
				ui.t.TEXT_OFFSET = 6;
				inp.default_value = ui.slider(nhandle.nest(9).nest(i,{ value : inp.default_value}),zui_Nodes.tr(inp.name),min,max,true,prec,true,0);
				ui.t.TEXT_OFFSET = textOff;
			} else if(!isLinked && inp.type == "STRING") {
				ui._x = nx + 6 * (this.scaleFactor * this.zoom);
				ui._y = ny - 9 * (this.scaleFactor * this.zoom);
				ui._w = w - 6 * (this.scaleFactor * this.zoom) | 0;
				var textOff1 = ui.t.TEXT_OFFSET;
				ui.t.TEXT_OFFSET = 6;
				inp.default_value = ui.textInput(nhandle.nest(9).nest(i,{ text : inp.default_value}),zui_Nodes.tr(inp.name),0);
				ui.t.TEXT_OFFSET = textOff1;
			} else if(!isLinked && inp.type == "RGBA") {
				g.set_color(ui.t.LABEL_COL);
				g.drawString(zui_Nodes.tr(inp.name),nx + 12 * (this.scaleFactor * this.zoom),ny - 3 * (this.scaleFactor * this.zoom));
				g.set_color(-16777216);
				g.fillRect(nx + w - 38 * (this.scaleFactor * this.zoom),ny - 6 * (this.scaleFactor * this.zoom),36 * (this.scaleFactor * this.zoom),18 * (this.scaleFactor * this.zoom));
				g.set_color(kha_Color.fromFloats(inp.default_value[0],inp.default_value[1],inp.default_value[2]));
				var rx = nx + w - 37 * (this.scaleFactor * this.zoom);
				var ry = ny - 5 * (this.scaleFactor * this.zoom);
				var rw = 34 * (this.scaleFactor * this.zoom);
				var rh = 16 * (this.scaleFactor * this.zoom);
				g.fillRect(rx,ry,rw,rh);
				var ix = ui.inputX - wx;
				var iy = ui.inputY - wy;
				if(ui.inputStarted && ix > rx && iy > ry && ix < rx + rw && iy < ry + rh) {
					_inputStarted = ui.inputStarted = false;
					this.rgbaPopup(ui,nhandle,inp.default_value,rx | 0,ry + ui.t.ELEMENT_H * ui.ops.scaleFactor | 0);
				}
			} else {
				g.set_color(ui.t.LABEL_COL);
				g.drawString(zui_Nodes.tr(inp.name),nx + 12 * (this.scaleFactor * this.zoom),ny - 3 * (this.scaleFactor * this.zoom));
			}
		}
		ui._x = uiX;
		ui._y = uiY;
		ui._w = uiW;
		ui.inputStarted = _inputStarted;
	}
	,rgbaPopup: function(ui,nhandle,val,x,y) {
		this.popup(x,y,140 * this.scaleFactor | 0,ui.t.ELEMENT_H * 9 | 0,function(ui) {
			nhandle.color = kha_Color.fromFloats(val[0],val[1],val[2]);
			zui_Ext.colorWheel(ui,nhandle,false,null,false);
			val[0] = ((nhandle.color & 16711680) >>> 16) * 0.00392156862745098;
			val[1] = ((nhandle.color & 65280) >>> 8) * 0.00392156862745098;
			val[2] = (nhandle.color & 255) * 0.00392156862745098;
		});
	}
	,drawLink: function(ui,x1,y1,x2,y2,highlight) {
		if(highlight == null) {
			highlight = false;
		}
		var g = ui.g;
		var c1 = ui.t.LABEL_COL;
		var c2 = ui.t.ACCENT_SELECT_COL;
		g.set_color(highlight ? kha_Color.fromBytes((c1 & 16711680) >>> 16,(c1 & 65280) >>> 8,c1 & 255,210) : kha_Color.fromBytes((c2 & 16711680) >>> 16,(c2 & 65280) >>> 8,c2 & 255,210));
		if(ui.t.LINK_STYLE == 0) {
			g.drawLine(x1,y1,x2,y2,1.0);
			g.set_color(highlight ? kha_Color.fromBytes((c1 & 16711680) >>> 16,(c1 & 65280) >>> 8,c1 & 255,150) : kha_Color.fromBytes((c2 & 16711680) >>> 16,(c2 & 65280) >>> 8,c2 & 255,150));
			g.drawLine(x1 + 0.5,y1,x2 + 0.5,y2,1.0);
			g.drawLine(x1 - 0.5,y1,x2 - 0.5,y2,1.0);
			g.drawLine(x1,y1 + 0.5,x2,y2 + 0.5,1.0);
			g.drawLine(x1,y1 - 0.5,x2,y2 - 0.5,1.0);
		} else if(ui.t.LINK_STYLE == 1) {
			kha_graphics2_GraphicsExtension.drawCubicBezier(g,[x1,x1 + Math.abs(x1 - x2) / 2,x2 - Math.abs(x1 - x2) / 2,x2],[y1,y1,y2,y2],30,highlight ? 2.0 : 1.0);
		}
	}
	,removeNode: function(n,canvas) {
		if(n == null) {
			return;
		}
		var i = 0;
		while(i < canvas.links.length) {
			var l = canvas.links[i];
			if(l.from_id == n.id || l.to_id == n.id) {
				canvas.links.splice(i,1);
			} else {
				++i;
			}
		}
		HxOverrides.remove(canvas.nodes,n);
	}
	,popup: function(x,y,w,h,commands) {
		this.popupX = x;
		this.popupY = y;
		this.popupW = w;
		this.popupH = h;
		this.popupCommands = commands;
	}
	,__class__: zui_Nodes
};
var zui_Themes = function() { };
$hxClasses["zui.Themes"] = zui_Themes;
zui_Themes.__name__ = "zui.Themes";
var zui_Zui = function(ops) {
	this.checkSelectImage = null;
	this.elementsBaked = false;
	this.scissor = false;
	this.sticky = false;
	this.tabVertical = false;
	this.tabScroll = 0.0;
	this.tabHandle = null;
	this.tabColors = null;
	this.tabNames = null;
	this.tooltipTime = 0.0;
	this.tooltipWait = false;
	this.tooltipShown = false;
	this.tooltipY = 0.0;
	this.tooltipX = 0.0;
	this.tooltipInvertY = false;
	this.tooltipImgMaxWidth = null;
	this.tooltipImg = null;
	this.tooltipText = "";
	this.comboToSubmit = 0;
	this.submitComboHandle = null;
	this.comboSelectedWindow = null;
	this.comboSelectedHandle = null;
	this.tabPressedHandle = null;
	this.tabPressed = false;
	this.textToSubmit = "";
	this.submitTextHandle = null;
	this.textSelectedHandle = null;
	this.restoreY = -1.0;
	this.restoreX = -1.0;
	this.windowHeaderH = 0.0;
	this.windowHeaderW = 0.0;
	this.dragHandle = null;
	this.scrollHandle = null;
	this.windowEnded = true;
	this._windowY = 0.0;
	this._windowX = 0.0;
	this.imageScrollAlign = true;
	this.scrollAlign = 0.0;
	this.curRatio = -1;
	this.highlightAnchor = 0;
	this.cursorX = 0;
	this.inputStartedTime = 0.0;
	this.key = null;
	this.isTabDown = false;
	this.isReturnDown = false;
	this.isEscapeDown = false;
	this.isDeleteDown = false;
	this.isBackspaceDown = false;
	this.isADown = false;
	this.isAltDown = false;
	this.isCtrlDown = false;
	this.isShiftDown = false;
	this.isKeyDown = false;
	this.isKeyPressed = false;
	this.inputWheelDelta = 0;
	this.inputEnabled = true;
	this.inputRegistered = false;
	this.touchHold = false;
	this.highlightFullRow = false;
	this.tabSwitchEnabled = true;
	this.highlightOnSelect = true;
	this.alwaysRedraw = false;
	this.scrollEnabled = true;
	this.imageInvertY = false;
	this.changed = false;
	this.isReleased = false;
	this.isHovered = false;
	this.isPushed = false;
	this.isStarted = false;
	this.enabled = true;
	this.isTyping = false;
	this.isScrolling = false;
	if(ops.theme == null) {
		ops.theme = zui_Themes.dark;
	}
	this.t = ops.theme;
	if(ops.khaWindowId == null) {
		ops.khaWindowId = 0;
	}
	if(ops.scaleFactor == null) {
		ops.scaleFactor = 1.0;
	}
	if(ops.autoNotifyInput == null) {
		ops.autoNotifyInput = true;
	}
	this.ops = ops;
	this.setScale(ops.scaleFactor);
	if(ops.autoNotifyInput) {
		this.registerInput();
	}
	if(zui_Zui.copyReceiver == null) {
		zui_Zui.copyReceiver = this;
		kha_System.notifyOnCutCopyPaste($bind(this,this.onCut),$bind(this,this.onCopy),$bind(this,this.onPaste));
		kha_System.notifyOnFrames(function(frames) {
			if((zui_Zui.isCopy || zui_Zui.isPaste) && ++zui_Zui.copyFrame > 1) {
				zui_Zui.isCopy = zui_Zui.isCut = zui_Zui.isPaste = false;
				zui_Zui.copyFrame = 0;
			}
		});
	}
	this.rtTextPipeline = kha_graphics4_Graphics2.createTextPipeline(kha_graphics4_Graphics2.createTextVertexStructure());
	this.rtTextPipeline.alphaBlendSource = 1;
	this.rtTextPipeline.compile();
};
$hxClasses["zui.Zui"] = zui_Zui;
zui_Zui.__name__ = "zui.Zui";
zui_Zui.prototype = {
	setScale: function(factor) {
		this.ops.scaleFactor = factor;
		this.fontSize = this.t.FONT_SIZE * this.ops.scaleFactor | 0;
		var fontHeight = this.ops.font.height(this.fontSize);
		this.fontOffsetY = (this.t.ELEMENT_H * this.ops.scaleFactor - fontHeight) / 2;
		this.arrowOffsetY = (this.t.ELEMENT_H * this.ops.scaleFactor - this.t.ARROW_SIZE * this.ops.scaleFactor) / 2;
		this.arrowOffsetX = this.arrowOffsetY;
		this.titleOffsetX = (this.arrowOffsetX * 2 + this.t.ARROW_SIZE * this.ops.scaleFactor) / this.ops.scaleFactor;
		this.buttonOffsetY = (this.t.ELEMENT_H * this.ops.scaleFactor - this.t.BUTTON_H * this.ops.scaleFactor) / 2;
		this.checkOffsetY = (this.t.ELEMENT_H * this.ops.scaleFactor - this.t.CHECK_SIZE * this.ops.scaleFactor) / 2;
		this.checkOffsetX = this.checkOffsetY;
		this.checkSelectOffsetY = (this.t.CHECK_SIZE * this.ops.scaleFactor - this.t.CHECK_SELECT_SIZE * this.ops.scaleFactor) / 2;
		this.checkSelectOffsetX = this.checkSelectOffsetY;
		this.radioOffsetY = (this.t.ELEMENT_H * this.ops.scaleFactor - this.t.CHECK_SIZE * this.ops.scaleFactor) / 2;
		this.radioOffsetX = this.radioOffsetY;
		this.radioSelectOffsetY = (this.t.CHECK_SIZE * this.ops.scaleFactor - this.t.CHECK_SELECT_SIZE * this.ops.scaleFactor) / 2;
		this.radioSelectOffsetX = this.radioSelectOffsetY;
		this.elementsBaked = false;
	}
	,bakeElements: function() {
		if(this.checkSelectImage != null) {
			this.checkSelectImage.unload();
		}
		this.checkSelectImage = kha_Image.createRenderTarget(this.t.CHECK_SELECT_SIZE * this.ops.scaleFactor | 0,this.t.CHECK_SELECT_SIZE * this.ops.scaleFactor | 0,null,0,1,this.ops.khaWindowId);
		var g = this.checkSelectImage.get_g2();
		g.begin(true,0);
		g.set_color(this.t.ACCENT_SELECT_COL);
		g.drawLine(0,0,this.checkSelectImage.get_width(),this.checkSelectImage.get_height(),2 * this.ops.scaleFactor);
		g.drawLine(this.checkSelectImage.get_width(),0,0,this.checkSelectImage.get_height(),2 * this.ops.scaleFactor);
		g.end();
		this.elementsBaked = true;
	}
	,registerInput: function() {
		var _gthis = this;
		kha_input_Mouse.get().notifyWindowed(this.ops.khaWindowId,$bind(this,this.onMouseDown),$bind(this,this.onMouseUp),$bind(this,this.onMouseMove),$bind(this,this.onMouseWheel));
		kha_input_Keyboard.get().notify($bind(this,this.onKeyDown),$bind(this,this.onKeyUp),$bind(this,this.onKeyPress));
		kha_System.notifyOnApplicationState(function() {
			_gthis.inputDX = _gthis.inputDY = 0;
		},null,null,null,null);
		this.inputRegistered = true;
	}
	,unregisterInput: function() {
		kha_input_Mouse.get().removeWindowed(this.ops.khaWindowId,$bind(this,this.onMouseDown),$bind(this,this.onMouseUp),$bind(this,this.onMouseMove),$bind(this,this.onMouseWheel));
		kha_input_Keyboard.get().remove($bind(this,this.onKeyDown),$bind(this,this.onKeyUp),$bind(this,this.onKeyPress));
		this.endInput();
		this.inputX = this.inputY = 0;
		this.inputRegistered = false;
	}
	,begin: function(g) {
		if(!this.elementsBaked) {
			this.bakeElements();
		}
		this.changed = false;
		this.globalG = g;
		this._x = 0;
		this._y = 0;
		this._w = 0;
		this._h = 0;
	}
	,end: function(last) {
		if(last == null) {
			last = true;
		}
		if(!this.windowEnded) {
			this.endWindow();
		}
		this.drawCombo();
		this.drawTooltip(true);
		this.tabPressedHandle = null;
		if(last) {
			this.endInput();
		}
	}
	,beginRegion: function(g,x,y,w) {
		if(!this.elementsBaked) {
			g.end();
			this.bakeElements();
			g.begin(false);
		}
		this.changed = false;
		this.globalG = g;
		this.g = g;
		this.currentWindow = null;
		this.tooltipText = "";
		this.tooltipImg = null;
		this._windowX = 0;
		this._windowY = 0;
		this._windowW = w;
		this._x = x;
		this._y = y;
		this._w = w;
	}
	,endRegion: function(last) {
		if(last == null) {
			last = true;
		}
		this.drawTooltip(false);
		this.tabPressedHandle = null;
		if(last) {
			this.endInput();
		}
	}
	,beginSticky: function() {
		this.sticky = true;
		this._y -= this.currentWindow.scrollOffset;
	}
	,endSticky: function() {
		this.sticky = false;
		this.scissor = true;
		this.g.scissor(0,this._y | 0,this._windowW | 0,this._windowH - this._y | 0);
		this.windowHeaderH += this._y - this.windowHeaderH;
		this._y += this.currentWindow.scrollOffset;
	}
	,endInput: function() {
		this.isKeyPressed = false;
		this.inputStarted = false;
		this.inputStartedR = false;
		this.inputReleased = false;
		this.inputReleasedR = false;
		this.inputDX = 0;
		this.inputDY = 0;
		this.inputWheelDelta = 0;
		zui_Zui.textToPaste = "";
		if(zui_Zui.keyRepeat && this.isKeyDown && kha_Scheduler.time() - zui_Zui.keyRepeatTime > 0.05) {
			if(this.key == 8 || this.key == 46 || this.key == 37 || this.key == 39 || this.key == 38 || this.key == 40) {
				zui_Zui.keyRepeatTime = kha_Scheduler.time();
				this.isKeyPressed = true;
			}
		}
		if(zui_Zui.touchControls && this.inputDown && this.inputX == this.inputStartedX && this.inputY == this.inputStartedY && this.inputStartedTime > 0 && kha_Scheduler.time() - this.inputStartedTime > 0.5) {
			this.touchHold = true;
			this.inputStartedTime = 0;
		}
	}
	,inputChanged: function() {
		if(!(this.inputDX != 0 || this.inputDY != 0 || this.inputWheelDelta != 0 || this.inputStarted || this.inputStartedR || this.inputReleased || this.inputReleasedR || this.inputDown || this.inputDownR)) {
			return this.isKeyPressed;
		} else {
			return true;
		}
	}
	,windowDirty: function(handle,x,y,w,h) {
		var inputChanged = this.getInputInRect(x + handle.dragX,y + handle.dragY,w,h) && this.inputChanged();
		if(!(this.alwaysRedraw || this.isScrolling || this.isTyping)) {
			return inputChanged;
		} else {
			return true;
		}
	}
	,window: function(handle,x,y,w,h,drag) {
		if(drag == null) {
			drag = false;
		}
		if(handle.texture == null || w != handle.texture.get_width() || h != handle.texture.get_height()) {
			this.resize(handle,w,h,this.ops.khaWindowId);
		}
		if(!this.windowEnded) {
			this.endWindow();
		}
		this.windowEnded = false;
		this.g = handle.texture.get_g2();
		this.currentWindow = handle;
		this._windowX = x + handle.dragX;
		this._windowY = y + handle.dragY;
		this._windowW = w;
		this._windowH = h;
		this.windowHeaderW = 0;
		this.windowHeaderH = 0;
		if(this.windowDirty(handle,x,y,w,h)) {
			handle.redraws = 2;
		}
		if(zui_Zui.onBorderHover != null) {
			if(this.getInputInRect(this._windowX - 4,this._windowY,8,this._windowH)) {
				zui_Zui.onBorderHover(handle,0);
			} else if(this.getInputInRect(this._windowX + this._windowW - 4,this._windowY,8,this._windowH)) {
				zui_Zui.onBorderHover(handle,1);
			} else if(this.getInputInRect(this._windowX,this._windowY - 4,this._windowW,8)) {
				zui_Zui.onBorderHover(handle,2);
			} else if(this.getInputInRect(this._windowX,this._windowY + this._windowH - 4,this._windowW,8)) {
				zui_Zui.onBorderHover(handle,3);
			}
		}
		if(handle.redraws <= 0) {
			return false;
		}
		this._x = 0;
		this._y = handle.scrollOffset;
		if(handle.layout == 1) {
			w = this.t.ELEMENT_W * this.ops.scaleFactor | 0;
		}
		this._w = !handle.scrollEnabled ? w : w - (this.t.SCROLL_W * this.ops.scaleFactor | 0);
		this._h = h;
		this.tooltipText = "";
		this.tooltipImg = null;
		this.tabNames = null;
		if(this.t.FILL_WINDOW_BG) {
			this.g.begin(true,this.t.WINDOW_BG_COL);
		} else {
			this.g.begin(true,0);
			this.g.set_color(this.t.WINDOW_BG_COL);
			this.g.fillRect(this._x,this._y - handle.scrollOffset,handle.lastMaxX,handle.lastMaxY);
		}
		handle.dragEnabled = drag;
		if(drag) {
			if(this.inputStarted && this.getInputInRect(this._windowX,this._windowY,this._windowW,15 * this.ops.scaleFactor | 0)) {
				this.dragHandle = handle;
			} else if(this.inputReleased) {
				this.dragHandle = null;
			}
			if(handle == this.dragHandle) {
				handle.redraws = 2;
				handle.dragX += this.inputDX | 0;
				handle.dragY += this.inputDY | 0;
			}
			this._y += 15 * this.ops.scaleFactor | 0;
			this.windowHeaderH += 15 * this.ops.scaleFactor | 0;
		}
		return true;
	}
	,endWindow: function(bindGlobalG) {
		if(bindGlobalG == null) {
			bindGlobalG = true;
		}
		var handle = this.currentWindow;
		if(handle == null) {
			return;
		}
		if(handle.redraws > 0 || this.isScrolling || this.isTyping) {
			if(this.scissor) {
				this.scissor = false;
				this.g.disableScissor();
			}
			if(this.tabNames != null) {
				this.drawTabs();
			}
			if(handle.dragEnabled) {
				this.g.set_color(this.t.SEPARATOR_COL);
				this.g.fillRect(0,0,this._windowW,15 * this.ops.scaleFactor | 0);
			}
			var wh = this._windowH - this.windowHeaderH;
			var fullHeight = this._y - handle.scrollOffset - this.windowHeaderH;
			if(fullHeight < wh || handle.layout == 1 || !this.scrollEnabled) {
				handle.scrollEnabled = false;
				handle.scrollOffset = 0;
			} else {
				handle.scrollEnabled = true;
				if(this.tabScroll < 0) {
					handle.scrollOffset = this.tabScroll;
					this.tabScroll = 0;
				}
				var wy = this._windowY + this.windowHeaderH;
				var amountToScroll = fullHeight - wh;
				var barH = wh * Math.abs(wh / fullHeight);
				barH = Math.max(barH,this.t.ELEMENT_H * this.ops.scaleFactor);
				var totalScrollableArea = wh - barH;
				var barY = totalScrollableArea * (-handle.scrollOffset / amountToScroll) + this.windowHeaderH;
				var barFocus = this.getInputInRect(this._windowX + this._windowW - (this.t.SCROLL_W * this.ops.scaleFactor | 0),barY + this._windowY,this.t.SCROLL_W * this.ops.scaleFactor | 0,barH);
				if(this.inputStarted && barFocus) {
					this.scrollHandle = handle;
					this.isScrolling = true;
				}
				var scrollDelta = this.inputWheelDelta;
				if(zui_Zui.touchControls && this.inputDownR && this.inputDY != 0) {
					this.isScrolling = true;
					scrollDelta = -this.inputDY / 20;
				}
				if(handle == this.scrollHandle) {
					this.scroll(this.inputDY * (amountToScroll / totalScrollableArea),fullHeight);
				} else if(scrollDelta != 0 && this.comboSelectedHandle == null && this.getInputInRect(this._windowX,wy,this._windowW,wh)) {
					this.scroll(scrollDelta * (this.t.ELEMENT_H * this.ops.scaleFactor),fullHeight);
				}
				if(handle.scrollOffset > 0) {
					handle.scrollOffset = 0;
				} else if(fullHeight + handle.scrollOffset < wh) {
					handle.scrollOffset = wh - fullHeight;
				}
				this.g.set_color(this.t.WINDOW_BG_COL);
				this.g.fillRect(this._windowW - (this.t.SCROLL_W * this.ops.scaleFactor | 0),wy,this.t.SCROLL_W * this.ops.scaleFactor | 0,wh);
				this.g.set_color(this.t.ACCENT_COL);
				var barW = this.getInputInRect(this._windowX + this._windowW - (this.t.SCROLL_W * this.ops.scaleFactor | 0),wy,this.t.SCROLL_W * this.ops.scaleFactor | 0,wh) || handle == this.scrollHandle ? this.t.SCROLL_W * this.ops.scaleFactor | 0 : (this.t.SCROLL_W * this.ops.scaleFactor | 0) / 3;
				this.g.fillRect(this._windowW - barW - this.scrollAlign,barY,barW,barH);
			}
			handle.lastMaxX = this._x;
			handle.lastMaxY = this._y;
			if(handle.layout == 0) {
				handle.lastMaxX += this._windowW;
			} else {
				handle.lastMaxY += this._windowH;
			}
			handle.redraws--;
			this.g.end();
		}
		this.windowEnded = true;
		if(zui_Zui.alwaysRedrawWindow || handle.redraws > -4) {
			if(bindGlobalG) {
				this.globalG.begin(false);
			}
			this.globalG.set_color(this.t.WINDOW_TINT_COL);
			this.globalG.drawImage(handle.texture,this._windowX,this._windowY);
			if(bindGlobalG) {
				this.globalG.end();
			}
			if(handle.redraws <= 0) {
				handle.redraws--;
			}
		}
	}
	,scroll: function(delta,fullHeight) {
		this.currentWindow.scrollOffset -= delta;
	}
	,tab: function(handle,text,vertical,color) {
		if(color == null) {
			color = -1;
		}
		if(vertical == null) {
			vertical = false;
		}
		if(this.tabNames == null) {
			this.tabNames = [];
			this.tabColors = [];
			this.tabHandle = handle;
			this.tabVertical = vertical;
			this._w -= this.tabVertical ? this.t.ELEMENT_OFFSET * this.ops.scaleFactor + this.t.ELEMENT_W * this.ops.scaleFactor - this.ops.scaleFactor | 0 : 0;
			if(vertical) {
				this.windowHeaderW += this.t.ELEMENT_W * this.ops.scaleFactor;
			} else {
				this.windowHeaderH += this.t.BUTTON_H * this.ops.scaleFactor + this.buttonOffsetY + this.t.ELEMENT_OFFSET * this.ops.scaleFactor;
			}
			this.restoreX = this.inputX;
			this.restoreY = this.inputY;
			if(!vertical && this.getInputInRect(this._windowX,this._windowY,this._windowW,this.windowHeaderH)) {
				this.inputX = this.inputY = -1;
			}
			if(vertical) {
				this._x += this.windowHeaderW + 6;
				this._w -= 6;
			} else {
				this._y += this.windowHeaderH + 3;
			}
		}
		this.tabNames.push(text);
		this.tabColors.push(color);
		return handle.position == this.tabNames.length - 1;
	}
	,drawTabs: function() {
		this.inputX = this.restoreX;
		this.inputY = this.restoreY;
		if(this.currentWindow == null) {
			return;
		}
		var tabX = 0.0;
		var tabY = 0.0;
		var tabH = this.t.BUTTON_H * this.ops.scaleFactor * 1.1 | 0;
		var origy = this._y;
		this._y = this.currentWindow.dragEnabled ? 15 * this.ops.scaleFactor | 0 : 0;
		this.tabHandle.changed = false;
		if(this.isCtrlDown && this.isTabDown) {
			this.tabHandle.position++;
			if(this.tabHandle.position >= this.tabNames.length) {
				this.tabHandle.position = 0;
			}
			this.isTabDown = false;
		}
		if(this.tabHandle.position >= this.tabNames.length) {
			this.tabHandle.position = this.tabNames.length - 1;
		}
		this.g.set_color(this.t.SEPARATOR_COL);
		if(this.tabVertical) {
			this.g.fillRect(0,this._y,this.t.ELEMENT_W * this.ops.scaleFactor,this._windowH);
		} else {
			this.g.fillRect(0,this._y,this._windowW,this.buttonOffsetY + tabH + 2);
		}
		this.g.set_color(this.t.ACCENT_COL);
		if(this.tabVertical) {
			this.g.fillRect(this.t.ELEMENT_W * this.ops.scaleFactor,this._y,1,this._windowH);
		} else {
			this.g.fillRect(this.buttonOffsetY,this._y + this.buttonOffsetY + tabH + 2,this._windowW - this.buttonOffsetY * 2,1);
		}
		var basey = this.tabVertical ? this._y : this._y + 2;
		var _g = 0;
		var _g1 = this.tabNames.length;
		while(_g < _g1) {
			var i = _g++;
			this._x = tabX;
			this._y = basey + tabY;
			this._w = this.tabVertical ? this.t.ELEMENT_W * this.ops.scaleFactor - this.ops.scaleFactor | 0 : this.ops.font.width(this.fontSize,this.tabNames[i]) + this.buttonOffsetY * 2 + 18 * this.ops.scaleFactor | 0;
			var released = this.getReleased();
			var pushed = this.getPushed();
			var hover = this.getHover();
			if(released) {
				var h = this.tabHandle.nest(this.tabHandle.position);
				h.scrollOffset = this.currentWindow.scrollOffset;
				h = this.tabHandle.nest(i);
				this.tabScroll = h.scrollOffset;
				this.tabHandle.position = i;
				this.currentWindow.redraws = 3;
				this.tabHandle.changed = true;
			}
			var selected = this.tabHandle.position == i;
			this.g.set_color(pushed || hover ? this.t.BUTTON_HOVER_COL : this.tabColors[i] != -1 ? this.tabColors[i] : selected ? this.t.WINDOW_BG_COL : this.t.SEPARATOR_COL);
			if(this.tabVertical) {
				tabY += tabH + 1;
			} else {
				tabX += this._w + 1;
			}
			var g = this.g;
			var x = this._x + this.buttonOffsetY;
			var y = this._y + this.buttonOffsetY;
			var w = this._w;
			if(!this.enabled) {
				this.fadeColor();
			}
			g.fillRect(x,y - 1,w,tabH + 1);
			this.g.set_color(selected ? this.t.BUTTON_TEXT_COL : this.t.LABEL_COL);
			this.drawString(this.g,this.tabNames[i],this.t.TEXT_OFFSET,0,0);
			if(selected && !this.tabVertical) {
				this.g.set_color(this.t.WINDOW_BG_COL);
				this.g.fillRect(this._x + this.buttonOffsetY + 1,this._y + this.buttonOffsetY + tabH,this._w - 1,1);
			}
		}
		this._x = 0;
		this._y = origy;
		this._w = (!this.currentWindow.scrollEnabled ? this._windowW : this._windowW - (this.t.SCROLL_W * this.ops.scaleFactor | 0)) | 0;
	}
	,panel: function(handle,text,isTree,filled,pack) {
		if(pack == null) {
			pack = true;
		}
		if(filled == null) {
			filled = true;
		}
		if(isTree == null) {
			isTree = false;
		}
		if(!this.isVisible(this.t.ELEMENT_H * this.ops.scaleFactor)) {
			this.endElement();
			return handle.selected;
		}
		if(this.getReleased()) {
			handle.selected = !handle.selected;
			handle.changed = this.changed = true;
		}
		if(filled) {
			this.g.set_color(this.t.PANEL_BG_COL);
			var g = this.g;
			var x = this._x;
			var y = this._y;
			var w = this._w;
			var h = this.t.ELEMENT_H * this.ops.scaleFactor;
			if(!this.enabled) {
				this.fadeColor();
			}
			g.fillRect(x,y - 1,w,h + 1);
		}
		if(isTree) {
			this.drawTree(handle.selected);
		} else {
			this.drawArrow(handle.selected);
		}
		this.g.set_color(this.t.LABEL_COL);
		this.g.set_opacity(1.0);
		this.drawString(this.g,text,this.titleOffsetX,0);
		this.endElement();
		if(pack && !handle.selected) {
			this._y -= this.t.ELEMENT_OFFSET * this.ops.scaleFactor;
		}
		return handle.selected;
	}
	,image: function(image,tint,h,sx,sy,sw,sh) {
		if(sh == null) {
			sh = 0;
		}
		if(sw == null) {
			sw = 0;
		}
		if(sy == null) {
			sy = 0;
		}
		if(sx == null) {
			sx = 0;
		}
		if(tint == null) {
			tint = -1;
		}
		var iw = (sw > 0 ? sw : image.get_width()) * this.ops.scaleFactor;
		var ih = (sh > 0 ? sh : image.get_height()) * this.ops.scaleFactor;
		var w = Math.min(iw,this._w);
		var x = this._x;
		var scroll = this.currentWindow != null && this.currentWindow.scrollEnabled;
		var r;
		if(this.curRatio == -1) {
			r = 1.0;
		} else {
			var ratio = this.ratios[this.curRatio];
			r = ratio < 0 ? -ratio : ratio;
		}
		if(this.imageScrollAlign) {
			w = Math.min(iw,this._w - this.buttonOffsetY * 2);
			x += this.buttonOffsetY;
			if(!scroll) {
				w -= (this.t.SCROLL_W * this.ops.scaleFactor | 0) * r;
				x += (this.t.SCROLL_W * this.ops.scaleFactor | 0) * r / 2;
			}
		} else if(scroll) {
			w += (this.t.SCROLL_W * this.ops.scaleFactor | 0) * r;
		}
		var ratio = h == null ? w / iw : h / ih;
		if(h == null) {
			h = ih * ratio;
		} else {
			w = iw * ratio;
		}
		if(!this.isVisible(h)) {
			this.endElement(h);
			return 0;
		}
		var started = this.getStarted(h);
		var down = this.getPushed(h);
		var released = this.getReleased(h);
		var hover = this.getHover(h);
		if(this.curRatio == -1 && (started || down || released || hover)) {
			if(this.inputX < this._windowX + this._x || this.inputX > this._windowX + this._x + w) {
				hover = false;
				released = false;
				down = false;
				started = false;
			}
		}
		this.g.set_color(tint);
		if(!this.enabled) {
			this.fadeColor();
		}
		var h_float = h;
		if(sw > 0) {
			if(this.imageInvertY) {
				this.g.drawScaledSubImage(image,sx,sy,sw,sh,x,this._y + h_float,w,-h_float);
			} else {
				this.g.drawScaledSubImage(image,sx,sy,sw,sh,x,this._y,w,h_float);
			}
		} else if(this.imageInvertY) {
			this.g.drawScaledImage(image,x,this._y + h_float,w,-h_float);
		} else {
			this.g.drawScaledImage(image,x,this._y,w,h_float);
		}
		this.endElement(h);
		if(started) {
			return 1;
		} else if(released) {
			return 3;
		} else if(down) {
			return 2;
		} else if(hover) {
			return 4;
		} else {
			return 0;
		}
	}
	,text: function(text,align,bg) {
		if(bg == null) {
			bg = 0;
		}
		if(align == null) {
			align = 0;
		}
		if(text.indexOf("\n") >= 0) {
			var align1 = align;
			var bg1 = bg;
			if(bg == null) {
				bg1 = 0;
			}
			if(align == null) {
				align1 = 0;
			}
			var _g = 0;
			var _g1 = text.split("\n");
			while(_g < _g1.length) this.text(_g1[_g++],align1,bg1);
			return 0;
		}
		var h = Math.max(this.t.ELEMENT_H * this.ops.scaleFactor,this.ops.font.height(this.fontSize));
		if(!this.isVisible(h)) {
			this.endElement(h + this.t.ELEMENT_OFFSET * this.ops.scaleFactor);
			return 0;
		}
		var started = this.getStarted(h);
		var down = this.getPushed(h);
		var released = this.getReleased(h);
		this.getHover(h);
		if(bg != 0) {
			this.g.set_color(bg);
			this.g.fillRect(this._x + this.buttonOffsetY,this._y + this.buttonOffsetY,this._w - this.buttonOffsetY * 2,this.t.BUTTON_H * this.ops.scaleFactor);
		}
		this.g.set_color(this.t.TEXT_COL);
		this.drawString(this.g,text,this.t.TEXT_OFFSET * this.ops.scaleFactor,0,align);
		this.endElement(h + this.t.ELEMENT_OFFSET * this.ops.scaleFactor);
		if(started) {
			return 1;
		} else if(released) {
			return 3;
		} else if(down) {
			return 2;
		} else {
			return 0;
		}
	}
	,startTextEdit: function(handle) {
		this.isTyping = true;
		this.submitTextHandle = this.textSelectedHandle;
		this.textToSubmit = this.textSelected;
		this.textSelectedHandle = handle;
		this.textSelected = handle.text;
		this.cursorX = handle.text.length;
		if(this.tabPressed) {
			this.tabPressed = false;
			this.isKeyPressed = false;
		} else if(!this.highlightOnSelect) {
			var x = this.inputX - (this._windowX + this._x + this.t.TEXT_OFFSET * this.ops.scaleFactor);
			this.cursorX = 0;
			while(this.cursorX < this.textSelected.length && this.ops.font.width(this.fontSize,HxOverrides.substr(this.textSelected,0,this.cursorX)) < x) this.cursorX++;
		}
		this.tabPressedHandle = handle;
		this.highlightAnchor = this.highlightOnSelect ? 0 : this.cursorX;
		if(kha_input_Keyboard.get() != null) {
			kha_input_Keyboard.get().show();
		}
	}
	,submitTextEdit: function() {
		this.submitTextHandle.text = this.textToSubmit;
		this.submitTextHandle.changed = this.changed = true;
		this.submitTextHandle = null;
		this.textToSubmit = "";
		this.textSelected = "";
	}
	,updateTextEdit: function(align,editable) {
		if(editable == null) {
			editable = true;
		}
		if(align == null) {
			align = 0;
		}
		var text = this.textSelected;
		if(this.isKeyPressed) {
			if(this.key == 37) {
				if(this.cursorX > 0) {
					this.cursorX--;
				}
			} else if(this.key == 39) {
				if(this.cursorX < text.length) {
					this.cursorX++;
				}
			} else if(editable && this.key == 8) {
				if(this.cursorX > 0 && this.highlightAnchor == this.cursorX) {
					text = HxOverrides.substr(text,0,this.cursorX - 1) + HxOverrides.substr(text,this.cursorX,text.length);
					this.cursorX--;
				} else if(this.highlightAnchor < this.cursorX) {
					text = HxOverrides.substr(text,0,this.highlightAnchor) + HxOverrides.substr(text,this.cursorX,text.length);
					this.cursorX = this.highlightAnchor;
				} else {
					text = HxOverrides.substr(text,0,this.cursorX) + HxOverrides.substr(text,this.highlightAnchor,text.length);
				}
			} else if(editable && this.key == 46) {
				if(this.highlightAnchor == this.cursorX) {
					text = HxOverrides.substr(text,0,this.cursorX) + HxOverrides.substr(text,this.cursorX + 1,null);
				} else if(this.highlightAnchor < this.cursorX) {
					text = HxOverrides.substr(text,0,this.highlightAnchor) + HxOverrides.substr(text,this.cursorX,text.length);
					this.cursorX = this.highlightAnchor;
				} else {
					text = HxOverrides.substr(text,0,this.cursorX) + HxOverrides.substr(text,this.highlightAnchor,text.length);
				}
			} else if(this.key == 13) {
				this.deselectText();
			} else if(this.key == 27) {
				this.textSelected = this.textSelectedHandle.text;
				this.deselectText();
			} else if(this.key == 9 && this.tabSwitchEnabled && !this.isCtrlDown) {
				this.tabPressed = true;
				this.deselectText();
				this.key = null;
			} else if(this.key == 36) {
				this.cursorX = 0;
			} else if(this.key == 35) {
				this.cursorX = text.length;
			} else if(this.isCtrlDown && this.isADown) {
				this.cursorX = text.length;
				this.highlightAnchor = 0;
			} else if(editable && this.key != 16 && this.key != 20 && this.key != 17 && this.key != 224 && this.key != 18 && this.key != 38 && this.key != 40 && this.char != null && this.char != "" && HxOverrides.cca(this.char,0) >= 32) {
				text = HxOverrides.substr(text,0,this.highlightAnchor) + this.char + HxOverrides.substr(text,this.cursorX,null);
				this.cursorX = this.cursorX + 1 > text.length ? text.length : this.cursorX + 1;
				if(zui_Zui.dynamicGlyphLoad && HxOverrides.cca(this.char,0) > 126 && kha_graphics2_Graphics.fontGlyphs.indexOf(HxOverrides.cca(this.char,0)) == -1) {
					kha_graphics2_Graphics.fontGlyphs.push(HxOverrides.cca(this.char,0));
					kha_graphics2_Graphics.fontGlyphs = kha_graphics2_Graphics.fontGlyphs.slice();
				}
			}
			if(!(this.isShiftDown && (this.key == 37 || this.key == 39 || this.key == 16)) && !this.isCtrlDown) {
				this.highlightAnchor = this.cursorX;
			}
		}
		if(zui_Zui.textToPaste != "") {
			text = HxOverrides.substr(text,0,this.highlightAnchor) + zui_Zui.textToPaste + HxOverrides.substr(text,this.cursorX,null);
			this.cursorX += zui_Zui.textToPaste.length;
			this.highlightAnchor = this.cursorX;
			zui_Zui.textToPaste = "";
		}
		if(this.highlightAnchor == this.cursorX) {
			zui_Zui.textToCopy = text;
		} else if(this.highlightAnchor < this.cursorX) {
			zui_Zui.textToCopy = text.substring(this.highlightAnchor,this.cursorX);
		} else {
			zui_Zui.textToCopy = text.substring(this.cursorX,this.highlightAnchor);
		}
		if(zui_Zui.isCut) {
			if(this.highlightAnchor == this.cursorX) {
				text = "";
			} else if(this.highlightAnchor < this.cursorX) {
				text = HxOverrides.substr(text,0,this.highlightAnchor) + HxOverrides.substr(text,this.cursorX,text.length);
				this.cursorX = this.highlightAnchor;
			} else {
				text = HxOverrides.substr(text,0,this.cursorX) + HxOverrides.substr(text,this.highlightAnchor,text.length);
			}
		}
		var off = this.t.TEXT_OFFSET * this.ops.scaleFactor;
		var cursorHeight = this.t.ELEMENT_H * this.ops.scaleFactor - this.buttonOffsetY * 3.0;
		if(this.highlightAnchor != this.cursorX) {
			var istart = this.cursorX;
			var iend = this.highlightAnchor;
			if(this.highlightAnchor < this.cursorX) {
				istart = this.highlightAnchor;
				iend = this.cursorX;
			}
			var hlstrw = this.ops.font.width(this.fontSize,HxOverrides.substr(text,istart,iend - istart));
			var startoff = this.ops.font.width(this.fontSize,HxOverrides.substr(text,0,istart));
			var hlStart = align == 0 ? this._x + startoff + off : this._x + this._w - hlstrw - off;
			if(align == 2) {
				hlStart -= this.ops.font.width(this.fontSize,HxOverrides.substr(text,iend,text.length));
			}
			this.g.set_color(this.t.ACCENT_SELECT_COL);
			this.g.fillRect(hlStart,this._y + this.buttonOffsetY * 1.5,hlstrw,cursorHeight);
		}
		if(this.isKeyDown || kha_Scheduler.time() % 1. < 0.5) {
			var strw = this.ops.font.width(this.fontSize,align == 0 ? HxOverrides.substr(text,0,this.cursorX) : text.substring(this.cursorX,text.length));
			var cursorX = align == 0 ? this._x + strw + off : this._x + this._w - strw - off;
			this.g.set_color(this.t.TEXT_COL);
			this.g.fillRect(cursorX,this._y + this.buttonOffsetY * 1.5,this.ops.scaleFactor,cursorHeight);
		}
		this.textSelected = text;
	}
	,textInput: function(handle,label,align,editable) {
		if(editable == null) {
			editable = true;
		}
		if(align == null) {
			align = 0;
		}
		if(label == null) {
			label = "";
		}
		if(!this.isVisible(this.t.ELEMENT_H * this.ops.scaleFactor)) {
			this.endElement();
			return handle.text;
		}
		var hover = this.getHover();
		if(hover && zui_Zui.onTextHover != null) {
			zui_Zui.onTextHover();
		}
		this.g.set_color(hover ? this.t.ACCENT_HOVER_COL : this.t.ACCENT_COL);
		var g = this.g;
		var fill = this.t.FILL_ACCENT_BG;
		var x = this._x + this.buttonOffsetY;
		var y = this._y + this.buttonOffsetY;
		var w = this._w - this.buttonOffsetY * 2;
		var h = this.t.BUTTON_H * this.ops.scaleFactor;
		var strength = 0.0;
		strength = 1;
		if(!this.enabled) {
			this.fadeColor();
		}
		if(fill) {
			g.fillRect(x,y - 1,w,h + 1);
		} else {
			g.drawRect(x,y,w,h,strength);
		}
		var startEdit = this.getReleased() || this.tabPressed;
		if(this.textSelectedHandle != handle && startEdit) {
			this.startTextEdit(handle);
		}
		if(this.textSelectedHandle == handle) {
			this.updateTextEdit(align,editable);
		}
		if(this.submitTextHandle == handle) {
			this.submitTextEdit();
		} else {
			handle.changed = false;
		}
		if(label != "") {
			this.g.set_color(this.t.LABEL_COL);
			var labelAlign = align == 2 ? 0 : 2;
			this.drawString(this.g,label,labelAlign == 0 ? 7 : 0,0,labelAlign);
		}
		this.g.set_color(this.t.TEXT_COL);
		if(this.textSelectedHandle != handle) {
			this.drawString(this.g,handle.text,null,0,align);
		} else {
			this.drawString(this.g,this.textSelected,null,0,align);
		}
		this.endElement();
		return handle.text;
	}
	,deselectText: function() {
		if(this.textSelectedHandle == null) {
			return;
		}
		this.submitTextHandle = this.textSelectedHandle;
		this.textToSubmit = this.textSelected;
		this.textSelectedHandle = null;
		this.isTyping = false;
		if(this.currentWindow != null) {
			this.currentWindow.redraws = 2;
		}
		if(kha_input_Keyboard.get() != null) {
			kha_input_Keyboard.get().hide();
		}
		this.highlightAnchor = this.cursorX;
	}
	,button: function(text,align,label) {
		if(label == null) {
			label = "";
		}
		if(align == null) {
			align = 1;
		}
		if(!this.isVisible(this.t.ELEMENT_H * this.ops.scaleFactor)) {
			this.endElement();
			return false;
		}
		var released = this.getReleased();
		var pushed = this.getPushed();
		var hover = this.getHover();
		if(released) {
			this.changed = true;
		}
		this.g.set_color(pushed ? this.t.BUTTON_PRESSED_COL : hover ? this.t.BUTTON_HOVER_COL : this.t.BUTTON_COL);
		var g = this.g;
		var fill = this.t.FILL_BUTTON_BG;
		var x = this._x + this.buttonOffsetY;
		var y = this._y + this.buttonOffsetY;
		var w = this._w - this.buttonOffsetY * 2;
		var h = this.t.BUTTON_H * this.ops.scaleFactor;
		var strength = 0.0;
		strength = 1;
		if(!this.enabled) {
			this.fadeColor();
		}
		if(fill) {
			g.fillRect(x,y - 1,w,h + 1);
		} else {
			g.drawRect(x,y,w,h,strength);
		}
		this.g.set_color(this.t.BUTTON_TEXT_COL);
		this.drawString(this.g,text,this.t.TEXT_OFFSET * this.ops.scaleFactor,0,align);
		if(label != "") {
			this.g.set_color(this.t.LABEL_COL);
			this.drawString(this.g,label,this.t.TEXT_OFFSET * this.ops.scaleFactor,0,align == 2 ? 0 : 2);
		}
		this.endElement();
		return released;
	}
	,check: function(handle,text) {
		if(!this.isVisible(this.t.ELEMENT_H * this.ops.scaleFactor)) {
			this.endElement();
			return handle.selected;
		}
		if(this.getReleased()) {
			handle.selected = !handle.selected;
			handle.changed = this.changed = true;
		} else {
			handle.changed = false;
		}
		var hover = this.getHover();
		this.drawCheck(handle.selected,hover);
		this.g.set_color(this.t.TEXT_COL);
		this.drawString(this.g,text,this.titleOffsetX,0,0);
		this.endElement();
		return handle.selected;
	}
	,radio: function(handle,position,text) {
		if(!this.isVisible(this.t.ELEMENT_H * this.ops.scaleFactor)) {
			this.endElement();
			return handle.position == position;
		}
		if(position == 0) {
			handle.changed = false;
		}
		if(this.getReleased()) {
			handle.position = position;
			handle.changed = this.changed = true;
		}
		var hover = this.getHover();
		this.drawRadio(handle.position == position,hover);
		this.g.set_color(this.t.TEXT_COL);
		this.drawString(this.g,text,this.titleOffsetX,0);
		this.endElement();
		return handle.position == position;
	}
	,combo: function(handle,texts,label,showLabel,align,itemCount) {
		if(itemCount == null) {
			itemCount = -1;
		}
		if(align == null) {
			align = 0;
		}
		if(showLabel == null) {
			showLabel = false;
		}
		if(label == null) {
			label = "";
		}
		if(!this.isVisible(this.t.ELEMENT_H * this.ops.scaleFactor)) {
			this.endElement();
			return handle.position;
		}
		if(this.getReleased()) {
			if(this.comboSelectedHandle == null) {
				this.inputEnabled = false;
				this.comboSelectedHandle = handle;
				this.comboSelectedWindow = this.currentWindow;
				this.comboSelectedAlign = align;
				this.comboSelectedTexts = texts;
				this.comboSelectedLabel = label;
				this.comboSelectedX = this._x + this._windowX | 0;
				this.comboSelectedY = this._y + this._windowY + this.t.ELEMENT_H * this.ops.scaleFactor | 0;
				this.comboSelectedW = this._w | 0;
				this.comboItemCount = itemCount < 0 ? texts.length : itemCount;
				this.comboItemOffset = -1;
			}
		}
		if(handle == this.submitComboHandle) {
			handle.position = this.comboToSubmit;
			this.submitComboHandle = null;
			handle.changed = this.changed = true;
		} else {
			handle.changed = false;
		}
		if(this.inputWheelDelta != 0 && this.comboSelectedHandle != null) {
			this.comboItemOffset += this.inputWheelDelta > 0 ? 1 : -1;
			var maxOffset = this.comboSelectedTexts.length - this.comboItemCount;
			if(this.comboItemOffset > maxOffset) {
				this.comboItemOffset = maxOffset;
			}
			if(this.comboItemOffset < 0) {
				this.comboItemOffset = 0;
			}
		}
		if(this.getHover()) {
			this.g.set_color(this.t.ACCENT_HOVER_COL);
			var g = this.g;
			var fill = this.t.FILL_ACCENT_BG;
			var x = this._x + this.buttonOffsetY;
			var y = this._y + this.buttonOffsetY;
			var w = this._w - this.buttonOffsetY * 2;
			var h = this.t.BUTTON_H * this.ops.scaleFactor;
			var strength = 0.0;
			strength = 1;
			if(!this.enabled) {
				this.fadeColor();
			}
			if(fill) {
				g.fillRect(x,y - 1,w,h + 1);
			} else {
				g.drawRect(x,y,w,h,strength);
			}
		} else {
			this.g.set_color(this.t.ACCENT_COL);
			var g = this.g;
			var fill = this.t.FILL_ACCENT_BG;
			var x = this._x + this.buttonOffsetY;
			var y = this._y + this.buttonOffsetY;
			var w = this._w - this.buttonOffsetY * 2;
			var h = this.t.BUTTON_H * this.ops.scaleFactor;
			var strength = 0.0;
			strength = 1;
			if(!this.enabled) {
				this.fadeColor();
			}
			if(fill) {
				g.fillRect(x,y - 1,w,h + 1);
			} else {
				g.drawRect(x,y,w,h,strength);
			}
		}
		var x = this._x + this._w - this.arrowOffsetX - 8;
		var y = this._y + this.arrowOffsetY + 3;
		this.g.fillTriangle(x,y,x + this.t.ARROW_SIZE * this.ops.scaleFactor,y,x + this.t.ARROW_SIZE * this.ops.scaleFactor / 2,y + this.t.ARROW_SIZE * this.ops.scaleFactor / 2);
		if(showLabel && label != "") {
			if(align == 0) {
				this._x -= 15;
			}
			this.g.set_color(this.t.LABEL_COL);
			this.drawString(this.g,label,null,0,align == 0 ? 2 : 0);
			if(align == 0) {
				this._x += 15;
			}
		}
		if(align == 2) {
			this._x -= 15;
		}
		this.g.set_color(this.t.TEXT_COL);
		if(handle.position < texts.length) {
			this.drawString(this.g,texts[handle.position],null,0,align);
		}
		if(align == 2) {
			this._x += 15;
		}
		this.endElement();
		return handle.position;
	}
	,slider: function(handle,text,from,to,filled,precision,displayValue,align,textEdit) {
		if(textEdit == null) {
			textEdit = true;
		}
		if(align == null) {
			align = 2;
		}
		if(displayValue == null) {
			displayValue = true;
		}
		if(precision == null) {
			precision = 100.0;
		}
		if(filled == null) {
			filled = false;
		}
		if(to == null) {
			to = 1.0;
		}
		if(from == null) {
			from = 0.0;
		}
		if(!this.isVisible(this.t.ELEMENT_H * this.ops.scaleFactor)) {
			this.endElement();
			return handle.value;
		}
		if(this.getStarted()) {
			this.scrollHandle = handle;
			this.isScrolling = true;
		}
		handle.changed = false;
		if(handle == this.scrollHandle) {
			handle.value = Math.round((from + (this.inputX - (this._x + this._windowX + this.buttonOffsetY)) * ((to - from) / (this._w - this.buttonOffsetY * 2))) * precision) / precision;
			if(handle.value < from) {
				handle.value = from;
			} else if(handle.value > to) {
				handle.value = to;
			}
			handle.changed = this.changed = true;
		}
		var hover = this.getHover();
		this.drawSlider(handle.value,from,to,filled,hover);
		if((this.getReleased() || this.tabPressed) && textEdit) {
			handle.text = handle.value + "";
			this.startTextEdit(handle);
			handle.changed = this.changed = true;
		}
		var lalign = align == 0 ? 2 : 0;
		if(this.textSelectedHandle == handle) {
			this.updateTextEdit(lalign);
		}
		if(this.submitTextHandle == handle) {
			this.submitTextEdit();
			try {
				var code = handle.text;
				handle.value = eval(code);
			} catch( _g ) {
			}
			handle.changed = this.changed = true;
		}
		this.g.set_color(this.t.LABEL_COL);
		this.drawString(this.g,text,null,0,align);
		if(displayValue) {
			this.g.set_color(this.t.TEXT_COL);
			if(this.textSelectedHandle != handle) {
				this.drawString(this.g,Math.round(handle.value * precision) / precision + "",null,0,lalign);
			} else {
				this.drawString(this.g,this.textSelected,null,0,lalign);
			}
		}
		this.endElement();
		return handle.value;
	}
	,separator: function(h,fill) {
		if(fill == null) {
			fill = true;
		}
		if(h == null) {
			h = 4;
		}
		if(!this.isVisible(this.t.ELEMENT_H * this.ops.scaleFactor)) {
			this._y += h * this.ops.scaleFactor;
			return;
		}
		if(fill) {
			this.g.set_color(this.t.SEPARATOR_COL);
			this.g.fillRect(this._x,this._y,this._w,h * this.ops.scaleFactor);
		}
		this._y += h * this.ops.scaleFactor;
	}
	,tooltip: function(text) {
		this.tooltipText = text;
		this.tooltipY = this._y + this._windowY;
	}
	,tooltipImage: function(image,maxWidth) {
		this.tooltipImg = image;
		this.tooltipImgMaxWidth = maxWidth;
		this.tooltipInvertY = this.imageInvertY;
		this.tooltipY = this._y + this._windowY;
	}
	,drawArrow: function(selected) {
		var x = this._x + this.arrowOffsetX;
		var y = this._y + this.arrowOffsetY;
		this.g.set_color(this.t.TEXT_COL);
		if(selected) {
			this.g.fillTriangle(x,y,x + this.t.ARROW_SIZE * this.ops.scaleFactor,y,x + this.t.ARROW_SIZE * this.ops.scaleFactor / 2,y + this.t.ARROW_SIZE * this.ops.scaleFactor);
		} else {
			this.g.fillTriangle(x,y,x,y + this.t.ARROW_SIZE * this.ops.scaleFactor,x + this.t.ARROW_SIZE * this.ops.scaleFactor,y + this.t.ARROW_SIZE * this.ops.scaleFactor / 2);
		}
	}
	,drawTree: function(selected) {
		var SIGN_W = 7 * this.ops.scaleFactor;
		var x = this._x + this.arrowOffsetX + 1;
		var y = this._y + this.arrowOffsetY + 1;
		this.g.set_color(this.t.TEXT_COL);
		if(selected) {
			this.g.fillRect(x,y + SIGN_W / 2 - 1,SIGN_W,SIGN_W / 8);
		} else {
			this.g.fillRect(x,y + SIGN_W / 2 - 1,SIGN_W,SIGN_W / 8);
			this.g.fillRect(x + SIGN_W / 2 - 1,y,SIGN_W / 8,SIGN_W);
		}
	}
	,drawCheck: function(selected,hover) {
		var x = this._x + this.checkOffsetX;
		var y = this._y + this.checkOffsetY;
		this.g.set_color(hover ? this.t.ACCENT_HOVER_COL : this.t.ACCENT_COL);
		var g = this.g;
		var fill = this.t.FILL_ACCENT_BG;
		var w = this.t.CHECK_SIZE * this.ops.scaleFactor;
		var h = this.t.CHECK_SIZE * this.ops.scaleFactor;
		var strength = 0.0;
		strength = 1;
		if(!this.enabled) {
			this.fadeColor();
		}
		if(fill) {
			g.fillRect(x,y - 1,w,h + 1);
		} else {
			g.drawRect(x,y,w,h,strength);
		}
		if(selected) {
			this.g.set_color(-1);
			if(!this.enabled) {
				this.fadeColor();
			}
			var size = this.t.CHECK_SELECT_SIZE * this.ops.scaleFactor | 0;
			this.g.drawScaledImage(this.checkSelectImage,x + this.checkSelectOffsetX,y + this.checkSelectOffsetY,size,size);
		}
	}
	,drawRadio: function(selected,hover) {
		var x = this._x + this.radioOffsetX;
		var y = this._y + this.radioOffsetY;
		this.g.set_color(hover ? this.t.ACCENT_HOVER_COL : this.t.ACCENT_COL);
		var g = this.g;
		var fill = this.t.FILL_ACCENT_BG;
		var w = this.t.CHECK_SIZE * this.ops.scaleFactor;
		var h = this.t.CHECK_SIZE * this.ops.scaleFactor;
		var strength = 0.0;
		strength = 1;
		if(!this.enabled) {
			this.fadeColor();
		}
		if(fill) {
			g.fillRect(x,y - 1,w,h + 1);
		} else {
			g.drawRect(x,y,w,h,strength);
		}
		if(selected) {
			this.g.set_color(this.t.ACCENT_SELECT_COL);
			if(!this.enabled) {
				this.fadeColor();
			}
			this.g.fillRect(x + this.radioSelectOffsetX,y + this.radioSelectOffsetY,this.t.CHECK_SELECT_SIZE * this.ops.scaleFactor,this.t.CHECK_SELECT_SIZE * this.ops.scaleFactor);
		}
	}
	,drawSlider: function(value,from,to,filled,hover) {
		var x = this._x + this.buttonOffsetY;
		var y = this._y + this.buttonOffsetY;
		var w = this._w - this.buttonOffsetY * 2;
		this.g.set_color(hover ? this.t.ACCENT_HOVER_COL : this.t.ACCENT_COL);
		var g = this.g;
		var fill = this.t.FILL_ACCENT_BG;
		var h = this.t.BUTTON_H * this.ops.scaleFactor;
		var strength = 0.0;
		strength = 1;
		if(!this.enabled) {
			this.fadeColor();
		}
		if(fill) {
			g.fillRect(x,y - 1,w,h + 1);
		} else {
			g.drawRect(x,y,w,h,strength);
		}
		this.g.set_color(hover ? this.t.ACCENT_HOVER_COL : this.t.ACCENT_COL);
		var offset = (value - from) / (to - from);
		var barW = 8 * this.ops.scaleFactor;
		var sliderX = filled ? x : x + (w - barW) * offset;
		sliderX = Math.max(Math.min(sliderX,x + (w - barW)),x);
		var sliderW = filled ? w * offset : barW;
		sliderW = Math.max(Math.min(sliderW,w),0);
		var g = this.g;
		var h = this.t.BUTTON_H * this.ops.scaleFactor;
		if(!this.enabled) {
			this.fadeColor();
		}
		g.fillRect(sliderX,y - 1,sliderW,h + 1);
	}
	,drawCombo: function() {
		if(this.comboSelectedHandle == null) {
			return;
		}
		var _g = this.g;
		this.globalG.set_color(this.t.SEPARATOR_COL);
		var elementSize = this.t.ELEMENT_H * this.ops.scaleFactor + this.t.ELEMENT_OFFSET * this.ops.scaleFactor | 0;
		var maxItemCount = Math.min(this.comboSelectedTexts.length,this.comboItemCount) | 0;
		var comboH = (maxItemCount + 1) * elementSize;
		this.globalG.begin(false);
		var distTop = this.comboSelectedY - comboH - (this.t.ELEMENT_H * this.ops.scaleFactor | 0);
		var distBottom = kha_System.windowHeight() - (this.comboSelectedY + comboH);
		var outOfScreen = distBottom < 0 && distBottom < distTop;
		var comboY = outOfScreen ? this.comboSelectedY - comboH - (this.t.ELEMENT_H * this.ops.scaleFactor | 0) : this.comboSelectedY;
		this.globalG.fillRect(this.comboSelectedX,comboY,this.comboSelectedW,comboH);
		this.beginRegion(this.globalG,this.comboSelectedX,comboY,this.comboSelectedW);
		if(this.comboItemOffset == -1) {
			if(outOfScreen) {
				this.comboItemOffset = this.comboSelectedTexts.length - 1 - this.comboSelectedHandle.position;
			} else {
				this.comboItemOffset = this.comboSelectedHandle.position;
			}
			var value = this.comboItemOffset;
			var max = this.comboSelectedTexts.length - maxItemCount;
			this.comboItemOffset = value < 0 ? 0 : value > max ? max : value;
		}
		if(outOfScreen) {
			this.g.set_color(this.t.LABEL_COL);
			this.drawString(this.g,this.comboSelectedLabel,null,0,2);
			this._y += elementSize;
			this.fill(0,0,this._w / this.ops.scaleFactor,this.ops.scaleFactor,this.t.ACCENT_SELECT_COL);
		}
		this.inputEnabled = true;
		var BUTTON_COL = this.t.BUTTON_COL;
		var _g1 = this.comboItemOffset;
		var _g2 = this.comboItemOffset + maxItemCount;
		while(_g1 < _g2) {
			var i = _g1++;
			var j = outOfScreen ? this.comboSelectedTexts.length - 1 - i : i;
			this.t.BUTTON_COL = j == this.comboSelectedHandle.position ? this.t.ACCENT_SELECT_COL : this.t.SEPARATOR_COL;
			if(this.button(this.comboSelectedTexts[j],this.comboSelectedAlign)) {
				this.comboToSubmit = j;
				this.submitComboHandle = this.comboSelectedHandle;
				if(this.comboSelectedWindow != null) {
					this.comboSelectedWindow.redraws = 2;
				}
				break;
			}
		}
		this.t.BUTTON_COL = BUTTON_COL;
		if(!outOfScreen) {
			this.fill(0,0,this._w / this.ops.scaleFactor,this.ops.scaleFactor,this.t.ACCENT_SELECT_COL);
			this.g.set_color(this.t.LABEL_COL);
			this.drawString(this.g,this.comboSelectedLabel,null,0,2);
		}
		var maxOffset = this.comboSelectedTexts.length - this.comboItemCount;
		if(maxOffset > 0) {
			var barH = Math.max(this.comboItemCount / this.comboSelectedTexts.length * (this.t.ELEMENT_H * this.ops.scaleFactor) * 16,this.t.ELEMENT_H * this.ops.scaleFactor);
			var off = (comboH - barH - elementSize) * this.comboItemOffset / maxOffset;
			this.g.set_color(this.t.ACCENT_COL);
			this.g.fillRect(this._x + this._w - (this.t.SCROLL_W * this.ops.scaleFactor | 0) / 3,comboY + off,(this.t.SCROLL_W * this.ops.scaleFactor | 0) / 3,barH);
		}
		if((this.inputReleased || this.isEscapeDown) && !zui_Zui.comboFirst) {
			this.comboSelectedHandle = null;
			zui_Zui.comboFirst = true;
		} else {
			zui_Zui.comboFirst = false;
		}
		this.inputEnabled = this.comboSelectedHandle == null;
		this.endRegion(false);
		this.globalG.end();
		this.g = _g;
	}
	,drawTooltip: function(bindGlobalG) {
		if(this.tooltipText != "" || this.tooltipImg != null) {
			if(this.inputChanged()) {
				this.tooltipShown = false;
				this.tooltipWait = this.inputDX == 0 && this.inputDY == 0;
			}
			if(!this.tooltipShown) {
				this.tooltipShown = true;
				this.tooltipX = this.inputX;
				this.tooltipTime = kha_Scheduler.time();
			}
			if(!this.tooltipWait && kha_Scheduler.time() - this.tooltipTime > 1.0) {
				if(this.tooltipText != "") {
					this.drawTooltipText(bindGlobalG);
				} else {
					this.drawTooltipImage(bindGlobalG);
				}
			}
		} else {
			this.tooltipShown = false;
		}
	}
	,drawTooltipText: function(bindGlobalG) {
		this.globalG.set_color(this.t.TEXT_COL);
		var lines = this.tooltipText.split("\n");
		var tooltipW = 0.0;
		var _g = 0;
		while(_g < lines.length) {
			var lineTooltipW = this.ops.font.width(this.fontSize,lines[_g++]);
			if(lineTooltipW > tooltipW) {
				tooltipW = lineTooltipW;
			}
		}
		this.tooltipX = Math.min(this.tooltipX,kha_System.windowWidth() - tooltipW - 20);
		if(bindGlobalG) {
			this.globalG.begin(false);
		}
		this.globalG.fillRect(this.tooltipX,this.tooltipY,tooltipW + 20,this.t.ELEMENT_H * this.ops.scaleFactor * lines.length * 0.6);
		this.globalG.set_font(this.ops.font);
		this.globalG.set_fontSize(this.fontSize);
		this.globalG.set_color(this.t.ACCENT_COL);
		var _g = 0;
		var _g1 = lines.length;
		while(_g < _g1) {
			var i = _g++;
			this.globalG.drawString(lines[i],this.tooltipX + 5,this.tooltipY + i * this.fontSize);
		}
		if(bindGlobalG) {
			this.globalG.end();
		}
	}
	,drawTooltipImage: function(bindGlobalG) {
		var w = this.tooltipImg.get_width();
		if(this.tooltipImgMaxWidth != null && w > this.tooltipImgMaxWidth) {
			w = this.tooltipImgMaxWidth;
		}
		var h = this.tooltipImg.get_height() * (w / this.tooltipImg.get_width());
		this.tooltipX = Math.min(this.tooltipX,kha_System.windowWidth() - w - 20);
		this.tooltipY = Math.min(this.tooltipY,kha_System.windowHeight() - h - 20);
		if(bindGlobalG) {
			this.globalG.begin(false);
		}
		this.globalG.set_color(-16777216);
		this.globalG.fillRect(this.tooltipX,this.tooltipY,w,h);
		this.globalG.set_color(-1);
		if(this.tooltipInvertY) {
			this.globalG.drawScaledImage(this.tooltipImg,this.tooltipX,this.tooltipY + h,w,-h);
		} else {
			this.globalG.drawScaledImage(this.tooltipImg,this.tooltipX,this.tooltipY,w,h);
		}
		if(bindGlobalG) {
			this.globalG.end();
		}
	}
	,drawString: function(g,text,xOffset,yOffset,align) {
		if(align == null) {
			align = 0;
		}
		if(yOffset == null) {
			yOffset = 0;
		}
		var fullLength = text.length;
		while(text.length > 0 && this.ops.font.width(this.fontSize,text) > this._w) text = HxOverrides.substr(text,0,text.length - 1);
		if(text.length < fullLength) {
			text += "..";
		}
		if(xOffset == null) {
			xOffset = this.t.TEXT_OFFSET;
		}
		xOffset *= this.ops.scaleFactor;
		g.set_font(this.ops.font);
		g.set_fontSize(this.fontSize);
		if(align == 1) {
			xOffset = this._w / 2 - this.ops.font.width(this.fontSize,text) / 2;
		} else if(align == 2) {
			xOffset = this._w - this.ops.font.width(this.fontSize,text) - this.t.TEXT_OFFSET * this.ops.scaleFactor;
		}
		if(!this.enabled) {
			this.fadeColor();
		}
		g.set_pipeline(this.rtTextPipeline);
		g.drawString(text,this._x + xOffset,this._y + this.fontOffsetY + yOffset);
		g.set_pipeline(null);
	}
	,endElement: function(elementSize) {
		if(elementSize == null) {
			elementSize = this.t.ELEMENT_H * this.ops.scaleFactor + this.t.ELEMENT_OFFSET * this.ops.scaleFactor;
		}
		if(this.currentWindow == null || this.currentWindow.layout == 0) {
			if(this.curRatio == -1 || this.ratios != null && this.curRatio == this.ratios.length - 1) {
				this._y += elementSize;
				if(this.ratios != null && this.curRatio == this.ratios.length - 1) {
					this.curRatio = -1;
					this.ratios = null;
					this._x = this.xBeforeSplit;
					this._w = this.wBeforeSplit;
					this.highlightFullRow = false;
				}
			} else {
				this.curRatio++;
				this._x += this._w;
				var ratio = this.ratios[this.curRatio];
				this._w = (ratio < 0 ? -ratio : ratio * this.wBeforeSplit) | 0;
			}
		} else {
			this._x += this._w + this.t.ELEMENT_OFFSET * this.ops.scaleFactor;
		}
	}
	,row: function(ratios) {
		this.ratios = ratios;
		this.curRatio = 0;
		this.xBeforeSplit = this._x;
		this.wBeforeSplit = this._w;
		var ratio = ratios[this.curRatio];
		this._w = (ratio < 0 ? -ratio : ratio * this._w) | 0;
	}
	,indent: function(bothSides) {
		if(bothSides == null) {
			bothSides = true;
		}
		this._x += this.t.TAB_W * this.ops.scaleFactor | 0;
		this._w -= this.t.TAB_W * this.ops.scaleFactor | 0;
		if(bothSides) {
			this._w -= this.t.TAB_W * this.ops.scaleFactor | 0;
		}
	}
	,unindent: function(bothSides) {
		if(bothSides == null) {
			bothSides = true;
		}
		this._x -= this.t.TAB_W * this.ops.scaleFactor | 0;
		this._w += this.t.TAB_W * this.ops.scaleFactor | 0;
		if(bothSides) {
			this._w += this.t.TAB_W * this.ops.scaleFactor | 0;
		}
	}
	,fadeColor: function() {
		this.g.set_color(kha_Color.fromFloats(((this.g.get_color() & 16711680) >>> 16) * 0.00392156862745098,((this.g.get_color() & 65280) >>> 8) * 0.00392156862745098,(this.g.get_color() & 255) * 0.00392156862745098,0.25));
	}
	,fill: function(x,y,w,h,color) {
		this.g.set_color(color);
		if(!this.enabled) {
			this.fadeColor();
		}
		this.g.fillRect(this._x + x * this.ops.scaleFactor,this._y + y * this.ops.scaleFactor - 1,w * this.ops.scaleFactor,h * this.ops.scaleFactor);
		this.g.set_color(-1);
	}
	,rect: function(x,y,w,h,color,strength) {
		if(strength == null) {
			strength = 1.0;
		}
		this.g.set_color(color);
		if(!this.enabled) {
			this.fadeColor();
		}
		this.g.drawRect(this._x + x * this.ops.scaleFactor,this._y + y * this.ops.scaleFactor,w * this.ops.scaleFactor,h * this.ops.scaleFactor,strength);
		this.g.set_color(-1);
	}
	,isVisible: function(elemH) {
		if(this.currentWindow == null) {
			return true;
		}
		if(this._y + elemH > this.windowHeaderH) {
			return this._y < this.currentWindow.texture.get_height();
		} else {
			return false;
		}
	}
	,getReleased: function(elemH) {
		if(elemH == null) {
			elemH = -1.0;
		}
		this.isReleased = this.enabled && this.inputEnabled && this.inputReleased && this.getHover(elemH) && this.getInitialHover(elemH);
		return this.isReleased;
	}
	,getPushed: function(elemH) {
		if(elemH == null) {
			elemH = -1.0;
		}
		this.isPushed = this.enabled && this.inputEnabled && this.inputDown && this.getHover(elemH) && this.getInitialHover(elemH);
		return this.isPushed;
	}
	,getStarted: function(elemH) {
		if(elemH == null) {
			elemH = -1.0;
		}
		this.isStarted = this.enabled && this.inputEnabled && this.inputStarted && this.getHover(elemH);
		return this.isStarted;
	}
	,getInitialHover: function(elemH) {
		if(elemH == null) {
			elemH = -1.0;
		}
		if(this.scissor && this.inputY < this._windowY + this.windowHeaderH) {
			return false;
		}
		if(elemH == -1.0) {
			elemH = this.t.ELEMENT_H * this.ops.scaleFactor;
		}
		if(this.enabled && this.inputEnabled && this.inputStartedX >= this._windowX + this._x && this.inputStartedX < this._windowX + this._x + this._w && this.inputStartedY >= this._windowY + this._y) {
			return this.inputStartedY < this._windowY + this._y + elemH;
		} else {
			return false;
		}
	}
	,getHover: function(elemH) {
		if(elemH == null) {
			elemH = -1.0;
		}
		if(this.scissor && this.inputY < this._windowY + this.windowHeaderH) {
			return false;
		}
		if(elemH == -1.0) {
			elemH = this.t.ELEMENT_H * this.ops.scaleFactor;
		}
		this.isHovered = this.enabled && this.inputEnabled && this.inputX >= this._windowX + (this.highlightFullRow ? 0 : this._x) && this.inputX < this._windowX + this._x + (this.highlightFullRow ? this._windowW : this._w) && this.inputY >= this._windowY + this._y && this.inputY < this._windowY + this._y + elemH;
		return this.isHovered;
	}
	,getInputInRect: function(x,y,w,h,scale) {
		if(scale == null) {
			scale = 1.0;
		}
		if(this.enabled && this.inputEnabled && this.inputX >= x * scale && this.inputX < (x + w) * scale && this.inputY >= y * scale) {
			return this.inputY < (y + h) * scale;
		} else {
			return false;
		}
	}
	,onMouseDown: function(button,x,y) {
		if(button == 0) {
			this.inputStarted = true;
		} else {
			this.inputStartedR = true;
		}
		if(button == 0) {
			this.inputDown = true;
		} else {
			this.inputDownR = true;
		}
		this.inputStartedTime = kha_Scheduler.time();
		this.setInputPosition(x,y);
		this.inputStartedX = x;
		this.inputStartedY = y;
	}
	,onMouseUp: function(button,x,y) {
		if(this.isScrolling) {
			this.isScrolling = false;
			this.scrollHandle = null;
			if(x == this.inputStartedX && y == this.inputStartedY) {
				if(button == 0) {
					this.inputReleased = true;
				} else {
					this.inputReleasedR = true;
				}
			}
		} else if(button == 0) {
			this.inputReleased = true;
		} else {
			this.inputReleasedR = true;
		}
		if(button == 0) {
			this.inputDown = false;
		} else {
			this.inputDownR = false;
		}
		this.setInputPosition(x,y);
		this.deselectText();
		if(this.touchHold) {
			this.touchHold = false;
			this.inputReleased = false;
			this.inputReleasedR = true;
		}
	}
	,onMouseMove: function(x,y,movementX,movementY) {
		this.setInputPosition(x,y);
	}
	,onMouseWheel: function(delta) {
		this.inputWheelDelta = delta;
	}
	,setInputPosition: function(x,y) {
		this.inputDX += x - this.inputX;
		this.inputDY += y - this.inputY;
		this.inputX = x;
		this.inputY = y;
	}
	,onKeyDown: function(code) {
		this.key = code;
		this.isKeyPressed = true;
		this.isKeyDown = true;
		zui_Zui.keyRepeatTime = kha_Scheduler.time() + 0.4;
		switch(code) {
		case 8:
			this.isBackspaceDown = true;
			break;
		case 9:
			this.isTabDown = true;
			break;
		case 13:
			this.isReturnDown = true;
			break;
		case 16:
			this.isShiftDown = true;
			break;
		case 17:
			this.isCtrlDown = true;
			break;
		case 18:
			this.isAltDown = true;
			break;
		case 27:
			this.isEscapeDown = true;
			break;
		case 32:
			this.char = " ";
			break;
		case 46:
			this.isDeleteDown = true;
			break;
		case 65:
			this.isADown = true;
			break;
		default:
		}
	}
	,onKeyUp: function(code) {
		this.isKeyDown = false;
		switch(code) {
		case 8:
			this.isBackspaceDown = false;
			break;
		case 9:
			this.isTabDown = false;
			break;
		case 13:
			this.isReturnDown = false;
			break;
		case 16:
			this.isShiftDown = false;
			break;
		case 17:
			this.isCtrlDown = false;
			break;
		case 18:
			this.isAltDown = false;
			break;
		case 27:
			this.isEscapeDown = false;
			break;
		case 46:
			this.isDeleteDown = false;
			break;
		case 65:
			this.isADown = false;
			break;
		default:
		}
	}
	,onKeyPress: function(char) {
		this.char = char;
		this.isKeyPressed = true;
	}
	,onCut: function() {
		zui_Zui.isCut = true;
		return this.onCopy();
	}
	,onCopy: function() {
		zui_Zui.isCopy = true;
		return zui_Zui.textToCopy;
	}
	,onPaste: function(s) {
		zui_Zui.isPaste = true;
		zui_Zui.textToPaste = s;
	}
	,resize: function(handle,w,h,khaWindowId) {
		if(khaWindowId == null) {
			khaWindowId = 0;
		}
		handle.redraws = 2;
		if(handle.texture != null) {
			handle.texture.unload();
		}
		if(w < 1) {
			w = 1;
		}
		if(h < 1) {
			h = 1;
		}
		handle.texture = kha_Image.createRenderTarget(w,h,0,0,1,khaWindowId);
		handle.texture.get_g2().set_imageScaleQuality(kha_graphics2_ImageScaleQuality.High);
	}
	,__class__: zui_Zui
};
function $bind(o,m) { if( m == null ) return null; if( m.__id__ == null ) m.__id__ = $global.$haxeUID++; var f; if( o.hx__closures__ == null ) o.hx__closures__ = {}; else f = o.hx__closures__[m.__id__]; if( f == null ) { f = m.bind(o); o.hx__closures__[m.__id__] = f; } return f; }
$global.$haxeUID |= 0;
if(typeof(performance) != "undefined" ? typeof(performance.now) == "function" : false) {
	HxOverrides.now = performance.now.bind(performance);
}
$hxClasses["Math"] = Math;
if( String.fromCodePoint == null ) String.fromCodePoint = function(c) { return c < 0x10000 ? String.fromCharCode(c) : String.fromCharCode((c>>10)+0xD7C0)+String.fromCharCode((c&0x3FF)+0xDC00); }
String.prototype.__class__ = $hxClasses["String"] = String;
String.__name__ = "String";
$hxClasses["Array"] = Array;
Array.__name__ = "Array";
Date.prototype.__class__ = $hxClasses["Date"] = Date;
Date.__name__ = "Date";
var Int = { };
var Dynamic = { };
var Float = Number;
var Bool = Boolean;
var Class = { };
var Enum = { };
js_Boot.__toStr = ({ }).toString;
haxe_ds_ObjectMap.count = 0;
if(ArrayBuffer.prototype.slice == null) {
	ArrayBuffer.prototype.slice = js_lib__$ArrayBuffer_ArrayBufferCompat.sliceImpl;
}
Main.version = "0.8";
Main.sha = HxOverrides.substr("'4fbd35f'",1,7);
Main.date = "2020-10-29 01:17:11".split(" ")[0];
zui_Handle.global = new zui_Handle();
arm_App.uiEnabled = true;
arm_App.isDragging = false;
arm_App.isResizing = false;
arm_App.dragTint = -1;
arm_App.dragOffX = 0.0;
arm_App.dragOffY = 0.0;
arm_App.dropX = 0.0;
arm_App.dropY = 0.0;
arm_App.defaultElementH = 28;
arm_App.resHandle = new zui_Handle({ position : 4});
arm_App.bitsHandle = new zui_Handle();
arm_App.dropPaths = [];
arm_App.appx = 0;
arm_App.appy = 0;
arm_App.lastWindowWidth = 0;
arm_App.lastWindowHeight = 0;
arm_Args.useArgs = false;
arm_Args.projectPath = "";
arm_Args.assetPath = "";
arm_Args.reloadMesh = false;
arm_Args.exportTextures = false;
arm_Args.exportTexturesType = "";
arm_Args.exportTexturesPreset = "";
arm_Args.exportTexturesPath = "";
arm_Args.exportMesh = false;
arm_Args.exportMeshPath = "";
arm_Args.backgroundProcessing = false;
arm_Config.configLoaded = false;
iron_math_Mat4.helpVec = new iron_math_Vec4();
iron_math_Mat4.helpMat = new iron_math_Mat4(1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0);
arm_Context.layerIsMask = false;
arm_Context.tool = 0;
arm_Context.ddirty = 0;
arm_Context.pdirty = 0;
arm_Context.rdirty = 0;
arm_Context.brushBlendDirty = true;
arm_Context.layerPreviewDirty = true;
arm_Context.layersPreviewDirty = false;
arm_Context.nodePreviewDirty = false;
arm_Context.nodePreviewSocket = 0;
arm_Context.colorIdPicked = false;
arm_Context.splitView = false;
arm_Context.viewIndex = -1;
arm_Context.viewIndexLast = -1;
arm_Context.materialPreview = false;
arm_Context.savedCamera = new iron_math_Mat4(1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0);
arm_Context.baseRPicked = 0.0;
arm_Context.baseGPicked = 0.0;
arm_Context.baseBPicked = 0.0;
arm_Context.normalRPicked = 0.0;
arm_Context.normalGPicked = 0.0;
arm_Context.normalBPicked = 0.0;
arm_Context.roughnessPicked = 0.0;
arm_Context.metallicPicked = 0.0;
arm_Context.occlusionPicked = 0.0;
arm_Context.materialIdPicked = 0;
arm_Context.uvxPicked = 0.0;
arm_Context.uvyPicked = 0.0;
arm_Context.pickerSelectMaterial = true;
arm_Context.pickerMaskHandle = new zui_Handle();
arm_Context.envmapLoaded = false;
arm_Context.showEnvmap = false;
arm_Context.showEnvmapHandle = new zui_Handle({ selected : false});
arm_Context.showEnvmapBlur = false;
arm_Context.showEnvmapBlurHandle = new zui_Handle({ selected : false});
arm_Context.envmapAngle = 0.0;
arm_Context.drawWireframe = false;
arm_Context.wireframeHandle = new zui_Handle({ selected : false});
arm_Context.drawTexels = false;
arm_Context.texelsHandle = new zui_Handle({ selected : false});
arm_Context.cullBackfaces = true;
arm_Context.textureFilter = true;
arm_Context.colorIdHandle = zui_Handle.global.nest(95,null);
arm_Context.formatType = 0;
arm_Context.formatQuality = 100.0;
arm_Context.layersExport = 0;
arm_Context.splitBy = 0;
arm_Context.parseTransform = false;
arm_Context.parseVCols = false;
arm_Context.selectTime = 0.0;
arm_Context.decalPreview = false;
arm_Context.decalX = 0.0;
arm_Context.decalY = 0.0;
arm_Context.viewportMode = 0;
arm_Context.renderMode = 0;
arm_Context.hscaleWasChanged = false;
arm_Context.exportMeshFormat = 0;
arm_Context.cacheDraws = false;
arm_Context.layerFilter = 0;
arm_Context.paintVec = new iron_math_Vec4();
arm_Context.lastPaintX = -1.0;
arm_Context.lastPaintY = -1.0;
arm_Context.foregroundEvent = false;
arm_Context.painted = 0;
arm_Context.brushTime = 0.0;
arm_Context.cloneStartX = -1.0;
arm_Context.cloneStartY = -1.0;
arm_Context.cloneDeltaX = 0.0;
arm_Context.cloneDeltaY = 0.0;
arm_Context.axisX = false;
arm_Context.axisY = false;
arm_Context.axisZ = false;
arm_Context.axisStart = 0.0;
arm_Context.axisLoc = 0.0;
arm_Context.brushNodesRadius = 1.0;
arm_Context.brushNodesOpacity = 1.0;
arm_Context.brushStencilX = 0.02;
arm_Context.brushStencilY = 0.02;
arm_Context.brushStencilScale = 0.9;
arm_Context.brushStencilScaling = false;
arm_Context.brushStencilAngle = 0.0;
arm_Context.brushStencilRotating = false;
arm_Context.brushNodesScale = 1.0;
arm_Context.brushNodesAngle = 0.0;
arm_Context.brushNodesHardness = 1.0;
arm_Context.brushDirectional = false;
arm_Context.brushRadius = 0.5;
arm_Context.brushRadiusHandle = new zui_Handle({ value : 0.5});
arm_Context.brushScaleX = 1.0;
arm_Context.brushScaleXHandle = new zui_Handle({ value : 1.0});
arm_Context.brushBlending = 0;
arm_Context.brushOpacity = 1.0;
arm_Context.brushOpacityHandle = new zui_Handle({ value : 1.0});
arm_Context.brushScale = 1.0;
arm_Context.brushAngle = 0.0;
arm_Context.brushAngleHandle = new zui_Handle({ value : 0.0});
arm_Context.brushHardness = 0.8;
arm_Context.brushLazyRadius = 0.0;
arm_Context.brushLazyStep = 0.0;
arm_Context.brushLazyX = 0.0;
arm_Context.brushLazyY = 0.0;
arm_Context.brushBias = 1.0;
arm_Context.brushPaint = 0;
arm_Context.brushDepthReject = true;
arm_Context.brushAngleReject = true;
arm_Context.brushAngleRejectDot = 0.5;
arm_Context.bakeType = 0;
arm_Context.bakeAxis = 0;
arm_Context.bakeUpAxis = 0;
arm_Context.bakeAoStrength = 1.0;
arm_Context.bakeAoRadius = 1.0;
arm_Context.bakeAoOffset = 1.0;
arm_Context.bakeCurvStrength = 1.0;
arm_Context.bakeCurvRadius = 1.0;
arm_Context.bakeCurvOffset = 0.0;
arm_Context.bakeCurvSmooth = 1;
arm_Context.bakeHighPoly = 0;
arm_Context.dilateRadius = 8.0;
arm_Context.xray = false;
arm_Context.symX = false;
arm_Context.symY = false;
arm_Context.symZ = false;
arm_Context.showCompass = true;
arm_Context.fillTypeHandle = new zui_Handle();
arm_Context.projectType = 0;
arm_Context.projectAspectRatio = 0;
arm_Context.sub = 0;
arm_Context.lastPaintVecX = -1.0;
arm_Context.lastPaintVecY = -1.0;
arm_Context.prevPaintVecX = -1.0;
arm_Context.prevPaintVecY = -1.0;
arm_Context.frame = 0;
arm_Context.paint2d = false;
arm_Context.paint2dView = false;
arm_Context.lockStartedX = -1.0;
arm_Context.lockStartedY = -1.0;
arm_Context.brushLocked = false;
arm_Context.brushCanLock = false;
arm_Context.brushCanUnlock = false;
arm_Context.cameraType = 0;
arm_Context.camHandle = new zui_Handle();
arm_Context.vxaoExt = 1.0;
arm_Context.vxaoOffset = 1.5;
arm_Context.vxaoAperture = 1.2;
arm_Context.textureExportPath = "";
arm_Context.lastStatusPosition = 0;
arm_Context.cameraControls = 0;
arm_Context.dragDestination = 0;
arm_History.undoI = 0;
arm_History.undos = 0;
arm_History.redos = 0;
arm_History.pushUndo = false;
arm_Log.message = "";
arm_Log.messageTimer = 0.0;
arm_Log.messageColor = 0;
arm_Log.lastTraces = [""];
arm_Plugin.plugins = new haxe_ds_StringMap();
iron_App.traitInits = [];
iron_App.traitUpdates = [];
iron_App.traitLateUpdates = [];
iron_App.traitRenders = [];
iron_App.traitRenders2D = [];
iron_App.pauseUpdates = false;
iron_App.lastw = -1;
iron_App.lasth = -1;
iron_data_Data.cachedSceneRaws = new haxe_ds_StringMap();
iron_data_Data.cachedMeshes = new haxe_ds_StringMap();
iron_data_Data.cachedLights = new haxe_ds_StringMap();
iron_data_Data.cachedCameras = new haxe_ds_StringMap();
iron_data_Data.cachedMaterials = new haxe_ds_StringMap();
iron_data_Data.cachedParticles = new haxe_ds_StringMap();
iron_data_Data.cachedWorlds = new haxe_ds_StringMap();
iron_data_Data.cachedShaders = new haxe_ds_StringMap();
iron_data_Data.cachedBlobs = new haxe_ds_StringMap();
iron_data_Data.cachedImages = new haxe_ds_StringMap();
iron_data_Data.cachedFonts = new haxe_ds_StringMap();
iron_data_Data.assetsLoaded = 0;
iron_data_Data.loadingMeshes = new haxe_ds_StringMap();
iron_data_Data.loadingLights = new haxe_ds_StringMap();
iron_data_Data.loadingCameras = new haxe_ds_StringMap();
iron_data_Data.loadingMaterials = new haxe_ds_StringMap();
iron_data_Data.loadingParticles = new haxe_ds_StringMap();
iron_data_Data.loadingWorlds = new haxe_ds_StringMap();
iron_data_Data.loadingShaders = new haxe_ds_StringMap();
iron_data_Data.loadingSceneRaws = new haxe_ds_StringMap();
iron_data_Data.loadingBlobs = new haxe_ds_StringMap();
iron_data_Data.loadingImages = new haxe_ds_StringMap();
iron_data_Data.loadingFonts = new haxe_ds_StringMap();
iron_data_Data.dataPath = "." + "\\" + "data" + "\\";
iron_system_Input.occupied = false;
iron_system_Input.gamepads = [];
iron_system_Input.registered = false;
iron_object_Object.uidCounter = 0;
iron_object_Object.seed = 1;
iron_Scene.uidCounter = 0;
iron_Scene.framePassed = true;
iron_system_Time.scale = 1.0;
iron_system_Time.last = 0.0;
iron_system_Time.realDelta = 0.0;
iron_system_Time.frequency = 60;
arm_IronBridge.App = iron_App;
arm_IronBridge.Scene = iron_Scene;
arm_IronBridge.RenderPath = iron_RenderPath;
arm_IronBridge.Time = iron_system_Time;
arm_IronBridge.Input = iron_system_Input;
arm_IronBridge.ArmPack = iron_system_ArmPack;
arm_IronBridge.Object = iron_object_Object;
arm_IronBridge.Data = iron_data_Data;
arm_node_Brush.customNodes = new Map();
arm_node_Brush.packageName = "arm.node.brush";
arm_node_MakeMaterial.heightUsed = false;
arm_node_MakeMaterial.emisUsed = false;
arm_node_MakeMaterial.subsUsed = false;
arm_shader_MaterialParser.tex_coord = "texCoord";
arm_shader_MaterialParser.customNodes = new Map();
arm_shader_MaterialParser.parse_surface = true;
arm_shader_MaterialParser.parse_opacity = true;
arm_shader_MaterialParser.parse_height = false;
arm_shader_MaterialParser.parse_height_as_channel = false;
arm_shader_MaterialParser.parse_emission = false;
arm_shader_MaterialParser.parse_subsurface = false;
arm_shader_MaterialParser.triplanar = false;
arm_shader_MaterialParser.sample_keep_aspect = false;
arm_shader_MaterialParser.sample_uv_scale = "1.0";
arm_shader_MaterialParser.blur_passthrough = false;
arm_shader_MaterialParser.warp_passthrough = false;
arm_shader_MaterialParser.arm_export_tangents = true;
arm_shader_MaterialParser.parsedMap = new haxe_ds_StringMap();
arm_shader_MaterialParser.textureMap = new haxe_ds_StringMap();
arm_node_NodesBrush.categories = ["Nodes"];
arm_node_NodesBrush.list = (function($this) {
	var $r;
	var tmp = { id : 0, name : "Image Texture", type : "TEX_IMAGE", x : 0, y : 0, color : -11959648, inputs : [{ id : 0, node_id : 0, name : "Vector", type : "VECTOR", color : -10263609, default_value : arm_node_NodesBrush.f32([0.0,0.0,0.0])}], outputs : [{ id : 0, node_id : 0, name : "Color", type : "VALUE", color : -3684567, default_value : arm_node_NodesBrush.f32([0.0,0.0,0.0,1.0])},{ id : 0, node_id : 0, name : "Alpha", type : "VALUE", color : -6184543, default_value : 1.0}], buttons : [{ name : "file", type : "ENUM", default_value : 0, data : ""},{ name : "color_space", type : "ENUM", default_value : 0, data : ["linear","srgb"]}]};
	var tmp1 = { id : 0, name : "Separate Vector", type : "SeparateVectorNode", x : 0, y : 0, color : -11959648, inputs : [{ id : 0, node_id : 0, name : "Vector", type : "VECTOR", color : -10263609, default_value : arm_node_NodesBrush.f32([0.0,0.0,0.0])}], outputs : [{ id : 0, node_id : 0, name : "X", type : "VALUE", color : -6184543, default_value : 0.0},{ id : 0, node_id : 0, name : "Y", type : "VALUE", color : -6184543, default_value : 0.0},{ id : 0, node_id : 0, name : "Z", type : "VALUE", color : -6184543, default_value : 0.0}], buttons : []};
	var tmp2 = { id : 0, name : "Vector", type : "VectorNode", x : 0, y : 0, color : -11959648, inputs : [{ id : 0, node_id : 0, name : "X", type : "VALUE", color : -6184543, default_value : 0.0},{ id : 0, node_id : 0, name : "Y", type : "VALUE", color : -6184543, default_value : 0.0},{ id : 0, node_id : 0, name : "Z", type : "VALUE", color : -6184543, default_value : 0.0}], outputs : [{ id : 0, node_id : 0, name : "Vector", type : "VECTOR", color : -10263609, default_value : arm_node_NodesBrush.f32([0.0,0.0,0.0])}], buttons : []};
	var tmp3 = [{ id : 0, node_id : 0, name : "Vector", type : "VECTOR", color : -10263609, default_value : arm_node_NodesBrush.f32([0.0,0.0,0.0])},{ id : 0, node_id : 0, name : "Vector", type : "VECTOR", color : -10263609, default_value : arm_node_NodesBrush.f32([0.0,0.0,0.0])}];
	$r = [[tmp,{ id : 0, name : "Input", type : "InputNode", x : 0, y : 0, color : -11959648, inputs : [{ id : 0, node_id : 0, name : "Lazy Radius", type : "VALUE", color : -6184543, default_value : 0.0},{ id : 0, node_id : 0, name : "Lazy Step", type : "VALUE", color : -6184543, default_value : 0.0}], outputs : [{ id : 0, node_id : 0, name : "Position", type : "VECTOR", color : -10238109, default_value : null}], buttons : []},{ id : 0, name : "Math", type : "MathNode", x : 0, y : 0, color : -11959648, inputs : [{ id : 0, node_id : 0, name : "Value", type : "VALUE", color : -6184543, default_value : 0.5},{ id : 0, node_id : 0, name : "Value", type : "VALUE", color : -6184543, default_value : 0.5}], outputs : [{ id : 0, node_id : 0, name : "Value", type : "VALUE", color : -6184543, default_value : 0.0}], buttons : [{ name : "operation", type : "ENUM", data : ["Add","Subtract","Multiply","Divide","Sine","Cosine","Tangent","Arcsine","Arccosine","Arctangent","Power","Logarithm","Minimum","Maximum","Round","Less Than","Greater Than","Module","Absolute"], default_value : 0, output : 0},{ name : "use_clamp", type : "BOOL", default_value : false, output : 0}]},{ id : 0, name : "Random", type : "RandomNode", x : 0, y : 0, color : -5025958, inputs : [{ id : 0, node_id : 0, name : "Min", type : "VALUE", color : -6184543, default_value : 0.0},{ id : 0, node_id : 0, name : "Max", type : "VALUE", color : -6184543, default_value : 1.0}], outputs : [{ id : 0, node_id : 0, name : "Value", type : "VALUE", color : -6184543, default_value : 0.5}], buttons : []},tmp1,{ id : 0, name : "Time", type : "TimeNode", x : 0, y : 0, color : -11959648, inputs : [], outputs : [{ id : 0, node_id : 0, name : "Time", type : "VALUE", color : -6184543, default_value : 0.0},{ id : 0, node_id : 0, name : "Delta", type : "VALUE", color : -6184543, default_value : 0.0},{ id : 0, node_id : 0, name : "Brush", type : "VALUE", color : -6184543, default_value : 0.0}], buttons : []},{ id : 0, name : "Value", type : "FloatNode", x : 0, y : 0, color : -5025958, inputs : [{ id : 0, node_id : 0, name : "Value", type : "VALUE", color : -6184543, default_value : 0.5, min : 0.0, max : 10.0}], outputs : [{ id : 0, node_id : 0, name : "Value", type : "VALUE", color : -6184543, default_value : 0.5}], buttons : []},tmp2,{ id : 0, name : "Vector Math", type : "VectorMathNode", x : 0, y : 0, color : -11959648, inputs : tmp3, outputs : [{ id : 0, node_id : 0, name : "Vector", type : "VECTOR", color : -10263609, default_value : arm_node_NodesBrush.f32([0.0,0.0,0.0])},{ id : 0, node_id : 0, name : "Value", type : "VALUE", color : -6184543, default_value : 0.0}], buttons : [{ name : "operation", type : "ENUM", data : ["Add","Subtract","Average","Dot Product","Cross Product","Normalize"], default_value : 0, output : 0}]}]];
	return $r;
}(this));
arm_shader_NodesMaterial.categories = ["Input","Texture","Color","Vector","Converter"];
arm_shader_NodesMaterial.list = (function($this) {
	var $r;
	var tmp = { id : 0, name : "Attribute", type : "ATTRIBUTE", x : 0, y : 0, color : -5025958, inputs : [], outputs : [{ id : 0, node_id : 0, name : "Color", type : "RGBA", color : -3684567, default_value : arm_shader_NodesMaterial.f32([0.8,0.8,0.8,1.0])},{ id : 0, node_id : 0, name : "Vector", type : "VECTOR", color : -10263609, default_value : arm_shader_NodesMaterial.f32([0.0,0.0,0.0])},{ id : 0, node_id : 0, name : "Fac", type : "VALUE", color : -6184543, default_value : 0.0}], buttons : [{ name : "Name", type : "STRING"}]};
	var tmp1 = { id : 0, name : "Camera Data", type : "CAMERA", x : 0, y : 0, color : -5025958, inputs : [], outputs : [{ id : 0, node_id : 0, name : "View Vector", type : "VECTOR", color : -10263609, default_value : arm_shader_NodesMaterial.f32([0.0,0.0,0.0])},{ id : 0, node_id : 0, name : "View Z Depth", type : "VALUE", color : -6184543, default_value : 0.0},{ id : 0, node_id : 0, name : "View Distance", type : "VALUE", color : -6184543, default_value : 0.0}], buttons : []};
	var tmp2 = { id : 0, name : "Fresnel", type : "FRESNEL", x : 0, y : 0, color : -5025958, inputs : [{ id : 0, node_id : 0, name : "IOR", type : "VALUE", color : -6184543, default_value : 1.45, min : 0, max : 3},{ id : 0, node_id : 0, name : "Normal", type : "VECTOR", color : -10263609, default_value : arm_shader_NodesMaterial.f32([0.0,0.0,0.0])}], outputs : [{ id : 0, node_id : 0, name : "Fac", type : "VALUE", color : -6184543, default_value : 0.0}], buttons : []};
	var tmp3 = { id : 0, name : "Geometry", type : "NEW_GEOMETRY", x : 0, y : 0, color : -5025958, inputs : [], outputs : [{ id : 0, node_id : 0, name : "Position", type : "VECTOR", color : -10263609, default_value : arm_shader_NodesMaterial.f32([0.0,0.0,0.0])},{ id : 0, node_id : 0, name : "Normal", type : "VECTOR", color : -10263609, default_value : arm_shader_NodesMaterial.f32([0.0,0.0,0.0])},{ id : 0, node_id : 0, name : "Tangent", type : "VECTOR", color : -10263609, default_value : arm_shader_NodesMaterial.f32([0.0,0.0,0.0])},{ id : 0, node_id : 0, name : "True Normal", type : "VECTOR", color : -10263609, default_value : arm_shader_NodesMaterial.f32([0.0,0.0,0.0])},{ id : 0, node_id : 0, name : "Incoming", type : "VECTOR", color : -10263609, default_value : arm_shader_NodesMaterial.f32([0.0,0.0,0.0])},{ id : 0, node_id : 0, name : "Parametric", type : "VECTOR", color : -10263609, default_value : arm_shader_NodesMaterial.f32([0.0,0.0,0.0])},{ id : 0, node_id : 0, name : "Backfacing", type : "VALUE", color : -6184543, default_value : 0.0},{ id : 0, node_id : 0, name : "Pointiness", type : "VALUE", color : -6184543, default_value : 0.0}], buttons : []};
	var tmp4 = { id : 0, name : "Layer", type : "LAYER", x : 0, y : 0, color : -11959648, inputs : [], outputs : [{ id : 0, node_id : 0, name : "Base Color", type : "RGBA", color : -3684567, default_value : arm_shader_NodesMaterial.f32([0.0,0.0,0.0,1.0])},{ id : 0, node_id : 0, name : "Opacity", type : "VALUE", color : -6184543, default_value : 1.0},{ id : 0, node_id : 0, name : "Occlusion", type : "VALUE", color : -6184543, default_value : 1.0},{ id : 0, node_id : 0, name : "Roughness", type : "VALUE", color : -6184543, default_value : 1.0},{ id : 0, node_id : 0, name : "Metallic", type : "VALUE", color : -6184543, default_value : 1.0},{ id : 0, node_id : 0, name : "Normal Map", type : "VECTOR", color : -10238109, default_value : arm_shader_NodesMaterial.f32([0.5,0.5,1.0])},{ id : 0, node_id : 0, name : "Emission", type : "VALUE", color : -6184543, default_value : 1.0},{ id : 0, node_id : 0, name : "Height", type : "VALUE", color : -6184543, default_value : 1.0},{ id : 0, node_id : 0, name : "Subsurface", type : "VALUE", color : -6184543, default_value : 1.0}], buttons : [{ name : "Layer", type : "ENUM", default_value : 0, data : ""}]};
	var tmp5 = { id : 0, name : "Layer Weight", type : "LAYER_WEIGHT", x : 0, y : 0, color : -5025958, inputs : [{ id : 0, node_id : 0, name : "Blend", type : "VALUE", color : -6184543, default_value : 0.5},{ id : 0, node_id : 0, name : "Normal", type : "VECTOR", color : -10263609, default_value : arm_shader_NodesMaterial.f32([0.0,0.0,0.0])}], outputs : [{ id : 0, node_id : 0, name : "Fresnel", type : "VALUE", color : -6184543, default_value : 0.0},{ id : 0, node_id : 0, name : "Facing", type : "VALUE", color : -6184543, default_value : 0.0}], buttons : []};
	var tmp6 = { id : 0, name : "Material", type : "MATERIAL", x : 0, y : 0, color : -11959648, inputs : [], outputs : [{ id : 0, node_id : 0, name : "Base Color", type : "RGBA", color : -3684567, default_value : arm_shader_NodesMaterial.f32([0.0,0.0,0.0,1.0])},{ id : 0, node_id : 0, name : "Opacity", type : "VALUE", color : -6184543, default_value : 1.0},{ id : 0, node_id : 0, name : "Occlusion", type : "VALUE", color : -6184543, default_value : 1.0},{ id : 0, node_id : 0, name : "Roughness", type : "VALUE", color : -6184543, default_value : 1.0},{ id : 0, node_id : 0, name : "Metallic", type : "VALUE", color : -6184543, default_value : 1.0},{ id : 0, node_id : 0, name : "Normal Map", type : "VECTOR", color : -10238109, default_value : arm_shader_NodesMaterial.f32([0.5,0.5,1.0])},{ id : 0, node_id : 0, name : "Emission", type : "VALUE", color : -6184543, default_value : 1.0},{ id : 0, node_id : 0, name : "Height", type : "VALUE", color : -6184543, default_value : 1.0},{ id : 0, node_id : 0, name : "Subsurface", type : "VALUE", color : -6184543, default_value : 1.0}], buttons : [{ name : "Material", type : "ENUM", default_value : 0, data : ""}]};
	var tmp7 = { id : 0, name : "Object Info", type : "OBJECT_INFO", x : 0, y : 0, color : -5025958, inputs : [], outputs : [{ id : 0, node_id : 0, name : "Location", type : "VECTOR", color : -10263609, default_value : arm_shader_NodesMaterial.f32([0.0,0.0,0.0])},{ id : 0, node_id : 0, name : "Object Index", type : "VALUE", color : -6184543, default_value : 0.0},{ id : 0, node_id : 0, name : "Material Index", type : "VALUE", color : -6184543, default_value : 0.0},{ id : 0, node_id : 0, name : "Random", type : "VALUE", color : -6184543, default_value : 0.0}], buttons : []};
	var tmp8 = { id : 0, name : "RGB", type : "RGB", x : 0, y : 0, color : -5025958, inputs : [], outputs : [{ id : 0, node_id : 0, name : "Color", type : "RGBA", color : -3684567, default_value : arm_shader_NodesMaterial.f32([0.5,0.5,0.5,1.0])}], buttons : [{ name : "default_value", type : "RGBA", output : 0}]};
	var tmp9 = { id : 0, name : "Tangent", type : "TANGENT", x : 0, y : 0, color : -5025958, inputs : [], outputs : [{ id : 0, node_id : 0, name : "Tangent", type : "VECTOR", color : -10263609, default_value : arm_shader_NodesMaterial.f32([0.0,0.0,0.0])}], buttons : []};
	var tmp10 = { id : 0, name : "Texture Coord", type : "TEX_COORD", x : 0, y : 0, color : -5025958, inputs : [], outputs : [{ id : 0, node_id : 0, name : "Generated", type : "VECTOR", color : -10263609, default_value : arm_shader_NodesMaterial.f32([0.0,0.0,0.0])},{ id : 0, node_id : 0, name : "Normal", type : "VECTOR", color : -10263609, default_value : arm_shader_NodesMaterial.f32([0.0,0.0,0.0])},{ id : 0, node_id : 0, name : "UV", type : "VECTOR", color : -10263609, default_value : arm_shader_NodesMaterial.f32([0.0,0.0,0.0])},{ id : 0, node_id : 0, name : "Object", type : "VECTOR", color : -10263609, default_value : arm_shader_NodesMaterial.f32([0.0,0.0,0.0])},{ id : 0, node_id : 0, name : "Camera", type : "VECTOR", color : -10263609, default_value : arm_shader_NodesMaterial.f32([0.0,0.0,0.0])},{ id : 0, node_id : 0, name : "Window", type : "VECTOR", color : -10263609, default_value : arm_shader_NodesMaterial.f32([0.0,0.0,0.0])},{ id : 0, node_id : 0, name : "Reflection", type : "VECTOR", color : -10263609, default_value : arm_shader_NodesMaterial.f32([0.0,0.0,0.0])}], buttons : []};
	var tmp11 = [tmp,tmp1,tmp2,tmp3,tmp4,{ id : 0, name : "Layer Mask", type : "LAYER_MASK", x : 0, y : 0, color : -11959648, inputs : [], outputs : [{ id : 0, node_id : 0, name : "Value", type : "VALUE", color : -6184543, default_value : 0.0}], buttons : [{ name : "Layer", type : "ENUM", default_value : 0, data : ""}]},tmp5,tmp6,tmp7,tmp8,{ id : 0, name : "Script", type : "SCRIPT_CPU", x : 0, y : 0, color : -5025958, inputs : [], outputs : [{ id : 0, node_id : 0, name : "Value", type : "VALUE", color : -6184543, default_value : 0.5}], buttons : [{ name : " ", type : "STRING", default_value : ""}]},{ id : 0, name : "Shader", type : "SHADER_GPU", x : 0, y : 0, color : -5025958, inputs : [], outputs : [{ id : 0, node_id : 0, name : "Value", type : "VALUE", color : -6184543, default_value : 0.5}], buttons : [{ name : " ", type : "STRING", default_value : ""}]},tmp9,tmp10,{ id : 0, name : "UV Map", type : "UVMAP", x : 0, y : 0, color : -5025958, inputs : [], outputs : [{ id : 0, node_id : 0, name : "UV", type : "VECTOR", color : -10263609, default_value : arm_shader_NodesMaterial.f32([0.0,0.0,0.0])}], buttons : []},{ id : 0, name : "Value", type : "VALUE", x : 0, y : 0, color : -5025958, inputs : [], outputs : [{ id : 0, node_id : 0, name : "Value", type : "VALUE", color : -6184543, default_value : 0.5}], buttons : [{ name : "default_value", type : "VALUE", output : 0, min : 0.0, max : 10.0}]}];
	var tmp = [{ id : 0, name : "Brick Texture", type : "TEX_BRICK", x : 0, y : 0, color : -11959648, inputs : [{ id : 0, node_id : 0, name : "Vector", type : "VECTOR", color : -10263609, default_value : arm_shader_NodesMaterial.f32([0.0,0.0,0.0])},{ id : 0, node_id : 0, name : "Color 1", type : "RGBA", color : -3684567, default_value : arm_shader_NodesMaterial.f32([0.8,0.8,0.8])},{ id : 0, node_id : 0, name : "Color 2", type : "RGBA", color : -3684567, default_value : arm_shader_NodesMaterial.f32([0.2,0.2,0.2])},{ id : 0, node_id : 0, name : "Color 3", type : "RGBA", color : -3684567, default_value : arm_shader_NodesMaterial.f32([0.0,0.0,0.0])},{ id : 0, node_id : 0, name : "Scale", type : "VALUE", color : -6184543, default_value : 5.0, min : 0.0, max : 10.0}], outputs : [{ id : 0, node_id : 0, name : "Color", type : "RGBA", color : -3684567, default_value : arm_shader_NodesMaterial.f32([0.8,0.8,0.8,1.0])},{ id : 0, node_id : 0, name : "Fac", type : "VALUE", color : -6184543, default_value : 1.0}], buttons : []},{ id : 0, name : "Checker Texture", type : "TEX_CHECKER", x : 0, y : 0, color : -11959648, inputs : [{ id : 0, node_id : 0, name : "Vector", type : "VECTOR", color : -10263609, default_value : arm_shader_NodesMaterial.f32([0.0,0.0,0.0])},{ id : 0, node_id : 0, name : "Color 1", type : "RGBA", color : -3684567, default_value : arm_shader_NodesMaterial.f32([0.8,0.8,0.8])},{ id : 0, node_id : 0, name : "Color 2", type : "RGBA", color : -3684567, default_value : arm_shader_NodesMaterial.f32([0.2,0.2,0.2])},{ id : 0, node_id : 0, name : "Scale", type : "VALUE", color : -6184543, default_value : 5.0, min : 0.0, max : 10.0}], outputs : [{ id : 0, node_id : 0, name : "Color", type : "RGBA", color : -3684567, default_value : arm_shader_NodesMaterial.f32([0.8,0.8,0.8,1.0])},{ id : 0, node_id : 0, name : "Fac", type : "VALUE", color : -6184543, default_value : 1.0}], buttons : []},{ id : 0, name : "Gradient Texture", type : "TEX_GRADIENT", x : 0, y : 0, color : -11959648, inputs : [{ id : 0, node_id : 0, name : "Vector", type : "VECTOR", color : -10263609, default_value : arm_shader_NodesMaterial.f32([0.0,0.0,0.0])}], outputs : [{ id : 0, node_id : 0, name : "Color", type : "RGBA", color : -3684567, default_value : arm_shader_NodesMaterial.f32([0.8,0.8,0.8,1.0])},{ id : 0, node_id : 0, name : "Fac", type : "VALUE", color : -6184543, default_value : 1.0}], buttons : [{ name : "gradient_type", type : "ENUM", data : ["Linear","Diagonal","Radial","Spherical"], default_value : 0, output : 0}]},{ id : 0, name : "Image Texture", type : "TEX_IMAGE", x : 0, y : 0, color : -11959648, inputs : [{ id : 0, node_id : 0, name : "Vector", type : "VECTOR", color : -10263609, default_value : arm_shader_NodesMaterial.f32([0.0,0.0,0.0])}], outputs : [{ id : 0, node_id : 0, name : "Color", type : "RGBA", color : -3684567, default_value : arm_shader_NodesMaterial.f32([0.0,0.0,0.0,1.0])},{ id : 0, node_id : 0, name : "Alpha", type : "VALUE", color : -6184543, default_value : 1.0}], buttons : [{ name : "File", type : "ENUM", default_value : 0, data : ""},{ name : "Color Space", type : "ENUM", default_value : 0, data : ["linear","srgb"]}]},{ id : 0, name : "Magic Texture", type : "TEX_MAGIC", x : 0, y : 0, color : -11959648, inputs : [{ id : 0, node_id : 0, name : "Vector", type : "VECTOR", color : -10263609, default_value : arm_shader_NodesMaterial.f32([0.0,0.0,0.0])},{ id : 0, node_id : 0, name : "Scale", type : "VALUE", color : -6184543, default_value : 5.0, min : 0.0, max : 10.0}], outputs : [{ id : 0, node_id : 0, name : "Color", type : "RGBA", color : -3684567, default_value : arm_shader_NodesMaterial.f32([0.8,0.8,0.8,1.0])},{ id : 0, node_id : 0, name : "Fac", type : "VALUE", color : -6184543, default_value : 1.0}], buttons : []},{ id : 0, name : "Musgrave Texture", type : "TEX_MUSGRAVE", x : 0, y : 0, color : -11959648, inputs : [{ id : 0, node_id : 0, name : "Vector", type : "VECTOR", color : -10263609, default_value : arm_shader_NodesMaterial.f32([0.0,0.0,0.0])},{ id : 0, node_id : 0, name : "Scale", type : "VALUE", color : -6184543, default_value : 5.0, min : 0.0, max : 10.0}], outputs : [{ id : 0, node_id : 0, name : "Color", type : "RGBA", color : -3684567, default_value : arm_shader_NodesMaterial.f32([0.8,0.8,0.8,1.0])},{ id : 0, node_id : 0, name : "Fac", type : "VALUE", color : -6184543, default_value : 1.0}], buttons : []},{ id : 0, name : "Noise Texture", type : "TEX_NOISE", x : 0, y : 0, color : -11959648, inputs : [{ id : 0, node_id : 0, name : "Vector", type : "VECTOR", color : -10263609, default_value : arm_shader_NodesMaterial.f32([0.0,0.0,0.0])},{ id : 0, node_id : 0, name : "Scale", type : "VALUE", color : -6184543, default_value : 5.0, min : 0.0, max : 10.0}], outputs : [{ id : 0, node_id : 0, name : "Color", type : "RGBA", color : -3684567, default_value : arm_shader_NodesMaterial.f32([0.8,0.8,0.8,1.0])},{ id : 0, node_id : 0, name : "Fac", type : "VALUE", color : -6184543, default_value : 1.0}], buttons : []},{ id : 0, name : "Voronoi Texture", type : "TEX_VORONOI", x : 0, y : 0, color : -11959648, inputs : [{ id : 0, node_id : 0, name : "Vector", type : "VECTOR", color : -10263609, default_value : arm_shader_NodesMaterial.f32([0.0,0.0,0.0])},{ id : 0, node_id : 0, name : "Scale", type : "VALUE", color : -6184543, default_value : 5.0, min : 0.0, max : 10.0}], outputs : [{ id : 0, node_id : 0, name : "Color", type : "RGBA", color : -3684567, default_value : arm_shader_NodesMaterial.f32([0.8,0.8,0.8,1.0])},{ id : 0, node_id : 0, name : "Fac", type : "VALUE", color : -6184543, default_value : 1.0}], buttons : [{ name : "coloring", type : "ENUM", data : ["Intensity","Cells"], default_value : 0, output : 0}]},{ id : 0, name : "Wave Texture", type : "TEX_WAVE", x : 0, y : 0, color : -11959648, inputs : [{ id : 0, node_id : 0, name : "Vector", type : "VECTOR", color : -10263609, default_value : arm_shader_NodesMaterial.f32([0.0,0.0,0.0])},{ id : 0, node_id : 0, name : "Scale", type : "VALUE", color : -6184543, default_value : 5.0, min : 0.0, max : 10.0}], outputs : [{ id : 0, node_id : 0, name : "Color", type : "RGBA", color : -3684567, default_value : arm_shader_NodesMaterial.f32([0.8,0.8,0.8,1.0])},{ id : 0, node_id : 0, name : "Fac", type : "VALUE", color : -6184543, default_value : 1.0}], buttons : []}];
	var tmp1 = { id : 0, name : "Warp", type : "DIRECT_WARP", x : 0, y : 0, color : -12284819, inputs : [{ id : 0, node_id : 0, name : "Color", type : "RGBA", color : -3684567, default_value : arm_shader_NodesMaterial.f32([0.8,0.8,0.8,1.0])},{ id : 0, node_id : 0, name : "Angle", type : "VALUE", color : -6184543, default_value : 0.0, min : 0.0, max : 360.0},{ id : 0, node_id : 0, name : "Mask", type : "VALUE", color : -6184543, default_value : 0.5, min : 0.0, max : 1.0}], outputs : [{ id : 0, node_id : 0, name : "Color", type : "RGBA", color : -3684567, default_value : arm_shader_NodesMaterial.f32([0.8,0.8,0.8,1.0])}], buttons : []};
	var tmp2 = { id : 0, name : "Blur", type : "BLUR", x : 0, y : 0, color : -12284819, inputs : [{ id : 0, node_id : 0, name : "Color", type : "RGBA", color : -3684567, default_value : arm_shader_NodesMaterial.f32([0.8,0.8,0.8,1.0])},{ id : 0, node_id : 0, name : "Strength", type : "VALUE", color : -6184543, default_value : 0.5}], outputs : [{ id : 0, node_id : 0, name : "Color", type : "RGBA", color : -3684567, default_value : arm_shader_NodesMaterial.f32([0.8,0.8,0.8,1.0])}], buttons : []};
	var tmp3 = { id : 0, name : "BrightContrast", type : "BRIGHTCONTRAST", x : 0, y : 0, color : -12284819, inputs : [{ id : 0, node_id : 0, name : "Color", type : "RGBA", color : -3684567, default_value : arm_shader_NodesMaterial.f32([0.8,0.8,0.8,1.0])},{ id : 0, node_id : 0, name : "Bright", type : "VALUE", color : -6184543, default_value : 0.0},{ id : 0, node_id : 0, name : "Contrast", type : "VALUE", color : -6184543, default_value : 0.0}], outputs : [{ id : 0, node_id : 0, name : "Color", type : "RGBA", color : -3684567, default_value : arm_shader_NodesMaterial.f32([0.8,0.8,0.8,1.0])}], buttons : []};
	var tmp4 = { id : 0, name : "Gamma", type : "GAMMA", x : 0, y : 0, color : -12284819, inputs : [{ id : 0, node_id : 0, name : "Color", type : "RGBA", color : -3684567, default_value : arm_shader_NodesMaterial.f32([0.8,0.8,0.8,1.0])},{ id : 0, node_id : 0, name : "Gamma", type : "VALUE", color : -6184543, default_value : 1.0}], outputs : [{ id : 0, node_id : 0, name : "Color", type : "RGBA", color : -3684567, default_value : arm_shader_NodesMaterial.f32([0.8,0.8,0.8,1.0])}], buttons : []};
	var tmp5 = { id : 0, name : "HueSatVal", type : "HUE_SAT", x : 0, y : 0, color : -12284819, inputs : [{ id : 0, node_id : 0, name : "Hue", type : "VALUE", color : -6184543, default_value : 0.5},{ id : 0, node_id : 0, name : "Sat", type : "VALUE", color : -6184543, default_value : 1.0},{ id : 0, node_id : 0, name : "Val", type : "VALUE", color : -6184543, default_value : 1.0},{ id : 0, node_id : 0, name : "Fac", type : "VALUE", color : -6184543, default_value : 1.0},{ id : 0, node_id : 0, name : "Color", type : "RGBA", color : -3684567, default_value : arm_shader_NodesMaterial.f32([0.8,0.8,0.8,1.0])}], outputs : [{ id : 0, node_id : 0, name : "Color", type : "RGBA", color : -3684567, default_value : arm_shader_NodesMaterial.f32([0.8,0.8,0.8,1.0])}], buttons : []};
	var tmp6 = { id : 0, name : "Invert", type : "INVERT", x : 0, y : 0, color : -12284819, inputs : [{ id : 0, node_id : 0, name : "Fac", type : "VALUE", color : -6184543, default_value : 1.0},{ id : 0, node_id : 0, name : "Color", type : "RGBA", color : -3684567, default_value : arm_shader_NodesMaterial.f32([0.8,0.8,0.8,1.0])}], outputs : [{ id : 0, node_id : 0, name : "Color", type : "RGBA", color : -3684567, default_value : arm_shader_NodesMaterial.f32([0.8,0.8,0.8,1.0])}], buttons : []};
	var tmp7 = { id : 0, node_id : 0, name : "Color1", type : "RGBA", color : -3684567, default_value : arm_shader_NodesMaterial.f32([0.5,0.5,0.5,1.0])};
	var tmp8 = [tmp1,tmp2,tmp3,tmp4,tmp5,tmp6,{ id : 0, name : "MixRGB", type : "MIX_RGB", x : 0, y : 0, color : -12284819, inputs : [{ id : 0, node_id : 0, name : "Fac", type : "VALUE", color : -6184543, default_value : 0.5},tmp7,{ id : 0, node_id : 0, name : "Color2", type : "RGBA", color : -3684567, default_value : arm_shader_NodesMaterial.f32([0.5,0.5,0.5,1.0])}], outputs : [{ id : 0, node_id : 0, name : "Color", type : "RGBA", color : -3684567, default_value : arm_shader_NodesMaterial.f32([0.8,0.8,0.8,1.0])}], buttons : [{ name : "blend_type", type : "ENUM", data : ["Mix","Darken","Multiply","Burn","Lighten","Screen","Dodge","Add","Overlay","Soft Light","Linear Light","Difference","Subtract","Divide","Hue","Saturation","Color","Value"], default_value : 0, output : 0},{ name : "use_clamp", type : "BOOL", default_value : false, output : 0}]}];
	var tmp1 = [{ id : 0, name : "Bump", type : "BUMP", x : 0, y : 0, color : -11391847, inputs : [{ id : 0, node_id : 0, name : "Strength", type : "VALUE", color : -6184543, default_value : 1.0},{ id : 0, node_id : 0, name : "Distance", type : "VALUE", color : -6184543, default_value : 0.0},{ id : 0, node_id : 0, name : "Height", type : "VALUE", color : -6184543, default_value : 1.0},{ id : 0, node_id : 0, name : "Normal", type : "VECTOR", color : -10263609, default_value : arm_shader_NodesMaterial.f32([0.0,0.0,0.0])}], outputs : [{ id : 0, node_id : 0, name : "Normal Map", type : "VECTOR", color : -10238109, default_value : arm_shader_NodesMaterial.f32([0.0,0.0,0.0])}], buttons : []},{ id : 0, name : "Mapping", type : "MAPPING", x : 0, y : 0, color : -11391847, inputs : [{ id : 0, node_id : 0, name : "Vector", type : "VECTOR", color : -10263609, default_value : arm_shader_NodesMaterial.f32([0.0,0.0,0.0])}], outputs : [{ id : 0, node_id : 0, name : "Vector", type : "VECTOR", color : -10263609, default_value : arm_shader_NodesMaterial.f32([0.0,0.0,0.0])}], buttons : [{ name : "Location", type : "VECTOR", default_value : arm_shader_NodesMaterial.f32([0.0,0.0,0.0]), output : 0},{ name : "Rotation", type : "VECTOR", default_value : arm_shader_NodesMaterial.f32([0.0,0.0,0.0]), output : 0, max : 360.0},{ name : "Scale", type : "VECTOR", default_value : arm_shader_NodesMaterial.f32([1.0,1.0,1.0]), output : 0}]},{ id : 0, name : "Normal", type : "NORMAL", x : 0, y : 0, color : -11391847, inputs : [{ id : 0, node_id : 0, name : "Normal", type : "VECTOR", color : -10263609, default_value : arm_shader_NodesMaterial.f32([0.0,0.0,0.0])}], outputs : [{ id : 0, node_id : 0, name : "Normal", type : "VECTOR", color : -10263609, default_value : arm_shader_NodesMaterial.f32([0.0,0.0,0.0])},{ id : 0, node_id : 0, name : "Dot", type : "VALUE", color : -6184543, default_value : 1.0}], buttons : [{ name : "Vector", type : "VECTOR", default_value : arm_shader_NodesMaterial.f32([0.0,0.0,0.0]), output : 0}]},{ id : 0, name : "Vector Curves", type : "CURVE_VEC", x : 0, y : 0, color : -11391847, inputs : [{ id : 0, node_id : 0, name : "Fac", type : "VALUE", color : -6184543, default_value : 1.0},{ id : 0, node_id : 0, name : "Vector", type : "VECTOR", color : -10263609, default_value : arm_shader_NodesMaterial.f32([0.0,0.0,0.0])}], outputs : [{ id : 0, node_id : 0, name : "Vector", type : "VECTOR", color : -10263609, default_value : arm_shader_NodesMaterial.f32([0.0,0.0,0.0])}], buttons : [{ name : "Vector", type : "CURVES", default_value : [[arm_shader_NodesMaterial.f32([0.0,0.0]),arm_shader_NodesMaterial.f32([0.0,0.0])],[arm_shader_NodesMaterial.f32([0.0,0.0]),arm_shader_NodesMaterial.f32([0.0,0.0])],[arm_shader_NodesMaterial.f32([0.0,0.0]),arm_shader_NodesMaterial.f32([0.0,0.0])]], output : 0}]}];
	var tmp2 = [{ id : 0, node_id : 0, name : "Color", type : "RGBA", color : -3684567, default_value : arm_shader_NodesMaterial.f32([0.0,0.0,0.0,1.0])},{ id : 0, node_id : 0, name : "Alpha", type : "VALUE", color : -6184543, default_value : 0.0}];
	var tmp3 = arm_shader_NodesMaterial.f32([1.0,1.0,1.0,1.0,0.0]);
	var tmp4 = { id : 0, name : "Combine HSV", type : "COMBHSV", x : 0, y : 0, color : -10328211, inputs : [{ id : 0, node_id : 0, name : "H", type : "VALUE", color : -6184543, default_value : 0.0},{ id : 0, node_id : 0, name : "S", type : "VALUE", color : -6184543, default_value : 0.0},{ id : 0, node_id : 0, name : "V", type : "VALUE", color : -6184543, default_value : 0.0}], outputs : [{ id : 0, node_id : 0, name : "Color", type : "RGBA", color : -3684567, default_value : arm_shader_NodesMaterial.f32([0.8,0.8,0.8,1.0])}], buttons : []};
	var tmp5 = { id : 0, name : "Combine RGB", type : "COMBRGB", x : 0, y : 0, color : -10328211, inputs : [{ id : 0, node_id : 0, name : "R", type : "VALUE", color : -6184543, default_value : 0.0},{ id : 0, node_id : 0, name : "G", type : "VALUE", color : -6184543, default_value : 0.0},{ id : 0, node_id : 0, name : "B", type : "VALUE", color : -6184543, default_value : 0.0}], outputs : [{ id : 0, node_id : 0, name : "Color", type : "RGBA", color : -3684567, default_value : arm_shader_NodesMaterial.f32([0.8,0.8,0.8,1.0])}], buttons : []};
	var tmp6 = { id : 0, name : "Combine XYZ", type : "COMBXYZ", x : 0, y : 0, color : -10328211, inputs : [{ id : 0, node_id : 0, name : "X", type : "VALUE", color : -6184543, default_value : 0.0},{ id : 0, node_id : 0, name : "Y", type : "VALUE", color : -6184543, default_value : 0.0},{ id : 0, node_id : 0, name : "Z", type : "VALUE", color : -6184543, default_value : 0.0}], outputs : [{ id : 0, node_id : 0, name : "Vector", type : "VECTOR", color : -10263609, default_value : arm_shader_NodesMaterial.f32([0.0,0.0,0.0])}], buttons : []};
	var tmp7 = { id : 0, name : "RGB to BW", type : "RGBTOBW", x : 0, y : 0, color : -10328211, inputs : [{ id : 0, node_id : 0, name : "Color", type : "RGBA", color : -3684567, default_value : arm_shader_NodesMaterial.f32([0.0,0.0,0.0,0.0])}], outputs : [{ id : 0, node_id : 0, name : "Val", type : "VALUE", color : -6184543, default_value : 0.0}], buttons : []};
	var tmp9 = { id : 0, name : "Separate HSV", type : "SEPHSV", x : 0, y : 0, color : -10328211, inputs : [{ id : 0, node_id : 0, name : "Color", type : "RGBA", color : -3684567, default_value : arm_shader_NodesMaterial.f32([0.5,0.5,0.5,1.0])}], outputs : [{ id : 0, node_id : 0, name : "H", type : "VALUE", color : -6184543, default_value : 0.0},{ id : 0, node_id : 0, name : "S", type : "VALUE", color : -6184543, default_value : 0.0},{ id : 0, node_id : 0, name : "V", type : "VALUE", color : -6184543, default_value : 0.0}], buttons : []};
	var tmp10 = { id : 0, name : "Separate RGB", type : "SEPRGB", x : 0, y : 0, color : -10328211, inputs : [{ id : 0, node_id : 0, name : "Color", type : "RGBA", color : -3684567, default_value : arm_shader_NodesMaterial.f32([0.8,0.8,0.8,1.0])}], outputs : [{ id : 0, node_id : 0, name : "R", type : "VALUE", color : -6184543, default_value : 0.0},{ id : 0, node_id : 0, name : "G", type : "VALUE", color : -6184543, default_value : 0.0},{ id : 0, node_id : 0, name : "B", type : "VALUE", color : -6184543, default_value : 0.0}], buttons : []};
	var tmp12 = { id : 0, name : "Separate XYZ", type : "SEPXYZ", x : 0, y : 0, color : -10328211, inputs : [{ id : 0, node_id : 0, name : "Vector", type : "VECTOR", color : -10263609, default_value : arm_shader_NodesMaterial.f32([0.0,0.0,0.0])}], outputs : [{ id : 0, node_id : 0, name : "X", type : "VALUE", color : -6184543, default_value : 0.0},{ id : 0, node_id : 0, name : "Y", type : "VALUE", color : -6184543, default_value : 0.0},{ id : 0, node_id : 0, name : "Z", type : "VALUE", color : -6184543, default_value : 0.0}], buttons : []};
	var tmp13 = [{ id : 0, node_id : 0, name : "Vector", type : "VECTOR", color : -10263609, default_value : arm_shader_NodesMaterial.f32([0.0,0.0,0.0])},{ id : 0, node_id : 0, name : "Vector", type : "VECTOR", color : -10263609, default_value : arm_shader_NodesMaterial.f32([0.0,0.0,0.0])}];
	$r = [tmp11,tmp,tmp8,tmp1,[{ id : 0, name : "Color Ramp", type : "VALTORGB", x : 0, y : 0, color : -10328211, inputs : [{ id : 0, node_id : 0, name : "Fac", type : "VALUE", color : -6184543, default_value : 0.5}], outputs : tmp2, buttons : [{ name : "Ramp", type : "RAMP", default_value : [tmp3], data : 0, output : 0}]},tmp4,tmp5,tmp6,{ id : 0, name : "Math", type : "MATH", x : 0, y : 0, color : -10328211, inputs : [{ id : 0, node_id : 0, name : "Value", type : "VALUE", color : -6184543, default_value : 0.5},{ id : 0, node_id : 0, name : "Value", type : "VALUE", color : -6184543, default_value : 0.5}], outputs : [{ id : 0, node_id : 0, name : "Value", type : "VALUE", color : -6184543, default_value : 0.0}], buttons : [{ name : "operation", type : "ENUM", data : ["Add","Subtract","Multiply","Divide","Power","Logarithm","Square Root","Absolute","Minimum","Maximum","Less Than","Greater Than","Round","Floor","Ceil","Fract","Modulo","Sine","Cosine","Tangent","Arcsine","Arccosine","Arctangent","Arctan2"], default_value : 0, output : 0},{ name : "use_clamp", type : "BOOL", default_value : false, output : 0}]},tmp7,tmp9,tmp10,tmp12,{ id : 0, name : "Vector Math", type : "VECT_MATH", x : 0, y : 0, color : -10328211, inputs : tmp13, outputs : [{ id : 0, node_id : 0, name : "Vector", type : "VECTOR", color : -10263609, default_value : arm_shader_NodesMaterial.f32([0.0,0.0,0.0])},{ id : 0, node_id : 0, name : "Value", type : "VALUE", color : -6184543, default_value : 0.0}], buttons : [{ name : "operation", type : "ENUM", data : ["Add","Subtract","Average","Dot Product","Cross Product","Normalize"], default_value : 0, output : 0}]}]];
	return $r;
}(this));
arm_sys_Path.sep = "\\";
arm_sys_Path.meshFormats = ["obj","fbx","blend"];
arm_sys_Path.textureFormats = ["jpg","jpeg","png","tga","bmp","psd","gif","hdr"];
arm_sys_Path.meshImporters = new haxe_ds_StringMap();
arm_sys_Path.textureImporters = new haxe_ds_StringMap();
arm_sys_Path.baseColorExt = ["albedo","alb","basecol","basecolor","diffuse","diff","base","bc","d","color","col"];
arm_sys_Path.opacityExt = ["opac","opacity","alpha"];
arm_sys_Path.normalMapExt = ["normal","nor","n","nrm"];
arm_sys_Path.occlusionExt = ["ao","occlusion","ambientOcclusion","o","occ"];
arm_sys_Path.roughnessExt = ["roughness","rough","r","rgh"];
arm_sys_Path.metallicExt = ["metallic","metal","metalness","m","met"];
arm_sys_Path.displacementExt = ["displacement","height","h","disp"];
arm_Project.filepath = "";
arm_Project.assets = [];
arm_Project.assetNames = [];
arm_Project.assetId = 0;
arm_Project.meshAssets = [];
arm_Project.assetMap = new haxe_ds_IntMap();
arm_Res.bundled = new haxe_ds_StringMap();
kha_Scheduler.DIF_COUNT = 3;
kha_Scheduler.maxframetime = 0.5;
kha_Scheduler.startTime = 0;
arm_ui_UIFiles.path = "C:\\Users";
arm_ui_UIFiles.lastPath = "";
arm_ui_UIFiles.selected = -1;
arm_ui_UIFiles.showExtensions = true;
arm_ui_UIMenu.show = false;
arm_ui_UIMenu.menuCategory = 0;
arm_ui_UIMenu.menuX = 0;
arm_ui_UIMenu.menuY = 0;
arm_ui_UIMenu.menuElements = 0;
arm_ui_UIMenu.keepOpen = false;
arm_ui_UIMenu.changeStarted = false;
arm_ui_UIMenu.showMenuFirst = true;
arm_ui_UIMenu.hideMenu = false;
arm_ui_UIMenu.askToResetLayout = false;
arm_util_UVUtil.uvmapCached = false;
arm_util_UVUtil.trianglemapCached = false;
arm_ArmBridge.Json = JSON;
arm_ArmBridge.ReflectFields = Reflect.fields;
arm_ArmBridge.ReflectField = Reflect.field;
arm_ArmBridge.ReflectSetField = Reflect.setField;
arm_ArmBridge.StdIs = Std.is;
arm_ArmBridge.Bytes = haxe_io_Bytes;
arm_ArmBridge.BytesInput = haxe_io_BytesInput;
arm_ArmBridge.Blob = kha_Blob;
arm_ArmBridge.Image = kha_Image;
arm_ArmBridge.Scheduler = kha_Scheduler;
arm_ArmBridge.App = arm_App;
arm_ArmBridge.Config = arm_Config;
arm_ArmBridge.Context = arm_Context;
arm_ArmBridge.History = arm_History;
arm_ArmBridge.Layers = arm_Layers;
arm_ArmBridge.Log = arm_Log;
arm_ArmBridge.Operator = arm_Operator;
arm_ArmBridge.Plugin = arm_Plugin;
arm_ArmBridge.Project = arm_Project;
arm_ArmBridge.Res = arm_Res;
arm_ArmBridge.Path = arm_sys_Path;
arm_ArmBridge.File = arm_sys_File;
arm_ArmBridge.NodesMaterial = arm_shader_NodesMaterial;
arm_ArmBridge.NodesBrush = arm_node_NodesBrush;
arm_ArmBridge.MaterialParser = arm_shader_MaterialParser;
arm_ArmBridge.MakeMaterial = arm_node_MakeMaterial;
arm_ArmBridge.Brush = arm_node_Brush;
arm_ArmBridge.UISidebar = arm_ui_UISidebar;
arm_ArmBridge.UINodes = arm_ui_UINodes;
arm_ArmBridge.UIFiles = arm_ui_UIFiles;
arm_ArmBridge.UIMenu = arm_ui_UIMenu;
arm_ArmBridge.MeshUtil = arm_util_MeshUtil;
arm_ArmBridge.MaterialUtil = arm_util_MaterialUtil;
arm_ArmBridge.RenderUtil = arm_util_RenderUtil;
arm_ArmBridge.UVUtil = arm_util_UVUtil;
arm_ArmBridge.ViewportUtil = arm_util_ViewportUtil;
zui_Ext._ELEMENT_OFFSET = 0;
zui_Ext._BUTTON_COL = 0;
zui_Ext.ar = [0.0,0.0,0.0];
arm_ZuiBridge.Handle = zui_Handle;
arm_ZuiBridge.Ext = zui_Ext;
arm_Strings.error1 = "Error: Unknown asset format";
arm_Strings.error2 = "Error: Could not locate texture ";
arm_Strings.error3 = "Error: Failed to read mesh data";
arm_Strings.error4 = "Error: Mesh has no UVs, generating defaults";
arm_Strings.error5 = "Error: .arm file expected";
arm_Strings.info0 = "Info: Asset already imported";
arm_Translator.translations = new haxe_ds_StringMap();
arm_Translator.cjkFontIndices = (function($this) {
	var $r;
	var _g = new haxe_ds_StringMap();
	_g.h["ja"] = 0;
	_g.h["ko"] = 1;
	_g.h["zh_cn"] = 2;
	_g.h["zh_tw"] = 3;
	_g.h["zh_tw.big5"] = 4;
	$r = _g;
	return $r;
}(this));
arm_Translator.lastLocale = "en";
arm_data_ConstData.font_x0 = [1,2,6,10,18,25,34,42,45,50,55,61,68,71,75,79,85,92,97,104,111,118,1,8,15,22,29,32,35,41,48,55,61,72,81,89,97,105,112,119,1,9,13,20,28,35,45,53,61,69,77,85,93,101,109,1,12,20,28,36,40,46,50,56,62,66,73,80,87,94,101,106,113,120,123,1,8,11,21,28,35,42,49,54,61,66,73,80,90,97,104,111,116,119,1];
arm_data_ConstData.font_y0 = [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,37,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,50,62];
arm_data_ConstData.font_x1 = [1,5,9,17,24,33,41,44,49,54,60,67,70,74,78,84,91,96,103,110,117,124,7,14,21,28,31,34,40,47,54,60,71,80,88,96,104,111,118,126,8,12,19,27,34,44,52,60,68,76,84,92,100,108,116,11,19,27,35,39,45,49,55,61,65,72,79,86,93,100,105,112,119,122,126,7,10,20,27,34,41,48,53,60,65,72,79,89,96,103,110,115,118,123,8];
arm_data_ConstData.font_y1 = [1,10,5,9,13,11,10,5,13,13,6,8,5,3,4,10,10,9,9,10,9,10,23,22,23,23,21,22,19,18,19,23,25,22,22,23,22,22,22,23,34,34,35,34,34,34,34,35,34,36,34,35,34,35,34,45,45,45,45,49,46,49,42,38,40,44,47,44,47,44,46,46,46,45,48,59,59,56,56,57,59,59,56,57,59,57,56,56,56,59,56,61,60,61,65];
arm_data_ConstData.font_xoff = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,-1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];
arm_data_ConstData.font_yoff = [10,2,1,2,0,1,2,1,1,1,2,3,8,6,8,2,2,2,2,2,2,2,2,2,2,2,4,4,4,4,4,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,0,2,0,2,10,1,4,1,4,1,4,1,4,1,2,2,1,1,4,4,4,4,4,4,4,2,4,4,4,4,4,4,1,2,1,5];
arm_data_ConstData.font_xadvance = [2.74625,2.85458,3.54791,6.83041,6.22916,8.125,6.89541,1.93375,3.79166,3.85666,4.7775,6.28875,2.1775,3.06041,2.91958,4.57166,6.22916,6.22916,6.22916,6.22916,6.22916,6.22916,6.22916,6.22916,6.22916,6.22916,2.68666,2.34541,5.63875,6.08833,5.79583,5.23791,9.96125,7.23666,6.90625,7.22041,7.27458,6.305,6.13166,7.55625,7.9083,3.01708,6.12083,6.955,5.96916,9.685,7.90833,7.62666,6.99833,7.62666,6.83041,6.58125,6.61916,7.19333,7.05791,9.84208,6.955,6.6625,6.64083,2.94125,4.55,2.94125,4.63666,5.005,3.42875,6.03416,6.22375,5.80666,6.25625,5.87708,3.85125,6.22375,6.11,2.69208,2.64875,5.6225,2.69208,9.72291,6.12083,6.32666,6.22375,6.305,3.75375,5.72,3.62375,6.11541,5.37333,8.33625,5.49791,5.24875,5.49791,3.75375,2.70291,3.75375,7.54541];
arm_format_FbxParser.parseTransform = false;
arm_format_FbxParser.parseVCols = false;
arm_format_ObjParser.splitCode = 111;
arm_format_ObjParser.vindOff = 0;
arm_format_ObjParser.tindOff = 0;
arm_format_ObjParser.nindOff = 0;
arm_io_ImportEnvmap.params = new iron_math_Vec4();
arm_io_ImportEnvmap.n = new iron_math_Vec4();
arm_io_ImportMesh.clearLayers = true;
arm_io_ImportMesh.replaceExisting = true;
arm_node_MakeMeshPreview.opacityDiscardDecal = 0.05;
arm_node_MakeMeshPreview.opacityDiscardScene = 0.5;
arm_node_brush_InputNode.coords = new iron_math_Vec4();
arm_node_brush_InputNode.startX = 0.0;
arm_node_brush_InputNode.startY = 0.0;
arm_node_brush_InputNode.lockBegin = false;
arm_node_brush_InputNode.lockX = false;
arm_node_brush_InputNode.lockY = false;
arm_node_brush_InputNode.lockStartX = 0.0;
arm_node_brush_InputNode.lockStartY = 0.0;
arm_node_brush_InputNode.registered = false;
arm_plugin_Gizmo.v = new iron_math_Vec4();
arm_render_Inc.superSample = 1.0;
arm_render_Inc.lastX = -1.0;
arm_render_Inc.lastY = -1.0;
arm_render_Inc.voxelsCreated = false;
arm_render_LineDraw.color = -65536;
arm_render_LineDraw.strength = 0.02;
arm_render_LineDraw.lines = 0;
arm_render_LineDraw.vx = new iron_math_Vec4();
arm_render_LineDraw.vy = new iron_math_Vec4();
arm_render_LineDraw.vz = new iron_math_Vec4();
arm_render_LineDraw.v1 = new iron_math_Vec4();
arm_render_LineDraw.v2 = new iron_math_Vec4();
arm_render_LineDraw.t = new iron_math_Vec4();
arm_render_LineDraw.midPoint = new iron_math_Vec4();
arm_render_LineDraw.midLine = new iron_math_Vec4();
arm_render_LineDraw.corner1 = new iron_math_Vec4();
arm_render_LineDraw.corner2 = new iron_math_Vec4();
arm_render_LineDraw.corner3 = new iron_math_Vec4();
arm_render_LineDraw.corner4 = new iron_math_Vec4();
arm_render_LineDraw.cameraLook = new iron_math_Vec4();
arm_render_RenderPathDeferred.voxels = "voxels";
arm_render_RenderPathDeferred.taaFrame = 0;
arm_render_RenderPathPaint.initVoxels = true;
arm_render_RenderPathPaint.mergedObjectVisible = false;
arm_render_RenderPathPaint.savedFov = 0.0;
arm_render_RenderPathPaint.dilated = true;
arm_render_RenderPathPaint.baking = false;
arm_render_RenderPathPaint.liveLayerDrawn = 0;
arm_render_RenderPathPaint.liveLayerLocked = false;
arm_render_Uniforms.vec = new iron_math_Vec4();
arm_shader_ShaderFunctions.str_tex_checker = "\r\nvec3 tex_checker(const vec3 co, const vec3 col1, const vec3 col2, const float scale) {\r\n\t// Prevent precision issues on unit coordinates\r\n\tvec3 p = (co + 0.000001 * 0.999999) * scale;\r\n\tfloat xi = abs(floor(p.x));\r\n\tfloat yi = abs(floor(p.y));\r\n\tfloat zi = abs(floor(p.z));\r\n\tbool check = ((mod(xi, 2.0) == mod(yi, 2.0)) == bool(mod(zi, 2.0)));\r\n\treturn check ? col1 : col2;\r\n}\r\nfloat tex_checker_f(const vec3 co, const float scale) {\r\n\tvec3 p = (co + 0.000001 * 0.999999) * scale;\r\n\tfloat xi = abs(floor(p.x));\r\n\tfloat yi = abs(floor(p.y));\r\n\tfloat zi = abs(floor(p.z));\r\n\treturn float((mod(xi, 2.0) == mod(yi, 2.0)) == bool(mod(zi, 2.0)));\r\n}\r\n";
arm_shader_ShaderFunctions.str_tex_voronoi = "\r\nvec4 tex_voronoi(const vec3 x, textureArg(snoise256)) {\r\n\tvec3 p = floor(x);\r\n\tvec3 f = fract(x);\r\n\tfloat id = 0.0;\r\n\tfloat res = 100.0;\r\n\tfor (int k = -1; k <= 1; k++)\r\n\tfor (int j = -1; j <= 1; j++)\r\n\tfor (int i = -1; i <= 1; i++) {\r\n\t\tvec3 b = vec3(float(i), float(j), float(k));\r\n\t\tvec3 pb = p + b;\r\n\t\tvec3 r = vec3(b) - f + texture(snoise256, (pb.xy + vec2(3.0, 1.0) * pb.z + 0.5) / 256.0).xyz;\r\n\t\tfloat d = dot(r, r);\r\n\t\tif (d < res) {\r\n\t\t\tid = dot(p + b, vec3(1.0, 57.0, 113.0));\r\n\t\t\tres = d;\r\n\t\t}\r\n\t}\r\n\tvec3 col = 0.5 + 0.5 * cos(id * 0.35 + vec3(0.0, 1.0, 2.0));\r\n\treturn vec4(col, sqrt(res));\r\n}\r\n";
arm_shader_ShaderFunctions.str_tex_noise = "\r\nfloat hash(float n) { return fract(sin(n) * 1e4); }\r\nfloat tex_noise_f(vec3 x) {\r\n    const vec3 step = vec3(110, 241, 171);\r\n    vec3 i = floor(x);\r\n    vec3 f = fract(x);\r\n    float n = dot(i, step);\r\n    vec3 u = f * f * (3.0 - 2.0 * f);\r\n    return mix(mix(mix(hash(n + dot(step, vec3(0, 0, 0))), hash(n + dot(step, vec3(1, 0, 0))), u.x),\r\n                   mix(hash(n + dot(step, vec3(0, 1, 0))), hash(n + dot(step, vec3(1, 1, 0))), u.x), u.y),\r\n               mix(mix(hash(n + dot(step, vec3(0, 0, 1))), hash(n + dot(step, vec3(1, 0, 1))), u.x),\r\n                   mix(hash(n + dot(step, vec3(0, 1, 1))), hash(n + dot(step, vec3(1, 1, 1))), u.x), u.y), u.z);\r\n}\r\nfloat tex_noise(vec3 p) {\r\n\tp *= 1.25;\r\n\tfloat f = 0.5 * tex_noise_f(p); p *= 2.01;\r\n\tf += 0.25 * tex_noise_f(p); p *= 2.02;\r\n\tf += 0.125 * tex_noise_f(p); p *= 2.03;\r\n\tf += 0.0625 * tex_noise_f(p);\r\n\treturn 1.0 - f;\r\n}\r\n";
arm_shader_ShaderFunctions.str_tex_musgrave = "\r\nvec3 random3(const vec3 c) {\r\n\tfloat j = 4096.0 * sin(dot(c, vec3(17.0, 59.4, 15.0)));\r\n\tvec3 r;\r\n\tr.z = fract(512.0 * j);\r\n\tj *= 0.125;\r\n\tr.x = fract(512.0 * j);\r\n\tj *= 0.125;\r\n\tr.y = fract(512.0 * j);\r\n\treturn r - 0.5;\r\n}\r\nfloat tex_musgrave_f(const vec3 p) {\r\n\tconst float F3 = 0.3333333;\r\n\tconst float G3 = 0.1666667;\r\n\tvec3 s = floor(p + dot(p, vec3(F3, F3, F3)));\r\n\tvec3 x = p - s + dot(s, vec3(G3, G3, G3));\r\n\tvec3 e = step(vec3(0.0, 0.0, 0.0), x - x.yzx);\r\n\tvec3 i1 = e*(1.0 - e.zxy);\r\n\tvec3 i2 = 1.0 - e.zxy*(1.0 - e);\r\n\tvec3 x1 = x - i1 + G3;\r\n\tvec3 x2 = x - i2 + 2.0*G3;\r\n\tvec3 x3 = x - 1.0 + 3.0*G3;\r\n\tvec4 w, d;\r\n\tw.x = dot(x, x);\r\n\tw.y = dot(x1, x1);\r\n\tw.z = dot(x2, x2);\r\n\tw.w = dot(x3, x3);\r\n\tw = max(0.6 - w, 0.0);\r\n\td.x = dot(random3(s), x);\r\n\td.y = dot(random3(s + i1), x1);\r\n\td.z = dot(random3(s + i2), x2);\r\n\td.w = dot(random3(s + 1.0), x3);\r\n\tw *= w;\r\n\tw *= w;\r\n\td *= w;\r\n\treturn clamp(dot(d, vec4(52.0, 52.0, 52.0, 52.0)), 0.0, 1.0);\r\n}\r\n";
arm_shader_ShaderFunctions.str_hue_sat = "\r\nvec3 hsv_to_rgb(const vec3 c) {\r\n\tconst vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\r\n\tvec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\r\n\treturn c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\r\n}\r\nvec3 rgb_to_hsv(const vec3 c) {\r\n\tconst vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\r\n\tvec4 p = mix(vec4(c.bg, K.wz), vec4(c.gb, K.xy), step(c.b, c.g));\r\n\tvec4 q = mix(vec4(p.xyw, c.r), vec4(c.r, p.yzx), step(p.x, c.r));\r\n\tfloat d = q.x - min(q.w, q.y);\r\n\tfloat e = 1.0e-10;\r\n\treturn vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);\r\n}\r\nvec3 hue_sat(const vec3 col, const vec4 shift) {\r\n\tvec3 hsv = rgb_to_hsv(col);\r\n\thsv.x += shift.x;\r\n\thsv.y *= shift.y;\r\n\thsv.z *= shift.z;\r\n\treturn mix(hsv_to_rgb(hsv), col, shift.w);\r\n}\r\n";
arm_shader_ShaderFunctions.str_wavelength_to_rgb = "\r\nvec3 wavelength_to_rgb(const float t) {\r\n\tvec3 r = t * 2.1 - vec3(1.8, 1.14, 0.3);\r\n\treturn 1.0 - r * r;\r\n}\r\n";
arm_shader_ShaderFunctions.str_tex_magic = "\r\nvec3 tex_magic(const vec3 p) {\r\n\tfloat a = 1.0 - (sin(p.x) + sin(p.y));\r\n\tfloat b = 1.0 - sin(p.x - p.y);\r\n\tfloat c = 1.0 - sin(p.x + p.y);\r\n\treturn vec3(a, b, c);\r\n}\r\nfloat tex_magic_f(const vec3 p) {\r\n\tvec3 c = tex_magic(p);\r\n\treturn (c.x + c.y + c.z) / 3.0;\r\n}\r\n";
arm_shader_ShaderFunctions.str_tex_brick = "\r\nvec3 tex_brick(vec3 p, const vec3 c1, const vec3 c2, const vec3 c3) {\r\n\tp /= vec3(0.9, 0.49, 0.49) / 2;\r\n\tif (fract(p.y * 0.5) > 0.5) p.x += 0.5;\r\n\tp = fract(p);\r\n\tvec3 b = step(p, vec3(0.95, 0.9, 0.9));\r\n\treturn mix(c3, c1, b.x * b.y * b.z);\r\n}\r\nfloat tex_brick_f(vec3 p) {\r\n\tp /= vec3(0.9, 0.49, 0.49) / 2;\r\n\tif (fract(p.y * 0.5) > 0.5) p.x += 0.5;\r\n\tp = fract(p);\r\n\tvec3 b = step(p, vec3(0.95, 0.9, 0.9));\r\n\treturn mix(1.0, 0.0, b.x * b.y * b.z);\r\n}\r\n";
arm_shader_ShaderFunctions.str_tex_wave = "\r\nfloat tex_wave_f(const vec3 p) {\r\n\treturn 1.0 - sin((p.x + p.y) * 10.0);\r\n}\r\n";
arm_shader_ShaderFunctions.str_brightcontrast = "\r\nvec3 brightcontrast(const vec3 col, const float bright, const float contr) {\r\n\tfloat a = 1.0 + contr;\r\n\tfloat b = bright - contr * 0.5;\r\n\treturn max(a * col + b, 0.0);\r\n}\r\n";
arm_shader_ShaderFunctions.str_traceAO = "\r\nfloat traceConeAO(sampler3D voxels, const vec3 origin, vec3 dir, const float aperture, const float maxDist, const float offset) {\r\n\tconst ivec3 voxelgiResolution = ivec3(" + 256 + ", " + 256 + ", " + 256 + ");\r\n\tconst float voxelgiStep = 1.0;\r\n\tconst float VOXEL_SIZE = (2.0 / voxelgiResolution.x) * voxelgiStep;\r\n\tdir = normalize(dir);\r\n\tfloat sampleCol = 0.0;\r\n\tfloat dist = offset;\r\n\tfloat diam = dist * aperture;\r\n\tvec3 samplePos;\r\n\twhile (sampleCol < 1.0 && dist < maxDist) {\r\n\t\tsamplePos = dir * dist + origin;\r\n\t\tfloat mip = max(log2(diam * voxelgiResolution.x), 0);\r\n\t\tfloat mipSample = textureLod(voxels, samplePos * 0.5 + vec3(0.5, 0.5, 0.5), mip).r;\r\n\t\tsampleCol += (1 - sampleCol) * mipSample;\r\n\t\tdist += max(diam / 2, VOXEL_SIZE);\r\n\t\tdiam = dist * aperture;\r\n\t}\r\n\treturn sampleCol;\r\n}\r\nvec3 tangent(const vec3 n) {\r\n\tvec3 t1 = cross(n, vec3(0, 0, 1));\r\n\tvec3 t2 = cross(n, vec3(0, 1, 0));\r\n\tif (length(t1) > length(t2)) return normalize(t1);\r\n\telse return normalize(t2);\r\n}\r\nfloat traceAO(const vec3 origin, const vec3 normal, const float vrange, const float voffset) {\r\n\tconst float angleMix = 0.5f;\r\n\tconst float aperture = 0.55785173935;\r\n\tvec3 o1 = normalize(tangent(normal));\r\n\tvec3 o2 = normalize(cross(o1, normal));\r\n\tvec3 c1 = 0.5f * (o1 + o2);\r\n\tvec3 c2 = 0.5f * (o1 - o2);\r\n\tfloat MAX_DISTANCE = 1.73205080757 * 2.0 * vrange;\r\n\tconst ivec3 voxelgiResolution = ivec3(" + 256 + ", " + 256 + ", " + 256 + ");\r\n\tconst float voxelgiStep = 1.0;\r\n\tconst float VOXEL_SIZE = (2.0 / voxelgiResolution.x) * voxelgiStep;\r\n\tfloat offset = 1.5 * VOXEL_SIZE * 2.5 * voffset;\r\n\tfloat col = traceConeAO(voxels, origin, normal, aperture, MAX_DISTANCE, offset);\r\n\tcol += traceConeAO(voxels, origin, mix(normal, o1, angleMix), aperture, MAX_DISTANCE, offset);\r\n\tcol += traceConeAO(voxels, origin, mix(normal, o2, angleMix), aperture, MAX_DISTANCE, offset);\r\n\tcol += traceConeAO(voxels, origin, mix(normal, -c1, angleMix), aperture, MAX_DISTANCE, offset);\r\n\tcol += traceConeAO(voxels, origin, mix(normal, -c2, angleMix), aperture, MAX_DISTANCE, offset);\r\n\tcol += traceConeAO(voxels, origin, mix(normal, -o1, angleMix), aperture, MAX_DISTANCE, offset);\r\n\tcol += traceConeAO(voxels, origin, mix(normal, -o2, angleMix), aperture, MAX_DISTANCE, offset);\r\n\tcol += traceConeAO(voxels, origin, mix(normal, c1, angleMix), aperture, MAX_DISTANCE, offset);\r\n\tcol += traceConeAO(voxels, origin, mix(normal, c2, angleMix), aperture, MAX_DISTANCE, offset);\r\n\treturn col / 9.0;\r\n}\r\n";
arm_shader_ShaderFunctions.str_cotangentFrame = "\r\nmat3 cotangentFrame(const vec3 n, const vec3 p, const vec2 duv1, const vec2 duv2) {\r\n\tvec3 dp1 = dFdx(p);\r\n\tvec3 dp2 = dFdy(p);\r\n\tvec3 dp2perp = cross(dp2, n);\r\n\tvec3 dp1perp = cross(n, dp1);\r\n\tvec3 t = dp2perp * duv1.x + dp1perp * duv2.x;\r\n\tvec3 b = dp2perp * duv1.y + dp1perp * duv2.y;\r\n\tfloat invmax = inversesqrt(max(dot(t, t), dot(b, b)));\r\n\treturn mat3(t * invmax, b * invmax, n);\r\n}\r\nmat3 cotangentFrame(const vec3 n, const vec3 p, const vec2 texCoord) {\r\n\treturn cotangentFrame(n, p, dFdx(texCoord), dFdy(texCoord));\r\n}\r\n";
arm_shader_ShaderFunctions.str_octahedronWrap = "\r\nvec2 octahedronWrap(const vec2 v) {\r\n\treturn (1.0 - abs(v.yx)) * (vec2(v.x >= 0.0 ? 1.0 : -1.0, v.y >= 0.0 ? 1.0 : -1.0));\r\n}\r\n";
arm_shader_ShaderFunctions.str_packFloatInt16 = "\r\nfloat packFloatInt16(const float f, const uint i) {\r\n\tconst float prec = float(1 << 16);\r\n\tconst float maxi = float(1 << 4);\r\n\tconst float precMinusOne = prec - 1.0;\r\n\tconst float t1 = ((prec / maxi) - 1.0) / precMinusOne;\r\n\tconst float t2 = (prec / maxi) / precMinusOne;\r\n\treturn t1 * f + t2 * float(i);\r\n}\r\n";
arm_shader_ShaderFunctions.str_shIrradiance = "vec3 shIrradiance(const vec3 nor, const vec4 shirr[7]) {\r\n\tconst float c1 = 0.429043;\r\n\tconst float c2 = 0.511664;\r\n\tconst float c3 = 0.743125;\r\n\tconst float c4 = 0.886227;\r\n\tconst float c5 = 0.247708;\r\n\tvec3 cl00 = vec3(shirr[0].x, shirr[0].y, shirr[0].z);\r\n\tvec3 cl1m1 = vec3(shirr[0].w, shirr[1].x, shirr[1].y);\r\n\tvec3 cl10 = vec3(shirr[1].z, shirr[1].w, shirr[2].x);\r\n\tvec3 cl11 = vec3(shirr[2].y, shirr[2].z, shirr[2].w);\r\n\tvec3 cl2m2 = vec3(shirr[3].x, shirr[3].y, shirr[3].z);\r\n\tvec3 cl2m1 = vec3(shirr[3].w, shirr[4].x, shirr[4].y);\r\n\tvec3 cl20 = vec3(shirr[4].z, shirr[4].w, shirr[5].x);\r\n\tvec3 cl21 = vec3(shirr[5].y, shirr[5].z, shirr[5].w);\r\n\tvec3 cl22 = vec3(shirr[6].x, shirr[6].y, shirr[6].z);\r\n\treturn (\r\n\t\tc1 * cl22 * (nor.y * nor.y - (-nor.z) * (-nor.z)) +\r\n\t\tc3 * cl20 * nor.x * nor.x +\r\n\t\tc4 * cl00 -\r\n\t\tc5 * cl20 +\r\n\t\t2.0 * c1 * cl2m2 * nor.y * (-nor.z) +\r\n\t\t2.0 * c1 * cl21  * nor.y * nor.x +\r\n\t\t2.0 * c1 * cl2m1 * (-nor.z) * nor.x +\r\n\t\t2.0 * c2 * cl11  * nor.y +\r\n\t\t2.0 * c2 * cl1m1 * (-nor.z) +\r\n\t\t2.0 * c2 * cl10  * nor.x\r\n\t);\r\n}\r\n";
arm_shader_ShaderFunctions.str_envMapEquirect = "\r\nvec2 envMapEquirect(const vec3 normal, const float angle) {\r\n\tconst float PI = 3.1415926535;\r\n\tconst float PI2 = PI * 2.0;\r\n\tfloat phi = acos(normal.z);\r\n\tfloat theta = atan(-normal.y, normal.x) + PI + angle;\r\n\treturn vec2(theta / PI2, phi / PI);\r\n}\r\n";
arm_shader_ShaderFunctions.str_ltcEvaluate = "\r\nfloat integrateEdge(vec3 v1, vec3 v2) {\r\n\tfloat cosTheta = dot(v1, v2);\r\n\tfloat theta = acos(cosTheta);\r\n\tfloat res = cross(v1, v2).z * ((theta > 0.001) ? theta / sin(theta) : 1.0);\r\n\treturn res;\r\n}\r\nfloat ltcEvaluate(vec3 N, vec3 V, float dotNV, vec3 P, mat3 Minv, vec3 points0, vec3 points1, vec3 points2, vec3 points3) {\r\n\tvec3 T1 = normalize(V - N * dotNV);\r\n\tvec3 T2 = cross(N, T1);\r\n\tMinv = mul(transpose(mat3(T1, T2, N)), Minv);\r\n\tvec3 L0 = mul((points0 - P), Minv);\r\n\tvec3 L1 = mul((points1 - P), Minv);\r\n\tvec3 L2 = mul((points2 - P), Minv);\r\n\tvec3 L3 = mul((points3 - P), Minv);\r\n\tvec3 L4 = vec3(0.0, 0.0, 0.0);\r\n\tint n = 0;\r\n\tint config = 0;\r\n\tif (L0.z > 0.0) config += 1;\r\n\tif (L1.z > 0.0) config += 2;\r\n\tif (L2.z > 0.0) config += 4;\r\n\tif (L3.z > 0.0) config += 8;\r\n\tif (config == 0) {}\r\n\telse if (config == 1) {\r\n\t\tn = 3;\r\n\t\tL1 = -L1.z * L0 + L0.z * L1;\r\n\t\tL2 = -L3.z * L0 + L0.z * L3;\r\n\t}\r\n\telse if (config == 2) {\r\n\t\tn = 3;\r\n\t\tL0 = -L0.z * L1 + L1.z * L0;\r\n\t\tL2 = -L2.z * L1 + L1.z * L2;\r\n\t}\r\n\telse if (config == 3) {\r\n\t\tn = 4;\r\n\t\tL2 = -L2.z * L1 + L1.z * L2;\r\n\t\tL3 = -L3.z * L0 + L0.z * L3;\r\n\t}\r\n\telse if (config == 4) {\r\n\t\tn = 3;\r\n\t\tL0 = -L3.z * L2 + L2.z * L3;\r\n\t\tL1 = -L1.z * L2 + L2.z * L1;\r\n\t}\r\n\telse if (config == 5) { n = 0; }\r\n\telse if (config == 6) {\r\n\t\tn = 4;\r\n\t\tL0 = -L0.z * L1 + L1.z * L0;\r\n\t\tL3 = -L3.z * L2 + L2.z * L3;\r\n\t}\r\n\telse if (config == 7) {\r\n\t\tn = 5;\r\n\t\tL4 = -L3.z * L0 + L0.z * L3;\r\n\t\tL3 = -L3.z * L2 + L2.z * L3;\r\n\t}\r\n\telse if (config == 8) {\r\n\t\tn = 3;\r\n\t\tL0 = -L0.z * L3 + L3.z * L0;\r\n\t\tL1 = -L2.z * L3 + L3.z * L2;\r\n\t\tL2 =  L3;\r\n\t}\r\n\telse if (config == 9) {\r\n\t\tn = 4;\r\n\t\tL1 = -L1.z * L0 + L0.z * L1;\r\n\t\tL2 = -L2.z * L3 + L3.z * L2;\r\n\t}\r\n\telse if (config == 10) { n = 0; }\r\n\telse if (config == 11) {\r\n\t\tn = 5;\r\n\t\tL4 = L3;\r\n\t\tL3 = -L2.z * L3 + L3.z * L2;\r\n\t\tL2 = -L2.z * L1 + L1.z * L2;\r\n\t}\r\n\telse if (config == 12) {\r\n\t\tn = 4;\r\n\t\tL1 = -L1.z * L2 + L2.z * L1;\r\n\t\tL0 = -L0.z * L3 + L3.z * L0;\r\n\t}\r\n\telse if (config == 13) {\r\n\t\tn = 5;\r\n\t\tL4 = L3;\r\n\t\tL3 = L2;\r\n\t\tL2 = -L1.z * L2 + L2.z * L1;\r\n\t\tL1 = -L1.z * L0 + L0.z * L1;\r\n\t}\r\n\telse if (config == 14) {\r\n\t\tn = 5;\r\n\t\tL4 = -L0.z * L3 + L3.z * L0;\r\n\t\tL0 = -L0.z * L1 + L1.z * L0;\r\n\t}\r\n\telse if (config == 15) { n = 4; }\r\n\tif (n == 0) return 0.0;\r\n\tif (n == 3) L3 = L0;\r\n\tif (n == 4) L4 = L0;\r\n\tL0 = normalize(L0);\r\n\tL1 = normalize(L1);\r\n\tL2 = normalize(L2);\r\n\tL3 = normalize(L3);\r\n\tL4 = normalize(L4);\r\n\tfloat sum = 0.0;\r\n\tsum += integrateEdge(L0, L1);\r\n\tsum += integrateEdge(L1, L2);\r\n\tsum += integrateEdge(L2, L3);\r\n\tif (n >= 4) sum += integrateEdge(L3, L4);\r\n\tif (n == 5) sum += integrateEdge(L4, L0);\r\n\treturn max(0.0, -sum);\r\n}\r\n";
arm_ui_BoxExport.htab = zui_Handle.global.nest(67,null);
arm_ui_BoxExport.hpreset = zui_Handle.global.nest(66,null);
arm_ui_BoxExport.channels = ["base_r","base_g","base_b","height","metal","nor_r","nor_g","nor_b","occ","opac","rough","smooth","emis","subs","0.0","1.0"];
kha_Color.Black = -16777216;
kha_Color.White = -1;
kha_Color.Red = -65536;
kha_Color.Blue = -16776961;
kha_Color.Green = -16711936;
kha_Color.Magenta = -65281;
kha_Color.Yellow = -256;
kha_Color.Cyan = -16711681;
kha_Color.Purple = -8388480;
kha_Color.Pink = -16181;
kha_Color.Orange = -23296;
kha_Color.Transparent = 0;
kha_Color.invMaxChannelValue = 0.00392156862745098;
arm_ui_BoxPreferences.htab = zui_Handle.global.nest(20,null);
arm_ui_BoxPreferences.worldColor = kha_Color._new(-16579837);
arm_ui_TabBrowser.hpath = new zui_Handle();
arm_ui_TabBrowser.known = false;
arm_ui_TabProperties.row4 = [0.25,0.25,0.25,0.25];
arm_ui_TabScript.hscript = zui_Handle.global.nest(64,null);
arm_ui_UIBox.show = false;
arm_ui_UIBox.hwnd = new zui_Handle();
arm_ui_UIBox.boxTitle = "";
arm_ui_UIBox.boxText = "";
arm_ui_UIBox.clickToHide = true;
arm_ui_UIBox.modalW = 400;
arm_ui_UIBox.modalH = 170;
arm_ui_UIBox.draws = 0;
arm_ui_UIBox.copyable = false;
haxe_Unserializer.DEFAULT_RESOLVER = new haxe__$Unserializer_DefaultResolver();
haxe_Unserializer.BASE64 = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:";
haxe_io_FPHelper.helper = new DataView(new ArrayBuffer(8));
iron_data_ConstData.skydomeIndices = [0,1,2,0,3,4,3,5,6,5,7,8,7,9,10,9,11,12,13,14,15,11,16,17,13,18,2,14,2,19,2,1,20,1,4,21,4,6,22,6,8,23,8,10,24,10,12,25,14,26,15,17,27,25,22,23,28,24,29,28,24,25,30,26,31,15,25,27,32,26,19,33,19,20,34,20,21,35,21,22,36,33,34,37,34,35,38,35,36,39,36,28,40,28,29,41,30,42,41,31,43,15,30,32,44,31,33,45,40,41,46,42,47,46,43,48,15,42,44,49,43,45,50,45,37,51,37,38,52,39,53,52,39,40,54,50,51,55,51,52,56,53,57,56,53,54,58,46,59,58,46,47,60,48,61,15,47,49,62,48,50,63,59,64,65,59,60,66,61,67,15,60,62,68,61,63,69,63,55,70,56,71,70,56,57,72,57,58,65,70,71,73,71,72,74,72,65,75,64,76,75,64,66,77,67,78,15,68,79,77,67,69,80,69,70,81,76,77,82,78,83,15,77,79,84,80,85,83,80,81,86,81,73,87,74,88,87,74,75,89,76,90,89,87,88,91,88,89,92,90,93,92,90,82,94,83,95,15,82,84,96,83,85,97,86,98,97,86,87,99,95,100,15,96,101,102,95,97,103,97,98,104,98,99,105,91,106,105,91,92,107,93,108,107,93,94,102,105,106,109,106,107,110,108,111,110,108,102,112,100,113,15,102,101,114,100,103,115,103,104,116,104,105,117,114,118,119,113,115,120,115,116,121,117,122,121,109,123,122,109,110,124,111,125,124,111,112,119,113,126,15,123,124,127,125,128,127,125,119,129,126,130,15,119,118,131,126,120,132,121,133,132,121,122,134,122,123,135,130,132,136,132,133,137,133,134,138,134,135,139,135,127,140,128,141,140,128,129,142,130,143,15,129,131,144,139,140,145,141,146,145,141,142,147,143,148,15,142,144,149,143,136,150,137,151,150,138,152,151,138,139,153,150,151,154,152,155,154,153,156,155,153,145,157,146,158,157,146,147,159,148,160,15,147,149,161,148,150,162,158,163,164,158,159,165,160,166,15,161,167,165,160,162,168,162,154,169,155,170,169,156,171,170,156,157,164,169,170,172,171,173,172,171,164,174,163,175,174,163,165,176,166,177,15,165,167,178,166,168,179,168,169,180,176,181,182,177,183,15,176,178,184,177,179,185,179,180,186,172,187,186,173,188,187,173,174,189,175,182,189,187,190,191,188,192,190,188,189,193,182,194,193,182,181,195,183,196,15,181,184,197,183,185,198,185,186,191,194,195,199,196,200,15,195,197,201,196,198,202,198,191,203,190,204,203,192,205,204,192,193,206,194,207,206,205,208,209,205,206,210,207,211,210,207,199,212,200,213,15,199,201,214,202,215,213,202,203,216,204,209,216,213,217,15,214,218,219,215,220,217,215,216,221,209,222,221,209,208,223,208,210,224,211,225,224,211,212,219,223,226,227,223,224,228,225,229,228,225,219,230,217,231,15,218,232,230,220,233,231,220,221,234,222,227,234,230,232,235,231,233,236,233,234,237,227,238,237,227,226,239,226,228,240,229,241,240,229,230,242,231,243,15,239,240,244,241,245,244,241,242,246,243,247,15,235,248,246,243,236,249,237,250,249,238,251,250,239,252,251,249,250,253,250,251,254,252,255,254,252,244,256,245,257,256,245,246,258,247,259,15,248,260,258,247,249,261,257,262,263,258,264,262,259,265,15,258,260,266,259,261,267,261,253,268,253,254,269,255,270,269,255,256,263,268,271,272,269,273,271,270,274,273,270,263,275,262,276,275,262,264,277,265,278,15,264,266,279,267,272,278,276,280,281,276,277,282,278,283,15,277,279,284,278,272,285,272,271,286,271,273,287,274,288,287,274,275,281,287,3,0,288,5,3,281,7,5,280,9,7,282,11,9,283,13,15,282,284,16,285,18,13,286,0,18,0,2,18,0,4,1,3,6,4,5,8,6,7,10,8,9,12,10,11,17,12,13,2,14,14,19,26,2,20,19,1,21,20,4,22,21,6,23,22,8,24,23,10,25,24,17,25,12,22,28,36,24,28,23,24,30,29,25,32,30,26,33,31,19,34,33,20,35,34,21,36,35,33,37,45,34,38,37,35,39,38,36,40,39,28,41,40,30,41,29,30,44,42,31,45,43,40,46,54,42,46,41,42,49,47,43,50,48,45,51,50,37,52,51,39,52,38,39,54,53,50,55,63,51,56,55,53,56,52,53,58,57,46,58,54,46,60,59,47,62,60,48,63,61,59,65,58,59,66,64,60,68,66,61,69,67,63,70,69,56,70,55,56,72,71,57,65,72,70,73,81,71,74,73,72,75,74,64,75,65,64,77,76,68,77,66,67,80,78,69,81,80,76,82,90,77,84,82,80,83,78,80,86,85,81,87,86,74,87,73,74,89,88,76,89,75,87,91,99,88,92,91,90,92,89,90,94,93,82,96,94,83,97,95,86,97,85,86,99,98,96,102,94,95,103,100,97,104,103,98,105,104,91,105,99,91,107,106,93,107,92,93,102,108,105,109,117,106,110,109,108,110,107,108,112,111,102,114,112,100,115,113,103,116,115,104,117,116,114,119,112,113,120,126,115,121,120,117,121,116,109,122,117,109,124,123,111,124,110,111,119,125,123,127,135,125,127,124,125,129,128,119,131,129,126,132,130,121,132,120,121,134,133,122,135,134,130,136,143,132,137,136,133,138,137,134,139,138,135,140,139,128,140,127,128,142,141,129,144,142,139,145,153,141,145,140,141,147,146,142,149,147,143,150,148,137,150,136,138,151,137,138,153,152,150,154,162,152,154,151,153,155,152,153,157,156,146,157,145,146,159,158,147,161,159,148,162,160,158,164,157,158,165,163,161,165,159,160,168,166,162,169,168,155,169,154,156,170,155,156,164,171,169,172,180,171,172,170,171,174,173,163,174,164,163,176,175,165,178,176,166,179,177,168,180,179,176,182,175,176,184,181,177,185,183,179,186,185,172,186,180,173,187,172,173,189,188,175,189,174,187,191,186,188,190,187,188,193,192,182,193,189,182,195,194,181,197,195,183,198,196,185,191,198,194,199,207,195,201,199,196,202,200,198,203,202,190,203,191,192,204,190,192,206,205,194,206,193,205,209,204,205,210,208,207,210,206,207,212,211,199,214,212,202,213,200,202,216,215,204,216,203,214,219,212,215,217,213,215,221,220,209,221,216,209,223,222,208,224,223,211,224,210,211,219,225,223,227,222,223,228,226,225,228,224,225,230,229,218,230,219,220,231,217,220,234,233,222,234,221,230,235,242,231,236,243,233,237,236,227,237,234,227,239,238,226,240,239,229,240,228,229,242,241,239,244,252,241,244,240,241,246,245,235,246,242,243,249,247,237,249,236,238,250,237,239,251,238,249,253,261,250,254,253,252,254,251,252,256,255,245,256,244,245,258,257,248,258,246,247,261,259,257,263,256,258,262,257,258,266,264,259,267,265,261,268,267,253,269,268,255,269,254,255,263,270,268,272,267,269,271,268,270,273,269,270,275,274,262,275,263,262,277,276,264,279,277,267,278,265,276,281,275,276,282,280,277,284,282,278,285,283,272,286,285,271,287,286,274,287,273,274,281,288,287,0,286,288,3,287,281,5,288,280,7,281,282,9,280,282,16,11,285,13,283,286,18,285,84,289,96,96,289,101,101,289,114,114,289,118,118,289,131,144,131,289,149,144,289,149,289,161,161,289,167,167,289,178,178,289,184,184,289,197,197,289,201,201,289,214,214,289,218,218,289,232,232,289,235,235,289,248,260,248,289,260,289,266,266,289,279,279,289,284,284,289,16,16,289,17,27,17,289,27,289,32,44,32,289,44,289,49,49,289,62,62,289,68,68,289,79,79,289,84];
iron_data_ConstData.skydomePos = [-0.55557,0.0,0.83147,-0.544895,0.108386,0.83147,-0.37533,0.074658,0.92388,-0.707107,0.0,0.707107,-0.69352,0.13795,0.707107,-0.83147,0.0,0.55557,-0.815493,0.162212,0.55557,-0.92388,0.0,0.382683,-0.906127,0.18024,0.382683,-0.980785,0.0,0.19509,-0.96194,0.191342,0.19509,-1.0,0.0,0.0,-0.980785,0.19509,0.0,-0.19509,0.0,0.980785,-0.191342,0.03806,0.980785,0.0,0.0,1.,-0.980785,0.0,-0.28234,-0.96194,0.191342,-0.28234,-0.382683,0.0,0.92388,-0.353553,0.146447,0.92388,-0.51328,0.212608,0.83147,-0.653281,0.270598,0.707107,-0.768178,0.31819,0.55557,-0.853553,0.353553,0.382683,-0.906127,0.37533,0.19509,-0.923879,0.382684,0.0,-0.18024,0.074658,0.980785,-0.906127,0.37533,-0.28234,-0.768178,0.51328,0.382683,-0.815493,0.544895,0.19509,-0.831469,0.55557,0.0,-0.162212,0.108387,0.980785,-0.815493,0.544895,-0.28234,-0.31819,0.212608,0.92388,-0.46194,0.308658,0.83147,-0.587938,0.392848,0.707107,-0.691342,0.46194,0.55557,-0.392847,0.392848,0.83147,-0.5,0.5,0.707107,-0.587938,0.587938,0.55557,-0.653281,0.653282,0.382683,-0.69352,0.69352,0.19509,-0.707107,0.707107,0.0,-0.13795,0.13795,0.980785,-0.69352,0.69352,-0.28234,-0.270598,0.270598,0.92388,-0.544895,0.815493,0.19509,-0.55557,0.83147,0.0,-0.108386,0.162212,0.980785,-0.544895,0.815493,-0.28234,-0.212607,0.31819,0.92388,-0.308658,0.46194,0.83147,-0.392847,0.587938,0.707107,-0.46194,0.691342,0.55557,-0.51328,0.768178,0.382683,-0.212607,0.51328,0.83147,-0.270598,0.653282,0.707107,-0.318189,0.768178,0.55557,-0.353553,0.853554,0.382683,-0.37533,0.906128,0.19509,-0.382683,0.92388,0.0,-0.074658,0.18024,0.980785,-0.37533,0.906128,-0.28234,-0.146446,0.353554,0.92388,-0.191341,0.96194,0.19509,-0.18024,0.906128,0.382683,-0.19509,0.980785,0.0,-0.03806,0.191342,0.980785,-0.191341,0.96194,-0.28234,-0.074658,0.375331,0.92388,-0.108386,0.544895,0.83147,-0.137949,0.69352,0.707107,-0.162211,0.815493,0.55557,0.0,0.707107,0.707107,0.0,0.83147,0.55557,0.0,0.92388,0.382683,0.0,0.980785,0.19509,0.0,1.,0.0,0.0,0.195091,0.980785,0.0,0.980785,-0.28234,0.0,0.382684,0.92388,0.0,0.55557,0.83147,0.195091,0.980785,0.0,0.038061,0.191342,0.980785,0.191342,0.96194,-0.28234,0.074658,0.375331,0.92388,0.108387,0.544895,0.83147,0.13795,0.69352,0.707107,0.162212,0.815493,0.55557,0.18024,0.906128,0.382683,0.191342,0.96194,0.19509,0.31819,0.768178,0.55557,0.353554,0.853554,0.382683,0.375331,0.906127,0.19509,0.382684,0.92388,0.0,0.074658,0.18024,0.980785,0.375331,0.906127,-0.28234,0.146447,0.353554,0.92388,0.212608,0.51328,0.83147,0.270598,0.653282,0.707107,0.108387,0.162212,0.980785,0.544895,0.815493,-0.28234,0.555571,0.83147,0.0,0.212608,0.31819,0.92388,0.308659,0.46194,0.83147,0.392848,0.587938,0.707107,0.46194,0.691342,0.55557,0.51328,0.768178,0.382683,0.544895,0.815493,0.19509,0.587938,0.587938,0.55557,0.653282,0.653282,0.382683,0.69352,0.69352,0.19509,0.707107,0.707107,0.0,0.13795,0.13795,0.980785,0.69352,0.69352,-0.28234,0.270599,0.270598,0.92388,0.392848,0.392848,0.83147,0.5,0.5,0.707107,0.815493,0.544895,-0.28234,0.83147,0.55557,0.0,0.31819,0.212608,0.92388,0.46194,0.308658,0.83147,0.587938,0.392848,0.707107,0.691342,0.46194,0.55557,0.768178,0.51328,0.382683,0.815493,0.544895,0.19509,0.162212,0.108386,0.980785,0.853554,0.353553,0.382683,0.906128,0.37533,0.19509,0.92388,0.382683,0.0,0.18024,0.074658,0.980785,0.906128,0.37533,-0.28234,0.353554,0.146447,0.92388,0.51328,0.212608,0.83147,0.653282,0.270598,0.707107,0.768178,0.31819,0.55557,0.375331,0.074658,0.92388,0.544896,0.108386,0.83147,0.69352,0.13795,0.707107,0.815493,0.162212,0.55557,0.906128,0.18024,0.382683,0.96194,0.191342,0.19509,0.980786,0.19509,0.0,0.191342,0.03806,0.980785,0.96194,0.191342,-0.28234,0.92388,0.0,0.382683,0.980785,0.0,0.19509,1.,0.0,0.0,0.195091,0.0,0.980785,0.980785,0.0,-0.28234,0.382684,0.0,0.92388,0.555571,0.0,0.83147,0.707107,0.0,0.707107,0.83147,0.0,0.55557,0.544896,-0.108386,0.83147,0.69352,-0.13795,0.707107,0.815493,-0.162212,0.55557,0.906128,-0.18024,0.382683,0.96194,-0.191342,0.19509,0.980786,-0.19509,0.0,0.191342,-0.03806,0.980785,0.96194,-0.191342,-0.28234,0.375331,-0.074658,0.92388,0.906127,-0.37533,0.19509,0.853554,-0.353553,0.382683,0.92388,-0.382684,0.0,0.18024,-0.074658,0.980785,0.906127,-0.37533,-0.28234,0.353554,-0.146447,0.92388,0.51328,-0.212608,0.83147,0.653282,-0.270598,0.707107,0.768178,-0.31819,0.55557,0.587938,-0.392847,0.707107,0.691342,-0.46194,0.55557,0.768178,-0.51328,0.382683,0.815493,-0.544895,0.19509,0.83147,-0.55557,0.0,0.162212,-0.108386,0.980785,0.815493,-0.544895,-0.28234,0.31819,-0.212608,0.92388,0.46194,-0.308658,0.83147,0.707107,-0.707107,0.0,0.69352,-0.69352,0.19509,0.13795,-0.13795,0.980785,0.69352,-0.69352,-0.28234,0.270598,-0.270598,0.92388,0.392848,-0.392848,0.83147,0.5,-0.5,0.707107,0.587938,-0.587938,0.55557,0.653282,-0.653281,0.382683,0.392848,-0.587938,0.707107,0.308659,-0.46194,0.83147,0.46194,-0.691342,0.55557,0.51328,-0.768178,0.382683,0.544895,-0.815493,0.19509,0.55557,-0.83147,0.0,0.108387,-0.162212,0.980785,0.544895,-0.815493,-0.28234,0.212608,-0.31819,0.92388,0.382684,-0.92388,0.0,0.074658,-0.18024,0.980785,0.37533,-0.906127,-0.28234,0.146447,-0.353553,0.92388,0.212608,-0.51328,0.83147,0.270598,-0.653281,0.707107,0.31819,-0.768177,0.55557,0.353554,-0.853553,0.382683,0.37533,-0.906127,0.19509,0.162212,-0.815493,0.55557,0.13795,-0.69352,0.707107,0.18024,-0.906127,0.382683,0.191342,-0.961939,0.19509,0.19509,-0.980785,0.0,0.038061,-0.191342,0.980785,0.191342,-0.961939,-0.28234,0.074658,-0.37533,0.92388,0.108387,-0.544895,0.83147,0.0,-0.19509,0.980785,0.0,-0.980785,-0.28234,0.0,-1.0,0.0,0.0,-0.382683,0.92388,0.0,-0.55557,0.83147,0.0,-0.707107,0.707107,0.0,-0.831469,0.55557,0.0,-0.923879,0.382683,0.0,-0.980785,0.19509,-0.162211,-0.815493,0.55557,-0.137949,-0.69352,0.707107,-0.18024,-0.906127,0.382683,-0.191342,-0.961939,0.19509,-0.19509,-0.980785,0.0,-0.03806,-0.191342,0.980785,-0.191342,-0.961939,-0.28234,-0.074658,-0.37533,0.92388,-0.108386,-0.544895,0.83147,-0.37533,-0.906127,-0.28234,-0.146446,-0.353553,0.92388,-0.212607,-0.51328,0.83147,-0.270598,-0.653281,0.707107,-0.318189,-0.768177,0.55557,-0.353553,-0.853553,0.382683,-0.37533,-0.906127,0.19509,-0.382683,-0.923879,0.0,-0.074658,-0.18024,0.980785,-0.51328,-0.768178,0.382683,-0.544895,-0.815493,0.19509,-0.55557,-0.831469,0.0,-0.108386,-0.162212,0.980785,-0.544895,-0.815493,-0.28234,-0.212607,-0.31819,0.92388,-0.308658,-0.46194,0.83147,-0.392847,-0.587938,0.707107,-0.461939,-0.691341,0.55557,-0.392847,-0.392847,0.83147,-0.5,-0.5,0.707107,-0.587937,-0.587937,0.55557,-0.653281,-0.653281,0.382683,-0.693519,-0.693519,0.19509,-0.707106,-0.707106,0.0,-0.137949,-0.13795,0.980785,-0.693519,-0.693519,-0.28234,-0.270598,-0.270598,0.92388,-0.815492,-0.544895,0.19509,-0.768177,-0.51328,0.382683,-0.831469,-0.55557,0.0,-0.162211,-0.108386,0.980785,-0.815492,-0.544895,-0.28234,-0.318189,-0.212607,0.92388,-0.461939,-0.308658,0.83147,-0.587937,-0.392847,0.707107,-0.691341,-0.461939,0.55557,-0.51328,-0.212607,0.83147,-0.353553,-0.146447,0.92388,-0.653281,-0.270598,0.707107,-0.768177,-0.318189,0.55557,-0.853553,-0.353553,0.382683,-0.906127,-0.37533,0.19509,-0.923879,-0.382683,0.0,-0.18024,-0.074658,0.980785,-0.906127,-0.37533,-0.28234,-0.961939,-0.191341,0.19509,-0.906127,-0.18024,0.382683,-0.980785,-0.19509,0.0,-0.191342,-0.03806,0.980785,-0.961939,-0.191341,-0.28234,-0.37533,-0.074658,0.92388,-0.544895,-0.108386,0.83147,-0.69352,-0.13795,0.707107,-0.815492,-0.162211,0.55557,0.0,0.0,-0.860043];
iron_data_ConstData.skydomeNor = [0.559771,0.0,-0.828639,0.548997,-0.109195,-0.828639,0.380413,-0.075655,-0.92169,0.710135,0.0,-0.704031,0.696493,-0.138524,-0.704031,0.833338,0.0,-0.552751,0.817316,-0.162572,-0.552751,0.924741,0.0,-0.380535,0.90698,-0.180395,-0.380535,0.980987,0.0,-0.193915,0.962157,-0.191382,-0.193915,0.999878,0.0,-0.015015,0.980651,-0.195044,-0.015015,0.200964,0.0,-0.979583,0.197089,-0.039186,-0.979583,0.0,0.0,-1.0,0.858486,0.0,0.512803,0.841975,-0.167455,0.512803,0.38786,0.0,-0.92169,0.358348,-0.148412,-0.92169,0.517136,-0.214209,-0.828639,0.656056,-0.271737,-0.704031,0.76989,-0.318888,-0.552751,0.854366,-0.353862,-0.380535,0.906339,-0.375408,-0.193915,0.923765,-0.382611,-0.015015,0.185644,-0.076907,-0.979583,0.793146,-0.328532,0.512803,0.768914,-0.513749,-0.380535,0.815668,-0.545,-0.193915,0.831355,-0.555498,-0.015015,0.167089,-0.111637,-0.979583,0.713797,-0.476943,0.512803,0.322489,-0.215491,-0.92169,0.465407,-0.310984,-0.828639,0.590442,-0.394513,-0.704031,0.692892,-0.462966,-0.552751,0.395795,-0.395795,-0.828639,0.502121,-0.502121,-0.704031,0.589251,-0.589251,-0.552751,0.65389,-0.65389,-0.380535,0.693655,-0.693655,-0.193915,0.707022,-0.707022,-0.015015,0.142094,-0.142094,-0.979583,0.607044,-0.607044,0.512803,0.27427,-0.27427,-0.92169,0.545,-0.815668,-0.193915,0.555498,-0.831355,-0.015015,0.111637,-0.167089,-0.979583,0.476943,-0.713797,0.512803,0.215491,-0.322489,-0.92169,0.310984,-0.465407,-0.828639,0.394513,-0.590442,-0.704031,0.462966,-0.692892,-0.552751,0.513749,-0.768914,-0.380535,0.214209,-0.517136,-0.828639,0.271737,-0.656056,-0.704031,0.318888,-0.76989,-0.552751,0.353862,-0.854366,-0.380535,0.375408,-0.906339,-0.193915,0.382611,-0.923765,-0.015015,0.076907,-0.185644,-0.979583,0.328532,-0.793146,0.512803,0.148412,-0.358348,-0.92169,0.191382,-0.962157,-0.193915,0.180395,-0.90698,-0.380535,0.195044,-0.980651,-0.015015,0.039186,-0.197089,-0.979583,0.167455,-0.841975,0.512803,0.075655,-0.380413,-0.92169,0.109195,-0.548997,-0.828639,0.138524,-0.696493,-0.704031,0.162572,-0.817316,-0.552751,0.0,-0.710135,-0.704031,0.0,-0.833338,-0.552751,0.0,-0.924741,-0.380535,0.0,-0.980987,-0.193915,0.0,-0.999878,-0.015015,0.0,-0.200964,-0.979583,0.0,-0.858486,0.512803,0.0,-0.38786,-0.92169,0.0,-0.559771,-0.828639,-0.195044,-0.980651,-0.015015,-0.039186,-0.197089,-0.979583,-0.167455,-0.841975,0.512803,-0.075655,-0.380413,-0.92169,-0.109195,-0.548997,-0.828639,-0.138524,-0.696493,-0.704031,-0.162572,-0.817316,-0.552751,-0.180395,-0.90698,-0.380535,-0.191382,-0.962157,-0.193915,-0.318888,-0.76989,-0.552751,-0.353862,-0.854366,-0.380535,-0.375408,-0.906339,-0.193915,-0.382611,-0.923765,-0.015015,-0.076907,-0.185644,-0.979583,-0.328532,-0.793146,0.512803,-0.148412,-0.358348,-0.92169,-0.214209,-0.517136,-0.828639,-0.271737,-0.656056,-0.704031,-0.111637,-0.167089,-0.979583,-0.476943,-0.713797,0.512803,-0.555498,-0.831355,-0.015015,-0.215491,-0.322489,-0.92169,-0.310984,-0.465407,-0.828639,-0.394513,-0.590442,-0.704031,-0.462966,-0.692892,-0.552751,-0.513749,-0.768914,-0.380535,-0.545,-0.815668,-0.193915,-0.589251,-0.589251,-0.552751,-0.65389,-0.65389,-0.380535,-0.693655,-0.693655,-0.193915,-0.707022,-0.707022,-0.015015,-0.142094,-0.142094,-0.979583,-0.607044,-0.607044,0.512803,-0.27427,-0.27427,-0.92169,-0.395795,-0.395795,-0.828639,-0.502121,-0.502121,-0.704031,-0.713797,-0.476943,0.512803,-0.831355,-0.555498,-0.015015,-0.322489,-0.215491,-0.92169,-0.465407,-0.310984,-0.828639,-0.590442,-0.394513,-0.704031,-0.692892,-0.462966,-0.552751,-0.768914,-0.513749,-0.380535,-0.815668,-0.545,-0.193915,-0.167089,-0.111637,-0.979583,-0.854366,-0.353862,-0.380535,-0.906339,-0.375408,-0.193915,-0.923765,-0.382611,-0.015015,-0.185644,-0.076907,-0.979583,-0.793146,-0.328532,0.512803,-0.358348,-0.148412,-0.92169,-0.517136,-0.214209,-0.828639,-0.656056,-0.271737,-0.704031,-0.76989,-0.318888,-0.552751,-0.380413,-0.075655,-0.92169,-0.548997,-0.109195,-0.828639,-0.696493,-0.138524,-0.704031,-0.817316,-0.162572,-0.552751,-0.90698,-0.180395,-0.380535,-0.962157,-0.191382,-0.193915,-0.980651,-0.195044,-0.015015,-0.197089,-0.039186,-0.979583,-0.841975,-0.167455,0.512803,-0.924741,0.0,-0.380535,-0.980987,0.0,-0.193915,-0.999878,0.0,-0.015015,-0.200964,0.0,-0.979583,-0.858486,0.0,0.512803,-0.38786,0.0,-0.92169,-0.559771,0.0,-0.828639,-0.710135,0.0,-0.704031,-0.833338,0.0,-0.552751,-0.548997,0.109195,-0.828639,-0.696493,0.138524,-0.704031,-0.817316,0.162572,-0.552751,-0.90698,0.180395,-0.380535,-0.962157,0.191382,-0.193915,-0.980651,0.195044,-0.015015,-0.197089,0.039186,-0.979583,-0.841975,0.167455,0.512803,-0.380413,0.075655,-0.92169,-0.906339,0.375408,-0.193915,-0.854366,0.353862,-0.380535,-0.923765,0.382611,-0.015015,-0.185644,0.076907,-0.979583,-0.793146,0.328532,0.512803,-0.358348,0.148412,-0.92169,-0.517136,0.214209,-0.828639,-0.656056,0.271737,-0.704031,-0.76989,0.318888,-0.552751,-0.590442,0.394513,-0.704031,-0.692892,0.462966,-0.552751,-0.768914,0.513749,-0.380535,-0.815668,0.545,-0.193915,-0.831355,0.555498,-0.015015,-0.167089,0.111637,-0.979583,-0.713797,0.476943,0.512803,-0.322489,0.215491,-0.92169,-0.465407,0.310984,-0.828639,-0.707022,0.707022,-0.015015,-0.693655,0.693655,-0.193915,-0.142094,0.142094,-0.979583,-0.607044,0.607044,0.512803,-0.27427,0.27427,-0.92169,-0.395795,0.395795,-0.828639,-0.502121,0.502121,-0.704031,-0.589251,0.589251,-0.552751,-0.65389,0.65389,-0.380535,-0.394513,0.590442,-0.704031,-0.310984,0.465407,-0.828639,-0.462966,0.692892,-0.552751,-0.513749,0.768914,-0.380535,-0.545,0.815668,-0.193915,-0.555498,0.831355,-0.015015,-0.111637,0.167089,-0.979583,-0.476943,0.713797,0.512803,-0.215491,0.322489,-0.92169,-0.382611,0.923765,-0.015015,-0.076907,0.185644,-0.979583,-0.328532,0.793146,0.512803,-0.148412,0.358348,-0.92169,-0.214209,0.517136,-0.828639,-0.271737,0.656056,-0.704031,-0.318888,0.76989,-0.552751,-0.353862,0.854366,-0.380535,-0.375408,0.906339,-0.193915,-0.162572,0.817316,-0.552751,-0.138524,0.696493,-0.704031,-0.180395,0.90698,-0.380535,-0.191382,0.962157,-0.193915,-0.195044,0.980651,-0.015015,-0.039186,0.197089,-0.979583,-0.167455,0.841975,0.512803,-0.075655,0.380413,-0.92169,-0.109195,0.548997,-0.828639,0.0,0.200964,-0.979583,0.0,0.858486,0.512803,0.0,0.999878,-0.015015,0.0,0.38786,-0.92169,0.0,0.559771,-0.828639,0.0,0.710135,-0.704031,0.0,0.833338,-0.552751,0.0,0.924741,-0.380535,0.0,0.980987,-0.193915,0.162572,0.817316,-0.552751,0.138524,0.696493,-0.704031,0.180395,0.90698,-0.380535,0.191382,0.962157,-0.193915,0.195044,0.980651,-0.015015,0.039186,0.197089,-0.979583,0.167455,0.841975,0.512803,0.075655,0.380413,-0.92169,0.109195,0.548997,-0.828639,0.328532,0.793146,0.512803,0.148412,0.358348,-0.92169,0.214209,0.517136,-0.828639,0.271737,0.656056,-0.704031,0.318888,0.76989,-0.552751,0.353862,0.854366,-0.380535,0.375408,0.906339,-0.193915,0.382611,0.923765,-0.015015,0.076907,0.185644,-0.979583,0.513749,0.768914,-0.380535,0.545,0.815668,-0.193915,0.555498,0.831355,-0.015015,0.111637,0.167089,-0.979583,0.476943,0.713797,0.512803,0.215491,0.322489,-0.92169,0.310984,0.465407,-0.828639,0.394513,0.590442,-0.704031,0.462966,0.692892,-0.552751,0.395795,0.395795,-0.828639,0.502121,0.502121,-0.704031,0.589251,0.589251,-0.552751,0.65389,0.65389,-0.380535,0.693655,0.693655,-0.193915,0.707022,0.707022,-0.015015,0.142094,0.142094,-0.979583,0.607044,0.607044,0.512803,0.27427,0.27427,-0.92169,0.815668,0.545,-0.193915,0.768914,0.513749,-0.380535,0.831355,0.555498,-0.015015,0.167089,0.111637,-0.979583,0.713797,0.476943,0.512803,0.322489,0.215491,-0.92169,0.465407,0.310984,-0.828639,0.590442,0.394513,-0.704031,0.692892,0.462966,-0.552751,0.517136,0.214209,-0.828639,0.358348,0.148412,-0.92169,0.656056,0.271737,-0.704031,0.76989,0.318888,-0.552751,0.854366,0.353862,-0.380535,0.906339,0.375408,-0.193915,0.923765,0.382611,-0.015015,0.185644,0.076907,-0.979583,0.793146,0.328532,0.512803,0.962157,0.191382,-0.193915,0.90698,0.180395,-0.380535,0.980651,0.195044,-0.015015,0.197089,0.039186,-0.979583,0.841975,0.167486,0.512803,0.380413,0.075655,-0.92169,0.548997,0.109195,-0.828639,0.696493,0.138524,-0.704031,0.817316,0.162572,-0.552751,0.0,0.0,0.999969];
iron_data_MaterialData.uidCounter = 0;
iron_data_MaterialContext.num = 0;
iron_math_RayCaster.VPInv = new iron_math_Mat4(1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0);
iron_math_RayCaster.PInv = new iron_math_Mat4(1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0);
iron_math_RayCaster.VInv = new iron_math_Mat4(1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0);
iron_object_CameraObject.temp = new iron_math_Vec4();
iron_object_CameraObject.sphereCenter = new iron_math_Vec4();
iron_object_CameraObject.vcenter = new iron_math_Vec4();
iron_object_CameraObject.vup = new iron_math_Vec4();
iron_object_LightObject.cascadeBounds = 1.0;
iron_object_LightObject.m = new iron_math_Mat4(1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0);
iron_object_LightObject.eye = new iron_math_Vec4();
iron_object_Transform.temp = new iron_math_Mat4(1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0);
iron_object_Transform.q = new iron_math_Quat();
iron_object_Uniforms.biasMat = new iron_math_Mat4(0.5,0.0,0.0,0.5,0.0,-0.5,0.0,0.5,0.0,0.0,0.5,0.5,0.0,0.0,0.0,1.0);
iron_object_Uniforms.helpMat = new iron_math_Mat4(1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0);
iron_object_Uniforms.helpMat2 = new iron_math_Mat4(1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0,0.0,0.0,0.0,0.0,1.0);
iron_object_Uniforms.helpMat3 = new iron_math_Mat3(1,0,0,0,1,0,0,0,1);
iron_object_Uniforms.helpVec = new iron_math_Vec4();
iron_object_Uniforms.helpVec2 = new iron_math_Vec4();
iron_object_Uniforms.helpQuat = new iron_math_Quat();
iron_object_Uniforms.defaultFilter = 1;
iron_system_Mouse.buttons = ["left","right","middle"];
iron_system_Keyboard.keys = ["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","space","backspace","tab","enter","shift","control","alt","win","escape","delete","up","down","left","right","back",",",".",":",";","<","=",">","?","!","\"","#","$","%","&","_","(",")","*","|","{","}","[","]","~","`","/","\\","@","+","-","f1","f2","f3","f4","f5","f6","f7","f8","f9","f10","f11","f12"];
iron_system_Gamepad.buttonsPS = ["cross","circle","square","triangle","l1","r1","l2","r2","share","options","l3","r3","up","down","left","right","home","touchpad"];
iron_system_Gamepad.buttons = iron_system_Gamepad.buttonsPS;
kha_Display.displays = [];
kha_Shaders.Gizmo_overlay_fragData0 = "s714:AAAARFhCQ0qLdxmHP5ZPL1FaJyHQaw0BAAAAFAIAAAUAAAA0AAAAgAAAAMwAAAAAAQAAmAEAAFJERUZEAAAAAAAAAAAAAAAAAAAAHAAAAAAE::8AAQAAHAAAAE1pY3Jvc29mdCAoUikgSExTTCBTaGFkZXIgQ29tcGlsZXIgMTAuMQBJU0dORAAAAAIAAAAIAAAAOAAAAAAAAAAAAAAAAwAAAAAAAAAHBwAAOAAAAAEAAAAAAAAAAwAAAAEAAAAHAAAAVEVYQ09PUkQAq6urT1NHTiwAAAABAAAACAAAACAAAAAAAAAAAAAAAAMAAAAAAAAADwAAAFNWX1RhcmdldACrq1NIRFKQAAAAQAAAACQAAABiEAADchAQAAAAAABlAAAD8iAQAAAAAABoAAACAQAAAC8AAAVyABAAAAAAAEYSEAAAAAAAOAAACnIAEAAAAAAARgIQAAAAAAACQAAAL7roPi%66D4vuug%AAAAABkAAAVyIBAAAAAAAEYCEAAAAAAANgAABYIgEAAAAAAAAUAAAAAAgD8%AAABU1RBVHQAAAAFAAAAAQAAAAAAAAACAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";
kha_Shaders.Gizmo_overlay_vertData0 = "s1694:A2NvbAAAbm9yAAFwb3MAAgEkR2xvYmFscwAAAk4AAAAAACwAAAADA1dWUAAwAAAAQAAAAAQERFhCQ0rO:eng:ZxEbPTpqu6yEygBAAAAwAQAAAUAAAA0AAAAHAEAAIABAADwAQAARAQAAFJERUbgAAAAAQAAAEgAAAABAAAAHAAAAAAE:v8AAQAAuAAAADwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAJEdsb2JhbHMAq6urPAAAAAIAAABgAAAAcAAAAAAAAAAAAAAAkAAAAAAAAAAsAAAAAgAAAJQAAAAAAAAApAAAADAAAABAAAAAAgAAAKgAAAAAAAAATgCrqwMAAwADAAMAAAAAAAAAAABXVlAAAwADAAQABAAAAAAAAAAAAE1pY3Jvc29mdCAoUikgSExTTCBTaGFkZXIgQ29tcGlsZXIgMTAuMQBJU0dOXAAAAAMAAAAIAAAAUAAAAAAAAAAAAAAAAwAAAAAAAAAPBwAAUAAAAAEAAAAAAAAAAwAAAAEAAAADAwAAUAAAAAIAAAAAAAAAAwAAAAIAAAAPDwAAVEVYQ09PUkQAq6urT1NHTmgAAAADAAAACAAAAFAAAAAAAAAAAAAAAAMAAAAAAAAABwgAAFAAAAABAAAAAAAAAAMAAAABAAAABwgAAFkAAAAAAAAAAQAAAAMAAAACAAAADwAAAFRFWENPT1JEAFNWX1Bvc2l0aW9uAKurq1NIRFJMAgAAQAABAJMAAABZAAAERo4gAAAAAAAHAAAAXwAAA3IQEAAAAAAAXwAAAzIQEAABAAAAXwAAA:IQEAACAAAAZQAAA3IgEAAAAAAAZQAAA3IgEAABAAAAZwAABPIgEAACAAAAAQAAAGgAAAICAAAANgAABXIgEAAAAAAARhIQAAAAAAA2AAAFMgAQAAAAAABGEBAAAQAAADYAAAVCABAAAAAAADoQEAACAAAAEAAACBIAEAABAAAARgIQAAAAAABGgiAAAAAAAAAAAAAQAAAIIgAQAAEAAABGAhAAAAAAAEaCIAAAAAAAAQAAABAAAAhCABAAAQAAAEYCEAAAAAAARoIgAAAAAAACAAAAEAAABxIAEAAAAAAARgIQAAEAAABGAhAAAQAAAEQAAAUSABAAAAAAAAoAEAAAAAAAOAAAB3IgEAABAAAABgAQAAAAAABGAhAAAQAAADYAAAVyABAAAAAAAEYSEAACAAAANgAABYIAEAAAAAAAAUAAAAAAgD8RAAAIEgAQAAEAAABGDhAAAAAAAEaOIAAAAAAABQAAABEAAAgiABAAAQAAAEYOEAAAAAAARo4gAAAAAAAGAAAAAAAABxIAEAABAAAAGgAQAAEAAAAKABAAAQAAADYAAAWCIBAAAgAAABoAEAABAAAAOAAAB0IgEAACAAAACgAQAAEAAAABQAAAAAAAPxEAAAgSIBAAAgAAAEYOEAAAAAAARo4gAAAAAAADAAAAEQAACCIgEAACAAAARg4QAAAAAABGjiAAAAAAAAQAAAA%AAABU1RBVHQAAAATAAAAAgAAAAAAAAAGAAAADAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";
kha_Shaders.Material2_mesh_fragData0 = "s1652:AAAARFhCQxgvhOipayb9xfIjmXeYQMUBAAAA1AQAAAUAAAA0AAAAgAAAAOQAAABIAQAAWAQAAFJERUZEAAAAAAAAAAAAAAAAAAAAHAAAAAAE::8AAQAAHAAAAE1pY3Jvc29mdCAoUikgSExTTCBTaGFkZXIgQ29tcGlsZXIgMTAuMQBJU0dOXAAAAAMAAAAIAAAAUAAAAAAAAAAAAAAAAwAAAAAAAAAPCwAAUAAAAAEAAAAAAAAAAwAAAAEAAAAHBwAAUAAAAAIAAAAAAAAAAwAAAAIAAAAPCwAAVEVYQ09PUkQAq6urT1NHTlwAAAADAAAACAAAAFAAAAAAAAAAAAAAAAMAAAAAAAAADwAAAFAAAAABAAAAAAAAAAMAAAABAAAADwAAAFAAAAACAAAAAAAAAAMAAAACAAAADwAAAFNWX1RhcmdldACrq1NIRFIIAwAAQAAAAMIAAABiEAADshAQAAAAAABiEAADchAQAAEAAABiEAADshAQAAIAAABlAAAD8iAQAAAAAABlAAAD8iAQAAEAAABlAAAD8iAQAAIAAABoAAACAwAAABAAAAcSABAAAAAAAEYSEAABAAAARhIQAAEAAABEAAAFEgAQAAAAAAAKABAAAAAAADgAAAdyABAAAAAAAAYAEAAAAAAAJhkQAAEAAAAAAAAJggAQAAAAAAAqABCAgQAAAAAAAAAaABCAgQAAAAAAAAAAAAAIggAQAAAAAAAKABCAgQAAAAAAAAA6ABAAAAAAAA4AAAdyABAAAAAAAEYCEAAAAAAA9g8QAAAAAAAAAAALMgAQAAEAAABmChCAwQAAAAAAAAACQAAAAACAPwAAgD8AAAAAAAAAAB0AAApyABAAAgAAAEYCEAAAAAAAAkAAAAAAAAAAAAAAAAAAAAAAAAA3AAAPkgAQAAAAAABWCRAAAgAAAAJAAAAAAIA:AAAAAAAAAAAAAIA:AkAAAAAAgL8AAAAAAAAAAAAAgL84AAAHkgAQAAAAAAAGDBAAAAAAAAYEEAABAAAANwAACTIgEAAAAAAABgAQAAIAAACWBRAAAAAAAMYAEAAAAAAANgAACMIgEAAAAAAAAkAAAAAAAAAAAAAAAAAAAAAAAAA2AAAI8iAQAAEAAAACQAAAzcxMP83MTD:NzEw:AACAPw4AAAcyABAAAAAAAEYQEAACAAAA9h8QAAIAAAAyAAAPMgAQAAAAAABGABAAAAAAAAJAAAAAAAA:AAAAPwAAAAAAAAAAAkAAAAAAAD8AAAA:AAAAAAAAAAAOAAAHwgAQAAAAAAAGFBAAAAAAAPYfEAAAAAAAMgAAD8IAEAAAAAAApg4QAAAAAAACQAAAAAAAAAAAAAAAAAA:AAAAPwJAAAAAAAAAAAAAAAAAAD8AAAA:AAAACDIgEAACAAAA5goQgEEAAAAAAAAARgAQAAAAAAA2AAAIwiAQAAIAAAACQAAAAAAAAAAAAAAAAAAAAAAAAD4AAAFTVEFUdAAAABQAAAADAAAAAAAAAAYAAAAOAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";
kha_Shaders.Material_mesh_fragData0 = "s1764:AAAARFhCQ1PIV42ClPvkeug0wJveDHsBAAAAKAUAAAUAAAA0AAAAgAAAAPwAAABgAQAArAQAAFJERUZEAAAAAAAAAAAAAAAAAAAAHAAAAAAE::8AAQAAHAAAAE1pY3Jvc29mdCAoUikgSExTTCBTaGFkZXIgQ29tcGlsZXIgMTAuMQBJU0dOdAAAAAQAAAAIAAAAaAAAAAAAAAAAAAAAAwAAAAAAAAAPCwAAaAAAAAEAAAAAAAAAAwAAAAEAAAADAQAAaAAAAAIAAAAAAAAAAwAAAAIAAAAHBwAAaAAAAAMAAAAAAAAAAwAAAAMAAAAPCwAAVEVYQ09PUkQAq6urT1NHTlwAAAADAAAACAAAAFAAAAAAAAAAAAAAAAMAAAAAAAAADwAAAFAAAAABAAAAAAAAAAMAAAABAAAADwAAAFAAAAACAAAAAAAAAAMAAAACAAAADwAAAFNWX1RhcmdldACrq1NIRFJEAwAAQAAAANEAAABiEAADshAQAAAAAABiEAADEhAQAAEAAABiEAADchAQAAIAAABiEAADshAQAAMAAABlAAAD8iAQAAAAAABlAAAD8iAQAAEAAABlAAAD8iAQAAIAAABoAAACAwAAABAAAAcSABAAAAAAAEYSEAACAAAARhIQAAIAAABEAAAFEgAQAAAAAAAKABAAAAAAADgAAAdyABAAAAAAAAYAEAAAAAAAJhkQAAIAAAAAAAAJggAQAAAAAAAqABCAgQAAAAAAAAAaABCAgQAAAAAAAAAAAAAIggAQAAAAAAAKABCAgQAAAAAAAAA6ABAAAAAAAA4AAAdyABAAAAAAAEYCEAAAAAAA9g8QAAAAAAAAAAALMgAQAAEAAABmChCAwQAAAAAAAAACQAAAAACAPwAAgD8AAAAAAAAAAB0AAApyABAAAgAAAEYCEAAAAAAAAkAAAAAAAAAAAAAAAAAAAAAAAAA3AAAPkgAQAAAAAABWCRAAAgAAAAJAAAAAAIA:AAAAAAAAAAAAAIA:AkAAAAAAgL8AAAAAAAAAAAAAgL84AAAHkgAQAAAAAAAGDBAAAAAAAAYEEAABAAAANwAACTIgEAAAAAAABgAQAAIAAACWBRAAAAAAAMYAEAAAAAAANgAACMIgEAAAAAAAAkAAAAAAAAAAAAAAzczMPgAAAAAyAAAPciAQAAEAAAAGEBAAAQAAAAJAAACVv9Yzlb:WM5W:1jMAAAAAAkAAAInSXj6J0l4%idJePgAAAAA2AAAFgiAQAAEAAAABQAAAAACAPw4AAAcyABAAAAAAAEYQEAADAAAA9h8QAAMAAAAyAAAPMgAQAAAAAABGABAAAAAAAAJAAAAAAAA:AAAAPwAAAAAAAAAAAkAAAAAAAD8AAAA:AAAAAAAAAAAOAAAHwgAQAAAAAAAGFBAAAAAAAPYfEAAAAAAAMgAAD8IAEAAAAAAApg4QAAAAAAACQAAAAAAAAAAAAAAAAAA:AAAAPwJAAAAAAAAAAAAAAAAAAD8AAAA:AAAACDIgEAACAAAA5goQgEEAAAAAAAAARgAQAAAAAAA2AAAIwiAQAAIAAAACQAAAAAAAAAAAAAAAAAAAAAAAAD4AAAFTVEFUdAAAABUAAAADAAAAAAAAAAcAAAAPAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";
kha_Shaders.Material_mesh_vertData0 = "s2166:A25vcgAAcG9zAAF0ZXgAAgEkR2xvYmFscwAABHRleFVucGFjawAAAAAABAAAAAEBTgAQAAAALAAAAAMDV1ZQAEAAAABAAAAABARwcmV2V1ZQAIAAAABAAAAABAREWEJDtV9XDHQNgGc8%mQnkAuU5AEAAAD8BQAABQAAADQAAABwAQAA1AEAAHQCAACABQAAUkRFRjQBAAABAAAASAAAAAEAAAAcAAAAAAT%:wABAAAMAQAAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAkR2xvYmFscwCrq6s8AAAABAAAAGAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAQAAAACAAAAzAAAAAAAAADcAAAAEAAAACwAAAACAAAA4AAAAAAAAADwAAAAQAAAAEAAAAACAAAA9AAAAAAAAAAEAQAAgAAAAEAAAAACAAAA9AAAAAAAAAB0ZXhVbnBhY2sAq6sAAAMAAQABAAAAAAAAAAAATgCrqwMAAwADAAMAAAAAAAAAAABXVlAAAwADAAQABAAAAAAAAAAAAHByZXZXVlAATWljcm9zb2Z0IChSKSBITFNMIFNoYWRlciBDb21waWxlciAxMC4xAElTR05cAAAAAwAAAAgAAABQAAAAAAAAAAAAAAADAAAAAAAAAAMDAABQAAAAAQAAAAAAAAADAAAAAQAAAA8PAABQAAAAAgAAAAAAAAADAAAAAgAAAAMDAABURVhDT09SRACrq6tPU0dOmAAAAAUAAAAIAAAAgAAAAAAAAAAAAAAAAwAAAAAAAAAPAAAAgAAAAAEAAAAAAAAAAwAAAAEAAAADDAAAgAAAAAIAAAAAAAAAAwAAAAIAAAAHCAAAgAAAAAMAAAAAAAAAAwAAAAMAAAAPAAAAiQAAAAAAAAABAAAAAwAAAAQAAAAPAAAAVEVYQ09PUkQAU1ZfUG9zaXRpb24Aq6urU0hEUgQDAABAAAEAwQAAAFkAAARGjiAAAAAAAAwAAABfAAADMhAQAAAAAABfAAAD8hAQAAEAAABfAAADMhAQAAIAAABlAAAD8iAQAAAAAABlAAADMiAQAAEAAABlAAADciAQAAIAAABlAAAD8iAQAAMAAABnAAAE8iAQAAQAAAABAAAAaAAAAgMAAAA2AAAFcgAQAAAAAABGEhAAAQAAADYAAAWCABAAAAAAAAFAAAAAAIA:EQAACBIgEAAAAAAARg4QAAAAAABGjiAAAAAAAAgAAAARAAAIIiAQAAAAAABGDhAAAAAAAEaOIAAAAAAACQAAABEAAAhCIBAAAAAAAEYOEAAAAAAARo4gAAAAAAAKAAAAEQAACIIgEAAAAAAARg4QAAAAAABGjiAAAAAAAAsAAAA4AAAIMiAQAAEAAABGEBAAAgAAAAaAIAAAAAAAAAAAADYAAAUyABAAAQAAAEYQEAAAAAAANgAABUIAEAABAAAAOhAQAAEAAAAQAAAIEgAQAAIAAABGAhAAAQAAAEaCIAAAAAAAAQAAABAAAAgiABAAAgAAAEYCEAABAAAARoIgAAAAAAACAAAAEAAACEIAEAACAAAARgIQAAEAAABGgiAAAAAAAAMAAAAQAAAHEgAQAAEAAABGAhAAAgAAAEYCEAACAAAARAAABRIAEAABAAAACgAQAAEAAAA4AAAHciAQAAIAAAAGABAAAQAAAEYCEAACAAAAEQAACBIAEAABAAAARg4QAAAAAABGjiAAAAAAAAQAAAARAAAIIgAQAAEAAABGDhAAAAAAAEaOIAAAAAAABQAAABEAAAhCABAAAQAAAEYOEAAAAAAARo4gAAAAAAAGAAAAEQAACIIAEAABAAAARg4QAAAAAABGjiAAAAAAAAcAAAA2AAAF8iAQAAMAAABGDhAAAQAAADYAAAWyIBAABAAAAEYMEAABAAAAAAAABxIAEAAAAAAAOgAQAAEAAAAqABAAAQAAADgAAAdCIBAABAAAAAoAEAAAAAAAAUAAAAAAAD8%AAABU1RBVHQAAAAYAAAAAwAAAAAAAAAIAAAAEQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";
kha_Shaders.armdefault_mesh_fragData0 = "s1652:AAAARFhCQ6qW9m5af4m:Tobj:rIqQEMBAAAA1AQAAAUAAAA0AAAAgAAAAOQAAABIAQAAWAQAAFJERUZEAAAAAAAAAAAAAAAAAAAAHAAAAAAE::8AAQAAHAAAAE1pY3Jvc29mdCAoUikgSExTTCBTaGFkZXIgQ29tcGlsZXIgMTAuMQBJU0dOXAAAAAMAAAAIAAAAUAAAAAAAAAAAAAAAAwAAAAAAAAAPCwAAUAAAAAEAAAAAAAAAAwAAAAEAAAAHBwAAUAAAAAIAAAAAAAAAAwAAAAIAAAAPCwAAVEVYQ09PUkQAq6urT1NHTlwAAAADAAAACAAAAFAAAAAAAAAAAAAAAAMAAAAAAAAADwAAAFAAAAABAAAAAAAAAAMAAAABAAAADwAAAFAAAAACAAAAAAAAAAMAAAACAAAADwAAAFNWX1RhcmdldACrq1NIRFIIAwAAQAAAAMIAAABiEAADshAQAAAAAABiEAADchAQAAEAAABiEAADshAQAAIAAABlAAAD8iAQAAAAAABlAAAD8iAQAAEAAABlAAAD8iAQAAIAAABoAAACAwAAABAAAAcSABAAAAAAAEYSEAABAAAARhIQAAEAAABEAAAFEgAQAAAAAAAKABAAAAAAADgAAAdyABAAAAAAAAYAEAAAAAAAJhkQAAEAAAAAAAAJggAQAAAAAAAqABCAgQAAAAAAAAAaABCAgQAAAAAAAAAAAAAIggAQAAAAAAAKABCAgQAAAAAAAAA6ABAAAAAAAA4AAAdyABAAAAAAAEYCEAAAAAAA9g8QAAAAAAAAAAALMgAQAAEAAABmChCAwQAAAAAAAAACQAAAAACAPwAAgD8AAAAAAAAAAB0AAApyABAAAgAAAEYCEAAAAAAAAkAAAAAAAAAAAAAAAAAAAAAAAAA3AAAPkgAQAAAAAABWCRAAAgAAAAJAAAAAAIA:AAAAAAAAAAAAAIA:AkAAAAAAgL8AAAAAAAAAAAAAgL84AAAHkgAQAAAAAAAGDBAAAAAAAAYEEAABAAAANwAACTIgEAAAAAAABgAQAAIAAACWBRAAAAAAAMYAEAAAAAAANgAACMIgEAAAAAAAAkAAAAAAAAAAAAAAAACAPgAAAAA2AAAI8iAQAAEAAAACQAAAzcxMP83MTD:NzEw:AACAPw4AAAcyABAAAAAAAEYQEAACAAAA9h8QAAIAAAAyAAAPMgAQAAAAAABGABAAAAAAAAJAAAAAAAA:AAAAPwAAAAAAAAAAAkAAAAAAAD8AAAA:AAAAAAAAAAAOAAAHwgAQAAAAAAAGFBAAAAAAAPYfEAAAAAAAMgAAD8IAEAAAAAAApg4QAAAAAAACQAAAAAAAAAAAAAAAAAA:AAAAPwJAAAAAAAAAAAAAAAAAAD8AAAA:AAAACDIgEAACAAAA5goQgEEAAAAAAAAARgAQAAAAAAA2AAAIwiAQAAIAAAACQAAAAAAAAAAAAAAAAAAAAAAAAD4AAAFTVEFUdAAAABQAAAADAAAAAAAAAAYAAAAOAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";
kha_Shaders.armdefault_mesh_vertData0 = "s1924:Am5vcgAAcG9zAAEBJEdsb2JhbHMAAANOAAAAAAAsAAAAAwNXVlAAMAAAAEAAAAAEBHByZXZXVlAAcAAAAEAAAAAEBERYQkMro57hnI2Wc:tYMJCmwkcUAQAAAGAFAAAFAAAANAAAADwBAACIAQAAEAIAAOQEAABSREVGAAEAAAEAAABIAAAAAQAAABwAAAAABP7:AAEAANgAAAA8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAACRHbG9iYWxzAKurqzwAAAADAAAAYAAAALAAAAAAAAAAAAAAAKgAAAAAAAAALAAAAAIAAACsAAAAAAAAALwAAAAwAAAAQAAAAAIAAADAAAAAAAAAANAAAABwAAAAQAAAAAIAAADAAAAAAAAAAE4Aq6sDAAMAAwADAAAAAAAAAAAAV1ZQAAMAAwAEAAQAAAAAAAAAAABwcmV2V1ZQAE1pY3Jvc29mdCAoUikgSExTTCBTaGFkZXIgQ29tcGlsZXIgMTAuMQBJU0dORAAAAAIAAAAIAAAAOAAAAAAAAAAAAAAAAwAAAAAAAAADAwAAOAAAAAEAAAAAAAAAAwAAAAEAAAAPDwAAVEVYQ09PUkQAq6urT1NHToAAAAAEAAAACAAAAGgAAAAAAAAAAAAAAAMAAAAAAAAADwAAAGgAAAABAAAAAAAAAAMAAAABAAAABwgAAGgAAAACAAAAAAAAAAMAAAACAAAADwAAAHEAAAAAAAAAAQAAAAMAAAADAAAADwAAAFRFWENPT1JEAFNWX1Bvc2l0aW9uAKurq1NIRFLMAgAAQAABALMAAABZAAAERo4gAAAAAAALAAAAXwAAAzIQEAAAAAAAXwAAA:IQEAABAAAAZQAAA:IgEAAAAAAAZQAAA3IgEAABAAAAZQAAA:IgEAACAAAAZwAABPIgEAADAAAAAQAAAGgAAAIDAAAANgAABXIAEAAAAAAARhIQAAEAAAA2AAAFggAQAAAAAAABQAAAAACAPxEAAAgSIBAAAAAAAEYOEAAAAAAARo4gAAAAAAAHAAAAEQAACCIgEAAAAAAARg4QAAAAAABGjiAAAAAAAAgAAAARAAAIQiAQAAAAAABGDhAAAAAAAEaOIAAAAAAACQAAABEAAAiCIBAAAAAAAEYOEAAAAAAARo4gAAAAAAAKAAAANgAABTIAEAABAAAARhAQAAAAAAA2AAAFQgAQAAEAAAA6EBAAAQAAABAAAAgSABAAAgAAAEYCEAABAAAARoIgAAAAAAAAAAAAEAAACCIAEAACAAAARgIQAAEAAABGgiAAAAAAAAEAAAAQAAAIQgAQAAIAAABGAhAAAQAAAEaCIAAAAAAAAgAAABAAAAcSABAAAQAAAEYCEAACAAAARgIQAAIAAABEAAAFEgAQAAEAAAAKABAAAQAAADgAAAdyIBAAAQAAAAYAEAABAAAARgIQAAIAAAARAAAIEgAQAAEAAABGDhAAAAAAAEaOIAAAAAAAAwAAABEAAAgiABAAAQAAAEYOEAAAAAAARo4gAAAAAAAEAAAAEQAACEIAEAABAAAARg4QAAAAAABGjiAAAAAAAAUAAAARAAAIggAQAAEAAABGDhAAAAAAAEaOIAAAAAAABgAAADYAAAXyIBAAAgAAAEYOEAABAAAANgAABbIgEAADAAAARgwQAAEAAAAAAAAHEgAQAAAAAAA6ABAAAQAAACoAEAABAAAAOAAAB0IgEAADAAAACgAQAAAAAAABQAAAAAAAPz4AAAFTVEFUdAAAABcAAAADAAAAAAAAAAYAAAAQAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";
kha_Shaders.armdefault_voxel_fragData0 = "s1034:AAF2b3hlbHMAAABEWEJDHUAKG%m7S0Y0lXcLIp2JpAEAAAD8AgAABQAAADQAAADIAAAA:AAAAAwBAABgAgAAUkRFRowAAAAAAAAAAAAAAAEAAAA8AAAAAAX::wABAABjAAAAUkQxMTwAAAAYAAAAIAAAACgAAAAkAAAADAAAAAAAAABcAAAABAAAAAUAAAAIAAAA:::::wAAAAABAAAAAAAAAHZveGVscwBNaWNyb3NvZnQgKFIpIEhMU0wgU2hhZGVyIENvbXBpbGVyIDEwLjEAq0lTR04sAAAAAQAAAAgAAAAgAAAAAAAAAAAAAAADAAAAAAAAAAcHAABURVhDT09SRACrq6tPU0dOCAAAAAAAAAAIAAAAU0hFWEwBAABQAAAAUwAAAGoIAAGcKAAEAOARAAAAAABVVQAAYhAAA3IQEAAAAAAAaAAAAgEAAAAxAAALcgAQAAAAAAACQAAAAACAPwAAgD8AAIA:AAAAACYZEICBAAAAAAAAADwAAAcSABAAAAAAABoAEAAAAAAACgAQAAAAAAA8AAAHEgAQAAAAAAAqABAAAAAAAAoAEAAAAAAAHwAEAwoAEAAAAAAAPgAAARUAAAEyAAAP8gAQAAAAAABGGhAAAAAAAAJAAAAAAAA:AAAAPwAAAD8AAAA:AkAAAAAAAD8AAAA:AAAAPwAAAD84AAAK8gAQAAAAAABGDhAAAAAAAAJAAAAAAIBDAACAQwAAgEMAAIBDHAAABfIAEAAAAAAARg4QAAAAAACkAAAK8uARAAAAAABGDhAAAAAAAAJAAAAAAIA:AACAPwAAgD8AAIA:PgAAAVNUQVSUAAAACwAAAAEAAAAAAAAAAQAAAAMAAAAAAAAAAgAAAAIAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAA";
kha_Shaders.armdefault_voxel_geomData0 = "s1503:AAAARFhCQ8Omjws48jM6S0bHy9%aUV4BAAAAZAQAAAUAAAA0AAAAoAAAANQAAAA0AQAAyAMAAFJERUZkAAAAAAAAAAAAAAAAAAAAPAAAAAAFU0cAAQAAPAAAAFJEMTE8AAAAGAAAACAAAAAoAAAAJAAAAAwAAAAAAAAATWljcm9zb2Z0IChSKSBITFNMIFNoYWRlciBDb21waWxlciAxMC4xAElTR04sAAAAAQAAAAgAAAAgAAAAAAAAAAEAAAADAAAAAAAAAA8HAABTVl9QT1NJVElPTgBPU0c1WAAAAAIAAAAIAAAAAAAAAEAAAAAAAAAAAAAAAAMAAAAAAAAABwgAAAAAAABJAAAAAAAAAAEAAAADAAAAAQAAAA8AAABURVhDT09SRABTVl9QT1NJVElPTgCrq6tTSEVYjAIAAFAAAgCjAAAAaggAAWEAAAXyECAAAwAAAAAAAAABAAAAaAAAAgMAAABdGAABjwAAAwAAEQAAAAAAXCgAAWUAAANyIBAAAAAAAGcAAATyIBAAAQAAAAEAAABeAAACAwAAAAAAAAryABAAAAAAACYUIIBBAAAAAAAAAAAAAAAmFCAAAQAAAAAAAAAAAAAK8gAQAAEAAACWEiCAQQAAAAAAAAAAAAAAlhIgAAIAAAAAAAAAOAAAB:IAEAACAAAARg4QAAAAAABGDhAAAQAAADIAAAryABAAAAAAADYIEAAAAAAA5gMQAAEAAABGDhCAQQAAAAIAAAAxAAAJ8gAQAAAAAABGDhCAgQAAAAAAAAD2ABCAgQAAAAAAAAABAAAHMgAQAAAAAADWBRAAAAAAAIYAEAAAAAAANgAABUIAEAAAAAAAAUAAAAAAAAAwAAABIQAAB4IAEAAAAAAAKgAQAAAAAAABQAAAAwAAAAMABAM6ABAAAAAAAB8ABAMKABAAAAAAADYAAAcyABAAAQAAAEYQoAAqABAAAAAAAAAAAAASAAABHwAEAxoAEAAAAAAANgAABxIAEAABAAAAGhCgACoAEAAAAAAAAAAAABIAAAE2AAAHEgAQAAEAAAAKEKAAKgAQAAAAAAAAAAAAFQAAATYAAAciABAAAQAAACoQoAAqABAAAAAAAAAAAAAVAAABNgAAB3IgEAAAAAAARhKgACoAEAAAAAAAAAAAADYAAAUyIBAAAQAAAEYAEAABAAAANgAACMIgEAABAAAAAkAAAAAAAAAAAAAAAAAAAAAAgD91AAADAAARAAAAAAAeAAAHQgAQAAAAAAAqABAAAAAAAAFAAAABAAAAFgAAAT4AAAFTVEFUlAAAABsAAAADAAAAAAAAAAMAAAAFAAAAAgAAAAEAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";
kha_Shaders.armdefault_voxel_vertData0 = "s1118:AXBvcwAAASRHbG9iYWxzAAABVwAAAAAAQAAAAAQERFhCQ3fkiWll7PceGW9yo1DONisBAAAAKAMAAAUAAAA0AAAAPAEAAHABAACkAQAAjAIAAFJERUYAAQAAAQAAAGgAAAABAAAAPAAAAAAF:v8AAQAA2AAAAFJEMTE8AAAAGAAAACAAAAAoAAAAJAAAAAwAAAAAAAAAXAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAkR2xvYmFscwCrq6tcAAAAAQAAAIAAAABAAAAAAAAAAAAAAACoAAAAAAAAAEAAAAACAAAAtAAAAAAAAAD:::::AAAAAP::::8AAAAAVwBmbG9hdDR4NACrAwADAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACqAAAATWljcm9zb2Z0IChSKSBITFNMIFNoYWRlciBDb21waWxlciAxMC4xAElTR04sAAAAAQAAAAgAAAAgAAAAAAAAAAAAAAADAAAAAAAAAA8HAABURVhDT09SRACrq6tPU0dOLAAAAAEAAAAIAAAAIAAAAAAAAAABAAAAAwAAAAAAAAAPAAAAU1ZfUE9TSVRJT04AU0hFWOAAAABQAAEAOAAAAGoIAAFZAAAERo4gAAAAAAADAAAAXwAAA3IQEAAAAAAAZwAABPIgEAAAAAAAAQAAAGgAAAIBAAAANgAABYIgEAAAAAAAAUAAAAAAgD82AAAFcgAQAAAAAABGEhAAAAAAADYAAAWCABAAAAAAAAFAAAAAAIA:EQAACBIgEAAAAAAARg4QAAAAAABGjiAAAAAAAAAAAAARAAAIIiAQAAAAAABGDhAAAAAAAEaOIAAAAAAAAQAAABEAAAhCIBAAAAAAAEYOEAAAAAAARo4gAAAAAAACAAAAPgAAAVNUQVSUAAAABwAAAAEAAAAAAAAAAgAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";
kha_Shaders.bloom_pass_fragData0 = "s936:AAJfdGV4X3NhbXBsZXIAAHRleAAAAERYQkMMs3S%hoBlNsQIW0AguKw3AQAAAKgCAAAFAAAANAAAANQAAAAIAQAAPAEAACwCAABSREVGmAAAAAAAAAAAAAAAAgAAABwAAAAABP::AAEAAG0AAABcAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAQAAAGkAAAACAAAABQAAAAQAAAD:::::AAAAAAEAAAANAAAAX3RleF9zYW1wbGVyAHRleABNaWNyb3NvZnQgKFIpIEhMU0wgU2hhZGVyIENvbXBpbGVyIDEwLjEAq6urSVNHTiwAAAABAAAACAAAACAAAAAAAAAAAAAAAAMAAAAAAAAAAwMAAFRFWENPT1JEAKurq09TR04sAAAAAQAAAAgAAAAgAAAAAAAAAAAAAAADAAAAAAAAAA8AAABTVl9UYXJnZXQAq6tTSERS6AAAAEAAAAA6AAAAWgAAAwBgEAAAAAAAWBgABABwEAAAAAAAVVUAAGIQAAMyEBAAAAAAAGUAAAPyIBAAAAAAAGgAAAIBAAAASAAAC:IAEAAAAAAARhAQAAAAAABGfhAAAAAAAABgEAAAAAAAAUAAAAAAAAAQAAAKggAQAAAAAABGAhAAAAAAAAJAAADQs1k%WRc3P5jdkz0AAAAAMQAAB4IAEAAAAAAAAUAAAAAAwD86ABAAAAAAAAEAAAdyIBAAAAAAAEYCEAAAAAAA9g8QAAAAAAA2AAAFgiAQAAAAAAABQAAAAAAAAD4AAAFTVEFUdAAAAAYAAAABAAAAAAAAAAIAAAACAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";
kha_Shaders.blur_adaptive_pass_fragData0 = "s2067:AAVfZ2J1ZmZlcjBfc2FtcGxlcgAAX3RleF9zYW1wbGVyAAFnYnVmZmVyMAAAdGV4AAEkR2xvYmFscwAAAWRpckludgAAAAAACAAAAAIBRFhCQ59Uqm%jKTX%okKY%99Ad6IBAAAAwAUAAAUAAAA0AAAAoAEAANQBAAAIAgAARAUAAFJERUZkAQAAAQAAAPQAAAAFAAAAHAAAAAAE::8AAQAAPAEAALwAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAzgAAAAMAAAAAAAAAAAAAAAAAAAABAAAAAQAAAAEAAADbAAAAAgAAAAUAAAAEAAAA:::::wAAAAABAAAADQAAAOQAAAACAAAABQAAAAQAAAD:::::AQAAAAEAAAANAAAA6AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAABfZ2J1ZmZlcjBfc2FtcGxlcgBfdGV4X3NhbXBsZXIAZ2J1ZmZlcjAAdGV4ACRHbG9iYWxzAKurq%gAAAABAAAADAEAABAAAAAAAAAAAAAAACQBAAAAAAAACAAAAAIAAAAsAQAAAAAAAGRpckludgCrAQADAAEAAgAAAAAAAAAAAE1pY3Jvc29mdCAoUikgSExTTCBTaGFkZXIgQ29tcGlsZXIgMTAuMQBJU0dOLAAAAAEAAAAIAAAAIAAAAAAAAAAAAAAAAwAAAAAAAAADAwAAVEVYQ09PUkQAq6urT1NHTiwAAAABAAAACAAAACAAAAAAAAAAAAAAAAMAAAAAAAAADwAAAFNWX1RhcmdldACrq1NIRFI0AwAAQAAAAM0AAABZAAAERo4gAAAAAAABAAAAWgAAAwBgEAAAAAAAWgAAAwBgEAABAAAAWBgABABwEAAAAAAAVVUAAFgYAAQAcBAAAQAAAFVVAABiEAADMhAQAAAAAABlAAAD8iAQAAAAAABoAAACBAAAAEgAAAvyABAAAAAAAEYQEAAAAAAARn4QAAAAAAAAYBAAAAAAAAFAAAAAAAAAHQAABxIAEAAAAAAAKgAQAAAAAAABQAAAzcxMPx8ABAMKABAAAAAAAEgAAAvyABAAAQAAAEYQEAAAAAAARn4QAAEAAAAAYBAAAQAAAAFAAAAAAAAAEgAAATYAAAhyABAAAQAAAAJAAAAAAAAAAAAAAAAAAAAAAAAAFQAAAR8AAAMKABAAAAAAADIAAA3yABAAAAAAAEaEIAAAAAAAAAAAAAJAAAAAACBAAAAgQAAAwD8AAMA:RhQQAAAAAABIAAAL8gAQAAIAAABGABAAAAAAAEZ%EAABAAAAAGAQAAEAAAABQAAAAAAAAEgAAAvyABAAAAAAAOYKEAAAAAAARn4QAAEAAAAAYBAAAQAAAAFAAAAAAAAAAAAAB3IAEAAAAAAARgIQAAAAAABGAhAAAgAAAEgAAAvyABAAAgAAAEYQEAAAAAAARn4QAAEAAAAAYBAAAQAAAAFAAAAAAAAAAAAAB3IAEAAAAAAARgIQAAAAAABGAhAAAgAAADIAAA7yABAAAgAAAEaEIIBBAAAAAAAAAAAAAAACQAAAAADAPwAAwD8AACBAAAAgQEYUEAAAAAAASAAAC:IAEAADAAAARgAQAAIAAABGfhAAAQAAAABgEAABAAAAAUAAAAAAAAAAAAAHcgAQAAAAAABGAhAAAAAAAEYCEAADAAAASAAAC:IAEAACAAAA5goQAAIAAABGfhAAAQAAAABgEAABAAAAAUAAAAAAAAAAAAAHcgAQAAAAAABGAhAAAAAAAEYCEAACAAAAOAAACnIAEAABAAAARgIQAAAAAAACQAAAzcxMPs3MTD7NzEw%AAAAABUAAAE2AAAFciAQAAAAAABGAhAAAQAAADYAAAWCIBAAAAAAAAFAAAAAAAAAPgAAAVNUQVR0AAAAGAAAAAQAAAAAAAAAAgAAAAgAAAAAAAAAAAAAAAIAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";
kha_Shaders.blur_edge_pass_fragData0 = "s3976:AAVfZ2J1ZmZlcjBfc2FtcGxlcgAAX3RleF9zYW1wbGVyAAFnYnVmZmVyMAAAdGV4AAEkR2xvYmFscwAAAWRpckludgAAAAAACAAAAAIBRFhCQ0xqlwn7DEcTh2cykaQu8nABAAAAWAsAAAUAAAA0AAAAoAEAANQBAAAIAgAA3AoAAFJERUZkAQAAAQAAAPQAAAAFAAAAHAAAAAAE::8AAQAAPAEAALwAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAzgAAAAMAAAAAAAAAAAAAAAAAAAABAAAAAQAAAAEAAADbAAAAAgAAAAUAAAAEAAAA:::::wAAAAABAAAADQAAAOQAAAACAAAABQAAAAQAAAD:::::AQAAAAEAAAANAAAA6AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAABfZ2J1ZmZlcjBfc2FtcGxlcgBfdGV4X3NhbXBsZXIAZ2J1ZmZlcjAAdGV4ACRHbG9iYWxzAKurq%gAAAABAAAADAEAABAAAAAAAAAAAAAAACQBAAAAAAAACAAAAAIAAAAsAQAAAAAAAGRpckludgCrAQADAAEAAgAAAAAAAAAAAE1pY3Jvc29mdCAoUikgSExTTCBTaGFkZXIgQ29tcGlsZXIgMTAuMQBJU0dOLAAAAAEAAAAIAAAAIAAAAAAAAAAAAAAAAwAAAAAAAAADAwAAVEVYQ09PUkQAq6urT1NHTiwAAAABAAAACAAAACAAAAAAAAAAAAAAAAMAAAAAAAAAAQ4AAFNWX1RhcmdldACrq1NIRFLMCAAAQAAAADMCAAA1GAAAKgAAAPTABz4AAAAAAAAAAAAAAAC7ewA%AAAAAAAAAAAAAAAAFtrZPQAAAAAAAAAAAAAAAPxvpT0AAAAAAAAAAAAAAABAE2E9AAAAAAAAAAAAAAAAbCQJPQAAAAAAAAAAAAAAAHS1lTwAAAAAAAAAAAAAAADpXxI8AAAAAAAAAAAAAAAAPDCAOwAAAAAAAAAAAAAAAA4yyToAAAAAAAAAAAAAAABZAAAERo4gAAAAAAABAAAAWgAAAwBgEAAAAAAAWgAAAwBgEAABAAAAWBgABABwEAAAAAAAVVUAAFgYAAQAcBAAAQAAAFVVAABiEAADMhAQAAAAAABlAAADEiAQAAAAAABoAAACBgAAAEgAAAvyABAAAAAAAEYQEAAAAAAARn4QAAAAAAAAYBAAAAAAAAFAAAAAAAAAAAAAC3IAEAABAAAARgAQgMEAAAAAAAAAAkAAAAAAgD8AAIA:AACAPwAAAAAAAAAIQgAQAAIAAAAaABCAwQAAAAAAAAAKABAAAQAAAB0AAAdCABAAAAAAACoAEAACAAAAAUAAAAAAAAAdAAAKkgAQAAEAAAAGBBAAAAAAAAJAAAAAAAAAAAAAAAAAAAAAAAAANwAAD5IAEAABAAAABgwQAAEAAAACQAAAAACAPwAAAAAAAAAAAACAPwJAAAAAAIC:AAAAAAAAAAAAAIC:OAAABzIAEAABAAAAxgAQAAEAAACWBRAAAQAAADcAAAkyABAAAgAAAKYKEAAAAAAARgAQAAAAAABGABAAAQAAABAAAAcSABAAAAAAAEYCEAACAAAARgIQAAIAAABEAAAFEgAQAAAAAAAKABAAAAAAADgAAAdyABAAAAAAAAYAEAAAAAAARgIQAAIAAABIAAAL8gAQAAEAAABGEBAAAAAAAEZ%EAABAAAAAGAQAAEAAAABQAAAAAAAADgAAAeCABAAAAAAAAoAEAABAAAAAUAAAPTABz42AAAFEgAQAAEAAAA6ABAAAAAAADYAAAhiABAAAQAAAAJAAAAAAAAA9MAHPgEAAAAAAAAAMAAAASEAAAeCABAAAQAAACoAEAABAAAAAUAAAAgAAAADAAQDOgAQAAEAAAArAAAFggAQAAEAAAAqABAAAQAAADIAAAoyABAAAgAAAEaAIAAAAAAAAAAAAPYPEAABAAAARhAQAAAAAABIAAAL8gAQAAMAAABGABAAAgAAAEZ%EAAAAAAAAGAQAAAAAAABQAAAAAAAAAAAAAtyABAABAAAAEYAEIDBAAAAAwAAAAJAAAAAAIA:AACAPwAAgD8AAAAAAAAACEIAEAAFAAAAGgAQgMEAAAADAAAACgAQAAQAAAAdAAAHQgAQAAIAAAAqABAABQAAAAFAAAAAAAAAHQAACsIAEAADAAAABgQQAAMAAAACQAAAAAAAAAAAAAAAAAAAAAAAADcAAA:CABAAAwAAAKYOEAADAAAAAkAAAAAAAAAAAAAAAACAPwAAgD8CQAAAAAAAAAAAAAAAAIC:AACAvzgAAAfCABAAAwAAAKYOEAADAAAAVgkQAAQAAAA3AAAJMgAQAAUAAACmChAAAgAAAEYAEAADAAAA5goQAAMAAAAQAAAHQgAQAAIAAABGAhAABQAAAEYCEAAFAAAARAAABUIAEAACAAAAKgAQAAIAAAA4AAAHcgAQAAMAAACmChAAAgAAAEYCEAAFAAAAEAAAB0IAEAACAAAARgIQAAMAAABGAhAAAAAAAB0AAAdCABAAAgAAACoAEAACAAAAAUAAADMzcz8BAAAHQgAQAAIAAAAqABAAAgAAAAFAAAAAAIA:SAAAC:IAEAADAAAARgAQAAIAAABGfhAAAQAAAABgEAABAAAAAUAAAAAAAAA4AAAIEgAQAAIAAAAqABAAAgAAAAqQkAAqABAAAQAAADIAAAkSABAAAgAAAAoAEAADAAAACgAQAAIAAAAKABAAAQAAADIAAAoiABAAAgAAAAqQkAAqABAAAQAAACoAEAACAAAAGgAQAAEAAAAyAAALwgAQAAIAAAAGhCCAQQAAAAAAAAAAAAAA9g8QAAEAAAAGFBAAAAAAAEgAAAvyABAAAwAAAOYKEAACAAAARn4QAAAAAAAAYBAAAAAAAAFAAAAAAAAAAAAAC3IAEAAEAAAARgAQgMEAAAADAAAAAkAAAAAAgD8AAIA:AACAPwAAAAAAAAAIQgAQAAUAAAAaABCAwQAAAAMAAAAKABAABAAAAB0AAAeCABAAAQAAACoAEAAFAAAAAUAAAAAAAAAdAAAKwgAQAAMAAAAGBBAAAwAAAAJAAAAAAAAAAAAAAAAAAAAAAAAANwAAD8IAEAADAAAApg4QAAMAAAACQAAAAAAAAAAAAAAAAIA:AACAPwJAAAAAAAAAAAAAAAAAgL8AAIC:OAAAB8IAEAADAAAApg4QAAMAAABWCRAABAAAADcAAAkyABAABQAAAPYPEAABAAAARgAQAAMAAADmChAAAwAAABAAAAeCABAAAQAAAEYCEAAFAAAARgIQAAUAAABEAAAFggAQAAEAAAA6ABAAAQAAADgAAAdyABAAAwAAAPYPEAABAAAARgIQAAUAAAAQAAAHggAQAAEAAABGAhAAAwAAAEYCEAAAAAAAHQAAB4IAEAABAAAAOgAQAAEAAAABQAAAMzNzPwEAAAeCABAAAQAAADoAEAABAAAAAUAAAAAAgD9IAAAL8gAQAAMAAADmChAAAgAAAEZ%EAABAAAAAGAQAAEAAAABQAAAAAAAADgAAAhCABAAAgAAADoAEAABAAAACpCQACoAEAABAAAAMgAACRIAEAABAAAACgAQAAMAAAAqABAAAgAAAAoAEAACAAAAMgAACiIAEAABAAAACpCQACoAEAABAAAAOgAQAAEAAAAaABAAAgAAAB4AAAdCABAAAQAAACoAEAABAAAAAUAAAAEAAAAWAAABDgAABxIgEAAAAAAACgAQAAEAAAAaABAAAQAAAD4AAAFTVEFUdAAAAD0AAAAGAAAACgAAAAIAAAAmAAAAAgAAAAIAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAAAAAAAAAAAAAAAAAACAAAABgAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";
kha_Shaders.blur_gaus_pass_fragData0 = "s2111:AANfdGV4X3NhbXBsZXIAAHRleAAAJEdsb2JhbHMAAAJkaXIAAAAAAAgAAAACAXNjcmVlblNpemUACAAAAAgAAAACAURYQkMpDgWaGbtYB%YR1lsI48TdAQAAAOwFAAAFAAAANAAAAGQBAACYAQAAzAEAAHAFAABSREVGKAEAAAEAAACYAAAAAwAAABwAAAAABP::AAEAAP8AAAB8AAAAAwAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAQAAAIkAAAACAAAABQAAAAQAAAD:::::AAAAAAEAAAANAAAAjQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAABfdGV4X3NhbXBsZXIAdGV4ACRHbG9iYWxzAKurjQAAAAIAAACwAAAAEAAAAAAAAAAAAAAA4AAAAAAAAAAIAAAAAgAAAOQAAAAAAAAA9AAAAAgAAAAIAAAAAgAAAOQAAAAAAAAAZGlyAAEAAwABAAIAAAAAAAAAAABzY3JlZW5TaXplAE1pY3Jvc29mdCAoUikgSExTTCBTaGFkZXIgQ29tcGlsZXIgMTAuMQCrSVNHTiwAAAABAAAACAAAACAAAAAAAAAAAAAAAAMAAAAAAAAAAwMAAFRFWENPT1JEAKurq09TR04sAAAAAQAAAAgAAAAgAAAAAAAAAAAAAAADAAAAAAAAAA8AAABTVl9UYXJnZXQAq6tTSERSnAMAAEAAAADnAAAANRgAACoAAAD0wAc%AAAAAAAAAAAAAAAAu3sAPgAAAAAAAAAAAAAAABba2T0AAAAAAAAAAAAAAAD8b6U9AAAAAAAAAAAAAAAAQBNhPQAAAAAAAAAAAAAAAGwkCT0AAAAAAAAAAAAAAAB0tZU8AAAAAAAAAAAAAAAA6V8SPAAAAAAAAAAAAAAAADwwgDsAAAAAAAAAAAAAAAAOMsk6AAAAAAAAAAAAAAAAWQAABEaOIAAAAAAAAQAAAFoAAAMAYBAAAAAAAFgYAAQAcBAAAAAAAFVVAABiEAADMhAQAAAAAABlAAAD8iAQAAAAAABoAAACBQAAAA4AAAkyABAAAAAAAEaAIAAAAAAAAAAAAOaKIAAAAAAAAAAAADgAAAoyABAAAAAAAEYAEAAAAAAAAkAAAAAAQEAAAEBAAAAAAAAAAABIAAAL8gAQAAEAAABGEBAAAAAAAEZ%EAAAAAAAAGAQAAAAAAABQAAAAAAAADgAAApyABAAAQAAAEYCEAABAAAAAkAAAPTABz70wAc%9MAHPgAAAAA2AAAFcgAQAAIAAABGAhAAAQAAADYAAAVCABAAAAAAAAFAAAABAAAAMAAAASEAAAeCABAAAAAAACoAEAAAAAAAAUAAAAoAAAADAAQDOgAQAAAAAAArAAAFggAQAAAAAAAqABAAAAAAAAAAAAeCABAAAAAAADoAEAAAAAAAAUAAAAAAAD8yAAAJMgAQAAMAAABGABAAAAAAAPYPEAAAAAAARhAQAAAAAABIAAAL8gAQAAMAAABGABAAAwAAAEZ%EAAAAAAAAGAQAAAAAAABQAAAAAAAADIAAApyABAAAwAAAEYCEAADAAAABpCQACoAEAAAAAAARgIQAAIAAAAyAAAKMgAQAAQAAABGABCAQQAAAAAAAAD2DxAAAAAAAEYQEAAAAAAASAAAC:IAEAAEAAAARgAQAAQAAABGfhAAAAAAAABgEAAAAAAAAUAAAAAAAAAyAAAKcgAQAAIAAABGAhAABAAAAAaQkAAqABAAAAAAAEYCEAADAAAAHgAAB0IAEAAAAAAAKgAQAAAAAAABQAAAAQAAABYAAAE4AAAKcgAQAAAAAABGAhAAAgAAAAJAAAAzMzM:MzMzPzMzMz8AAAAAMwAACnIgEAAAAAAARgIQAAAAAAACQAAAAACAQgAAgEIAAIBCAAAAADYAAAWCIBAAAAAAAAFAAAAAAAAAPgAAAVNUQVR0AAAAFwAAAAUAAAAKAAAAAgAAAAoAAAACAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";
kha_Shaders.compositor_pass_fragData0 = "s2410:AANfdGV4X3NhbXBsZXIAAHRleAAAJEdsb2JhbHMAAAF2aWduZXR0ZVN0cmVuZ3RoAAAAAAAEAAAAAQFEWEJDbmtH0T6EdQqENpqgXAoCHAEAAADUBgAABQAAADQAAABQAQAAhAEAALgBAABYBgAAUkRFRhQBAAABAAAAmAAAAAMAAAAcAAAAAAT::wABAADsAAAAfAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAACJAAAAAgAAAAUAAAAEAAAA:::::wAAAAABAAAADQAAAI0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAX3RleF9zYW1wbGVyAHRleAAkR2xvYmFscwCrq40AAAABAAAAsAAAABAAAAAAAAAAAAAAAMgAAAAAAAAABAAAAAIAAADcAAAAAAAAAHZpZ25ldHRlU3RyZW5ndGgAq6urAAADAAEAAQAAAAAAAAAAAE1pY3Jvc29mdCAoUikgSExTTCBTaGFkZXIgQ29tcGlsZXIgMTAuMQBJU0dOLAAAAAEAAAAIAAAAIAAAAAAAAAAAAAAAAwAAAAAAAAADAwAAVEVYQ09PUkQAq6urT1NHTiwAAAABAAAACAAAACAAAAAAAAAAAAAAAAMAAAAAAAAADwAAAFNWX1RhcmdldACrq1NIRFKYBAAAQAAAACYBAABZAAAERo4gAAAAAAABAAAAWgAAAwBgEAAAAAAAWBgABABwEAAAAAAAVVUAAGIQAAMyEBAAAAAAAGUAAAPyIBAAAAAAAGgAAAIDAAAAOAAABxIAEAAAAAAAChAQAAAAAAAaEBAAAAAAADgAAAcSABAAAAAAAAoAEAAAAAAAAUAAAAAAgEEAAAALYgAQAAAAAAAGERCAQQAAAAAAAAACQAAAAAAAAAAAgD8AAIA:AAAAADgAAAcSABAAAAAAABoAEAAAAAAACgAQAAAAAAA4AAAHEgAQAAAAAAAqABAAAAAAAAoAEAAAAAAALwAABRIAEAAAAAAACgAQAAAAAAA4AAAHEgAQAAAAAAAKABAAAAAAAAFAAADNzEw%GQAABRIAEAAAAAAACgAQAAAAAAAAAAAJIgAQAAAAAAAKgCCAQQAAAAAAAAAAAAAAAUAAAAAAgD8yAAAKEgAQAAAAAAAKgCAAAAAAAAAAAAAKABAAAAAAABoAEAAAAAAAAAAACmIAEAAAAAAABhEQAAAAAAACQAAAAAAAAAAAgEAAAIBAAAAAADgAAAciABAAAAAAACoAEAAAAAAAGgAQAAAAAAA4AAAK4gAQAAAAAABWBRAAAAAAAAJAAAAAAAAAAAAgQU:sRD8KgaY9QQAABcIAEAAAAAAApg4QAAAAAAAyAAANYgAQAAAAAACmCxCAQQAAAAAAAAACQAAAAAAAAAAAUEEAAPZCAAAAAFYFEAAAAAAAAAAACmIAEAAAAAAAVgYQAAAAAAACQAAAAAAAAAAAgD8AAIA:AAAAADgAAAciABAAAAAAACoAEAAAAAAAGgAQAAAAAAA4AAAHQgAQAAAAAAAaABAAAAAAAAFAAAAAAMhCQQAABUIAEAAAAAAAKgAQAAAAAAAyAAAKIgAQAAAAAAAqABCAQQAAAAAAAAABQAAACtcjPBoAEAAAAAAAAAAAByIAEAAAAAAAGgAQAAAAAAABQAAACteju0gAAAvyABAAAQAAAEYQEAAAAAAARn4QAAAAAAAAYBAAAAAAAAFAAAAAAAAAMgAADOIAEAAAAAAAVgUQAAAAAAACQAAAAAAAAOxRuD3sUbg97FG4PQYJEAABAAAANgAABYIgEAAAAAAAOgAQAAEAAAAyAAAMcgAQAAAAAACWBxAAAAAAAAYAEAAAAAAAAkAAAG8Sg7tvEoO7bxKDuwAAAAA0AAAKcgAQAAAAAABGAhAAAAAAAAJAAAAAAAAAAAAAAAAAAAAAAAAAMgAAD3IAEAABAAAARgIQAAAAAAACQAAAZmbGQGZmxkBmZsZAAAAAAAJAAAAAAAA:AAAAPwAAAD8AAAAAOAAAB3IAEAABAAAARgIQAAAAAABGAhAAAQAAADIAAA9yABAAAgAAAEYCEAAAAAAAAkAAAGZmxkBmZsZAZmbGQAAAAAACQAAAmpnZP5qZ2T%amdk:AAAAADIAAAxyABAAAAAAAEYCEAAAAAAARgIQAAIAAAACQAAAj8J1PY:CdT2PwnU9AAAAAA4AAAdyIBAAAAAAAEYCEAABAAAARgIQAAAAAAA%AAABU1RBVHQAAAAgAAAAAwAAAAAAAAACAAAAHQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";
kha_Shaders.compositor_pass_vertData0 = "s763:AXBvcwAAAABEWEJDtpmVVJ2wtBYIEKtdn7IyBgEAAAA0AgAABQAAADQAAACAAAAAtAAAAAwBAAC4AQAAUkRFRkQAAAAAAAAAAAAAAAAAAAAcAAAAAAT%:wABAAAcAAAATWljcm9zb2Z0IChSKSBITFNMIFNoYWRlciBDb21waWxlciAxMC4xAElTR04sAAAAAQAAAAgAAAAgAAAAAAAAAAAAAAADAAAAAAAAAAMDAABURVhDT09SRACrq6tPU0dOUAAAAAIAAAAIAAAAOAAAAAAAAAAAAAAAAwAAAAAAAAADDAAAQQAAAAAAAAABAAAAAwAAAAEAAAAPAAAAVEVYQ09PUkQAU1ZfUG9zaXRpb24Aq6urU0hEUqQAAABAAAEAKQAAAF8AAAMyEBAAAAAAAGUAAAMyIBAAAAAAAGcAAATyIBAAAQAAAAEAAAAyAAAPMiAQAAAAAABGEBAAAAAAAAJAAAAAAAA:AAAAvwAAAAAAAAAAAkAAAAAAAD8AAAA:AAAAAAAAAAA2AAAFMiAQAAEAAABGEBAAAAAAADYAAAjCIBAAAQAAAAJAAAAAAAAAAAAAAAAAAD8AAIA:PgAAAVNUQVR0AAAABAAAAAAAAAAAAAAAAwAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";
kha_Shaders.copy_mrt3_pass_fragData0 = "s1342:AAZfdGV4MF9zYW1wbGVyAABfdGV4MV9zYW1wbGVyAAFfdGV4Ml9zYW1wbGVyAAJ0ZXgwAAB0ZXgxAAF0ZXgyAAIARFhCQ6nugbVyrr6%7OHoh2vSHu0BAAAArAMAAAUAAAA0AAAAfAEAALABAAAUAgAAMAMAAFJERUZAAQAAAAAAAAAAAAAGAAAAHAAAAAAE::8AAQAAFQEAANwAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAA6gAAAAMAAAAAAAAAAAAAAAAAAAABAAAAAQAAAAEAAAD4AAAAAwAAAAAAAAAAAAAAAAAAAAIAAAABAAAAAQAAAAYBAAACAAAABQAAAAQAAAD:::::AAAAAAEAAAANAAAACwEAAAIAAAAFAAAABAAAAP::::8BAAAAAQAAAA0AAAAQAQAAAgAAAAUAAAAEAAAA:::::wIAAAABAAAADQAAAF90ZXgwX3NhbXBsZXIAX3RleDFfc2FtcGxlcgBfdGV4Ml9zYW1wbGVyAHRleDAAdGV4MQB0ZXgyAE1pY3Jvc29mdCAoUikgSExTTCBTaGFkZXIgQ29tcGlsZXIgMTAuMQCrq6tJU0dOLAAAAAEAAAAIAAAAIAAAAAAAAAAAAAAAAwAAAAAAAAADAwAAVEVYQ09PUkQAq6urT1NHTlwAAAADAAAACAAAAFAAAAAAAAAAAAAAAAMAAAAAAAAADwAAAFAAAAABAAAAAAAAAAMAAAABAAAADwAAAFAAAAACAAAAAAAAAAMAAAACAAAADwAAAFNWX1RhcmdldACrq1NIRFIUAQAAQAAAAEUAAABaAAADAGAQAAAAAABaAAADAGAQAAEAAABaAAADAGAQAAIAAABYGAAEAHAQAAAAAABVVQAAWBgABABwEAABAAAAVVUAAFgYAAQAcBAAAgAAAFVVAABiEAADMhAQAAAAAABlAAAD8iAQAAAAAABlAAAD8iAQAAEAAABlAAAD8iAQAAIAAABIAAAL8iAQAAAAAABGEBAAAAAAAEZ%EAAAAAAAAGAQAAAAAAABQAAAAAAAAEgAAAvyIBAAAQAAAEYQEAAAAAAARn4QAAEAAAAAYBAAAQAAAAFAAAAAAAAASAAAC:IgEAACAAAARhAQAAAAAABGfhAAAgAAAABgEAACAAAAAUAAAAAAAAA%AAABU1RBVHQAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";
kha_Shaders.cursor_fragData0 = "s1082:AANfdGV4X3NhbXBsZXIAAHRleAAAJEdsb2JhbHMAAAF0aW50AAAAAAAMAAAAAwFEWEJDhV0JCJIJcMrJ%vY%fxBJdAEAAAD8AgAABQAAADQAAABEAQAAeAEAAKwBAACAAgAAUkRFRggBAAABAAAAmAAAAAMAAAAcAAAAAAT::wABAADgAAAAfAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAACJAAAAAgAAAAUAAAAEAAAA:::::wAAAAABAAAADQAAAI0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAX3RleF9zYW1wbGVyAHRleAAkR2xvYmFscwCrq40AAAABAAAAsAAAABAAAAAAAAAAAAAAAMgAAAAAAAAADAAAAAIAAADQAAAAAAAAAHRpbnQAq6urAQADAAEAAwAAAAAAAAAAAE1pY3Jvc29mdCAoUikgSExTTCBTaGFkZXIgQ29tcGlsZXIgMTAuMQBJU0dOLAAAAAEAAAAIAAAAIAAAAAAAAAAAAAAAAwAAAAAAAAADAwAAVEVYQ09PUkQAq6urT1NHTiwAAAABAAAACAAAACAAAAAAAAAAAAAAAAMAAAAAAAAADwAAAFNWX1RhcmdldACrq1NIRFLMAAAAQAAAADMAAABZAAAERo4gAAAAAAABAAAAWgAAAwBgEAAAAAAAWBgABABwEAAAAAAAVVUAAGIQAAMyEBAAAAAAAGUAAAPyIBAAAAAAAGgAAAIBAAAARQAACfIAEAAAAAAARhAQAAAAAABGfhAAAAAAAABgEAAAAAAADgAAB3IAEAAAAAAARgIQAAAAAAD2DxAAAAAAADYAAAWCIBAAAAAAADoAEAAAAAAAOAAACHIgEAAAAAAARgIQAAAAAABGgiAAAAAAAAAAAAA%AAABU1RBVHQAAAAFAAAAAQAAAAAAAAACAAAAAgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";
kha_Shaders.cursor_vertData0 = "s9215:A25vcgAAcG9zAAF0ZXgAAgNfZ2J1ZmZlckRfc2FtcGxlcgABZ2J1ZmZlckQAASRHbG9iYWxzAAAGaW52VlAAAAAAAEAAAAAEBHRleFN0ZXAAQAAAAAgAAAACAWNhbWVyYVJpZ2h0AFAAAAAMAAAAAwFtb3VzZQBgAAAACAAAAAIBcmFkaXVzAGgAAAAEAAAAAQFWUABwAAAAQAAAAAQERFhCQ90udVKUa1pD7PqEl4Ke0EkBAAAAYBoAAAUAAAA0AAAAHAIAAKQCAAD8AgAA5BkAAFJERUbgAQAAAQAAAKAAAAADAAAAHAAAAAAE:v8AAQAAtwEAAHwAAAADAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAABAAAAjgAAAAIAAAAFAAAABAAAAP::::8BAAAAAQAAAA0AAACXAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAF9nYnVmZmVyRF9zYW1wbGVyAGdidWZmZXJEACRHbG9iYWxzAJcAAAAGAAAAuAAAALAAAAAAAAAAAAAAAEgBAAAAAAAAQAAAAAIAAABQAQAAAAAAAGABAABAAAAACAAAAAIAAABoAQAAAAAAAHgBAABQAAAADAAAAAIAAACEAQAAAAAAAJQBAABgAAAACAAAAAIAAABoAQAAAAAAAJoBAABoAAAABAAAAAIAAACkAQAAAAAAALQBAABwAAAAQAAAAAIAAABQAQAAAAAAAGludlZQAKurAwADAAQABAAAAAAAAAAAAHRleFN0ZXAAAQADAAEAAgAAAAAAAAAAAGNhbWVyYVJpZ2h0AAEAAwABAAMAAAAAAAAAAABtb3VzZQByYWRpdXMAq6urAAADAAEAAQAAAAAAAAAAAFZQAE1pY3Jvc29mdCAoUikgSExTTCBTaGFkZXIgQ29tcGlsZXIgMTAuMQCrSVNHToAAAAAEAAAACAAAAGgAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAGgAAAABAAAAAAAAAAMAAAABAAAADwAAAGgAAAACAAAAAAAAAAMAAAACAAAAAwMAAHEAAAAAAAAABgAAAAEAAAADAAAAAQEAAFRFWENPT1JEAFNWX1ZlcnRleElEAKurq09TR05QAAAAAgAAAAgAAAA4AAAAAAAAAAAAAAADAAAAAAAAAAMMAABBAAAAAAAAAAEAAAADAAAAAQAAAA8AAABURVhDT09SRABTVl9Qb3NpdGlvbgCrq6tTSERS4BYAAEAAAQC4BQAAWQAABEaOIAAAAAAACwAAAFoAAAMAYBAAAQAAAFgYAAQAcBAAAQAAAFVVAABfAAADMhAQAAIAAABgAAAEEhAQAAMAAAAGAAAAZQAAAzIgEAAAAAAAZwAABPIgEAABAAAAAQAAAGgAAAIGAAAANgAABTIgEAAAAAAARhAQAAIAAAAyAAAPMgAQAAAAAABGgCCAQQAAAAAAAAAEAAAAAkAAAAAAgEAAAIBAAAAAAAAAAABGgCAAAAAAAAYAAAAAAAAIQgAQAAAAAAAaABCAQQAAAAAAAAABQAAAAACAP0gAAAvyABAAAQAAAIYAEAAAAAAARn4QAAEAAAAAYBAAAQAAAAFAAAAAAAAAMgAACUIAEAABAAAACgAQAAEAAAABQAAAAAAAQAFAAAAAAIC:NgAABYIAEAABAAAAAUAAAAAAgD8yAAAPMgAQAAEAAABGABAAAAAAAAJAAAAAAABAAAAAQAAAAAAAAAAAAkAAAAAAgL8AAIC:AAAAAAAAAAARAAAIIgAQAAIAAABGDhAAAQAAAEaOIAAAAAAAAAAAABEAAAhCABAAAgAAAEYOEAABAAAARo4gAAAAAAABAAAAEQAACBIAEAACAAAARg4QAAEAAABGjiAAAAAAAAIAAAARAAAIggAQAAAAAABGDhAAAQAAAEaOIAAAAAAAAwAAAA4AAAdyABAAAQAAAEYCEAACAAAA9g8QAAAAAAA2AAAFEgAQAAIAAAAKABAAAAAAADYAAAYiABAAAgAAABqAIAAAAAAABgAAAAAAAAhCABAAAgAAABoAEIBBAAAAAgAAAAFAAAAAAIA:MgAADzIAEAADAAAARgAQAAIAAAACQAAAAAAAQAAAAEAAAAAAAAAAAAJAAAAAAIC:AACAvwAAAAAAAAAASAAAC:IAEAACAAAAhgAQAAIAAABGfhAAAQAAAABgEAABAAAAAUAAAAAAAAAyAAAJQgAQAAMAAAAKABAAAgAAAAFAAAAAAABAAUAAAAAAgL82AAAFggAQAAMAAAABQAAAAACAPxEAAAgSABAAAgAAAEYOEAADAAAARo4gAAAAAAAAAAAAEQAACCIAEAACAAAARg4QAAMAAABGjiAAAAAAAAEAAAARAAAIQgAQAAIAAABGDhAAAwAAAEaOIAAAAAAAAgAAABEAAAiCABAAAAAAAEYOEAADAAAARo4gAAAAAAADAAAADgAAB3IAEAACAAAARgIQAAIAAAD2DxAAAAAAAAAAAAhyABAAAgAAAJYEEIBBAAAAAQAAAEYCEAACAAAAAAAACEIAEAAAAAAAGgAQgEEAAAAAAAAAAUAAAAAAgD82AAAGEgAQAAAAAAAKgCAAAAAAAAYAAABIAAAL8gAQAAMAAACGABAAAAAAAEZ%EAABAAAAAGAQAAEAAAABQAAAAAAAADIAAA8yABAAAAAAAEYAEAAAAAAAAkAAAAAAAEAAAABAAAAAAAAAAAACQAAAAACAvwAAgL8AAAAAAAAAADIAAAlCABAAAAAAAAoAEAADAAAAAUAAAAAAAEABQAAAAACAvzYAAAWCABAAAAAAAAFAAAAAAIA:EQAACCIAEAADAAAARg4QAAAAAABGjiAAAAAAAAAAAAARAAAIQgAQAAMAAABGDhAAAAAAAEaOIAAAAAAAAQAAABEAAAgSABAAAwAAAEYOEAAAAAAARo4gAAAAAAACAAAAEQAACBIAEAAAAAAARg4QAAAAAABGjiAAAAAAAAMAAAAOAAAHcgAQAAAAAABGAhAAAwAAAAYAEAAAAAAAAAAACHIAEAAAAAAARgIQgEEAAAABAAAARgIQAAAAAAA4AAAHcgAQAAEAAABGAhAAAAAAAEYCEAACAAAAMgAACnIAEAAAAAAAJgkQAAIAAACWBBAAAAAAAEYCEIBBAAAAAQAAABAAAAeCABAAAAAAAEYCEAAAAAAARgIQAAAAAABEAAAFggAQAAAAAAA6ABAAAAAAADIAAA4yABAAAQAAAEaAIAAAAAAABAAAAAJAAAAAAIBAAACAQAAAAAAAAAAARoAgAAAAAAAGAAAAMgAACiIAEAACAAAAGoAgAAAAAAAEAAAAAUAAAAAAgEAaABAAAQAAAAAAAAhCABAAAgAAABoAEIBBAAAAAgAAAAFAAAAAAIA:NgAABRIAEAACAAAACgAQAAEAAABIAAAL8gAQAAMAAACGABAAAgAAAEZ%EAABAAAAAGAQAAEAAAABQAAAAAAAADIAAA8yABAABAAAAEYAEAACAAAAAkAAAAAAAEAAAABAAAAAAAAAAAACQAAAAACAvwAAgL8AAAAAAAAAADIAAAlCABAABAAAAAoAEAADAAAAAUAAAAAAAEABQAAAAACAvzYAAAWCABAABAAAAAFAAAAAAIA:EQAACBIAEAADAAAARg4QAAQAAABGjiAAAAAAAAAAAAARAAAIIgAQAAMAAABGDhAABAAAAEaOIAAAAAAAAQAAABEAAAhCABAAAwAAAEYOEAAEAAAARo4gAAAAAAACAAAAEQAACIIAEAABAAAARg4QAAQAAABGjiAAAAAAAAMAAAAOAAAH4gAQAAIAAAAGCRAAAwAAAPYPEAABAAAAAAAACEIAEAABAAAAGgAQgEEAAAABAAAAAUAAAAAAgD9IAAAL8gAQAAMAAACGABAAAQAAAEZ%EAABAAAAAGAQAAEAAAABQAAAAAAAADIAAAlCABAAAwAAAAoAEAADAAAAAUAAAAAAAEABQAAAAACAvzYAAAWCABAAAwAAAAFAAAAAAIA:MgAADzIAEAADAAAARgAQAAEAAAACQAAAAAAAQAAAAEAAAAAAAAAAAAJAAAAAAIC:AACAvwAAAAAAAAAAEQAACCIAEAAEAAAARg4QAAMAAABGjiAAAAAAAAAAAAARAAAIQgAQAAQAAABGDhAAAwAAAEaOIAAAAAAAAQAAABEAAAgSABAABAAAAEYOEAADAAAARo4gAAAAAAACAAAAEQAACIIAEAABAAAARg4QAAMAAABGjiAAAAAAAAMAAAAOAAAHcgAQAAMAAABGAhAABAAAAPYPEAABAAAAAAAACOIAEAACAAAAVg4QAAIAAABWAhCAQQAAAAMAAAAyAAAKEgAQAAEAAAAKgCAAAAAAAAQAAAABQAAAAACAQAoAEAACAAAAAAAACEIAEAABAAAAGgAQgEEAAAABAAAAAUAAAAAAgD8yAAAPMgAQAAQAAABGABAAAQAAAAJAAAAAAABAAAAAQAAAAAAAAAAAAkAAAAAAgL8AAIC:AAAAAAAAAABIAAAL8gAQAAEAAACGABAAAQAAAEZ%EAABAAAAAGAQAAEAAAABQAAAAAAAADIAAAlCABAABAAAAAoAEAABAAAAAUAAAAAAAEABQAAAAACAvzYAAAWCABAABAAAAAFAAAAAAIA:EQAACCIAEAABAAAARg4QAAQAAABGjiAAAAAAAAAAAAARAAAIQgAQAAEAAABGDhAABAAAAEaOIAAAAAAAAQAAABEAAAgSABAAAQAAAEYOEAAEAAAARo4gAAAAAAACAAAAEQAACIIAEAABAAAARg4QAAQAAABGjiAAAAAAAAMAAAAOAAAHcgAQAAEAAABGAhAAAQAAAPYPEAABAAAAAAAACHIAEAABAAAARgIQgEEAAAADAAAARgIQAAEAAAA4AAAHcgAQAAMAAABGAhAAAQAAAJYHEAACAAAAMgAACnIAEAABAAAAdg4QAAIAAACWBBAAAQAAAEYCEIBBAAAAAwAAABAAAAeCABAAAQAAAEYCEAABAAAARgIQAAEAAABEAAAFggAQAAEAAAA6ABAAAQAAADgAAAdyABAAAQAAAPYPEAABAAAARgIQAAEAAAAyAAALIgAQAAIAAAAagCAAAAAAAAQAAAABQAAAAACAQBqAIAAAAAAABgAAAAAAAAhCABAAAgAAABoAEIBBAAAAAgAAAAFAAAAAAIA:NgAABhIAEAACAAAACoAgAAAAAAAGAAAASAAAC:IAEAADAAAAhgAQAAIAAABGfhAAAQAAAABgEAABAAAAAUAAAAAAAAAyAAAPMgAQAAIAAABGABAAAgAAAAJAAAAAAABAAAAAQAAAAAAAAAAAAkAAAAAAgL8AAIC:AAAAAAAAAAAyAAAJQgAQAAIAAAAKABAAAwAAAAFAAAAAAABAAUAAAAAAgL82AAAFggAQAAIAAAABQAAAAACAPxEAAAgSABAAAwAAAEYOEAACAAAARo4gAAAAAAAAAAAAEQAACCIAEAADAAAARg4QAAIAAABGjiAAAAAAAAEAAAARAAAIQgAQAAMAAABGDhAAAgAAAEaOIAAAAAAAAgAAABEAAAiCABAAAQAAAEYOEAACAAAARo4gAAAAAAADAAAADgAAB3IAEAACAAAARgIQAAMAAAD2DxAAAQAAADIAABAyABAAAwAAAEaAIAAAAAAABgAAAAJAAAAAAIA:AACAvwAAAAAAAAAAAkAAAAAAAAAAAIA:AAAAAAAAAABIAAAL8gAQAAMAAABGABAAAwAAAEZ%EAABAAAAAGAQAAEAAAABQAAAAAAAADIAAAlCABAAAwAAAAoAEAADAAAAAUAAAAAAAEABQAAAAACAvzIAABAyABAAAwAAAEaAIAAAAAAABgAAAAJAAAAAAABAAAAAQAAAAAAAAAAAAkAAAAAAgL8AAIC:AAAAAAAAAAA2AAAFggAQAAMAAAABQAAAAACAPxEAAAgSABAABAAAAEYOEAADAAAARo4gAAAAAAAAAAAAEQAACCIAEAAEAAAARg4QAAMAAABGjiAAAAAAAAEAAAARAAAIQgAQAAQAAABGDhAAAwAAAEaOIAAAAAAAAgAAABEAAAiCABAAAQAAAEYOEAADAAAARo4gAAAAAAADAAAADgAAB3IAEAADAAAARgIQAAQAAAD2DxAAAQAAAAAAAAhyABAAAgAAAEYCEAACAAAARgIQgEEAAAADAAAANgAABiIAEAAEAAAAGoAgAAAAAAAGAAAAAAAACEIAEAAEAAAAGgAQgEEAAAAEAAAAAUAAAAAAgD8yAAALEgAQAAQAAAAKgCAAAAAAAAQAAAABQAAAAACAQAqAIAAAAAAABgAAAEgAAAvyABAABQAAAIYAEAAEAAAARn4QAAEAAAAAYBAAAQAAAAFAAAAAAAAAMgAADzIAEAAEAAAARgAQAAQAAAACQAAAAAAAQAAAAEAAAAAAAAAAAAJAAAAAAIC:AACAvwAAAAAAAAAAMgAACUIAEAAEAAAACgAQAAUAAAABQAAAAAAAQAFAAAAAAIC:NgAABYIAEAAEAAAAAUAAAAAAgD8RAAAIIgAQAAUAAABGDhAABAAAAEaOIAAAAAAAAAAAABEAAAhCABAABQAAAEYOEAAEAAAARo4gAAAAAAABAAAAEQAACBIAEAAFAAAARg4QAAQAAABGjiAAAAAAAAIAAAARAAAIggAQAAEAAABGDhAABAAAAEaOIAAAAAAAAwAAAA4AAAdyABAABAAAAEYCEAAFAAAA9g8QAAEAAAAAAAAIcgAQAAQAAAAmCRCAQQAAAAMAAABGAhAABAAAADgAAAdyABAABQAAAEYCEAACAAAARgIQAAQAAAAyAAAKcgAQAAIAAAAmCRAAAgAAAJYEEAAEAAAARgIQgEEAAAAFAAAAEAAAB4IAEAABAAAARgIQAAIAAABGAhAAAgAAAEQAAAWCABAAAQAAADoAEAABAAAAMgAACXIAEAABAAAARgIQAAIAAAD2DxAAAQAAAEYCEAABAAAAMgAACXIAEAAAAAAARgIQAAAAAAD2DxAAAAAAAEYCEAABAAAAEAAAB4IAEAAAAAAARgIQAAAAAABGAhAAAAAAAEQAAAWCABAAAAAAADoAEAAAAAAAOAAAB3IAEAAAAAAA9g8QAAAAAABGAhAAAAAAABAAAAiCABAAAAAAAJaEIAAAAAAABQAAAEYCEAAAAAAAMgAAC3IAEAABAAAAJgkQgEEAAAAAAAAA9g8QAAAAAABGgiAAAAAAAAUAAAAQAAAHggAQAAAAAABGAhAAAQAAAEYCEAABAAAARAAABYIAEAAAAAAAOgAQAAAAAAA4AAAHcgAQAAIAAAD2DxAAAAAAAEYCEAABAAAAOAAAB3IAEAAEAAAARgIQAAAAAAAmCRAAAgAAADIAAApyABAAAAAAAJYEEAACAAAAlgQQAAAAAABGAhCAQQAAAAQAAAAyAAAJcgAQAAIAAABGAhAAAQAAAPYPEAAAAAAARgIQAAAAAAAQAAAHggAQAAEAAABGAhAAAgAAAEYCEAACAAAARAAABYIAEAABAAAAOgAQAAEAAAA4AAAHcgAQAAIAAAD2DxAAAQAAAEYCEAACAAAAOAAACHIAEAACAAAARgIQAAIAAACmiiAAAAAAAAYAAAAyAAAMcgAQAAIAAABGAhAAAgAAAAJAAAAzMzM:MzMzPzMzMz8AAAAARgIQAAMAAAAyAAAKcgAQAAQAAABGAhCAQQAAAAEAAAD2DxAAAAAAAEYCEAAAAAAAEAAAB4IAEAABAAAARgIQAAQAAABGAhAABAAAAEQAAAWCABAAAQAAADoAEAABAAAAOAAAB3IAEAAEAAAA9g8QAAEAAABGAhAABAAAADgAAAhyABAABAAAAEYCEAAEAAAApoogAAAAAAAGAAAAMgAADHIAEAAEAAAARgIQAAQAAAACQAAAMzMzPzMzMz8zMzM:AAAAAEYCEAADAAAAIAAACnIAEAAFAAAABhAQAAMAAAACQAAAAQAAAAIAAAADAAAAAAAAADcAAAlyABAABAAAAKYKEAAFAAAARgIQAAQAAABGAhAAAwAAADcAAAlyABAAAgAAAFYFEAAFAAAARgIQAAIAAABGAhAABAAAADIAAApyABAABAAAAEYCEAABAAAA9g8QAAAAAABGAhCAQQAAAAAAAAAyAAALcgAQAAAAAABGAhCAQQAAAAEAAAD2DxAAAAAAAEYCEIBBAAAAAAAAABAAAAeCABAAAAAAAEYCEAAEAAAARgIQAAQAAABEAAAFggAQAAAAAAA6ABAAAAAAADgAAAdyABAAAQAAAPYPEAAAAAAARgIQAAQAAAA4AAAIcgAQAAEAAABGAhAAAQAAAKaKIAAAAAAABgAAADIAAAxyABAAAQAAAEYCEAABAAAAAkAAADMzMz8zMzM:MzMzPwAAAABGAhAAAwAAADcAAAlyABAAAQAAAAYAEAAFAAAARgIQAAEAAABGAhAAAgAAABAAAAeCABAAAAAAAEYCEAAAAAAARgIQAAAAAABEAAAFggAQAAAAAAA6ABAAAAAAADgAAAdyABAAAAAAAPYPEAAAAAAARgIQAAAAAAA4AAAIcgAQAAAAAABGAhAAAAAAAKaKIAAAAAAABgAAADIAAAxyABAAAAAAAEYCEAAAAAAAAkAAADMzMz8zMzM:MzMzPwAAAABGAhAAAwAAADcAAAlyABAAAAAAAAYQEAADAAAARgIQAAEAAABGAhAAAAAAADYAAAWCABAAAAAAAAFAAAAAAIA:EQAACBIAEAABAAAARg4QAAAAAABGjiAAAAAAAAkAAAARAAAIIgAQAAEAAABGDhAAAAAAAEaOIAAAAAAACgAAAAAAAAcSABAAAQAAABoAEAABAAAACgAQAAEAAAA2AAAFgiAQAAEAAAAaABAAAQAAADgAAAdCIBAAAQAAAAoAEAABAAAAAUAAAAAAAD8RAAAIEiAQAAEAAABGDhAAAAAAAEaOIAAAAAAABwAAABEAAAgiIBAAAQAAAEYOEAAAAAAARo4gAAAAAAAIAAAAPgAAAVNUQVR0AAAArAAAAAYAAAAAAAAABAAAAIsAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACQAAAAAAAAAAAAAAAAAAABIAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";
kha_Shaders.deferred_light_fragData0 = "s30963:ABFfc2x0Y01hdF9zYW1wbGVyAABfc2x0Y01hZ19zYW1wbGVyAAFfZ2J1ZmZlcjBfc2FtcGxlcgACX2didWZmZXIxX3NhbXBsZXIAA19nYnVmZmVyRF9zYW1wbGVyAARfc2Vudm1hcEJyZGZfc2FtcGxlcgAFX3NlbnZtYXBSYWRpYW5jZV9zYW1wbGVyAAZfc3Nhb3RleF9zYW1wbGVyAAdzbHRjTWF0AABzbHRjTWFnAAFnYnVmZmVyMAACZ2J1ZmZlcjEAA2didWZmZXJEAARzZW52bWFwQnJkZgAFc2Vudm1hcFJhZGlhbmNlAAZzc2FvdGV4AAckR2xvYmFscwAADGxpZ2h0QXJlYTAAAAAAAAwAAAADAWxpZ2h0QXJlYTEAEAAAAAwAAAADAWxpZ2h0QXJlYTIAIAAAAAwAAAADAWxpZ2h0QXJlYTMAMAAAAAwAAAADAWV5ZQBAAAAADAAAAAMBZXllTG9vawBQAAAADAAAAAMBY2FtZXJhUHJvagBgAAAACAAAAAIBZW52bWFwRGF0YQBwAAAAEAAAAAQBc2hpcnIAgAAAAHAAAAAEAWVudm1hcE51bU1pcG1hcHMA8AAAAAQAAAABAXBvaW50UG9zAPQAAAAMAAAAAwFwb2ludENvbAAAAQAADAAAAAMBRFhCQ7I9ySYWUswQHFfYRw71xd8BAAAAxFgAAAUAAAA0AAAAmAUAAOQFAAAYBgAASFgAAFJERUZcBQAAAQAAACwDAAARAAAAHAAAAAAE::8AAQAAMgUAADwCAAADAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAATQIAAAMAAAAAAAAAAAAAAAAAAAABAAAAAQAAAAEAAABeAgAAAwAAAAAAAAAAAAAAAAAAAAIAAAABAAAAAQAAAHACAAADAAAAAAAAAAAAAAAAAAAAAwAAAAEAAAABAAAAggIAAAMAAAAAAAAAAAAAAAAAAAAEAAAAAQAAAAEAAACUAgAAAwAAAAAAAAAAAAAAAAAAAAUAAAABAAAAAQAAAKkCAAADAAAAAAAAAAAAAAAAAAAABgAAAAEAAAABAAAAwgIAAAMAAAAAAAAAAAAAAAAAAAAHAAAAAQAAAAEAAADTAgAAAgAAAAUAAAAEAAAA:::::wAAAAABAAAADQAAANsCAAACAAAABQAAAAQAAAD:::::AQAAAAEAAAANAAAA4wIAAAIAAAAFAAAABAAAAP::::8CAAAAAQAAAA0AAADsAgAAAgAAAAUAAAAEAAAA:::::wMAAAABAAAADQAAAPUCAAACAAAABQAAAAQAAAD:::::BAAAAAEAAAANAAAA:gIAAAIAAAAFAAAABAAAAP::::8FAAAAAQAAAA0AAAAKAwAAAgAAAAUAAAAEAAAA:::::wYAAAABAAAADQAAABoDAAACAAAABQAAAAQAAAD:::::BwAAAAEAAAANAAAAIgMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAABfc2x0Y01hdF9zYW1wbGVyAF9zbHRjTWFnX3NhbXBsZXIAX2didWZmZXIwX3NhbXBsZXIAX2didWZmZXIxX3NhbXBsZXIAX2didWZmZXJEX3NhbXBsZXIAX3NlbnZtYXBCcmRmX3NhbXBsZXIAX3NlbnZtYXBSYWRpYW5jZV9zYW1wbGVyAF9zc2FvdGV4X3NhbXBsZXIAc2x0Y01hdABzbHRjTWFnAGdidWZmZXIwAGdidWZmZXIxAGdidWZmZXJEAHNlbnZtYXBCcmRmAHNlbnZtYXBSYWRpYW5jZQBzc2FvdGV4ACRHbG9iYWxzAKsiAwAADAAAAEQDAAAQAQAAAAAAAAAAAABkBAAAAAAAAAwAAAACAAAAcAQAAAAAAACABAAAEAAAAAwAAAACAAAAcAQAAAAAAACLBAAAIAAAAAwAAAACAAAAcAQAAAAAAACWBAAAMAAAAAwAAAACAAAAcAQAAAAAAAChBAAAQAAAAAwAAAACAAAAcAQAAAAAAAClBAAAUAAAAAwAAAACAAAAcAQAAAAAAACtBAAAYAAAAAgAAAACAAAAuAQAAAAAAADIBAAAcAAAABAAAAACAAAA1AQAAAAAAADkBAAAgAAAAHAAAAACAAAA7AQAAAAAAAD8BAAA8AAAAAQAAAACAAAAEAUAAAAAAAAgBQAA9AAAAAwAAAACAAAAcAQAAAAAAAApBQAAAAEAAAwAAAACAAAAcAQAAAAAAABsaWdodEFyZWEwAKsBAAMAAQADAAAAAAAAAAAAbGlnaHRBcmVhMQBsaWdodEFyZWEyAGxpZ2h0QXJlYTMAZXllAGV5ZUxvb2sAY2FtZXJhUHJvagABAAMAAQACAAAAAAAAAAAAZW52bWFwRGF0YQCrAQADAAEABAAAAAAAAAAAAHNoaXJyAKurAQADAAEABAAHAAAAAAAAAGVudm1hcE51bU1pcG1hcHMAq6urAAACAAEAAQAAAAAAAAAAAHBvaW50UG9zAHBvaW50Q29sAE1pY3Jvc29mdCAoUikgSExTTCBTaGFkZXIgQ29tcGlsZXIgMTAuMQCrq0lTR05EAAAAAgAAAAgAAAA4AAAAAAAAAAAAAAADAAAAAAAAAAMDAAA4AAAAAQAAAAAAAAADAAAAAQAAAAcHAABURVhDT09SRACrq6tPU0dOLAAAAAEAAAAIAAAAIAAAAAAAAAAAAAAAAwAAAAAAAAAPAAAAU1ZfVGFyZ2V0AKurU0hEUihSAABAAAAAihQAAFkAAARGjiAAAAAAABEAAABaAAADAGAQAAAAAABaAAADAGAQAAEAAABaAAADAGAQAAIAAABaAAADAGAQAAMAAABaAAADAGAQAAQAAABaAAADAGAQAAUAAABaAAADAGAQAAYAAABaAAADAGAQAAcAAABYGAAEAHAQAAAAAABVVQAAWBgABABwEAABAAAAVVUAAFgYAAQAcBAAAgAAAFVVAABYGAAEAHAQAAMAAABVVQAAWBgABABwEAAEAAAAVVUAAFgYAAQAcBAABQAAAFVVAABYGAAEAHAQAAYAAABVVQAAWBgABABwEAAHAAAAVVUAAGIQAAMyEBAAAAAAAGIQAANyEBAAAQAAAGUAAAPyIBAAAAAAAGgAAAIbAAAASAAAC:IAEAAAAAAARhAQAAAAAACGfRAAAgAAAABgEAACAAAAAUAAAAAAAAAAAAALcgAQAAEAAACGABCAwQAAAAAAAAACQAAAAACAPwAAgD8AAIA:AAAAAAAAAAhCABAAAgAAACoAEIDBAAAAAAAAAAoAEAABAAAAHQAABxIAEAABAAAAKgAQAAIAAAABQAAAAAAAAB0AAAoyABAAAwAAAIYAEAAAAAAAAkAAAAAAAAAAAAAAAAAAAAAAAAA3AAAPMgAQAAMAAABGABAAAwAAAAJAAAAAAIA:AACAPwAAAAAAAAAAAkAAAAAAgL8AAIC:AAAAAAAAAAA4AAAHYgAQAAEAAABWBhAAAQAAAAYBEAADAAAANwAACTIAEAACAAAABgAQAAEAAACGABAAAAAAAJYFEAABAAAAEAAABxIAEAABAAAARgIQAAIAAABGAhAAAgAAAEQAAAUSABAAAQAAAAoAEAABAAAAOAAAB3IAEAABAAAABgAQAAEAAABGAhAAAgAAADIAAAmCABAAAQAAADoAEAAAAAAAAUAAAAD:f0EBQAAAgACANxsAAAWCABAAAQAAADoAEAABAAAAVgAABYIAEAABAAAAOgAQAAEAAAAyAAAJggAQAAEAAAA6ABAAAQAAAAFAAACAAIC9OgAQAAAAAAA4IAAHggAQAAEAAAA6ABAAAQAAAAFAAACAB4BBSAAAC:IAEAACAAAARhAQAAAAAABGfhAAAwAAAABgEAADAAAAAUAAAAAAAAAyAAAKcgAQAAMAAAD2DxAAAQAAAEYCEIBBAAAAAgAAAEYCEAACAAAAAAAACvIAEAAEAAAARg4QAAIAAAACQAAACtcjvQrXI70K1yO9AACAvzIAAAxyABAABAAAAPYPEAABAAAARgIQAAQAAAACQAAACtcjPQrXIz0K1yM9AAAAAEgAAAvyABAABQAAAEYQEAAAAAAARn4QAAQAAAAAYBAABAAAAAFAAAAAAAAAMgAACYIAEAABAAAACgAQAAUAAAABQAAAAAAAQAFAAAAAAIC:EAAAB4IAEAACAAAARhIQAAEAAABGEhAAAQAAAEQAAAWCABAAAgAAADoAEAACAAAAOAAAB3IAEAAFAAAA9g8QAAIAAABGEhAAAQAAADIAAAmCABAAAQAAADoAEAABAAAAAUAAAAAAAD8BQAAAAAAAPwAAAAmCABAAAQAAADoAEAABAAAACoAggEEAAAAAAAAABgAAAA4AAAiCABAAAQAAABqAIAAAAAAABgAAADoAEAABAAAAEAAACIIAEAACAAAARoIgAAAAAAAFAAAARgIQAAUAAAAOAAAHggAQAAEAAAA6ABAAAQAAADoAEAACAAAAMgAACnIAEAAFAAAARgIQAAUAAAD2DxAAAQAAAEaCIAAAAAAABAAAAAAAAAlyABAABgAAAEYCEIBBAAAABQAAAEaCIAAAAAAABAAAABAAAAeCABAAAQAAAEYCEAAGAAAARgIQAAYAAABEAAAFggAQAAEAAAA6ABAAAQAAADgAAAdyABAABgAAAPYPEAABAAAARgIQAAYAAAAQAAAHggAQAAEAAABGAhAAAQAAAEYCEAAGAAAANAAAB4IAEAABAAAAOgAQAAEAAAABQAAAAAAAADIAAAmCABAAAgAAADoAEAABAAAAOgAQAAQAAAABQAAAAACAPwAAAAgSABAAAAAAADoAEIBBAAAAAQAAAAFAAAAAAIA:SAAAC:IAEAAHAAAAFgUQAAAAAABGfhAABQAAAABgEAAFAAAAAUAAAAAAAAA4AAAIggAQAAMAAAAaABAAAQAAABqAIAAAAAAABwAAADIAAAuCABAAAwAAAAoAEAABAAAAKoAgAAAAAAAHAAAAOgAQgEEAAAADAAAADwAACIIAEAAEAAAARgAQAAEAAACWhSAAAAAAAAcAAAA4AAALcgAQAAgAAABGgiAAAAAAAA4AAAACQAAAhqvbPoar2z6Gq9s%AAAAADgAAAeCABAABQAAACoAEAABAAAAKgAQAAEAAAAyAAAKggAQAAUAAAA6ABAABAAAADoAEAAEAAAAOgAQgEEAAAAFAAAAOAAAB4IAEAAGAAAAOgAQAAMAAAA6ABAAAwAAADYAAAYyABAACQAAAOaKIAAAAAAADAAAADYAAAZCABAACQAAAAqAIAAAAAAADQAAADgAAAdyABAACgAAAPYPEAAGAAAARgIQAAkAAAA4AAAKcgAQAAoAAABGAhAACgAAAAJAAABxPT4:cT0%P3E9Pj8AAAAAMgAACXIAEAAIAAAARgIQAAgAAAD2DxAABQAAAEYCEAAKAAAAMgAADXIAEAAIAAAARoIgAAAAAAAIAAAAAkAAAMbfYj:G32I:xt9iPwAAAABGAhAACAAAADIAAA1yABAACAAAAEYCEIBBAAAACQAAAAJAAAAqp30%Kqd9PiqnfT4AAAAARgIQAAgAAAA4AAAIcgAQAAkAAAD2DxAABAAAAEaCIAAAAAAACwAAADgAAApyABAACQAAAEYCEAAJAAAAAkAAAIarWz%Gq1s:hqtbPwAAAAAyAAAKcgAQAAgAAABGAhAACQAAAKYKEIBBAAAAAQAAAEYCEAAIAAAAOAAACHIAEAAJAAAA9g8QAAQAAACWhyAAAAAAAA0AAAA4AAAHcgAQAAkAAAD2DxAAAwAAAEYCEAAJAAAAMgAADHIAEAAIAAAARgIQAAkAAAACQAAAhqtbP4arWz%Gq1s:AAAAAEYCEAAIAAAAOAAACRIAEAAJAAAAKgAQgEEAAAABAAAAOoAgAAAAAAALAAAAOAAACWIAEAAJAAAApgoQgEEAAAABAAAABoEgAAAAAAAMAAAAOAAAB3IAEAAJAAAA9g8QAAMAAABGAhAACQAAADIAAAxyABAACAAAAEYCEAAJAAAAAkAAAIarWz%Gq1s:hqtbPwAAAABGAhAACAAAADgAAAhyABAACQAAAPYPEAAEAAAAlocgAAAAAAAKAAAAMgAADHIAEAAIAAAARgIQAAkAAAACQAAAafyCP2n8gj9p:II:AAAAAEYCEAAIAAAAOAAACRIAEAAJAAAAKgAQgEEAAAABAAAAOoAgAAAAAAAIAAAAOAAACWIAEAAJAAAApgoQgEEAAAABAAAABoEgAAAAAAAJAAAAMgAADHIAEAAIAAAARgIQAAkAAAACQAAAafyCP2n8gj9p:II:AAAAAEYCEAAIAAAAOAAACDIAEAAJAAAA9g8QAAMAAADmiiAAAAAAAAkAAAA4AAAIQgAQAAkAAAA6ABAAAwAAAAqAIAAAAAAACgAAADIAAAxyABAACAAAAEYCEAAJAAAAAkAAAGn8gj9p:II:afyCPwAAAABGAhAACAAAADgAAAdyABAACAAAAEYCEAADAAAARgIQAAgAAAAQAAAIggAQAAMAAABGAhCAQQAAAAYAAABGAhAAAQAAAAAAAAeCABAAAwAAADoAEAADAAAAOgAQAAMAAAAyAAALcgAQAAkAAABmCBAAAQAAAPYPEIBBAAAAAwAAAGYIEIBBAAAABgAAACsAAAaCABAAAwAAAAqAIAAAAAAADwAAADgAAAeCABAAAwAAABoAEAAAAAAAOgAQAAMAAAAAAAAIggAQAAQAAAAKABCAwQAAAAkAAAABQAAAAACAP0sAAAWCABAABAAAADoAEAAEAAAAMgAACoIAEAAFAAAACgAQgIEAAAAJAAAAAUAAADBumbwBQAAAJxaYPTIAAAqCABAABQAAADoAEAAFAAAACgAQgIEAAAAJAAAAAUAAAIQ0Wb4yAAAKggAQAAUAAAA6ABAABQAAAAoAEICBAAAACQAAAAFAAACkDck:OAAAB4IAEAAGAAAAOgAQAAQAAAA6ABAABQAAADIAAAmCABAABgAAADoAEAAGAAAAAUAAAAAAAMABQAAA2w9JQDEAAAjCABAABwAAAAYIEAAJAAAABggQgEEAAAAJAAAAAQAAB4IAEAAGAAAAOgAQAAYAAAAqABAABwAAADIAAAmCABAABAAAADoAEAAFAAAAOgAQAAQAAAA6ABAABgAAADMAAAmCABAABQAAACoAEICBAAAACQAAABoAEICBAAAACQAAADQAAAmCABAABgAAACoAEICBAAAACQAAABoAEICBAAAACQAAAA4AAAqCABAABgAAAAJAAAAAAIA:AACAPwAAgD8AAIA:OgAQAAYAAAA4AAAHggAQAAUAAAA6ABAABQAAADoAEAAGAAAAOAAAB4IAEAAGAAAAOgAQAAUAAAA6ABAABQAAADIAAAlCABAABwAAADoAEAAGAAAAAUAAAF%uqjwBQAAANlquvTIAAAlCABAABwAAADoAEAAGAAAAKgAQAAcAAAABQAAA4nY4PjIAAAlCABAABwAAADoAEAAGAAAAKgAQAAcAAAABQAAABB2pvjIAAAmCABAABgAAADoAEAAGAAAAKgAQAAcAAAABQAAAOPd:PzgAAAdCABAABwAAADoAEAAFAAAAOgAQAAYAAAAxAAAJggAQAAgAAAAqABCAgQAAAAkAAAAaABCAgQAAAAkAAAAyAAAJQgAQAAcAAAAqABAABwAAAAFAAAAAAADAAUAAANsPyT8BAAAHQgAQAAcAAAA6ABAACAAAACoAEAAHAAAAMgAACYIAEAAFAAAAOgAQAAUAAAA6ABAABgAAACoAEAAHAAAAAQAAB4IAEAAGAAAAOgAQAAcAAAABQAAA2w9JwAAAAAeCABAABQAAADoAEAAFAAAAOgAQAAYAAAAzAAAIggAQAAYAAAAqABAACQAAABoAEIBBAAAACQAAADQAAAhCABAABwAAACoAEAAJAAAAGgAQgEEAAAAJAAAAMQAACIIAEAAGAAAAOgAQAAYAAAA6ABCAQQAAAAYAAAAdAAAIQgAQAAcAAAAqABAABwAAACoAEIBBAAAABwAAAAEAAAeCABAABgAAADoAEAAGAAAAKgAQAAcAAAA3AAAKggAQAAUAAAA6ABAABgAAADoAEIBBAAAABQAAADoAEAAFAAAAAAAACIIAEAAFAAAAOgAQAAUAAAAKgCAAAAAAAAcAAAAAAAAHggAQAAUAAAA6ABAABQAAAAFAAADbD0lAOAAABxIAEAAJAAAAOgAQAAUAAAABQAAAg:kiPjgAAAciABAACQAAADoAEAAEAAAAAUAAAIP5oj5IAAAL8gAQAAkAAABGABAACQAAAEZ%EAAGAAAAAGAQAAYAAAA6ABAAAwAAADIAAAlyABAABAAAAEYCEAAEAAAABgAQAAcAAABWBRAABwAAADgAAAdyABAABAAAAEYCEAAEAAAARgIQAAkAAAA4AAAKcgAQAAQAAABGAhAABAAAAAJAAAAAAMA:AADAPwAAwD8AAAAAMgAADHIAEAAEAAAARgIQAAgAAAACQAAAg:miPoP5oj6D%aI%AAAAAEYCEAAEAAAAOAAACIIAEAADAAAAOgAQAAIAAAA6gCAAAAAAAAcAAAA4AAAHcgAQAAQAAAD2DxAAAwAAAEYCEAAEAAAASAAAC:IAEAAHAAAARhAQAAAAAABGfhAABwAAAABgEAAHAAAAAUAAAAAAAAA4AAAH4gAQAAcAAAAGCRAABAAAAAYAEAAHAAAAGAAAB4IAEAAAAAAAOgAQAAAAAAABQAAAAACAPzIAAAlyABAAAgAAAEYCEAAEAAAABgAQAAcAAABGAhAAAgAAADcAAAlyABAAAgAAAPYPEAAAAAAARgIQAAIAAACWBxAABwAAADcAAAxyABAAAwAAAPYPEAAAAAAAAkAAAAAAAAAAAAAAAAAAAAAAAABGAhAAAwAAAAAAAAlyABAABAAAAEYCEIBBAAAABQAAAJaHIAAAAAAADwAAABAAAAeCABAAAAAAAEYCEAAEAAAARgIQAAQAAABEAAAFggAQAAAAAAA6ABAAAAAAADgAAAdyABAABAAAAPYPEAAAAAAARgIQAAQAAAAQAAAHggAQAAAAAABGAhAAAQAAAEYCEAAEAAAASwAABRIAEAAAAAAACgAQAAAAAAAyAAAJggAQAAMAAAA6ABAAAQAAAAFAAAAwbpm8AUAAACcWmD0yAAAJggAQAAMAAAA6ABAAAwAAADoAEAABAAAAAUAAAIQ0Wb4yAAAJggAQAAMAAAA6ABAAAwAAADoAEAABAAAAAUAAAKQNyT84AAAHQgAQAAAAAAAKABAAAAAAADoAEAADAAAAMgAADzIAEAAAAAAAlgUQAAAAAAACQAAAAAB8P51tID8AAAAAAAAAAAJAAAAAAAA8AAAAPAAAAAAAAAAASAAAC:IAEAAEAAAARgAQAAAAAABGfhAAAAAAAABgEAAAAAAAAUAAAAAAAAAyAAAKcgAQAAYAAABGAhCAQQAAAAEAAAD2DxAAAQAAAEYCEAAGAAAAEAAAB0IAEAAAAAAARgIQAAYAAABGAhAABgAAAEQAAAVCABAAAAAAACoAEAAAAAAAOAAAB3IAEAAGAAAApgoQAAAAAABGAhAABgAAADgAAAdyABAABwAAACYJEAABAAAAlgQQAAYAAAAyAAAKcgAQAAcAAACWBBAAAQAAACYJEAAGAAAARgIQgEEAAAAHAAAAMgAACXIAEAAIAAAARgIQAAEAAAD2DxAABAAAAEYCEAAGAAAAOAAAB3IAEAAJAAAApgoQAAQAAABGAhAABwAAADgAAAfSABAABAAAAAYJEAABAAAABgAQAAQAAAAyAAAJcgAQAAQAAABGAhAABgAAAFYFEAAEAAAAhgMQAAQAAAAAAAAJcgAQAAoAAABGAhCAQQAAAAUAAABGgiAAAAAAAAAAAAAQAAAHEgAQAAsAAABGAhAACgAAAEYCEAAIAAAAEAAAByIAEAALAAAARgIQAAoAAABGAhAACQAAABAAAAdCABAACwAAAEYCEAAKAAAARgIQAAQAAAAAAAAJcgAQAAwAAABGAhCAQQAAAAUAAABGgiAAAAAAAAEAAAAQAAAHEgAQAA0AAABGAhAADAAAAEYCEAAIAAAAEAAAByIAEAANAAAARgIQAAwAAABGAhAACQAAABAAAAdCABAADQAAAEYCEAAMAAAARgIQAAQAAAAAAAAJcgAQAA4AAABGAhCAQQAAAAUAAABGgiAAAAAAAAIAAAAQAAAHEgAQAA8AAABGAhAADgAAAEYCEAAIAAAAEAAAByIAEAAPAAAARgIQAA4AAABGAhAACQAAABAAAAdCABAADwAAAEYCEAAOAAAARgIQAAQAAAAAAAAJcgAQABAAAABGAhCAQQAAAAUAAABGgiAAAAAAAAMAAAAQAAAHEgAQAAgAAABGAhAAEAAAAEYCEAAIAAAAEAAAByIAEAAIAAAARgIQABAAAABGAhAACQAAABAAAAdCABAACAAAAEYCEAAQAAAARgIQAAQAAAAxAAAHQgAQAAAAAAABQAAAAAAAACoAEAALAAAAAQAAB4IAEAABAAAAKgAQAAAAAAABQAAAAQAAADEAAAeCABAAAwAAAAFAAAAAAAAAKgAQAA0AAAA3AAAJQgAQAAAAAAAqABAAAAAAAAFAAAADAAAAAUAAAAIAAAA3AAAJQgAQAAAAAAA6ABAAAwAAACoAEAAAAAAAOgAQAAEAAAAxAAAHggAQAAEAAAABQAAAAAAAACoAEAAPAAAAHgAAB4IAEAADAAAAKgAQAAAAAAABQAAABAAAADcAAAlCABAAAAAAADoAEAABAAAAOgAQAAMAAAAqABAAAAAAADEAAAeCABAAAQAAAAFAAAAAAAAAKgAQAAgAAAAeAAAHggAQAAMAAAAqABAAAAAAAAFAAAAIAAAANwAACUIAEAAAAAAAOgAQAAEAAAA6ABAAAwAAACoAEAAAAAAAHwAAAyoAEAAAAAAANgAABXIAEAAEAAAARgIQAAgAAAA2AAAI8gAQAAkAAAACQAAAAAAAAAAAAAAAAAAAAAAAABIAAAEgAAAHggAQAAEAAAAqABAAAAAAAAFAAAABAAAAHwAEAzoAEAABAAAAOAAAB3IAEAARAAAApgoQAAsAAABGAhAADQAAADIAAApyABAADQAAAEYCEAALAAAApgoQgEEAAAANAAAARgIQABEAAAA4AAAHcgAQABEAAACmChAACwAAAEYCEAAIAAAAMgAACnIAEAAPAAAARgIQAAsAAACmChCAQQAAAAgAAABGAhAAEQAAADYAAAVyABAABAAAAEYCEAAIAAAANgAACPIAEAAJAAAAAkAAAAAAAAAAAAAAAAAAAAMAAAASAAABIAAAB4IAEAABAAAAKgAQAAAAAAABQAAAAgAAAB8ABAM6ABAAAQAAADgAAAdyABAAEQAAAEYCEAALAAAApgoQAA0AAAAyAAAKcgAQAAsAAABGAhAADQAAAKYKEIBBAAAACwAAAEYCEAARAAAAOAAAB3IAEAARAAAApgoQAA0AAABGAhAADwAAADIAAApyABAADwAAAEYCEAANAAAApgoQgEEAAAAPAAAARgIQABEAAAA2AAAFcgAQAAQAAABGAhAACAAAADYAAAjyABAACQAAAAJAAAAAAAAAAAAAAAAAAAADAAAAEgAAASAAAAeCABAAAQAAACoAEAAAAAAAAUAAAAMAAAAfAAQDOgAQAAEAAAA4AAAHcgAQABEAAACmChAADQAAAEYCEAAPAAAAMgAACnIAEAAPAAAARgIQAA0AAACmChCAQQAAAA8AAABGAhAAEQAAADgAAAdyABAAEQAAAKYKEAALAAAARgIQAAgAAAAyAAAKcgAQAAQAAABGAhAACwAAAKYKEIBBAAAACAAAAEYCEAARAAAANgAACPIAEAAJAAAAAkAAAAAAAAAAAAAAAAAAAAQAAAASAAABIAAAB4IAEAABAAAAKgAQAAAAAAABQAAABAAAAB8ABAM6ABAAAQAAADgAAAdyABAAEQAAAKYKEAAPAAAARgIQAAgAAAAyAAAKcgAQAAsAAABGAhAADwAAAKYKEIBBAAAACAAAAEYCEAARAAAAOAAAB3IAEAARAAAARgIQAA0AAACmChAADwAAADIAAApyABAADQAAAEYCEAAPAAAApgoQgEEAAAANAAAARgIQABEAAAA2AAAFcgAQAAQAAABGAhAACAAAADYAAAjyABAACQAAAAJAAAAAAAAAAAAAAAAAAAADAAAAEgAAASAAAAeCABAAAQAAACoAEAAAAAAAAUAAAAUAAAAfAAQDOgAQAAEAAAA2AAAFcgAQAAQAAABGAhAACAAAADYAAAjyABAACQAAAAJAAAAAAAAAAAAAAAAAAAAAAAAAEgAAASAAAAeCABAAAQAAACoAEAAAAAAAAUAAAAYAAAAfAAQDOgAQAAEAAAA4AAAHcgAQABEAAABGAhAACwAAAKYKEAANAAAAMgAACnIAEAALAAAARgIQAA0AAACmChCAQQAAAAsAAABGAhAAEQAAADgAAAdyABAAEQAAAKYKEAAPAAAARgIQAAgAAAAyAAAKcgAQAAQAAABGAhAADwAAAKYKEIBBAAAACAAAAEYCEAARAAAANgAACPIAEAAJAAAAAkAAAAAAAAAAAAAAAAAAAAQAAAASAAABIAAAB4IAEAABAAAAKgAQAAAAAAABQAAABwAAAB8ABAM6ABAAAQAAADgAAAdyABAAEQAAAKYKEAALAAAARgIQAAgAAAAyAAAKcgAQAAkAAABGAhAACwAAAKYKEIBBAAAACAAAAEYCEAARAAAAOAAAB3IAEAARAAAApgoQAA8AAABGAhAACAAAADIAAApyABAABAAAAEYCEAAPAAAApgoQgEEAAAAIAAAARgIQABEAAAA2AAAFggAQAAkAAAABQAAABQAAABIAAAEgAAAHggAQAAEAAAAqABAAAAAAAAFAAAAIAAAAHwAEAzoAEAABAAAAOAAAB3IAEAARAAAApgoQAAgAAABGAhAACwAAADIAAApyABAACwAAAEYCEAAIAAAApgoQgEEAAAALAAAARgIQABEAAAA4AAAHcgAQABEAAACmChAACAAAAEYCEAAPAAAAMgAACnIAEAANAAAARgIQAAgAAACmChCAQQAAAA8AAABGAhAAEQAAADYAAAVyABAADwAAAEYCEAAIAAAANgAABXIAEAAEAAAARgIQAAgAAAA2AAAI8gAQAAkAAAACQAAAAAAAAAAAAAAAAAAAAwAAABIAAAEgAAAHggAQAAEAAAAqABAAAAAAAAFAAAAJAAAAHwAEAzoAEAABAAAAOAAAB3IAEAARAAAApgoQAAsAAABGAhAADQAAADIAAApyABAADQAAAEYCEAALAAAApgoQgEEAAAANAAAARgIQABEAAAA4AAAHcgAQABEAAACmChAACAAAAEYCEAAPAAAAMgAACnIAEAAPAAAARgIQAAgAAACmChCAQQAAAA8AAABGAhAAEQAAADYAAAVyABAABAAAAEYCEAAIAAAANgAACPIAEAAJAAAAAkAAAAAAAAAAAAAAAAAAAAQAAAASAAABIAAAB4IAEAABAAAAKgAQAAAAAAABQAAACgAAAB8ABAM6ABAAAQAAADYAAAVyABAABAAAAEYCEAAIAAAANgAACPIAEAAJAAAAAkAAAAAAAAAAAAAAAAAAAAAAAAASAAABOAAAB3IAEAARAAAApgoQAAgAAABGAhAADwAAADIAAApyABAAEQAAAEYCEAAIAAAApgoQgEEAAAAPAAAARgIQABEAAAA4AAAHcgAQABIAAACmChAADQAAAEYCEAAPAAAAMgAACnIAEAASAAAARgIQAA0AAACmChCAQQAAAA8AAABGAhAAEgAAADgAAAdyABAAEwAAAEYCEAANAAAApgoQAA8AAAAyAAAKcgAQABMAAABGAhAADwAAAKYKEIBBAAAADQAAAEYCEAATAAAAOAAAB3IAEAAUAAAApgoQAAgAAABGAhAACwAAADIAAApyABAAFAAAAEYCEAAIAAAApgoQgEEAAAALAAAARgIQABQAAAA4AAAHcgAQABUAAACmChAACwAAAEYCEAANAAAAMgAACnIAEAAVAAAARgIQAAsAAACmChCAQQAAAA0AAABGAhAAFQAAACAAAAryABAAFgAAAKYKEAAAAAAAAkAAAAsAAAAMAAAADQAAAA4AAAA4AAAHcgAQABcAAABGAhAACwAAAKYKEAANAAAAMgAACnIAEAAXAAAARgIQAA0AAACmChCAQQAAAAsAAABGAhAAFwAAACAAAAdCABAAAAAAACoAEAAAAAAAAUAAAA8AAAABAAAHggAQABgAAAAqABAAAAAAAAFAAAAEAAAANgAABYIAEAAUAAAAAUAAAAUAAAA2AAAIcgAQABgAAAACQAAAAAAAAAAAAAAAAAAAAAAAADcAAAnyABAAGAAAAPYPEAAWAAAARg4QABQAAABGDhAAGAAAADcAAAlyABAAFwAAAPYPEAAWAAAARgIQABcAAABGAhAACwAAADYAAAWCABAACAAAAAFAAAAFAAAANwAACfIAEAAYAAAApgoQABYAAABGDhAACAAAAEYOEAAYAAAANwAACXIAEAAXAAAApgoQABYAAABGAhAACwAAAEYCEAAXAAAANwAACXIAEAAVAAAApgoQABYAAABGAhAAFQAAAEYCEAANAAAANwAACXIAEAAZAAAApgoQABYAAABGAhAAEwAAAEYCEAAPAAAANwAACXIAEAAaAAAApgoQABYAAABGAhAADwAAAEYCEAAIAAAANwAADPIAEAAYAAAAVgUQABYAAAACQAAAAAAAAAAAAAAAAAAABAAAAEYOEAAYAAAANwAACXIAEAAUAAAAVgUQABYAAABGAhAAFAAAAEYCEAAXAAAANwAACXIAEAATAAAAVgUQABYAAABGAhAAEwAAAEYCEAAVAAAANwAACXIAEAAVAAAAVgUQABYAAABGAhAADwAAAEYCEAAZAAAANwAACeIAEAAWAAAAVgUQABYAAAAGCRAACAAAAAYJEAAaAAAANwAACXIAEAALAAAABgAQABYAAABGAhAACwAAAEYCEAAUAAAANwAACXIAEAANAAAABgAQABYAAABGAhAADQAAAEYCEAATAAAANwAACXIAEAAPAAAABgAQABYAAABGAhAAEgAAAEYCEAAVAAAANwAACXIAEAAEAAAABgAQABYAAABGAhAAEQAAAJYHEAAWAAAANwAACfIAEAAJAAAABgAQABYAAABGDhAACAAAAEYOEAAYAAAAFQAAARUAAAEVAAABFQAAARUAAAEVAAABFQAAARUAAAEVAAABFQAAARUAAAEfAAQDOgAQAAkAAAAgAAAKcgAQAAgAAAD2DxAACQAAAAJAAAADAAAABAAAAAUAAAAAAAAANwAACXIAEAAEAAAABgAQAAgAAABGAhAACwAAAEYCEAAEAAAANwAACbIAEAAIAAAAVgUQAAgAAABGCBAACwAAAEYIEAAJAAAAEAAAB0IAEAAAAAAARgIQAAsAAABGAhAACwAAAEQAAAVCABAAAAAAACoAEAAAAAAAOAAAB3IAEAAJAAAApgoQAAAAAABGAhAACwAAABAAAAdCABAAAAAAAEYCEAANAAAARgIQAA0AAABEAAAFQgAQAAAAAAAqABAAAAAAADgAAAdyABAACwAAAKYKEAAAAAAARgIQAA0AAAAQAAAHQgAQAAAAAABGAhAADwAAAEYCEAAPAAAARAAABUIAEAAAAAAAKgAQAAAAAAA4AAAHcgAQAA0AAACmChAAAAAAAEYCEAAPAAAAEAAAB0IAEAAAAAAARgIQAAQAAABGAhAABAAAAEQAAAVCABAAAAAAACoAEAAAAAAAOAAAB3IAEAAEAAAApgoQAAAAAABGAhAABAAAABAAAAdCABAAAAAAAEYDEAAIAAAARgMQAAgAAABEAAAFQgAQAAAAAAAqABAAAAAAADgAAAeyABAACAAAAKYKEAAAAAAARgwQAAgAAAAQAAAHQgAQAAAAAABGAhAACQAAAEYCEAALAAAAAAAACIIAEAABAAAAKgAQgMEAAAAAAAAAAUAAAAAAgD9LAAAFggAQAAEAAAA6ABAAAQAAADIAAAqCABAAAwAAACoAEICBAAAAAAAAAAFAAAAwbpm8AUAAACcWmD0yAAAKggAQAAMAAAA6ABAAAwAAACoAEICBAAAAAAAAAAFAAACENFm%MgAACoIAEAADAAAAOgAQAAMAAAAqABCAgQAAAAAAAAABQAAApA3JPzgAAAeCABAABAAAADoAEAABAAAAOgAQAAMAAAAyAAAJggAQAAQAAAA6ABAABAAAAAFAAAAAAADAAUAAANsPSUAxAAAIQgAQAAAAAAAqABAAAAAAACoAEIBBAAAAAAAAAAEAAAdCABAAAAAAACoAEAAAAAAAOgAQAAQAAAAyAAAJQgAQAAAAAAA6ABAAAwAAADoAEAABAAAAKgAQAAAAAAAxAAAHggAQAAEAAAABQAAAbxKDOioAEAAAAAAATQAABoIAEAADAAAAANAAACoAEAAAAAAADgAAB0IAEAAAAAAAKgAQAAAAAAA6ABAAAwAAADcAAAlCABAAAAAAADoAEAABAAAAKgAQAAAAAAABQAAAAACAPzgAAAeCABAAAQAAABoAEAAJAAAACgAQAAsAAAAyAAAKggAQAAEAAAAKABAACQAAABoAEAALAAAAOgAQgEEAAAABAAAAEAAAB4IAEAADAAAARgIQAAsAAABGAhAADQAAAAAAAAiCABAABAAAADoAEIDBAAAAAwAAAAFAAAAAAIA:SwAABYIAEAAEAAAAOgAQAAQAAAAyAAAKggAQAAUAAAA6ABCAgQAAAAMAAAABQAAAMG6ZvAFAAAAnFpg9MgAACoIAEAAFAAAAOgAQAAUAAAA6ABCAgQAAAAMAAAABQAAAhDRZvjIAAAqCABAABQAAADoAEAAFAAAAOgAQgIEAAAADAAAAAUAAAKQNyT84AAAHggAQAAYAAAA6ABAABAAAADoAEAAFAAAAMgAACYIAEAAGAAAAOgAQAAYAAAABQAAAAAAAwAFAAADbD0lAMQAACIIAEAADAAAAOgAQAAMAAAA6ABCAQQAAAAMAAAABAAAHggAQAAMAAAA6ABAAAwAAADoAEAAGAAAAMgAACYIAEAADAAAAOgAQAAUAAAA6ABAABAAAADoAEAADAAAAMQAAB4IAEAAEAAAAAUAAAG8Sgzo6ABAAAwAAAE0AAAaCABAABQAAAADQAAA6ABAAAwAAAA4AAAeCABAAAwAAADoAEAADAAAAOgAQAAUAAAA3AAAJggAQAAMAAAA6ABAABAAAADoAEAADAAAAAUAAAAAAgD84AAAHggAQAAQAAAAaABAACwAAAAoAEAANAAAAMgAACoIAEAAEAAAACgAQAAsAAAAaABAADQAAADoAEIBBAAAABAAAADgAAAeCABAAAwAAADoAEAADAAAAOgAQAAQAAAAyAAAJQgAQAAAAAAA6ABAAAQAAACoAEAAAAAAAOgAQAAMAAAAQAAAHggAQAAEAAABGAhAADQAAAEYCEAAEAAAAAAAACIIAEAADAAAAOgAQgMEAAAABAAAAAUAAAAAAgD9LAAAFggAQAAMAAAA6ABAAAwAAADIAAAqCABAABAAAADoAEICBAAAAAQAAAAFAAAAwbpm8AUAAACcWmD0yAAAKggAQAAQAAAA6ABAABAAAADoAEICBAAAAAQAAAAFAAACENFm%MgAACoIAEAAEAAAAOgAQAAQAAAA6ABCAgQAAAAEAAAABQAAApA3JPzgAAAeCABAABQAAADoAEAADAAAAOgAQAAQAAAAyAAAJggAQAAUAAAA6ABAABQAAAAFAAAAAAADAAUAAANsPSUAxAAAIggAQAAEAAAA6ABAAAQAAADoAEIBBAAAAAQAAAAEAAAeCABAAAQAAADoAEAABAAAAOgAQAAUAAAAyAAAJggAQAAEAAAA6ABAABAAAADoAEAADAAAAOgAQAAEAAAAxAAAHggAQAAMAAAABQAAAbxKDOjoAEAABAAAATQAABoIAEAAEAAAAANAAADoAEAABAAAADgAAB4IAEAABAAAAOgAQAAEAAAA6ABAABAAAADcAAAmCABAAAQAAADoAEAADAAAAOgAQAAEAAAABQAAAAACAPzgAAAeCABAAAwAAAAoAEAAEAAAAGgAQAA0AAAAyAAAKggAQAAMAAAAKABAADQAAABoAEAAEAAAAOgAQgEEAAAADAAAAMgAACUIAEAAAAAAAOgAQAAMAAAA6ABAAAQAAACoAEAAAAAAAIQAAB4IAEAABAAAAOgAQAAkAAAABQAAABAAAABAAAAeCABAAAwAAAEYCEAAEAAAARgMQAAgAAAAAAAAIQgAQAAQAAAA6ABCAwQAAAAMAAAABQAAAAACAP0sAAAVCABAABAAAACoAEAAEAAAAMgAACoIAEAAEAAAAOgAQgIEAAAADAAAAAUAAADBumbwBQAAAJxaYPTIAAAqCABAABAAAADoAEAAEAAAAOgAQgIEAAAADAAAAAUAAAIQ0Wb4yAAAKggAQAAQAAAA6ABAABAAAADoAEICBAAAAAwAAAAFAAACkDck:OAAAB4IAEAAFAAAAKgAQAAQAAAA6ABAABAAAADIAAAmCABAABQAAADoAEAAFAAAAAUAAAAAAAMABQAAA2w9JQDEAAAiCABAAAwAAADoAEAADAAAAOgAQgEEAAAADAAAAAQAAB4IAEAADAAAAOgAQAAMAAAA6ABAABQAAADIAAAmCABAAAwAAADoAEAAEAAAAKgAQAAQAAAA6ABAAAwAAADEAAAdCABAABAAAAAFAAABvEoM6OgAQAAMAAABNAAAGggAQAAQAAAAA0AAAOgAQAAMAAAAOAAAHggAQAAMAAAA6ABAAAwAAADoAEAAEAAAANwAACYIAEAADAAAAKgAQAAQAAAA6ABAAAwAAAAFAAAAAAIA:OAAAByIAEAAEAAAAGgAQAAQAAAAKABAACAAAADIAAAoSABAABAAAAAoAEAAEAAAAGgAQAAgAAAAaABCAQQAAAAQAAAAyAAAJggAQAAMAAAAKABAABAAAADoAEAADAAAAKgAQAAAAAAA3AAAJQgAQAAAAAAA6ABAAAQAAADoAEAADAAAAKgAQAAAAAAAQAAAHggAQAAEAAABGAxAACAAAAEYCEAAJAAAAAAAACIIAEAADAAAAOgAQgMEAAAABAAAAAUAAAAAAgD9LAAAFggAQAAMAAAA6ABAAAwAAADIAAAoSABAABAAAADoAEICBAAAAAQAAAAFAAAAwbpm8AUAAACcWmD0yAAAKEgAQAAQAAAAKABAABAAAADoAEICBAAAAAQAAAAFAAACENFm%MgAAChIAEAAEAAAACgAQAAQAAAA6ABCAgQAAAAEAAAABQAAApA3JPzgAAAciABAABAAAADoAEAADAAAACgAQAAQAAAAyAAAJIgAQAAQAAAAaABAABAAAAAFAAAAAAADAAUAAANsPSUAxAAAIggAQAAEAAAA6ABAAAQAAADoAEIBBAAAAAQAAAAEAAAeCABAAAQAAADoAEAABAAAAGgAQAAQAAAAyAAAJggAQAAEAAAAKABAABAAAADoAEAADAAAAOgAQAAEAAAAxAAAHggAQAAMAAAABQAAAbxKDOjoAEAABAAAATQAABhIAEAAEAAAAANAAADoAEAABAAAADgAAB4IAEAABAAAAOgAQAAEAAAAKABAABAAAADcAAAmCABAAAQAAADoAEAADAAAAOgAQAAEAAAABQAAAAACAPzgAAAeCABAAAwAAAAoAEAAJAAAAGgAQAAgAAAAyAAAKggAQAAMAAAAKABAACAAAABoAEAAJAAAAOgAQgEEAAAADAAAAMgAACYIAEAABAAAAOgAQAAMAAAA6ABAAAQAAACoAEAAAAAAANwAACUIAEAAAAAAAKgAQAAgAAAA6ABAAAQAAACoAEAAAAAAANAAACEIAEAAAAAAAKgAQgEEAAAAAAAAAAUAAAAAAAAASAAABNgAABUIAEAAAAAAAAUAAAAAAAAAVAAABSAAAC:IAEAAEAAAARgAQAAAAAABGfhAAAQAAAABgEAABAAAAAUAAAAAAAAA4AAAHEgAQAAAAAAAqABAAAAAAADoAEAAEAAAAEAAABxIAEAAEAAAARgIQAAoAAABGAhAABgAAABAAAAciABAABAAAAEYCEAAKAAAARgIQAAcAAAAQAAAHQgAQAAQAAABGAhAACgAAAEYCEAABAAAAEAAABxIAEAAIAAAARgIQAAwAAABGAhAABgAAABAAAAciABAACAAAAEYCEAAMAAAARgIQAAcAAAAQAAAHQgAQAAgAAABGAhAADAAAAEYCEAABAAAAEAAABxIAEAAJAAAARgIQAA4AAABGAhAABgAAABAAAAciABAACQAAAEYCEAAOAAAARgIQAAcAAAAQAAAHQgAQAAkAAABGAhAADgAAAEYCEAABAAAAEAAABxIAEAAGAAAARgIQABAAAABGAhAABgAAABAAAAciABAABgAAAEYCEAAQAAAARgIQAAcAAAAQAAAHQgAQAAYAAABGAhAAEAAAAEYCEAABAAAAMQAAByIAEAAAAAAAAUAAAAAAAAAqABAABAAAAAEAAAdCABAAAAAAABoAEAAAAAAAAUAAAAEAAAAxAAAHEgAQAAEAAAABQAAAAAAAACoAEAAIAAAANwAACSIAEAAAAAAAGgAQAAAAAAABQAAAAwAAAAFAAAACAAAANwAACSIAEAAAAAAACgAQAAEAAAAaABAAAAAAACoAEAAAAAAAMQAAB0IAEAAAAAAAAUAAAAAAAAAqABAACQAAAB4AAAcSABAAAQAAABoAEAAAAAAAAUAAAAQAAAA3AAAJIgAQAAAAAAAqABAAAAAAAAoAEAABAAAAGgAQAAAAAAAxAAAHQgAQAAAAAAABQAAAAAAAACoAEAAGAAAAHgAABxIAEAABAAAAGgAQAAAAAAABQAAACAAAADcAAAkiABAAAAAAACoAEAAAAAAACgAQAAEAAAAaABAAAAAAAB8AAAMaABAAAAAAADYAAAVyABAAAQAAAEYCEAAGAAAANgAACPIAEAAHAAAAAkAAAAAAAAAAAAAAAAAAAAAAAAASAAABIAAAB0IAEAAAAAAAGgAQAAAAAAABQAAAAQAAAB8ABAMqABAAAAAAADgAAAdyABAACgAAAKYKEAAEAAAARgIQAAgAAAAyAAAKcgAQAAgAAABGAhAABAAAAKYKEIBBAAAACAAAAEYCEAAKAAAAOAAAB3IAEAAKAAAApgoQAAQAAABGAhAABgAAADIAAApyABAACQAAAEYCEAAEAAAApgoQgEEAAAAGAAAARgIQAAoAAAA2AAAFcgAQAAEAAABGAhAABgAAADYAAAjyABAABwAAAAJAAAAAAAAAAAAAAAAAAAADAAAAEgAAASAAAAdCABAAAAAAABoAEAAAAAAAAUAAAAIAAAAfAAQDKgAQAAAAAAA4AAAHcgAQAAoAAABGAhAABAAAAKYKEAAIAAAAMgAACnIAEAAEAAAARgIQAAgAAACmChCAQQAAAAQAAABGAhAACgAAADgAAAdyABAACgAAAKYKEAAIAAAARgIQAAkAAAAyAAAKcgAQAAkAAABGAhAACAAAAKYKEIBBAAAACQAAAEYCEAAKAAAANgAABXIAEAABAAAARgIQAAYAAAA2AAAI8gAQAAcAAAACQAAAAAAAAAAAAAAAAAAAAwAAABIAAAEgAAAHQgAQAAAAAAAaABAAAAAAAAFAAAADAAAAHwAEAyoAEAAAAAAAOAAAB3IAEAAKAAAApgoQAAgAAABGAhAACQAAADIAAApyABAACQAAAEYCEAAIAAAApgoQgEEAAAAJAAAARgIQAAoAAAA4AAAHcgAQAAoAAACmChAABAAAAEYCEAAGAAAAMgAACnIAEAABAAAARgIQAAQAAACmChCAQQAAAAYAAABGAhAACgAAADYAAAjyABAABwAAAAJAAAAAAAAAAAAAAAAAAAAEAAAAEgAAASAAAAdCABAAAAAAABoAEAAAAAAAAUAAAAQAAAAfAAQDKgAQAAAAAAA4AAAHcgAQAAoAAACmChAACQAAAEYCEAAGAAAAMgAACnIAEAAEAAAARgIQAAkAAACmChCAQQAAAAYAAABGAhAACgAAADgAAAdyABAACgAAAEYCEAAIAAAApgoQAAkAAAAyAAAKcgAQAAgAAABGAhAACQAAAKYKEIBBAAAACAAAAEYCEAAKAAAANgAABXIAEAABAAAARgIQAAYAAAA2AAAI8gAQAAcAAAACQAAAAAAAAAAAAAAAAAAAAwAAABIAAAEgAAAHQgAQAAAAAAAaABAAAAAAAAFAAAAFAAAAHwAEAyoAEAAAAAAANgAABXIAEAABAAAARgIQAAYAAAA2AAAI8gAQAAcAAAACQAAAAAAAAAAAAAAAAAAAAAAAABIAAAEgAAAHQgAQAAAAAAAaABAAAAAAAAFAAAAGAAAAHwAEAyoAEAAAAAAAOAAAB3IAEAAKAAAARgIQAAQAAACmChAACAAAADIAAApyABAABAAAAEYCEAAIAAAApgoQgEEAAAAEAAAARgIQAAoAAAA4AAAHcgAQAAoAAACmChAACQAAAEYCEAAGAAAAMgAACnIAEAABAAAARgIQAAkAAACmChCAQQAAAAYAAABGAhAACgAAADYAAAjyABAABwAAAAJAAAAAAAAAAAAAAAAAAAAEAAAAEgAAASAAAAdCABAAAAAAABoAEAAAAAAAAUAAAAcAAAAfAAQDKgAQAAAAAAA4AAAHcgAQAAoAAACmChAABAAAAEYCEAAGAAAAMgAACnIAEAAHAAAARgIQAAQAAACmChCAQQAAAAYAAABGAhAACgAAADgAAAdyABAACgAAAKYKEAAJAAAARgIQAAYAAAAyAAAKcgAQAAEAAABGAhAACQAAAKYKEIBBAAAABgAAAEYCEAAKAAAANgAABYIAEAAHAAAAAUAAAAUAAAASAAABIAAAB0IAEAAAAAAAGgAQAAAAAAABQAAACAAAAB8ABAMqABAAAAAAADgAAAdyABAACgAAAEYCEAAEAAAApgoQAAYAAAAyAAAKcgAQAAQAAABGAhAABgAAAKYKEIBBAAAABAAAAEYCEAAKAAAAOAAAB3IAEAAKAAAApgoQAAYAAABGAhAACQAAADIAAApyABAACAAAAEYCEAAGAAAApgoQgEEAAAAJAAAARgIQAAoAAAA2AAAFcgAQAAkAAABGAhAABgAAADYAAAVyABAAAQAAAEYCEAAGAAAANgAACPIAEAAHAAAAAkAAAAAAAAAAAAAAAAAAAAMAAAASAAABIAAAB0IAEAAAAAAAGgAQAAAAAAABQAAACQAAAB8ABAMqABAAAAAAADgAAAdyABAACgAAAKYKEAAEAAAARgIQAAgAAAAyAAAKcgAQAAgAAABGAhAABAAAAKYKEIBBAAAACAAAAEYCEAAKAAAAOAAAB3IAEAAKAAAApgoQAAYAAABGAhAACQAAADIAAApyABAACQAAAEYCEAAGAAAApgoQgEEAAAAJAAAARgIQAAoAAAA2AAAFcgAQAAEAAABGAhAABgAAADYAAAjyABAABwAAAAJAAAAAAAAAAAAAAAAAAAAEAAAAEgAAASAAAAdCABAAAAAAABoAEAAAAAAAAUAAAAoAAAAfAAQDKgAQAAAAAAA2AAAFcgAQAAEAAABGAhAABgAAADYAAAjyABAABwAAAAJAAAAAAAAAAAAAAAAAAAAAAAAAEgAAATgAAAdyABAACgAAAKYKEAAGAAAARgIQAAkAAAAyAAAKcgAQAAoAAABGAhAABgAAAKYKEIBBAAAACQAAAEYCEAAKAAAAOAAAB3IAEAALAAAApgoQAAgAAABGAhAACQAAADIAAApyABAACwAAAEYCEAAIAAAApgoQgEEAAAAJAAAARgIQAAsAAAA4AAAHcgAQAAwAAABGAhAACAAAAKYKEAAJAAAAMgAACnIAEAAMAAAARgIQAAkAAACmChCAQQAAAAgAAABGAhAADAAAADgAAAdyABAADQAAAEYCEAAEAAAApgoQAAYAAAAyAAAKcgAQAA0AAABGAhAABgAAAKYKEIBBAAAABAAAAEYCEAANAAAAOAAAB3IAEAAOAAAApgoQAAQAAABGAhAACAAAADIAAApyABAADgAAAEYCEAAEAAAApgoQgEEAAAAIAAAARgIQAA4AAAAgAAAK8gAQAA8AAABWBRAAAAAAAAJAAAALAAAADAAAAA0AAAAOAAAAOAAAB3IAEAAQAAAARgIQAAQAAACmChAACAAAADIAAApyABAAEAAAAEYCEAAIAAAApgoQgEEAAAAEAAAARgIQABAAAAAgAAAHIgAQAAAAAAAaABAAAAAAAAFAAAAPAAAAAQAAB4IAEAARAAAAGgAQAAAAAAABQAAABAAAADYAAAWCABAADQAAAAFAAAAFAAAANgAACHIAEAARAAAAAkAAAAAAAAAAAAAAAAAAAAAAAAA3AAAJ8gAQABEAAAD2DxAADwAAAEYOEAANAAAARg4QABEAAAA3AAAJcgAQABAAAAD2DxAADwAAAEYCEAAQAAAARgIQAAQAAAA2AAAFggAQAAYAAAABQAAABQAAADcAAAnyABAAEQAAAKYKEAAPAAAARg4QAAYAAABGDhAAEQAAADcAAAlyABAAEAAAAKYKEAAPAAAARgIQAAQAAABGAhAAEAAAADcAAAlyABAADgAAAKYKEAAPAAAARgIQAA4AAABGAhAACAAAADcAAAlyABAAEgAAAKYKEAAPAAAARgIQAAwAAABGAhAACQAAADcAAAlyABAAEwAAAKYKEAAPAAAARgIQAAkAAABGAhAABgAAADcAAAzyABAAEQAAAFYFEAAPAAAAAkAAAAAAAAAAAAAAAAAAAAQAAABGDhAAEQAAADcAAAlyABAADQAAAFYFEAAPAAAARgIQAA0AAABGAhAAEAAAADcAAAlyABAADAAAAFYFEAAPAAAARgIQAAwAAABGAhAADgAAADcAAAlyABAADgAAAFYFEAAPAAAARgIQAAkAAABGAhAAEgAAADcAAAniABAADwAAAFYFEAAPAAAABgkQAAYAAAAGCRAAEwAAADcAAAlyABAABAAAAAYAEAAPAAAARgIQAAQAAABGAhAADQAAADcAAAlyABAACAAAAAYAEAAPAAAARgIQAAgAAABGAhAADAAAADcAAAlyABAACQAAAAYAEAAPAAAARgIQAAsAAABGAhAADgAAADcAAAlyABAAAQAAAAYAEAAPAAAARgIQAAoAAACWBxAADwAAADcAAAnyABAABwAAAAYAEAAPAAAARg4QAAYAAABGDhAAEQAAABUAAAEVAAABFQAAARUAAAEVAAABFQAAARUAAAEVAAABFQAAARUAAAEVAAABHwAEAzoAEAAHAAAAIAAACnIAEAAGAAAA9g8QAAcAAAACQAAAAwAAAAQAAAAFAAAAAAAAADcAAAlyABAAAQAAAAYAEAAGAAAARgIQAAQAAABGAhAAAQAAADcAAAmyABAABgAAAFYFEAAGAAAARggQAAQAAABGCBAABwAAABAAAAciABAAAAAAAEYCEAAEAAAARgIQAAQAAABEAAAFIgAQAAAAAAAaABAAAAAAADgAAAdyABAABAAAAFYFEAAAAAAARgIQAAQAAAAQAAAHIgAQAAAAAABGAhAACAAAAEYCEAAIAAAARAAABSIAEAAAAAAAGgAQAAAAAAA4AAAHcgAQAAcAAABWBRAAAAAAAEYCEAAIAAAAEAAAByIAEAAAAAAARgIQAAkAAABGAhAACQAAAEQAAAUiABAAAAAAABoAEAAAAAAAOAAAB3IAEAAIAAAAVgUQAAAAAABGAhAACQAAABAAAAciABAAAAAAAEYCEAABAAAARgIQAAEAAABEAAAFIgAQAAAAAAAaABAAAAAAADgAAAdyABAAAQAAAFYFEAAAAAAARgIQAAEAAAAQAAAHIgAQAAAAAABGAxAABgAAAEYDEAAGAAAARAAABSIAEAAAAAAAGgAQAAAAAAA4AAAHsgAQAAYAAABWBRAAAAAAAEYMEAAGAAAAEAAAByIAEAAAAAAARgIQAAQAAABGAhAABwAAAAAAAAhCABAAAAAAABoAEIDBAAAAAAAAAAFAAAAAAIA:SwAABUIAEAAAAAAAKgAQAAAAAAAyAAAKggAQAAEAAAAaABCAgQAAAAAAAAABQAAAMG6ZvAFAAAAnFpg9MgAACoIAEAABAAAAOgAQAAEAAAAaABCAgQAAAAAAAAABQAAAhDRZvjIAAAqCABAAAQAAADoAEAABAAAAGgAQgIEAAAAAAAAAAUAAAKQNyT84AAAHggAQAAMAAAAqABAAAAAAADoAEAABAAAAMgAACYIAEAADAAAAOgAQAAMAAAABQAAAAAAAwAFAAADbD0lAMQAACCIAEAAAAAAAGgAQAAAAAAAaABCAQQAAAAAAAAABAAAHIgAQAAAAAAAaABAAAAAAADoAEAADAAAAMgAACSIAEAAAAAAAOgAQAAEAAAAqABAAAAAAABoAEAAAAAAAMQAAB0IAEAAAAAAAAUAAAG8SgzoaABAAAAAAAE0AAAaCABAAAQAAAADQAAAaABAAAAAAAA4AAAciABAAAAAAABoAEAAAAAAAOgAQAAEAAAA3AAAJIgAQAAAAAAAqABAAAAAAABoAEAAAAAAAAUAAAAAAgD84AAAHQgAQAAAAAAAaABAABAAAAAoAEAAHAAAAMgAACkIAEAAAAAAACgAQAAQAAAAaABAABwAAACoAEIBBAAAAAAAAABAAAAeCABAAAQAAAEYCEAAHAAAARgIQAAgAAAAAAAAIggAQAAMAAAA6ABCAwQAAAAEAAAABQAAAAACAP0sAAAWCABAAAwAAADoAEAADAAAAMgAACoIAEAAEAAAAOgAQgIEAAAABAAAAAUAAADBumbwBQAAAJxaYPTIAAAqCABAABAAAADoAEAAEAAAAOgAQgIEAAAABAAAAAUAAAIQ0Wb4yAAAKggAQAAQAAAA6ABAABAAAADoAEICBAAAAAQAAAAFAAACkDck:OAAAB4IAEAAFAAAAOgAQAAMAAAA6ABAABAAAADIAAAmCABAABQAAADoAEAAFAAAAAUAAAAAAAMABQAAA2w9JQDEAAAiCABAAAQAAADoAEAABAAAAOgAQgEEAAAABAAAAAQAAB4IAEAABAAAAOgAQAAEAAAA6ABAABQAAADIAAAmCABAAAQAAADoAEAAEAAAAOgAQAAMAAAA6ABAAAQAAADEAAAeCABAAAwAAAAFAAABvEoM6OgAQAAEAAABNAAAGggAQAAQAAAAA0AAAOgAQAAEAAAAOAAAHggAQAAEAAAA6ABAAAQAAADoAEAAEAAAANwAACYIAEAABAAAAOgAQAAMAAAA6ABAAAQAAAAFAAAAAAIA:OAAAB4IAEAADAAAAGgAQAAcAAAAKABAACAAAADIAAAqCABAAAwAAAAoAEAAHAAAAGgAQAAgAAAA6ABCAQQAAAAMAAAA4AAAHggAQAAEAAAA6ABAAAQAAADoAEAADAAAAMgAACSIAEAAAAAAAKgAQAAAAAAAaABAAAAAAADoAEAABAAAAEAAAB0IAEAAAAAAARgIQAAgAAABGAhAAAQAAAAAAAAiCABAAAQAAACoAEIDBAAAAAAAAAAFAAAAAAIA:SwAABYIAEAABAAAAOgAQAAEAAAAyAAAKggAQAAMAAAAqABCAgQAAAAAAAAABQAAAMG6ZvAFAAAAnFpg9MgAACoIAEAADAAAAOgAQAAMAAAAqABCAgQAAAAAAAAABQAAAhDRZvjIAAAqCABAAAwAAADoAEAADAAAAKgAQgIEAAAAAAAAAAUAAAKQNyT84AAAHggAQAAQAAAA6ABAAAQAAADoAEAADAAAAMgAACYIAEAAEAAAAOgAQAAQAAAABQAAAAAAAwAFAAADbD0lAMQAACEIAEAAAAAAAKgAQAAAAAAAqABCAQQAAAAAAAAABAAAHQgAQAAAAAAAqABAAAAAAADoAEAAEAAAAMgAACUIAEAAAAAAAOgAQAAMAAAA6ABAAAQAAACoAEAAAAAAAMQAAB4IAEAABAAAAAUAAAG8SgzoqABAAAAAAAE0AAAaCABAAAwAAAADQAAAqABAAAAAAAA4AAAdCABAAAAAAACoAEAAAAAAAOgAQAAMAAAA3AAAJQgAQAAAAAAA6ABAAAQAAACoAEAAAAAAAAUAAAAAAgD84AAAHggAQAAEAAAAKABAAAQAAABoAEAAIAAAAMgAACoIAEAABAAAACgAQAAgAAAAaABAAAQAAADoAEIBBAAAAAQAAADIAAAkiABAAAAAAADoAEAABAAAAKgAQAAAAAAAaABAAAAAAACEAAAdCABAAAAAAADoAEAAHAAAAAUAAAAQAAAAQAAAHQgAQAAEAAABGAhAAAQAAAEYDEAAGAAAAAAAACIIAEAABAAAAKgAQgMEAAAABAAAAAUAAAAAAgD9LAAAFggAQAAEAAAA6ABAAAQAAADIAAAqCABAAAwAAACoAEICBAAAAAQAAAAFAAAAwbpm8AUAAACcWmD0yAAAKggAQAAMAAAA6ABAAAwAAACoAEICBAAAAAQAAAAFAAACENFm%MgAACoIAEAADAAAAOgAQAAMAAAAqABCAgQAAAAEAAAABQAAApA3JPzgAAAeCABAABAAAADoAEAABAAAAOgAQAAMAAAAyAAAJggAQAAQAAAA6ABAABAAAAAFAAAAAAADAAUAAANsPSUAxAAAIQgAQAAEAAAAqABAAAQAAACoAEIBBAAAAAQAAAAEAAAdCABAAAQAAACoAEAABAAAAOgAQAAQAAAAyAAAJQgAQAAEAAAA6ABAAAwAAADoAEAABAAAAKgAQAAEAAAAxAAAHggAQAAEAAAABQAAAbxKDOioAEAABAAAATQAABoIAEAADAAAAANAAACoAEAABAAAADgAAB0IAEAABAAAAKgAQAAEAAAA6ABAAAwAAADcAAAlCABAAAQAAADoAEAABAAAAKgAQAAEAAAABQAAAAACAPzgAAAciABAAAQAAABoAEAABAAAACgAQAAYAAAAyAAAKEgAQAAEAAAAKABAAAQAAABoAEAAGAAAAGgAQgEEAAAABAAAAMgAACRIAEAABAAAACgAQAAEAAAAqABAAAQAAABoAEAAAAAAANwAACSIAEAAAAAAAKgAQAAAAAAAKABAAAQAAABoAEAAAAAAAEAAAB0IAEAAAAAAARgMQAAYAAABGAhAABAAAAAAAAAgSABAAAQAAACoAEIDBAAAAAAAAAAFAAAAAAIA:SwAABRIAEAABAAAACgAQAAEAAAAyAAAKIgAQAAEAAAAqABCAgQAAAAAAAAABQAAAMG6ZvAFAAAAnFpg9MgAACiIAEAABAAAAGgAQAAEAAAAqABCAgQAAAAAAAAABQAAAhDRZvjIAAAoiABAAAQAAABoAEAABAAAAKgAQgIEAAAAAAAAAAUAAAKQNyT84AAAHQgAQAAEAAAAKABAAAQAAABoAEAABAAAAMgAACUIAEAABAAAAKgAQAAEAAAABQAAAAAAAwAFAAADbD0lAMQAACEIAEAAAAAAAKgAQAAAAAAAqABCAQQAAAAAAAAABAAAHQgAQAAAAAAAqABAAAAAAACoAEAABAAAAMgAACUIAEAAAAAAAGgAQAAEAAAAKABAAAQAAACoAEAAAAAAAMQAABxIAEAABAAAAAUAAAG8SgzoqABAAAAAAAE0AAAYiABAAAQAAAADQAAAqABAAAAAAAA4AAAdCABAAAAAAACoAEAAAAAAAGgAQAAEAAAA3AAAJQgAQAAAAAAAKABAAAQAAACoAEAAAAAAAAUAAAAAAgD84AAAHEgAQAAEAAAAKABAABAAAABoAEAAGAAAAMgAAChIAEAABAAAACgAQAAYAAAAaABAABAAAAAoAEIBBAAAAAQAAADIAAAlCABAAAAAAAAoAEAABAAAAKgAQAAAAAAAaABAAAAAAADcAAAkiABAAAAAAACoAEAAGAAAAKgAQAAAAAAAaABAAAAAAADQAAAgiABAAAAAAABoAEIBBAAAAAAAAAAFAAAAAAAAAEgAAATYAAAUiABAAAAAAAAFAAAAAAAAAFQAAATgAAAcSABAAAAAAAAoAEAAAAAAAAUAAAM3MTD0yAAAJcgAQAAAAAABGAhAAAwAAAFYFEAAAAAAABgAQAAAAAAAAAAAJcgAQAAEAAABGAhAABQAAAJaHIIBBAAAAAAAAAA8AAAAQAAAHEgAQAAEAAABGAhAAAQAAAEYCEAABAAAADgAAChIAEAABAAAAAkAAAAAAgD8AAIA:AACAPwAAgD8KABAAAQAAADgAAAdyABAAAAAAAEYCEAAAAAAABgAQAAEAAAA4AAAIcgAQAAAAAABGAhAAAAAAAEaCIAAAAAAAEAAAAA8AAAcSABAAAQAAAPYPEAACAAAA9g8QAAIAAAAAAAAHggAQAAAAAAA6ABAAAAAAAAoAEAABAAAAAAAAB4IAEAAAAAAAOgAQAAAAAAABQAAAAACAvzIAAAlyIBAAAAAAAEYCEAAAAAAA9g8QAAAAAABGAhAAAgAAADYAAAWCIBAAAAAAAAFAAAAAAIA:PgAAAVNUQVR0AAAAwgIAABsAAAAAAAAAAwAAAMgBAAAgAAAAEgAAABkAAAAYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAAAAAAADMAAABBAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";
kha_Shaders.deferred_light_voxel_fragData0 = "s37812:ABNfc2x0Y01hdF9zYW1wbGVyAABfc2x0Y01hZ19zYW1wbGVyAAFfZ2J1ZmZlcjBfc2FtcGxlcgACX2didWZmZXIxX3NhbXBsZXIAA19nYnVmZmVyRF9zYW1wbGVyAARfc2Vudm1hcEJyZGZfc2FtcGxlcgAFX3NlbnZtYXBSYWRpYW5jZV9zYW1wbGVyAAZfdm94ZWxzX3NhbXBsZXIAB19zc2FvdGV4X3NhbXBsZXIACHNsdGNNYXQAAHNsdGNNYWcAAWdidWZmZXIwAAJnYnVmZmVyMQADZ2J1ZmZlckQABHNlbnZtYXBCcmRmAAVzZW52bWFwUmFkaWFuY2UABnZveGVscwAHc3Nhb3RleAAIJEdsb2JhbHMAAA5jb25lT2Zmc2V0AAAAAAAEAAAAAQFjb25lQXBlcnR1cmUABAAAAAQAAAABAWxpZ2h0QXJlYTAAEAAAAAwAAAADAWxpZ2h0QXJlYTEAIAAAAAwAAAADAWxpZ2h0QXJlYTIAMAAAAAwAAAADAWxpZ2h0QXJlYTMAQAAAAAwAAAADAWV5ZQBQAAAADAAAAAMBZXllTG9vawBgAAAADAAAAAMBY2FtZXJhUHJvagBwAAAACAAAAAIBZW52bWFwRGF0YQCAAAAAEAAAAAQBc2hpcnIAkAAAAHAAAAAEAWVudm1hcE51bU1pcG1hcHMAAAEAAAQAAAABAXBvaW50UG9zAAQBAAAMAAAAAwFwb2ludENvbAAQAQAADAAAAAMBRFhCQ9eXcUG:EeNQKwKj8kA3ysMBAAAAkGwAAAUAAAA0AAAASAYAAJQGAADIBgAAFGwAAFJERUYMBgAAAQAAAIQDAAATAAAAHAAAAAAE::8AAQAA4gUAAHwCAAADAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAjQIAAAMAAAAAAAAAAAAAAAAAAAABAAAAAQAAAAEAAACeAgAAAwAAAAAAAAAAAAAAAAAAAAIAAAABAAAAAQAAALACAAADAAAAAAAAAAAAAAAAAAAAAwAAAAEAAAABAAAAwgIAAAMAAAAAAAAAAAAAAAAAAAAEAAAAAQAAAAEAAADUAgAAAwAAAAAAAAAAAAAAAAAAAAUAAAABAAAAAQAAAOkCAAADAAAAAAAAAAAAAAAAAAAABgAAAAEAAAABAAAAAgMAAAMAAAAAAAAAAAAAAAAAAAAHAAAAAQAAAAEAAAASAwAAAwAAAAAAAAAAAAAAAAAAAAgAAAABAAAAAQAAACMDAAACAAAABQAAAAQAAAD:::::AAAAAAEAAAANAAAAKwMAAAIAAAAFAAAABAAAAP::::8BAAAAAQAAAA0AAAAzAwAAAgAAAAUAAAAEAAAA:::::wIAAAABAAAADQAAADwDAAACAAAABQAAAAQAAAD:::::AwAAAAEAAAANAAAARQMAAAIAAAAFAAAABAAAAP::::8EAAAAAQAAAA0AAABOAwAAAgAAAAUAAAAEAAAA:::::wUAAAABAAAADQAAAFoDAAACAAAABQAAAAQAAAD:::::BgAAAAEAAAANAAAAagMAAAIAAAAFAAAACAAAAP::::8HAAAAAQAAAA0AAABxAwAAAgAAAAUAAAAEAAAA:::::wgAAAABAAAADQAAAHkDAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAX3NsdGNNYXRfc2FtcGxlcgBfc2x0Y01hZ19zYW1wbGVyAF9nYnVmZmVyMF9zYW1wbGVyAF9nYnVmZmVyMV9zYW1wbGVyAF9nYnVmZmVyRF9zYW1wbGVyAF9zZW52bWFwQnJkZl9zYW1wbGVyAF9zZW52bWFwUmFkaWFuY2Vfc2FtcGxlcgBfdm94ZWxzX3NhbXBsZXIAX3NzYW90ZXhfc2FtcGxlcgBzbHRjTWF0AHNsdGNNYWcAZ2J1ZmZlcjAAZ2J1ZmZlcjEAZ2J1ZmZlckQAc2Vudm1hcEJyZGYAc2Vudm1hcFJhZGlhbmNlAHZveGVscwBzc2FvdGV4ACRHbG9iYWxzAKureQMAAA4AAACcAwAAIAEAAAAAAAAAAAAA7AQAAAAAAAAEAAAAAgAAAPgEAAAAAAAACAUAAAQAAAAEAAAAAgAAAPgEAAAAAAAAFQUAABAAAAAMAAAAAgAAACAFAAAAAAAAMAUAACAAAAAMAAAAAgAAACAFAAAAAAAAOwUAADAAAAAMAAAAAgAAACAFAAAAAAAARgUAAEAAAAAMAAAAAgAAACAFAAAAAAAAUQUAAFAAAAAMAAAAAgAAACAFAAAAAAAAVQUAAGAAAAAMAAAAAgAAACAFAAAAAAAAXQUAAHAAAAAIAAAAAgAAAGgFAAAAAAAAeAUAAIAAAAAQAAAAAgAAAIQFAAAAAAAAlAUAAJAAAABwAAAAAgAAAJwFAAAAAAAArAUAAAABAAAEAAAAAgAAAMAFAAAAAAAA0AUAAAQBAAAMAAAAAgAAACAFAAAAAAAA2QUAABABAAAMAAAAAgAAACAFAAAAAAAAY29uZU9mZnNldACrAAADAAEAAQAAAAAAAAAAAGNvbmVBcGVydHVyZQBsaWdodEFyZWEwAAEAAwABAAMAAAAAAAAAAABsaWdodEFyZWExAGxpZ2h0QXJlYTIAbGlnaHRBcmVhMwBleWUAZXllTG9vawBjYW1lcmFQcm9qAAEAAwABAAIAAAAAAAAAAABlbnZtYXBEYXRhAKsBAAMAAQAEAAAAAAAAAAAAc2hpcnIAq6sBAAMAAQAEAAcAAAAAAAAAZW52bWFwTnVtTWlwbWFwcwCrq6sAAAIAAQABAAAAAAAAAAAAcG9pbnRQb3MAcG9pbnRDb2wATWljcm9zb2Z0IChSKSBITFNMIFNoYWRlciBDb21waWxlciAxMC4xAKurSVNHTkQAAAACAAAACAAAADgAAAAAAAAAAAAAAAMAAAAAAAAAAwMAADgAAAABAAAAAAAAAAMAAAABAAAABwcAAFRFWENPT1JEAKurq09TR04sAAAAAQAAAAgAAAAgAAAAAAAAAAAAAAADAAAAAAAAAA8AAABTVl9UYXJnZXQAq6tTSERSRGUAAEAAAABRGQAAWQAABEaOIAAAAAAAEgAAAFoAAAMAYBAAAAAAAFoAAAMAYBAAAQAAAFoAAAMAYBAAAgAAAFoAAAMAYBAAAwAAAFoAAAMAYBAABAAAAFoAAAMAYBAABQAAAFoAAAMAYBAABgAAAFoAAAMAYBAABwAAAFoAAAMAYBAACAAAAFgYAAQAcBAAAAAAAFVVAABYGAAEAHAQAAEAAABVVQAAWBgABABwEAACAAAAVVUAAFgYAAQAcBAAAwAAAFVVAABYGAAEAHAQAAQAAABVVQAAWBgABABwEAAFAAAAVVUAAFgYAAQAcBAABgAAAFVVAABYKAAEAHAQAAcAAABVVQAAWBgABABwEAAIAAAAVVUAAGIQAAMyEBAAAAAAAGIQAANyEBAAAQAAAGUAAAPyIBAAAAAAAGgAAAIdAAAASAAAC:IAEAAAAAAARhAQAAAAAACGfRAAAgAAAABgEAACAAAAAUAAAAAAAAAAAAALcgAQAAEAAACGABCAwQAAAAAAAAACQAAAAACAPwAAgD8AAIA:AAAAAAAAAAhCABAAAgAAACoAEIDBAAAAAAAAAAoAEAABAAAAHQAABxIAEAABAAAAKgAQAAIAAAABQAAAAAAAAB0AAAoyABAAAwAAAIYAEAAAAAAAAkAAAAAAAAAAAAAAAAAAAAAAAAA3AAAPMgAQAAMAAABGABAAAwAAAAJAAAAAAIA:AACAPwAAAAAAAAAAAkAAAAAAgL8AAIC:AAAAAAAAAAA4AAAHYgAQAAEAAABWBhAAAQAAAAYBEAADAAAANwAACTIAEAACAAAABgAQAAEAAACGABAAAAAAAJYFEAABAAAAEAAABxIAEAABAAAARgIQAAIAAABGAhAAAgAAAEQAAAUSABAAAQAAAAoAEAABAAAAOAAAB3IAEAABAAAABgAQAAEAAABGAhAAAgAAADIAAAmCABAAAQAAADoAEAAAAAAAAUAAAAD:f0EBQAAAgACANxsAAAWCABAAAQAAADoAEAABAAAAVgAABYIAEAABAAAAOgAQAAEAAAAyAAAJggAQAAEAAAA6ABAAAQAAAAFAAACAAIC9OgAQAAAAAAA4IAAHggAQAAEAAAA6ABAAAQAAAAFAAACAB4BBSAAAC:IAEAACAAAARhAQAAAAAABGfhAAAwAAAABgEAADAAAAAUAAAAAAAAAyAAAKcgAQAAMAAAD2DxAAAQAAAEYCEIBBAAAAAgAAAEYCEAACAAAAAAAACvIAEAAEAAAARg4QAAIAAAACQAAACtcjvQrXI70K1yO9AACAvzIAAAxyABAABAAAAPYPEAABAAAARgIQAAQAAAACQAAACtcjPQrXIz0K1yM9AAAAAEgAAAvyABAABQAAAEYQEAAAAAAARn4QAAQAAAAAYBAABAAAAAFAAAAAAAAAMgAACYIAEAABAAAACgAQAAUAAAABQAAAAAAAQAFAAAAAAIC:EAAAB4IAEAACAAAARhIQAAEAAABGEhAAAQAAAEQAAAWCABAAAgAAADoAEAACAAAAOAAAB3IAEAAFAAAA9g8QAAIAAABGEhAAAQAAADIAAAmCABAAAQAAADoAEAABAAAAAUAAAAAAAD8BQAAAAAAAPwAAAAmCABAAAQAAADoAEAABAAAACoAggEEAAAAAAAAABwAAAA4AAAiCABAAAQAAABqAIAAAAAAABwAAADoAEAABAAAAEAAACIIAEAACAAAARoIgAAAAAAAGAAAARgIQAAUAAAAOAAAHggAQAAEAAAA6ABAAAQAAADoAEAACAAAAMgAACnIAEAAFAAAARgIQAAUAAAD2DxAAAQAAAEaCIAAAAAAABQAAAAAAAAlyABAABgAAAEYCEIBBAAAABQAAAEaCIAAAAAAABQAAABAAAAeCABAAAQAAAEYCEAAGAAAARgIQAAYAAABEAAAFggAQAAEAAAA6ABAAAQAAADgAAAdyABAABgAAAPYPEAABAAAARgIQAAYAAAAQAAAHggAQAAEAAABGAhAAAQAAAEYCEAAGAAAANAAAB4IAEAABAAAAOgAQAAEAAAABQAAAAAAAADIAAAmCABAAAgAAADoAEAABAAAAOgAQAAQAAAABQAAAAACAPwAAAAgSABAAAAAAADoAEIBBAAAAAQAAAAFAAAAAAIA:SAAAC:IAEAAHAAAAFgUQAAAAAABGfhAABQAAAABgEAAFAAAAAUAAAAAAAAA4AAAIggAQAAMAAAAaABAAAQAAABqAIAAAAAAACAAAADIAAAuCABAAAwAAAAoAEAABAAAAKoAgAAAAAAAIAAAAOgAQgEEAAAADAAAADwAACIIAEAAEAAAARgAQAAEAAACWhSAAAAAAAAgAAAA4AAALcgAQAAgAAABGgiAAAAAAAA8AAAACQAAAhqvbPoar2z6Gq9s%AAAAADgAAAeCABAABQAAACoAEAABAAAAKgAQAAEAAAAyAAAKggAQAAUAAAA6ABAABAAAADoAEAAEAAAAOgAQgEEAAAAFAAAAOAAAB4IAEAAGAAAAOgAQAAMAAAA6ABAAAwAAADYAAAYyABAACQAAAOaKIAAAAAAADQAAADYAAAZCABAACQAAAAqAIAAAAAAADgAAADgAAAdyABAACgAAAPYPEAAGAAAARgIQAAkAAAA4AAAKcgAQAAoAAABGAhAACgAAAAJAAABxPT4:cT0%P3E9Pj8AAAAAMgAACXIAEAAIAAAARgIQAAgAAAD2DxAABQAAAEYCEAAKAAAAMgAADXIAEAAIAAAARoIgAAAAAAAJAAAAAkAAAMbfYj:G32I:xt9iPwAAAABGAhAACAAAADIAAA1yABAACAAAAEYCEIBBAAAACQAAAAJAAAAqp30%Kqd9PiqnfT4AAAAARgIQAAgAAAA4AAAIcgAQAAkAAAD2DxAABAAAAEaCIAAAAAAADAAAADgAAApyABAACQAAAEYCEAAJAAAAAkAAAIarWz%Gq1s:hqtbPwAAAAAyAAAKcgAQAAgAAABGAhAACQAAAKYKEIBBAAAAAQAAAEYCEAAIAAAAOAAACHIAEAAJAAAA9g8QAAQAAACWhyAAAAAAAA4AAAA4AAAHcgAQAAkAAAD2DxAAAwAAAEYCEAAJAAAAMgAADHIAEAAIAAAARgIQAAkAAAACQAAAhqtbP4arWz%Gq1s:AAAAAEYCEAAIAAAAOAAACRIAEAAJAAAAKgAQgEEAAAABAAAAOoAgAAAAAAAMAAAAOAAACWIAEAAJAAAApgoQgEEAAAABAAAABoEgAAAAAAANAAAAOAAAB3IAEAAJAAAA9g8QAAMAAABGAhAACQAAADIAAAxyABAACAAAAEYCEAAJAAAAAkAAAIarWz%Gq1s:hqtbPwAAAABGAhAACAAAADgAAAhyABAACQAAAPYPEAAEAAAAlocgAAAAAAALAAAAMgAADHIAEAAIAAAARgIQAAkAAAACQAAAafyCP2n8gj9p:II:AAAAAEYCEAAIAAAAOAAACRIAEAAJAAAAKgAQgEEAAAABAAAAOoAgAAAAAAAJAAAAOAAACWIAEAAJAAAApgoQgEEAAAABAAAABoEgAAAAAAAKAAAAMgAADHIAEAAIAAAARgIQAAkAAAACQAAAafyCP2n8gj9p:II:AAAAAEYCEAAIAAAAOAAACDIAEAAJAAAA9g8QAAMAAADmiiAAAAAAAAoAAAA4AAAIQgAQAAkAAAA6ABAAAwAAAAqAIAAAAAAACwAAADIAAAxyABAACAAAAEYCEAAJAAAAAkAAAGn8gj9p:II:afyCPwAAAABGAhAACAAAADgAAAdyABAACAAAAEYCEAADAAAARgIQAAgAAAAQAAAIggAQAAMAAABGAhCAQQAAAAYAAABGAhAAAQAAAAAAAAeCABAAAwAAADoAEAADAAAAOgAQAAMAAAAyAAALcgAQAAkAAABmCBAAAQAAAPYPEIBBAAAAAwAAAGYIEIBBAAAABgAAACsAAAaCABAAAwAAAAqAIAAAAAAAEAAAADgAAAeCABAAAwAAABoAEAAAAAAAOgAQAAMAAAAAAAAIggAQAAQAAAAKABCAwQAAAAkAAAABQAAAAACAP0sAAAWCABAABAAAADoAEAAEAAAAMgAACoIAEAAFAAAACgAQgIEAAAAJAAAAAUAAADBumbwBQAAAJxaYPTIAAAqCABAABQAAADoAEAAFAAAACgAQgIEAAAAJAAAAAUAAAIQ0Wb4yAAAKggAQAAUAAAA6ABAABQAAAAoAEICBAAAACQAAAAFAAACkDck:OAAAB4IAEAAGAAAAOgAQAAQAAAA6ABAABQAAADIAAAmCABAABgAAADoAEAAGAAAAAUAAAAAAAMABQAAA2w9JQDEAAAjCABAABwAAAAYIEAAJAAAABggQgEEAAAAJAAAAAQAAB4IAEAAGAAAAOgAQAAYAAAAqABAABwAAADIAAAmCABAABAAAADoAEAAFAAAAOgAQAAQAAAA6ABAABgAAADMAAAmCABAABQAAACoAEICBAAAACQAAABoAEICBAAAACQAAADQAAAmCABAABgAAACoAEICBAAAACQAAABoAEICBAAAACQAAAA4AAAqCABAABgAAAAJAAAAAAIA:AACAPwAAgD8AAIA:OgAQAAYAAAA4AAAHggAQAAUAAAA6ABAABQAAADoAEAAGAAAAOAAAB4IAEAAGAAAAOgAQAAUAAAA6ABAABQAAADIAAAlCABAABwAAADoAEAAGAAAAAUAAAF%uqjwBQAAANlquvTIAAAlCABAABwAAADoAEAAGAAAAKgAQAAcAAAABQAAA4nY4PjIAAAlCABAABwAAADoAEAAGAAAAKgAQAAcAAAABQAAABB2pvjIAAAmCABAABgAAADoAEAAGAAAAKgAQAAcAAAABQAAAOPd:PzgAAAdCABAABwAAADoAEAAFAAAAOgAQAAYAAAAxAAAJggAQAAgAAAAqABCAgQAAAAkAAAAaABCAgQAAAAkAAAAyAAAJQgAQAAcAAAAqABAABwAAAAFAAAAAAADAAUAAANsPyT8BAAAHQgAQAAcAAAA6ABAACAAAACoAEAAHAAAAMgAACYIAEAAFAAAAOgAQAAUAAAA6ABAABgAAACoAEAAHAAAAAQAAB4IAEAAGAAAAOgAQAAcAAAABQAAA2w9JwAAAAAeCABAABQAAADoAEAAFAAAAOgAQAAYAAAAzAAAIggAQAAYAAAAqABAACQAAABoAEIBBAAAACQAAADQAAAhCABAABwAAACoAEAAJAAAAGgAQgEEAAAAJAAAAMQAACIIAEAAGAAAAOgAQAAYAAAA6ABCAQQAAAAYAAAAdAAAIQgAQAAcAAAAqABAABwAAACoAEIBBAAAABwAAAAEAAAeCABAABgAAADoAEAAGAAAAKgAQAAcAAAA3AAAKggAQAAUAAAA6ABAABgAAADoAEIBBAAAABQAAADoAEAAFAAAAAAAACIIAEAAFAAAAOgAQAAUAAAAKgCAAAAAAAAgAAAAAAAAHggAQAAUAAAA6ABAABQAAAAFAAADbD0lAOAAABxIAEAAJAAAAOgAQAAUAAAABQAAAg:kiPjgAAAciABAACQAAADoAEAAEAAAAAUAAAIP5oj5IAAAL8gAQAAkAAABGABAACQAAAEZ%EAAGAAAAAGAQAAYAAAA6ABAAAwAAADIAAAlyABAABAAAAEYCEAAEAAAABgAQAAcAAABWBRAABwAAADgAAAdyABAABAAAAEYCEAAEAAAARgIQAAkAAAA4AAAKcgAQAAQAAABGAhAABAAAAAJAAAAAAMA:AADAPwAAwD8AAAAAMgAADHIAEAAEAAAARgIQAAgAAAACQAAAg:miPoP5oj6D%aI%AAAAAEYCEAAEAAAAOAAACIIAEAADAAAAOgAQAAIAAAA6gCAAAAAAAAgAAAA4AAAHcgAQAAQAAAD2DxAAAwAAAEYCEAAEAAAAOAAACnIAEAAHAAAAlgQQAAEAAAACQAAAAAAAAAAAAAAAAIA:AAAAADIAAA1yABAACAAAAJYEEAABAAAAAkAAAAAAgD8AAAAAAAAAAAAAAACWBBCAQQAAAAcAAAAyAAANcgAQAAcAAAAmCRCAQQAAAAEAAAACQAAAAACAPwAAAAAAAAAAAAAAAEYCEAAHAAAADwAAB4IAEAADAAAARgAQAAgAAABGABAACAAAAEsAAAWCABAABAAAADoAEAADAAAADwAAB4IAEAAFAAAAhgAQAAcAAACGABAABwAAAEsAAAWCABAABgAAADoAEAAFAAAAMQAAB4IAEAAEAAAAOgAQAAYAAAA6ABAABAAAAEQAAAWCABAAAwAAADoAEAADAAAAOAAAB3IAEAAIAAAA9g8QAAMAAABGAhAACAAAAEQAAAWCABAAAwAAADoAEAAFAAAAOAAAB3IAEAAHAAAA9g8QAAMAAABGAhAABwAAADcAAAlyABAABwAAAPYPEAAEAAAARgIQAAgAAABGAhAABwAAABAAAAeCABAAAwAAAEYCEAAHAAAARgIQAAcAAABEAAAFggAQAAMAAAA6ABAAAwAAADgAAAdyABAACAAAAPYPEAADAAAARgIQAAcAAAA4AAAHcgAQAAkAAACWBBAAAQAAACYJEAAIAAAAMgAACnIAEAAIAAAAlgQQAAgAAAAmCRAAAQAAAEYCEIBBAAAACQAAABAAAAeCABAABAAAAEYCEAAIAAAARgIQAAgAAABEAAAFggAQAAQAAAA6ABAABAAAADgAAAdyABAACQAAAPYPEAAEAAAARgIQAAgAAAAyAAAJcgAQAAoAAABGAhAABwAAAPYPEAADAAAARgIQAAkAAAAyAAAKcgAQAAkAAABGAhAABwAAAPYPEAADAAAARgIQgEEAAAAJAAAAOAAAC3IAEAALAAAABoEgAAAAAAAAAAAAAkAAAAAAQDwON9Y7KVwPPgAAAAA2AAAFEgAQAAwAAAABQAAAAAAAADYAAAUiABAADAAAAAoAEAALAAAANgAABYIAEAAFAAAAGgAQAAsAAAAwAAABMQAACsIAEAAMAAAABgQQAAwAAAACQAAAAAAAAAAAAAAAAIA:17NdQAEAAAeCABAABgAAADoAEAAMAAAAKgAQAAwAAAADAAADOgAQAAYAAAAyAAAJcgAQAA0AAABGAhAAAQAAAFYFEAAMAAAARgIQAAUAAAA4AAAKwgAQAAwAAAD2DxAABQAAAAJAAAAAAAAAAAAAAAAAgEMAAAA:LwAABYIAEAAGAAAAKgAQAAwAAAA0AAAHggAQAAYAAAA6ABAABgAAAAFAAAAAAAAAMgAAD3IAEAANAAAARgIQAA0AAAACQAAAAAAAPwAAAD8AAAA:AAAAAAJAAAAAAAA:AAAAPwAAAD8AAAAASAAAC:IAEAANAAAARgIQAA0AAABGfhAABwAAAABgEAAHAAAAOgAQAAYAAAAAAAAIggAQAAYAAAAKABCAQQAAAAwAAAABQAAAAACAPzIAAAkSABAADAAAADoAEAAGAAAACgAQAA0AAAAKABAADAAAADQAAAeCABAABgAAADoAEAAMAAAAAUAAAAAAADwAAAAHIgAQAAwAAAA6ABAABgAAABoAEAAMAAAAOAAAB4IAEAAFAAAAGgAQAAwAAAABQAAAX88OPxYAAAEyAAAKcgAQAAcAAABGAhAABwAAAPYPEAADAAAARgIQgEEAAAABAAAAMgAADHIAEAAHAAAARgIQAAcAAAACQAAAAAAAPwAAAD8AAAA:AAAAAEYCEAABAAAAEAAAB4IAEAADAAAARgIQAAcAAABGAhAABwAAAEQAAAWCABAAAwAAADoAEAADAAAAOAAAB3IAEAAHAAAA9g8QAAMAAABGAhAABwAAADYAAAUiABAADAAAAAFAAAAAAAAANgAABUIAEAAMAAAACgAQAAsAAAA2AAAFggAQAAMAAAAaABAACwAAADAAAAExAAAKMgAQAA0AAACWBRAADAAAAAJAAAAAAIA:17NdQAAAAAAAAAAAAQAAB4IAEAAFAAAAGgAQAA0AAAAKABAADQAAAAMAAAM6ABAABQAAADIAAAlyABAADQAAAEYCEAAHAAAApgoQAAwAAABGAhAABQAAADgAAAoyABAADgAAAPYPEAADAAAAAkAAAAAAgEMAAAA:AAAAAAAAAAAvAAAFggAQAAUAAAAKABAADgAAADQAAAeCABAABQAAADoAEAAFAAAAAUAAAAAAAAAyAAAPcgAQAA0AAABGAhAADQAAAAJAAAAAAAA:AAAAPwAAAD8AAAAAAkAAAAAAAD8AAAA:AAAAPwAAAABIAAAL8gAQAA0AAABGAhAADQAAAEZ%EAAHAAAAAGAQAAcAAAA6ABAABQAAAAAAAAiCABAABQAAABoAEIBBAAAADAAAAAFAAAAAAIA:MgAACSIAEAAMAAAAOgAQAAUAAAAKABAADQAAABoAEAAMAAAANAAAB4IAEAAFAAAAGgAQAA4AAAABQAAAAAAAPAAAAAdCABAADAAAADoAEAAFAAAAKgAQAAwAAAA4AAAHggAQAAMAAAAqABAADAAAAAFAAABfzw4:FgAAAQAAAAeCABAAAwAAABoAEAAMAAAACgAQAAwAAAAyAAAKcgAQAAcAAABGAhAACAAAAPYPEAAEAAAARgIQgEEAAAABAAAAMgAADHIAEAAHAAAARgIQAAcAAAACQAAAAAAAPwAAAD8AAAA:AAAAAEYCEAABAAAAEAAAB4IAEAAEAAAARgIQAAcAAABGAhAABwAAAEQAAAWCABAABAAAADoAEAAEAAAAOAAAB3IAEAAHAAAA9g8QAAQAAABGAhAABwAAADYAAAUSABAACAAAAAFAAAAAAAAANgAABSIAEAAIAAAACgAQAAsAAAA2AAAFggAQAAQAAAAaABAACwAAADAAAAExAAAKwgAQAAgAAAAGBBAACAAAAAJAAAAAAAAAAAAAAAAAgD:Xs11AAQAAB4IAEAAFAAAAOgAQAAgAAAAqABAACAAAAAMAAAM6ABAABQAAADIAAAlyABAADAAAAEYCEAAHAAAAVgUQAAgAAABGAhAABQAAADgAAArCABAACAAAAPYPEAAEAAAAAkAAAAAAAAAAAAAAAACAQwAAAD8vAAAFggAQAAUAAAAqABAACAAAADQAAAeCABAABQAAADoAEAAFAAAAAUAAAAAAAAAyAAAPcgAQAAwAAABGAhAADAAAAAJAAAAAAAA:AAAAPwAAAD8AAAAAAkAAAAAAAD8AAAA:AAAAPwAAAABIAAAL8gAQAAwAAABGAhAADAAAAEZ%EAAHAAAAAGAQAAcAAAA6ABAABQAAAAAAAAiCABAABQAAAAoAEIBBAAAACAAAAAFAAAAAAIA:MgAACRIAEAAIAAAAOgAQAAUAAAAKABAADAAAAAoAEAAIAAAANAAAB4IAEAAFAAAAOgAQAAgAAAABQAAAAAAAPAAAAAciABAACAAAADoAEAAFAAAAGgAQAAgAAAA4AAAHggAQAAQAAAAaABAACAAAAAFAAABfzw4:FgAAAQAAAAeCABAAAwAAADoAEAADAAAACgAQAAgAAAAyAAAOcgAQAAcAAABGAhCAQQAAAAoAAAACQAAAAAAAPwAAAD8AAAA:AAAAAEYCEIBBAAAAAQAAADIAAAxyABAABwAAAEYCEAAHAAAAAkAAAAAAAD8AAAA:AAAAPwAAAABGAhAAAQAAABAAAAeCABAABAAAAEYCEAAHAAAARgIQAAcAAABEAAAFggAQAAQAAAA6ABAABAAAADgAAAdyABAABwAAAPYPEAAEAAAARgIQAAcAAAA2AAAFEgAQAAgAAAABQAAAAAAAADYAAAUiABAACAAAAAoAEAALAAAANgAABYIAEAAEAAAAGgAQAAsAAAAwAAABMQAACsIAEAAIAAAABgQQAAgAAAACQAAAAAAAAAAAAAAAAIA:17NdQAEAAAeCABAABQAAADoAEAAIAAAAKgAQAAgAAAADAAADOgAQAAUAAAAyAAAJcgAQAAoAAABGAhAABwAAAFYFEAAIAAAARgIQAAUAAAA4AAAKwgAQAAgAAAD2DxAABAAAAAJAAAAAAAAAAAAAAAAAgEMAAAA:LwAABYIAEAAFAAAAKgAQAAgAAAA0AAAHggAQAAUAAAA6ABAABQAAAAFAAAAAAAAAMgAAD3IAEAAKAAAARgIQAAoAAAACQAAAAAAAPwAAAD8AAAA:AAAAAAJAAAAAAAA:AAAAPwAAAD8AAAAASAAAC:IAEAAKAAAARgIQAAoAAABGfhAABwAAAABgEAAHAAAAOgAQAAUAAAAAAAAIggAQAAUAAAAKABCAQQAAAAgAAAABQAAAAACAPzIAAAkSABAACAAAADoAEAAFAAAACgAQAAoAAAAKABAACAAAADQAAAeCABAABQAAADoAEAAIAAAAAUAAAAAAADwAAAAHIgAQAAgAAAA6ABAABQAAABoAEAAIAAAAOAAAB4IAEAAEAAAAGgAQAAgAAAABQAAAX88OPxYAAAEAAAAHggAQAAMAAAA6ABAAAwAAAAoAEAAIAAAAMgAADnIAEAAHAAAARgIQgEEAAAAJAAAAAkAAAAAAAD8AAAA:AAAAPwAAAABGAhCAQQAAAAEAAAAyAAAMcgAQAAcAAABGAhAABwAAAAJAAAAAAAA:AAAAPwAAAD8AAAAARgIQAAEAAAAQAAAHggAQAAQAAABGAhAABwAAAEYCEAAHAAAARAAABYIAEAAEAAAAOgAQAAQAAAA4AAAHcgAQAAcAAAD2DxAABAAAAEYCEAAHAAAANgAABRIAEAAIAAAAAUAAAAAAAAA2AAAFIgAQAAgAAAAKABAACwAAADYAAAWCABAABAAAABoAEAALAAAAMAAAATEAAArCABAACAAAAAYEEAAIAAAAAkAAAAAAAAAAAAAAAACAP9ezXUABAAAHggAQAAUAAAA6ABAACAAAACoAEAAIAAAAAwAAAzoAEAAFAAAAMgAACXIAEAAJAAAARgIQAAcAAABWBRAACAAAAEYCEAAFAAAAOAAACsIAEAAIAAAA9g8QAAQAAAACQAAAAAAAAAAAAAAAAIBDAAAAPy8AAAWCABAABQAAACoAEAAIAAAANAAAB4IAEAAFAAAAOgAQAAUAAAABQAAAAAAAADIAAA9yABAACQAAAEYCEAAJAAAAAkAAAAAAAD8AAAA:AAAAPwAAAAACQAAAAAAAPwAAAD8AAAA:AAAAAEgAAAvyABAACQAAAEYCEAAJAAAARn4QAAcAAAAAYBAABwAAADoAEAAFAAAAAAAACIIAEAAFAAAACgAQgEEAAAAIAAAAAUAAAAAAgD8yAAAJEgAQAAgAAAA6ABAABQAAAAoAEAAJAAAACgAQAAgAAAA0AAAHggAQAAUAAAA6ABAACAAAAAFAAAAAAAA8AAAAByIAEAAIAAAAOgAQAAUAAAAaABAACAAAADgAAAeCABAABAAAABoAEAAIAAAAAUAAAF:PDj8WAAABAAAAB4IAEAADAAAAOgAQAAMAAAAKABAACAAAADIAAAqCABAAAwAAADoAEIBBAAAAAwAAAAFAAADJdj4%AUAAAAAAgD84AAAHcgAQAAQAAAD2DxAAAwAAAEYCEAAEAAAASAAAC:IAEAAHAAAARhAQAAAAAABGfhAACAAAAABgEAAIAAAAAUAAAAAAAAA4AAAH4gAQAAcAAAAGCRAABAAAAAYAEAAHAAAAGAAAB4IAEAAAAAAAOgAQAAAAAAABQAAAAACAPzIAAAlyABAAAgAAAEYCEAAEAAAABgAQAAcAAABGAhAAAgAAADcAAAlyABAAAgAAAPYPEAAAAAAARgIQAAIAAACWBxAABwAAADcAAAxyABAAAwAAAPYPEAAAAAAAAkAAAAAAAAAAAAAAAAAAAAAAAABGAhAAAwAAAAAAAAlyABAABAAAAEYCEIBBAAAABQAAAJaHIAAAAAAAEAAAABAAAAeCABAAAAAAAEYCEAAEAAAARgIQAAQAAABEAAAFggAQAAAAAAA6ABAAAAAAADgAAAdyABAABAAAAPYPEAAAAAAARgIQAAQAAAAQAAAHggAQAAAAAABGAhAAAQAAAEYCEAAEAAAASwAABRIAEAAAAAAACgAQAAAAAAAyAAAJggAQAAMAAAA6ABAAAQAAAAFAAAAwbpm8AUAAACcWmD0yAAAJggAQAAMAAAA6ABAAAwAAADoAEAABAAAAAUAAAIQ0Wb4yAAAJggAQAAMAAAA6ABAAAwAAADoAEAABAAAAAUAAAKQNyT84AAAHQgAQAAAAAAAKABAAAAAAADoAEAADAAAAMgAADzIAEAAAAAAAlgUQAAAAAAACQAAAAAB8P51tID8AAAAAAAAAAAJAAAAAAAA8AAAAPAAAAAAAAAAASAAAC:IAEAAHAAAARgAQAAAAAABGfhAAAAAAAABgEAAAAAAAAUAAAAAAAAAyAAAKcgAQAAYAAABGAhCAQQAAAAEAAAD2DxAAAQAAAEYCEAAGAAAAEAAAB0IAEAAAAAAARgIQAAYAAABGAhAABgAAAEQAAAVCABAAAAAAACoAEAAAAAAAOAAAB3IAEAAGAAAApgoQAAAAAABGAhAABgAAADgAAAdyABAACAAAACYJEAABAAAAlgQQAAYAAAAyAAAKcgAQAAgAAACWBBAAAQAAACYJEAAGAAAARgIQgEEAAAAIAAAAMgAACXIAEAAJAAAARgIQAAEAAAD2DxAABwAAAEYCEAAGAAAAOAAAB3IAEAAKAAAApgoQAAcAAABGAhAACAAAADgAAAfSABAABwAAAAYJEAABAAAABgAQAAcAAAAyAAAJcgAQAAcAAABGAhAABgAAAFYFEAAHAAAAhgMQAAcAAAAAAAAJcgAQAAwAAABGAhCAQQAAAAUAAABGgiAAAAAAAAEAAAAQAAAHEgAQAA0AAABGAhAADAAAAEYCEAAJAAAAEAAAByIAEAANAAAARgIQAAwAAABGAhAACgAAABAAAAdCABAADQAAAEYCEAAMAAAARgIQAAcAAAAAAAAJcgAQAA4AAABGAhCAQQAAAAUAAABGgiAAAAAAAAIAAAAQAAAHEgAQAA8AAABGAhAADgAAAEYCEAAJAAAAEAAAByIAEAAPAAAARgIQAA4AAABGAhAACgAAABAAAAdCABAADwAAAEYCEAAOAAAARgIQAAcAAAAAAAAJcgAQABAAAABGAhCAQQAAAAUAAABGgiAAAAAAAAMAAAAQAAAHEgAQABEAAABGAhAAEAAAAEYCEAAJAAAAEAAAByIAEAARAAAARgIQABAAAABGAhAACgAAABAAAAdCABAAEQAAAEYCEAAQAAAARgIQAAcAAAAAAAAJcgAQABIAAABGAhCAQQAAAAUAAABGgiAAAAAAAAQAAAAQAAAHEgAQAAkAAABGAhAAEgAAAEYCEAAJAAAAEAAAByIAEAAJAAAARgIQABIAAABGAhAACgAAABAAAAdCABAACQAAAEYCEAASAAAARgIQAAcAAAAxAAAHQgAQAAAAAAABQAAAAAAAACoAEAANAAAAAQAAB4IAEAABAAAAKgAQAAAAAAABQAAAAQAAADEAAAeCABAAAwAAAAFAAAAAAAAAKgAQAA8AAAA3AAAJQgAQAAAAAAAqABAAAAAAAAFAAAADAAAAAUAAAAIAAAA3AAAJQgAQAAAAAAA6ABAAAwAAACoAEAAAAAAAOgAQAAEAAAAxAAAHggAQAAEAAAABQAAAAAAAACoAEAARAAAAHgAAB4IAEAADAAAAKgAQAAAAAAABQAAABAAAADcAAAlCABAAAAAAADoAEAABAAAAOgAQAAMAAAAqABAAAAAAADEAAAeCABAAAQAAAAFAAAAAAAAAKgAQAAkAAAAeAAAHggAQAAMAAAAqABAAAAAAAAFAAAAIAAAANwAACUIAEAAAAAAAOgAQAAEAAAA6ABAAAwAAACoAEAAAAAAAHwAAAyoAEAAAAAAANgAABXIAEAAHAAAARgIQAAkAAAA2AAAI8gAQAAoAAAACQAAAAAAAAAAAAAAAAAAAAAAAABIAAAEgAAAHggAQAAEAAAAqABAAAAAAAAFAAAABAAAAHwAEAzoAEAABAAAAOAAAB3IAEAATAAAApgoQAA0AAABGAhAADwAAADIAAApyABAADwAAAEYCEAANAAAApgoQgEEAAAAPAAAARgIQABMAAAA4AAAHcgAQABMAAACmChAADQAAAEYCEAAJAAAAMgAACnIAEAARAAAARgIQAA0AAACmChCAQQAAAAkAAABGAhAAEwAAADYAAAVyABAABwAAAEYCEAAJAAAANgAACPIAEAAKAAAAAkAAAAAAAAAAAAAAAAAAAAMAAAASAAABIAAAB4IAEAABAAAAKgAQAAAAAAABQAAAAgAAAB8ABAM6ABAAAQAAADgAAAdyABAAEwAAAEYCEAANAAAApgoQAA8AAAAyAAAKcgAQAA0AAABGAhAADwAAAKYKEIBBAAAADQAAAEYCEAATAAAAOAAAB3IAEAATAAAApgoQAA8AAABGAhAAEQAAADIAAApyABAAEQAAAEYCEAAPAAAApgoQgEEAAAARAAAARgIQABMAAAA2AAAFcgAQAAcAAABGAhAACQAAADYAAAjyABAACgAAAAJAAAAAAAAAAAAAAAAAAAADAAAAEgAAASAAAAeCABAAAQAAACoAEAAAAAAAAUAAAAMAAAAfAAQDOgAQAAEAAAA4AAAHcgAQABMAAACmChAADwAAAEYCEAARAAAAMgAACnIAEAARAAAARgIQAA8AAACmChCAQQAAABEAAABGAhAAEwAAADgAAAdyABAAEwAAAKYKEAANAAAARgIQAAkAAAAyAAAKcgAQAAcAAABGAhAADQAAAKYKEIBBAAAACQAAAEYCEAATAAAANgAACPIAEAAKAAAAAkAAAAAAAAAAAAAAAAAAAAQAAAASAAABIAAAB4IAEAABAAAAKgAQAAAAAAABQAAABAAAAB8ABAM6ABAAAQAAADgAAAdyABAAEwAAAKYKEAARAAAARgIQAAkAAAAyAAAKcgAQAA0AAABGAhAAEQAAAKYKEIBBAAAACQAAAEYCEAATAAAAOAAAB3IAEAATAAAARgIQAA8AAACmChAAEQAAADIAAApyABAADwAAAEYCEAARAAAApgoQgEEAAAAPAAAARgIQABMAAAA2AAAFcgAQAAcAAABGAhAACQAAADYAAAjyABAACgAAAAJAAAAAAAAAAAAAAAAAAAADAAAAEgAAASAAAAeCABAAAQAAACoAEAAAAAAAAUAAAAUAAAAfAAQDOgAQAAEAAAA2AAAFcgAQAAcAAABGAhAACQAAADYAAAjyABAACgAAAAJAAAAAAAAAAAAAAAAAAAAAAAAAEgAAASAAAAeCABAAAQAAACoAEAAAAAAAAUAAAAYAAAAfAAQDOgAQAAEAAAA4AAAHcgAQABMAAABGAhAADQAAAKYKEAAPAAAAMgAACnIAEAANAAAARgIQAA8AAACmChCAQQAAAA0AAABGAhAAEwAAADgAAAdyABAAEwAAAKYKEAARAAAARgIQAAkAAAAyAAAKcgAQAAcAAABGAhAAEQAAAKYKEIBBAAAACQAAAEYCEAATAAAANgAACPIAEAAKAAAAAkAAAAAAAAAAAAAAAAAAAAQAAAASAAABIAAAB4IAEAABAAAAKgAQAAAAAAABQAAABwAAAB8ABAM6ABAAAQAAADgAAAdyABAAEwAAAKYKEAANAAAARgIQAAkAAAAyAAAKcgAQAAoAAABGAhAADQAAAKYKEIBBAAAACQAAAEYCEAATAAAAOAAAB3IAEAATAAAApgoQABEAAABGAhAACQAAADIAAApyABAABwAAAEYCEAARAAAApgoQgEEAAAAJAAAARgIQABMAAAA2AAAFggAQAAoAAAABQAAABQAAABIAAAEgAAAHggAQAAEAAAAqABAAAAAAAAFAAAAIAAAAHwAEAzoAEAABAAAAOAAAB3IAEAATAAAApgoQAAkAAABGAhAADQAAADIAAApyABAADQAAAEYCEAAJAAAApgoQgEEAAAANAAAARgIQABMAAAA4AAAHcgAQABMAAACmChAACQAAAEYCEAARAAAAMgAACnIAEAAPAAAARgIQAAkAAACmChCAQQAAABEAAABGAhAAEwAAADYAAAVyABAAEQAAAEYCEAAJAAAANgAABXIAEAAHAAAARgIQAAkAAAA2AAAI8gAQAAoAAAACQAAAAAAAAAAAAAAAAAAAAwAAABIAAAEgAAAHggAQAAEAAAAqABAAAAAAAAFAAAAJAAAAHwAEAzoAEAABAAAAOAAAB3IAEAATAAAApgoQAA0AAABGAhAADwAAADIAAApyABAADwAAAEYCEAANAAAApgoQgEEAAAAPAAAARgIQABMAAAA4AAAHcgAQABMAAACmChAACQAAAEYCEAARAAAAMgAACnIAEAARAAAARgIQAAkAAACmChCAQQAAABEAAABGAhAAEwAAADYAAAVyABAABwAAAEYCEAAJAAAANgAACPIAEAAKAAAAAkAAAAAAAAAAAAAAAAAAAAQAAAASAAABIAAAB4IAEAABAAAAKgAQAAAAAAABQAAACgAAAB8ABAM6ABAAAQAAADYAAAVyABAABwAAAEYCEAAJAAAANgAACPIAEAAKAAAAAkAAAAAAAAAAAAAAAAAAAAAAAAASAAABOAAAB3IAEAATAAAApgoQAAkAAABGAhAAEQAAADIAAApyABAAEwAAAEYCEAAJAAAApgoQgEEAAAARAAAARgIQABMAAAA4AAAHcgAQABQAAACmChAADwAAAEYCEAARAAAAMgAACnIAEAAUAAAARgIQAA8AAACmChCAQQAAABEAAABGAhAAFAAAADgAAAdyABAAFQAAAEYCEAAPAAAApgoQABEAAAAyAAAKcgAQABUAAABGAhAAEQAAAKYKEIBBAAAADwAAAEYCEAAVAAAAOAAAB3IAEAAWAAAApgoQAAkAAABGAhAADQAAADIAAApyABAAFgAAAEYCEAAJAAAApgoQgEEAAAANAAAARgIQABYAAAA4AAAHcgAQABcAAACmChAADQAAAEYCEAAPAAAAMgAACnIAEAAXAAAARgIQAA0AAACmChCAQQAAAA8AAABGAhAAFwAAACAAAAryABAAGAAAAKYKEAAAAAAAAkAAAAsAAAAMAAAADQAAAA4AAAA4AAAHcgAQABkAAABGAhAADQAAAKYKEAAPAAAAMgAACnIAEAAZAAAARgIQAA8AAACmChCAQQAAAA0AAABGAhAAGQAAACAAAAdCABAAAAAAACoAEAAAAAAAAUAAAA8AAAABAAAHggAQABoAAAAqABAAAAAAAAFAAAAEAAAANgAABYIAEAAWAAAAAUAAAAUAAAA2AAAIcgAQABoAAAACQAAAAAAAAAAAAAAAAAAAAAAAADcAAAnyABAAGgAAAPYPEAAYAAAARg4QABYAAABGDhAAGgAAADcAAAlyABAAGQAAAPYPEAAYAAAARgIQABkAAABGAhAADQAAADYAAAWCABAACQAAAAFAAAAFAAAANwAACfIAEAAaAAAApgoQABgAAABGDhAACQAAAEYOEAAaAAAANwAACXIAEAAZAAAApgoQABgAAABGAhAADQAAAEYCEAAZAAAANwAACXIAEAAXAAAApgoQABgAAABGAhAAFwAAAEYCEAAPAAAANwAACXIAEAAbAAAApgoQABgAAABGAhAAFQAAAEYCEAARAAAANwAACXIAEAAcAAAApgoQABgAAABGAhAAEQAAAEYCEAAJAAAANwAADPIAEAAaAAAAVgUQABgAAAACQAAAAAAAAAAAAAAAAAAABAAAAEYOEAAaAAAANwAACXIAEAAWAAAAVgUQABgAAABGAhAAFgAAAEYCEAAZAAAANwAACXIAEAAVAAAAVgUQABgAAABGAhAAFQAAAEYCEAAXAAAANwAACXIAEAAXAAAAVgUQABgAAABGAhAAEQAAAEYCEAAbAAAANwAACeIAEAAYAAAAVgUQABgAAAAGCRAACQAAAAYJEAAcAAAANwAACXIAEAANAAAABgAQABgAAABGAhAADQAAAEYCEAAWAAAANwAACXIAEAAPAAAABgAQABgAAABGAhAADwAAAEYCEAAVAAAANwAACXIAEAARAAAABgAQABgAAABGAhAAFAAAAEYCEAAXAAAANwAACXIAEAAHAAAABgAQABgAAABGAhAAEwAAAJYHEAAYAAAANwAACfIAEAAKAAAABgAQABgAAABGDhAACQAAAEYOEAAaAAAAFQAAARUAAAEVAAABFQAAARUAAAEVAAABFQAAARUAAAEVAAABFQAAARUAAAEfAAQDOgAQAAoAAAAgAAAKcgAQAAkAAAD2DxAACgAAAAJAAAADAAAABAAAAAUAAAAAAAAANwAACXIAEAAHAAAABgAQAAkAAABGAhAADQAAAEYCEAAHAAAANwAACbIAEAAJAAAAVgUQAAkAAABGCBAADQAAAEYIEAAKAAAAEAAAB0IAEAAAAAAARgIQAA0AAABGAhAADQAAAEQAAAVCABAAAAAAACoAEAAAAAAAOAAAB3IAEAAKAAAApgoQAAAAAABGAhAADQAAABAAAAdCABAAAAAAAEYCEAAPAAAARgIQAA8AAABEAAAFQgAQAAAAAAAqABAAAAAAADgAAAdyABAADQAAAKYKEAAAAAAARgIQAA8AAAAQAAAHQgAQAAAAAABGAhAAEQAAAEYCEAARAAAARAAABUIAEAAAAAAAKgAQAAAAAAA4AAAHcgAQAA8AAACmChAAAAAAAEYCEAARAAAAEAAAB0IAEAAAAAAARgIQAAcAAABGAhAABwAAAEQAAAVCABAAAAAAACoAEAAAAAAAOAAAB3IAEAAHAAAApgoQAAAAAABGAhAABwAAABAAAAdCABAAAAAAAEYDEAAJAAAARgMQAAkAAABEAAAFQgAQAAAAAAAqABAAAAAAADgAAAeyABAACQAAAKYKEAAAAAAARgwQAAkAAAAQAAAHQgAQAAAAAABGAhAACgAAAEYCEAANAAAAAAAACIIAEAABAAAAKgAQgMEAAAAAAAAAAUAAAAAAgD9LAAAFggAQAAEAAAA6ABAAAQAAADIAAAqCABAAAwAAACoAEICBAAAAAAAAAAFAAAAwbpm8AUAAACcWmD0yAAAKggAQAAMAAAA6ABAAAwAAACoAEICBAAAAAAAAAAFAAACENFm%MgAACoIAEAADAAAAOgAQAAMAAAAqABCAgQAAAAAAAAABQAAApA3JPzgAAAeCABAABAAAADoAEAABAAAAOgAQAAMAAAAyAAAJggAQAAQAAAA6ABAABAAAAAFAAAAAAADAAUAAANsPSUAxAAAIQgAQAAAAAAAqABAAAAAAACoAEIBBAAAAAAAAAAEAAAdCABAAAAAAACoAEAAAAAAAOgAQAAQAAAAyAAAJQgAQAAAAAAA6ABAAAwAAADoAEAABAAAAKgAQAAAAAAAxAAAHggAQAAEAAAABQAAAbxKDOioAEAAAAAAATQAABoIAEAADAAAAANAAACoAEAAAAAAADgAAB0IAEAAAAAAAKgAQAAAAAAA6ABAAAwAAADcAAAlCABAAAAAAADoAEAABAAAAKgAQAAAAAAABQAAAAACAPzgAAAeCABAAAQAAABoAEAAKAAAACgAQAA0AAAAyAAAKggAQAAEAAAAKABAACgAAABoAEAANAAAAOgAQgEEAAAABAAAAEAAAB4IAEAADAAAARgIQAA0AAABGAhAADwAAAAAAAAiCABAABAAAADoAEIDBAAAAAwAAAAFAAAAAAIA:SwAABYIAEAAEAAAAOgAQAAQAAAAyAAAKggAQAAUAAAA6ABCAgQAAAAMAAAABQAAAMG6ZvAFAAAAnFpg9MgAACoIAEAAFAAAAOgAQAAUAAAA6ABCAgQAAAAMAAAABQAAAhDRZvjIAAAqCABAABQAAADoAEAAFAAAAOgAQgIEAAAADAAAAAUAAAKQNyT84AAAHggAQAAYAAAA6ABAABAAAADoAEAAFAAAAMgAACYIAEAAGAAAAOgAQAAYAAAABQAAAAAAAwAFAAADbD0lAMQAACIIAEAADAAAAOgAQAAMAAAA6ABCAQQAAAAMAAAABAAAHggAQAAMAAAA6ABAAAwAAADoAEAAGAAAAMgAACYIAEAADAAAAOgAQAAUAAAA6ABAABAAAADoAEAADAAAAMQAAB4IAEAAEAAAAAUAAAG8Sgzo6ABAAAwAAAE0AAAaCABAABQAAAADQAAA6ABAAAwAAAA4AAAeCABAAAwAAADoAEAADAAAAOgAQAAUAAAA3AAAJggAQAAMAAAA6ABAABAAAADoAEAADAAAAAUAAAAAAgD84AAAHggAQAAQAAAAaABAADQAAAAoAEAAPAAAAMgAACoIAEAAEAAAACgAQAA0AAAAaABAADwAAADoAEIBBAAAABAAAADgAAAeCABAAAwAAADoAEAADAAAAOgAQAAQAAAAyAAAJQgAQAAAAAAA6ABAAAQAAACoAEAAAAAAAOgAQAAMAAAAQAAAHggAQAAEAAABGAhAADwAAAEYCEAAHAAAAAAAACIIAEAADAAAAOgAQgMEAAAABAAAAAUAAAAAAgD9LAAAFggAQAAMAAAA6ABAAAwAAADIAAAqCABAABAAAADoAEICBAAAAAQAAAAFAAAAwbpm8AUAAACcWmD0yAAAKggAQAAQAAAA6ABAABAAAADoAEICBAAAAAQAAAAFAAACENFm%MgAACoIAEAAEAAAAOgAQAAQAAAA6ABCAgQAAAAEAAAABQAAApA3JPzgAAAeCABAABQAAADoAEAADAAAAOgAQAAQAAAAyAAAJggAQAAUAAAA6ABAABQAAAAFAAAAAAADAAUAAANsPSUAxAAAIggAQAAEAAAA6ABAAAQAAADoAEIBBAAAAAQAAAAEAAAeCABAAAQAAADoAEAABAAAAOgAQAAUAAAAyAAAJggAQAAEAAAA6ABAABAAAADoAEAADAAAAOgAQAAEAAAAxAAAHggAQAAMAAAABQAAAbxKDOjoAEAABAAAATQAABoIAEAAEAAAAANAAADoAEAABAAAADgAAB4IAEAABAAAAOgAQAAEAAAA6ABAABAAAADcAAAmCABAAAQAAADoAEAADAAAAOgAQAAEAAAABQAAAAACAPzgAAAeCABAAAwAAAAoAEAAHAAAAGgAQAA8AAAAyAAAKggAQAAMAAAAKABAADwAAABoAEAAHAAAAOgAQgEEAAAADAAAAMgAACUIAEAAAAAAAOgAQAAMAAAA6ABAAAQAAACoAEAAAAAAAIQAAB4IAEAABAAAAOgAQAAoAAAABQAAABAAAABAAAAeCABAAAwAAAEYCEAAHAAAARgMQAAkAAAAAAAAIggAQAAQAAAA6ABCAwQAAAAMAAAABQAAAAACAP0sAAAWCABAABAAAADoAEAAEAAAAMgAACoIAEAAFAAAAOgAQgIEAAAADAAAAAUAAADBumbwBQAAAJxaYPTIAAAqCABAABQAAADoAEAAFAAAAOgAQgIEAAAADAAAAAUAAAIQ0Wb4yAAAKggAQAAUAAAA6ABAABQAAADoAEICBAAAAAwAAAAFAAACkDck:OAAAB4IAEAAGAAAAOgAQAAQAAAA6ABAABQAAADIAAAmCABAABgAAADoAEAAGAAAAAUAAAAAAAMABQAAA2w9JQDEAAAiCABAAAwAAADoAEAADAAAAOgAQgEEAAAADAAAAAQAAB4IAEAADAAAAOgAQAAMAAAA6ABAABgAAADIAAAmCABAAAwAAADoAEAAFAAAAOgAQAAQAAAA6ABAAAwAAADEAAAeCABAABAAAAAFAAABvEoM6OgAQAAMAAABNAAAGggAQAAUAAAAA0AAAOgAQAAMAAAAOAAAHggAQAAMAAAA6ABAAAwAAADoAEAAFAAAANwAACYIAEAADAAAAOgAQAAQAAAA6ABAAAwAAAAFAAAAAAIA:OAAAB4IAEAAEAAAAGgAQAAcAAAAKABAACQAAADIAAAqCABAABAAAAAoAEAAHAAAAGgAQAAkAAAA6ABCAQQAAAAQAAAAyAAAJggAQAAMAAAA6ABAABAAAADoAEAADAAAAKgAQAAAAAAA3AAAJQgAQAAAAAAA6ABAAAQAAADoAEAADAAAAKgAQAAAAAAAQAAAHggAQAAEAAABGAxAACQAAAEYCEAAKAAAAAAAACIIAEAADAAAAOgAQgMEAAAABAAAAAUAAAAAAgD9LAAAFggAQAAMAAAA6ABAAAwAAADIAAAqCABAABAAAADoAEICBAAAAAQAAAAFAAAAwbpm8AUAAACcWmD0yAAAKggAQAAQAAAA6ABAABAAAADoAEICBAAAAAQAAAAFAAACENFm%MgAACoIAEAAEAAAAOgAQAAQAAAA6ABCAgQAAAAEAAAABQAAApA3JPzgAAAeCABAABQAAADoAEAADAAAAOgAQAAQAAAAyAAAJggAQAAUAAAA6ABAABQAAAAFAAAAAAADAAUAAANsPSUAxAAAIggAQAAEAAAA6ABAAAQAAADoAEIBBAAAAAQAAAAEAAAeCABAAAQAAADoAEAABAAAAOgAQAAUAAAAyAAAJggAQAAEAAAA6ABAABAAAADoAEAADAAAAOgAQAAEAAAAxAAAHggAQAAMAAAABQAAAbxKDOjoAEAABAAAATQAABoIAEAAEAAAAANAAADoAEAABAAAADgAAB4IAEAABAAAAOgAQAAEAAAA6ABAABAAAADcAAAmCABAAAQAAADoAEAADAAAAOgAQAAEAAAABQAAAAACAPzgAAAeCABAAAwAAAAoAEAAKAAAAGgAQAAkAAAAyAAAKggAQAAMAAAAKABAACQAAABoAEAAKAAAAOgAQgEEAAAADAAAAMgAACYIAEAABAAAAOgAQAAMAAAA6ABAAAQAAACoAEAAAAAAANwAACUIAEAAAAAAAKgAQAAkAAAA6ABAAAQAAACoAEAAAAAAANAAACEIAEAAAAAAAKgAQgEEAAAAAAAAAAUAAAAAAAAASAAABNgAABUIAEAAAAAAAAUAAAAAAAAAVAAABSAAAC:IAEAAHAAAARgAQAAAAAABGfhAAAQAAAABgEAABAAAAAUAAAAAAAAA4AAAHEgAQAAAAAAAqABAAAAAAADoAEAAHAAAAEAAABxIAEAAHAAAARgIQAAwAAABGAhAABgAAABAAAAciABAABwAAAEYCEAAMAAAARgIQAAgAAAAQAAAHQgAQAAcAAABGAhAADAAAAEYCEAABAAAAEAAABxIAEAAJAAAARgIQAA4AAABGAhAABgAAABAAAAciABAACQAAAEYCEAAOAAAARgIQAAgAAAAQAAAHQgAQAAkAAABGAhAADgAAAEYCEAABAAAAEAAABxIAEAAKAAAARgIQABAAAABGAhAABgAAABAAAAciABAACgAAAEYCEAAQAAAARgIQAAgAAAAQAAAHQgAQAAoAAABGAhAAEAAAAEYCEAABAAAAEAAABxIAEAAGAAAARgIQABIAAABGAhAABgAAABAAAAciABAABgAAAEYCEAASAAAARgIQAAgAAAAQAAAHQgAQAAYAAABGAhAAEgAAAEYCEAABAAAAMQAAByIAEAAAAAAAAUAAAAAAAAAqABAABwAAAAEAAAdCABAAAAAAABoAEAAAAAAAAUAAAAEAAAAxAAAHEgAQAAEAAAABQAAAAAAAACoAEAAJAAAANwAACSIAEAAAAAAAGgAQAAAAAAABQAAAAwAAAAFAAAACAAAANwAACSIAEAAAAAAACgAQAAEAAAAaABAAAAAAACoAEAAAAAAAMQAAB0IAEAAAAAAAAUAAAAAAAAAqABAACgAAAB4AAAcSABAAAQAAABoAEAAAAAAAAUAAAAQAAAA3AAAJIgAQAAAAAAAqABAAAAAAAAoAEAABAAAAGgAQAAAAAAAxAAAHQgAQAAAAAAABQAAAAAAAACoAEAAGAAAAHgAABxIAEAABAAAAGgAQAAAAAAABQAAACAAAADcAAAkiABAAAAAAACoAEAAAAAAACgAQAAEAAAAaABAAAAAAAB8AAAMaABAAAAAAADYAAAVyABAAAQAAAEYCEAAGAAAANgAACPIAEAAIAAAAAkAAAAAAAAAAAAAAAAAAAAAAAAASAAABIAAAB0IAEAAAAAAAGgAQAAAAAAABQAAAAQAAAB8ABAMqABAAAAAAADgAAAdyABAADAAAAKYKEAAHAAAARgIQAAkAAAAyAAAKcgAQAAkAAABGAhAABwAAAKYKEIBBAAAACQAAAEYCEAAMAAAAOAAAB3IAEAAMAAAApgoQAAcAAABGAhAABgAAADIAAApyABAACgAAAEYCEAAHAAAApgoQgEEAAAAGAAAARgIQAAwAAAA2AAAFcgAQAAEAAABGAhAABgAAADYAAAjyABAACAAAAAJAAAAAAAAAAAAAAAAAAAADAAAAEgAAASAAAAdCABAAAAAAABoAEAAAAAAAAUAAAAIAAAAfAAQDKgAQAAAAAAA4AAAHcgAQAAwAAABGAhAABwAAAKYKEAAJAAAAMgAACnIAEAAHAAAARgIQAAkAAACmChCAQQAAAAcAAABGAhAADAAAADgAAAdyABAADAAAAKYKEAAJAAAARgIQAAoAAAAyAAAKcgAQAAoAAABGAhAACQAAAKYKEIBBAAAACgAAAEYCEAAMAAAANgAABXIAEAABAAAARgIQAAYAAAA2AAAI8gAQAAgAAAACQAAAAAAAAAAAAAAAAAAAAwAAABIAAAEgAAAHQgAQAAAAAAAaABAAAAAAAAFAAAADAAAAHwAEAyoAEAAAAAAAOAAAB3IAEAAMAAAApgoQAAkAAABGAhAACgAAADIAAApyABAACgAAAEYCEAAJAAAApgoQgEEAAAAKAAAARgIQAAwAAAA4AAAHcgAQAAwAAACmChAABwAAAEYCEAAGAAAAMgAACnIAEAABAAAARgIQAAcAAACmChCAQQAAAAYAAABGAhAADAAAADYAAAjyABAACAAAAAJAAAAAAAAAAAAAAAAAAAAEAAAAEgAAASAAAAdCABAAAAAAABoAEAAAAAAAAUAAAAQAAAAfAAQDKgAQAAAAAAA4AAAHcgAQAAwAAACmChAACgAAAEYCEAAGAAAAMgAACnIAEAAHAAAARgIQAAoAAACmChCAQQAAAAYAAABGAhAADAAAADgAAAdyABAADAAAAEYCEAAJAAAApgoQAAoAAAAyAAAKcgAQAAkAAABGAhAACgAAAKYKEIBBAAAACQAAAEYCEAAMAAAANgAABXIAEAABAAAARgIQAAYAAAA2AAAI8gAQAAgAAAACQAAAAAAAAAAAAAAAAAAAAwAAABIAAAEgAAAHQgAQAAAAAAAaABAAAAAAAAFAAAAFAAAAHwAEAyoAEAAAAAAANgAABXIAEAABAAAARgIQAAYAAAA2AAAI8gAQAAgAAAACQAAAAAAAAAAAAAAAAAAAAAAAABIAAAEgAAAHQgAQAAAAAAAaABAAAAAAAAFAAAAGAAAAHwAEAyoAEAAAAAAAOAAAB3IAEAAMAAAARgIQAAcAAACmChAACQAAADIAAApyABAABwAAAEYCEAAJAAAApgoQgEEAAAAHAAAARgIQAAwAAAA4AAAHcgAQAAwAAACmChAACgAAAEYCEAAGAAAAMgAACnIAEAABAAAARgIQAAoAAACmChCAQQAAAAYAAABGAhAADAAAADYAAAjyABAACAAAAAJAAAAAAAAAAAAAAAAAAAAEAAAAEgAAASAAAAdCABAAAAAAABoAEAAAAAAAAUAAAAcAAAAfAAQDKgAQAAAAAAA4AAAHcgAQAAwAAACmChAABwAAAEYCEAAGAAAAMgAACnIAEAAIAAAARgIQAAcAAACmChCAQQAAAAYAAABGAhAADAAAADgAAAdyABAADAAAAKYKEAAKAAAARgIQAAYAAAAyAAAKcgAQAAEAAABGAhAACgAAAKYKEIBBAAAABgAAAEYCEAAMAAAANgAABYIAEAAIAAAAAUAAAAUAAAASAAABIAAAB0IAEAAAAAAAGgAQAAAAAAABQAAACAAAAB8ABAMqABAAAAAAADgAAAdyABAADAAAAKYKEAAGAAAARgIQAAcAAAAyAAAKcgAQAAcAAABGAhAABgAAAKYKEIBBAAAABwAAAEYCEAAMAAAAOAAAB3IAEAAMAAAApgoQAAYAAABGAhAACgAAADIAAApyABAACQAAAEYCEAAGAAAApgoQgEEAAAAKAAAARgIQAAwAAAA2AAAFcgAQAAoAAABGAhAABgAAADYAAAVyABAAAQAAAEYCEAAGAAAANgAACPIAEAAIAAAAAkAAAAAAAAAAAAAAAAAAAAMAAAASAAABIAAAB0IAEAAAAAAAGgAQAAAAAAABQAAACQAAAB8ABAMqABAAAAAAADgAAAdyABAADAAAAKYKEAAHAAAARgIQAAkAAAAyAAAKcgAQAAkAAABGAhAABwAAAKYKEIBBAAAACQAAAEYCEAAMAAAAOAAAB3IAEAAMAAAApgoQAAYAAABGAhAACgAAADIAAApyABAACgAAAEYCEAAGAAAApgoQgEEAAAAKAAAARgIQAAwAAAA2AAAFcgAQAAEAAABGAhAABgAAADYAAAjyABAACAAAAAJAAAAAAAAAAAAAAAAAAAAEAAAAEgAAASAAAAdCABAAAAAAABoAEAAAAAAAAUAAAAoAAAAfAAQDKgAQAAAAAAA2AAAFcgAQAAEAAABGAhAABgAAADYAAAjyABAACAAAAAJAAAAAAAAAAAAAAAAAAAAAAAAAEgAAATgAAAdyABAADAAAAKYKEAAGAAAARgIQAAoAAAAyAAAKcgAQAAwAAABGAhAABgAAAKYKEIBBAAAACgAAAEYCEAAMAAAAOAAAB3IAEAANAAAApgoQAAkAAABGAhAACgAAADIAAApyABAADQAAAEYCEAAJAAAApgoQgEEAAAAKAAAARgIQAA0AAAA4AAAHcgAQAA4AAABGAhAACQAAAKYKEAAKAAAAMgAACnIAEAAOAAAARgIQAAoAAACmChCAQQAAAAkAAABGAhAADgAAADgAAAdyABAADwAAAKYKEAAGAAAARgIQAAcAAAAyAAAKcgAQAA8AAABGAhAABgAAAKYKEIBBAAAABwAAAEYCEAAPAAAAOAAAB3IAEAAQAAAApgoQAAcAAABGAhAACQAAADIAAApyABAAEAAAAEYCEAAHAAAApgoQgEEAAAAJAAAARgIQABAAAAAgAAAK8gAQABEAAABWBRAAAAAAAAJAAAALAAAADAAAAA0AAAAOAAAAOAAAB3IAEAASAAAARgIQAAcAAACmChAACQAAADIAAApyABAAEgAAAEYCEAAJAAAApgoQgEEAAAAHAAAARgIQABIAAAAgAAAHIgAQAAAAAAAaABAAAAAAAAFAAAAPAAAAAQAAB4IAEAATAAAAGgAQAAAAAAABQAAABAAAADYAAAWCABAADwAAAAFAAAAFAAAANgAACHIAEAATAAAAAkAAAAAAAAAAAAAAAAAAAAAAAAA3AAAJ8gAQABMAAAD2DxAAEQAAAEYOEAAPAAAARg4QABMAAAA3AAAJcgAQABIAAAD2DxAAEQAAAEYCEAASAAAARgIQAAcAAAA2AAAFggAQAAYAAAABQAAABQAAADcAAAnyABAAEwAAAKYKEAARAAAARg4QAAYAAABGDhAAEwAAADcAAAlyABAAEgAAAKYKEAARAAAARgIQAAcAAABGAhAAEgAAADcAAAlyABAAEAAAAKYKEAARAAAARgIQABAAAABGAhAACQAAADcAAAlyABAAFAAAAKYKEAARAAAARgIQAA4AAABGAhAACgAAADcAAAlyABAAFQAAAKYKEAARAAAARgIQAAoAAABGAhAABgAAADcAAAzyABAAEwAAAFYFEAARAAAAAkAAAAAAAAAAAAAAAAAAAAQAAABGDhAAEwAAADcAAAlyABAADwAAAFYFEAARAAAARgIQAA8AAABGAhAAEgAAADcAAAlyABAADgAAAFYFEAARAAAARgIQAA4AAABGAhAAEAAAADcAAAlyABAAEAAAAFYFEAARAAAARgIQAAoAAABGAhAAFAAAADcAAAniABAAEQAAAFYFEAARAAAABgkQAAYAAAAGCRAAFQAAADcAAAlyABAABwAAAAYAEAARAAAARgIQAAcAAABGAhAADwAAADcAAAlyABAACQAAAAYAEAARAAAARgIQAAkAAABGAhAADgAAADcAAAlyABAACgAAAAYAEAARAAAARgIQAA0AAABGAhAAEAAAADcAAAlyABAAAQAAAAYAEAARAAAARgIQAAwAAACWBxAAEQAAADcAAAnyABAACAAAAAYAEAARAAAARg4QAAYAAABGDhAAEwAAABUAAAEVAAABFQAAARUAAAEVAAABFQAAARUAAAEVAAABFQAAARUAAAEVAAABHwAEAzoAEAAIAAAAIAAACnIAEAAGAAAA9g8QAAgAAAACQAAAAwAAAAQAAAAFAAAAAAAAADcAAAlyABAAAQAAAAYAEAAGAAAARgIQAAcAAABGAhAAAQAAADcAAAmyABAABgAAAFYFEAAGAAAARggQAAcAAABGCBAACAAAABAAAAciABAAAAAAAEYCEAAHAAAARgIQAAcAAABEAAAFIgAQAAAAAAAaABAAAAAAADgAAAdyABAABwAAAFYFEAAAAAAARgIQAAcAAAAQAAAHIgAQAAAAAABGAhAACQAAAEYCEAAJAAAARAAABSIAEAAAAAAAGgAQAAAAAAA4AAAHcgAQAAgAAABWBRAAAAAAAEYCEAAJAAAAEAAAByIAEAAAAAAARgIQAAoAAABGAhAACgAAAEQAAAUiABAAAAAAABoAEAAAAAAAOAAAB3IAEAAJAAAAVgUQAAAAAABGAhAACgAAABAAAAciABAAAAAAAEYCEAABAAAARgIQAAEAAABEAAAFIgAQAAAAAAAaABAAAAAAADgAAAdyABAAAQAAAFYFEAAAAAAARgIQAAEAAAAQAAAHIgAQAAAAAABGAxAABgAAAEYDEAAGAAAARAAABSIAEAAAAAAAGgAQAAAAAAA4AAAHsgAQAAYAAABWBRAAAAAAAEYMEAAGAAAAEAAAByIAEAAAAAAARgIQAAcAAABGAhAACAAAAAAAAAhCABAAAAAAABoAEIDBAAAAAAAAAAFAAAAAAIA:SwAABUIAEAAAAAAAKgAQAAAAAAAyAAAKggAQAAEAAAAaABCAgQAAAAAAAAABQAAAMG6ZvAFAAAAnFpg9MgAACoIAEAABAAAAOgAQAAEAAAAaABCAgQAAAAAAAAABQAAAhDRZvjIAAAqCABAAAQAAADoAEAABAAAAGgAQgIEAAAAAAAAAAUAAAKQNyT84AAAHggAQAAMAAAAqABAAAAAAADoAEAABAAAAMgAACYIAEAADAAAAOgAQAAMAAAABQAAAAAAAwAFAAADbD0lAMQAACCIAEAAAAAAAGgAQAAAAAAAaABCAQQAAAAAAAAABAAAHIgAQAAAAAAAaABAAAAAAADoAEAADAAAAMgAACSIAEAAAAAAAOgAQAAEAAAAqABAAAAAAABoAEAAAAAAAMQAAB0IAEAAAAAAAAUAAAG8SgzoaABAAAAAAAE0AAAaCABAAAQAAAADQAAAaABAAAAAAAA4AAAciABAAAAAAABoAEAAAAAAAOgAQAAEAAAA3AAAJIgAQAAAAAAAqABAAAAAAABoAEAAAAAAAAUAAAAAAgD84AAAHQgAQAAAAAAAaABAABwAAAAoAEAAIAAAAMgAACkIAEAAAAAAACgAQAAcAAAAaABAACAAAACoAEIBBAAAAAAAAABAAAAeCABAAAQAAAEYCEAAIAAAARgIQAAkAAAAAAAAIggAQAAMAAAA6ABCAwQAAAAEAAAABQAAAAACAP0sAAAWCABAAAwAAADoAEAADAAAAMgAACoIAEAAEAAAAOgAQgIEAAAABAAAAAUAAADBumbwBQAAAJxaYPTIAAAqCABAABAAAADoAEAAEAAAAOgAQgIEAAAABAAAAAUAAAIQ0Wb4yAAAKggAQAAQAAAA6ABAABAAAADoAEICBAAAAAQAAAAFAAACkDck:OAAAB4IAEAAFAAAAOgAQAAMAAAA6ABAABAAAADIAAAmCABAABQAAADoAEAAFAAAAAUAAAAAAAMABQAAA2w9JQDEAAAiCABAAAQAAADoAEAABAAAAOgAQgEEAAAABAAAAAQAAB4IAEAABAAAAOgAQAAEAAAA6ABAABQAAADIAAAmCABAAAQAAADoAEAAEAAAAOgAQAAMAAAA6ABAAAQAAADEAAAeCABAAAwAAAAFAAABvEoM6OgAQAAEAAABNAAAGggAQAAQAAAAA0AAAOgAQAAEAAAAOAAAHggAQAAEAAAA6ABAAAQAAADoAEAAEAAAANwAACYIAEAABAAAAOgAQAAMAAAA6ABAAAQAAAAFAAAAAAIA:OAAAB4IAEAADAAAAGgAQAAgAAAAKABAACQAAADIAAAqCABAAAwAAAAoAEAAIAAAAGgAQAAkAAAA6ABCAQQAAAAMAAAA4AAAHggAQAAEAAAA6ABAAAQAAADoAEAADAAAAMgAACSIAEAAAAAAAKgAQAAAAAAAaABAAAAAAADoAEAABAAAAEAAAB0IAEAAAAAAARgIQAAkAAABGAhAAAQAAAAAAAAiCABAAAQAAACoAEIDBAAAAAAAAAAFAAAAAAIA:SwAABYIAEAABAAAAOgAQAAEAAAAyAAAKggAQAAMAAAAqABCAgQAAAAAAAAABQAAAMG6ZvAFAAAAnFpg9MgAACoIAEAADAAAAOgAQAAMAAAAqABCAgQAAAAAAAAABQAAAhDRZvjIAAAqCABAAAwAAADoAEAADAAAAKgAQgIEAAAAAAAAAAUAAAKQNyT84AAAHggAQAAQAAAA6ABAAAQAAADoAEAADAAAAMgAACYIAEAAEAAAAOgAQAAQAAAABQAAAAAAAwAFAAADbD0lAMQAACEIAEAAAAAAAKgAQAAAAAAAqABCAQQAAAAAAAAABAAAHQgAQAAAAAAAqABAAAAAAADoAEAAEAAAAMgAACUIAEAAAAAAAOgAQAAMAAAA6ABAAAQAAACoAEAAAAAAAMQAAB4IAEAABAAAAAUAAAG8SgzoqABAAAAAAAE0AAAaCABAAAwAAAADQAAAqABAAAAAAAA4AAAdCABAAAAAAACoAEAAAAAAAOgAQAAMAAAA3AAAJQgAQAAAAAAA6ABAAAQAAACoAEAAAAAAAAUAAAAAAgD84AAAHggAQAAEAAAAKABAAAQAAABoAEAAJAAAAMgAACoIAEAABAAAACgAQAAkAAAAaABAAAQAAADoAEIBBAAAAAQAAADIAAAkiABAAAAAAADoAEAABAAAAKgAQAAAAAAAaABAAAAAAACEAAAdCABAAAAAAADoAEAAIAAAAAUAAAAQAAAAQAAAHQgAQAAEAAABGAhAAAQAAAEYDEAAGAAAAAAAACIIAEAABAAAAKgAQgMEAAAABAAAAAUAAAAAAgD9LAAAFggAQAAEAAAA6ABAAAQAAADIAAAqCABAAAwAAACoAEICBAAAAAQAAAAFAAAAwbpm8AUAAACcWmD0yAAAKggAQAAMAAAA6ABAAAwAAACoAEICBAAAAAQAAAAFAAACENFm%MgAACoIAEAADAAAAOgAQAAMAAAAqABCAgQAAAAEAAAABQAAApA3JPzgAAAeCABAABAAAADoAEAABAAAAOgAQAAMAAAAyAAAJggAQAAQAAAA6ABAABAAAAAFAAAAAAADAAUAAANsPSUAxAAAIQgAQAAEAAAAqABAAAQAAACoAEIBBAAAAAQAAAAEAAAdCABAAAQAAACoAEAABAAAAOgAQAAQAAAAyAAAJQgAQAAEAAAA6ABAAAwAAADoAEAABAAAAKgAQAAEAAAAxAAAHggAQAAEAAAABQAAAbxKDOioAEAABAAAATQAABoIAEAADAAAAANAAACoAEAABAAAADgAAB0IAEAABAAAAKgAQAAEAAAA6ABAAAwAAADcAAAlCABAAAQAAADoAEAABAAAAKgAQAAEAAAABQAAAAACAPzgAAAciABAAAQAAABoAEAABAAAACgAQAAYAAAAyAAAKEgAQAAEAAAAKABAAAQAAABoAEAAGAAAAGgAQgEEAAAABAAAAMgAACRIAEAABAAAACgAQAAEAAAAqABAAAQAAABoAEAAAAAAANwAACSIAEAAAAAAAKgAQAAAAAAAKABAAAQAAABoAEAAAAAAAEAAAB0IAEAAAAAAARgMQAAYAAABGAhAABwAAAAAAAAgSABAAAQAAACoAEIDBAAAAAAAAAAFAAAAAAIA:SwAABRIAEAABAAAACgAQAAEAAAAyAAAKIgAQAAEAAAAqABCAgQAAAAAAAAABQAAAMG6ZvAFAAAAnFpg9MgAACiIAEAABAAAAGgAQAAEAAAAqABCAgQAAAAAAAAABQAAAhDRZvjIAAAoiABAAAQAAABoAEAABAAAAKgAQgIEAAAAAAAAAAUAAAKQNyT84AAAHQgAQAAEAAAAKABAAAQAAABoAEAABAAAAMgAACUIAEAABAAAAKgAQAAEAAAABQAAAAAAAwAFAAADbD0lAMQAACEIAEAAAAAAAKgAQAAAAAAAqABCAQQAAAAAAAAABAAAHQgAQAAAAAAAqABAAAAAAACoAEAABAAAAMgAACUIAEAAAAAAAGgAQAAEAAAAKABAAAQAAACoAEAAAAAAAMQAABxIAEAABAAAAAUAAAG8SgzoqABAAAAAAAE0AAAYiABAAAQAAAADQAAAqABAAAAAAAA4AAAdCABAAAAAAACoAEAAAAAAAGgAQAAEAAAA3AAAJQgAQAAAAAAAKABAAAQAAACoAEAAAAAAAAUAAAAAAgD84AAAHEgAQAAEAAAAKABAABwAAABoAEAAGAAAAMgAAChIAEAABAAAACgAQAAYAAAAaABAABwAAAAoAEIBBAAAAAQAAADIAAAlCABAAAAAAAAoAEAABAAAAKgAQAAAAAAAaABAAAAAAADcAAAkiABAAAAAAACoAEAAGAAAAKgAQAAAAAAAaABAAAAAAADQAAAgiABAAAAAAABoAEIBBAAAAAAAAAAFAAAAAAAAAEgAAATYAAAUiABAAAAAAAAFAAAAAAAAAFQAAATgAAAcSABAAAAAAAAoAEAAAAAAAAUAAAM3MTD0yAAAJcgAQAAAAAABGAhAAAwAAAFYFEAAAAAAABgAQAAAAAAAAAAAJcgAQAAEAAABGAhAABQAAAJaHIIBBAAAAAAAAABAAAAAQAAAHEgAQAAEAAABGAhAAAQAAAEYCEAABAAAADgAAChIAEAABAAAAAkAAAAAAgD8AAIA:AACAPwAAgD8KABAAAQAAADgAAAdyABAAAAAAAEYCEAAAAAAABgAQAAEAAAA4AAAIcgAQAAAAAABGAhAAAAAAAEaCIAAAAAAAEQAAAA8AAAcSABAAAQAAAPYPEAACAAAA9g8QAAIAAAAAAAAHggAQAAAAAAA6ABAAAAAAAAoAEAABAAAAAAAAB4IAEAAAAAAAOgAQAAAAAAABQAAAAACAvzgAAAdyABAAAAAAAPYPEAAAAAAARgIQAAAAAAA4AAAHggAQAAAAAAAqABAACwAAAAoAEAALAAAANgAABRIAEAABAAAAAUAAAAAAAAA2AAAFIgAQAAEAAAAKABAACwAAADYAAAVCABAAAQAAADoAEAAAAAAAMAAAATEAAAoyABAAAwAAAEYAEAABAAAAAkAAAAAAgD8AAKBAAAAAAAAAAAABAAAHggAQAAEAAAAaABAAAwAAAAoAEAADAAAAAwAAAzoAEAABAAAAMgAACXIAEAADAAAARgIQAAQAAABWBRAAAQAAAEYCEAAFAAAAOAAACjIAEAAGAAAApgoQAAEAAAACQAAAAACAQwAAAD8AAAAAAAAAAC8AAAWCABAAAQAAAAoAEAAGAAAANAAAB4IAEAABAAAAOgAQAAEAAAABQAAAAAAAADIAAA9yABAAAwAAAEYCEAADAAAAAkAAAAAAAD8AAAA:AAAAPwAAAAACQAAAAAAAPwAAAD8AAAA:AAAAAEgAAAvyABAAAwAAAEYCEAADAAAARn4QAAcAAAAAYBAABwAAADoAEAABAAAAAAAACIIAEAABAAAACgAQgEEAAAABAAAAAUAAAAAAgD8yAAAJEgAQAAEAAAA6ABAAAQAAAAoAEAADAAAACgAQAAEAAAA0AAAHggAQAAEAAAAaABAABgAAAAFAAAAAAAA8AAAAByIAEAABAAAAOgAQAAEAAAAaABAAAQAAADgAAAdCABAAAQAAACoAEAALAAAAGgAQAAEAAAAWAAABAAAACIIAEAAAAAAACgAQgEEAAAABAAAAAUAAAAAAgD8yAAAJciAQAAAAAABGAhAAAAAAAPYPEAAAAAAARgIQAAIAAAA2AAAFgiAQAAAAAAABQAAAAACAPz4AAAFTVEFUdAAAAGkDAAAdAAAAAAAAAAMAAAA%AgAAIAAAABgAAAAZAAAAHgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAABFAAAAQgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";
kha_Shaders.deferred_light_voxel_vertData0 = "s1435:AXBvcwAAASRHbG9iYWxzAAACaW52VlAAAAAAAEAAAAAEBGV5ZQBAAAAADAAAAAMBRFhCQ6vyu6KH0pZNNy%JPQseyEgBAAAABAQAAAUAAAA0AAAAIAEAAFQBAADEAQAAiAMAAFJERUbkAAAAAQAAAEgAAAABAAAAHAAAAAAE:v8AAQAAvAAAADwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAJEdsb2JhbHMAq6urPAAAAAIAAABgAAAAUAAAAAAAAAAAAAAAkAAAAAAAAABAAAAAAgAAAJgAAAAAAAAAqAAAAEAAAAAMAAAAAgAAAKwAAAAAAAAAaW52VlAAq6sDAAMABAAEAAAAAAAAAAAAZXllAAEAAwABAAMAAAAAAAAAAABNaWNyb3NvZnQgKFIpIEhMU0wgU2hhZGVyIENvbXBpbGVyIDEwLjEASVNHTiwAAAABAAAACAAAACAAAAAAAAAAAAAAAAMAAAAAAAAAAwMAAFRFWENPT1JEAKurq09TR05oAAAAAwAAAAgAAABQAAAAAAAAAAAAAAADAAAAAAAAAAMMAABQAAAAAQAAAAAAAAADAAAAAQAAAAcIAABZAAAAAAAAAAEAAAADAAAAAgAAAA8AAABURVhDT09SRABTVl9Qb3NpdGlvbgCrq6tTSERSvAEAAEAAAQBvAAAAWQAABEaOIAAAAAAABQAAAF8AAAMyEBAAAAAAAGUAAAMyIBAAAAAAAGUAAANyIBAAAQAAAGcAAATyIBAAAgAAAAEAAABoAAACAgAAADIAAA8yIBAAAAAAAEYQEAAAAAAAAkAAAAAAAD8AAAC:AAAAAAAAAAACQAAAAAAAPwAAAD8AAAAAAAAAADYAAAUyABAAAAAAAEYQEAAAAAAANgAACMIAEAAAAAAAAkAAAAAAAAAAAAAAAACAPwAAgD8RAAAIEgAQAAEAAABGDxAAAAAAAEaOIAAAAAAAAAAAABEAAAgiABAAAQAAAEYPEAAAAAAARo4gAAAAAAABAAAAEQAACEIAEAABAAAARg8QAAAAAABGjiAAAAAAAAIAAAARAAAIEgAQAAAAAABGDhAAAAAAAEaOIAAAAAAAAwAAAA4AAAdyABAAAAAAAEYCEAABAAAABgAQAAAAAAAAAAAJciAQAAEAAABGAhAAAAAAAEaCIIBBAAAAAAAAAAQAAAA2AAAFMiAQAAIAAABGEBAAAAAAADYAAAjCIBAAAgAAAAJAAAAAAAAAAAAAAAAAAD8AAIA:PgAAAVNUQVR0AAAADAAAAAIAAAAAAAAABAAAAAcAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";
kha_Shaders.dilate_pass_fragData0 = "s3018:AANfdGV4X3NhbXBsZXIAAHRleAAAJEdsb2JhbHMAAAFkaWxhdGVSYWRpdXMAAAAAAAQAAAABAURYQkPOdHCeavknkQTO3QLTBO29AQAAAKAIAAAFAAAANAAAAEwBAACAAQAAtAEAACQIAABSREVGEAEAAAEAAACYAAAAAwAAABwAAAAABP::AAEAAOgAAAB8AAAAAwAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAQAAAIkAAAACAAAABQAAAAQAAAD:::::AAAAAAEAAAANAAAAjQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAABfdGV4X3NhbXBsZXIAdGV4ACRHbG9iYWxzAKurjQAAAAEAAACwAAAAEAAAAAAAAAAAAAAAyAAAAAAAAAAEAAAAAgAAANgAAAAAAAAAZGlsYXRlUmFkaXVzAKurqwAAAwABAAEAAAAAAAAAAABNaWNyb3NvZnQgKFIpIEhMU0wgU2hhZGVyIENvbXBpbGVyIDEwLjEASVNHTiwAAAABAAAACAAAACAAAAAAAAAAAAAAAAMAAAAAAAAAAwMAAFRFWENPT1JEAKurq09TR04sAAAAAQAAAAgAAAAgAAAAAAAAAAAAAAADAAAAAAAAAA8AAABTVl9UYXJnZXQAq6tTSERSaAYAAEAAAACaAQAANRgAACIAAAAAAIC:AAAAAAAAAAAAAAAAAACAPwAAAAAAAAAAAAAAAAAAAAAAAIA:AAAAAAAAAAAAAAAAAACAvwAAAAAAAAAAAACAvwAAgD8AAAAAAAAAAAAAgD8AAIA:AAAAAAAAAAAAAIA:AACAvwAAAAAAAAAAAACAvwAAgL8AAAAAAAAAAFkAAARGjiAAAAAAAAEAAABaAAADAGAQAAAAAABYGAAEAHAQAAAAAABVVQAAYhAAAzIQEAAAAAAAZQAAA:IgEAAAAAAAaAAAAgYAAABIAAAL8gAQAAAAAABGEBAAAAAAAEZ%EAAAAAAAAGAQAAAAAAABQAAAAAAAABgAAApyABAAAQAAAEYCEAAAAAAAAkAAAAAAAAAAAAAAAAAAAAAAAAABAAAHggAQAAAAAAAaABAAAQAAAAoAEAABAAAAAQAAB4IAEAAAAAAAKgAQAAEAAAA6ABAAAAAAAB8ABAM6ABAAAAAAAD0QAAfyABAAAQAAAAFAAAAAAAAARn4QAAAAAAArAAAFggAQAAAAAAAKABAAAQAAAA4AAAqCABAAAAAAAAJAAAAAAIA:AACAPwAAgD8AAIA:OgAQAAAAAAA2AAAIcgAQAAAAAAACQAAAAAAAAAAAAAAAAAAAAAAAADYAAAgyABAAAQAAAAJAAACAlhhLAAAAAAAAAAAAAAAAMAAAASsAAAVCABAAAQAAABoAEAABAAAAHQAACEIAEAABAAAAKgAQAAEAAAAKgCAAAAAAAAAAAAADAAQDKgAQAAEAAAAeAAAHIgAQAAEAAAAaABAAAQAAAAFAAAABAAAAKwAABUIAEAABAAAAGgAQAAEAAAA2AAAFcgAQAAIAAABGAhAAAAAAADYAAAWCABAAAQAAAAoAEAABAAAANgAABYIAEAACAAAAAUAAAAAAAAAwAAABIQAABxIAEAADAAAAOgAQAAIAAAABQAAACAAAAAMABAMKABAAAwAAADgAAAgyABAAAwAAAPYPEAAAAAAARpCQADoAEAACAAAAOAAAB8IAEAADAAAApgoQAAEAAAAGBBAAAwAAADIAAAkyABAAAwAAAEYAEAADAAAApgoQAAEAAABGEBAAAAAAAEgAAAvyABAABAAAAEYAEAADAAAARn4QAAAAAAAAYBAAAAAAAAFAAAAAAAAAGAAAB4IAEAAEAAAACgAQAAQAAAABQAAAAAAAADkAAAoyABAABQAAAJYFEAAEAAAAAkAAAAAAAAAAAAAAAAAAAAAAAAA3AAAJggAQAAQAAAA6ABAABAAAAAoAEAAFAAAAAUAAAP::::88AAAHggAQAAQAAAAaABAABQAAADoAEAAEAAAAHwAEAzoAEAAEAAAAAAAACDIAEAAFAAAARgAQgEEAAAADAAAARhAQAAAAAAAPAAAHggAQAAQAAABGABAABQAAAEYAEAAFAAAASwAABYIAEAAEAAAAOgAQAAQAAAAxAAAHEgAQAAUAAAA6ABAABAAAADoAEAABAAAAHwAEAwoAEAAFAAAAMgAADDIAEAADAAAA5goQAAMAAAACQAAAAACAPgAAgD4AAAAAAAAAAEYAEAADAAAASAAAC:IAEAADAAAARgAQAAMAAABGfhAAAAAAAABgEAAAAAAAAUAAAAAAAAAYAAAHggAQAAMAAAAKABAAAwAAAAFAAAAAAAAAOQAACjIAEAAFAAAAlgUQAAMAAAACQAAAAAAAAAAAAAAAAAAAAAAAADcAAAmCABAAAwAAADoAEAADAAAACgAQAAUAAAABQAAA:::::zwAAAeCABAAAwAAABoAEAAFAAAAOgAQAAMAAAAAAAAIcgAQAAMAAABGAhCAQQAAAAMAAABGAhAABAAAADIAAAxyABAAAwAAAEYCEAADAAAAAkAAAAAAgEAAAIBAAACAQAAAAABGAhAABAAAADcAAAlyABAAAgAAAPYPEAADAAAARgIQAAMAAABGAhAABAAAADYAAAWCABAAAQAAADoAEAAEAAAAFQAAARUAAAEeAAAHggAQAAIAAAA6ABAAAgAAAAFAAAABAAAAFgAAATYAAAVyABAAAAAAAEYCEAACAAAANgAABRIAEAABAAAAOgAQAAEAAAAWAAABFQAAATYAAAVyIBAAAAAAAEYCEAAAAAAANgAABYIgEAAAAAAAAUAAAAAAgD8%AAABU1RBVHQAAAA5AAAABgAAAAgAAAACAAAAEQAAAAMAAAAEAAAAAQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAACgAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";
kha_Shaders.histogram_pass_fragData0 = "s1310:AAJfdGV4X3NhbXBsZXIAAHRleAAAAERYQkOV:Tv8c9q9uaO%kTYyHcecAQAAAMADAAAFAAAANAAAANQAAAAIAQAAPAEAAEQDAABSREVGmAAAAAAAAAAAAAAAAgAAABwAAAAABP::AAEAAG0AAABcAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAQAAAGkAAAACAAAABQAAAAQAAAD:::::AAAAAAEAAAANAAAAX3RleF9zYW1wbGVyAHRleABNaWNyb3NvZnQgKFIpIEhMU0wgU2hhZGVyIENvbXBpbGVyIDEwLjEAq6urSVNHTiwAAAABAAAACAAAACAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAFRFWENPT1JEAKurq09TR04sAAAAAQAAAAgAAAAgAAAAAAAAAAAAAAADAAAAAAAAAA8AAABTVl9UYXJnZXQAq6tTSERSAAIAAEAAAACAAAAAWgAAAwBgEAAAAAAAWBgABABwEAAAAAAAVVUAAGUAAAPyIBAAAAAAAGgAAAICAAAASAAADvIAEAAAAAAAAkAAAAAAAD8AAAA:AAAAAAAAAABGfhAAAAAAAABgEAAAAAAAAUAAAAAAAABIAAAO8gAQAAEAAAACQAAAzcxMPs3MTD4AAAAAAAAAAEZ%EAAAAAAAAGAQAAAAAAABQAAAAAAAAAAAAAdyABAAAAAAAEYCEAAAAAAARgIQAAEAAABIAAAO8gAQAAEAAAACQAAAzcxMP83MTD4AAAAAAAAAAEZ%EAAAAAAAAGAQAAAAAAABQAAAAAAAAAAAAAdyABAAAAAAAEYCEAAAAAAARgIQAAEAAABIAAAO8gAQAAEAAAACQAAAzcxMPs3MTD8AAAAAAAAAAEZ%EAAAAAAAAGAQAAAAAAABQAAAAAAAAAAAAAdyABAAAAAAAEYCEAAAAAAARgIQAAEAAABIAAAO8gAQAAEAAAACQAAAzcxMP83MTD8AAAAAAAAAAEZ%EAAAAAAAAGAQAAAAAAABQAAAAAAAAAAAAAdyABAAAAAAAEYCEAAAAAAARgIQAAEAAAA4AAAKciAQAAAAAABGAhAAAAAAAAJAAADNzEw%zcxMPs3MTD4AAAAANgAABYIgEAAAAAAAAUAAAArXIzw%AAABU1RBVHQAAAAMAAAAAgAAAAAAAAABAAAABQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";
kha_Shaders.layer_copy_bgra_fragData0 = "s867:AAJfdGV4X3NhbXBsZXIAAHRleAAAAERYQkOkLtu:aGzroGwGH1sNMHxhAQAAAHQCAAAFAAAANAAAANQAAAAgAQAAVAEAAPgBAABSREVGmAAAAAAAAAAAAAAAAgAAABwAAAAABP::AAEAAG0AAABcAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAQAAAGkAAAACAAAABQAAAAQAAAD:::::AAAAAAEAAAANAAAAX3RleF9zYW1wbGVyAHRleABNaWNyb3NvZnQgKFIpIEhMU0wgU2hhZGVyIENvbXBpbGVyIDEwLjEAq6urSVNHTkQAAAACAAAACAAAADgAAAAAAAAAAAAAAAMAAAAAAAAADw8AADgAAAABAAAAAAAAAAMAAAABAAAAAwMAAFRFWENPT1JEAKurq09TR04sAAAAAQAAAAgAAAAgAAAAAAAAAAAAAAADAAAAAAAAAA8AAABTVl9UYXJnZXQAq6tTSERSnAAAAEAAAAAnAAAAWgAAAwBgEAAAAAAAWBgABABwEAAAAAAAVVUAAGIQAAPyEBAAAAAAAGIQAAMyEBAAAQAAAGUAAAPyIBAAAAAAAGgAAAIBAAAASAAAC:IAEAAAAAAARhAQAAEAAABGfhAAAAAAAABgEAAAAAAAAUAAAAAAAAA4AAAH8iAQAAAAAABmDBAAAAAAAEYeEAAAAAAAPgAAAVNUQVR0AAAAAwAAAAEAAAAAAAAAAwAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";
kha_Shaders.layer_copy_fragData0 = "s867:AAJfdGV4X3NhbXBsZXIAAHRleAAAAERYQkPJ9LAvgoQ1%m5k26lnopt8AQAAAHQCAAAFAAAANAAAANQAAAAgAQAAVAEAAPgBAABSREVGmAAAAAAAAAAAAAAAAgAAABwAAAAABP::AAEAAG0AAABcAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAQAAAGkAAAACAAAABQAAAAQAAAD:::::AAAAAAEAAAANAAAAX3RleF9zYW1wbGVyAHRleABNaWNyb3NvZnQgKFIpIEhMU0wgU2hhZGVyIENvbXBpbGVyIDEwLjEAq6urSVNHTkQAAAACAAAACAAAADgAAAAAAAAAAAAAAAMAAAAAAAAADw8AADgAAAABAAAAAAAAAAMAAAABAAAAAwMAAFRFWENPT1JEAKurq09TR04sAAAAAQAAAAgAAAAgAAAAAAAAAAAAAAADAAAAAAAAAA8AAABTVl9UYXJnZXQAq6tTSERSnAAAAEAAAAAnAAAAWgAAAwBgEAAAAAAAWBgABABwEAAAAAAAVVUAAGIQAAPyEBAAAAAAAGIQAAMyEBAAAQAAAGUAAAPyIBAAAAAAAGgAAAIBAAAASAAAC:IAEAAAAAAARhAQAAEAAABGfhAAAAAAAABgEAAAAAAAAUAAAAAAAAA4AAAH8iAQAAAAAABGDhAAAAAAAEYeEAAAAAAAPgAAAVNUQVR0AAAAAwAAAAEAAAAAAAAAAwAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";
kha_Shaders.layer_invert_fragData0 = "s899:AAJfdGV4X3NhbXBsZXIAAHRleAAAAERYQkNm5tzuALJj4r76csTqqRgqAQAAAIwCAAAFAAAANAAAANQAAAAgAQAAVAEAABACAABSREVGmAAAAAAAAAAAAAAAAgAAABwAAAAABP::AAEAAG0AAABcAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAQAAAGkAAAACAAAABQAAAAQAAAD:::::AAAAAAEAAAANAAAAX3RleF9zYW1wbGVyAHRleABNaWNyb3NvZnQgKFIpIEhMU0wgU2hhZGVyIENvbXBpbGVyIDEwLjEAq6urSVNHTkQAAAACAAAACAAAADgAAAAAAAAAAAAAAAMAAAAAAAAADw8AADgAAAABAAAAAAAAAAMAAAABAAAAAwMAAFRFWENPT1JEAKurq09TR04sAAAAAQAAAAgAAAAgAAAAAAAAAAAAAAADAAAAAAAAAA8AAABTVl9UYXJnZXQAq6tTSERStAAAAEAAAAAtAAAAWgAAAwBgEAAAAAAAWBgABABwEAAAAAAAVVUAAGIQAAPyEBAAAAAAAGIQAAMyEBAAAQAAAGUAAAPyIBAAAAAAAGgAAAIBAAAASAAAC:IAEAAAAAAARhAQAAEAAABGfhAAAAAAAABgEAAAAAAAAUAAAAAAAAAyAAAN8iAQAAAAAABGDhCAQQAAAAAAAABGHhAAAAAAAAJAAAAAAIA:AACAPwAAgD8AAIA:PgAAAVNUQVR0AAAAAwAAAAEAAAAAAAAAAwAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";
kha_Shaders.layer_merge_fragData0 = "s13266:AAlfdGV4MF9zYW1wbGVyAABfdGV4YV9zYW1wbGVyAAFfdGV4bWFza19zYW1wbGVyAAJfdGV4MV9zYW1wbGVyAAN0ZXgwAAB0ZXhhAAF0ZXhtYXNrAAJ0ZXgxAAMkR2xvYmFscwAAAm9wYWMAAAAAAAQAAAABAWJsZW5kaW5nAAQAAAAEAAAAAQFEWEJD1jX5WrzpTxGVDgZx4oGlswEAAABUJgAABQAAADQAAAB4AgAArAIAAOACAADYJQAAUkRFRjwCAAABAAAAmAEAAAkAAAAcAAAAAAT::wABAAAUAgAAPAEAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAABKAQAAAwAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAQAAAFgBAAADAAAAAAAAAAAAAAAAAAAAAgAAAAEAAAABAAAAaQEAAAMAAAAAAAAAAAAAAAAAAAADAAAAAQAAAAEAAAB3AQAAAgAAAAUAAAAEAAAA:::::wAAAAABAAAADQAAAHwBAAACAAAABQAAAAQAAAD:::::AQAAAAEAAAANAAAAgQEAAAIAAAAFAAAABAAAAP::::8CAAAAAQAAAA0AAACJAQAAAgAAAAUAAAAEAAAA:::::wMAAAABAAAADQAAAI4BAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAX3RleDBfc2FtcGxlcgBfdGV4YV9zYW1wbGVyAF90ZXhtYXNrX3NhbXBsZXIAX3RleDFfc2FtcGxlcgB0ZXgwAHRleGEAdGV4bWFzawB0ZXgxACRHbG9iYWxzAKuOAQAAAgAAALABAAAQAAAAAAAAAAAAAADgAQAAAAAAAAQAAAACAAAA6AEAAAAAAAD4AQAABAAAAAQAAAACAAAABAIAAAAAAABvcGFjAKurqwAAAwABAAEAAAAAAAAAAABibGVuZGluZwCrq6sAAAIAAQABAAAAAAAAAAAATWljcm9zb2Z0IChSKSBITFNMIFNoYWRlciBDb21waWxlciAxMC4xAElTR04sAAAAAQAAAAgAAAAgAAAAAAAAAAAAAAADAAAAAAAAAAMDAABURVhDT09SRACrq6tPU0dOLAAAAAEAAAAIAAAAIAAAAAAAAAAAAAAAAwAAAAAAAAAPAAAAU1ZfVGFyZ2V0AKurU0hEUvAiAABAAAAAvAgAAFkAAARGjiAAAAAAAAEAAABaAAADAGAQAAAAAABaAAADAGAQAAEAAABaAAADAGAQAAIAAABaAAADAGAQAAMAAABYGAAEAHAQAAAAAABVVQAAWBgABABwEAABAAAAVVUAAFgYAAQAcBAAAgAAAFVVAABYGAAEAHAQAAMAAABVVQAAYhAAAzIQEAAAAAAAZQAAA:IgEAAAAAAAaAAAAgYAAABIAAAL8gAQAAAAAABGEBAAAAAAAJZ8EAAAAAAAAGAQAAAAAAABQAAAAAAAAEgAAAvyABAAAQAAAEYQEAAAAAAARn4QAAEAAAAAYBAAAQAAAAFAAAAAAAAAOAAACBIAEAACAAAAOgAQAAAAAAAKgCAAAAAAAAAAAABIAAAL8gAQAAMAAABGEBAAAAAAAEZ%EAACAAAAAGAQAAIAAAABQAAAAAAAADgAAAciABAAAgAAAAoAEAACAAAACgAQAAMAAAAgAAAIQgAQAAIAAAAagCAAAAAAAAAAAAABQAAA:::::x8ABAMqABAAAgAAAEgAAAvyABAABAAAAEYQEAAAAAAARn4QAAMAAAAAYBAAAwAAAAFAAAAAAAAAAAAACPIAEAAEAAAARg4QgEEAAAABAAAARg4QAAQAAAAyAAAJ8iAQAAAAAABWBRAAAgAAAEYOEAAEAAAARg4QAAEAAAASAAABHwAABBqAIAAAAAAAAAAAAAAAAAjiABAAAwAAAKYEEAAAAAAABgkQgEEAAAABAAAAMgAACXIgEAAAAAAAVgUQAAIAAACWBxAAAwAAAEYCEAABAAAANAAAB4IgEAAAAAAAOgAQAAAAAAA6ABAAAQAAABIAAAEgAAAIQgAQAAIAAAAagCAAAAAAAAAAAAABQAAAAQAAAB8ABAMqABAAAgAAADMAAAfiABAAAwAAAKYEEAAAAAAABgkQAAEAAAAAAAAI4gAQAAMAAAAGCRCAQQAAAAEAAABWDhAAAwAAADIAAAlyIBAAAAAAAFYFEAACAAAAlgcQAAMAAABGAhAAAQAAADQAAAeCIBAAAAAAADoAEAAAAAAAOgAQAAEAAAASAAABIAAACEIAEAACAAAAGoAgAAAAAAAAAAAAAUAAAAIAAAAfAAQDKgAQAAIAAAAyAAAK4gAQAAMAAAAGCRAAAQAAAKYEEAAAAAAABgkQgEEAAAABAAAAMgAACXIgEAAAAAAAVgUQAAIAAACWBxAAAwAAAEYCEAABAAAANAAAB4IgEAAAAAAAOgAQAAAAAAA6ABAAAQAAABIAAAEgAAAIQgAQAAIAAAAagCAAAAAAAAAAAAABQAAAAwAAAB8ABAMqABAAAgAAAAAAAAviABAAAwAAAAYJEIBBAAAAAQAAAAJAAAAAAAAAAACAPwAAgD8AAIA:DgAAB%IAEAADAAAAVg4QAAMAAACmBBAAAAAAAAAAAAniABAAAwAAAAYJEIBBAAAAAQAAAFYOEIBBAAAAAwAAAAAAAAriABAAAwAAAFYOEAADAAAAAkAAAAAAAAAAAIA:AACAPwAAgD8yAAAJciAQAAAAAABWBRAAAgAAAJYHEAADAAAARgIQAAEAAAA0AAAHgiAQAAAAAAA6ABAAAAAAADoAEAABAAAAEgAAASAAAAhCABAAAgAAABqAIAAAAAAAAAAAAAFAAAAEAAAAHwAEAyoAEAACAAAAOAAAB%IAEAADAAAApgQQAAAAAABWBRAAAgAAADQAAAdyIBAAAAAAAEYCEAABAAAAlgcQAAMAAAA0AAAHgiAQAAAAAAA6ABAAAAAAADoAEAABAAAAEgAAASAAAAhCABAAAgAAABqAIAAAAAAAAAAAAAFAAAAFAAAAHwAEAyoAEAACAAAAMgAACkIAEAACAAAACgAQgEEAAAACAAAACgAQAAMAAAABQAAAAACAPwAAAAviABAAAwAAAKYEEIBBAAAAAAAAAAJAAAAAAAAAAACAPwAAgD8AAIA:MgAACeIAEAADAAAAVg4QAAMAAABWBRAAAgAAAKYKEAACAAAAAAAAC3IAEAAEAAAARgIQgEEAAAABAAAAAkAAAAAAgD8AAIA:AACAPwAAAAAyAAANciAQAAAAAACWBxCAQQAAAAMAAABGAhAABAAAAAJAAAAAAIA:AACAPwAAgD8AAAAANAAAB4IgEAAAAAAAOgAQAAAAAAA6ABAAAQAAABIAAAEgAAAIQgAQAAIAAAAagCAAAAAAAAAAAAABQAAABgAAAB8ABAMqABAAAgAAAAAAAAviABAAAwAAAKYEEIBBAAAAAAAAAAJAAAAAAAAAAACAPwAAgD8AAIA:DgAAB%IAEAADAAAABgkQAAEAAABWDhAAAwAAAAAAAAjiABAAAwAAAAYJEIBBAAAAAQAAAFYOEAADAAAAMgAACXIgEAAAAAAAVgUQAAIAAACWBxAAAwAAAEYCEAABAAAANAAAB4IgEAAAAAAAOgAQAAAAAAA6ABAAAQAAABIAAAEgAAAIQgAQAAIAAAAagCAAAAAAAAAAAAABQAAABwAAAB8ABAMqABAAAgAAADIAAAlyIBAAAAAAAFYFEAACAAAAJgkQAAAAAABGAhAAAQAAADQAAAeCIBAAAAAAADoAEAAAAAAAOgAQAAEAAAASAAABIAAACEIAEAACAAAAGoAgAAAAAAAAAAAAAUAAAAgAAAAfAAQDKgAQAAIAAAAxAAAK4gAQAAMAAAAGCRAAAQAAAAJAAAAAAAAAAAAAPwAAAD8AAAA:DwAAB0IAEAACAAAApgoQAAAAAAAGABAAAQAAAAAAAAtyABAABAAAAEYCEIBBAAAAAQAAAAJAAAAAAIA:AACAPwAAgD8AAAAAAAAAB3IAEAAEAAAARgIQAAQAAABGAhAABAAAAAAAAAtyABAABQAAACYJEIBBAAAAAAAAAAJAAAAAAIA:AACAPwAAgD8AAAAAMgAADXIAEAAEAAAARgIQgEEAAAAEAAAARgIQAAUAAAACQAAAAACAPwAAgD8AAIA:AAAAADcAAAkSABAABQAAABoAEAADAAAAKgAQAAIAAAAKABAABAAAAA8AAAdCABAAAgAAAAYAEAAAAAAAVgUQAAEAAAA3AAAJIgAQAAUAAAAqABAAAwAAACoAEAACAAAAGgAQAAQAAAAPAAAHQgAQAAIAAABWBRAAAAAAAKYKEAABAAAANwAACUIAEAAFAAAAOgAQAAMAAAAqABAAAgAAACoAEAAEAAAAAAAACOIAEAADAAAABgkQgEEAAAABAAAABgkQAAUAAAAyAAAJciAQAAAAAABWBRAAAgAAAJYHEAADAAAARgIQAAEAAAA0AAAHgiAQAAAAAAA6ABAAAAAAADoAEAABAAAAEgAAASAAAAhCABAAAgAAABqAIAAAAAAAAAAAAAFAAAAJAAAAHwAEAyoAEAACAAAAMgAACkIAEAACAAAACgAQgEEAAAACAAAACgAQAAMAAAABQAAAAACAPwAAAAviABAAAwAAAAYJEIBBAAAAAQAAAAJAAAAAAAAAAACAPwAAgD8AAIA:OAAAB3IAEAAEAAAAJgkQAAAAAACWBxAAAwAAAAAAAAtyABAABQAAACYJEIBBAAAAAAAAAAJAAAAAAIA:AACAPwAAgD8AAAAAMgAADeIAEAADAAAABgkQgEEAAAAFAAAAVg4QAAMAAAACQAAAAAAAAAAAgD8AAIA:AACAPzgAAAfiABAAAwAAAAYJEAABAAAAVg4QAAMAAAAyAAAJ4gAQAAMAAAAGCRAABAAAAAYJEAABAAAAVg4QAAMAAAA4AAAH4gAQAAMAAABWBRAAAgAAAFYOEAADAAAAMgAACXIgEAAAAAAARgIQAAEAAACmChAAAgAAAJYHEAADAAAANAAAB4IgEAAAAAAAOgAQAAAAAAA6ABAAAQAAABIAAAEgAAAIQgAQAAIAAAAagCAAAAAAAAAAAAABQAAACgAAAB8ABAMqABAAAgAAAAAAAAriABAAAwAAAKYEEAAAAAAAAkAAAAAAAAAAAAC:AAAAvwAAAL84AAAH4gAQAAMAAABWBRAAAgAAAFYOEAADAAAAMgAADHIgEAAAAAAAlgcQAAMAAAACQAAAAAAAQAAAAEAAAABAAAAAAEYCEAABAAAANAAAB4IgEAAAAAAAOgAQAAAAAAA6ABAAAQAAABIAAAEgAAAIQgAQAAIAAAAagCAAAAAAAAAAAAABQAAACwAAAB8ABAMqABAAAgAAAAAAAAjiABAAAwAAAKYEEIBBAAAAAAAAAAYJEAABAAAAAAAACeIAEAADAAAABgkQgEEAAAABAAAAVg4QgIEAAAADAAAAMgAACXIgEAAAAAAAVgUQAAIAAACWBxAAAwAAAEYCEAABAAAANAAAB4IgEAAAAAAAOgAQAAAAAAA6ABAAAQAAABIAAAEgAAAIQgAQAAIAAAAagCAAAAAAAAAAAAABQAAADAAAAB8ABAMqABAAAgAAADIAAApyIBAAAAAAAFYFEAACAAAAJgkQgEEAAAAAAAAARgIQAAEAAAA0AAAHgiAQAAAAAAA6ABAAAAAAADoAEAABAAAAEgAAASAAAAhCABAAAgAAABqAIAAAAAAAAAAAAAFAAAANAAAAHwAEAyoAEAACAAAAMgAAChIAEAACAAAACgAQgEEAAAACAAAACgAQAAMAAAABQAAAAACAPzgAAAdyABAAAwAAAEYCEAABAAAAVgUQAAIAAAAOAAAHcgAQAAMAAABGAhAAAwAAACYJEAAAAAAAMgAACXIgEAAAAAAABgAQAAIAAABGAhAAAQAAAEYCEAADAAAANAAAB4IgEAAAAAAAOgAQAAAAAAA6ABAAAQAAABIAAAEgAAAIEgAQAAIAAAAagCAAAAAAAAAAAAABQAAADgAAAB8ABAMKABAAAgAAAB0AAAcSABAAAgAAAAoAEAAAAAAAGgAQAAAAAAABAAAHEgAQAAIAAAAKABAAAgAAAAFAAAAAAIA:NgAABTIAEAADAAAAFgUQAAAAAAA2AAAIwgAQAAMAAAACQAAAAAAAAAAAAAAAAIC:q6oqPwAAAAgyABAABAAAAEYAEAAAAAAARgAQgEEAAAADAAAANgAACMIAEAAEAAAAAkAAAAAAAAAAAAAAAACAPwAAgL8yAAAJ8gAQAAMAAAAGABAAAgAAAEYOEAAEAAAARg4QAAMAAAAdAAAHEgAQAAIAAAAqABAAAAAAAAoAEAADAAAAAQAABxIAEAACAAAACgAQAAIAAAABQAAAAACAPzYAAAVyABAABAAAAEYDEAADAAAANgAABYIAEAAEAAAAKgAQAAAAAAA2AAAFsgAQAAMAAAB2AxAABAAAAAAAAAjyABAAAwAAAEYOEIBBAAAABAAAAEYOEAADAAAAMgAACfIAEAADAAAABgAQAAIAAABGDhAAAwAAAEYOEAAEAAAAMwAABxIAEAACAAAAGgAQAAMAAAA6ABAAAwAAAAAAAAgSABAAAgAAAAoAEIBBAAAAAgAAAAoAEAADAAAAAAAACEIAEAACAAAAGgAQgEEAAAADAAAAOgAQAAMAAAAyAAAJEgAQAAIAAAAKABAAAgAAAAFAAAAAAMBAAUAAAP:m2y4OAAAHEgAQAAIAAAAqABAAAgAAAAoAEAACAAAAAAAABxIAEAACAAAACgAQAAIAAAAqABAAAwAAAB0AAAdCABAAAgAAABoAEAABAAAAKgAQAAEAAAABAAAHQgAQAAIAAAAqABAAAgAAAAFAAAAAAIA:AAAACDIAEAADAAAAZgoQgEEAAAABAAAAlgUQAAEAAAAyAAAJMgAQAAMAAACmChAAAgAAAEYAEAADAAAAZgoQAAEAAAAdAAAHQgAQAAIAAAAKABAAAQAAAAoAEAADAAAAAQAAB0IAEAACAAAAKgAQAAIAAAABQAAAAACAPzYAAAVCABAAAwAAAAoAEAABAAAAAAAACHIAEAAEAAAARgIQgEEAAAADAAAAZggQAAMAAAAyAAAJcgAQAAMAAACmChAAAgAAAEYCEAAEAAAARgIQAAMAAAAzAAAHQgAQAAIAAAAaABAAAwAAACoAEAADAAAAAAAACEIAEAACAAAAKgAQgEEAAAACAAAACgAQAAMAAAAAAAAHggAQAAIAAAAKABAAAwAAAAFAAAD:5tsuDgAAB0IAEAACAAAAKgAQAAIAAAA6ABAAAgAAAAAAAAviABAAAwAAAAYAEICBAAAAAgAAAAJAAAAAAAAAAACAP6uqKj%rqqo%GgAABeIAEAADAAAAVg4QAAMAAAAyAAAP4gAQAAMAAABWDhAAAwAAAAJAAAAAAAAAAADAQAAAwEAAAMBAAkAAAAAAAAAAAEDAAABAwAAAQMAAIAAL4gAQAAMAAABWDhCAgQAAAAMAAAACQAAAAAAAAAAAgL8AAIC:AACAvwAAAAriABAAAwAAAFYOEAADAAAAAkAAAAAAAAAAAIC:AACAvwAAgL8yAAAM0gAQAAIAAACmChAAAgAAAFYOEAADAAAAAkAAAAAAgD8AAAAAAACAPwAAgD8yAAAK0gAQAAIAAAAGDhAAAgAAAAYAEAADAAAABgkQgEEAAAABAAAAMgAACXIgEAAAAAAAVgUQAAIAAACGAxAAAgAAAEYCEAABAAAANAAAB4IgEAAAAAAAOgAQAAAAAAA6ABAAAQAAABIAAAEgAAAIEgAQAAIAAAAagCAAAAAAAAAAAAABQAAADwAAAB8ABAMKABAAAgAAAB0AAAcSABAAAgAAABoAEAABAAAAKgAQAAEAAAABAAAHEgAQAAIAAAAKABAAAgAAAAFAAAAAAIA:NgAABTIAEAADAAAAZgoQAAEAAAA2AAAIwgAQAAMAAAACQAAAAAAAAAAAAAAAAIC:q6oqPwAAAAgyABAABAAAAJYFEAABAAAARgAQgEEAAAADAAAANgAACMIAEAAEAAAAAkAAAAAAAAAAAAAAAACAPwAAgL8yAAAJ8gAQAAMAAAAGABAAAgAAAEYOEAAEAAAARg4QAAMAAAAdAAAHEgAQAAIAAAAKABAAAQAAAAoAEAADAAAAAQAABxIAEAACAAAACgAQAAIAAAABQAAAAACAPzYAAAVyABAABAAAAEYDEAADAAAANgAABYIAEAAEAAAACgAQAAEAAAA2AAAFsgAQAAMAAAB2AxAABAAAAAAAAAjyABAAAwAAAEYOEIBBAAAABAAAAEYOEAADAAAAMgAACfIAEAADAAAABgAQAAIAAABGDhAAAwAAAEYOEAAEAAAAMwAABxIAEAACAAAAGgAQAAMAAAA6ABAAAwAAAAAAAAgSABAAAgAAAAoAEIBBAAAAAgAAAAoAEAADAAAAAAAACEIAEAACAAAAGgAQgEEAAAADAAAAOgAQAAMAAAAyAAAJEgAQAAIAAAAKABAAAgAAAAFAAAAAAMBAAUAAAP:m2y4OAAAHEgAQAAIAAAAqABAAAgAAAAoAEAACAAAAAAAABxIAEAACAAAACgAQAAIAAAAqABAAAwAAAB0AAAdCABAAAgAAAAoAEAAAAAAAGgAQAAAAAAABAAAHQgAQAAIAAAAqABAAAgAAAAFAAAAAAIA:AAAACGIAEAADAAAAVgQQgEEAAAAAAAAABgEQAAAAAAAyAAAJMgAQAAAAAACmChAAAgAAAJYFEAADAAAAFgUQAAAAAAAdAAAHQgAQAAIAAAAqABAAAAAAAAoAEAAAAAAAAQAAB0IAEAACAAAAKgAQAAIAAAABQAAAAACAPwAAAAjiABAAAwAAAAYJEIBBAAAAAAAAAKYBEAAAAAAAMgAACeIAEAADAAAApgoQAAIAAABWDhAAAwAAAAYJEAAAAAAAMwAAB0IAEAACAAAAKgAQAAMAAAA6ABAAAwAAAAAAAAhCABAAAgAAACoAEIBBAAAAAgAAABoAEAADAAAAAAAAB4IAEAACAAAAGgAQAAMAAAABQAAA:%bbLg4AAAdCABAAAgAAACoAEAACAAAAOgAQAAIAAAAAAAAL4gAQAAMAAAAGABCAgQAAAAIAAAACQAAAAAAAAAAAgD%rqio:q6qqPhoAAAXiABAAAwAAAFYOEAADAAAAMgAAD%IAEAADAAAAVg4QAAMAAAACQAAAAAAAAAAAwEAAAMBAAADAQAJAAAAAAAAAAABAwAAAQMAAAEDAACAAC%IAEAADAAAAVg4QgIEAAAADAAAAAkAAAAAAAAAAAIC:AACAvwAAgL8AAAAK4gAQAAMAAABWDhAAAwAAAAJAAAAAAAAAAACAvwAAgL8AAIC:MgAADNIAEAACAAAApgoQAAIAAABWDhAAAwAAAAJAAAAAAIA:AAAAAAAAgD8AAIA:MgAACtIAEAACAAAABg4QAAIAAAAGABAAAwAAAAYJEIBBAAAAAQAAADIAAAlyIBAAAAAAAFYFEAACAAAAhgMQAAIAAABGAhAAAQAAADQAAAeCIBAAAAAAADoAEAAAAAAAOgAQAAEAAAASAAABIAAACBIAEAACAAAAGoAgAAAAAAAAAAAAAUAAABAAAAAfAAQDCgAQAAIAAAAdAAAHEgAQAAIAAAAKABAAAAAAABoAEAAAAAAAAQAABxIAEAACAAAACgAQAAIAAAABQAAAAACAPzYAAAUyABAAAwAAABYFEAAAAAAANgAACMIAEAADAAAAAkAAAAAAAAAAAAAAAACAv6uqKj8AAAAIMgAQAAQAAABGABAAAAAAAEYAEIBBAAAAAwAAADYAAAjCABAABAAAAAJAAAAAAAAAAAAAAAAAgD8AAIC:MgAACfIAEAADAAAABgAQAAIAAABGDhAABAAAAEYOEAADAAAAHQAABxIAEAACAAAAKgAQAAAAAAAKABAAAwAAAAEAAAcSABAAAgAAAAoAEAACAAAAAUAAAAAAgD82AAAFcgAQAAQAAABGAxAAAwAAADYAAAWCABAABAAAACoAEAAAAAAANgAABbIAEAADAAAAdgMQAAQAAAAAAAAI8gAQAAMAAABGDhCAQQAAAAQAAABGDhAAAwAAADIAAAnyABAAAwAAAAYAEAACAAAARg4QAAMAAABGDhAABAAAADMAAAcSABAAAgAAABoAEAADAAAAOgAQAAMAAAAAAAAIEgAQAAIAAAAKABCAQQAAAAIAAAAKABAAAwAAAAAAAAhCABAAAgAAABoAEIBBAAAAAwAAADoAEAADAAAAMgAACYIAEAACAAAACgAQAAIAAAABQAAAAADAQAFAAAD:5tsuDgAAB0IAEAACAAAAKgAQAAIAAAA6ABAAAgAAAAAAAAdCABAAAgAAACoAEAACAAAAKgAQAAMAAAAAAAAHggAQAAIAAAAKABAAAwAAAAFAAAD:5tsuDgAABxIAEAACAAAACgAQAAIAAAA6ABAAAgAAAB0AAAeCABAAAgAAABoAEAABAAAAKgAQAAEAAAABAAAHggAQAAIAAAA6ABAAAgAAAAFAAAAAAIA:AAAACBIAEAADAAAAKgAQgEEAAAABAAAAGgAQAAEAAAAyAAAJggAQAAIAAAA6ABAAAgAAAAoAEAADAAAAKgAQAAEAAAAdAAAHEgAQAAMAAAAKABAAAQAAADoAEAACAAAAAQAABxIAEAADAAAACgAQAAMAAAABQAAAAACAPwAAAAgiABAAAwAAAAoAEAABAAAAOgAQgEEAAAACAAAAMgAACYIAEAACAAAACgAQAAMAAAAaABAAAwAAADoAEAACAAAAAAAAC3IAEAADAAAApgoQgIEAAAACAAAAAkAAAAAAgD%rqio:q6qqPgAAAAAaAAAFcgAQAAMAAABGAhAAAwAAADIAAA9yABAAAwAAAEYCEAADAAAAAkAAAAAAwEAAAMBAAADAQAAAAAACQAAAAABAwAAAQMAAAEDAAAAAAAAgAAtyABAAAwAAAEYCEICBAAAAAwAAAAJAAAAAAIC:AACAvwAAgL8AAAAAAAAACnIAEAADAAAARgIQAAMAAAACQAAAAACAvwAAgL8AAIC:AAAAADIAAAxyABAAAwAAAAYAEAACAAAARgIQAAMAAAACQAAAAACAPwAAgD8AAIA:AAAAADIAAArSABAAAgAAAAYJEAADAAAA9g8QAAIAAAAGCRCAQQAAAAEAAAAyAAAJciAQAAAAAABWBRAAAgAAAIYDEAACAAAARgIQAAEAAAA0AAAHgiAQAAAAAAA6ABAAAAAAADoAEAABAAAAEgAAAR0AAAcSABAAAgAAABoAEAABAAAAKgAQAAEAAAABAAAHEgAQAAIAAAAKABAAAgAAAAFAAAAAAIA:NgAABTIAEAADAAAAZgoQAAEAAAA2AAAIwgAQAAMAAAACQAAAAAAAAAAAAAAAAIC:q6oqPwAAAAgyABAABAAAAJYFEAABAAAARgAQgEEAAAADAAAANgAACMIAEAAEAAAAAkAAAAAAAAAAAAAAAACAPwAAgL8yAAAJ8gAQAAMAAAAGABAAAgAAAEYOEAAEAAAARg4QAAMAAAAdAAAHEgAQAAIAAAAKABAAAQAAAAoAEAADAAAAAQAABxIAEAACAAAACgAQAAIAAAABQAAAAACAPzYAAAVyABAABAAAAEYDEAADAAAANgAABYIAEAAEAAAACgAQAAEAAAA2AAAFsgAQAAMAAAB2AxAABAAAAAAAAAjyABAAAwAAAEYOEIBBAAAABAAAAEYOEAADAAAAMgAACfIAEAADAAAABgAQAAIAAABGDhAAAwAAAEYOEAAEAAAAMwAABxIAEAACAAAAGgAQAAMAAAA6ABAAAwAAAAAAAAgSABAAAgAAAAoAEIBBAAAAAgAAAAoAEAADAAAAAAAACEIAEAACAAAAGgAQgEEAAAADAAAAOgAQAAMAAAAyAAAJggAQAAIAAAAKABAAAgAAAAFAAAAAAMBAAUAAAP:m2y4OAAAHQgAQAAIAAAAqABAAAgAAADoAEAACAAAAAAAAB0IAEAACAAAAKgAQAAIAAAAqABAAAwAAAAAAAAeCABAAAgAAAAoAEAADAAAAAUAAAP:m2y4OAAAHEgAQAAIAAAAKABAAAgAAADoAEAACAAAAHQAAB4IAEAACAAAACgAQAAAAAAAaABAAAAAAAAEAAAeCABAAAgAAADoAEAACAAAAAUAAAAAAgD8AAAAIEgAQAAAAAAAaABCAQQAAAAAAAAAKABAAAAAAADIAAAkSABAAAAAAADoAEAACAAAACgAQAAAAAAAaABAAAAAAAB0AAAciABAAAAAAACoAEAAAAAAACgAQAAAAAAABAAAHIgAQAAAAAAAaABAAAAAAAAFAAAAAAIA:AAAACEIAEAAAAAAACgAQgEEAAAAAAAAAKgAQAAAAAAAyAAAJEgAQAAAAAAAaABAAAAAAACoAEAAAAAAACgAQAAAAAAAAAAALcgAQAAMAAACmChCAgQAAAAIAAAACQAAAAACAP6uqKj%rqqo%AAAAABoAAAVyABAAAwAAAEYCEAADAAAAMgAAD3IAEAADAAAARgIQAAMAAAACQAAAAADAQAAAwEAAAMBAAAAAAAJAAAAAAEDAAABAwAAAQMAAAAAAACAAC3IAEAADAAAARgIQgIEAAAADAAAAAkAAAAAAgL8AAIC:AACAvwAAAAAAAAAKcgAQAAMAAABGAhAAAwAAAAJAAAAAAIC:AACAvwAAgL8AAAAAMgAADNIAEAACAAAABgAQAAIAAAAGCRAAAwAAAAJAAAAAAIA:AAAAAAAAgD8AAIA:MgAACnIAEAAAAAAAhgMQAAIAAAAGABAAAAAAAEYCEIBBAAAAAQAAADIAAAlyIBAAAAAAAFYFEAACAAAARgIQAAAAAABGAhAAAQAAADQAAAeCIBAAAAAAADoAEAAAAAAAOgAQAAEAAAAVAAABFQAAARUAAAEVAAABFQAAARUAAAEVAAABFQAAARUAAAEVAAABFQAAARUAAAEVAAABFQAAARUAAAEVAAABFQAAARUAAAE%AAABU1RBVHQAAAA4AQAABgAAAAAAAAACAAAAwAAAABEAAAAQAAAAFAAAABEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAGQAAAAMAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";
kha_Shaders.layer_merge_vertData0 = "s763:AXBvcwAAAABEWEJDtpmVVJ2wtBYIEKtdn7IyBgEAAAA0AgAABQAAADQAAACAAAAAtAAAAAwBAAC4AQAAUkRFRkQAAAAAAAAAAAAAAAAAAAAcAAAAAAT%:wABAAAcAAAATWljcm9zb2Z0IChSKSBITFNMIFNoYWRlciBDb21waWxlciAxMC4xAElTR04sAAAAAQAAAAgAAAAgAAAAAAAAAAAAAAADAAAAAAAAAAMDAABURVhDT09SRACrq6tPU0dOUAAAAAIAAAAIAAAAOAAAAAAAAAAAAAAAAwAAAAAAAAADDAAAQQAAAAAAAAABAAAAAwAAAAEAAAAPAAAAVEVYQ09PUkQAU1ZfUG9zaXRpb24Aq6urU0hEUqQAAABAAAEAKQAAAF8AAAMyEBAAAAAAAGUAAAMyIBAAAAAAAGcAAATyIBAAAQAAAAEAAAAyAAAPMiAQAAAAAABGEBAAAAAAAAJAAAAAAAA:AAAAvwAAAAAAAAAAAkAAAAAAAD8AAAA:AAAAAAAAAAA2AAAFMiAQAAEAAABGEBAAAAAAADYAAAjCIBAAAQAAAAJAAAAAAAAAAAAAAAAAAD8AAIA:PgAAAVNUQVR0AAAABAAAAAAAAAAAAAAAAwAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";
kha_Shaders.layer_view_fragData0 = "s1939:AANfdGV4X3NhbXBsZXIAAHRleAAAJEdsb2JhbHMAAAFjaGFubmVsAAAAAAAEAAAAAQFEWEJDcN99WNYjk%ArzEQnEavnqAEAAAB8BQAABQAAADQAAABEAQAAkAEAAMQBAAAABQAAUkRFRggBAAABAAAAmAAAAAMAAAAcAAAAAAT::wABAADgAAAAfAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAACJAAAAAgAAAAUAAAAEAAAA:::::wAAAAABAAAADQAAAI0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAX3RleF9zYW1wbGVyAHRleAAkR2xvYmFscwCrq40AAAABAAAAsAAAABAAAAAAAAAAAAAAAMgAAAAAAAAABAAAAAIAAADQAAAAAAAAAGNoYW5uZWwAAAACAAEAAQAAAAAAAAAAAE1pY3Jvc29mdCAoUikgSExTTCBTaGFkZXIgQ29tcGlsZXIgMTAuMQBJU0dORAAAAAIAAAAIAAAAOAAAAAAAAAAAAAAAAwAAAAAAAAAPDwAAOAAAAAEAAAAAAAAAAwAAAAEAAAADAwAAVEVYQ09PUkQAq6urT1NHTiwAAAABAAAACAAAACAAAAAAAAAAAAAAAAMAAAAAAAAADwAAAFNWX1RhcmdldACrq1NIRFI0AwAAQAAAAM0AAABZAAAERo4gAAAAAAABAAAAWgAAAwBgEAAAAAAAWBgABABwEAAAAAAAVVUAAGIQAAPyEBAAAAAAAGIQAAMyEBAAAQAAAGUAAAPyIBAAAAAAAGgAAAIBAAAAIAAACBIAEAAAAAAACoAgAAAAAAAAAAAAAUAAAAEAAAAfAAQDCgAQAAAAAABIAAAL8gAQAAAAAABGEBAAAQAAAEZ%EAAAAAAAAGAQAAAAAAABQAAAAAAAADgAAAfyIBAAAAAAAAYMEAAAAAAARh4QAAAAAAASAAABIAAACBIAEAAAAAAACoAgAAAAAAAAAAAAAUAAAAIAAAAfAAQDCgAQAAAAAABIAAAL8gAQAAAAAABGEBAAAQAAAEZ%EAAAAAAAAGAQAAAAAAABQAAAAAAAADgAAAfyIBAAAAAAAFYNEAAAAAAARh4QAAAAAAASAAABIAAACBIAEAAAAAAACoAgAAAAAAAAAAAAAUAAAAMAAAAfAAQDCgAQAAAAAABIAAAL8gAQAAAAAABGEBAAAQAAAEZ%EAAAAAAAAGAQAAAAAAABQAAAAAAAADgAAAfyIBAAAAAAAKYOEAAAAAAARh4QAAAAAAASAAABIAAACBIAEAAAAAAACoAgAAAAAAAAAAAAAUAAAAQAAAAfAAQDCgAQAAAAAABIAAAL8gAQAAAAAABGEBAAAQAAAEZ%EAAAAAAAAGAQAAAAAAABQAAAAAAAADgAAAfyIBAAAAAAAPYPEAAAAAAARh4QAAAAAAASAAABIAAACBIAEAAAAAAACoAgAAAAAAAAAAAAAUAAAAUAAAAfAAQDCgAQAAAAAABIAAAL8gAQAAAAAABGEBAAAQAAAEZ%EAAAAAAAAGAQAAAAAAABQAAAAAAAADgAAAfyIBAAAAAAAEYOEAAAAAAARh4QAAAAAAASAAABSAAAC:IAEAAAAAAARhAQAAEAAABGfhAAAAAAAABgEAAAAAAAAUAAAAAAAAA4AAAHcgAQAAAAAAD2DxAAAAAAAEYCEAAAAAAAOAAAB:IgEAAAAAAARg4QAAAAAABGHhAAAAAAABUAAAEVAAABFQAAARUAAAEVAAABPgAAAVNUQVR0AAAAIgAAAAEAAAAAAAAAAwAAAAcAAAAFAAAAAAAAAAYAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";
kha_Shaders.layer_view_vertData0 = "s1402:A2NvbAAAcG9zAAF0ZXgAAgEkR2xvYmFscwAAAXByb2plY3Rpb25NYXRyaXgAAAAAAEAAAAAEBERYQkMf0MJF8mGyMGQsWh58MisDAQAAAOQDAAAFAAAANAAAAAABAABkAQAA1AEAAGgDAABSREVGxAAAAAEAAABIAAAAAQAAABwAAAAABP7:AAEAAJwAAAA8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAACRHbG9iYWxzAKurqzwAAAABAAAAYAAAAEAAAAAAAAAAAAAAAHgAAAAAAAAAQAAAAAIAAACMAAAAAAAAAHByb2plY3Rpb25NYXRyaXgAq6urAwADAAQABAAAAAAAAAAAAE1pY3Jvc29mdCAoUikgSExTTCBTaGFkZXIgQ29tcGlsZXIgMTAuMQBJU0dOXAAAAAMAAAAIAAAAUAAAAAAAAAAAAAAAAwAAAAAAAAAPDwAAUAAAAAEAAAAAAAAAAwAAAAEAAAAHBwAAUAAAAAIAAAAAAAAAAwAAAAIAAAADAwAAVEVYQ09PUkQAq6urT1NHTmgAAAADAAAACAAAAFAAAAAAAAAAAAAAAAMAAAAAAAAADwAAAFAAAAABAAAAAAAAAAMAAAABAAAAAwwAAFkAAAAAAAAAAQAAAAMAAAACAAAADwAAAFRFWENPT1JEAFNWX1Bvc2l0aW9uAKurq1NIRFKMAQAAQAABAGMAAABZAAAERo4gAAAAAAAEAAAAXwAAA:IQEAAAAAAAXwAAA3IQEAABAAAAXwAAAzIQEAACAAAAZQAAA:IgEAAAAAAAZQAAAzIgEAABAAAAZwAABPIgEAACAAAAAQAAAGgAAAICAAAANgAABfIgEAAAAAAARh4QAAAAAAA2AAAFMiAQAAEAAABGEBAAAgAAADYAAAVyABAAAAAAAEYSEAABAAAANgAABYIAEAAAAAAAAUAAAAAAgD8RAAAIEgAQAAEAAABGDhAAAAAAAEaOIAAAAAAAAgAAABEAAAgiABAAAQAAAEYOEAAAAAAARo4gAAAAAAADAAAAAAAABxIAEAABAAAAGgAQAAEAAAAKABAAAQAAADYAAAWCIBAAAgAAABoAEAABAAAAOAAAB0IgEAACAAAACgAQAAEAAAABQAAAAAAAPxEAAAgSIBAAAgAAAEYOEAAAAAAARo4gAAAAAAAAAAAAEQAACCIgEAACAAAARg4QAAAAAABGjiAAAAAAAAEAAAA%AAABU1RBVHQAAAAMAAAAAgAAAAAAAAAGAAAABgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";
kha_Shaders.line_fragData0 = "s682:AAAARFhCQ5vz:tmFILt8j9P6xQPbPW8BAAAA:AEAAAUAAAA0AAAAgAAAALQAAAAAAQAAgAEAAFJERUZEAAAAAAAAAAAAAAAAAAAAHAAAAAAE::8AAQAAHAAAAE1pY3Jvc29mdCAoUikgSExTTCBTaGFkZXIgQ29tcGlsZXIgMTAuMQBJU0dOLAAAAAEAAAAIAAAAIAAAAAAAAAAAAAAAAwAAAAAAAAAHBwAAVEVYQ09PUkQAq6urT1NHTkQAAAACAAAACAAAADgAAAAAAAAAAAAAAAMAAAAAAAAADwAAADgAAAABAAAAAAAAAAMAAAABAAAADwAAAFNWX1RhcmdldACrq1NIRFJ4AAAAQAAAAB4AAABiEAADchAQAAAAAABlAAAD8iAQAAAAAABlAAAD8iAQAAEAAAA2AAAI8iAQAAAAAAACQAAAAACAPwAAgD8AAAAAAACAPzYAAAVyIBAAAQAAAEYSEAAAAAAANgAABYIgEAABAAAAAUAAAAAAgD8%AAABU1RBVHQAAAAEAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";
kha_Shaders.line_vertData0 = "s1232:AmNvbAAAcG9zAAEBJEdsb2JhbHMAAAFWUAAAAAAAQAAAAAQERFhCQ9eEvsnATy19v56MYyPWhv8BAAAAeAMAAAUAAAA0AAAA8AAAADwBAACUAQAA:AIAAFJERUa0AAAAAQAAAEgAAAABAAAAHAAAAAAE:v8AAQAAjAAAADwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAJEdsb2JhbHMAq6urPAAAAAEAAABgAAAAQAAAAAAAAAAAAAAAeAAAAAAAAABAAAAAAgAAAHwAAAAAAAAAVlAAqwMAAwAEAAQAAAAAAAAAAABNaWNyb3NvZnQgKFIpIEhMU0wgU2hhZGVyIENvbXBpbGVyIDEwLjEASVNHTkQAAAACAAAACAAAADgAAAAAAAAAAAAAAAMAAAAAAAAABwcAADgAAAABAAAAAAAAAAMAAAABAAAABwcAAFRFWENPT1JEAKurq09TR05QAAAAAgAAAAgAAAA4AAAAAAAAAAAAAAADAAAAAAAAAAcIAABBAAAAAAAAAAEAAAADAAAAAQAAAA8AAABURVhDT09SRABTVl9Qb3NpdGlvbgCrq6tTSERSYAEAAEAAAQBYAAAAWQAABEaOIAAAAAAABAAAAF8AAANyEBAAAAAAAF8AAANyEBAAAQAAAGUAAANyIBAAAAAAAGcAAATyIBAAAQAAAAEAAABoAAACAgAAADYAAAVyIBAAAAAAAEYSEAAAAAAANgAABXIAEAAAAAAARhIQAAEAAAA2AAAFggAQAAAAAAABQAAAAACAPxEAAAgSABAAAQAAAEYOEAAAAAAARo4gAAAAAAACAAAAEQAACCIAEAABAAAARg4QAAAAAABGjiAAAAAAAAMAAAAAAAAHEgAQAAEAAAAaABAAAQAAAAoAEAABAAAANgAABYIgEAABAAAAGgAQAAEAAAA4AAAHQiAQAAEAAAAKABAAAQAAAAFAAAAAAAA:EQAACBIgEAABAAAARg4QAAAAAABGjiAAAAAAAAAAAAARAAAIIiAQAAEAAABGDhAAAAAAAEaOIAAAAAAAAQAAAD4AAAFTVEFUdAAAAAsAAAACAAAAAAAAAAQAAAAGAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";
kha_Shaders.mask_merge_fragData0 = "s1084:AARfdGV4MF9zYW1wbGVyAABfdGV4YV9zYW1wbGVyAAF0ZXgwAAB0ZXhhAAEARFhCQ9l6ZkwI0w1%%RPjye1pyfABAAAAAAMAAAUAAAA0AAAAKAEAAFwBAACQAQAAhAIAAFJERUbsAAAAAAAAAAAAAAAEAAAAHAAAAAAE::8AAQAAwgAAAJwAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAqgAAAAMAAAAAAAAAAAAAAAAAAAABAAAAAQAAAAEAAAC4AAAAAgAAAAUAAAAEAAAA:::::wAAAAABAAAADQAAAL0AAAACAAAABQAAAAQAAAD:::::AQAAAAEAAAANAAAAX3RleDBfc2FtcGxlcgBfdGV4YV9zYW1wbGVyAHRleDAAdGV4YQBNaWNyb3NvZnQgKFIpIEhMU0wgU2hhZGVyIENvbXBpbGVyIDEwLjEAq6tJU0dOLAAAAAEAAAAIAAAAIAAAAAAAAAAAAAAAAwAAAAAAAAADAwAAVEVYQ09PUkQAq6urT1NHTiwAAAABAAAACAAAACAAAAAAAAAAAAAAAAMAAAAAAAAADwAAAFNWX1RhcmdldACrq1NIRFLsAAAAQAAAADsAAABaAAADAGAQAAAAAABaAAADAGAQAAEAAABYGAAEAHAQAAAAAABVVQAAWBgABABwEAABAAAAVVUAAGIQAAMyEBAAAAAAAGUAAAPyIBAAAAAAAGgAAAICAAAASAAAC:IAEAAAAAAARhAQAAAAAABGfhAAAQAAAABgEAABAAAAAUAAAAAAAABIAAAL8gAQAAEAAABGEBAAAAAAAEZ%EAAAAAAAAGAQAAAAAAABQAAAAAAAADgAAAeCIBAAAAAAAAoAEAAAAAAAOgAQAAEAAAA2AAAFciAQAAAAAABGAhAAAQAAAD4AAAFTVEFUdAAAAAUAAAACAAAAAAAAAAIAAAABAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";
kha_Shaders.painter_colored_fragData0 = "s564:AAAARFhCQ10%09VOlitqlcwulnj3BPYBAAAApAEAAAUAAAA0AAAAgAAAALQAAADoAAAAKAEAAFJERUZEAAAAAAAAAAAAAAAAAAAAHAAAAAAE::8AAQAAHAAAAE1pY3Jvc29mdCAoUikgSExTTCBTaGFkZXIgQ29tcGlsZXIgMTAuMQBJU0dOLAAAAAEAAAAIAAAAIAAAAAAAAAAAAAAAAwAAAAAAAAAPDwAAVEVYQ09PUkQAq6urT1NHTiwAAAABAAAACAAAACAAAAAAAAAAAAAAAAMAAAAAAAAADwAAAFNWX1RhcmdldACrq1NIRFI4AAAAQAAAAA4AAABiEAAD8hAQAAAAAABlAAAD8iAQAAAAAAA2AAAF8iAQAAAAAABGHhAAAAAAAD4AAAFTVEFUdAAAAAIAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";
kha_Shaders.painter_colored_vertData0 = "s1298:AnZlcnRleENvbG9yAAB2ZXJ0ZXhQb3NpdGlvbgABASRHbG9iYWxzAAABcHJvamVjdGlvbk1hdHJpeAAAAAAAQAAAAAQERFhCQ4DtgybrA7ZLkEX80:H0lx8BAAAAiAMAAAUAAAA0AAAAAAEAAEwBAACkAQAADAMAAFJERUbEAAAAAQAAAEgAAAABAAAAHAAAAAAE:v8AAQAAnAAAADwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAJEdsb2JhbHMAq6urPAAAAAEAAABgAAAAQAAAAAAAAAAAAAAAeAAAAAAAAABAAAAAAgAAAIwAAAAAAAAAcHJvamVjdGlvbk1hdHJpeACrq6sDAAMABAAEAAAAAAAAAAAATWljcm9zb2Z0IChSKSBITFNMIFNoYWRlciBDb21waWxlciAxMC4xAElTR05EAAAAAgAAAAgAAAA4AAAAAAAAAAAAAAADAAAAAAAAAA8PAAA4AAAAAQAAAAAAAAADAAAAAQAAAAcHAABURVhDT09SRACrq6tPU0dOUAAAAAIAAAAIAAAAOAAAAAAAAAAAAAAAAwAAAAAAAAAPAAAAQQAAAAAAAAABAAAAAwAAAAEAAAAPAAAAVEVYQ09PUkQAU1ZfUG9zaXRpb24Aq6urU0hEUmABAABAAAEAWAAAAFkAAARGjiAAAAAAAAQAAABfAAAD8hAQAAAAAABfAAADchAQAAEAAABlAAAD8iAQAAAAAABnAAAE8iAQAAEAAAABAAAAaAAAAgIAAAA2AAAF8iAQAAAAAABGHhAAAAAAADYAAAVyABAAAAAAAEYSEAABAAAANgAABYIAEAAAAAAAAUAAAAAAgD8RAAAIEgAQAAEAAABGDhAAAAAAAEaOIAAAAAAAAgAAABEAAAgiABAAAQAAAEYOEAAAAAAARo4gAAAAAAADAAAAAAAABxIAEAABAAAAGgAQAAEAAAAKABAAAQAAADYAAAWCIBAAAQAAABoAEAABAAAAOAAAB0IgEAABAAAACgAQAAEAAAABQAAAAAAAPxEAAAgSIBAAAQAAAEYOEAAAAAAARo4gAAAAAAAAAAAAEQAACCIgEAABAAAARg4QAAAAAABGjiAAAAAAAAEAAAA%AAABU1RBVHQAAAALAAAAAgAAAAAAAAAEAAAABgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";
kha_Shaders.painter_image_fragData0 = "s958:AAJfdGV4X3NhbXBsZXIAAHRleAAAAERYQkOawZjYhwCbdBYGRIMI208AAQAAALgCAAAFAAAANAAAANQAAAAgAQAAVAEAADwCAABSREVGmAAAAAAAAAAAAAAAAgAAABwAAAAABP::AAEAAG0AAABcAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAQAAAGkAAAACAAAABQAAAAQAAAD:::::AAAAAAEAAAANAAAAX3RleF9zYW1wbGVyAHRleABNaWNyb3NvZnQgKFIpIEhMU0wgU2hhZGVyIENvbXBpbGVyIDEwLjEAq6urSVNHTkQAAAACAAAACAAAADgAAAAAAAAAAAAAAAMAAAAAAAAADw8AADgAAAABAAAAAAAAAAMAAAABAAAAAwMAAFRFWENPT1JEAKurq09TR04sAAAAAQAAAAgAAAAgAAAAAAAAAAAAAAADAAAAAAAAAA8AAABTVl9UYXJnZXQAq6tTSERS4AAAAEAAAAA4AAAAWgAAAwBgEAAAAAAAWBgABABwEAAAAAAAVVUAAGIQAAPyEBAAAAAAAGIQAAMyEBAAAQAAAGUAAAPyIBAAAAAAAGgAAAIBAAAARQAACfIAEAAAAAAARhAQAAEAAABGfhAAAAAAAABgEAAAAAAAOAAAB:IAEAAAAAAARg4QAAAAAABGHhAAAAAAADgAAAdyABAAAAAAAPYPEAAAAAAARgIQAAAAAAA2AAAFgiAQAAAAAAA6ABAAAAAAADgAAAdyIBAAAAAAAEYCEAAAAAAA9h8QAAAAAAA%AAABU1RBVHQAAAAGAAAAAQAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";
kha_Shaders.painter_image_vertData0 = "s1438:A3RleFBvc2l0aW9uAAB2ZXJ0ZXhDb2xvcgABdmVydGV4UG9zaXRpb24AAgEkR2xvYmFscwAAAXByb2plY3Rpb25NYXRyaXgAAAAAAEAAAAAEBERYQkMa3iE9IT:0doX7J6Il0ZrpAQAAAOQDAAAFAAAANAAAAAABAABkAQAA1AEAAGgDAABSREVGxAAAAAEAAABIAAAAAQAAABwAAAAABP7:AAEAAJwAAAA8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAACRHbG9iYWxzAKurqzwAAAABAAAAYAAAAEAAAAAAAAAAAAAAAHgAAAAAAAAAQAAAAAIAAACMAAAAAAAAAHByb2plY3Rpb25NYXRyaXgAq6urAwADAAQABAAAAAAAAAAAAE1pY3Jvc29mdCAoUikgSExTTCBTaGFkZXIgQ29tcGlsZXIgMTAuMQBJU0dOXAAAAAMAAAAIAAAAUAAAAAAAAAAAAAAAAwAAAAAAAAADAwAAUAAAAAEAAAAAAAAAAwAAAAEAAAAPDwAAUAAAAAIAAAAAAAAAAwAAAAIAAAAHBwAAVEVYQ09PUkQAq6urT1NHTmgAAAADAAAACAAAAFAAAAAAAAAAAAAAAAMAAAAAAAAADwAAAFAAAAABAAAAAAAAAAMAAAABAAAAAwwAAFkAAAAAAAAAAQAAAAMAAAACAAAADwAAAFRFWENPT1JEAFNWX1Bvc2l0aW9uAKurq1NIRFKMAQAAQAABAGMAAABZAAAERo4gAAAAAAAEAAAAXwAAAzIQEAAAAAAAXwAAA:IQEAABAAAAXwAAA3IQEAACAAAAZQAAA:IgEAAAAAAAZQAAAzIgEAABAAAAZwAABPIgEAACAAAAAQAAAGgAAAICAAAANgAABfIgEAAAAAAARh4QAAEAAAA2AAAFMiAQAAEAAABGEBAAAAAAADYAAAVyABAAAAAAAEYSEAACAAAANgAABYIAEAAAAAAAAUAAAAAAgD8RAAAIEgAQAAEAAABGDhAAAAAAAEaOIAAAAAAAAgAAABEAAAgiABAAAQAAAEYOEAAAAAAARo4gAAAAAAADAAAAAAAABxIAEAABAAAAGgAQAAEAAAAKABAAAQAAADYAAAWCIBAAAgAAABoAEAABAAAAOAAAB0IgEAACAAAACgAQAAEAAAABQAAAAAAAPxEAAAgSIBAAAgAAAEYOEAAAAAAARo4gAAAAAAAAAAAAEQAACCIgEAACAAAARg4QAAAAAABGjiAAAAAAAAEAAAA%AAABU1RBVHQAAAAMAAAAAgAAAAAAAAAGAAAABgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";
kha_Shaders.painter_text_fragData0 = "s883:AAJfdGV4X3NhbXBsZXIAAHRleAAAAERYQkPq8S:xutfukNTooEJ3yp0AAQAAAIACAAAFAAAANAAAANQAAAAgAQAAVAEAAAQCAABSREVGmAAAAAAAAAAAAAAAAgAAABwAAAAABP::AAEAAG0AAABcAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAQAAAGkAAAACAAAABQAAAAQAAAD:::::AAAAAAEAAAANAAAAX3RleF9zYW1wbGVyAHRleABNaWNyb3NvZnQgKFIpIEhMU0wgU2hhZGVyIENvbXBpbGVyIDEwLjEAq6urSVNHTkQAAAACAAAACAAAADgAAAAAAAAAAAAAAAMAAAAAAAAADw8AADgAAAABAAAAAAAAAAMAAAABAAAAAwMAAFRFWENPT1JEAKurq09TR04sAAAAAQAAAAgAAAAgAAAAAAAAAAAAAAADAAAAAAAAAA8AAABTVl9UYXJnZXQAq6tTSERSqAAAAEAAAAAqAAAAWgAAAwBgEAAAAAAAWBgABABwEAAAAAAAVVUAAGIQAAPyEBAAAAAAAGIQAAMyEBAAAQAAAGUAAAPyIBAAAAAAAGgAAAIBAAAARQAACfIAEAAAAAAARhAQAAEAAABGfhAAAAAAAABgEAAAAAAAOAAAB4IgEAAAAAAACgAQAAAAAAA6EBAAAAAAADYAAAVyIBAAAAAAAEYSEAAAAAAAPgAAAVNUQVR0AAAABAAAAAEAAAAAAAAAAwAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";
kha_Shaders.painter_text_vertData0 = "s1438:A3RleFBvc2l0aW9uAAB2ZXJ0ZXhDb2xvcgABdmVydGV4UG9zaXRpb24AAgEkR2xvYmFscwAAAXByb2plY3Rpb25NYXRyaXgAAAAAAEAAAAAEBERYQkMa3iE9IT:0doX7J6Il0ZrpAQAAAOQDAAAFAAAANAAAAAABAABkAQAA1AEAAGgDAABSREVGxAAAAAEAAABIAAAAAQAAABwAAAAABP7:AAEAAJwAAAA8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAACRHbG9iYWxzAKurqzwAAAABAAAAYAAAAEAAAAAAAAAAAAAAAHgAAAAAAAAAQAAAAAIAAACMAAAAAAAAAHByb2plY3Rpb25NYXRyaXgAq6urAwADAAQABAAAAAAAAAAAAE1pY3Jvc29mdCAoUikgSExTTCBTaGFkZXIgQ29tcGlsZXIgMTAuMQBJU0dOXAAAAAMAAAAIAAAAUAAAAAAAAAAAAAAAAwAAAAAAAAADAwAAUAAAAAEAAAAAAAAAAwAAAAEAAAAPDwAAUAAAAAIAAAAAAAAAAwAAAAIAAAAHBwAAVEVYQ09PUkQAq6urT1NHTmgAAAADAAAACAAAAFAAAAAAAAAAAAAAAAMAAAAAAAAADwAAAFAAAAABAAAAAAAAAAMAAAABAAAAAwwAAFkAAAAAAAAAAQAAAAMAAAACAAAADwAAAFRFWENPT1JEAFNWX1Bvc2l0aW9uAKurq1NIRFKMAQAAQAABAGMAAABZAAAERo4gAAAAAAAEAAAAXwAAAzIQEAAAAAAAXwAAA:IQEAABAAAAXwAAA3IQEAACAAAAZQAAA:IgEAAAAAAAZQAAAzIgEAABAAAAZwAABPIgEAACAAAAAQAAAGgAAAICAAAANgAABfIgEAAAAAAARh4QAAEAAAA2AAAFMiAQAAEAAABGEBAAAAAAADYAAAVyABAAAAAAAEYSEAACAAAANgAABYIAEAAAAAAAAUAAAAAAgD8RAAAIEgAQAAEAAABGDhAAAAAAAEaOIAAAAAAAAgAAABEAAAgiABAAAQAAAEYOEAAAAAAARo4gAAAAAAADAAAAAAAABxIAEAABAAAAGgAQAAEAAAAKABAAAQAAADYAAAWCIBAAAgAAABoAEAABAAAAOAAAB0IgEAACAAAACgAQAAEAAAABQAAAAAAAPxEAAAgSIBAAAgAAAEYOEAAAAAAARo4gAAAAAAAAAAAAEQAACCIgEAACAAAARg4QAAAAAABGjiAAAAAAAAEAAAA%AAABU1RBVHQAAAAMAAAAAgAAAAAAAAAGAAAABgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";
kha_Shaders.painter_video_fragData0 = "s920:AAJfdGV4X3NhbXBsZXIAAHRleAAAAERYQkNyheiuU7t5mFNPbkIv8yIwAQAAAJwCAAAFAAAANAAAANQAAAAgAQAAVAEAACACAABSREVGmAAAAAAAAAAAAAAAAgAAABwAAAAABP::AAEAAG0AAABcAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAQAAAGkAAAACAAAABQAAAAQAAAD:::::AAAAAAEAAAANAAAAX3RleF9zYW1wbGVyAHRleABNaWNyb3NvZnQgKFIpIEhMU0wgU2hhZGVyIENvbXBpbGVyIDEwLjEAq6urSVNHTkQAAAACAAAACAAAADgAAAAAAAAAAAAAAAMAAAAAAAAADw8AADgAAAABAAAAAAAAAAMAAAABAAAAAwMAAFRFWENPT1JEAKurq09TR04sAAAAAQAAAAgAAAAgAAAAAAAAAAAAAAADAAAAAAAAAA8AAABTVl9UYXJnZXQAq6tTSERSxAAAAEAAAAAxAAAAWgAAAwBgEAAAAAAAWBgABABwEAAAAAAAVVUAAGIQAAPyEBAAAAAAAGIQAAMyEBAAAQAAAGUAAAPyIBAAAAAAAGgAAAIBAAAARQAACfIAEAAAAAAARhAQAAEAAABGfhAAAAAAAABgEAAAAAAAOAAAB:IAEAAAAAAARg4QAAAAAABGHhAAAAAAADgAAAdyIBAAAAAAAEYCEAAAAAAA9h8QAAAAAAA2AAAFgiAQAAAAAAA6ABAAAAAAAD4AAAFTVEFUdAAAAAUAAAABAAAAAAAAAAMAAAACAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";
kha_Shaders.painter_video_vertData0 = "s1438:A3RleFBvc2l0aW9uAAB2ZXJ0ZXhDb2xvcgABdmVydGV4UG9zaXRpb24AAgEkR2xvYmFscwAAAXByb2plY3Rpb25NYXRyaXgAAAAAAEAAAAAEBERYQkMa3iE9IT:0doX7J6Il0ZrpAQAAAOQDAAAFAAAANAAAAAABAABkAQAA1AEAAGgDAABSREVGxAAAAAEAAABIAAAAAQAAABwAAAAABP7:AAEAAJwAAAA8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAACRHbG9iYWxzAKurqzwAAAABAAAAYAAAAEAAAAAAAAAAAAAAAHgAAAAAAAAAQAAAAAIAAACMAAAAAAAAAHByb2plY3Rpb25NYXRyaXgAq6urAwADAAQABAAAAAAAAAAAAE1pY3Jvc29mdCAoUikgSExTTCBTaGFkZXIgQ29tcGlsZXIgMTAuMQBJU0dOXAAAAAMAAAAIAAAAUAAAAAAAAAAAAAAAAwAAAAAAAAADAwAAUAAAAAEAAAAAAAAAAwAAAAEAAAAPDwAAUAAAAAIAAAAAAAAAAwAAAAIAAAAHBwAAVEVYQ09PUkQAq6urT1NHTmgAAAADAAAACAAAAFAAAAAAAAAAAAAAAAMAAAAAAAAADwAAAFAAAAABAAAAAAAAAAMAAAABAAAAAwwAAFkAAAAAAAAAAQAAAAMAAAACAAAADwAAAFRFWENPT1JEAFNWX1Bvc2l0aW9uAKurq1NIRFKMAQAAQAABAGMAAABZAAAERo4gAAAAAAAEAAAAXwAAAzIQEAAAAAAAXwAAA:IQEAABAAAAXwAAA3IQEAACAAAAZQAAA:IgEAAAAAAAZQAAAzIgEAABAAAAZwAABPIgEAACAAAAAQAAAGgAAAICAAAANgAABfIgEAAAAAAARh4QAAEAAAA2AAAFMiAQAAEAAABGEBAAAAAAADYAAAVyABAAAAAAAEYSEAACAAAANgAABYIAEAAAAAAAAUAAAAAAgD8RAAAIEgAQAAEAAABGDhAAAAAAAEaOIAAAAAAAAgAAABEAAAgiABAAAQAAAEYOEAAAAAAARo4gAAAAAAADAAAAAAAABxIAEAABAAAAGgAQAAEAAAAKABAAAQAAADYAAAWCIBAAAgAAABoAEAABAAAAOAAAB0IgEAACAAAACgAQAAEAAAABQAAAAAAAPxEAAAgSIBAAAgAAAEYOEAAAAAAARo4gAAAAAAAAAAAAEQAACCIgEAACAAAARg4QAAAAAABGjiAAAAAAAAEAAAA%AAABU1RBVHQAAAAMAAAAAgAAAAAAAAAGAAAABgAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";
kha_Shaders.pass_copy_fragData0 = "s771:AAJfdGV4X3NhbXBsZXIAAHRleAAAAERYQkNEWeP8b5BN%RvMTBdE:hRwAQAAACwCAAAFAAAANAAAANQAAAAIAQAAPAEAALABAABSREVGmAAAAAAAAAAAAAAAAgAAABwAAAAABP::AAEAAG0AAABcAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAQAAAGkAAAACAAAABQAAAAQAAAD:::::AAAAAAEAAAANAAAAX3RleF9zYW1wbGVyAHRleABNaWNyb3NvZnQgKFIpIEhMU0wgU2hhZGVyIENvbXBpbGVyIDEwLjEAq6urSVNHTiwAAAABAAAACAAAACAAAAAAAAAAAAAAAAMAAAAAAAAAAwMAAFRFWENPT1JEAKurq09TR04sAAAAAQAAAAgAAAAgAAAAAAAAAAAAAAADAAAAAAAAAA8AAABTVl9UYXJnZXQAq6tTSERSbAAAAEAAAAAbAAAAWgAAAwBgEAAAAAAAWBgABABwEAAAAAAAVVUAAGIQAAMyEBAAAAAAAGUAAAPyIBAAAAAAAEgAAAvyIBAAAAAAAEYQEAAAAAAARn4QAAAAAAAAYBAAAAAAAAFAAAAAAAAAPgAAAVNUQVR0AAAAAgAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";
kha_Shaders.pass_vertData0 = "s763:AXBvcwAAAABEWEJDtpmVVJ2wtBYIEKtdn7IyBgEAAAA0AgAABQAAADQAAACAAAAAtAAAAAwBAAC4AQAAUkRFRkQAAAAAAAAAAAAAAAAAAAAcAAAAAAT%:wABAAAcAAAATWljcm9zb2Z0IChSKSBITFNMIFNoYWRlciBDb21waWxlciAxMC4xAElTR04sAAAAAQAAAAgAAAAgAAAAAAAAAAAAAAADAAAAAAAAAAMDAABURVhDT09SRACrq6tPU0dOUAAAAAIAAAAIAAAAOAAAAAAAAAAAAAAAAwAAAAAAAAADDAAAQQAAAAAAAAABAAAAAwAAAAEAAAAPAAAAVEVYQ09PUkQAU1ZfUG9zaXRpb24Aq6urU0hEUqQAAABAAAEAKQAAAF8AAAMyEBAAAAAAAGUAAAMyIBAAAAAAAGcAAATyIBAAAQAAAAEAAAAyAAAPMiAQAAAAAABGEBAAAAAAAAJAAAAAAAA:AAAAvwAAAAAAAAAAAkAAAAAAAD8AAAA:AAAAAAAAAAA2AAAFMiAQAAEAAABGEBAAAAAAADYAAAjCIBAAAQAAAAJAAAAAAAAAAAAAAAAAAD8AAIA:PgAAAVNUQVR0AAAABAAAAAAAAAAAAAAAAwAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";
kha_Shaders.pass_viewray2_vertData0 = "s1292:AXBvcwAAASRHbG9iYWxzAAABaW52UAAAAAAAQAAAAAQERFhCQ5XXndKVqqQ%7AM:B2EKdcMBAAAAqAMAAAUAAAA0AAAA9AAAACgBAACYAQAALAMAAFJERUa4AAAAAQAAAEgAAAABAAAAHAAAAAAE:v8AAQAAkAAAADwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAJEdsb2JhbHMAq6urPAAAAAEAAABgAAAAQAAAAAAAAAAAAAAAeAAAAAAAAABAAAAAAgAAAIAAAAAAAAAAaW52UACrq6sDAAMABAAEAAAAAAAAAAAATWljcm9zb2Z0IChSKSBITFNMIFNoYWRlciBDb21waWxlciAxMC4xAElTR04sAAAAAQAAAAgAAAAgAAAAAAAAAAAAAAADAAAAAAAAAAMDAABURVhDT09SRACrq6tPU0dOaAAAAAMAAAAIAAAAUAAAAAAAAAAAAAAAAwAAAAAAAAADDAAAUAAAAAEAAAAAAAAAAwAAAAEAAAAHCAAAWQAAAAAAAAABAAAAAwAAAAIAAAAPAAAAVEVYQ09PUkQAU1ZfUG9zaXRpb24Aq6urU0hEUowBAABAAAEAYwAAAFkAAARGjiAAAAAAAAMAAABfAAADMhAQAAAAAABlAAADMiAQAAAAAABlAAADciAQAAEAAABnAAAE8iAQAAIAAAABAAAAaAAAAgIAAAAyAAAPMiAQAAAAAABGEBAAAAAAAAJAAAAAAAA:AAAAvwAAAAAAAAAAAkAAAAAAAD8AAAA:AAAAAAAAAAA2AAAFMgAQAAAAAABGEBAAAAAAADYAAAjCABAAAAAAAAJAAAAAAAAAAAAAAAAAgD8AAIA:EQAACBIAEAABAAAARg8QAAAAAABGjiAAAAAAAAAAAAARAAAIIgAQAAEAAABGDxAAAAAAAEaOIAAAAAAAAQAAABEAAAgSABAAAAAAAEYOEAAAAAAARo4gAAAAAAACAAAADgAABzIgEAABAAAARgAQAAEAAAAGABAAAAAAADYAAAVCIBAAAQAAAAFAAAAAAIA:NgAABTIgEAACAAAARhAQAAAAAAA2AAAIwiAQAAIAAAACQAAAAAAAAAAAAAAAAAA:AACAPz4AAAFTVEFUdAAAAAsAAAACAAAAAAAAAAQAAAAFAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";
kha_Shaders.pass_viewray_vertData0 = "s1435:AXBvcwAAASRHbG9iYWxzAAACaW52VlAAAAAAAEAAAAAEBGV5ZQBAAAAADAAAAAMBRFhCQ6vyu6KH0pZNNy%JPQseyEgBAAAABAQAAAUAAAA0AAAAIAEAAFQBAADEAQAAiAMAAFJERUbkAAAAAQAAAEgAAAABAAAAHAAAAAAE:v8AAQAAvAAAADwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAJEdsb2JhbHMAq6urPAAAAAIAAABgAAAAUAAAAAAAAAAAAAAAkAAAAAAAAABAAAAAAgAAAJgAAAAAAAAAqAAAAEAAAAAMAAAAAgAAAKwAAAAAAAAAaW52VlAAq6sDAAMABAAEAAAAAAAAAAAAZXllAAEAAwABAAMAAAAAAAAAAABNaWNyb3NvZnQgKFIpIEhMU0wgU2hhZGVyIENvbXBpbGVyIDEwLjEASVNHTiwAAAABAAAACAAAACAAAAAAAAAAAAAAAAMAAAAAAAAAAwMAAFRFWENPT1JEAKurq09TR05oAAAAAwAAAAgAAABQAAAAAAAAAAAAAAADAAAAAAAAAAMMAABQAAAAAQAAAAAAAAADAAAAAQAAAAcIAABZAAAAAAAAAAEAAAADAAAAAgAAAA8AAABURVhDT09SRABTVl9Qb3NpdGlvbgCrq6tTSERSvAEAAEAAAQBvAAAAWQAABEaOIAAAAAAABQAAAF8AAAMyEBAAAAAAAGUAAAMyIBAAAAAAAGUAAANyIBAAAQAAAGcAAATyIBAAAgAAAAEAAABoAAACAgAAADIAAA8yIBAAAAAAAEYQEAAAAAAAAkAAAAAAAD8AAAC:AAAAAAAAAAACQAAAAAAAPwAAAD8AAAAAAAAAADYAAAUyABAAAAAAAEYQEAAAAAAANgAACMIAEAAAAAAAAkAAAAAAAAAAAAAAAACAPwAAgD8RAAAIEgAQAAEAAABGDxAAAAAAAEaOIAAAAAAAAAAAABEAAAgiABAAAQAAAEYPEAAAAAAARo4gAAAAAAABAAAAEQAACEIAEAABAAAARg8QAAAAAABGjiAAAAAAAAIAAAARAAAIEgAQAAAAAABGDhAAAAAAAEaOIAAAAAAAAwAAAA4AAAdyABAAAAAAAEYCEAABAAAABgAQAAAAAAAAAAAJciAQAAEAAABGAhAAAAAAAEaCIIBBAAAAAAAAAAQAAAA2AAAFMiAQAAIAAABGEBAAAAAAADYAAAjCIBAAAgAAAAJAAAAAAAAAAAAAAAAAAD8AAIA:PgAAAVNUQVR0AAAADAAAAAIAAAAAAAAABAAAAAcAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";
kha_Shaders.prefilter_envmap_fragData0 = "s4868:AANfcmFkaWFuY2Vfc2FtcGxlcgAAcmFkaWFuY2UAACRHbG9iYWxzAAABcGFyYW1zAAAAAAAQAAAABAFEWEJD4r84rbgVMktGybss1dzixQEAAAAIDgAABQAAADQAAABMAQAAgAEAALQBAACMDQAAUkRFRhABAAABAAAAoAAAAAMAAAAcAAAAAAT::wABAADoAAAAfAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAACOAAAAAgAAAAUAAAAEAAAA:::::wAAAAABAAAADQAAAJcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAX3JhZGlhbmNlX3NhbXBsZXIAcmFkaWFuY2UAJEdsb2JhbHMAlwAAAAEAAAC4AAAAEAAAAAAAAAAAAAAA0AAAAAAAAAAQAAAAAgAAANgAAAAAAAAAcGFyYW1zAKsBAAMAAQAEAAAAAAAAAAAATWljcm9zb2Z0IChSKSBITFNMIFNoYWRlciBDb21waWxlciAxMC4xAElTR04sAAAAAQAAAAgAAAAgAAAAAAAAAAAAAAADAAAAAAAAAAMDAABURVhDT09SRACrq6tPU0dOLAAAAAEAAAAIAAAAIAAAAAAAAAAAAAAAAwAAAAAAAAAPAAAAU1ZfVGFyZ2V0AKurU0hEUtALAABAAAAA9AIAAFkAAARGjiAAAAAAAAEAAABaAAADAGAQAAAAAABYGAAEAHAQAAAAAABVVQAAYhAAAzIQEAAAAAAAZQAAA:IgEAAAAAAAaAAAAgYAAAA4AAAHEgAQAAAAAAAaEBAAAAAAAAFAAADbD0lAMgAACSIAEAAAAAAAChAQAAAAAAABQAAA2w:JQAFAAADbD0nATQAABxIAEAAAAAAAEgAQAAEAAAAKABAAAAAAAE0AAAcSABAAAgAAABIAEAADAAAAGgAQAAAAAAA4AAAHIgAQAAMAAAAKABAAAAAAAAoAEAADAAAAOAAABxIAEAADAAAACgAQAAAAAAAKABAAAgAAADYAAAVCABAAAwAAAAoAEAABAAAAOAAACnIAEAAAAAAARgIQAAMAAAACQAAAAAAAAAAAgD8AAIA:AAAAADIAAA1yABAAAAAAAJYEEAADAAAAAkAAAAAAgD8AAAAAAACAvwAAAABGAhCAQQAAAAAAAAAQAAAHggAQAAAAAABGAhAAAAAAAEYCEAAAAAAARAAABYIAEAAAAAAAOgAQAAAAAAA4AAAHcgAQAAAAAAD2DxAAAAAAAEYCEAAAAAAANgAABoIAEAADAAAACgAQgEEAAAADAAAAOAAACnIAEAABAAAAJgkQAAMAAAACQAAAAACAPwAAgL8AAIA:AAAAADgAAAdyABAAAgAAAJYEEAAAAAAAJgkQAAEAAAAyAAAKcgAQAAIAAAAmCRAAAAAAAHYOEAADAAAARgIQgEEAAAACAAAANgAACHIAEAADAAAAAkAAAAAAAAAAAAAAAAAAAAAAAAA2AAAFggAQAAAAAAABQAAAAAAAADAAAAEhAAAHggAQAAEAAAA6ABAAAAAAAAFAAAAAQAAAAwAEAzoAEAABAAAAVgAABYIAEAABAAAAOgAQAAAAAAA4AAAHMgAQAAQAAAD2DxAAAQAAAEYQEAAAAAAAAAAAB8IAEAAEAAAABgQQAAQAAAAGBBAABAAAAA8AAAqCABAAAQAAAEYAEAAEAAAAAkAAADnWT0FMd5xCAAAAAAAAAAA4AAAHggAQAAIAAAA6ABAAAQAAAAFAAACsDqM%QQAABYIAEAACAAAAOgAQAAIAAAAyAAAKggAQAAEAAAA6ABCAQQAAAAIAAAABQAAAw:VIQDoAEAABAAAATQAABoIAEAABAAAAANAAADoAEAABAAAAOAAAB4IAEAABAAAAOgAQAAEAAAABQAAAjO4qRxoAAAWCABAAAQAAADoAEAABAAAADwAACoIAEAACAAAA5goQAAQAAAACQAAAOdZPQUx3nEIAAAAAAAAAADgAAAeCABAAAwAAADoAEAACAAAAAUAAAKwOoz5BAAAFggAQAAMAAAA6ABAAAwAAADIAAAqCABAAAgAAADoAEIBBAAAAAwAAAAFAAADD9UhAOgAQAAIAAABNAAAGggAQAAIAAAAA0AAAOgAQAAIAAAA4AAAHggAQAAIAAAA6ABAAAgAAAAFAAACM7ipHGgAABYIAEAACAAAAOgAQAAIAAABLAAAFggAQAAMAAAA6ABAAAgAAADgAAAeCABAAAQAAADoAEAABAAAAAUAAANsPyUBNAAAHEgAQAAQAAAASABAABQAAADoAEAABAAAAOAAAB4IAEAABAAAAOgAQAAMAAAAKABAABQAAADgAAAeCABAAAwAAADoAEAADAAAACgAQAAQAAAAAAAAIggAQAAIAAAA6ABCAQQAAAAIAAAABQAAAAACAP0sAAAWCABAAAgAAADoAEAACAAAAOAAAB3IAEAAEAAAARgIQAAIAAAD2DxAAAwAAADIAAAlyABAABAAAAEYCEAAAAAAA9g8QAAEAAABGAhAABAAAADIAAAlyABAABAAAAEYCEAABAAAA9g8QAAIAAABGAhAABAAAABAAAAeCABAAAQAAAEYCEAAEAAAARgIQAAQAAABEAAAFggAQAAEAAAA6ABAAAQAAADIAAApyABAABAAAAEYCEAAEAAAA9g8QAAEAAABGAhCAQQAAAAEAAAAyAAAKcgAQAAQAAAAGgCAAAAAAAAAAAABGAhAABAAAAEYCEAABAAAAEAAAB4IAEAABAAAARgIQAAQAAABGAhAABAAAAEQAAAWCABAAAQAAADoAEAABAAAAOAAAB3IAEAAEAAAA9g8QAAEAAABGAhAABAAAAAAAAAiCABAAAQAAAAoAEIDBAAAABAAAAAFAAAAAAIA:SwAABYIAEAABAAAAOgAQAAEAAAAyAAAKggAQAAIAAAAKABCAgQAAAAQAAAABQAAAMG6ZvAFAAAAnFpg9MgAACoIAEAACAAAAOgAQAAIAAAAKABCAgQAAAAQAAAABQAAAhDRZvjIAAAqCABAAAgAAADoAEAACAAAACgAQgIEAAAAEAAAAAUAAAKQNyT84AAAHggAQAAMAAAA6ABAAAQAAADoAEAACAAAAMgAACYIAEAADAAAAOgAQAAMAAAABQAAAAAAAwAFAAADbD0lAMQAACJIAEAAEAAAABggQAAQAAAAGCBCAQQAAAAQAAAABAAAHggAQAAMAAAA6ABAAAwAAAAoAEAAEAAAAMgAACYIAEAABAAAAOgAQAAIAAAA6ABAAAQAAADoAEAADAAAAMwAACYIAEAACAAAAKgAQgIEAAAAEAAAAGgAQgIEAAAAEAAAANAAACYIAEAADAAAAKgAQgIEAAAAEAAAAGgAQgIEAAAAEAAAADgAACoIAEAADAAAAAkAAAAAAgD8AAIA:AACAPwAAgD86ABAAAwAAADgAAAeCABAAAgAAADoAEAACAAAAOgAQAAMAAAA4AAAHggAQAAMAAAA6ABAAAgAAADoAEAACAAAAMgAACRIAEAAEAAAAOgAQAAMAAAABQAAAX66qPAFAAAA2Wq69MgAACRIAEAAEAAAAOgAQAAMAAAAKABAABAAAAAFAAADidjg%MgAACRIAEAAEAAAAOgAQAAMAAAAKABAABAAAAAFAAAAEHam%MgAACYIAEAADAAAAOgAQAAMAAAAKABAABAAAAAFAAAA4938:OAAABxIAEAAEAAAAOgAQAAIAAAA6ABAAAwAAADEAAAkSABAABQAAACoAEICBAAAABAAAABoAEICBAAAABAAAADIAAAkSABAABAAAAAoAEAAEAAAAAUAAAAAAAMABQAAA2w:JPwEAAAcSABAABAAAAAoAEAAFAAAACgAQAAQAAAAyAAAJggAQAAIAAAA6ABAAAgAAADoAEAADAAAACgAQAAQAAAABAAAHggAQAAMAAAA6ABAABAAAAAFAAADbD0nAAAAAB4IAEAACAAAAOgAQAAIAAAA6ABAAAwAAADMAAAiCABAAAwAAACoAEAAEAAAAGgAQgEEAAAAEAAAANAAACBIAEAAEAAAAKgAQAAQAAAAaABCAQQAAAAQAAAAxAAAIggAQAAMAAAA6ABAAAwAAADoAEIBBAAAAAwAAAB0AAAgSABAABAAAAAoAEAAEAAAACgAQgEEAAAAEAAAAAQAAB4IAEAADAAAAOgAQAAMAAAAKABAABAAAADcAAAqCABAAAgAAADoAEAADAAAAOgAQgEEAAAACAAAAOgAQAAIAAAAAAAAHggAQAAIAAAA6ABAAAgAAAAFAAADbD0lAOAAABxIAEAAEAAAAOgAQAAIAAAABQAAAg:kiPjgAAAciABAABAAAADoAEAABAAAAAUAAAIP5oj5FAAAJ8gAQAAQAAABGABAABAAAAEZ%EAAAAAAAAGAQAAAAAAAAAAAHcgAQAAMAAABGAhAAAwAAAEYCEAAEAAAAHgAAB4IAEAAAAAAAOgAQAAAAAAABQAAAAQAAABYAAAE4AAAKcgAQAAAAAABGAhAAAwAAAAJAAAAAAIA4AACAOAAAgDgAAAAALwAABXIAEAAAAAAARgIQAAAAAAA4AAAKcgAQAAAAAABGAhAAAAAAAAJAAAAvuug%L7roPi%66D4AAAAAGQAABXIgEAAAAAAARgIQAAAAAAA2AAAFgiAQAAAAAAABQAAAAACAPz4AAAFTVEFUdAAAAGQAAAAGAAAAAAAAAAIAAABQAAAAAgAAAAQAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";
kha_Shaders.smaa_blend_weight_fragData0 = "s14924:AAdfZWRnZXNUZXhfc2FtcGxlcgAAX2FyZWFUZXhfc2FtcGxlcgABX3NlYXJjaFRleF9zYW1wbGVyAAJlZGdlc1RleAAAYXJlYVRleAABc2VhcmNoVGV4AAIkR2xvYmFscwAAAnNjcmVlblNpemVJbnYAAAAAAAgAAAACAXNjcmVlblNpemUACAAAAAgAAAACAURYQkMdeZhSRd3LQhLRKKln7eIEAQAAACgrAAAFAAAANAAAADACAADEAgAA%AIAAKwqAABSREVG9AEAAAEAAABYAQAABwAAABwAAAAABP::AAEAAMsBAAD8AAAAAwAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAQAAAA4BAAADAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAABAAAAHwEAAAMAAAAAAAAAAAAAAAAAAAACAAAAAQAAAAEAAAAyAQAAAgAAAAUAAAAEAAAA:::::wAAAAABAAAADQAAADsBAAACAAAABQAAAAQAAAD:::::AQAAAAEAAAANAAAAQwEAAAIAAAAFAAAABAAAAP::::8CAAAAAQAAAA0AAABNAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAF9lZGdlc1RleF9zYW1wbGVyAF9hcmVhVGV4X3NhbXBsZXIAX3NlYXJjaFRleF9zYW1wbGVyAGVkZ2VzVGV4AGFyZWFUZXgAc2VhcmNoVGV4ACRHbG9iYWxzAKurTQEAAAIAAABwAQAAEAAAAAAAAAAAAAAAoAEAAAAAAAAIAAAAAgAAALABAAAAAAAAwAEAAAgAAAAIAAAAAgAAALABAAAAAAAAc2NyZWVuU2l6ZUludgCrqwEAAwABAAIAAAAAAAAAAABzY3JlZW5TaXplAE1pY3Jvc29mdCAoUikgSExTTCBTaGFkZXIgQ29tcGlsZXIgMTAuMQCrSVNHTowAAAAFAAAACAAAAIAAAAAAAAAAAAAAAAMAAAAAAAAADw8AAIAAAAABAAAAAAAAAAMAAAABAAAADw8AAIAAAAACAAAAAAAAAAMAAAACAAAADw8AAIAAAAADAAAAAAAAAAMAAAADAAAAAwMAAIAAAAAEAAAAAAAAAAMAAAADAAAADAwAAFRFWENPT1JEAKurq09TR04sAAAAAQAAAAgAAAAgAAAAAAAAAAAAAAADAAAAAAAAAA8AAABTVl9UYXJnZXQAq6tTSERSrCcAAEAAAADrCQAAWQAABEaOIAAAAAAAAQAAAFoAAAMAYBAAAAAAAFoAAAMAYBAAAQAAAFoAAAMAYBAAAgAAAFgYAAQAcBAAAAAAAFVVAABYGAAEAHAQAAEAAABVVQAAWBgABABwEAACAAAAVVUAAGIQAAPyEBAAAAAAAGIQAAPyEBAAAQAAAGIQAAPyEBAAAgAAAGIQAAMyEBAAAwAAAGIQAAPCEBAAAwAAAGUAAAPyIBAAAAAAAGgAAAIHAAAAMgAADzIAEAAAAAAA5hoQAAMAAAACQAAAAACAPwAAgL8AAAAAAAAAAAJAAAAAAAAAAACAPwAAAAAAAAAASAAAC:IAEAAAAAAARgAQAAAAAABGfhAAAAAAAABgEAAAAAAAAUAAAAAAAAAxAAAHIgAQAAAAAAABQAAAAAAAABoAEAAAAAAAHwAEAxoAEAAAAAAAMQAAByIAEAAAAAAAAUAAAAAAAAAKABAAAAAAAB8ABAMaABAAAAAAADgAAAsyABAAAQAAAEaAIAAAAAAAAAAAAAJAAAAAAIC:AACAPwAAAAAAAAAANgAABUIAEAABAAAAAUAAAAAAgD82AAAFMgAQAAIAAADmGhAAAwAAADYAAAUSABAAAwAAAAFAAAAAAAAANgAABUIAEAACAAAAAUAAAAAAgL82AAAFIgAQAAAAAAABQAAAAACAPzAAAAExAAAHQgAQAAAAAAAqABAAAgAAAAFAAAAAAOBAMQAAB4IAEAAAAAAAAUAAAGZmZj8aABAAAAAAAAEAAAdCABAAAAAAADoAEAAAAAAAKgAQAAAAAAADAAADKgAQAAAAAAAAAAAHcgAQAAIAAABGAhAAAQAAAEYCEAACAAAAAAAACIIAEAACAAAAGgAQgEEAAAACAAAAAUAAAAAAgD9IAAAL8gAQAAMAAADGABAAAgAAABZ%EAAAAAAAAGAQAAAAAAABQAAAAAAAAA8AAAoiABAAAAAAABYFEAADAAAAAkAAAAAAAD8AAAA:AAAAAAAAAAAWAAABMQAAB0IAEAAAAAAAAUAAAGZmZj8KABAAAwAAAAEAAAdCABAAAAAAACoAEAAAAAAAAUAAAAAAgD8AAAAHEgAQAAEAAAAqABAAAAAAACoAEAACAAAAEgAAATYAAAUSABAAAQAAAAFAAAAAAAAANgAABSIAEAAAAAAAAUAAAAAAAAA2AAAFEgAQAAMAAAABQAAAAAAAABUAAAE4AAALYgAQAAIAAAAGgSAAAAAAAAAAAAACQAAAAAAAAAAAgD8AAIC:AAAAADYAAAWCABAAAgAAAAFAAAAAAIA:NgAABTIAEAAEAAAA5hoQAAMAAAA2AAAFEgAQAAUAAAAKABAAAwAAADYAAAVCABAABAAAAAFAAAAAAIC:NgAABUIAEAAAAAAAAUAAAAAAgD8wAAABMQAAB4IAEAAAAAAAKgAQAAQAAAABQAAAAADgQDEAAAcSABAAAgAAAAFAAABmZmY:KgAQAAAAAAABAAAHggAQAAAAAAA6ABAAAAAAAAoAEAACAAAAAwAAAzoAEAAAAAAAAAAAB3IAEAAEAAAAlgcQAAIAAABGAhAABAAAAAAAAAiCABAABAAAABoAEIBBAAAABAAAAAFAAAAAAIA:SAAAC:IAEAAFAAAAxgAQAAQAAAAWfhAAAAAAAABgEAAAAAAAAUAAAAAAAAAPAAAKQgAQAAAAAAAWBRAABQAAAAJAAAAAAAA:AAAAPwAAAAAAAAAAFgAAAQAAAAeCABAAAAAAAAoAEAABAAAAKgAQAAQAAAAxAAAHggAQAAAAAAABQAAAAAAAQDoAEAAAAAAAHwAEAzoAEAAAAAAAAAAACCIAEAABAAAACgAQgEEAAAABAAAAAUAAAAAAgD4yAAAPwgAQAAEAAACmChAABAAAAAJAAAAAAAAAAAAAAAAAgD8AAIC:AkAAAAAAAAAAAAAAAAAAAAAAgL4yAAAK8gAQAAIAAAAWDhAAAQAAAEaEIAAAAAAAAAAAAOYeEAADAAAAMgAADfIAEAACAAAARoQgAAAAAAAAAAAAAkAAAAAAgL8AAAAAAACAPwAAAABGDhAAAgAAADIAAA:yABAAAgAAAEYOEAACAAAAAkAAAAAAgD8AAIC:AACAPwAAgL8CQAAAAAAAAAAAgD8AAAAAAACAP0gAAAvyABAAAwAAAEYAEAACAAAARn4QAAAAAAAAYBAAAAAAAAFAAAAAAAAASAAAC:IAEAACAAAA5goQAAIAAACGdxAAAAAAAABgEAAAAAAAAUAAAAAAAAA2AAAFQgAQAAMAAAAKABAAAgAAADIAAA%iABAAAQAAAAYIEAADAAAAAkAAAAAAAAAAAKBAAAAAAAAAoEACQAAAAAAAAAAAcMAAAAAAAABwwDgAAAhSABAAAgAAAFYHEICBAAAAAQAAAAYCEAADAAAANgAABSIAEAACAAAAGgAQAAMAAAAAAAAK8gAQAAIAAABGDhAAAgAAAAJAAAAAAAA:AAAAPwAAAD8AAAA:QQAABfIAEAACAAAARg4QAAIAAAAyAAAMogAQAAEAAABWDRAAAgAAAAJAAAAAAAAAAAAAQAAAAAAAAABABggQAAIAAAAdAAAKYgAQAAAAAABWBhAAAAAAAAJAAAAAAAAAZmZmP2ZmZj8AAAAANwAADDIAEAACAAAAlgUQAAAAAAACQAAAAAAAAAAAAAAAAAAAAAAAANYFEAABAAAAMgAADGIAEAAAAAAABgEQAAIAAAACQAAAAAAAAAAAoEEAAKBBAAAAAAYCEAABAAAAMgAAD2IAEAAAAAAAVgYQAAAAAAACQAAAAAAAAM3MzDuhDuo6AAAAAAJAAAAAAAAAzcwAP6EOajoAAAAASAAAC:IAEAABAAAAlgUQAAAAAABGfhAAAQAAAABgEAABAAAAAUAAAAAAAAASAAABNgAACDIAEAABAAAAAkAAAAAAAAAAAAAAAAAAAAAAAAAVAAABMgAACiIAEAAAAAAACoAgAAAAAAAAAAAAAUAAAAAAgD4qEBAAAwAAADYAAAcyABAAAgAAAEaAIIBBAAAAAAAAAAAAAAA2AAAFQgAQAAIAAAABQAAAAACAPzYAAAUSABAAAwAAABoAEAAAAAAANgAABSIAEAADAAAAOhAQAAMAAAA2AAAFQgAQAAAAAAAKABAABQAAADYAAAVCABAAAwAAAAFAAAAAAIC:NgAABUIAEAABAAAAAUAAAAAAgD8wAAABMQAAB4IAEAABAAAAKgAQAAMAAAABQAAAAADgQDEAAAeCABAAAgAAAAFAAABmZmY:KgAQAAEAAAABAAAHggAQAAEAAAA6ABAAAQAAADoAEAACAAAAAwAAAzoAEAABAAAAAAAAB3IAEAADAAAARgIQAAIAAABGAhAAAwAAAAAAAAiCABAAAwAAABoAEIBBAAAAAwAAAAFAAAAAAIA:SAAAC:IAEAAEAAAAxgAQAAMAAABGfhAAAAAAAABgEAAAAAAAAUAAAAAAAAAyAAAJggAQAAEAAAAKABAABAAAAAFAAAAAAKBAAUAAAAAAcMA4AAAIEgAQAAQAAAA6ABCAgQAAAAEAAAAKABAABAAAAAAAAAoyABAABAAAAEYAEAAEAAAAAkAAAAAAAD8AAAA:AAAAAAAAAABBAAAFwgAQAAAAAABWARAABAAAAA8AAApCABAAAQAAALYPEAAAAAAAAkAAAAAAAD8AAAA:AAAAAAAAAAAWAAABMgAADTIAEAACAAAARoAgAAAAAAAAAAAAAkAAAAAAgD8AAAAAAAAAAAAAAADmGhAAAwAAAAAAAAhCABAAAgAAABoAEIBBAAAAAgAAAAFAAAAAAIA:SAAAC:IAEAACAAAAhgAQAAIAAABGfhAAAAAAAABgEAAAAAAAAUAAAAAAAAAxAAAHggAQAAAAAAABQAAAAAAAAAoAEAACAAAAHwAEAzoAEAAAAAAANgAABjIAEAACAAAARoAgAAAAAAAAAAAANgAABUIAEAACAAAAAUAAAAAAgD82AAAFEgAQAAQAAAAaABAAAAAAADYAAAUiABAABAAAADoQEAADAAAANgAABRIAEAAFAAAAKgAQAAAAAAA2AAAFQgAQAAQAAAABQAAAAACAvzYAAAWCABAAAAAAAAFAAAAAAIA:MAAAATEAAAeCABAAAQAAACoAEAAEAAAAAUAAAAAA4EAxAAAHggAQAAIAAAABQAAAZmZmPzoAEAAAAAAAAQAAB4IAEAABAAAAOgAQAAEAAAA6ABAAAgAAAAMAAAM6ABAAAQAAAAAAAAdyABAABAAAAEYCEAACAAAARgIQAAQAAAAAAAAIggAQAAQAAAAaABCAQQAAAAQAAAABQAAAAACAP0gAAAvyABAABgAAAMYAEAAEAAAARn4QAAAAAAAAYBAAAAAAAAFAAAAAAAAAMgAACYIAEAABAAAACgAQAAYAAAABQAAAAACgQAFAAAAAAHDAOAAACBIAEAAGAAAAOgAQgIEAAAABAAAACgAQAAYAAAAAAAAKwgAQAAUAAAAGBBAABgAAAAJAAAAAAAAAAAAAAAAAAD8AAAA:QQAABTIAEAAFAAAAtg8QAAUAAAAPAAAKggAQAAAAAAAWBRAABQAAAAJAAAAAAAA:AAAAPwAAAAAAAAAAFgAAATEAAAciABAAAAAAAAFAAABmZmY:CgAQAAUAAAABAAAHIgAQAAAAAAAaABAAAAAAAAFAAAAAAIA:AAAAByIAEAADAAAAGgAQAAAAAAAqABAABAAAABIAAAE2AAAFIgAQAAMAAAABQAAAAAAAADYAAAWCABAAAAAAAAFAAAAAAAAAFQAAAQAAAAciABAAAAAAABoAEAADAAAAKgAQAAMAAAAxAAAHIgAQAAAAAAABQAAAAAAAQBoAEAAAAAAAHwAEAxoAEAAAAAAANgAABhIAEAADAAAAKgAQgEEAAAADAAAAMgAACvIAEAACAAAABgUQAAMAAABGhCAAAAAAAAAAAADmHhAAAwAAADIAAA3yABAABAAAAEaEIAAAAAAAAAAAAAJAAAAAAIC:AAAAAAAAAAAAAIC:RgQQAAIAAAAyAAAP8gAQAAQAAABGDhAABAAAAAJAAAAAAIA:AACAvwAAgD8AAIC:AkAAAAAAAAAAAIA:AAAAAAAAgD9IAAAL8gAQAAUAAABGABAABAAAAEZ%EAAAAAAAAGAQAAAAAAABQAAAAAAAAEgAAAvyABAABAAAAOYKEAAEAAAAlnwQAAAAAAAAYBAAAAAAAAFAAAAAAAAAMgAADTIAEAACAAAARoAgAAAAAAAAAAAAAkAAAAAAgD8AAAAAAAAAAAAAAADmChAAAgAAAAAAAAhCABAAAgAAABoAEIBBAAAAAgAAAAFAAAAAAIA:SAAAC:IAEAACAAAAhgAQAAIAAABGfhAAAAAAAABgEAAAAAAAAUAAAAAAAAA2AAAFEgAQAAQAAAAaABAABQAAADYAAAWiABAABAAAAFYBEAACAAAAMgAADGIAEAAAAAAABgEQAAQAAAACQAAAAAAAAAAAAEAAAABAAAAAAKYLEAAEAAAAHQAAB0IAEAABAAAAKgAQAAEAAAABQAAAZmZmPx0AAAeCABAAAAAAADoAEAAAAAAAAUAAAGZmZj83AAAJEgAQAAIAAAAqABAAAQAAAAFAAAAAAAAAGgAQAAAAAAA3AAAJIgAQAAIAAAA6ABAAAAAAAAFAAAAAAAAAKgAQAAAAAAAyAAAMYgAQAAAAAAAGARAAAgAAAAJAAAAAAAAAAACgQQAAoEEAAAAApgkQAAMAAAAyAAAPYgAQAAAAAABWBhAAAAAAAAJAAAAAAAAAzczMO6EO6joAAAAAAkAAAAAAAADNzAA:oQ5qOgAAAABIAAAL8gAQAAIAAACWBRAAAAAAAEZ%EAABAAAAAGAQAAEAAAABQAAAAAAAAAAAAAcyABAAAQAAAEYAEAABAAAAFgUQAAIAAAAVAAABGAAACCIAEAAAAAAAGgAQgEEAAAABAAAACgAQAAEAAAAfAAQDGgAQAAAAAAA2AAAFogAQAAAAAAAGFBAAAAAAADYAAAVCABAAAAAAAAFAAAAAAIA:NgAABRIAEAACAAAAAUAAAAAAAAAwAAABMQAAB0IAEAABAAAAChAQAAIAAAAaABAAAAAAADEAAAeCABAAAQAAAAFAAABd:lM:KgAQAAAAAAABAAAHQgAQAAEAAAA6ABAAAQAAACoAEAABAAAAGAAAB4IAEAABAAAACgAQAAIAAAABQAAAAAAAAAEAAAdCABAAAQAAADoAEAABAAAAKgAQAAEAAAAfAAQDKgAQAAEAAAAyAAAPwgAQAAEAAABWDRAAAAAAAAJAAAAAAAAAAAAAAAAAgD8AAIC:AkAAAAAAAAAAAAAAAAAAAAAAgD9IAAAL8gAQAAIAAADmChAAAQAAAEZ%EAAAAAAAAGAQAAAAAAABQAAAAAAAADIAAA0yABAAAwAAAEaAIAAAAAAAAAAAAAJAAAAAAADAAAAAgAAAAAAAAAAA1gUQAAAAAAA2AAAFQgAQAAMAAAAaABAAAgAAADYAAAXiABAAAAAAAAYGEAADAAAABwAAARIAAAECAAABFQAAARYAAAE2AAAFwgAQAAAAAACmBhAAAAAAADYAAAUiABAAAAAAAAoAEAACAAAAMgAAD2IAEAAAAAAAVgYQAAAAAAACQAAAAAAAAAAAAD8AAADAAAAAAAJAAAAAAAAAAAAAPAAAAkAAAAAASAAAC:IAEAACAAAAlgUQAAAAAABGfhAAAgAAAABgEAACAAAAAUAAAAAAAAAyAAAJIgAQAAAAAAAKABAAAgAAAAFAAAACgQDAAUAAAAAAUEAyAAAKEgAQAAIAAAAKgCAAAAAAAAAAAAAaABAAAAAAADoAEAAAAAAAAAAACCIAEAACAAAAGhAQgEEAAAABAAAAAUAAAAAAgD9IAAAL8gAQAAMAAABGABAAAgAAAEZ%EAAAAAAAAGAQAAAAAAABQAAAAAAAADYAAAWiABAAAAAAAKYeEAAAAAAANgAABUIAEAAAAAAAAUAAAAAAgD82AAAFEgAQAAQAAAABQAAAAAAAADAAAAExAAAHQgAQAAEAAAAaABAAAAAAABoQEAACAAAAMQAAB4IAEAABAAAAAUAAAF3%Uz8qABAAAAAAAAEAAAdCABAAAQAAADoAEAABAAAAKgAQAAEAAAAYAAAHggAQAAEAAAAKABAABAAAAAFAAAAAAAAAAQAAB0IAEAABAAAAOgAQAAEAAAAqABAAAQAAAB8ABAMqABAAAQAAADIAAA:CABAAAQAAAFYNEAAAAAAAAkAAAAAAAAAAAAAAAACAPwAAgL8CQAAAAAAAAAAAAAAAAAAAAACAP0gAAAvyABAABAAAAOYKEAABAAAARn4QAAAAAAAAYBAAAAAAAAFAAAAAAAAAMgAADTIAEAAFAAAARoAgAAAAAAAAAAAAAkAAAAAAAEAAAAAAAAAAAAAAAADWBRAAAAAAADYAAAVCABAABQAAABoAEAAEAAAANgAABeIAEAAAAAAABgYQAAUAAAAHAAABEgAAAQIAAAEVAAABFgAAATYAAAXCABAAAAAAAKYGEAAAAAAANgAABSIAEAAAAAAACgAQAAQAAAAyAAAPYgAQAAAAAABWBhAAAAAAAAJAAAAAAAAAAAAAPwAAAMAAAAAAAkAAAAAAAAAAAAY:AAACQAAAAABIAAAL8gAQAAQAAACWBRAAAAAAAEZ%EAACAAAAAGAQAAIAAAABQAAAAAAAADIAAAkiABAAAAAAAAoAEAAEAAAAAUAAAAKBAMABQAAAAABQQDIAAAtCABAAAgAAAAqAIIBBAAAAAAAAAAAAAAAaABAAAAAAADoAEAAAAAAAMgAAC:IAEAAEAAAApoogAAAAAAAAAAAAJgIQAAIAAAAGEBCAQQAAAAMAAAAAAAAK8gAQAAQAAABGDhAABAAAAAJAAAAAAAA:AAAAPwAAAD8AAAA:QQAABfIAEAAEAAAARg4QAAQAAABLAAAGYgAQAAAAAAD2DhCAgQAAAAQAAAA2AAAFggAQAAIAAAAaEBAAAQAAADIAAA0yABAABQAAAEaAIAAAAAAAAAAAAAJAAAAAAIA:AAAAAAAAAAAAAAAA5goQAAIAAAAAAAAIQgAQAAUAAAAaABCAQQAAAAUAAAABQAAAAACAP0gAAAvyABAABQAAAIYAEAAFAAAAFn4QAAAAAAAAYBAAAAAAAAFAAAAAAAAANgAABRIAEAAFAAAACgAQAAMAAAAyAAAPwgAQAAEAAAAGBBAABQAAAAJAAAAAAAAAAAAAAAAAgEAAAIBAAkAAAAAAAAAAAAAAAAAAPwAAAD9BAAAFwgAQAAEAAACmDhAAAQAAADIAAAxiABAAAAAAAKYLEAABAAAAAkAAAAAAAAAAAIBBAACAQQAAAABWBhAAAAAAADIAAA9iABAAAAAAAFYGEAAAAAAAAkAAAAAAAADNzMw7oQ7qOgAAAAACQAAAAAAAAM3MTDuhDmo6AAAAAEgAAAvyABAAAwAAAJYFEAAAAAAARn4QAAEAAAAAYBAAAQAAAAFAAAAAAAAAHQAACfIAEAAEAAAARg4QgIEAAAAEAAAAtgsQgIEAAAAEAAAAAQAACvIAEAAEAAAARg4QAAQAAAACQAAAAACAPwAAgD8AAEA:AABAPwAAAAciABAAAAAAABoAEAAEAAAACgAQAAQAAAAOAAAHYgAQAAAAAACmCxAABAAAAFYFEAAAAAAANgAABaIAEAACAAAA9h8QAAMAAAAyAAANMgAQAAQAAABGgCAAAAAAAAAAAAACQAAAAAAAAAAAgD8AAAAAAAAAAEYAEAACAAAAAAAACEIAEAAEAAAAGgAQgEEAAAAEAAAAAUAAAAAAgD9IAAAL8gAQAAQAAACGABAABAAAAEZ%EAAAAAAAAGAQAAAAAAABQAAAAAAAADIAAAqCABAAAAAAABoAEIBBAAAAAAAAAAoAEAAEAAAAAUAAAAAAgD8AAAAIMgAQAAQAAADmChAAAgAAAEaAIAAAAAAAAAAAAAAAAAhCABAABAAAABoAEIBBAAAABAAAAAFAAAAAAIA:SAAAC:IAEAAEAAAAhgAQAAQAAABGfhAAAAAAAABgEAAAAAAAAUAAAAAAAAAyIAAKEgAQAAQAAAAqABCAQQAAAAAAAAAKABAABAAAADoAEAAAAAAAMgAADTIAEAAFAAAARoAgAAAAAAAAAAAAAkAAAAAAAAAAAADAAAAAAAAAAABGABAAAgAAAAAAAAhCABAABQAAABoAEIBBAAAABQAAAAFAAAAAAIA:SAAAC:IAEAAFAAAAhgAQAAUAAABGfhAAAAAAAABgEAAAAAAAAUAAAAAAAAAyAAAKIgAQAAAAAAAaABCAQQAAAAAAAAAKABAABQAAAAFAAAAAAIA:MgAADTIAEAACAAAARoAgAAAAAAAAAAAAAkAAAAAAgD8AAADAAAAAAAAAAADmChAAAgAAAAAAAAhCABAAAgAAABoAEIBBAAAAAgAAAAFAAAAAAIA:SAAAC:IAEAACAAAAhgAQAAIAAABGfhAAAAAAAABgEAAAAAAAAUAAAAAAAAAyIAAKIgAQAAQAAAAqABCAQQAAAAAAAAAKABAAAgAAABoAEAAAAAAAOAAABzIgEAAAAAAARgAQAAMAAABGABAABAAAABIAAAE2AAAFMiAQAAAAAABGABAAAQAAADYAAAUSABAAAAAAAAFAAAAAAAAAFQAAARIAAAE2AAAIMiAQAAAAAAACQAAAAAAAAAAAAAAAAAAAAAAAABUAAAExAAAHEgAQAAAAAAABQAAAAAAAAAoAEAAAAAAAHwAEAwoAEAAAAAAANgAABTIAEAAAAAAAFhUQAAEAAAA2AAAFQgAQAAAAAAABQAAAAACAPzYAAAUSABAAAQAAAAFAAAAAAAAAMAAAATEAAAeCABAAAAAAACoQEAACAAAACgAQAAAAAAAxAAAHEgAQAAIAAAABQAAAXf5TPyoAEAAAAAAAAQAAB4IAEAAAAAAAOgAQAAAAAAAKABAAAgAAABgAAAcSABAAAgAAAAoAEAABAAAAAUAAAAAAAAABAAAHggAQAAAAAAA6ABAAAAAAAAoAEAACAAAAHwAEAzoAEAAAAAAAMgAADzIAEAACAAAAFgUQAAAAAAACQAAAAACAPwAAgL8AAAAAAAAAAAJAAAAAAAAAAACAPwAAAAAAAAAASAAAC:IAEAABAAAARgAQAAIAAAAWfhAAAAAAAABgEAAAAAAAAUAAAAAAAAAyAAANMgAQAAIAAABGgCAAAAAAAAAAAAACQAAAAAAAgAAAAMAAAAAAAAAAABYFEAAAAAAANgAABUIAEAACAAAAGgAQAAEAAAA2AAAFcgAQAAAAAAAWBhAAAgAAAAcAAAESAAABAgAAARUAAAEWAAABNgAABSIAEAABAAAAKgAQAAAAAAAyAAAPYgAQAAAAAAAGARAAAQAAAAJAAAAAAAAAAAAAPwAAAMAAAAAAAkAAAAAAAAAAAAA8AAACQAAAAABIAAAL8gAQAAEAAACWBRAAAAAAAEZ%EAACAAAAAGAQAAIAAAABQAAAAAAAADIAAAkiABAAAAAAAAoAEAABAAAAAUAAAAKBAMABQAAAAABQQDIAAAoSABAAAAAAABqAIAAAAAAAAAAAABoAEAAAAAAACgAQAAAAAAAAAAAIIgAQAAEAAAAKABCAQQAAAAAAAAABQAAAAACAPzYAAAUSABAAAQAAAAoQEAAAAAAASAAAC:IAEAABAAAARgAQAAEAAABGfhAAAAAAAABgEAAAAAAAAUAAAAAAAAA2AAAFUgAQAAEAAAD2HhAAAQAAADYAAAWCABAAAQAAAAFAAAAAAIA:NgAABRIAEAACAAAAAUAAAAAAAAAwAAABMQAABxIAEAADAAAACgAQAAEAAAA6EBAAAgAAADEAAAciABAAAwAAAAFAAABd:lM:OgAQAAEAAAABAAAHEgAQAAMAAAAaABAAAwAAAAoAEAADAAAAGAAAByIAEAADAAAACgAQAAIAAAABQAAAAAAAAAEAAAcSABAAAwAAABoAEAADAAAACgAQAAMAAAAfAAQDCgAQAAMAAAAyAAAPMgAQAAMAAAAmChAAAQAAAAJAAAAAAIA:AACAvwAAAAAAAAAAAkAAAAAAAAAAAIA:AAAAAAAAAABIAAAL8gAQAAIAAABGABAAAwAAABZ%EAAAAAAAAGAQAAAAAAABQAAAAAAAADIAAA0yABAAAwAAAEaAIAAAAAAAAAAAAAJAAAAAAAAAAAAAQAAAAAAAAAAAJgoQAAEAAAA2AAAFQgAQAAMAAAAaABAAAgAAADYAAAXSABAAAQAAAFYIEAADAAAABwAAARIAAAECAAABFQAAARYAAAE2AAAFIgAQAAIAAAA6ABAAAQAAADIAAA:CABAAAQAAAAYEEAACAAAAAkAAAAAAAAAAAAAAAAAAPwAAAMACQAAAAAAAAAAAAAAAAAY:AAACQEgAAAvyABAAAgAAAOYKEAABAAAARn4QAAIAAAAAYBAAAgAAAAFAAAAAAAAAMgAACUIAEAABAAAACgAQAAIAAAABQAAAAoEAwAFAAAAAAFBAMgAACyIAEAAAAAAAGoAggEEAAAAAAAAAAAAAACoAEAABAAAACgAQAAEAAAAyAAAL8gAQAAIAAAD2jyAAAAAAAAAAAAAWARAAAAAAAFYVEIBBAAAAAwAAAAAAAAryABAAAgAAAEYOEAACAAAAAkAAAAAAAD8AAAA:AAAAPwAAAD9BAAAF8gAQAAIAAABGDhAAAgAAAEsAAAZSABAAAQAAAPYOEICBAAAAAgAAADYAAAVCABAAAAAAAAoQEAAAAAAAMgAADTIAEAADAAAARoAgAAAAAAAAAAAAAkAAAAAAAAAAAIA:AAAAAAAAAABmChAAAAAAAAAAAAhCABAAAwAAABoAEIBBAAAAAwAAAAFAAAAAAIA:SAAAC:IAEAADAAAAhgAQAAMAAABGfhAAAAAAAABgEAAAAAAAAUAAAAAAAAA2AAAFEgAQAAMAAAAaABAAAQAAADIAAA%iABAAAQAAAAYEEAADAAAAAkAAAAAAAAAAAIBAAAAAAAAAgEACQAAAAAAAAAAAAD8AAAAAAAAAP0EAAAWiABAAAQAAAFYNEAABAAAAMgAADDIAEAABAAAA1gUQAAEAAAACQAAAAACAQQAAgEEAAAAAAAAAAIYAEAABAAAAMgAADzIAEAABAAAARgAQAAEAAAACQAAAzczMO6EO6joAAAAAAAAAAAJAAADNzEw7oQ5qOgAAAAAAAAAASAAAC:IAEAABAAAARgAQAAEAAABGfhAAAQAAAABgEAABAAAAAUAAAAAAAAAdAAAJ8gAQAAIAAABGDhCAgQAAAAIAAAC2CxCAgQAAAAIAAAABAAAK8gAQAAIAAABGDhAAAgAAAAJAAAAAAIA:AACAPwAAQD8AAEA:AAAAB0IAEAAAAAAAGgAQAAIAAAAKABAAAgAAAA4AAAfCABAAAQAAAKYOEAACAAAApgoQAAAAAAA2AAAFggAQAAAAAAAqEBAAAwAAADIAAA0yABAAAgAAAEaAIAAAAAAAAAAAAAJAAAAAAIA:AAAAAAAAAAAAAAAANg8QAAAAAAAAAAAIQgAQAAIAAAAaABCAQQAAAAIAAAABQAAAAACAP0gAAAvyABAAAgAAAIYAEAACAAAARn4QAAAAAAAAYBAAAAAAAAFAAAAAAAAAMgAACkIAEAAAAAAAKgAQgEEAAAABAAAAGgAQAAIAAAABQAAAAACAPwAAAAgyABAAAgAAAHYPEAAAAAAARoAgAAAAAAAAAAAAAAAACEIAEAACAAAAGgAQgEEAAAACAAAAAUAAAAAAgD9IAAAL8gAQAAIAAACGABAAAgAAAEZ%EAAAAAAAAGAQAAAAAAABQAAAAAAAADIgAApCABAAAgAAADoAEIBBAAAAAQAAABoAEAACAAAAKgAQAAAAAAAyAAANMgAQAAMAAABGgCAAAAAAAAAAAAACQAAAAAAAwAAAAAAAAAAAAAAAADYPEAAAAAAAAAAACEIAEAADAAAAGgAQgEEAAAADAAAAAUAAAAAAgD9IAAAL8gAQAAMAAACGABAAAwAAAEZ%EAAAAAAAAGAQAAAAAAABQAAAAAAAADIAAAoSABAAAAAAACoAEIBBAAAAAQAAABoAEAADAAAAAUAAAAAAgD8yAAANMgAQAAMAAABGgCAAAAAAAAAAAAACQAAAAAAAwAAAgD8AAAAAAAAAAHYPEAAAAAAAAAAACEIAEAADAAAAGgAQgEEAAAADAAAAAUAAAAAAgD9IAAAL8gAQAAMAAACGABAAAwAAAEZ%EAAAAAAAAGAQAAAAAAABQAAAAAAAADIgAAqCABAAAgAAADoAEIBBAAAAAQAAABoAEAADAAAACgAQAAAAAAA4AAAHwiAQAAAAAAAGBBAAAQAAAKYOEAACAAAAEgAAATYAAAjCIBAAAAAAAAJAAAAAAAAAAAAAAAAAAAAAAAAAFQAAAT4AAAFTVEFUdAAAAFgBAAAHAAAAAAAAAAYAAACfAAAAAAAAABAAAAATAAAADwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACMAAAAAAAAAAAAAAAAAAABGAAAAAwAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";
kha_Shaders.smaa_blend_weight_vertData0 = "s1684:AXBvcwAAASRHbG9iYWxzAAACc2NyZWVuU2l6ZQAAAAAACAAAAAIBc2NyZWVuU2l6ZUludgAIAAAACAAAAAIBRFhCQ:tJQ9%XG8PQa3ZkPKHRRTEBAAAAsAQAAAUAAAA0AAAAIAEAAFQBAAAMAgAANAQAAFJERUbkAAAAAQAAAEgAAAABAAAAHAAAAAAE:v8AAQAAugAAADwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAJEdsb2JhbHMAq6urPAAAAAIAAABgAAAAEAAAAAAAAAAAAAAAkAAAAAAAAAAIAAAAAgAAAJwAAAAAAAAArAAAAAgAAAAIAAAAAgAAAJwAAAAAAAAAc2NyZWVuU2l6ZQCrAQADAAEAAgAAAAAAAAAAAHNjcmVlblNpemVJbnYATWljcm9zb2Z0IChSKSBITFNMIFNoYWRlciBDb21waWxlciAxMC4xAKurSVNHTiwAAAABAAAACAAAACAAAAAAAAAAAAAAAAMAAAAAAAAAAwMAAFRFWENPT1JEAKurq09TR06wAAAABgAAAAgAAACYAAAAAAAAAAAAAAADAAAAAAAAAA8AAACYAAAAAQAAAAAAAAADAAAAAQAAAA8AAACYAAAAAgAAAAAAAAADAAAAAgAAAA8AAACYAAAAAwAAAAAAAAADAAAAAwAAAAMMAACYAAAABAAAAAAAAAADAAAAAwAAAAwDAAChAAAAAAAAAAEAAAADAAAABAAAAA8AAABURVhDT09SRABTVl9Qb3NpdGlvbgCrq6tTSERSIAIAAEAAAQCIAAAAWQAABEaOIAAAAAAAAQAAAF8AAAMyEBAAAAAAAGUAAAPyIBAAAAAAAGUAAAPyIBAAAQAAAGUAAAPyIBAAAgAAAGUAAAMyIBAAAwAAAGUAAAPCIBAAAwAAAGcAAATyIBAABAAAAAEAAABoAAACAwAAADIAAA:yABAAAAAAAEYUEAAAAAAAAkAAAAAAAD8AAAA:AAAAPwAAAD8CQAAAAAAAPwAAAD8AAAA:AAAAPzIAAA3yABAAAQAAAKaPIAAAAAAAAAAAAAJAAAAAAIC%AACgPwAAAL4AAAC%hg0QAAAAAAA2AAAF8iAQAAAAAACGDRAAAQAAADIAAA3yABAAAgAAAOaOIAAAAAAAAAAAAAJAAAAAAAC%AACAvgAAAL4AAKA:Rg4QAAAAAAA4AAAIMiAQAAMAAADmChAAAAAAAEaAIAAAAAAAAAAAADYAAAXyIBAAAQAAAEYOEAACAAAANgAABcIAEAABAAAAVg0QAAIAAAAyAAAN8iAQAAIAAACmjyAAAAAAAAAAAAACQAAAAAAAwgAAAEIAAADCAAAAQkYOEAABAAAAMgAAD8IgEAADAAAABhQQAAAAAAACQAAAAAAAAAAAAAAAAAA:AAAAPwJAAAAAAAAAAAAAAAAAAD8AAAA:NgAABTIgEAAEAAAARhAQAAAAAAA2AAAIwiAQAAQAAAACQAAAAAAAAAAAAAAAAAA:AACAPz4AAAFTVEFUdAAAAAwAAAADAAAAAAAAAAcAAAAGAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";
kha_Shaders.smaa_edge_detect_fragData0 = "s2635:AAJfY29sb3JUZXhfc2FtcGxlcgAAY29sb3JUZXgAAABEWEJDGlOFKsrBMllxtOQiZOI5xwEAAACYBwAABQAAADQAAADcAAAAWAEAAIwBAAAcBwAAUkRFRqAAAAAAAAAAAAAAAAIAAAAcAAAAAAT::wABAAB3AAAAXAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAABuAAAAAgAAAAUAAAAEAAAA:::::wAAAAABAAAADQAAAF9jb2xvclRleF9zYW1wbGVyAGNvbG9yVGV4AE1pY3Jvc29mdCAoUikgSExTTCBTaGFkZXIgQ29tcGlsZXIgMTAuMQCrSVNHTnQAAAAEAAAACAAAAGgAAAAAAAAAAAAAAAMAAAAAAAAADw8AAGgAAAABAAAAAAAAAAMAAAABAAAADw8AAGgAAAACAAAAAAAAAAMAAAACAAAADw8AAGgAAAADAAAAAAAAAAMAAAADAAAAAwMAAFRFWENPT1JEAKurq09TR04sAAAAAQAAAAgAAAAgAAAAAAAAAAAAAAADAAAAAAAAAA8AAABTVl9UYXJnZXQAq6tTSERSiAUAAEAAAABiAQAAWgAAAwBgEAAAAAAAWBgABABwEAAAAAAAVVUAAGIQAAPyEBAAAAAAAGIQAAPyEBAAAQAAAGIQAAPyEBAAAgAAAGIQAAMyEBAAAwAAAGUAAAPyIBAAAAAAAGgAAAIFAAAASAAAC:IAEAAAAAAARhAQAAMAAABGfhAAAAAAAABgEAAAAAAAAUAAAAAAAABIAAAL8gAQAAEAAABGEBAAAAAAAEZ%EAAAAAAAAGAQAAAAAAABQAAAAAAAAAAAAAhyABAAAQAAAEYCEAAAAAAARgIQgEEAAAABAAAANAAACYIAEAAAAAAAGgAQgIEAAAABAAAACgAQgIEAAAABAAAANAAACBIAEAABAAAAKgAQgIEAAAABAAAAOgAQAAAAAABIAAAL8gAQAAIAAADmGhAAAAAAAEZ%EAAAAAAAAGAQAAAAAAABQAAAAAAAAAAAAAhyABAAAgAAAEYCEAAAAAAARgIQgEEAAAACAAAANAAACYIAEAAAAAAAGgAQgIEAAAACAAAACgAQgIEAAAACAAAANAAACCIAEAABAAAAKgAQgIEAAAACAAAAOgAQAAAAAAAdAAAKwgAQAAEAAAAGBBAAAQAAAAJAAAAAAAAAAAAAAM3MzD3NzMw9AQAACsIAEAABAAAApg4QAAEAAAACQAAAAAAAAAAAAAAAAIA:AACAPw8AAAqCABAAAAAAAOYKEAABAAAAAkAAAAAAgD8AAIA:AAAAAAAAAAAYAAAHggAQAAAAAAA6ABAAAAAAAAFAAAAAAAAADQAEAzoAEAAAAAAASAAAC:IAEAACAAAARhAQAAEAAABGfhAAAAAAAABgEAAAAAAAAUAAAAAAAAAAAAAIcgAQAAIAAABGAhAAAAAAAEYCEIBBAAAAAgAAADQAAAmCABAAAAAAABoAEICBAAAAAgAAAAoAEICBAAAAAgAAADQAAAgSABAAAgAAACoAEICBAAAAAgAAADoAEAAAAAAASAAAC:IAEAADAAAA5hoQAAEAAABGfhAAAAAAAABgEAAAAAAAAUAAAAAAAAAAAAAIcgAQAAMAAABGAhAAAAAAAEYCEIBBAAAAAwAAADQAAAmCABAAAAAAABoAEICBAAAAAwAAAAoAEICBAAAAAwAAADQAAAgiABAAAgAAACoAEICBAAAAAwAAADoAEAAAAAAANAAABzIAEAACAAAARgAQAAEAAABGABAAAgAAAEgAAAvyABAAAwAAAEYQEAACAAAARn4QAAAAAAAAYBAAAAAAAAFAAAAAAAAAAAAACHIAEAADAAAARgIQAAAAAABGAhCAQQAAAAMAAAA0AAAJggAQAAAAAAAaABCAgQAAAAMAAAAKABCAgQAAAAMAAAA0AAAIEgAQAAMAAAAqABCAgQAAAAMAAAA6ABAAAAAAAEgAAAvyABAABAAAAOYaEAACAAAARn4QAAAAAAAAYBAAAAAAAAFAAAAAAAAAAAAACHIAEAAAAAAARgIQAAAAAABGAhCAQQAAAAQAAAA0AAAJEgAQAAAAAAAaABCAgQAAAAAAAAAKABCAgQAAAAAAAAA0AAAIIgAQAAMAAAAqABCAgQAAAAAAAAAKABAAAAAAADQAAAcyABAAAAAAAEYAEAACAAAARgAQAAMAAAA0AAAHEgAQAAAAAAAaABAAAAAAAAoAEAAAAAAAAAAAB2IAEAAAAAAABgEQAAEAAAAGARAAAQAAAB0AAAcyABAAAAAAAJYFEAAAAAAABgAQAAAAAAABAAAKMgAQAAAAAABGABAAAAAAAAJAAAAAAIA:AACAPwAAAAAAAAAAOAAABzIgEAAAAAAARgAQAAAAAADmChAAAQAAADYAAAjCIBAAAAAAAAJAAAAAAAAAAAAAAAAAAAAAAAAAPgAAAVNUQVR0AAAAJwAAAAUAAAAAAAAABQAAABsAAAAAAAAAAgAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";
kha_Shaders.smaa_edge_detect_vertData0 = "s1438:AXBvcwAAASRHbG9iYWxzAAABc2NyZWVuU2l6ZUludgAAAAAACAAAAAIBRFhCQ2MEpf99vnGzBoKQRJKZVrgBAAAADAQAAAUAAAA0AAAA:AAAADABAADQAQAAkAMAAFJERUbAAAAAAQAAAEgAAAABAAAAHAAAAAAE:v8AAQAAmAAAADwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAJEdsb2JhbHMAq6urPAAAAAEAAABgAAAAEAAAAAAAAAAAAAAAeAAAAAAAAAAIAAAAAgAAAIgAAAAAAAAAc2NyZWVuU2l6ZUludgCrqwEAAwABAAIAAAAAAAAAAABNaWNyb3NvZnQgKFIpIEhMU0wgU2hhZGVyIENvbXBpbGVyIDEwLjEASVNHTiwAAAABAAAACAAAACAAAAAAAAAAAAAAAAMAAAAAAAAAAwMAAFRFWENPT1JEAKurq09TR06YAAAABQAAAAgAAACAAAAAAAAAAAAAAAADAAAAAAAAAA8AAACAAAAAAQAAAAAAAAADAAAAAQAAAA8AAACAAAAAAgAAAAAAAAADAAAAAgAAAA8AAACAAAAAAwAAAAAAAAADAAAAAwAAAAMMAACJAAAAAAAAAAEAAAADAAAABAAAAA8AAABURVhDT09SRABTVl9Qb3NpdGlvbgCrq6tTSERSuAEAAEAAAQBuAAAAWQAABEaOIAAAAAAAAQAAAF8AAAMyEBAAAAAAAGUAAAPyIBAAAAAAAGUAAAPyIBAAAQAAAGUAAAPyIBAAAgAAAGUAAAMyIBAAAwAAAGcAAATyIBAABAAAAAEAAABoAAACAQAAADIAAA:yABAAAAAAAEYUEAAAAAAAAkAAAAAAAD8AAAC:AAAAPwAAAL8CQAAAAAAAPwAAAD8AAAA:AAAAPzIAAA3yIBAAAAAAAEaEIAAAAAAAAAAAAAJAAAAAAIC:AAAAAAAAAAAAAIA:Rg4QAAAAAAAyAAAN8iAQAAEAAABGhCAAAAAAAAAAAAACQAAAAACAPwAAAAAAAAAAAACAv0YOEAAAAAAAMgAADfIgEAACAAAARoQgAAAAAAAAAAAAAkAAAAAAAMAAAAAAAAAAAAAAAEBGDhAAAAAAADIAAA8yIBAAAwAAAEYQEAAAAAAAAkAAAAAAAD8AAAC:AAAAAAAAAAACQAAAAAAAPwAAAD8AAAAAAAAAADYAAAUyIBAABAAAAEYQEAAAAAAANgAACMIgEAAEAAAAAkAAAAAAAAAAAAAAAAAAPwAAgD8%AAABU1RBVHQAAAAIAAAAAQAAAAAAAAAGAAAABQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";
kha_Shaders.smaa_neighborhood_blend_fragData0 = "s3222:AAdfYmxlbmRUZXhfc2FtcGxlcgAAX2NvbG9yVGV4X3NhbXBsZXIAAV9zdmVsb2Nfc2FtcGxlcgACYmxlbmRUZXgAAGNvbG9yVGV4AAFzdmVsb2MAAiRHbG9iYWxzAAABc2NyZWVuU2l6ZUludgAAAAAACAAAAAIBRFhCQ2nwYwJEMKH0ejgyjDqG:TgBAAAA%AgAAAUAAAA0AAAACAIAAFQCAACIAgAAfAgAAFJERUbMAQAAAQAAAFQBAAAHAAAAHAAAAAAE::8AAQAApAEAAPwAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAADgEAAAMAAAAAAAAAAAAAAAAAAAABAAAAAQAAAAEAAAAgAQAAAwAAAAAAAAAAAAAAAAAAAAIAAAABAAAAAQAAADABAAACAAAABQAAAAQAAAD:::::AAAAAAEAAAANAAAAOQEAAAIAAAAFAAAABAAAAP::::8BAAAAAQAAAA0AAABCAQAAAgAAAAUAAAAEAAAA:::::wIAAAABAAAADQAAAEkBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAX2JsZW5kVGV4X3NhbXBsZXIAX2NvbG9yVGV4X3NhbXBsZXIAX3N2ZWxvY19zYW1wbGVyAGJsZW5kVGV4AGNvbG9yVGV4AHN2ZWxvYwAkR2xvYmFscwCrq0kBAAABAAAAbAEAABAAAAAAAAAAAAAAAIQBAAAAAAAACAAAAAIAAACUAQAAAAAAAHNjcmVlblNpemVJbnYAq6sBAAMAAQACAAAAAAAAAAAATWljcm9zb2Z0IChSKSBITFNMIFNoYWRlciBDb21waWxlciAxMC4xAElTR05EAAAAAgAAAAgAAAA4AAAAAAAAAAAAAAADAAAAAAAAAA8PAAA4AAAAAQAAAAAAAAADAAAAAQAAAAMDAABURVhDT09SRACrq6tPU0dOLAAAAAEAAAAIAAAAIAAAAAAAAAAAAAAAAwAAAAAAAAAPAAAAU1ZfVGFyZ2V0AKurU0hEUuwFAABAAAAAewEAAFkAAARGjiAAAAAAAAEAAABaAAADAGAQAAAAAABaAAADAGAQAAEAAABaAAADAGAQAAIAAABYGAAEAHAQAAAAAABVVQAAWBgABABwEAABAAAAVVUAAFgYAAQAcBAAAgAAAFVVAABiEAAD8hAQAAAAAABiEAADMhAQAAEAAABlAAAD8iAQAAAAAABoAAACBAAAAEgAAAvyABAAAAAAAEYQEAAAAAAARn4QAAAAAAAAYBAAAAAAAAFAAAAAAAAASAAAC:IAEAABAAAA5hoQAAAAAABGfhAAAAAAAABgEAAAAAAAAUAAAAAAAABIAAAL8gAQAAIAAABGEBAAAQAAANZyEAAAAAAAAGAQAAAAAAABQAAAAAAAADYAAAUSABAAAgAAADoAEAAAAAAANgAABSIAEAACAAAAGgAQAAEAAAARAAAKEgAQAAAAAABGDhAAAgAAAAJAAAAAAIA:AACAPwAAgD8AAIA:MQAABxIAEAAAAAAACgAQAAAAAAABQAAArMUnNx8ABAMKABAAAAAAAEgAAAvyABAAAQAAAEYQEAABAAAARn4QAAEAAAAAYBAAAQAAAAFAAAAAAAAASAAAC:IAEAADAAAARhAQAAEAAABGfhAAAgAAAABgEAACAAAAAUAAAAAAAAAPAAAHEgAQAAAAAABGABAAAwAAAEYAEAADAAAASwAABRIAEAAAAAAACgAQAAAAAAA4AAAHEgAQAAAAAAAKABAAAAAAAAFAAAAAAKBASwAABYIgEAAAAAAACgAQAAAAAAA2AAAFciAQAAAAAABGAhAAAQAAABIAAAE0AAAHEgAQAAAAAAA6ABAAAAAAACoAEAACAAAANAAAByIAEAAAAAAAOgAQAAIAAAAaABAAAgAAADEAAAcSABAAAAAAABoAEAAAAAAACgAQAAAAAAA2AAAFUgAQAAEAAAAGAhAAAgAAADYAAAiiABAAAQAAAAJAAAAAAAAAAAAAAAAAAAAAAAAANgAABRIAEAACAAAAAUAAAAAAAAA3AAAJ8gAQAAMAAAAGABAAAAAAAEYOEAABAAAARgwQAAIAAAA3AAAJMgAQAAAAAAAGABAAAAAAAIYAEAABAAAA1gUQAAIAAAAPAAAKQgAQAAAAAABGABAAAAAAAAJAAAAAAIA:AACAPwAAAAAAAAAADgAABzIAEAAAAAAARgAQAAAAAACmChAAAAAAADgAAAvyABAAAQAAAEaEIAAAAAAAAAAAAAJAAAAAAIA:AACAPwAAgL8AAIC:MgAAD:IAEAACAAAARhQQAAEAAAACQAAAAACAPwAAgL8AAIA:AACAvwJAAAAAAAAAAACAPwAAAAAAAIA:MgAACfIAEAABAAAARg4QAAMAAABGDhAAAQAAAEYOEAACAAAAMgAAD:IAEAABAAAARg4QAAEAAAACQAAAAACAPwAAgL8AAIA:AACAvwJAAAAAAAAAAACAPwAAAAAAAIA:SAAAC:IAEAACAAAARgAQAAEAAABGfhAAAQAAAABgEAABAAAAAUAAAAAAAABIAAAL8gAQAAMAAADmChAAAQAAAEZ%EAABAAAAAGAQAAEAAAABQAAAAAAAADgAAAdyABAAAwAAAFYFEAAAAAAARgIQAAMAAAAyAAAJciAQAAAAAABGAhAAAgAAAAYAEAAAAAAARgIQAAMAAABIAAAL8gAQAAIAAABGABAAAQAAAEZ%EAACAAAAAGAQAAIAAAABQAAAAAAAAEgAAAvyABAAAQAAAOYKEAABAAAARn4QAAIAAAAAYBAAAgAAAAFAAAAAAAAAOAAAB2IAEAAAAAAAVgUQAAAAAAAGARAAAQAAADIAAAkyABAAAAAAAEYAEAACAAAABgAQAAAAAACWBRAAAAAAAA8AAAcSABAAAAAAAEYAEAAAAAAARgAQAAAAAABLAAAFEgAQAAAAAAAKABAAAAAAADgAAAcSABAAAAAAAAoAEAAAAAAAAUAAAAAAoEBLAAAFgiAQAAAAAAAKABAAAAAAABUAAAE%AAABU1RBVHQAAAAsAAAABAAAAAAAAAADAAAAFwAAAAAAAAAAAAAAAgAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJAAAAAAAAAAAAAAAAAAAABgAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";
kha_Shaders.smaa_neighborhood_blend_vertData0 = "s1203:AXBvcwAAASRHbG9iYWxzAAABc2NyZWVuU2l6ZUludgAAAAAACAAAAAIBRFhCQwjEJl7yyOeRSGFzdzc78RABAAAAXAMAAAUAAAA0AAAA:AAAADABAACgAQAA4AIAAFJERUbAAAAAAQAAAEgAAAABAAAAHAAAAAAE:v8AAQAAmAAAADwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAJEdsb2JhbHMAq6urPAAAAAEAAABgAAAAEAAAAAAAAAAAAAAAeAAAAAAAAAAIAAAAAgAAAIgAAAAAAAAAc2NyZWVuU2l6ZUludgCrqwEAAwABAAIAAAAAAAAAAABNaWNyb3NvZnQgKFIpIEhMU0wgU2hhZGVyIENvbXBpbGVyIDEwLjEASVNHTiwAAAABAAAACAAAACAAAAAAAAAAAAAAAAMAAAAAAAAAAwMAAFRFWENPT1JEAKurq09TR05oAAAAAwAAAAgAAABQAAAAAAAAAAAAAAADAAAAAAAAAA8AAABQAAAAAQAAAAAAAAADAAAAAQAAAAMMAABZAAAAAAAAAAEAAAADAAAAAgAAAA8AAABURVhDT09SRABTVl9Qb3NpdGlvbgCrq6tTSERSOAEAAEAAAQBOAAAAWQAABEaOIAAAAAAAAQAAAF8AAAMyEBAAAAAAAGUAAAPyIBAAAAAAAGUAAAMyIBAAAQAAAGcAAATyIBAAAgAAAAEAAABoAAACAQAAADIAAA:yABAAAAAAAEYUEAAAAAAAAkAAAAAAAD8AAAC:AAAAPwAAAL8CQAAAAAAAPwAAAD8AAAA:AAAAPzIAAA3yIBAAAAAAAEaEIAAAAAAAAAAAAAJAAAAAAIA:AAAAAAAAAAAAAIC:Rg4QAAAAAAAyAAAPMiAQAAEAAABGEBAAAAAAAAJAAAAAAAA:AAAAvwAAAAAAAAAAAkAAAAAAAD8AAAA:AAAAAAAAAAA2AAAFMiAQAAIAAABGEBAAAAAAADYAAAjCIBAAAgAAAAJAAAAAAAAAAAAAAAAAAD8AAIA:PgAAAVNUQVR0AAAABgAAAAEAAAAAAAAABAAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";
kha_Shaders.ssgi_pass_fragData0 = "s9154:AAVfZ2J1ZmZlckRfc2FtcGxlcgAAX2didWZmZXIwX3NhbXBsZXIAAWdidWZmZXJEAABnYnVmZmVyMAABJEdsb2JhbHMAAANQAAAAAABAAAAABARjYW1lcmFQcm9qAEAAAAAIAAAAAgFWMwBQAAAALAAAAAMDRFhCQ%XwK58lcJ5QsQ5y9BjCXl8BAAAAXBoAAAUAAAA0AAAABAIAAFACAACEAgAA4BkAAFJERUbIAQAAAQAAAPwAAAAFAAAAHAAAAAAE::8AAQAAoAEAALwAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAzgAAAAMAAAAAAAAAAAAAAAAAAAABAAAAAQAAAAEAAADgAAAAAgAAAAUAAAAEAAAA:::::wAAAAABAAAADQAAAOkAAAACAAAABQAAAAQAAAD:::::AQAAAAEAAAANAAAA8gAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAABfZ2J1ZmZlckRfc2FtcGxlcgBfZ2J1ZmZlcjBfc2FtcGxlcgBnYnVmZmVyRABnYnVmZmVyMAAkR2xvYmFscwCr8gAAAAMAAAAUAQAAgAAAAAAAAAAAAAAAXAEAAAAAAABAAAAAAgAAAGABAAAAAAAAcAEAAEAAAAAIAAAAAgAAAHwBAAAAAAAAjAEAAFAAAAAsAAAAAgAAAJABAAAAAAAAUACrqwMAAwAEAAQAAAAAAAAAAABjYW1lcmFQcm9qAKsBAAMAAQACAAAAAAAAAAAAVjMAqwMAAwADAAMAAAAAAAAAAABNaWNyb3NvZnQgKFIpIEhMU0wgU2hhZGVyIENvbXBpbGVyIDEwLjEASVNHTkQAAAACAAAACAAAADgAAAAAAAAAAAAAAAMAAAAAAAAAAwMAADgAAAABAAAAAAAAAAMAAAABAAAABwcAAFRFWENPT1JEAKurq09TR04sAAAAAQAAAAgAAAAgAAAAAAAAAAAAAAADAAAAAAAAAAEOAABTVl9UYXJnZXQAq6tTSERSVBcAAEAAAADVBQAAWQAABEaOIAAAAAAACAAAAFoAAAMAYBAAAAAAAFoAAAMAYBAAAQAAAFgYAAQAcBAAAAAAAFVVAABYGAAEAHAQAAEAAABVVQAAYhAAAzIQEAAAAAAAYhAAA3IQEAABAAAAZQAAAxIgEAAAAAAAaAAAAgoAAABIAAAL8gAQAAAAAABGEBAAAAAAAEZ%EAABAAAAAGAQAAEAAAABQAAAAAAAAEgAAAvyABAAAQAAAEYQEAAAAAAARn4QAAAAAAAAYBAAAAAAAAFAAAAAAAAAMgAACUIAEAAAAAAACgAQAAEAAAABQAAAAAAAQAFAAAAAAIC:AAAAC3IAEAABAAAARgAQgMEAAAAAAAAAAkAAAAAAgD8AAIA:AACAPwAAAAAAAAAIQgAQAAIAAAAaABCAwQAAAAAAAAAKABAAAQAAAB0AAAeCABAAAAAAACoAEAACAAAAAUAAAAAAAAAdAAAKkgAQAAEAAAAGBBAAAAAAAAJAAAAAAAAAAAAAAAAAAAAAAAAANwAAD5IAEAABAAAABgwQAAEAAAACQAAAAACAPwAAAAAAAAAAAACAPwJAAAAAAIC:AAAAAAAAAAAAAIC:OAAABzIAEAABAAAAxgAQAAEAAACWBRAAAQAAADcAAAkyABAAAgAAAPYPEAAAAAAARgAQAAAAAABGABAAAQAAABAAAAgSABAAAQAAAEYCEAACAAAARoIgAAAAAAAFAAAAEAAACCIAEAABAAAARgIQAAIAAABGgiAAAAAAAAYAAAAQAAAIQgAQAAEAAABGAhAAAgAAAEaCIAAAAAAABwAAABAAAAcSABAAAAAAAEYCEAABAAAARgIQAAEAAABEAAAFEgAQAAAAAAAKABAAAAAAADgAAAdyABAAAgAAAAYAEAAAAAAARgIQAAEAAAAAAAAJIgAQAAAAAAAqABCAQQAAAAAAAAAKgCAAAAAAAAQAAAAOAAAIIgAQAAAAAAAagCAAAAAAAAQAAAAaABAAAAAAADgAAAdyABAAAwAAAFYFEAAAAAAARhIQAAEAAAA2AAAFggAQAAQAAAABQAAAAACAPzYAAAVyABAABAAAAEYCEAADAAAANgAACMIAEAAAAAAAAkAAAAAAAAAAAAAAmpkZPgAAAAAwAAABIQAAB4IAEAABAAAAOgAQAAAAAAABQAAACAAAAAMABAM6ABAAAQAAADIAAAxyABAABAAAAEYCEAACAAAAAkAAAArXozwK16M8CtejPAAAAABGAhAABAAAABEAAAgSABAABQAAAEYOEAAEAAAARo4gAAAAAAAAAAAAEQAACCIAEAAFAAAARg4QAAQAAABGjiAAAAAAAAEAAAARAAAIggAQAAEAAABGDhAABAAAAEaOIAAAAAAAAwAAAA4AAAcyABAABQAAAEYAEAAFAAAA9g8QAAEAAAAyAAAPMgAQAAUAAABGABAABQAAAAJAAAAAAAA:AAAAPwAAAAAAAAAAAkAAAAAAAD8AAAA:AAAAAAAAAAAAAAAIQgAQAAUAAAAaABCAQQAAAAUAAAABQAAAAACAP0gAAAvyABAABQAAAIYAEAAFAAAARn4QAAAAAAAAYBAAAAAAAAFAAAAAAAAAMgAACYIAEAABAAAACgAQAAUAAAABQAAAAAAAQAFAAAAAAIC:AAAACYIAEAABAAAAOgAQgEEAAAABAAAACoAgAAAAAAAEAAAADgAACIIAEAABAAAAGoAgAAAAAAAEAAAAOgAQAAEAAAAyAAAKggAQAAEAAAAqEBAAAQAAADoAEAABAAAAKgAQgEEAAAAEAAAAMQAAB4IAEAACAAAAAUAAAAAAAAA6ABAAAQAAADEAAAeCABAAAQAAADoAEAABAAAAAUAAAM3MTD4BAAAHggAQAAEAAAA6ABAAAQAAADoAEAACAAAAHwAEAzoAEAABAAAAMgAACnIAEAAFAAAARhIQAAEAAABWBRAAAAAAAEYCEIBBAAAABAAAABAAAAeCABAAAQAAAEYCEAAFAAAARgIQAAUAAABLAAAFQgAQAAAAAAA6ABAAAQAAAAIAAAEVAAABHgAAB4IAEAAAAAAAOgAQAAAAAAABQAAAAQAAADYAAAVCABAAAAAAAAFAAACamRk%FgAAATgAAApyABAABAAAAJYEEAACAAAAAkAAAAAAAAAAAAAAAACAPwAAAAAyAAANcgAQAAUAAACWBBAAAgAAAAJAAAAAAIA:AAAAAAAAAAAAAAAAlgQQgEEAAAAEAAAAMgAADXIAEAAEAAAAJgkQgEEAAAACAAAAAkAAAAAAgD8AAAAAAAAAAAAAAABGAhAABAAAAA8AAAeCABAAAAAAAEYAEAAFAAAARgAQAAUAAABLAAAFggAQAAEAAAA6ABAAAAAAAA8AAAeCABAAAgAAAIYAEAAEAAAAhgAQAAQAAABLAAAFggAQAAMAAAA6ABAAAgAAADEAAAeCABAAAQAAADoAEAADAAAAOgAQAAEAAABEAAAFggAQAAAAAAA6ABAAAAAAADgAAAdyABAABQAAAPYPEAAAAAAARgIQAAUAAABEAAAFggAQAAAAAAA6ABAAAgAAADgAAAdyABAABAAAAPYPEAAAAAAARgIQAAQAAAA3AAAJcgAQAAQAAAD2DxAAAQAAAEYCEAAFAAAARgIQAAQAAAAQAAAHggAQAAAAAABGAhAABAAAAEYCEAAEAAAARAAABYIAEAAAAAAAOgAQAAAAAAA4AAAHcgAQAAUAAAD2DxAAAAAAAEYCEAAEAAAAOAAAB3IAEAAGAAAAlgQQAAIAAAAmCRAABQAAADIAAApyABAABQAAAJYEEAAFAAAAJgkQAAIAAABGAhCAQQAAAAYAAAAyAAAJcgAQAAYAAABGAhAABAAAAPYPEAAAAAAARgIQAAUAAAAyAAAKcgAQAAcAAABGAhAABAAAAPYPEAAAAAAARgIQgEEAAAAFAAAAMgAACnIAEAAEAAAARgIQAAQAAAD2DxAAAAAAAEYCEIBBAAAAAgAAADIAAAxyABAABAAAAEYCEAAEAAAAAkAAAAAAAD8AAAA:AAAAPwAAAABGAhAAAgAAADYAAAWCABAACAAAAAFAAAAAAIA:NgAABXIAEAAIAAAARgIQAAMAAAA2AAAFggAQAAAAAAABQAAAmpkZPjYAAAWCABAAAQAAAAFAAAAAAAAAMAAAASEAAAeCABAAAgAAADoAEAABAAAAAUAAAAgAAAADAAQDOgAQAAIAAAAyAAAMcgAQAAgAAABGAhAABAAAAAJAAAAK16M8CtejPArXozwAAAAARgIQAAgAAAARAAAIEgAQAAkAAABGDhAACAAAAEaOIAAAAAAAAAAAABEAAAgiABAACQAAAEYOEAAIAAAARo4gAAAAAAABAAAAEQAACIIAEAACAAAARg4QAAgAAABGjiAAAAAAAAMAAAAOAAAHMgAQAAkAAABGABAACQAAAPYPEAACAAAAMgAADzIAEAAJAAAARgAQAAkAAAACQAAAAAAAPwAAAD8AAAAAAAAAAAJAAAAAAAA:AAAAPwAAAAAAAAAAAAAACEIAEAAJAAAAGgAQgEEAAAAJAAAAAUAAAAAAgD9IAAAL8gAQAAkAAACGABAACQAAAEZ%EAAAAAAAAGAQAAAAAAABQAAAAAAAADIAAAmCABAAAgAAAAoAEAAJAAAAAUAAAAAAAEABQAAAAACAvwAAAAmCABAAAgAAADoAEIBBAAAAAgAAAAqAIAAAAAAABAAAAA4AAAiCABAAAgAAABqAIAAAAAAABAAAADoAEAACAAAAMgAACoIAEAACAAAAKhAQAAEAAAA6ABAAAgAAACoAEIBBAAAACAAAADEAAAeCABAAAwAAAAFAAAAAAAAAOgAQAAIAAAAxAAAHggAQAAIAAAA6ABAAAgAAAAFAAADNzEw%AQAAB4IAEAACAAAAOgAQAAIAAAA6ABAAAwAAAB8ABAM6ABAAAgAAADIAAApyABAACQAAAEYSEAABAAAAVgUQAAAAAABGAhCAQQAAAAgAAAAQAAAHggAQAAIAAABGAhAACQAAAEYCEAAJAAAASwAABYIAEAAAAAAAOgAQAAIAAAACAAABFQAAAR4AAAeCABAAAQAAADoAEAABAAAAAUAAAAEAAAA2AAAFggAQAAAAAAABQAAAmpkZPhYAAAEAAAAHQgAQAAAAAAA6ABAAAAAAACoAEAAAAAAAMgAACnIAEAABAAAARgIQgEEAAAABAAAABgAQAAAAAABGAhAABQAAADIAAAxyABAAAQAAAEYCEAABAAAAAkAAAAAAAD8AAAA:AAAAPwAAAABGAhAAAgAAADYAAAWCABAABAAAAAFAAAAAAIA:NgAABXIAEAAEAAAARgIQAAMAAAA2AAAIkgAQAAAAAAACQAAAmpkZPgAAAAAAAAAAAAAAADAAAAEhAAAHggAQAAEAAAA6ABAAAAAAAAFAAAAIAAAAAwAEAzoAEAABAAAAMgAADHIAEAAEAAAARgIQAAEAAAACQAAACtejPArXozwK16M8AAAAAEYCEAAEAAAAEQAACBIAEAAFAAAARg4QAAQAAABGjiAAAAAAAAAAAAARAAAIIgAQAAUAAABGDhAABAAAAEaOIAAAAAAAAQAAABEAAAiCABAAAQAAAEYOEAAEAAAARo4gAAAAAAADAAAADgAABzIAEAAFAAAARgAQAAUAAAD2DxAAAQAAADIAAA8yABAABQAAAEYAEAAFAAAAAkAAAAAAAD8AAAA:AAAAAAAAAAACQAAAAAAAPwAAAD8AAAAAAAAAAAAAAAhCABAABQAAABoAEIBBAAAABQAAAAFAAAAAAIA:SAAAC:IAEAAFAAAAhgAQAAUAAABGfhAAAAAAAABgEAAAAAAAAUAAAAAAAAAyAAAJggAQAAEAAAAKABAABQAAAAFAAAAAAABAAUAAAAAAgL8AAAAJggAQAAEAAAA6ABCAQQAAAAEAAAAKgCAAAAAAAAQAAAAOAAAIggAQAAEAAAAagCAAAAAAAAQAAAA6ABAAAQAAADIAAAqCABAAAQAAACoQEAABAAAAOgAQAAEAAAAqABCAQQAAAAQAAAAxAAAHggAQAAIAAAABQAAAAAAAADoAEAABAAAAMQAAB4IAEAABAAAAOgAQAAEAAAABQAAAzcxMPgEAAAeCABAAAQAAADoAEAABAAAAOgAQAAIAAAAfAAQDOgAQAAEAAAAyAAAKcgAQAAUAAABGEhAAAQAAAFYFEAAAAAAARgIQgEEAAAAEAAAAEAAAB4IAEAABAAAARgIQAAUAAABGAhAABQAAAEsAAAUSABAAAAAAADoAEAABAAAAAgAAARUAAAEeAAAHggAQAAAAAAA6ABAAAAAAAAFAAAABAAAANgAABRIAEAAAAAAAAUAAAJqZGT4WAAABAAAABxIAEAAAAAAACgAQAAAAAAAqABAAAAAAADIAAA5yABAAAQAAAEYCEIBBAAAABgAAAAJAAAAAAAA:AAAAPwAAAD8AAAAARgIQgEEAAAACAAAAMgAADHIAEAABAAAARgIQAAEAAAACQAAAAAAAPwAAAD8AAAA:AAAAAEYCEAACAAAANgAABYIAEAAEAAAAAUAAAAAAgD82AAAFcgAQAAQAAABGAhAAAwAAADYAAAjCABAAAAAAAAJAAAAAAAAAAAAAAJqZGT4AAAAAMAAAASEAAAeCABAAAQAAADoAEAAAAAAAAUAAAAgAAAADAAQDOgAQAAEAAAAyAAAMcgAQAAQAAABGAhAAAQAAAAJAAAAK16M8CtejPArXozwAAAAARgIQAAQAAAARAAAIEgAQAAUAAABGDhAABAAAAEaOIAAAAAAAAAAAABEAAAgiABAABQAAAEYOEAAEAAAARo4gAAAAAAABAAAAEQAACIIAEAABAAAARg4QAAQAAABGjiAAAAAAAAMAAAAOAAAHMgAQAAUAAABGABAABQAAAPYPEAABAAAAMgAADzIAEAAFAAAARgAQAAUAAAACQAAAAAAAPwAAAD8AAAAAAAAAAAJAAAAAAAA:AAAAPwAAAAAAAAAAAAAACEIAEAAFAAAAGgAQgEEAAAAFAAAAAUAAAAAAgD9IAAAL8gAQAAUAAACGABAABQAAAEZ%EAAAAAAAAGAQAAAAAAABQAAAAAAAADIAAAmCABAAAQAAAAoAEAAFAAAAAUAAAAAAAEABQAAAAACAvwAAAAmCABAAAQAAADoAEIBBAAAAAQAAAAqAIAAAAAAABAAAAA4AAAiCABAAAQAAABqAIAAAAAAABAAAADoAEAABAAAAMgAACoIAEAABAAAAKhAQAAEAAAA6ABAAAQAAACoAEIBBAAAABAAAADEAAAeCABAAAgAAAAFAAAAAAAAAOgAQAAEAAAAxAAAHggAQAAEAAAA6ABAAAQAAAAFAAADNzEw%AQAAB4IAEAABAAAAOgAQAAEAAAA6ABAAAgAAAB8ABAM6ABAAAQAAADIAAApyABAABQAAAEYSEAABAAAAVgUQAAAAAABGAhCAQQAAAAQAAAAQAAAHggAQAAEAAABGAhAABQAAAEYCEAAFAAAASwAABUIAEAAAAAAAOgAQAAEAAAACAAABFQAAAR4AAAeCABAAAAAAADoAEAAAAAAAAUAAAAEAAAA2AAAFQgAQAAAAAAABQAAAmpkZPhYAAAEAAAAHEgAQAAAAAAAqABAAAAAAAAoAEAAAAAAAMgAADnIAEAABAAAARgIQgEEAAAAHAAAAAkAAAAAAAD8AAAA:AAAAPwAAAABGAhCAQQAAAAIAAAAyAAAMcgAQAAEAAABGAhAAAQAAAAJAAAAAAAA:AAAAPwAAAD8AAAAARgIQAAIAAAA2AAAFggAQAAIAAAABQAAAAACAPzYAAAVyABAAAgAAAEYCEAADAAAANgAACMIAEAAAAAAAAkAAAAAAAAAAAAAAmpkZPgAAAAAwAAABIQAAB4IAEAABAAAAOgAQAAAAAAABQAAACAAAAAMABAM6ABAAAQAAADIAAAxyABAAAgAAAEYCEAABAAAAAkAAAArXozwK16M8CtejPAAAAABGAhAAAgAAABEAAAgSABAABAAAAEYOEAACAAAARo4gAAAAAAAAAAAAEQAACCIAEAAEAAAARg4QAAIAAABGjiAAAAAAAAEAAAARAAAIggAQAAEAAABGDhAAAgAAAEaOIAAAAAAAAwAAAA4AAAcyABAABAAAAEYAEAAEAAAA9g8QAAEAAAAyAAAPMgAQAAQAAABGABAABAAAAAJAAAAAAAA:AAAAPwAAAAAAAAAAAkAAAAAAAD8AAAA:AAAAAAAAAAAAAAAIQgAQAAQAAAAaABCAQQAAAAQAAAABQAAAAACAP0gAAAvyABAABAAAAIYAEAAEAAAARn4QAAAAAAAAYBAAAAAAAAFAAAAAAAAAMgAACYIAEAABAAAACgAQAAQAAAABQAAAAAAAQAFAAAAAAIC:AAAACYIAEAABAAAAOgAQgEEAAAABAAAACoAgAAAAAAAEAAAADgAACIIAEAABAAAAGoAgAAAAAAAEAAAAOgAQAAEAAAAyAAAKggAQAAEAAAAqEBAAAQAAADoAEAABAAAAKgAQgEEAAAACAAAAMQAAB4IAEAADAAAAAUAAAAAAAAA6ABAAAQAAADEAAAeCABAAAQAAADoAEAABAAAAAUAAAM3MTD4BAAAHggAQAAEAAAA6ABAAAQAAADoAEAADAAAAHwAEAzoAEAABAAAAMgAACnIAEAAEAAAARhIQAAEAAABWBRAAAAAAAEYCEIBBAAAAAgAAABAAAAeCABAAAQAAAEYCEAAEAAAARgIQAAQAAABLAAAFQgAQAAAAAAA6ABAAAQAAAAIAAAEVAAABHgAAB4IAEAAAAAAAOgAQAAAAAAABQAAAAQAAADYAAAVCABAAAAAAAAFAAACamRk%FgAAAQAAAAcSIBAAAAAAACoAEAAAAAAACgAQAAAAAAA%AAABU1RBVHQAAADLAAAACgAAAAAAAAADAAAAfgAAAAoAAAAFAAAABgAAAAoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAAAAAAAAAAAAAAAAFQAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";
kha_Shaders.ssr_pass_fragData0 = "s6667:AAdfZ2J1ZmZlckRfc2FtcGxlcgAAX2didWZmZXIwX3NhbXBsZXIAAV90ZXhfc2FtcGxlcgACZ2J1ZmZlckQAAGdidWZmZXIwAAF0ZXgAAiRHbG9iYWxzAAADUAAAAAAAQAAAAAQEY2FtZXJhUHJvagBAAAAACAAAAAIBVjMAUAAAACwAAAADA0RYQkO51wIiwVN%iO9u0%OlRHWUAQAAAAATAAAFAAAANAAAAFQCAACgAgAA1AIAAIQSAABSREVGGAIAAAEAAABMAQAABwAAABwAAAAABP::AAEAAPABAAD8AAAAAwAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAQAAAA4BAAADAAAAAAAAAAAAAAAAAAAAAQAAAAEAAAABAAAAIAEAAAMAAAAAAAAAAAAAAAAAAAACAAAAAQAAAAEAAAAtAQAAAgAAAAUAAAAEAAAA:::::wAAAAABAAAADQAAADYBAAACAAAABQAAAAQAAAD:::::AQAAAAEAAAANAAAAPwEAAAIAAAAFAAAABAAAAP::::8CAAAAAQAAAA0AAABDAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAF9nYnVmZmVyRF9zYW1wbGVyAF9nYnVmZmVyMF9zYW1wbGVyAF90ZXhfc2FtcGxlcgBnYnVmZmVyRABnYnVmZmVyMAB0ZXgAJEdsb2JhbHMAQwEAAAMAAABkAQAAgAAAAAAAAAAAAAAArAEAAAAAAABAAAAAAgAAALABAAAAAAAAwAEAAEAAAAAIAAAAAgAAAMwBAAAAAAAA3AEAAFAAAAAsAAAAAgAAAOABAAAAAAAAUACrqwMAAwAEAAQAAAAAAAAAAABjYW1lcmFQcm9qAKsBAAMAAQACAAAAAAAAAAAAVjMAqwMAAwADAAMAAAAAAAAAAABNaWNyb3NvZnQgKFIpIEhMU0wgU2hhZGVyIENvbXBpbGVyIDEwLjEASVNHTkQAAAACAAAACAAAADgAAAAAAAAAAAAAAAMAAAAAAAAAAwMAADgAAAABAAAAAAAAAAMAAAABAAAABwcAAFRFWENPT1JEAKurq09TR04sAAAAAQAAAAgAAAAgAAAAAAAAAAAAAAADAAAAAAAAAA8AAABTVl9UYXJnZXQAq6tTSERSqA8AAEAAAADqAwAAWQAABEaOIAAAAAAACAAAAFoAAAMAYBAAAAAAAFoAAAMAYBAAAQAAAFoAAAMAYBAAAgAAAFgYAAQAcBAAAAAAAFVVAABYGAAEAHAQAAEAAABVVQAAWBgABABwEAACAAAAVVUAAGIQAAMyEBAAAAAAAGIQAANyEBAAAQAAAGUAAAPyIBAAAAAAAGgAAAIMAAAASAAAC:IAEAAAAAAARhAQAAAAAABGfhAAAQAAAABgEAABAAAAAUAAAAAAAAA5AAAHggAQAAAAAAAqABAAAAAAAAFAAAAAAIA:HwAEAzoAEAAAAAAASAAAC:IAEAABAAAARhAQAAAAAABGfhAAAAAAAABgEAAAAAAAAUAAAAAAAAAyAAAJggAQAAAAAAAKABAAAQAAAAFAAAAAAABAAUAAAAAAgL85AAAHEgAQAAEAAAA6ABAAAAAAAAFAAAAAAIA:HwAEAwoAEAABAAAAAAAAC3IAEAABAAAARgAQgMEAAAAAAAAAAkAAAAAAgD8AAIA:AACAPwAAAAAAAAAIQgAQAAIAAAAaABCAwQAAAAAAAAAKABAAAQAAAB0AAAcSABAAAQAAACoAEAACAAAAAUAAAAAAAAAdAAAKMgAQAAMAAABGABAAAAAAAAJAAAAAAAAAAAAAAAAAAAAAAAAANwAADzIAEAADAAAARgAQAAMAAAACQAAAAACAPwAAgD8AAAAAAAAAAAJAAAAAAIC:AACAvwAAAAAAAAAAOAAAB2IAEAABAAAAVgYQAAEAAAAGARAAAwAAADcAAAkyABAAAgAAAAYAEAABAAAARgAQAAAAAACWBRAAAQAAABAAAAcSABAAAAAAAEYCEAACAAAARgIQAAIAAABEAAAFEgAQAAAAAAAKABAAAAAAADgAAAdyABAAAQAAAAYAEAAAAAAARgIQAAIAAAAQAAAIEgAQAAIAAABGAhAAAQAAAEaCIAAAAAAABQAAABAAAAgiABAAAgAAAEYCEAABAAAARoIgAAAAAAAGAAAAEAAACEIAEAACAAAARgIQAAEAAABGgiAAAAAAAAcAAAAAAAAJEgAQAAAAAAA6ABCAQQAAAAAAAAAKgCAAAAAAAAQAAAAOAAAIEgAQAAAAAAAagCAAAAAAAAQAAAAKABAAAAAAADgAAAdyABAAAQAAAAYAEAAAAAAARhIQAAEAAAAQAAAHIgAQAAAAAABGAhAAAQAAAEYCEAACAAAAAAAAByIAEAAAAAAAGgAQAAAAAAAaABAAAAAAADIAAApyABAAAgAAAEYCEAACAAAAVgUQgEEAAAAAAAAARgIQAAEAAAAQAAAHIgAQAAAAAABGAhAAAgAAAEYCEAACAAAARAAABSIAEAAAAAAAGgAQAAAAAAA4AAAHcgAQAAIAAABWBRAAAAAAACYJEAACAAAADwAACiIAEAAAAAAARhAQAAAAAAACQAAAOdZPQUx3nEIAAAAAAAAAAE0AAAYiABAAAAAAAADQAAAaABAAAAAAADgAAAciABAAAAAAABoAEAAAAAAAAUAAAIzuKkcaAAAFIgAQAAAAAAAaABAAAAAAADgAAAciABAAAAAAACoAEAAAAAAAGgAQAAAAAAAyAAAKIgAQAAAAAAAaABCAQQAAAAAAAAABQAAAmpkZPwFAAAAAAIA:OAAAB%IAEAACAAAAVgUQAAAAAABWAhAAAgAAADgAAApyABAAAwAAAJYHEAACAAAAAkAAAArXoz0K16M9CtejPQAAAAA2AAAFggAQAAQAAAABQAAAAACAPzYAAAWCABAABQAAAAFAAAAAAIA:NgAABYIAEAAGAAAAAUAAAAAAgD82AAAFggAQAAcAAAABQAAAAACAPzYAAAVyABAABQAAAEYCEAABAAAANgAACHIAEAAIAAAAAkAAAAAAAAAAAAAAAAAAAAAAAAA2AAAIogAQAAAAAAACQAAAAAAAAAAAAAAAAAAAAAAAADAAAAEhAAAHggAQAAEAAAAaABAAAAAAAAFAAAASAAAANgAABYIAEAAAAAAAAUAAAAAAAAADAAQDOgAQAAEAAAAyAAAMcgAQAAQAAACWBxAAAgAAAAJAAAAK16M9CtejPQrXoz0AAAAARgIQAAUAAAARAAAIEgAQAAkAAABGDhAABAAAAEaOIAAAAAAAAAAAABEAAAgiABAACQAAAEYOEAAEAAAARo4gAAAAAAABAAAAEQAACIIAEAABAAAARg4QAAQAAABGjiAAAAAAAAMAAAAOAAAHMgAQAAkAAABGABAACQAAAPYPEAABAAAAMgAADzIAEAAJAAAARgAQAAkAAAACQAAAAAAAPwAAAD8AAAAAAAAAAAJAAAAAAAA:AAAAPwAAAAAAAAAAAAAACEIAEAAJAAAAGgAQgEEAAAAJAAAAAUAAAAAAgD9IAAAL8gAQAAkAAACGABAACQAAAEZ%EAAAAAAAAGAQAAAAAAABQAAAAAAAADIAAAmCABAAAQAAAAoAEAAJAAAAAUAAAAAAAEABQAAAAACAvwAAAAmCABAAAQAAADoAEIBBAAAAAQAAAAqAIAAAAAAABAAAAA4AAAiCABAAAQAAABqAIAAAAAAABAAAADoAEAABAAAAMgAACoIAEAABAAAAKhAQAAEAAAA6ABAAAQAAACoAEIBBAAAABAAAADEAAAeCABAAAQAAAAFAAAAAAAAAOgAQAAEAAAAfAAQDOgAQAAEAAAA2AAAFcgAQAAUAAABGAhAABAAAADYAAAVyABAACQAAAEYCEAADAAAANgAABYIAEAADAAAAAUAAAAAAAAA2AAAFggAQAAgAAAABQAAAAAAAADAAAAEhAAAHggAQAAkAAAA6ABAACAAAAAFAAAAHAAAAAwAEAzoAEAAJAAAAOAAACnIAEAAKAAAARgIQAAkAAAACQAAAAAAAPwAAAD8AAAA:AAAAADIAAA1yABAABwAAAEYCEIBBAAAACQAAAAJAAAAAAAA:AAAAPwAAAD8AAAAARgIQAAUAAAARAAAIEgAQAAsAAABGDhAABwAAAEaOIAAAAAAAAAAAABEAAAgiABAACwAAAEYOEAAHAAAARo4gAAAAAAABAAAAEQAACIIAEAAJAAAARg4QAAcAAABGjiAAAAAAAAMAAAAOAAAHMgAQAAsAAABGABAACwAAAPYPEAAJAAAAMgAADzIAEAALAAAARgAQAAsAAAACQAAAAAAAPwAAAD8AAAAAAAAAAAJAAAAAAAA:AAAAPwAAAAAAAAAAAAAACEIAEAALAAAAGgAQgEEAAAALAAAAAUAAAAAAgD9IAAAL8gAQAAsAAACGABAACwAAAEZ%EAAAAAAAAGAQAAAAAAABQAAAAAAAADIAAAmCABAACQAAAAoAEAALAAAAAUAAAAAAAEABQAAAAACAvwAAAAmCABAACQAAADoAEIBBAAAACQAAAAqAIAAAAAAABAAAAA4AAAiCABAACQAAABqAIAAAAAAABAAAADoAEAAJAAAAMgAACoIAEAADAAAAKhAQAAEAAAA6ABAACQAAACoAEIBBAAAABwAAADEAAAeCABAACQAAADoAEAADAAAAAUAAAAAAAAA3AAAJcgAQAAUAAAD2DxAACQAAAEYCEAAFAAAARgIQAAcAAAAeAAAHggAQAAgAAAA6ABAACAAAAAFAAAABAAAANgAABXIAEAAJAAAARgIQAAoAAAAWAAABHQAACBIAEAAHAAAAAUAAAArXIzw6ABCAgQAAAAMAAAARAAAIEgAQAAkAAABGDhAABQAAAEaOIAAAAAAAAAAAABEAAAgiABAACQAAAEYOEAAFAAAARo4gAAAAAAABAAAAEQAACCIAEAAHAAAARg4QAAUAAABGjiAAAAAAAAMAAAAOAAAHYgAQAAcAAAAGARAACQAAAFYFEAAHAAAAMgAADzIAEAAGAAAAlgUQAAcAAAACQAAAAAAAPwAAAD8AAAAAAAAAAAJAAAAAAAA:AAAAPwAAAAAAAAAAAAAACEIAEAAGAAAAGgAQgEEAAAAGAAAAAUAAAAAAgD8BAAAHcgAQAAgAAACGAxAABgAAAAYAEAAHAAAANgAABYIAEAAAAAAAAUAAAP::::8CAAABFQAAAR4AAAciABAAAAAAABoAEAAAAAAAAUAAAAEAAAA2AAAFcgAQAAUAAABGAhAABAAAADYAAAWCABAAAAAAADoAEAABAAAANgAACHIAEAAIAAAAAkAAAAAAAAAAAAAAAAAAAAAAAAAWAAABAQAAB3IAEAABAAAARgIQAAgAAAD2DxAAAAAAAAAAAAuiABAAAAAAAAYEEIBBAAAAAQAAAAJAAAAAAAAAAAAAPwAAAAAAAAA:AAAACSIAEAAAAAAAOgAQgIEAAAAAAAAAGgAQgIEAAAAAAAAAAAAAC2IAEAAAAAAAVgYQgEEAAAAAAAAAAkAAAAAAAAAAAIA:AACAPwAAAAA0AAAHIgAQAAAAAAAaABAAAAAAAAFAAAAAAAAAOAAAB4IAEAAAAAAAKgAQAAAAAAAqABAAAAAAADgAAAeCABAAAAAAADoAEAAAAAAAOgAQAAAAAAA4AAAHQgAQAAAAAAA6ABAAAAAAACoAEAAAAAAAOAAAByIAEAAAAAAAGgAQAAAAAAAqABAAAAAAADYgAAYSABAAAgAAAAoAEIBBAAAAAgAAADgAAAciABAAAAAAABoAEAAAAAAACgAQAAIAAAAyAAAK0gAQAAAAAAAGGRAAAQAAAAYAEAAAAAAABgkQgEEAAAAFAAAAEAAABxIAEAAAAAAAhgMQAAAAAACGAxAAAAAAAEsAAAUSABAAAAAAAAoAEAAAAAAAAAAACBIAEAAAAAAACgAQgEEAAAAAAAAAAUAAAAAAoEA4AAAHEgAQAAAAAAAKABAAAAAAAAFAAADNzEw%NAAABxIAEAAAAAAACgAQAAAAAAABQAAAAAAAADgAAAcSABAAAAAAAAoAEAAAAAAAGgAQAAAAAAA4IAAHEgAQAAAAAAAqABAAAQAAAAoAEAAAAAAASAAAC:IAEAABAAAARgAQAAEAAABGfhAAAgAAAABgEAACAAAAAUAAAAAAAAA2IAAFcgAQAAEAAABGAhAAAQAAADgAAAdyABAAAAAAAAYAEAAAAAAARgIQAAEAAAA4AAAKcgAQAAAAAABGAhAAAAAAAAJAAAAAAAA:AAAAPwAAAD8AAAAAEgAAATYAAAhyABAAAAAAAAJAAAAAAAAAAAAAAAAAAAAAAAAAFQAAARIAAAE2AAAIcgAQAAAAAAACQAAAAAAAAAAAAAAAAAAAAAAAABUAAAE2AAAFciAQAAAAAABGAhAAAAAAADYAAAWCIBAAAAAAAAFAAAAAAAAAPgAAAVNUQVR0AAAAhwAAAAwAAAAAAAAAAwAAAFIAAAAEAAAAAgAAAAQAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAABcAAAADAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";
kha_Shaders.supersample_resolve_fragData0 = "s2011:AANfdGV4X3NhbXBsZXIAAHRleAAAJEdsb2JhbHMAAAFzY3JlZW5TaXplSW52AAAAAAAIAAAAAgFEWEJDwzpGzQlCtxP0mQFPsf0J3AEAAACsBQAABQAAADQAAABMAQAAgAEAALQBAAAwBQAAUkRFRhABAAABAAAAmAAAAAMAAAAcAAAAAAT::wABAADoAAAAfAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAACJAAAAAgAAAAUAAAAEAAAA:::::wAAAAABAAAADQAAAI0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAX3RleF9zYW1wbGVyAHRleAAkR2xvYmFscwCrq40AAAABAAAAsAAAABAAAAAAAAAAAAAAAMgAAAAAAAAACAAAAAIAAADYAAAAAAAAAHNjcmVlblNpemVJbnYAq6sBAAMAAQACAAAAAAAAAAAATWljcm9zb2Z0IChSKSBITFNMIFNoYWRlciBDb21waWxlciAxMC4xAElTR04sAAAAAQAAAAgAAAAgAAAAAAAAAAAAAAADAAAAAAAAAAMDAABURVhDT09SRACrq6tPU0dOLAAAAAEAAAAIAAAAIAAAAAAAAAAAAAAAAwAAAAAAAAAPAAAAU1ZfVGFyZ2V0AKurU0hEUnQDAABAAAAA3QAAAFkAAARGjiAAAAAAAAEAAABaAAADAGAQAAAAAABYGAAEAHAQAAAAAABVVQAAYhAAAzIQEAAAAAAAZQAAA:IgEAAAAAAAaAAAAgMAAABFAAAJ8gAQAAAAAABGEBAAAAAAAEZ%EAAAAAAAAGAQAAAAAAAyAAAN8gAQAAEAAABGhCAAAAAAAAAAAAACQAAAAADAPgAAAAAAAMC%AAAAAEYUEAAAAAAARQAACfIAEAACAAAARgAQAAEAAABGfhAAAAAAAABgEAAAAAAARQAACfIAEAABAAAA5goQAAEAAABGfhAAAAAAAABgEAAAAAAAAAAAB:IAEAAAAAAARg4QAAAAAABGDhAAAgAAAAAAAAfyABAAAAAAAEYOEAABAAAARg4QAAAAAAAyAAAN8gAQAAEAAABGhCAAAAAAAAAAAAACQAAAAAAAAAAAwD4AAAAAAADAvkYUEAAAAAAARQAACfIAEAACAAAARgAQAAEAAABGfhAAAAAAAABgEAAAAAAARQAACfIAEAABAAAA5goQAAEAAABGfhAAAAAAAABgEAAAAAAAAAAAB:IAEAAAAAAARg4QAAAAAABGDhAAAgAAAAAAAAfyABAAAAAAAEYOEAABAAAARg4QAAAAAAAyAAAN8gAQAAEAAABGhCAAAAAAAAAAAAACQAAAAADAPgAAwD4AAMC%AADAvkYUEAAAAAAARQAACfIAEAACAAAARgAQAAEAAABGfhAAAAAAAABgEAAAAAAARQAACfIAEAABAAAA5goQAAEAAABGfhAAAAAAAABgEAAAAAAAAAAAB:IAEAAAAAAARg4QAAAAAABGDhAAAgAAAAAAAAfyABAAAAAAAEYOEAABAAAARg4QAAAAAAAyAAAN8gAQAAEAAABGhCAAAAAAAAAAAAACQAAAAADAPgAAwL4AAMC%AADAPkYUEAAAAAAARQAACfIAEAACAAAARgAQAAEAAABGfhAAAAAAAABgEAAAAAAARQAACfIAEAABAAAA5goQAAEAAABGfhAAAAAAAABgEAAAAAAAAAAAB:IAEAAAAAAARg4QAAAAAABGDhAAAgAAAAAAAAfyABAAAAAAAEYOEAABAAAARg4QAAAAAAA4AAAK8iAQAAAAAABGDhAAAAAAAAJAAAA5juM9OY7jPTmO4z05juM9PgAAAVNUQVR0AAAAFwAAAAMAAAAAAAAAAgAAAA0AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";
kha_Shaders.taa_pass_fragData0 = "s1728:AAZfdGV4X3NhbXBsZXIAAF9zdmVsb2Nfc2FtcGxlcgABX3RleDJfc2FtcGxlcgACdGV4AABzdmVsb2MAAXRleDIAAgBEWEJDRfVcGX:Syt0CC3lRV81gEQEAAADMBAAABQAAADQAAAB8AQAAsAEAAOQBAABQBAAAUkRFRkABAAAAAAAAAAAAAAYAAAAcAAAAAAT::wABAAAXAQAA3AAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAEAAADpAAAAAwAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAQAAAPkAAAADAAAAAAAAAAAAAAAAAAAAAgAAAAEAAAABAAAABwEAAAIAAAAFAAAABAAAAP::::8AAAAAAQAAAA0AAAALAQAAAgAAAAUAAAAEAAAA:::::wEAAAABAAAADQAAABIBAAACAAAABQAAAAQAAAD:::::AgAAAAEAAAANAAAAX3RleF9zYW1wbGVyAF9zdmVsb2Nfc2FtcGxlcgBfdGV4Ml9zYW1wbGVyAHRleABzdmVsb2MAdGV4MgBNaWNyb3NvZnQgKFIpIEhMU0wgU2hhZGVyIENvbXBpbGVyIDEwLjEAq0lTR04sAAAAAQAAAAgAAAAgAAAAAAAAAAAAAAADAAAAAAAAAAMDAABURVhDT09SRACrq6tPU0dOLAAAAAEAAAAIAAAAIAAAAAAAAAAAAAAAAwAAAAAAAAAPAAAAU1ZfVGFyZ2V0AKurU0hEUmQCAABAAAAAmQAAAFoAAAMAYBAAAAAAAFoAAAMAYBAAAQAAAFoAAAMAYBAAAgAAAFgYAAQAcBAAAAAAAFVVAABYGAAEAHAQAAEAAABVVQAAWBgABABwEAACAAAAVVUAAGIQAAMyEBAAAAAAAGUAAAPyIBAAAAAAAGgAAAICAAAASAAAC:IAEAAAAAAARhAQAAAAAABGfhAAAQAAAABgEAABAAAAAUAAAAAAAAAyAAAMMgAQAAAAAABGABAAAAAAAAJAAAAAAIC:AACAPwAAAAAAAAAARhAQAAAAAABIAAAL8gAQAAAAAABGABAAAAAAAEZ%EAACAAAAAGAQAAIAAAABQAAAAAAAADgAAAeCABAAAAAAADoAEAAAAAAAOgAQAAAAAABIAAAL8gAQAAEAAABGEBAAAAAAAEZ%EAAAAAAAAGAQAAAAAAABQAAAAAAAADIAAAqCABAAAAAAADoAEAABAAAAOgAQAAEAAAA6ABCAQQAAAAAAAAA4AAAIggAQAAAAAAA6ABCAgQAAAAAAAAABQAAAzcxMPksAAAWCABAAAAAAADoAEAAAAAAAMgAACoIAEAAAAAAAOgAQgEEAAAAAAAAAAUAAAAAA8EEBQAAAAACAPzQAAAeCABAAAAAAADoAEAAAAAAAAUAAAAAAAAA4AAAHggAQAAAAAAA6ABAAAAAAAAFAAAAAAAA:AAAACHIAEAAAAAAARgIQAAAAAABGAhCAQQAAAAEAAAAyAAAJciAQAAAAAAD2DxAAAAAAAEYCEAAAAAAARgIQAAEAAAA2AAAFgiAQAAAAAAABQAAAAACAPz4AAAFTVEFUdAAAAA8AAAACAAAAAAAAAAIAAAAKAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";
kha_Shaders.world_pass_fragData0 = "s2752:AANfZW52bWFwX3NhbXBsZXIAAGVudm1hcAAAJEdsb2JhbHMAAAFlbnZtYXBEYXRhV29ybGQAAAAAABAAAAAEAURYQkNgAUesJEYN5EeOPGeaF0JnAQAAANAHAAAFAAAANAAAAFABAACEAQAAuAEAAFQHAABSREVGFAEAAAEAAACcAAAAAwAAABwAAAAABP::AAEAAOwAAAB8AAAAAwAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAQAAAIwAAAACAAAABQAAAAQAAAD:::::AAAAAAEAAAANAAAAkwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAABfZW52bWFwX3NhbXBsZXIAZW52bWFwACRHbG9iYWxzAJMAAAABAAAAtAAAABAAAAAAAAAAAAAAAMwAAAAAAAAAEAAAAAIAAADcAAAAAAAAAGVudm1hcERhdGFXb3JsZAABAAMAAQAEAAAAAAAAAAAATWljcm9zb2Z0IChSKSBITFNMIFNoYWRlciBDb21waWxlciAxMC4xAElTR04sAAAAAQAAAAgAAAAgAAAAAAAAAAAAAAADAAAAAAAAAAcHAABURVhDT09SRACrq6tPU0dOLAAAAAEAAAAIAAAAIAAAAAAAAAAAAAAAAwAAAAAAAAAPAAAAU1ZfVGFyZ2V0AKurU0hEUpQFAABAAAAAZQEAAFkAAARGjiAAAAAAAAEAAABaAAADAGAQAAAAAABYGAAEAHAQAAAAAABVVQAAYhAAA3IQEAAAAAAAZQAAA:IgEAAAAAAAaAAAAgMAAAAQAAAHEgAQAAAAAABGEhAAAAAAAEYSEAAAAAAARAAABRIAEAAAAAAACgAQAAAAAAA4AAAHcgAQAAAAAAAGABAAAAAAAGYYEAAAAAAANAAACYIAEAAAAAAAKgAQgIEAAAAAAAAAGgAQgIEAAAAAAAAADgAACoIAEAAAAAAAAkAAAAAAgD8AAIA:AACAPwAAgD86ABAAAAAAADMAAAkSABAAAQAAACoAEICBAAAAAAAAABoAEICBAAAAAAAAADgAAAeCABAAAAAAADoAEAAAAAAACgAQAAEAAAA4AAAHEgAQAAEAAAA6ABAAAAAAADoAEAAAAAAAMgAACSIAEAABAAAACgAQAAEAAAABQAAAX66qPAFAAAA2Wq69MgAACSIAEAABAAAACgAQAAEAAAAaABAAAQAAAAFAAADidjg%MgAACSIAEAABAAAACgAQAAEAAAAaABAAAQAAAAFAAAAEHam%MgAACRIAEAABAAAACgAQAAEAAAAaABAAAQAAAAFAAAA4938:OAAAByIAEAABAAAAOgAQAAAAAAAKABAAAQAAADIAAAkiABAAAQAAABoAEAABAAAAAUAAAAAAAMABQAAA2w:JPzEAAAlCABAAAQAAACoAEICBAAAAAAAAABoAEICBAAAAAAAAAAEAAAciABAAAQAAACoAEAABAAAAGgAQAAEAAAAyAAAJggAQAAAAAAA6ABAAAAAAAAoAEAABAAAAGgAQAAEAAAAxAAAIMgAQAAEAAACGABAAAAAAAIYAEIBBAAAAAAAAAAEAAAciABAAAQAAABoAEAABAAAAAUAAANsPScAAAAAHggAQAAAAAAA6ABAAAAAAABoAEAABAAAAMwAACCIAEAABAAAAKgAQAAAAAAAaABCAQQAAAAAAAAAxAAAIIgAQAAEAAAAaABAAAQAAABoAEIBBAAAAAQAAADQAAAgiABAAAAAAACoAEAAAAAAAGgAQgEEAAAAAAAAAHQAACCIAEAAAAAAAGgAQAAAAAAAaABCAQQAAAAAAAAABAAAHIgAQAAAAAAAaABAAAAAAABoAEAABAAAANwAACiIAEAAAAAAAGgAQAAAAAAA6ABCAQQAAAAAAAAA6ABAAAAAAAAAAAAgiABAAAAAAABoAEAAAAAAACoAgAAAAAAAAAAAAAAAAByIAEAAAAAAAGgAQAAAAAAABQAAA2w9JQDgAAAcSABAAAgAAABoAEAAAAAAAAUAAAIP5Ij4yAAAKIgAQAAAAAAAKABCAgQAAAAAAAAABQAAAMG6ZvAFAAAAnFpg9MgAACiIAEAAAAAAAGgAQAAAAAAAKABCAgQAAAAAAAAABQAAAhDRZvjIAAAoiABAAAAAAABoAEAAAAAAACgAQgIEAAAAAAAAAAUAAAKQNyT8AAAAIEgAQAAAAAAAKABCAwQAAAAAAAAABQAAAAACAP0sAAAUSABAAAAAAAAoAEAAAAAAAOAAAB0IAEAAAAAAACgAQAAAAAAAaABAAAAAAADIAAAlCABAAAAAAACoAEAAAAAAAAUAAAAAAAMABQAAA2w9JQAEAAAdCABAAAAAAAAoAEAABAAAAKgAQAAAAAAAyAAAJEgAQAAAAAAAaABAAAAAAAAoAEAAAAAAAKgAQAAAAAAA4AAAHIgAQAAIAAAAKABAAAAAAAAFAAACD%aI%RQAACfIAEAAAAAAARgAQAAIAAABGfhAAAAAAAABgEAAAAAAAOAAACHIgEAAAAAAARgIQAAAAAAD2jyAAAAAAAAAAAAA2AAAFgiAQAAAAAAABQAAAAAAAAD4AAAFTVEFUdAAAACsAAAADAAAAAAAAAAIAAAAjAAAAAAAAAAQAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";
kha_Shaders.world_pass_vertData0 = "s1240:Am5vcgAAcG9zAAEBJEdsb2JhbHMAAAFTTVZQAAAAAABAAAAABAREWEJDAWvUj:hTvlSpp43Hljh:kAEAAAB8AwAABQAAADQAAAD0AAAAQAEAAJgBAAAAAwAAUkRFRrgAAAABAAAASAAAAAEAAAAcAAAAAAT%:wABAACQAAAAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAkR2xvYmFscwCrq6s8AAAAAQAAAGAAAABAAAAAAAAAAAAAAAB4AAAAAAAAAEAAAAACAAAAgAAAAAAAAABTTVZQAKurqwMAAwAEAAQAAAAAAAAAAABNaWNyb3NvZnQgKFIpIEhMU0wgU2hhZGVyIENvbXBpbGVyIDEwLjEASVNHTkQAAAACAAAACAAAADgAAAAAAAAAAAAAAAMAAAAAAAAABwcAADgAAAABAAAAAAAAAAMAAAABAAAABwcAAFRFWENPT1JEAKurq09TR05QAAAAAgAAAAgAAAA4AAAAAAAAAAAAAAADAAAAAAAAAAcIAABBAAAAAAAAAAEAAAADAAAAAQAAAA8AAABURVhDT09SRABTVl9Qb3NpdGlvbgCrq6tTSERSYAEAAEAAAQBYAAAAWQAABEaOIAAAAAAABAAAAF8AAANyEBAAAAAAAF8AAANyEBAAAQAAAGUAAANyIBAAAAAAAGcAAATyIBAAAQAAAAEAAABoAAACAgAAADYAAAVyIBAAAAAAAEYSEAAAAAAANgAABXIAEAAAAAAARhIQAAEAAAA2AAAFggAQAAAAAAABQAAAAACAPxEAAAgSABAAAQAAAEYOEAAAAAAARo4gAAAAAAACAAAAEQAACCIAEAABAAAARg4QAAAAAABGjiAAAAAAAAMAAAAAAAAHEgAQAAEAAAAaABAAAQAAAAoAEAABAAAANgAABYIgEAABAAAAGgAQAAEAAAA4AAAHQiAQAAEAAAAKABAAAQAAAAFAAAAAAAA:EQAACBIgEAABAAAARg4QAAAAAABGjiAAAAAAAAAAAAARAAAIIiAQAAEAAABGDhAAAAAAAEaOIAAAAAAAAQAAAD4AAAFTVEFUdAAAAAsAAAACAAAAAAAAAAQAAAAGAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";
kha_System.renderListeners = [];
kha_System.foregroundListeners = [];
kha_System.resumeListeners = [];
kha_System.pauseListeners = [];
kha_System.backgroundListeners = [];
kha_System.shutdownListeners = [];
kha_System.dropFilesListeners = [];
kha_SystemImpl.maxGamepads = 4;
kha_SystemImpl.mouseLockListeners = [];
kha_Window.windows = [];
kha_graphics2_Graphics.fontGlyphs = (function($this) {
	var $r;
	var _g = [];
	{
		var _g1 = 32;
		while(_g1 < 256) _g.push(_g1++);
	}
	$r = _g;
	return $r;
}(this));
kha_graphics4_Graphics.mat = new Float32Array(16);
kha_graphics4_Graphics2.thrown = false;
kha_input_Gamepad.__meta__ = { statics : { sendConnectEvent : { input : null}, sendDisconnectEvent : { input : null}}, fields : { sendAxisEvent : { input : null}, sendButtonEvent : { input : null}}};
kha_input_Gamepad.instances = [];
kha_input_Gamepad.connectListeners = [];
kha_input_Gamepad.disconnectListeners = [];
kha_input_Keyboard.__meta__ = { fields : { sendDownEvent : { input : null}, sendUpEvent : { input : null}, sendPressEvent : { input : null}}};
kha_input_Mouse.__meta__ = { fields : { sendLeaveEvent : { input : null}, sendDownEvent : { input : null}, sendUpEvent : { input : null}, sendMoveEvent : { input : null}, sendWheelEvent : { input : null}}};
zui_Nodes.elementsBaked = false;
zui_Nodes.clipboard = "";
zui_Nodes.boxSelect = false;
zui_Nodes.boxSelectX = 0;
zui_Nodes.boxSelectY = 0;
zui_Nodes.excludeRemove = [];
zui_Themes.dark = { NAME : "Default Dark", WINDOW_BG_COL : -13421773, WINDOW_TINT_COL : -1, ACCENT_COL : -12303292, ACCENT_HOVER_COL : -11974327, ACCENT_SELECT_COL : -10461088, BUTTON_COL : -12171706, BUTTON_TEXT_COL : -1513499, BUTTON_HOVER_COL : -11974327, BUTTON_PRESSED_COL : -15000805, TEXT_COL : -1513499, LABEL_COL : -3618616, SEPARATOR_COL : -14211289, HIGHLIGHT_COL : -14656100, CONTEXT_COL : -14540254, PANEL_BG_COL : -12895429, FONT_SIZE : 13, ELEMENT_W : 100, ELEMENT_H : 24, ELEMENT_OFFSET : 4, ARROW_SIZE : 5, BUTTON_H : 22, CHECK_SIZE : 15, CHECK_SELECT_SIZE : 8, SCROLL_W : 6, TEXT_OFFSET : 8, TAB_W : 6, FILL_WINDOW_BG : false, FILL_BUTTON_BG : true, FILL_ACCENT_BG : false, LINK_STYLE : 0};
zui_Zui.alwaysRedrawWindow = true;
zui_Zui.keyRepeat = true;
zui_Zui.dynamicGlyphLoad = true;
zui_Zui.touchControls = false;
zui_Zui.keyRepeatTime = 0.0;
zui_Zui.textToPaste = "";
zui_Zui.textToCopy = "";
zui_Zui.isCut = false;
zui_Zui.isCopy = false;
zui_Zui.isPaste = false;
zui_Zui.copyFrame = 0;
zui_Zui.comboFirst = true;
Main.main();
})(typeof exports != "undefined" ? exports : typeof window != "undefined" ? window : typeof self != "undefined" ? self : this, typeof window != "undefined" ? window : typeof global != "undefined" ? global : typeof self != "undefined" ? self : this);
